(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["bwflow"]=e():t["bwflow"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"014b":function(t,e,n){"use strict";var r=n("e53d"),i=n("07e3"),o=n("8e60"),a=n("63b6"),c=n("9138"),s=n("ebfd").KEY,u=n("294c"),l=n("dbdb"),h=n("45f2"),f=n("62a0"),p=n("5168"),d=n("ccb9"),v=n("6718"),y=n("47ee"),g=n("9003"),m=n("e4ae"),x=n("f772"),_=n("241e"),w=n("36c3"),b=n("1bc3"),S=n("aebd"),E=n("a159"),k=n("0395"),O=n("bf0b"),j=n("9aa9"),C=n("d9f6"),M=n("c3a1"),P=O.f,T=C.f,R=k.f,A=r.Symbol,L=r.JSON,B=L&&L.stringify,z="prototype",D=p("_hidden"),F=p("toPrimitive"),$={}.propertyIsEnumerable,N=l("symbol-registry"),I=l("symbols"),H=l("op-symbols"),W=Object[z],G="function"==typeof A&&!!j.f,V=r.QObject,q=!V||!V[z]||!V[z].findChild,Y=o&&u((function(){return 7!=E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=P(W,e);r&&delete W[e],T(t,e,n),r&&t!==W&&T(W,e,r)}:T,U=function(t){var e=I[t]=E(A[z]);return e._k=t,e},X=G&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},K=function(t,e,n){return t===W&&K(H,e,n),m(t),e=b(e,!0),m(n),i(I,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=E(n,{enumerable:S(0,!1)})):(i(t,D)||T(t,D,S(1,{})),t[D][e]=!0),Y(t,e,n)):T(t,e,n)},Z=function(t,e){m(t);var n,r=y(e=w(e)),i=0,o=r.length;while(o>i)K(t,n=r[i++],e[n]);return t},J=function(t,e){return void 0===e?E(t):Z(E(t),e)},Q=function(t){var e=$.call(this,t=b(t,!0));return!(this===W&&i(I,t)&&!i(H,t))&&(!(e||!i(this,t)||!i(I,t)||i(this,D)&&this[D][t])||e)},tt=function(t,e){if(t=w(t),e=b(e,!0),t!==W||!i(I,e)||i(H,e)){var n=P(t,e);return!n||!i(I,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},et=function(t){var e,n=R(w(t)),r=[],o=0;while(n.length>o)i(I,e=n[o++])||e==D||e==s||r.push(e);return r},nt=function(t){var e,n=t===W,r=R(n?H:w(t)),o=[],a=0;while(r.length>a)!i(I,e=r[a++])||n&&!i(W,e)||o.push(I[e]);return o};G||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(H,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),Y(this,t,S(1,n))};return o&&q&&Y(W,t,{configurable:!0,set:e}),U(t)},c(A[z],"toString",(function(){return this._k})),O.f=tt,C.f=K,n("6abf").f=k.f=et,n("355d").f=Q,j.f=nt,o&&!n("b8e3")&&c(W,"propertyIsEnumerable",Q,!0),d.f=function(t){return U(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:A});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;rt.length>it;)p(rt[it++]);for(var ot=M(p.store),at=0;ot.length>at;)v(ot[at++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(N,t+="")?N[t]:N[t]=A(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!G,"Object",{create:J,defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var ct=u((function(){j.f(1)}));a(a.S+a.F*ct,"Object",{getOwnPropertySymbols:function(t){return j.f(_(t))}}),L&&a(a.S+a.F*(!G||u((function(){var t=A();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))}))),"JSON",{stringify:function(t){var e,n,r=[t],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=e=r[1],(x(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,B.apply(L,r)}}),A[z][F]||n("35e8")(A[z],F,A[z].valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"01f9":function(t,e,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),c=n("84f2"),s=n("41a0"),u=n("7f20"),l=n("38fd"),h=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",d="keys",v="values",y=function(){return this};t.exports=function(t,e,n,g,m,x,_){s(n,e,g);var w,b,S,E=function(t){if(!f&&t in C)return C[t];switch(t){case d:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",O=m==v,j=!1,C=t.prototype,M=C[h]||C[p]||m&&C[m],P=M||E(m),T=m?O?E("entries"):P:void 0,R="Array"==e&&C.entries||M;if(R&&(S=l(R.call(new t)),S!==Object.prototype&&S.next&&(u(S,k,!0),r||"function"==typeof S[h]||a(S,h,y))),O&&M&&M.name!==v&&(j=!0,P=function(){return M.call(this)}),r&&!_||!f&&!j&&C[h]||a(C,h,P),c[e]=P,c[k]=y,m)if(w={values:O?P:E(v),keys:x?P:E(d),entries:T},_)for(b in w)b in C||o(C,b,w[b]);else i(i.P+i.F*(f||j),e,w);return w}},"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var o,a,c=String(i(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(o=c.charCodeAt(s),o<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?t?c.charAt(s):o:t?c.slice(s,s+2):a-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0395":function(t,e,n){var r=n("36c3"),i=n("6abf").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?c(t):i(r(t))}},"07e3":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"0a49":function(t,e,n){var r=n("9b43"),i=n("626a"),o=n("4bf8"),a=n("9def"),c=n("cd1c");t.exports=function(t,e){var n=1==t,s=2==t,u=3==t,l=4==t,h=6==t,f=5==t||h,p=e||c;return function(e,c,d){for(var v,y,g=o(e),m=i(g),x=r(c,d,3),_=a(m.length),w=0,b=n?p(e,_):s?p(e,0):void 0;_>w;w++)if((f||w in m)&&(v=m[w],y=x(v,w,g),t))if(n)b[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:b.push(v)}else if(l)return!1;return h?-1:u||l?l:b}}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var r=n("ce10"),i=n("e11e");t.exports=Object.keys||function(t){return r(t,i)}},"0fc9":function(t,e,n){var r=n("3a38"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},1062:function(t,e,n){"use strict";n("9252")},1169:function(t,e,n){var r=n("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"11e9":function(t,e,n){var r=n("52a7"),i=n("4630"),o=n("6821"),a=n("6a99"),c=n("69a8"),s=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=o(t),e=a(e,!0),s)try{return u(t,e)}catch(n){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},1495:function(t,e,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){i(t);var n,a=o(e),c=a.length,s=0;while(c>s)r.f(t,n=a[s++],e[n]);return t}},1654:function(t,e,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1bc3":function(t,e,n){var r=n("f772");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"1c01":function(t,e,n){var r=n("5ca1");r(r.S+r.F*!n("9e1e"),"Object",{defineProperty:n("86cc").f})},"1ec9":function(t,e,n){var r=n("f772"),i=n("e53d").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),o=n("79e5"),a=n("be13"),c=n("2b4c"),s=n("520a"),u=c("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=c(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!e})):void 0;if(!p||!d||"replace"===t&&!l||"split"===t&&!h){var v=/./[f],y=n(a,f,""[t],(function(t,e,n,r,i){return e.exec===s?p&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=y[0],m=y[1];r(String.prototype,t,g),i(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"23b6":function(t,e,n){},"23c6":function(t,e,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(c=r(e))&&"function"==typeof e.callee?"Arguments":c}},"241e":function(t,e,n){var r=n("25eb");t.exports=function(t){return Object(r(t))}},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2aba":function(t,e,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),c=n("fa5b"),s="toString",u=(""+c).split(s);n("8378").inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,c){var s="function"==typeof n;s&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(s&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:c?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,s,(function(){return"function"==typeof this&&this[a]||c.call(this)}))},"2aeb":function(t,e,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),c=function(){},s="prototype",u=function(){var t,e=n("230e")("iframe"),r=o.length,i="<",a=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),u=t.F;while(r--)delete u[s][o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[s]=r(t),n=new c,c[s]=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},"2b4c":function(t,e,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,c=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};c.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"30f1":function(t,e,n){"use strict";var r=n("b8e3"),i=n("63b6"),o=n("9138"),a=n("35e8"),c=n("481b"),s=n("8f60"),u=n("45f2"),l=n("53e2"),h=n("5168")("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",d="keys",v="values",y=function(){return this};t.exports=function(t,e,n,g,m,x,_){s(n,e,g);var w,b,S,E=function(t){if(!f&&t in C)return C[t];switch(t){case d:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",O=m==v,j=!1,C=t.prototype,M=C[h]||C[p]||m&&C[m],P=M||E(m),T=m?O?E("entries"):P:void 0,R="Array"==e&&C.entries||M;if(R&&(S=l(R.call(new t)),S!==Object.prototype&&S.next&&(u(S,k,!0),r||"function"==typeof S[h]||a(S,h,y))),O&&M&&M.name!==v&&(j=!0,P=function(){return M.call(this)}),r&&!_||!f&&!j&&C[h]||a(C,h,P),c[e]=P,c[k]=y,m)if(w={values:O?P:E(v),keys:x?P:E(d),entries:T},_)for(b in w)b in C||o(C,b,w[b]);else i(i.P+i.F*(f||j),e,w);return w}},"32e9":function(t,e,n){var r=n("86cc"),i=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"32fc":function(t,e,n){var r=n("e53d").document;t.exports=r&&r.documentElement},"335c":function(t,e,n){var r=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"355d":function(t,e){e.f={}.propertyIsEnumerable},"35e8":function(t,e,n){var r=n("d9f6"),i=n("aebd");t.exports=n("8e60")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),i=n("77f1"),o=n("9def");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,c=i(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,u=void 0===s?n:i(s,n);while(u>c)e[c++]=t;return e}},"36c3":function(t,e,n){var r=n("335c"),i=n("25eb");t.exports=function(t){return r(i(t))}},"38fd":function(t,e,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"3a38":function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"3fb5":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(t){return i(r(t))}}))},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"45f2":function(t,e,n){var r=n("d9f6").f,i=n("07e3"),o=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"47ee":function(t,e,n){var r=n("c3a1"),i=n("9aa9"),o=n("355d");t.exports=function(t){var e=r(t),n=i.f;if(n){var a,c=n(t),s=o.f,u=0;while(c.length>u)s.call(t,a=c[u++])&&e.push(a)}return e}},"481b":function(t,e){t.exports={}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4f37":function(t,e,n){"use strict";n("aa77")("trim",(function(t){return function(){return t(this,3)}}))},"504c":function(t,e,n){var r=n("9e1e"),i=n("0d58"),o=n("6821"),a=n("52a7").f;t.exports=function(t){return function(e){var n,c=o(e),s=i(c),u=s.length,l=0,h=[];while(u>l)n=s[l++],r&&!a.call(c,n)||h.push(t?[n,c[n]]:c[n]);return h}}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,n){var r=n("dbdb")("wks"),i=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,c=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};c.store=r},"520a":function(t,e,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,c="lastIndex",s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[c]||0!==e[c]}(),u=void 0!==/()??/.exec("")[1],l=s||u;l&&(a=function(t){var e,n,a,l,h=this;return u&&(n=new RegExp("^"+h.source+"$(?!\\s)",r.call(h))),s&&(e=h[c]),a=i.call(h,t),s&&a&&(h[c]=h.global?a.index+a[0].length:e),u&&a&&a.length>1&&o.call(a[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a}),t.exports=a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"53e2":function(t,e,n){var r=n("07e3"),i=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},5537:function(t,e,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,n){var r=n("dbdb")("keys"),i=n("62a0");t.exports=function(t){return r[t]||(r[t]=i(t))}},"57e7":function(t,e,n){"use strict";var r=n("5ca1"),i=n("c366")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n("2f21")(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},"584a":function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},"58b2":function(t,e,n){var r=n("5ca1");r(r.S+r.F*!n("9e1e"),"Object",{defineProperties:n("1495")})},"5b4e":function(t,e,n){var r=n("36c3"),i=n("b447"),o=n("0fc9");t.exports=function(t){return function(e,n,a){var c,s=r(e),u=i(s.length),l=o(a,u);if(t&&n!=n){while(u>l)if(c=s[l++],c!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}}},"5ca1":function(t,e,n){var r=n("7726"),i=n("8378"),o=n("32e9"),a=n("2aba"),c=n("9b43"),s="prototype",u=function(t,e,n){var l,h,f,p,d=t&u.F,v=t&u.G,y=t&u.S,g=t&u.P,m=t&u.B,x=v?r:y?r[e]||(r[e]={}):(r[e]||{})[s],_=v?i:i[e]||(i[e]={}),w=_[s]||(_[s]={});for(l in v&&(n=e),n)h=!d&&x&&void 0!==x[l],f=(h?x:n)[l],p=m&&h?c(f,r):g&&"function"==typeof f?c(Function.call,f):f,x&&a(x,l,f,t&u.U),_[l]!=f&&o(_,l,p),g&&w[l]!=f&&(w[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"5d58":function(t,e,n){t.exports=n("d8d6")},"5eda":function(t,e,n){var r=n("5ca1"),i=n("8378"),o=n("79e5");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"613b":function(t,e,n){var r=n("5537")("keys"),i=n("ca5a");t.exports=function(t){return r[t]||(r[t]=i(t))}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"62a0":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},"63b6":function(t,e,n){var r=n("e53d"),i=n("584a"),o=n("d864"),a=n("35e8"),c=n("07e3"),s="prototype",u=function(t,e,n){var l,h,f,p=t&u.F,d=t&u.G,v=t&u.S,y=t&u.P,g=t&u.B,m=t&u.W,x=d?i:i[e]||(i[e]={}),_=x[s],w=d?r:v?r[e]:(r[e]||{})[s];for(l in d&&(n=e),n)h=!p&&w&&void 0!==w[l],h&&c(x,l)||(f=h?w[l]:n[l],x[l]=d&&"function"!=typeof w[l]?n[l]:g&&h?o(f,r):m&&w[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((x.virtual||(x.virtual={}))[l]=f,t&u.R&&_&&!_[l]&&a(_,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"668d":function(t,e,n){"use strict";var r=n("7d7d");function i(t,e){return Object.prototype.hasOwnProperty.call(t,e.name||e)}function o(t,e,n){var i=r.extend(n[e.name]||[],t,e,n);Object.defineProperty(n,e.name,{enumerable:e.enumerable,value:i}),i.length&&i.forEach((function(r){t.set(r,e.inverse,n)}))}function a(t,e,n){var r=e.inverse,i=n[e.name];Object.defineProperty(n,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return i},set:function(e){if(e!==i){var o=i;i=null,o&&t.unset(o,r,n),i=e,t.set(i,r,n)}}})}function c(t,e){if(!(this instanceof c))return new c(t,e);t.inverse=e,e.inverse=t,this.props={},this.props[t.name]=t,this.props[e.name]=e}c.prototype.bind=function(t,e){if("string"===typeof e){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?o(this,e,t):a(this,e,t)},c.prototype.ensureRefsCollection=function(t,e){var n=t[e.name];return r.isExtended(n)||o(this,e,t),n},c.prototype.ensureBound=function(t,e){i(t,e)||this.bind(t,e)},c.prototype.unset=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).remove(n):t[e.name]=void 0)},c.prototype.set=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).add(n):t[e.name]=n)},t.exports=c},6718:function(t,e,n){var r=n("e53d"),i=n("584a"),o=n("b8e3"),a=n("ccb9"),c=n("d9f6").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:a.f(t)})}},"67bb":function(t,e,n){t.exports=n("f921")},6821:function(t,e,n){var r=n("626a"),i=n("be13");t.exports=function(t){return r(i(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"69d3":function(t,e,n){n("6718")("asyncIterator")},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6abf":function(t,e,n){var r=n("e6f3"),i=n("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"6b4c":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"6c1c":function(t,e,n){n("c367");for(var r=n("e53d"),i=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<c.length;s++){var u=c[s],l=r[u],h=l&&l.prototype;h&&!h[a]&&i(h,a,u),o[u]=o.Array}},"6c7b":function(t,e,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"6d67":function(t,e,n){"use strict";var r=n("5ca1"),i=n("0a49")(1);r(r.P+r.F*!n("2f21")([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},"71c1":function(t,e,n){var r=n("3a38"),i=n("25eb");t.exports=function(t){return function(e,n){var o,a,c=String(i(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(o=c.charCodeAt(s),o<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?t?c.charAt(s):o:t?c.slice(s,s+2):a-56320+(o-55296<<10)+65536)}}},"71df":function(t,e,n){"use strict";n("23b6")},7514:function(t,e,n){"use strict";var r=n("5ca1"),i=n("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},"765d":function(t,e,n){n("6718")("observable")},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},"794b":function(t,e,n){t.exports=!n("8e60")&&!n("294c")((function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7d7d":function(t,e,n){"use strict";function r(t,e,n,r){var i=n.inverse;return Object.defineProperty(t,"remove",{value:function(t){var n=this.indexOf(t);return-1!==n&&(this.splice(n,1),e.unset(t,i,r)),t}}),Object.defineProperty(t,"contains",{value:function(t){return-1!==this.indexOf(t)}}),Object.defineProperty(t,"add",{value:function(t,n){var o=this.indexOf(t);if("undefined"===typeof n){if(-1!==o)return;n=this.length}-1!==o&&this.splice(o,1),this.splice(n,0,t),-1===o&&e.set(t,i,r)}}),Object.defineProperty(t,"__refs_collection",{value:!0}),t}function i(t){return!0===t.__refs_collection}t.exports.extend=r,t.exports.isExtended=i},"7e90":function(t,e,n){var r=n("d9f6"),i=n("e4ae"),o=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){i(t);var n,a=o(e),c=a.length,s=0;while(c>s)r.f(t,n=a[s++],e[n]);return t}},"7f20":function(t,e,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},"7f7f":function(t,e,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n("9e1e")&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8378:function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},8436:function(t,e){t.exports=function(){}},"84f2":function(t,e){t.exports={}},"85f2":function(t,e,n){t.exports=n("454f")},8615:function(t,e,n){var r=n("5ca1"),i=n("504c")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},"86cc":function(t,e,n){var r=n("cb7c"),i=n("c69a"),o=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},8875:function(t,e,n){var r,i,o;(function(n,a){i=[],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,r,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,c=o.exec(p.stack)||a.exec(p.stack),s=c&&c[1]||!1,u=c&&c[2]||!1,l=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");s===l&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(r,"$1").trim());for(var f=0;f<h.length;f++){if("interactive"===h[f].readyState)return h[f];if(h[f].src===s)return h[f];if(s===l&&h[f].innerHTML&&h[f].innerHTML.trim()===i)return h[f]}return null}}return t}))},"8e60":function(t,e,n){t.exports=!n("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"8e6e":function(t,e,n){var r=n("5ca1"),i=n("990b"),o=n("6821"),a=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),s=a.f,u=i(r),l={},h=0;while(u.length>h)n=s(r,e=u[h++]),void 0!==n&&c(l,e,n);return l}})},"8f60":function(t,e,n){"use strict";var r=n("a159"),i=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},"8fcf":function(t,e,n){t.exports=n("668d"),t.exports.Collection=n("7d7d")},9003:function(t,e,n){var r=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},9093:function(t,e,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},9138:function(t,e,n){t.exports=n("35e8")},9252:function(t,e,n){},"990b":function(t,e,n){var r=n("9093"),i=n("2621"),o=n("cb7c"),a=n("7726").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),t.exports=function(t){i[r][t]=!0}},"9def":function(t,e,n){var r=n("4588"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a159:function(t,e,n){var r=n("e4ae"),i=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),c=function(){},s="prototype",u=function(){var t,e=n("1ec9")("iframe"),r=o.length,i="<",a=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),u=t.F;while(r--)delete u[s][o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[s]=r(t),n=new c,c[s]=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},a481:function(t,e,n){"use strict";var r=n("cb7c"),i=n("4bf8"),o=n("9def"),a=n("4588"),c=n("0390"),s=n("5f1b"),u=Math.max,l=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,d=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,v){return[function(r,i){var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=v(n,t,this,e);if(i.done)return i.value;var h=r(t),f=String(this),p="function"===typeof e;p||(e=String(e));var g=h.global;if(g){var m=h.unicode;h.lastIndex=0}var x=[];while(1){var _=s(h,f);if(null===_)break;if(x.push(_),!g)break;var w=String(_[0]);""===w&&(h.lastIndex=c(f,o(h.lastIndex),m))}for(var b="",S=0,E=0;E<x.length;E++){_=x[E];for(var k=String(_[0]),O=u(l(a(_.index),f.length),0),j=[],C=1;C<_.length;C++)j.push(d(_[C]));var M=_.groups;if(p){var P=[k].concat(j,O,f);void 0!==M&&P.push(M);var T=String(e.apply(void 0,P))}else T=y(k,f,O,j,M,e);O>=S&&(b+=f.slice(S,O)+T,S=O+k.length)}return b+f.slice(S)}];function y(t,e,r,o,a,c){var s=r+t.length,u=o.length,l=p;return void 0!==a&&(a=i(a),l=f),n.call(c,l,(function(n,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":c=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var f=h(l/10);return 0===f?n:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}c=o[l-1]}return void 0===c?"":c}))}}))},aa77:function(t,e,n){var r=n("5ca1"),i=n("be13"),o=n("79e5"),a=n("fdef"),c="["+a+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),h=function(t,e,n){var i={},c=o((function(){return!!a[t]()||s[t]()!=s})),u=i[t]=c?e(f):a[t];n&&(i[n]=u),r(r.P+r.F*c,"String",i)},f=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=h},ac6a:function(t,e,n){for(var r=n("cadf"),i=n("0d58"),o=n("2aba"),a=n("7726"),c=n("32e9"),s=n("84f2"),u=n("2b4c"),l=u("iterator"),h=u("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],x=a[g],_=x&&x.prototype;if(_&&(_[l]||c(_,l,f),_[h]||c(_,h,g),s[g]=f,m))for(y in r)_[y]||o(_,y,r[y],!0)}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},b447:function(t,e,n){var r=n("3a38"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},bd00:function(t,e,n){},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},bf0b:function(t,e,n){var r=n("355d"),i=n("aebd"),o=n("36c3"),a=n("1bc3"),c=n("07e3"),s=n("794b"),u=Object.getOwnPropertyDescriptor;e.f=n("8e60")?u:function(t,e){if(t=o(t),e=a(e,!0),s)try{return u(t,e)}catch(n){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},c207:function(t,e){},c366:function(t,e,n){var r=n("6821"),i=n("9def"),o=n("77f1");t.exports=function(t){return function(e,n,a){var c,s=r(e),u=i(s.length),l=o(a,u);if(t&&n!=n){while(u>l)if(c=s[l++],c!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}}},c367:function(t,e,n){"use strict";var r=n("8436"),i=n("50ed"),o=n("481b"),a=n("36c3");t.exports=n("30f1")(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},c3a1:function(t,e,n){var r=n("e6f3"),i=n("1691");t.exports=Object.keys||function(t){return r(t,i)}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cadf:function(t,e,n){"use strict";var r=n("9c6c"),i=n("d53b"),o=n("84f2"),a=n("6821");t.exports=n("01f9")(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ccb9:function(t,e,n){e.f=n("5168")},cd1c:function(t,e,n){var r=n("e853");t.exports=function(t,e){return new(r(t))(e)}},ce10:function(t,e,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");t.exports=function(t,e){var n,c=i(t),s=0,u=[];for(n in c)n!=a&&r(c,n)&&u.push(n);while(e.length>s)r(c,n=e[s++])&&(~o(u,n)||u.push(n));return u}},d25f:function(t,e,n){"use strict";var r=n("5ca1"),i=n("0a49")(2);r(r.P+r.F*!n("2f21")([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d864:function(t,e,n){var r=n("79aa");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},d8d6:function(t,e,n){n("1654"),n("6c1c"),t.exports=n("ccb9").f("iterator")},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d9f6:function(t,e,n){var r=n("e4ae"),i=n("794b"),o=n("1bc3"),a=Object.defineProperty;e.f=n("8e60")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},dbdb:function(t,e,n){var r=n("584a"),i=n("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e4ae:function(t,e,n){var r=n("f772");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e5ab:function(t,e,n){"use strict";var r=/,?([a-z]),?/gi,i=parseFloat,o=Math,a=o.PI,c=o.min,s=o.max,u=o.pow,l=o.abs,h=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,f=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,p=Array.isArray||function(t){return t instanceof Array};function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)d(t,n)&&(e[n]=v(t[n]));return e}function y(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function g(t){function e(){var n=Array.prototype.slice.call(arguments,0),r=n.join("␀"),i=e.cache=e.cache||{},o=e.count=e.count||[];return d(i,r)?(y(o,r),i[r]):(o.length>=1e3&&delete i[o.shift()],o.push(r),i[r]=t.apply(0,n),i[r])}return e}function m(t){if(!t)return null;var e=x(t);if(e.arr)return v(e.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return p(t)&&p(t[0])&&(r=v(t)),r.length||String(t).replace(h,(function(t,e,i){var o=[],a=e.toLowerCase();i.replace(f,(function(t,e){e&&o.push(+e)})),"m"==a&&o.length>2&&(r.push([e].concat(o.splice(0,2))),a="l",e="m"==e?"l":"L");while(o.length>=n[a])if(r.push([e].concat(o.splice(0,n[a]))),!n[a])break})),r.toString=x.toString,e.arr=v(r),r}function x(t){var e=x.ps=x.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var n in e)d(e,n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])})),e[t]}function _(t,e,n,r){return 1===arguments.length&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,height:r,x2:t+n,y2:e+r}}function w(){return this.join(",").replace(r,"$1")}function b(t){var e=v(t);return e.toString=w,e}function S(t,e,n,r,i,o,a,c,s){var l=1-s,h=u(l,3),f=u(l,2),p=s*s,d=p*s,v=h*t+3*f*s*n+3*l*s*s*i+d*a,y=h*e+3*f*s*r+3*l*s*s*o+d*c;return{x:P(v),y:P(y)}}function E(t){var e=F.apply(null,t);return _(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0)}function k(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function O(t,e){return t=_(t),e=_(e),k(e,t.x,t.y)||k(e,t.x2,t.y)||k(e,t.x,t.y2)||k(e,t.x2,t.y2)||k(t,e.x,e.y)||k(t,e.x2,e.y)||k(t,e.x,e.y2)||k(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function j(t,e,n,r,i){var o=-3*e+9*n-9*r+3*i,a=t*o+6*e-12*n+6*r;return t*a-3*e+3*n}function C(t,e,n,r,i,a,c,s,u){null==u&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,h=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,v=0;v<h;v++){var y=l*f[v]+l,g=j(y,t,n,i,c),m=j(y,e,r,a,s),x=g*g+m*m;d+=p[v]*o.sqrt(x)}return l*d}function M(t,e,n,r,i,o,a,u){if(!(s(t,n)<c(i,a)||c(t,n)>s(i,a)||s(e,r)<c(o,u)||c(e,r)>s(o,u))){var l=(t*r-e*n)*(i-a)-(t-n)*(i*u-o*a),h=(t*r-e*n)*(o-u)-(e-r)*(i*u-o*a),f=(t-n)*(o-u)-(e-r)*(i-a);if(f){var p=P(l/f),d=P(h/f),v=+p.toFixed(2),y=+d.toFixed(2);if(!(v<+c(t,n).toFixed(2)||v>+s(t,n).toFixed(2)||v<+c(i,a).toFixed(2)||v>+s(i,a).toFixed(2)||y<+c(e,r).toFixed(2)||y>+s(e,r).toFixed(2)||y<+c(o,u).toFixed(2)||y>+s(o,u).toFixed(2)))return{x:p,y:d}}}}function P(t){return Math.round(1e11*t)/1e11}function T(t,e,n){var r=E(t),i=E(e);if(!O(r,i))return n?0:[];for(var o=C.apply(0,t),a=C.apply(0,e),c=L(t)?1:~~(o/5)||1,s=L(e)?1:~~(a/5)||1,u=[],h=[],f={},p=n?0:[],d=0;d<c+1;d++){var v=S.apply(0,t.concat(d/c));u.push({x:v.x,y:v.y,t:d/c})}for(d=0;d<s+1;d++)v=S.apply(0,e.concat(d/s)),h.push({x:v.x,y:v.y,t:d/s});for(d=0;d<c;d++)for(var y=0;y<s;y++){var g,m=u[d],x=u[d+1],_=h[y],w=h[y+1],b=l(x.x-m.x)<.01?"y":"x",k=l(w.x-_.x)<.01?"y":"x",j=M(m.x,m.y,x.x,x.y,_.x,_.y,w.x,w.y);if(j){if(g=j.x.toFixed(9)+"#"+j.y.toFixed(9),f[g])continue;f[g]=!0;var P=m.t+l((j[b]-m[b])/(x[b]-m[b]))*(x.t-m.t),T=_.t+l((j[k]-_[k])/(w[k]-_[k]))*(w.t-_.t);P>=0&&P<=1&&T>=0&&T<=1&&(n?p++:p.push({x:j.x,y:j.y,t1:P,t2:T}))}}return p}function R(t,e,n){t=$(t),e=$(e);for(var r,i,o,a,c,s,u,l,h,f,p=n?0:[],d=0,v=t.length;d<v;d++){var y=t[d];if("M"==y[0])r=c=y[1],i=s=y[2];else{"C"==y[0]?(h=[r,i].concat(y.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,c,s,c,s],r=c,i=s);for(var g=0,m=e.length;g<m;g++){var x=e[g];if("M"==x[0])o=u=x[1],a=l=x[2];else{"C"==x[0]?(f=[o,a].concat(x.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,u,l,u,l],o=u,a=l);var _=T(h,f,n);if(n)p+=_;else{for(var w=0,b=_.length;w<b;w++)_[w].segment1=d,_[w].segment2=g,_[w].bez1=h,_[w].bez2=f;p=p.concat(_)}}}}}return p}function A(t){var e=x(t);if(e.abs)return b(e.abs);if(p(t)&&p(t&&t[0])||(t=m(t)),!t||!t.length)return[["M",0,0]];var n,r=[],i=0,o=0,a=0,c=0,s=0;"M"==t[0][0]&&(i=+t[0][1],o=+t[0][2],a=i,c=o,s++,r[0]=["M",i,o]);for(var u,l,h=s,f=t.length;h<f;h++){if(r.push(u=[]),l=t[h],n=l[0],n!=n.toUpperCase())switch(u[0]=n.toUpperCase(),u[0]){case"A":u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=+l[6]+i,u[7]=+l[7]+o;break;case"V":u[1]=+l[1]+o;break;case"H":u[1]=+l[1]+i;break;case"M":a=+l[1]+i,c=+l[2]+o;default:for(var d=1,v=l.length;d<v;d++)u[d]=+l[d]+(d%2?i:o)}else for(var y=0,g=l.length;y<g;y++)u[y]=l[y];switch(n=n.toUpperCase(),u[0]){case"Z":i=+a,o=+c;break;case"H":i=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],c=u[u.length-1];default:i=u[u.length-2],o=u[u.length-1]}}return r.toString=w,e.abs=b(r),r}function L(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]}function B(t,e,n,r){return[t,e,n,r,n,r]}function z(t,e,n,r,i,o){var a=1/3,c=2/3;return[a*t+c*n,a*e+c*r,a*i+c*n,a*o+c*r,i,o]}function D(t,e,n,r,i,c,s,u,h,f){var p,d=120*a/180,v=a/180*(+i||0),y=[],m=g((function(t,e,n){var r=t*o.cos(n)-e*o.sin(n),i=t*o.sin(n)+e*o.cos(n);return{x:r,y:i}}));if(f)j=f[0],C=f[1],k=f[2],O=f[3];else{p=m(t,e,-v),t=p.x,e=p.y,p=m(u,h,-v),u=p.x,h=p.y;var x=(t-u)/2,_=(e-h)/2,w=x*x/(n*n)+_*_/(r*r);w>1&&(w=o.sqrt(w),n*=w,r*=w);var b=n*n,S=r*r,E=(c==s?-1:1)*o.sqrt(l((b*S-b*_*_-S*x*x)/(b*_*_+S*x*x))),k=E*n*_/r+(t+u)/2,O=E*-r*x/n+(e+h)/2,j=o.asin(((e-O)/r).toFixed(9)),C=o.asin(((h-O)/r).toFixed(9));j=t<k?a-j:j,C=u<k?a-C:C,j<0&&(j=2*a+j),C<0&&(C=2*a+C),s&&j>C&&(j-=2*a),!s&&C>j&&(C-=2*a)}var M=C-j;if(l(M)>d){var P=C,T=u,R=h;C=j+d*(s&&C>j?1:-1),u=k+n*o.cos(C),h=O+r*o.sin(C),y=D(u,h,n,r,i,0,s,T,R,[C,P,k,O])}M=C-j;var A=o.cos(j),L=o.sin(j),B=o.cos(C),z=o.sin(C),F=o.tan(M/4),$=4/3*n*F,N=4/3*r*F,I=[t,e],H=[t+$*L,e-N*A],W=[u+$*z,h-N*B],G=[u,h];if(H[0]=2*I[0]-H[0],H[1]=2*I[1]-H[1],f)return[H,W,G].concat(y);y=[H,W,G].concat(y).join().split(",");for(var V=[],q=0,Y=y.length;q<Y;q++)V[q]=q%2?m(y[q-1],y[q],v).y:m(y[q],y[q+1],v).x;return V}function F(t,e,n,r,i,a,u,h){for(var f,p,d,v,y,g,m,x,_=[],w=[[],[]],b=0;b<2;++b)if(0==b?(p=6*t-12*n+6*i,f=-3*t+9*n-9*i+3*u,d=3*n-3*t):(p=6*e-12*r+6*a,f=-3*e+9*r-9*a+3*h,d=3*r-3*e),l(f)<1e-12){if(l(p)<1e-12)continue;v=-d/p,0<v&&v<1&&_.push(v)}else m=p*p-4*d*f,x=o.sqrt(m),m<0||(y=(-p+x)/(2*f),0<y&&y<1&&_.push(y),g=(-p-x)/(2*f),0<g&&g<1&&_.push(g));var S,E=_.length,k=E;while(E--)v=_[E],S=1-v,w[0][E]=S*S*S*t+3*S*S*v*n+3*S*v*v*i+v*v*v*u,w[1][E]=S*S*S*e+3*S*S*v*r+3*S*v*v*a+v*v*v*h;return w[0][k]=t,w[1][k]=e,w[0][k+1]=u,w[1][k+1]=h,w[0].length=w[1].length=k+2,{x0:c.apply(0,w[0]),y0:c.apply(0,w[1]),x1:s.apply(0,w[0]),y1:s.apply(0,w[1])}}function $(t){var e=x(t);if(e.curve)return b(e.curve);for(var n=A(t),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(D.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(z(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(z(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(B(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(B(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(B(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(B(e.x,e.y,e.X,e.Y));break}return t},a=function(t,e){if(t[e].length>7){t[e].shift();var r=t[e];while(r.length)c[e]="A",t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),h=n.length}},c=[],s="",u="",l=0,h=n.length;l<h;l++){n[l]&&(s=n[l][0]),"C"!=s&&(c[l]=s,l&&(u=c[l-1])),n[l]=o(n[l],r,u),"A"!=c[l]&&"C"==s&&(c[l]="C"),a(n,l);var f=n[l],p=f.length;r.x=f[p-2],r.y=f[p-1],r.bx=i(f[p-4])||r.x,r.by=i(f[p-3])||r.y}return e.curve=b(n),n}t.exports=R},e6f3:function(t,e,n){var r=n("07e3"),i=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");t.exports=function(t,e){var n,c=i(t),s=0,u=[];for(n in c)n!=a&&r(c,n)&&u.push(n);while(e.length>s)r(c,n=e[s++])&&(~o(u,n)||u.push(n));return u}},e7a5:function(t,e,n){(function(e){(function(e,n){t.exports=n(e)})("undefined"!=typeof e?e:this,(function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var e=function(t){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");var e,n=String(t),r=n.length,i=-1,o="",a=n.charCodeAt(0);while(++i<r)e=n.charCodeAt(i),o+=0!=e?e>=1&&e<=31||127==e||0==i&&e>=48&&e<=57||1==i&&e>=48&&e<=57&&45==a?"\\"+e.toString(16)+" ":(0!=i||1!=r||45!=e)&&(e>=128||45==e||95==e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122)?n.charAt(i):"\\"+n.charAt(i):"�";return o};return t.CSS||(t.CSS={}),t.CSS.escape=e,e}))}).call(this,n("c8ba"))},e853:function(t,e,n){var r=n("d3f4"),i=n("1169"),o=n("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},ebfd:function(t,e,n){var r=n("62a0")("meta"),i=n("f772"),o=n("07e3"),a=n("d9f6").f,c=0,s=Object.isExtensible||function(){return!0},u=!n("294c")((function(){return s(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++c,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return u&&d.NEED&&s(t)&&!o(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:p}},edc5:function(t,e,n){},f1ae:function(t,e,n){"use strict";var r=n("86cc"),i=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},f3e2:function(t,e,n){"use strict";var r=n("5ca1"),i=n("0a49")(0),o=n("2f21")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},f921:function(t,e,n){n("014b"),n("c207"),n("69d3"),n("765d"),t.exports=n("584a").Symbol},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement},fb15:function(t,e,n){"use strict";if(n.r(e),n.d(e,"components",(function(){return sf})),"undefined"!==typeof window){var r=window.document.currentScript,i=n("8875");r=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}n("1c01"),n("58b2"),n("8e6e"),n("d25f");var a=n("85f2"),c=n.n(a);function s(t,e,n){return e in t?c()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n("456d"),n("f3e2"),n("ac6a"),n("cadf"),n("8615"),n("6d67"),n("bd00"),n("7f7f");var u=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"b-flow"})},l=[],h=(n("edc5"),/^class /);function f(t){return h.test(t.toString())}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(){var t=Array.prototype.slice.call(arguments);1===t.length&&p(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var v=/constructor\s*[^(]*\(\s*([^)]*)\)/m,y=/^function\s*[^(]*\(\s*([^)]*)\)/m,g=/\/\*([^*]*)\*\//m;function m(t){if("function"!==typeof t)throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(f(t)?v:y);return e&&e[1]&&e[1].split(",").map((function(t){return e=t.match(g),e?e[1].trim():t.trim()}))||[]}function x(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}var _="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function w(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function b(t,e){e=e||{get:function(t,e){if(n.push(t),!1===e)return null;throw a('No provider for "'+t+'"!')}};var n=[],r=this._providers=Object.create(e._providers||null),i=this._instances=Object.create(null),o=i.injector=this,a=function(t){var e=n.join(" -> ");return n.length=0,new Error(e?t+" (Resolving: "+e+")":t)},c=function t(o,c){if(!r[o]&&-1!==o.indexOf(".")){var s=o.split("."),u=t(s.shift());while(s.length)u=u[s.shift()];return u}if(S(i,o))return i[o];if(S(r,o)){if(-1!==n.indexOf(o))throw n.push(o),a("Cannot resolve circular dependency!");return n.push(o),i[o]=r[o][0](r[o][1]),n.pop(),i[o]}return e.get(o,c)},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==typeof t){if(!p(t))throw new Error('Cannot invoke "'+t+'". Expected a function!');t=d(t.slice())}var n=t.$inject||m(t),r=n.map((function(t){return S(e,t)?e[t]:c(t)}));return{fn:t,dependencies:r}},u=function(t){var e=s(t),n=e.dependencies,r=e.fn;return new(Function.prototype.bind.apply(r,[null].concat(w(n))))},l=function(t,e,n){var r=s(t,n),i=r.dependencies,o=r.fn;return o.call.apply(o,[e].concat(w(i)))},h=function(t){return d((function(e){return t.get(e)}))},f=function(t,e){if(e&&e.length){var n,i,a,c,s=Object.create(null),u=Object.create(null),l=[],f=[],p=[];for(var d in r)n=r[d],-1!==e.indexOf(d)&&("private"===n[2]?(i=l.indexOf(n[3]),-1===i?(a=n[3].createChild([],e),c=h(a),l.push(n[3]),f.push(a),p.push(c),s[d]=[c,d,"private",a]):s[d]=[p[i],d,"private",f[i]]):s[d]=[n[2],n[1]],u[d]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||e.forEach((function(t){-1!==n[1].$scope.indexOf(t)&&(s[d]=[n[2],n[1]],u[t]=!0)}));e.forEach((function(t){if(!u[t])throw new Error('No provider for "'+t+'". Cannot use provider from the parent!')})),t.unshift(s)}return new b(t,o)},v={factory:l,type:u,value:function(t){return t}};t.forEach((function(t){function e(t,e){return"value"!==t&&p(e)&&(e=d(e.slice())),e}if(t instanceof x)t.forEach((function(t){var n=t[0],i=t[1],o=t[2];r[n]=[v[i],e(i,o),i]}));else if("object"===("undefined"===typeof t?"undefined":_(t)))if(t.__exports__){var n=Object.keys(t).reduce((function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e}),Object.create(null)),i=new b((t.__modules__||[]).concat([n]),o),a=d((function(t){return i.get(t)}));t.__exports__.forEach((function(t){r[t]=[a,t,"private",i]}))}else Object.keys(t).forEach((function(n){if("private"!==t[n][2]){var i=t[n][0],o=t[n][1];r[n]=[v[i],e(i,o),i]}else r[n]=t[n]}))})),this.get=c,this.invoke=l,this.instantiate=u,this.createChild=f}function S(t,e){return Object.hasOwnProperty.call(t,e)}var E=n("3fb5"),k=n.n(E),O=1e3;function j(t,e){var n=this;e=e||O,t.on(["render.shape","render.connection"],e,(function(t,e){var r=t.type,i=e.element,o=e.gfx;if(n.canRender(i))return"render.shape"===r?n.drawShape(o,i):n.drawConnection(o,i)})),t.on(["render.getShapePath","render.getConnectionPath"],e,(function(t,e){if(n.canRender(e))return"render.getShapePath"===t.type?n.getShapePath(e):n.getConnectionPath(e)}))}function C(t,e){if(t.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(t,!0)}catch(n){}return t}function M(t,e){return e.appendChild(C(t,e))}function P(t,e){return M(e,t),t}j.prototype.canRender=function(){},j.prototype.drawShape=function(){},j.prototype.drawConnection=function(){},j.prototype.getShapePath=function(){},j.prototype.getConnectionPath=function(){};var T=2,R={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":T,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":T,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function A(t,e){return R[e]?t.style[e]:t.getAttributeNS(null,e)}function L(t,e,n){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=R[r];i?(i===T&&"number"===typeof n&&(n=String(n)+"px"),t.style[r]=n):t.setAttributeNS(null,e,n)}function B(t,e){var n,r,i=Object.keys(e);for(n=0,r;r=i[n];n++)L(t,r,e[r])}function z(t,e,n){if("string"===typeof e){if(void 0===n)return A(t,e);L(t,e,n)}else B(t,e);return t}function D(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var F=/\s+/,$=Object.prototype.toString;function N(t){return"undefined"!==typeof t}function I(t){return new H(t)}function H(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function W(t){var e=t.parentNode;return e&&e.removeChild(t),t}function G(t){var e;while(e=t.firstChild)W(e);return t}function V(t){return t.cloneNode(!0)}H.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array(),n=D(e,t);return~n||e.push(t),N(this.el.className.baseVal)?this.el.className.baseVal=e.join(" "):this.el.className=e.join(" "),this},H.prototype.remove=function(t){if("[object RegExp]"===$.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=D(e,t);return~n&&e.splice(n,1),this.el.className.baseVal=e.join(" "),this},H.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},H.prototype.toggle=function(t,e){return this.list?(N(e)?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(N(e)?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},H.prototype.array=function(){var t=this.el.getAttribute("class")||"",e=t.replace(/^\s+|\s+$/g,""),n=e.split(F);return""===n[0]&&n.shift(),n},H.prototype.has=H.prototype.contains=function(t){return this.list?this.list.contains(t):!!~D(this.array(),t)};var q={svg:"http://www.w3.org/2000/svg"},Y='<svg xmlns="'+q.svg+'"';function U(t){var e=!1;"<svg"===t.substring(0,4)?-1===t.indexOf(q.svg)&&(t=Y+t.substring(4)):(t=Y+">"+t+"</svg>",e=!0);var n=X(t);if(!e)return n;var r=document.createDocumentFragment(),i=n.firstChild;while(i.firstChild)r.appendChild(i.firstChild);return r}function X(t){var e;return e=new DOMParser,e.async=!1,e.parseFromString(t,"text/xml")}function K(t,e){var n;return"<"===t.charAt(0)?(n=U(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(q.svg,t),e&&z(n,e),n}var Z=K("svg");function J(t,e){var n,r,i=Object.keys(e);for(n=0;r=i[n];n++)t[r]=e[r];return t}function Q(t,e,n,r,i,o){var a=Z.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return J(a,t);case 6:return J(a,{a:t,b:e,c:n,d:r,e:i,f:o})}}function tt(t){return t?Z.createSVGTransformFromMatrix(t):Z.createSVGTransform()}function et(t,e){return e instanceof SVGMatrix?t.createSVGTransformFromMatrix(e):e}function nt(t,e){var n,r;for(t.clear(),n=0;r=e[n];n++)t.appendItem(et(t,r))}function rt(t,e){var n=t.transform.baseVal;return e&&(Array.isArray(e)||(e=[e]),nt(n,e)),n.consolidate()}function it(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function ot(t){for(var e,n="",r=0;e=t[r];r++)n+=e.x+","+e.y+" ";return n}function at(t,e){var n=K("polyline");return z(n,{points:ot(t)}),e&&z(n,e),n}function ct(t,e){return z(t,{points:ot(e)}),t}function st(t){return Array.prototype.concat.apply([],t)}var ut=Object.prototype.toString,lt=Object.prototype.hasOwnProperty;function ht(t){return void 0===t}function ft(t){return void 0!==t}function pt(t){return null==t}function dt(t){return"[object Array]"===ut.call(t)}function vt(t){return"[object Object]"===ut.call(t)}function yt(t){return"[object Number]"===ut.call(t)}function gt(t){var e=ut.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}function mt(t){return"[object String]"===ut.call(t)}function xt(t){if(!dt(t))throw new Error("must supply array")}function _t(t,e){return lt.call(t,e)}function wt(t,e){var n;return e=Dt(e),St(t,(function(t,r){if(e(t,r))return n=t,!1})),n}function bt(t,e){var n=[];return St(t,(function(t,r){e(t,r)&&n.push(t)})),n}function St(t,e){var n,r;if(!ht(t)){var i=dt(t)?$t:Ft;for(var o in t)if(_t(t,o)&&(n=t[o],r=e(n,i(o)),!1===r))return n}}function Et(t,e){return ht(t)?[]:(xt(t),e=Dt(e),t.filter((function(t,n){return!e(t,n)})))}function kt(t,e,n){return St(t,(function(t,r){n=e(n,t,r)})),n}function Ot(t,e){return!!kt(t,(function(t,n,r){return t&&e(n,r)}),!0)}function jt(t,e){return!!wt(t,e)}function Ct(t,e){var n=[];return St(t,(function(t,r){n.push(e(t,r))})),n}function Mt(t){return t&&Object.keys(t)||[]}function Pt(t){return Mt(t).length}function Tt(t){return Ct(t,(function(t){return t}))}function Rt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=zt(e),St(t,(function(t){var r=e(t)||"_",i=n[r];i||(i=n[r]=[]),i.push(t)})),n}function At(t){t=zt(t);for(var e={},n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];St(r,(function(n){return Rt(n,t,e)}));var o=Ct(e,(function(t,e){return t[0]}));return o}function Lt(t,e){e=zt(e);var n=[];return St(t,(function(t,r){for(var i=e(t,r),o={d:i,v:t},a=0;a<n.length;a++){var c=n[a].d;if(i<c)return void n.splice(a,0,o)}n.push(o)})),Ct(n,(function(t){return t.v}))}function Bt(t){return function(e){return Ot(t,(function(t,n){return e[n]===t}))}}function zt(t){return gt(t)?t:function(e){return e[t]}}function Dt(t){return gt(t)?t:function(e){return e===t}}function Ft(t){return t}function $t(t){return Number(t)}function Nt(t,e){var n,r,i,o;function a(){var a=Date.now(),s=o+e-a;if(s>0)return c(s);t.apply(i,r),n=o=r=i=void 0}function c(t){n=setTimeout(a,t)}return function(){o=Date.now();for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];r=a,i=this,n||c(e)}}function It(t,e){return t.bind(e)}function Ht(){return Ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ht.apply(this,arguments)}function Wt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ht.apply(void 0,[t].concat(n))}function Gt(t,e){var n={},r=Object(t);return St(e,(function(e){e in r&&(n[e]=t[e])})),n}function Vt(t){return bt(t,(function(e){return!wt(t,(function(t){return t!==e&&qt(e,t)}))}))}function qt(t,e){if(e){if(t===e)return e;if(t.parent)return qt(t.parent,e)}}function Yt(t,e,n){var r=!n||-1===t.indexOf(e);return r&&t.push(e),r}function Ut(t,e,n){n=n||0,dt(t)||(t=[t]),St(t,(function(t,r){var i=e(t,r,n);dt(i)&&i.length&&Ut(i,e,n+1)}))}function Xt(t,e,n){var r=[],i=[];return Ut(t,(function(t,o,a){Yt(r,t,e);var c=t.children;if((-1===n||a<n)&&c&&Yt(i,c,e))return c})),r}function Kt(t,e){return Xt(t,!e,-1)}function Zt(t,e,n){ht(e)&&(e=!0),vt(e)&&(n=e,e=!0),n=n||{};var r=ne(n.allShapes),i=ne(n.allConnections),o=ne(n.enclosedElements),a=ne(n.enclosedConnections),c=ne(n.topLevel,e&&Rt(t,(function(t){return t.id})));function s(t){c[t.source.id]&&c[t.target.id]&&(c[t.id]=[t]),r[t.source.id]&&r[t.target.id]&&(a[t.id]=o[t.id]=t),i[t.id]=t}function u(t){if(o[t.id]=t,!t.waypoints)return r[t.id]=t,St(t.incoming,s),St(t.outgoing,s),t.children;a[t.id]=i[t.id]=t}return Ut(t,u),{allShapes:r,allConnections:i,topLevel:c,enclosedConnections:a,enclosedElements:o}}function Jt(t,e){var n,r,i,o;return e=!!e,dt(t)||(t=[t]),St(t,(function(t){var a=t;t.waypoints&&!e&&(a=Jt(t.waypoints,!0));var c=a.x,s=a.y,u=a.height||0,l=a.width||0;(c<n||void 0===n)&&(n=c),(s<r||void 0===r)&&(r=s),(c+l>i||void 0===i)&&(i=c+l),(s+u>o||void 0===o)&&(o=s+u)})),{x:n,y:r,height:o-r,width:i-n}}function Qt(t,e){var n={};return St(t,(function(t){var r=t;r.waypoints&&(r=Jt(r)),!yt(e.y)&&r.x>e.x&&(n[t.id]=t),!yt(e.x)&&r.y>e.y&&(n[t.id]=t),r.x>e.x&&r.y>e.y&&(yt(e.width)&&yt(e.height)&&r.width+r.x<e.width+e.x&&r.height+r.y<e.height+e.y?n[t.id]=t:yt(e.width)&&yt(e.height)||(n[t.id]=t))})),n}function te(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}function ee(t){return!(!t||!t.isFrame)}function ne(t,e){return Wt({},t||{},e||{})}var re=1;function ie(t,e){j.call(this,t,re),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}function oe(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){var r=this.style(e,n);return Wt(r,{class:t})},this.style=function(e,n){dt(e)||n||(n=e,e=[]);var r=kt(e,(function(e,n){return Wt(e,t[n]||{})}),{});return n?Wt(r,n):r},this.computeStyle=function(t,n,r){return dt(n)||(r=n,n=[]),e.style(n||[],Wt({},r,t||{}))}}k()(ie,j),ie.prototype.canRender=function(){return!0},ie.prototype.drawShape=function(t,e){var n=K("rect");return z(n,{x:0,y:0,width:e.width||0,height:e.height||0}),ee(e)?z(n,this.FRAME_STYLE):z(n,this.SHAPE_STYLE),P(t,n),n},ie.prototype.drawConnection=function(t,e){var n=at(e.waypoints,this.CONNECTION_STYLE);return P(t,n),n},ie.prototype.getShapePath=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=[["M",e,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return it(o)},ie.prototype.getConnectionPath=function(t){var e,n,r=t.waypoints,i=[];for(e=0;n=r[e];e++)n=n.original||n,i.push([0===e?"M":"L",n.x,n.y]);return it(i)},ie.$inject=["eventBus","styles"];var ae={__init__:["defaultRenderer"],defaultRenderer:["type",ie],styles:["type",oe]};function ce(t,e){if(!t||!e)return-1;var n=t.indexOf(e);return-1!==n&&t.splice(n,1),n}function se(t,e,n){if(t&&e){"number"!==typeof n&&(n=-1);var r=t.indexOf(e);if(-1!==r){if(r===n)return;if(-1===n)return;t.splice(r,1)}-1!==n?t.splice(n,0,e):t.push(e)}}function ue(t,e){return t&&e?t.indexOf(e):-1}function le(t,e){return Math.round(t*e)/e}function he(t){return yt(t)?t+"px":t}function fe(t){t=Wt({},{width:"100%",height:"100%"},t);var e=t.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),Wt(n.style,{position:"relative",overflow:"hidden",width:he(t.width),height:he(t.height)}),e.appendChild(n),n}function pe(t,e,n){var r=K("g");I(r).add(e);var i=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(r,t.childNodes[i]||null),r}var de="base",ve={shape:["x","y","width","height"],connection:["waypoints"]};function ye(t,e,n,r){this._eventBus=e,this._elementRegistry=r,this._graphicsFactory=n,this._init(t||{})}function ge(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}ye.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],ye.prototype._init=function(t){var e=this._eventBus,n=this._container=fe(t),r=this._svg=K("svg");z(r,{width:"100%",height:"100%"}),P(n,r);var i=this._viewport=pe(r,"viewport");this._layers={},!1!==t.deferUpdate&&(this._viewboxChanged=Nt(It(this._viewboxChanged,this),300)),e.on("diagram.init",(function(){e.fire("canvas.init",{svg:r,viewport:i})}),this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],(function(){delete this._cachedViewbox}),this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},ye.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},ye.prototype._clear=function(){var t=this,e=this._elementRegistry.getAll();e.forEach((function(e){var n=te(e);"root"===n?t.setRootElement(null,!0):t._removeElement(e,n)})),delete this._cachedViewbox},ye.prototype.getDefaultLayer=function(){return this.getLayer(de,0)},ye.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),"undefined"!==typeof e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},ye.prototype._createLayer=function(t,e){e||(e=0);var n=kt(this._layers,(function(t,n){return e>=n.index&&t++,t}),0);return{group:pe(this._viewport,"layer-"+t,n),index:e}},ye.prototype.getContainer=function(){return this._container},ye.prototype._updateMarker=function(t,e,n){var r;t.id||(t=this._elementRegistry.get(t)),r=this._elementRegistry._elements[t.id],r&&(St([r.gfx,r.secondaryGfx],(function(t){t&&(n?I(t).add(e):I(t).remove(e))})),this._eventBus.fire("element.marker.update",{element:t,gfx:r.gfx,marker:e,add:!!n}))},ye.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},ye.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},ye.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));var n=this.getGraphics(t);return I(n).has(e)},ye.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},ye.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},ye.prototype.setRootElement=function(t,e){t&&this._ensureValid("root",t);var n=this._rootElement,r=this._elementRegistry,i=this._eventBus;if(n){if(!e)throw new Error("rootElement already set, need to specify override");i.fire("root.remove",{element:n}),i.fire("root.removed",{element:n}),r.remove(n)}if(t){var o=this.getDefaultLayer();i.fire("root.add",{element:t}),r.add(t,o,this._svg),i.fire("root.added",{element:t,gfx:o})}return this._rootElement=t,t},ye.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=ve[t],r=Ot(n,(function(t){return"undefined"!==typeof e[t]}));if(!r)throw new Error("must supply { "+n.join(", ")+" } with "+t)},ye.prototype._setParent=function(t,e,n){se(e.children,t,n),t.parent=e},ye.prototype._addElement=function(t,e,n,r){n=n||this.getRootElement();var i=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),i.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,r);var a=o.create(t,e,r);return this._elementRegistry.add(e,a),o.update(t,e,a),i.fire(t+".added",{element:e,gfx:a}),e},ye.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},ye.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},ye.prototype._removeElement=function(t,e){var n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(t=n.get(t.id||t),t)return i.fire(e+".remove",{element:t}),r.remove(t),ce(t.parent&&t.parent.children,t),t.parent=null,i.fire(e+".removed",{element:t}),n.remove(t),t},ye.prototype.removeShape=function(t){return this._removeElement(t,"shape")},ye.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},ye.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},ye.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},ye.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},ye.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,r,i,o,a,c=this._viewport,s=this.getSize();return t?(this._changeViewbox((function(){i=Math.min(s.width/t.width,s.height/t.height);var e=this._svg.createSVGMatrix().scale(i).translate(-t.x,-t.y);rt(c,e)})),t):(e=this.getDefaultLayer().getBBox(),r=rt(c),n=r?r.matrix:Q(),i=le(n.a,1e3),o=le(-n.e||0,1e3),a=le(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/i:0,y:a?a/i:0,width:s.width/i,height:s.height/i,scale:i,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:s},t)},ye.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox((function(){t=Wt({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),ge(e,n)})),{x:n.e,y:n.f}},ye.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox((function(){"object"!==typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),r=this._setZoom(t,e)})),le(r.a,1e3)):this.viewbox(t).scale;var n,r},ye.prototype._fitViewport=function(t){var e,n,r=this.viewbox(),i=r.outer,o=r.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=i.width&&o.y+o.height<=i.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,i.width),height:Math.max(o.height+o.y,i.height)}:(e=Math.min(1,i.width/o.width,i.height/o.height),n={x:o.x+(t?o.width/2-i.width/e/2:0),y:o.y+(t?o.height/2-i.height/e/2:0),width:i.width/e,height:i.height/e}),this.viewbox(n),this.viewbox(!1).scale},ye.prototype._setZoom=function(t,e){var n,r,i,o,a,c=this._svg,s=this._viewport,u=c.createSVGMatrix(),l=c.createSVGPoint();i=s.getCTM();var h=i.a;return e?(n=Wt(l,e),r=n.matrixTransform(i.inverse()),o=u.translate(r.x,r.y).scale(1/h*t).translate(-r.x,-r.y),a=i.multiply(o)):a=u.scale(t),ge(this._viewport,a),a},ye.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},ye.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();if(t.waypoints){var r=this.getGraphics(t);e=r.getBBox()}else e=t;var i=e.x*n.scale-n.x*n.scale,o=e.y*n.scale-n.y*n.scale,a=e.width*n.scale,c=e.height*n.scale;return{x:i,y:o,width:a,height:c}},ye.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var me="data-element-id";function xe(t){this._elements={},this._eventBus=t}xe.$inject=["eventBus"],xe.prototype.add=function(t,e,n){var r=t.id;this._validateId(r),z(e,me,r),n&&z(n,me,r),this._elements[r]={element:t,gfx:e,secondaryGfx:n}},xe.prototype.remove=function(t){var e=this._elements,n=t.id||t,r=n&&e[n];r&&(z(r.gfx,me,""),r.secondaryGfx&&z(r.secondaryGfx,me,""),delete e[n])},xe.prototype.updateId=function(t,e){this._validateId(e),"string"===typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),r=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,r)},xe.prototype.get=function(t){var e;e="string"===typeof t?t:t&&z(t,me);var n=this._elements[e];return n&&n.element},xe.prototype.filter=function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(n)})),e},xe.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i],a=o.element,c=o.gfx;if(t(a,c))return a}},xe.prototype.getAll=function(){return this.filter((function(t){return t}))},xe.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach((function(n){var r=e[n],i=r.element,o=r.gfx;return t(i,o)}))},xe.prototype.getGraphics=function(t,e){var n=t.id||t,r=this._elements[n];return r&&(e?r.secondaryGfx:r.gfx)},xe.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var _e=n("8fcf"),we=n.n(_e),be=new we.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Se=new we.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Ee=new we.a({name:"attachers",collection:!0},{name:"host"}),ke=new we.a({name:"outgoing",collection:!0},{name:"source"}),Oe=new we.a({name:"incoming",collection:!0},{name:"target"});function je(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),be.bind(this,"parent"),Se.bind(this,"labels"),ke.bind(this,"outgoing"),Oe.bind(this,"incoming")}function Ce(){je.call(this),be.bind(this,"children"),Ee.bind(this,"host"),Ee.bind(this,"attachers")}function Me(){Ce.call(this)}function Pe(){Ce.call(this),Se.bind(this,"labelTarget")}function Te(){je.call(this),ke.bind(this,"source"),Oe.bind(this,"target")}k()(Ce,je),k()(Me,Ce),k()(Pe,Ce),k()(Te,je);var Re={connection:Te,shape:Ce,label:Pe,root:Me};function Ae(t,e){var n=Re[t];if(!n)throw new Error("unknown type: <"+t+">");return Wt(new n,e)}function Le(){this._uid=12}Le.prototype.createRoot=function(t){return this.create("root",t)},Le.prototype.createLabel=function(t){return this.create("label",t)},Le.prototype.createShape=function(t){return this.create("shape",t)},Le.prototype.createConnection=function(t){return this.create("connection",t)},Le.prototype.create=function(t,e){return e=Wt({},e||{}),e.id||(e.id=t+"_"+this._uid++),Ae(t,e)};var Be="__fn",ze=1e3,De=Array.prototype.slice;function Fe(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function $e(){}function Ne(t,e){return t.apply(null,e)}function Ie(t){return t.childNodes[0]}function He(t){return t.parentNode.childNodes[1]}function We(t,e,n,r,i){var o=tt();o.setTranslate(e,n);var a=tt();a.setRotate(r||0,0,0);var c=tt();c.setScale(i||1,i||1),rt(t,[o,a,c])}function Ge(t,e,n){var r=tt();r.setTranslate(e,n),rt(t,r)}function Ve(t,e){var n=tt();n.setRotate(e,0,0),rt(t,n)}function qe(t,e,n){return 2==arguments.length?t.getAttribute(e):null===n?t.removeAttribute(e):(t.setAttribute(e,n),t)}Fe.prototype.on=function(t,e,n,r){if(t=dt(t)?t:[t],gt(e)&&(r=n,n=e,e=ze),!yt(e))throw new Error("priority must be a number");var i=n;r&&(i=It(n,r),i[Be]=n[Be]||n);var o=this;t.forEach((function(t){o._addListener(t,{priority:e,callback:i,next:null})}))},Fe.prototype.once=function(t,e,n,r){var i=this;if(gt(e)&&(r=n,n=e,e=ze),!yt(e))throw new Error("priority must be a number");function o(){var e=n.apply(r,arguments);return i.off(t,o),e}o[Be]=n,this.on(t,e,o)},Fe.prototype.off=function(t,e){t=dt(t)?t:[t];var n=this;t.forEach((function(t){n._removeListener(t,e)}))},Fe.prototype.createEvent=function(t){var e=new $e;return e.init(t),e},Fe.prototype.fire=function(t,e){var n,r,i,o;if(o=De.call(arguments),"object"===typeof t&&(e=t,t=e.type),!t)throw new Error("no event type specified");if(r=this._listeners[t],r){n=e instanceof $e?e:this.createEvent(e),o[0]=n;var a=n.type;t!==a&&(n.type=t);try{i=this._invokeListeners(n,o,r)}finally{t!==a&&(n.type=a)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},Fe.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},Fe.prototype._destroy=function(){this._listeners={}},Fe.prototype._invokeListeners=function(t,e,n){var r;while(n){if(t.cancelBubble)break;r=this._invokeListener(t,e,n),n=n.next}return r},Fe.prototype._invokeListener=function(t,e,n){var r;try{r=Ne(n.callback,e),void 0!==r&&(t.returnValue=r,t.stopPropagation()),!1===r&&t.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener"),console.error(i.stack),i}return r},Fe.prototype._addListener=function(t,e){var n,r=this._getListeners(t);if(r){while(r){if(r.priority<e.priority)return e.next=r,void(n?n.next=e:this._setListeners(t,e));n=r,r=r.next}n.next=e}else this._setListeners(t,e)},Fe.prototype._getListeners=function(t){return this._listeners[t]},Fe.prototype._setListeners=function(t,e){this._listeners[t]=e},Fe.prototype._removeListener=function(t,e){var n,r,i,o=this._getListeners(t);if(e)while(o)n=o.next,i=o.callback,i!==e&&i[Be]!==e||(r?r.next=n:this._setListeners(t,n)),r=o,o=n;else this._setListeners(t,null)},$e.prototype.stopPropagation=function(){this.cancelBubble=!0},$e.prototype.preventDefault=function(){this.defaultPrevented=!0},$e.prototype.init=function(t){Wt(this,t||{})};var Ye=[].indexOf,Ue=function(t,e){if(Ye)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},Xe=/\s+/,Ke=Object.prototype.toString;function Ze(t){return new Je(t)}function Je(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function Qe(t){var e;while(t.childNodes.length)e=t.childNodes[0],t.removeChild(e);return t}Je.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array(),n=Ue(e,t);return~n||e.push(t),this.el.className=e.join(" "),this},Je.prototype.remove=function(t){if("[object RegExp]"==Ke.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Ue(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},Je.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},Je.prototype.toggle=function(t,e){return this.list?("undefined"!==typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!==typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},Je.prototype.array=function(){var t=this.el.getAttribute("class")||"",e=t.replace(/^\s+|\s+$/g,""),n=e.split(Xe);return""===n[0]&&n.shift(),n},Je.prototype.has=Je.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Ue(this.array(),t)};var tn="undefined"!==typeof Element?Element.prototype:{},en=tn.matches||tn.matchesSelector||tn.webkitMatchesSelector||tn.mozMatchesSelector||tn.msMatchesSelector||tn.oMatchesSelector,nn=rn;function rn(t,e){if(!t||1!==t.nodeType)return!1;if(en)return en.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1}function on(t,e,n){var r=n?t:t.parentNode;while(r&&r.nodeType!==document.DOCUMENT_NODE&&r.nodeType!==document.DOCUMENT_FRAGMENT_NODE){if(nn(r,e))return r;r=r.parentNode}return nn(r,e)?r:null}var an=window.addEventListener?"addEventListener":"attachEvent",cn=window.removeEventListener?"removeEventListener":"detachEvent",sn="addEventListener"!==an?"on":"",un=function(t,e,n,r){return t[an](sn+e,n,r||!1),n},ln=function(t,e,n,r){return t[cn](sn+e,n,r||!1),n},hn={bind:un,unbind:ln},fn=["focus","blur"];function pn(t,e,n,r,i){return-1!==fn.indexOf(n)&&(i=!0),hn.bind(t,n,(function(n){var i=n.target||n.srcElement;n.delegateTarget=on(i,e,!0,t),n.delegateTarget&&r.call(t,n)}),i)}function dn(t,e,n,r){return-1!==fn.indexOf(e)&&(r=!0),hn.unbind(t,e,n,r)}var vn,yn={bind:pn,unbind:dn},gn=_n,mn=!1;"undefined"!==typeof document&&(vn=document.createElement("div"),vn.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',mn=!vn.getElementsByTagName("link").length,vn=void 0);var xn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:mn?[1,"X<div>","</div>"]:[0,"",""]};function _n(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=e.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var o=xn[r]||xn._default,a=o[0],c=o[1],s=o[2];i=e.createElement("div");i.innerHTML=c+t+s;while(a--)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);var u=e.createDocumentFragment();while(i.firstChild)u.appendChild(i.removeChild(i.firstChild));return u}function wn(t,e){return e=e||document,e.querySelector(t)}function bn(t,e){return e=e||document,e.querySelectorAll(t)}function Sn(t){t.parentNode&&t.parentNode.removeChild(t)}function En(t,e){this._eventBus=t,this._elementRegistry=e}function kn(t,e,n){var r=n||e.firstChild;t!==r&&e.insertBefore(t,r)}xn.td=xn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],xn.option=xn.optgroup=[1,'<select multiple="multiple">',"</select>"],xn.thead=xn.tbody=xn.colgroup=xn.caption=xn.tfoot=[1,"<table>","</table>"],xn.polyline=xn.ellipse=xn.polygon=xn.circle=xn.text=xn.line=xn.path=xn.rect=xn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],En.$inject=["eventBus","elementRegistry"],En.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=He(n),e||(e=K("g"),I(e).add("djs-children"),P(n.parentNode,e))):e=n,e},En.prototype._clear=function(t){var e=Ie(t);return Qe(e),e},En.prototype._createContainer=function(t,e,n,r){var i=K("g");I(i).add("djs-group"),"undefined"!==typeof n?kn(i,e,e.childNodes[n]):P(e,i);var o=K("g");I(o).add("djs-element"),I(o).add("djs-"+t),r&&I(o).add("djs-frame"),P(i,o);var a=K("g");return I(a).add("djs-visual"),P(o,a),o},En.prototype.create=function(t,e,n){var r=this._getChildrenContainer(e.parent);return this._createContainer(t,r,n,ee(e))},En.prototype.updateContainments=function(t){var e,n=this,r=this._elementRegistry;e=kt(t,(function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t}),{}),St(e,(function(t){var e=t.children;if(e){var i=n._getChildrenContainer(t);St(e.slice().reverse(),(function(t){var e=r.getGraphics(t);kn(e.parentNode,i)}))}}))},En.prototype.drawShape=function(t,e){var n=this._eventBus;return n.fire("render.shape",{gfx:t,element:e})},En.prototype.getShapePath=function(t){var e=this._eventBus;return e.fire("render.getShapePath",t)},En.prototype.drawConnection=function(t,e){var n=this._eventBus;return n.fire("render.connection",{gfx:t,element:e})},En.prototype.getConnectionPath=function(t){var e=this._eventBus;return e.fire("render.getConnectionPath",t)},En.prototype.update=function(t,e,n){if(e.parent){var r=this._clear(n);if("shape"===t)this.drawShape(r,e),Ge(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(r,e)}e.hidden?z(n,"display","none"):z(n,"display","block")}},En.prototype.remove=function(t){var e=this._elementRegistry.getGraphics(t);W(e.parentNode)};var On={__depends__:[ae],__init__:["canvas"],canvas:["type",ye],elementRegistry:["type",xe],elementFactory:["type",Le],eventBus:["type",Fe],graphicsFactory:["type",En]};function jn(t){var e=[],n=[];function r(t){return e.indexOf(t)>=0}function i(t){e.push(t)}function o(t){r(t)||((t.__depends__||[]).forEach(o),r(t)||(i(t),(t.__init__||[]).forEach((function(t){n.push(t)}))))}t.forEach(o);var a=new b(e);return n.forEach((function(t){try{a["string"===typeof t?"get":"invoke"](t)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}})),a}function Cn(t){t=t||{};var e={config:["value",t]},n=[e,On].concat(t.modules||[]);return jn(n)}function Mn(t,e){this.injector=e=e||Cn(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}function Pn(t){return t&&t[t.length-1]}function Tn(t){return t.y}function Rn(t){return t.x}Mn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Mn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var An={left:Rn,center:Rn,right:function(t){return t.x+t.width},top:Tn,middle:Tn,bottom:function(t){return t.y+t.height}};function Ln(t){this._modeling=t}Ln.$inject=["modeling"],Ln.prototype._getOrientationDetails=function(t){var e=["top","bottom","middle"],n="x",r="width";return-1!==e.indexOf(t)&&(n="y",r="height"),{axis:n,dimension:r}},Ln.prototype._isType=function(t,e){return-1!==e.indexOf(t)},Ln.prototype._alignmentPosition=function(t,e){var n,r,i,o=this._getOrientationDetails(t),a=o.axis,c=o.dimension,s={},u={},l=!1;function h(t,e){return Math.round((t[a]+e[a]+e[c])/2)}if(this._isType(t,["left","top"]))s[t]=e[0][a];else if(this._isType(t,["right","bottom"]))i=Pn(e),s[t]=i[a]+i[c];else if(this._isType(t,["center","middle"])){if(St(e,(function(t){var e=t[a]+Math.round(t[c]/2);u[e]?u[e].elements.push(t):u[e]={elements:[t],center:e}})),n=Lt(u,(function(t){return t.elements.length>1&&(l=!0),t.elements.length})),l)return s[t]=Pn(n).center,s;r=e[0],e=Lt(e,(function(t){return t[a]+t[c]})),i=Pn(e),s[t]=h(r,i)}return s},Ln.prototype.trigger=function(t,e){var n=this._modeling,r=bt(t,(function(t){return!(t.waypoints||t.host||t.labelTarget)})),i=An[e],o=Lt(r,i),a=this._alignmentPosition(e,o);n.alignElements(o,a)};var Bn={__init__:["alignElements"],alignElements:["type",Ln]};function zn(t){t&&"function"===typeof t.stopPropagation&&t.stopPropagation()}function Dn(t){return t.originalEvent||t.srcEvent}function Fn(t,e){zn(t,e),zn(Dn(t),e)}function $n(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}var Nn=1500;function In(t,e,n){var r=this,i=n.get("dragging",!1);function o(e){if(!e.hover){var n=e.originalEvent,o=r._findTargetGfx(n),a=o&&t.get(o);o&&a&&(e.stopPropagation(),i.hover({element:a,gfx:o}),i.move(n))}}i&&e.on("drag.start",(function(t){e.once("drag.move",Nn,(function(t){o(t)}))})),function(){var t,n;e.on("element.hover",(function(e){t=e.gfx,n=e.element})),e.on("element.hover",Nn,(function(r){n&&e.fire("element.out",{element:n,gfx:t})})),e.on("element.out",(function(){t=null,n=null}))}(),this._findTargetGfx=function(t){var e,n;if(t instanceof MouseEvent)return e=$n(t),n=document.elementFromPoint(e.x,e.y),Hn(n)}}function Hn(t){return on(t,"svg, .djs-element",!0)}In.$inject=["elementRegistry","eventBus","injector"];var Wn={__init__:["hoverFix"],hoverFix:["type",In]};function Gn(){return/mac/i.test(navigator.platform)}function Vn(t){return!(Dn(t)||t).button}function qn(t){var e=Dn(t)||t;return!!Vn(t)&&(Gn()?e.metaKey:e.ctrlKey)}function Yn(t){var e=Dn(t)||t;return Vn(t)&&e.shiftKey}function Un(t){return!0}var Xn=500;function Kn(t,e,n){var r=this;function i(n,r,i){var o,a,s;c(n,r)||(i?a=e.getGraphics(i):(o=r.delegateTarget||r.target,o&&(a=o,i=e.get(a))),a&&i&&(s=t.fire(n,{element:i,gfx:a,originalEvent:r}),!1===s&&(r.stopPropagation(),r.preventDefault())))}var o={};function a(t){return o[t]}function c(t,e){var n=u[t]||Vn;return!n(e)}var s={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":Un};function l(t,e,n){var r=s[t];if(!r)throw new Error("unmapped DOM event name <"+t+">");return i(r,e,n)}var h="svg, .djs-element";function f(t,e,n,r){var a=o[n]=function(t){i(n,t)};r&&(u[n]=r),a.$delegate=yn.bind(t,h,e,a)}function p(t,e,n){var r=a(n);r&&yn.unbind(t,e,r.$delegate)}function d(t){St(s,(function(e,n){f(t,n,e)}))}function v(t){St(s,(function(e,n){p(t,n,e)}))}t.on("canvas.destroy",(function(t){v(t.svg)})),t.on("canvas.init",(function(t){d(t.svg)})),t.on(["shape.added","connection.added"],(function(e){var n=e.element,r=e.gfx;t.fire("interactionEvents.createHit",{element:n,gfx:r})})),t.on(["shape.changed","connection.changed"],Xn,(function(e){var n=e.element,r=e.gfx;t.fire("interactionEvents.updateHit",{element:n,gfx:r})})),t.on("interactionEvents.createHit",Xn,(function(t){var e=t.element,n=t.gfx;r.createDefaultHit(e,n)})),t.on("interactionEvents.updateHit",(function(t){var e=t.element,n=t.gfx;r.updateDefaultHit(e,n)}));var y=_("djs-hit djs-hit-stroke"),g=_("djs-hit djs-hit-click-stroke"),m=_("djs-hit djs-hit-all"),x={all:m,"click-stroke":g,stroke:y};function _(t,e){return e=Wt({stroke:"white",strokeWidth:15},e||{}),n.cls(t,["no-fill","no-border"],e)}function w(t,e){var n=x[e];if(!n)throw new Error("invalid hit type <"+e+">");return z(t,n),t}function b(t,e){P(t,e)}this.removeHits=function(t){var e=bn(".djs-hit",t);St(e,W)},this.createDefaultHit=function(t,e){var n,r=t.waypoints,i=t.isFrame;return r?this.createWaypointsHit(e,r):(n=i?"stroke":"all",this.createBoxHit(e,n,{width:t.width,height:t.height}))},this.createWaypointsHit=function(t,e){var n=at(e);return w(n,"stroke"),b(t,n),n},this.createBoxHit=function(t,e,n){n=Wt({x:0,y:0},n);var r=K("rect");return w(r,e),z(r,n),b(t,r),r},this.updateDefaultHit=function(t,e){var n=wn(".djs-hit",e);if(n)return t.waypoints?ct(n,t.waypoints):z(n,{width:t.width,height:t.height}),n},this.fire=i,this.triggerMouseEvent=l,this.mouseHandler=a,this.registerEvent=f,this.unregisterEvent=p}Kn.$inject=["eventBus","elementRegistry","styles"];var Zn={__init__:["interactionEvents"],interactionEvents:["type",Kn]},Jn=500;function Qn(t,e,n){this.offset=6;var r=e.cls("djs-outline",["no-fill"]),i=this;function o(t,e){var n=K("rect");return z(n,Wt({x:10,y:10,width:100,height:100},r)),P(t,n),n}t.on(["shape.added","shape.changed"],Jn,(function(t){var e=t.element,n=t.gfx,r=wn(".djs-outline",n);r||(r=o(n,e)),i.updateShapeOutline(r,e)})),t.on(["connection.added","connection.changed"],(function(t){var e=t.element,n=t.gfx,r=wn(".djs-outline",n);r||(r=o(n,e)),i.updateConnectionOutline(r,e)}))}Qn.prototype.updateShapeOutline=function(t,e){z(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},Qn.prototype.updateConnectionOutline=function(t,e){var n=Jt(e);z(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Qn.$inject=["eventBus","styles","elementRegistry"];var tr={__init__:["outline"],outline:["type",Qn]};function er(t){this._eventBus=t,this._selectedElements=[];var e=this;t.on(["shape.remove","connection.remove"],(function(t){var n=t.element;e.deselect(n)})),t.on(["diagram.clear"],(function(t){e.select(null)}))}er.$inject=["eventBus"],er.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(-1!==n){var r=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:e})}},er.prototype.get=function(){return this._selectedElements},er.prototype.isSelected=function(t){return-1!==this._selectedElements.indexOf(t)},er.prototype.select=function(t,e){var n=this._selectedElements,r=n.slice();dt(t)||(t=t?[t]:[]),e?St(t,(function(t){-1===n.indexOf(t)&&n.push(t)})):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var nr="hover",rr="selected";function ir(t,e,n,r){function i(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._multiSelectionBox=null,t.on("element.hover",(function(t){i(t.element,nr)})),t.on("element.out",(function(t){o(t.element,nr)})),t.on("selection.changed",(function(t){function e(t){o(t,rr)}function n(t){i(t,rr)}var r=t.oldSelection,a=t.newSelection;St(r,(function(t){-1===a.indexOf(t)&&e(t)})),St(a,(function(t){-1===r.indexOf(t)&&n(t)}))}))}function or(t,e,n,r){t.on("create.end",500,(function(t){var n=t.context,r=n.canExecute,i=n.elements,o=n.hints||{},a=o.autoSelect;if(r){if(!1===a)return;dt(a)?e.select(a):e.select(i.filter(ar))}})),t.on("connect.end",500,(function(t){var n=t.context,r=n.canExecute,i=n.hover;r&&i&&e.select(i)})),t.on("shape.move.end",500,(function(t){var n=t.previousSelection||[],i=r.get(t.context.shape.id),o=wt(n,(function(t){return i.id===t.id}));o||e.select(i)})),t.on("element.click",(function(t){var r=t.element;r===n.getRootElement()&&(r=null);var i=e.isSelected(r),o=e.get().length>1,a=qn(t)||Yn(t);if(i&&o)return a?e.deselect(r):e.select(r);i?e.deselect(r):e.select(r,a)}))}function ar(t){return!t.hidden}ir.$inject=["eventBus","canvas","selection","styles"],or.$inject=["eventBus","selection","canvas","elementRegistry"];var cr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Zn,tr],selection:["type",er],selectionVisuals:["type",ir],selectionBehavior:["type",or]},sr=/^djs-cursor-.*$/;function ur(t){var e=Ze(document.body);e.removeMatching(sr),t&&e.add("djs-cursor-"+t)}function lr(){ur(null)}var hr=5e3;function fr(t,e){function n(){return!1}return e=e||"element.click",t.once(e,hr,n),function(){t.off(e,n)}}function pr(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function dr(t,e){return{x:t.x-e.x,y:t.y-e.y}}var vr=Math.round,yr="djs-drag-active";function gr(t){t.preventDefault()}function mr(t){return"undefined"!==typeof TouchEvent&&t instanceof TouchEvent}function xr(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function _r(t,e,n,r){var i,o={threshold:5,trapClick:!0};function a(t){var n=e.viewbox(),r=e._container.getBoundingClientRect();return{x:n.x+(t.x-r.left)/n.scale,y:n.y+(t.y-r.top)/n.scale}}function c(e,n){n=n||i;var r=t.createEvent(Wt({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==t.fire("drag."+e,r)&&t.fire(n.prefix+"."+e,r)}function s(t){var e=t.filter((function(t){return r.get(t.id)}));e.length&&n.select(e)}function u(t,r){var o=i.payload,s=i.displacement,u=i.globalStart,l=$n(t),h=dr(l,u),f=i.localStart,p=a(l),d=dr(p,f);if(!i.active&&(r||xr(h)>i.threshold)){if(Wt(o,{x:vr(f.x+s.x),y:vr(f.y+s.y),dx:0,dy:0},{originalEvent:t}),!1===c("start"))return y();i.active=!0,i.keepSelection||(o.previousSelection=n.get(),n.select(null)),i.cursor&&ur(i.cursor),e.addMarker(e.getRootElement(),yr)}Fn(t),i.active&&(Wt(o,{x:vr(p.x+s.x),y:vr(p.y+s.y),dx:vr(d.x),dy:vr(d.y)},{originalEvent:t}),c("move"))}function l(t){var e,n=!0;i.active&&(t&&(i.payload.originalEvent=t,Fn(t)),n=c("end")),!1===n&&c("rejected"),e=g(!0!==n),c("ended",e)}function h(t){27===t.which&&(gr(t),y())}function f(e){var n;i.active&&(n=fr(t),setTimeout(n,400),gr(e)),l(e)}function p(t){u(t)}function d(t){var e=i.payload;e.hoverGfx=t.gfx,e.hover=t.element,c("hover")}function v(t){c("out");var e=i.payload;e.hoverGfx=null,e.hover=null}function y(t){var e;if(i){var n=i.active;n&&c("cancel"),e=g(t),n&&c("canceled",e)}}function g(r){var o,a;c("cleanup"),lr(),a=i.trapClick?f:l,hn.unbind(document,"mousemove",u),hn.unbind(document,"dragstart",gr),hn.unbind(document,"selectstart",gr),hn.unbind(document,"mousedown",a,!0),hn.unbind(document,"mouseup",a,!0),hn.unbind(document,"keyup",h),hn.unbind(document,"touchstart",p,!0),hn.unbind(document,"touchcancel",y,!0),hn.unbind(document,"touchmove",u,!0),hn.unbind(document,"touchend",l,!0),t.off("element.hover",d),t.off("element.out",v),e.removeMarker(e.getRootElement(),yr);var g=i.payload.previousSelection;return!1!==r&&g&&!n.get().length&&s(g),o=i,i=null,o}function m(e,n,r,s){i&&y(!1),"string"===typeof n&&(s=r,r=n,n=null),s=Wt({},o,s||{});var g,m,x,_,w,b=s.data||{};_=s.trapClick?f:l,e?(g=Dn(e)||e,m=$n(e),Fn(e),"dragstart"===g.type&&gr(g)):(g=null,m={x:0,y:0}),x=a(m),n||(n=x),w=mr(g),i=Wt({prefix:r,data:b,payload:{},globalStart:m,displacement:dr(n,x),localStart:x,isTouch:w},s),s.manual||(w?(hn.bind(document,"touchstart",p,!0),hn.bind(document,"touchcancel",y,!0),hn.bind(document,"touchmove",u,!0),hn.bind(document,"touchend",l,!0)):(hn.bind(document,"mousemove",u),hn.bind(document,"dragstart",gr),hn.bind(document,"selectstart",gr),hn.bind(document,"mousedown",_,!0),hn.bind(document,"mouseup",_,!0)),hn.bind(document,"keyup",h),t.on("element.hover",d),t.on("element.out",v)),c("init"),s.autoActivate&&u(e,!0)}t.on("diagram.destroy",y),this.init=m,this.move=u,this.hover=d,this.out=v,this.end=l,this.cancel=y,this.context=function(){return i},this.setOptions=function(t){Wt(o,t)}}_r.$inject=["eventBus","canvas","selection","elementRegistry"];var wr={__depends__:[Wn,cr],dragging:["type",_r]};function br(t){this._commandStack=t.get("commandStack",!1)}br.$inject=["injector"],br.prototype.allowed=function(t,e){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(t,e)),void 0===n||n};var Sr={__init__:["rules"],rules:["type",br]};function Er(t,e){return t&&e?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):-1}function kr(t,e,n,r){if("undefined"===typeof r&&(r=5),!t||!e||!n)return!1;var i=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),o=Er(t,e);return Math.abs(i/o)<=r}var Or=2;function jr(t,e){var n;return n=dt(t)?t:[t,e],Cr(n)?"h":!!Mr(n)&&"v"}function Cr(t,e){var n;n=dt(t)?t:[t,e];var r=n.slice().shift();return Ot(n,(function(t){return Math.abs(r.y-t.y)<=Or}))}function Mr(t,e){var n;n=dt(t)?t:[t,e];var r=n.slice().shift();return Ot(n,(function(t){return Math.abs(r.x-t.x)<=Or}))}function Pr(t,e,n){return n=n||0,t.x>e.x-n&&t.y>e.y-n&&t.x<e.x+e.width+n&&t.y<e.y+e.height+n}function Tr(t,e){return{x:Math.round(t.x+(e.x-t.x)/2),y:Math.round(t.y+(e.y-t.y)/2)}}var Rr=n("e5ab"),Ar=n.n(Rr),Lr=Math.round,Br=Math.max;function zr(t,e){var n=t.x,r=t.y;return[["M",n,r],["m",0,-e],["a",e,e,0,1,1,0,2*e],["a",e,e,0,1,1,0,-2*e],["z"]]}function Dr(t){var e=[];return t.forEach((function(t,n){e.push([0===n?"M":"L",t.x,t.y])})),e}var Fr=10;function $r(t,e){var n,r;for(n=0;r=t[n];n++)if(Er(r,e)<=Fr)return{point:t[n],bendpoint:!0,index:n};return null}function Nr(t,e){var n,r=Ar()(zr(e,Fr),Dr(t)),i=r[0],o=r[r.length-1];return i?i!==o?i.segment2!==o.segment2?(n=Br(i.segment2,o.segment2)-1,{point:t[n],bendpoint:!0,index:n}):{point:{x:Lr(i.x+o.x)/2,y:Lr(i.y+o.y)/2},index:i.segment2}:{point:{x:Lr(i.x),y:Lr(i.y)},index:i.segment2}:null}function Ir(t,e){return $r(t,e)||Nr(t,e)}var Hr="djs-bendpoint",Wr="djs-segment-dragger";function Gr(t,e){var n,r=$n(e),i=t._container.getBoundingClientRect();n={x:i.left,y:i.top};var o=t.viewbox();return{x:o.x+(r.x-n.x)/o.scale,y:o.y+(r.y-n.y)/o.scale}}function Vr(t,e,n){var r=Gr(t,n),i=Ir(e,r);return i}function qr(t,e){var n=K("g");I(n).add(Hr),P(t,n);var r=K("circle");z(r,{cx:0,cy:0,r:4}),I(r).add("djs-visual"),P(n,r);var i=K("circle");return z(i,{cx:0,cy:0,r:10}),I(i).add("djs-hit"),P(n,i),e&&I(n).add(e),n}function Yr(t,e,n,r){var i=K("g");P(t,i);var o=14,a=3,c=11,s=Kr(e,n,r),u=a+c,l=K("rect");z(l,{x:-o/2,y:-a/2,width:o,height:a}),I(l).add("djs-visual"),P(i,l);var h=K("rect");return z(h,{x:-s/2,y:-u/2,width:s,height:u}),I(h).add("djs-hit"),P(i,h),Ve(i,"v"===r?90:0,0,0),i}function Ur(t,e,n){var r=K("g"),i=Tr(e,n),o=jr(e,n);return P(t,r),Yr(r,e,n,o),I(r).add(Wr),I(r).add("h"===o?"horizontal":"vertical"),Ge(r,i.x,i.y),r}function Xr(t){return Math.abs(Math.round(2*t/3))}function Kr(t,e,n){var r=e.x-t.x,i=e.y-t.y;return Xr("h"===n?r:i)}var Zr=n("e7a5"),Jr=n.n(Zr);function Qr(t,e,n,r,i){function o(t,e,n){var r,i,o,a,c,s,u=t.index,l=t.point;return!(u<=0||t.bendpoint)&&(r=e[u-1],i=e[u],o=Tr(r,i),a=jr(r,i),c=Math.abs(l.x-o.x),s=Math.abs(l.y-o.y),a&&c<=n&&s<=n)}function a(t,e){var n,r,i,o,a=t.waypoints;return e.index<=0||e.bendpoint?null:(n={start:a[e.index-1],end:a[e.index]},r=jr(n.start,n.end),r?(i="h"===r?n.end.x-n.start.x:n.end.y-n.start.y,o=Xr(i)/2,o):null)}function c(t,n){var c,s=n.waypoints,u=Vr(e,s,t);if(u)return c=a(n,u),o(u,s,c)?i.start(t,n,u.index):r.start(t,n,u.index,!u.bendpoint),!0}function s(t,e,r){hn.bind(t,e,(function(t){n.triggerMouseEvent(e,t,r),t.stopPropagation()}))}function u(t,n){var r=e.getLayer("overlays"),i=wn('.djs-bendpoints[data-element-id="'+Jr()(t.id)+'"]',r);return!i&&n&&(i=K("g"),z(i,{"data-element-id":t.id}),I(i).add("djs-bendpoints"),P(r,i),s(i,"mousedown",t),s(i,"click",t),s(i,"dblclick",t)),i}function l(t,e){return wn('.djs-segment-dragger[data-segment-idx="'+t+'"]',e)}function h(t,e){e.waypoints.forEach((function(e,n){var r=qr(t);P(t,r),Ge(r,e.x,e.y)})),qr(t,"floating")}function f(t,e){for(var n,r,i,o=e.waypoints,a=1;a<o.length;a++)n=o[a-1],r=o[a],jr(n,r)&&(i=Ur(t,n,r),z(i,{"data-segment-idx":a}),s(i,"mousemove",e))}function p(t){St(bn("."+Hr,t),(function(t){W(t)}))}function d(t){St(bn("."+Wr,t),(function(t){W(t)}))}function v(t){var e=u(t);return e||(e=u(t,!0),h(e,t),f(e,t)),e}function y(t){var e=u(t);e&&(d(e),p(e),f(e,t),h(e,t))}function g(t,e){var n=wn(".floating",t),r=e.point;n&&Ge(n,r.x,r.y)}function m(t,e,n){var r,i,o=l(e.index,t),a=n[e.index-1],c=n[e.index],s=e.point,u=Tr(a,c),h=jr(a,c);o&&(r=ti(o),i={x:s.x-u.x,y:s.y-u.y},"v"===h&&(i={x:i.y,y:i.x}),Ge(r,i.x,i.y))}t.on("connection.changed",(function(t){y(t.element)})),t.on("connection.remove",(function(t){var e=u(t.element);e&&W(e)})),t.on("element.marker.update",(function(t){var e,n=t.element;n.waypoints&&(e=v(n),t.add?I(e).add(t.marker):I(e).remove(t.marker))})),t.on("element.mousemove",(function(t){var n,r,i=t.element,o=i.waypoints;if(o){if(n=u(i,!0),r=Vr(e,o,t.originalEvent),!r)return;g(n,r),r.bendpoint||m(n,r,o)}})),t.on("element.mousedown",(function(t){var e=t.originalEvent,n=t.element;if(n.waypoints)return c(e,n)})),t.on("selection.changed",(function(t){var e=t.newSelection,n=e[0];n&&n.waypoints&&v(n)})),t.on("element.hover",(function(t){var e=t.element;e.waypoints&&(v(e),n.registerEvent(t.gfx,"mousemove","element.mousemove"))})),t.on("element.out",(function(t){n.unregisterEvent(t.gfx,"mousemove","element.mousemove")})),t.on("element.updateId",(function(t){var e=t.element,n=t.newId;if(e.waypoints){var r=u(e);r&&z(r,{"data-element-id":n})}})),this.addHandles=v,this.updateHandles=y,this.getBendpointsContainer=u,this.getSegmentDragger=l}function ti(t){return wn(".djs-visual",t)}function ei(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function ni(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function ri(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function ii(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function oi(t){return ni({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function ai(t,e,n){n=n||0,vt(n)||(n={x:n,y:n});var r=ri(t),i=ri(e),o=r.bottom+n.y<=i.top,a=r.left-n.x>=i.right,c=r.top-n.y>=i.bottom,s=r.right+n.x<=i.left,u=o?"top":c?"bottom":null,l=s?"left":a?"right":null;return l&&u?u+"-"+l:l||u||"intersect"}function ci(t,e,n){var r=si(t,e);return 1===r.length||2===r.length&&Er(r[0],r[1])<1?ni(r[0]):r.length>1?(r=Lt(r,(function(t){var e=Math.floor(100*t.t2)||1;return e=100-e,e=(e<10?"0":"")+e,t.segment2+"#"+e})),ni(r[n?0:r.length-1])):null}function si(t,e){return Ar()(t,e)}function ui(t){t=t.slice();var e,n,r,i=0;while(t[i])e=t[i],n=t[i-1],r=t[i+1],0===Er(e,r)||kr(n,r,e)?t.splice(i,1):i++;return t}Qr.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var li=Math.round,hi="reconnectStart",fi="reconnectEnd",pi="updateWaypoints";function di(t,e,n,r,i,o){this._injector=t,this.start=function(t,e,o,a){var c,s=n.getGraphics(e),u=e.source,l=e.target,h=e.waypoints;c=a||0!==o?a||o!==h.length-1?pi:fi:hi;var f=c===pi?"connection.updateWaypoints":"connection.reconnect",p=i.allowed(f,{connection:e,source:u,target:l});!1===p&&(p=i.allowed(f,{connection:e,source:l,target:u})),!1!==p&&r.init(t,"bendpoint.move",{data:{connection:e,connectionGfx:s,context:{allowed:p,bendpointIndex:o,connection:e,source:u,target:l,insert:a,type:c}}})},e.on("bendpoint.move.hover",(function(t){var e,n=t.context,r=n.connection,o=r.source,a=r.target,c=t.hover,s=n.type;if(n.hover=c,c){var u=s===pi?"connection.updateWaypoints":"connection.reconnect";if(e=n.allowed=i.allowed(u,{connection:r,source:s===hi?c:o,target:s===fi?c:a}),e)return n.source=s===hi?c:o,void(n.target=s===fi?c:a);!1===e&&(e=n.allowed=i.allowed(u,{connection:r,source:s===fi?c:a,target:s===hi?c:o})),e&&(n.source=s===fi?c:a,n.target=s===hi?c:o)}})),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],(function(t){var e=t.context;e.hover=null,e.source=null,e.target=null,e.allowed=!1})),e.on("bendpoint.move.end",(function(t){var e=t.context,n=e.allowed,r=e.bendpointIndex,i=e.connection,a=e.insert,c=i.waypoints.slice(),s=e.source,u=e.target,l=e.type,h=e.hints||{},f={x:li(t.x),y:li(t.y)};if(!n)return!1;l===pi?(a?c.splice(r,0,f):c[r]=f,h.bendpointMove={insert:a,bendpointIndex:r},c=this.cropWaypoints(i,c),o.updateWaypoints(i,ui(c),h)):(l===hi?(h.docking="source",vi(e)&&(h.docking="target",h.newWaypoints=c.reverse())):l===fi&&(h.docking="target",vi(e)&&(h.docking="source",h.newWaypoints=c.reverse())),o.reconnect(i,s,u,f,h))}),this)}function vi(t){var e=t.hover,n=t.source,r=t.target,i=t.type;return i===hi?e&&r&&e===r&&n!==r:i===fi?e&&n&&e===n&&n!==r:void 0}di.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],di.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var r=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=r,e};var yi="reconnectStart",gi="reconnectEnd",mi="updateWaypoints",xi="connect-ok",_i="connect-not-ok",wi="connect-hover",bi="djs-updating",Si="djs-element-hidden",Ei=1100;function ki(t,e,n,r){this._injector=e;var i=e.get("connectionPreview",!1);n.on("bendpoint.move.start",(function(t){var e=t.context,n=e.bendpointIndex,i=e.connection,o=e.insert,a=i.waypoints,c=a.slice();e.waypoints=a,o&&c.splice(n,0,{x:t.x,y:t.y}),i.waypoints=c;var s=e.draggerGfx=qr(r.getLayer("overlays"));I(s).add("djs-dragging"),r.addMarker(i,Si),r.addMarker(i,bi)})),n.on("bendpoint.move.hover",(function(t){var e=t.context,n=e.allowed,i=e.hover,o=e.type;if(i){if(r.addMarker(i,wi),o===mi)return;n?(r.removeMarker(i,_i),r.addMarker(i,xi)):!1===n&&(r.removeMarker(i,xi),r.addMarker(i,_i))}})),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Ei,(function(t){var e=t.context,n=e.hover,i=e.target;n&&(r.removeMarker(n,wi),r.removeMarker(n,i?xi:_i))})),n.on("bendpoint.move.move",(function(e){var n=e.context,r=n.allowed,o=n.bendpointIndex,a=n.draggerGfx,c=n.hover,s=n.type,u=n.connection,l=u.source,h=u.target,f=u.waypoints.slice(),p={x:e.x,y:e.y},d=n.hints||{},v={};i&&(d.connectionStart&&(v.connectionStart=d.connectionStart),d.connectionEnd&&(v.connectionEnd=d.connectionEnd),s===yi?vi(n)?(v.connectionEnd=v.connectionEnd||p,v.source=h,v.target=c||l,f=f.reverse()):(v.connectionStart=v.connectionStart||p,v.source=c||l,v.target=h):s===gi?vi(n)?(v.connectionStart=v.connectionStart||p,v.source=c||h,v.target=l,f=f.reverse()):(v.connectionEnd=v.connectionEnd||p,v.source=l,v.target=c||h):(v.noCropping=!0,v.noLayout=!0,f[o]=p),s===mi&&(f=t.cropWaypoints(u,f)),v.waypoints=f,i.drawPreview(n,r,v)),Ge(a,e.x,e.y)}),this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Ei,(function(t){var e=t.context,n=e.connection,o=e.draggerGfx,a=e.hover,c=e.target,s=e.waypoints;n.waypoints=s,W(o),r.removeMarker(n,bi),r.removeMarker(n,Si),a&&(r.removeMarker(a,xi),r.removeMarker(a,c?xi:_i)),i&&i.cleanUp(e)}))}ki.$inject=["bendpointMove","injector","eventBus","canvas"];var Oi="connect-hover",ji="djs-updating";function Ci(t,e,n){return Mi(t,e,t[e]+n)}function Mi(t,e,n){return{x:"x"===e?n:t.x,y:"y"===e?n:t.y}}function Pi(t,e,n,r){var i=Math.max(e[r],n[r]),o=Math.min(e[r],n[r]),a=20,c=Math.min(Math.max(o+a,t[r]),i-a);return Mi(e,r,c)}function Ti(t){return"x"===t?"y":"x"}function Ri(t,e,n){var r,i;return t.original?t.original:(r=oi(e),i=Ti(n),Mi(t,i,r[i]))}function Ai(t,e,n,r,i,o){var a=t.get("connectionDocking",!1);function c(t,e){if(!a)return e;var n,r=t.waypoints;return t.waypoints=e,n=a.getCroppedWaypoints(t),t.waypoints=r,n}function s(t){i.update("connection",t.connection,t.connectionGfx)}function u(t,e,n){var r=t.newWaypoints,i=t.segmentStartIndex+e,o=r[i],a=t.segmentEndIndex+e,c=r[a],s=Ti(t.axis),u=Pi(n,o,c,s);Ge(t.draggerGfx,u.x,u.y)}function l(t,e){var n=0,r=t.filter((function(r,i){return!kr(t[i-1],t[i+1],r)||(n=i<=e?n-1:n,!1)}));return{waypoints:r,segmentOffset:n}}this.start=function(t,e,i){var o,a,c,s,u=n.getGraphics(e),l=i-1,h=i,f=e.waypoints,p=f[l],d=f[h],v=Vr(n,f,t);a=jr(p,d),a&&(c="v"===a?"x":"y",0===l&&(p=Ri(p,e.source,c)),h===f.length-1&&(d=Ri(d,e.target,c)),s=v?v.point:{x:(p.x+d.x)/2,y:(p.y+d.y)/2},o={connection:e,segmentStartIndex:l,segmentEndIndex:h,segmentStart:p,segmentEnd:d,axis:c,dragPosition:s},r.init(t,s,"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:e,connectionGfx:u,context:o}}))},e.on("connectionSegment.move.start",(function(t){var e=t.context,r=t.connection,i=n.getLayer("overlays");e.originalWaypoints=r.waypoints.slice(),e.draggerGfx=Ur(i,e.segmentStart,e.segmentEnd),I(e.draggerGfx).add("djs-dragging"),n.addMarker(r,ji)})),e.on("connectionSegment.move.move",(function(t){var e,n,r=t.context,i=r.connection,o=r.segmentStartIndex,a=r.segmentEndIndex,l=r.segmentStart,h=r.segmentEnd,f=r.axis,p=r.originalWaypoints.slice(),d=Ci(l,f,t["d"+f]),v=Ci(h,f,t["d"+f]),y=p.length,g=0;p[o]=d,p[a]=v,o<2&&(e=ai(i.source,d),1===o?"intersect"===e&&(p.shift(),p[0]=d,g--):"intersect"!==e&&(p.unshift(l),g++)),a>y-3&&(n=ai(i.target,v),a===y-2?"intersect"===n&&(p.pop(),p[p.length-1]=v):"intersect"!==n&&p.push(h)),r.newWaypoints=i.waypoints=c(i,p),u(r,g,t),r.newSegmentStartIndex=o+g,s(t)})),e.on("connectionSegment.move.hover",(function(t){t.context.hover=t.hover,n.addMarker(t.hover,Oi)})),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],(function(t){var e=t.context.hover;e&&n.removeMarker(e,Oi)})),e.on("connectionSegment.move.cleanup",(function(t){var e=t.context,r=e.connection;e.draggerGfx&&W(e.draggerGfx),n.removeMarker(r,ji)})),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],(function(t){var e=t.context,n=e.connection;n.waypoints=e.originalWaypoints,s(t)})),e.on("connectionSegment.move.end",(function(t){var e=t.context,n=e.connection,r=e.newWaypoints,i=e.newSegmentStartIndex;r=r.map((function(t){return{original:t.original,x:Math.round(t.x),y:Math.round(t.y)}}));var a=l(r,i),s=a.waypoints,u=c(n,s),h=a.segmentOffset,f={segmentMove:{segmentStartIndex:e.segmentStartIndex,newSegmentStartIndex:i+h}};o.updateWaypoints(n,u,f)}))}Ai.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Li=Math.abs,Bi=Math.round;function zi(t,e,n){var r,i;for(n=void 0===n?10:n,r=0;r<e.length;r++)if(i=e[r],Li(i-t)<=n)return i}function Di(t){return{x:t.x,y:t.y}}function Fi(t){return{x:t.x+t.width,y:t.y+t.height}}function $i(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:Bi(t.x+t.width/2),y:Bi(t.y+t.height/2)}}function Ni(t,e){var n=t.snapped;return!!n&&("string"===typeof e?n[e]:n.x&&n.y)}function Ii(t,e,n){if("string"!==typeof e)throw new Error("axis must be in [x, y]");if("number"!==typeof n&&!1!==n)throw new Error("value must be Number or false");var r,i=t[e],o=t.snapped=t.snapped||{};return!1===n?o[e]=!1:(o[e]=!0,r=n-i,t[e]+=r,t["d"+e]+=r),i}function Hi(t){return t.children||[]}var Wi=Math.abs,Gi=Math.round,Vi=10;function qi(t){function e(t,e){if(dt(t)){var n=t.length;while(n--)if(Wi(t[n]-e)<=Vi)return t[n]}else{t=+t;var r=e%t;if(r<Vi)return e-r;if(r>t-Vi)return e-r+t}return e}function n(t){if(t.width)return{x:Gi(t.width/2+t.x),y:Gi(t.height/2+t.y)}}function r(t){var e=t.snapPoints,r=t.connection,i=r.waypoints,o=t.segmentStart,a=t.segmentStartIndex,c=t.segmentEnd,s=t.segmentEndIndex,u=t.axis;if(e)return e;var l=[i[a-1],o,c,i[s+1]];return a<2&&l.unshift(n(r.source)),s>i.length-3&&l.unshift(n(r.target)),t.snapPoints=e={horizontal:[],vertical:[]},St(l,(function(t){t&&(t=t.original||t,"y"===u&&e.horizontal.push(t.y),"x"===u&&e.vertical.push(t.x))})),e}function i(t){var e=t.snapPoints,n=t.connection.waypoints,r=t.bendpointIndex;if(e)return e;var i=[n[r-1],n[r+1]];return t.snapPoints=e={horizontal:[],vertical:[]},St(i,(function(t){t&&(t=t.original||t,e.horizontal.push(t.y),e.vertical.push(t.x))})),e}t.on("connectionSegment.move.move",1500,(function(t){var n,i,o=t.context,a=r(o),c=t.x,s=t.y;if(a){n=e(a.vertical,c),i=e(a.horizontal,s);var u=c-n,l=s-i;Wt(t,{dx:t.dx-u,dy:t.dy-l,x:n,y:i}),(u||-1!==a.vertical.indexOf(c))&&Ii(t,"x",n),(l||-1!==a.horizontal.indexOf(s))&&Ii(t,"y",i)}})),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,(function(t){var r,o,a=t.context,c=i(a),s=a.hover,u=s&&n(s),l=t.x,h=t.y;if(c){r=e(u?c.vertical.concat([u.x]):c.vertical,l),o=e(u?c.horizontal.concat([u.y]):c.horizontal,h);var f=l-r,p=h-o;Wt(t,{dx:t.dx-f,dy:t.dy-p,x:t.x-f,y:t.y-p}),(f||-1!==c.vertical.indexOf(l))&&Ii(t,"x",r),(p||-1!==c.horizontal.indexOf(h))&&Ii(t,"y",o)}}))}qi.$inject=["eventBus"];var Yi={__depends__:[wr,Sr],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Qr],bendpointMove:["type",di],bendpointMovePreview:["type",ki],connectionSegmentMove:["type",Ai],bendpointSnapping:["type",qi]};function Ui(t,e,n,r){function i(t,e){return r.allowed("connection.create",{source:t,target:e})}function o(t,e){return i(e,t)}t.on("connect.hover",(function(t){var e,n=t.context,r=n.start,a=t.hover;if(n.hover=a,e=n.canExecute=i(r,a),!pt(e)){if(!1!==e)return n.source=r,void(n.target=a);e=n.canExecute=o(r,a),pt(e)||!1!==e&&(n.source=a,n.target=r)}})),t.on(["connect.out","connect.cleanup"],(function(t){var e=t.context;e.hover=null,e.source=null,e.target=null,e.canExecute=!1})),t.on("connect.end",(function(t){var e=t.context,r=e.canExecute,i=e.connectionStart,o={x:t.x,y:t.y},a=e.source,c=e.target;if(!r)return!1;var s=null,u={connectionStart:Xi(e)?o:i,connectionEnd:Xi(e)?i:o};vt(r)&&(s=r),n.connect(a,c,s,u)})),this.start=function(t,n,r,i){vt(r)||(i=r,r=oi(n)),e.init(t,"connect",{autoActivate:i,data:{shape:n,context:{start:n,connectionStart:r}}})}}function Xi(t){var e=t.hover,n=t.source,r=t.target;return e&&n&&e===n&&n!==r}Ui.$inject=["eventBus","dragging","modeling","rules"];var Ki=1100,Zi=900,Ji="connect-ok",Qi="connect-not-ok";function to(t,e,n){var r=t.get("connectionPreview",!1);r&&e.on("connect.move",(function(t){var e=t.context,n=e.canExecute,i=e.hover,o=e.source,a=e.start,c=e.startPosition,s=e.connectionStart,u=e.connectionEnd,l=e.target;s||(s=Xi(e)?{x:t.x,y:t.y}:c),u||(u=Xi(e)?c:{x:t.x,y:t.y}),r.drawPreview(e,n,{source:o||a,target:l||i,connectionStart:s,connectionEnd:u})})),e.on("connect.hover",Zi,(function(t){var e=t.context,r=t.hover,i=e.canExecute;null!==i&&n.addMarker(r,i?Ji:Qi)})),e.on(["connect.out","connect.cleanup"],Ki,(function(t){var e=t.hover;e&&(n.removeMarker(e,Ji),n.removeMarker(e,Qi))})),r&&e.on("connect.cleanup",(function(t){r.cleanUp(t.context)}))}to.$inject=["injector","eventBus","canvas"];var eo={__depends__:[cr,Sr,wr],__init__:["connectPreview"],connect:["type",Ui],connectPreview:["type",to]},no="djs-connection-preview";function ro(t,e,n,r){this._canvas=e,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}function io(t){var e={};return function(n){var r=JSON.stringify(n),i=e[r];return i||(i=e[r]=t.apply(null,arguments)),i}}function oo(t){return vt(t)?t:{}}ro.$inject=["injector","canvas","graphicsFactory","elementFactory"],ro.prototype.drawPreview=function(t,e,n){n=n||{};var r,i=t.connectionPreviewGfx,o=t.getConnection,a=n.source,c=n.target,s=n.waypoints,u=n.connectionStart,l=n.connectionEnd,h=n.noLayout,f=n.noCropping,p=n.noNoop,d=this;i||(i=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),G(i),o||(o=t.getConnection=io((function(t,e,n){return d.getConnection(t,e,n)}))),e&&(r=o(e,a,c)),r?(r.waypoints=s||[],this._layouter&&!h&&(r.waypoints=this._layouter.layoutConnection(r,{source:a,target:c,connectionStart:u,connectionEnd:l,waypoints:n.waypoints||r.waypoints})),r.waypoints&&r.waypoints.length||(r.waypoints=[a?oi(a):u,c?oi(c):l]),this._connectionDocking&&(a||c)&&!f&&(r.waypoints=this._connectionDocking.getCroppedWaypoints(r,a,c)),this._graphicsFactory.drawConnection(i,r)):!p&&this.drawNoopPreview(i,n)},ro.prototype.drawNoopPreview=function(t,e){var n=e.source,r=e.target,i=e.connectionStart||oi(n),o=e.connectionEnd||oi(r),a=this.cropWaypoints(i,o,n,r),c=this.createNoopConnection(a[0],a[1]);P(t,c)},ro.prototype.cropWaypoints=function(t,e,n,r){var i=this._graphicsFactory,o=n&&i.getShapePath(n),a=r&&i.getShapePath(r),c=i.getConnectionPath({waypoints:[t,e]});return t=n&&ci(o,c,!0)||t,e=r&&ci(a,c,!1)||e,[t,e]},ro.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&W(t.connectionPreviewGfx)},ro.prototype.getConnection=function(t){var e=oo(t);return this._elementFactory.createConnection(e)},ro.prototype.createConnectionPreviewGfx=function(){var t=K("g");return z(t,{pointerEvents:"none"}),I(t).add(no),P(this._canvas.getDefaultLayer(),t),t},ro.prototype.createNoopConnection=function(t,e){var n=K("polyline");return z(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),z(n,{points:[t.x,t.y,e.x,e.y]}),n};var ao={__init__:["connectionPreview"],connectionPreview:["type",ro]};function co(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}co.prototype.next=function(){return this._prefix+ ++this._counter};var so=new co("ov"),uo=500;function lo(t,e,n,r){this._eventBus=e,this._canvas=n,this._elementRegistry=r,this._ids=so,this._overlayDefaults=Wt({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=ho(n.getContainer()),this._init()}function ho(t){var e=gn('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return t.insertBefore(e,t.firstChild),e}function fo(t,e,n){Wt(t.style,{left:e+"px",top:n+"px"})}function po(t,e){t.style.display=!1===e?"none":""}function vo(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){t.style[n+"transform"]=e}))}lo.$inject=["config.overlays","eventBus","canvas","elementRegistry"],lo.prototype.get=function(t){if(mt(t)&&(t={id:t}),mt(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?bt(e.overlays,Bt({type:t.type})):e.overlays.slice():[]}return t.type?bt(this._overlays,Bt({type:t.type})):t.id?this._overlays[t.id]:null},lo.prototype.add=function(t,e,n){if(vt(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var r=this._ids.next();return n=Wt({},this._overlayDefaults,n,{id:r,type:e,element:t,html:n.html}),this._addOverlay(n),r},lo.prototype.remove=function(t){var e=this.get(t)||[];dt(e)||(e=[e]);var n=this;St(e,(function(t){var e=n._getOverlayContainer(t.element,!0);if(t&&(Sn(t.html),Sn(t.htmlContainer),delete t.htmlContainer,delete t.element,delete n._overlays[t.id]),e){var r=e.overlays.indexOf(t);-1!==r&&e.overlays.splice(r,1)}}))},lo.prototype.show=function(){po(this._overlayRoot)},lo.prototype.hide=function(){po(this._overlayRoot,!1)},lo.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Qe(this._overlayRoot)},lo.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,r=e.x,i=e.y;if(e.waypoints){var o=Jt(e);r=o.x,i=o.y}fo(n,r,i),qe(t.html,"data-container-id",e.id)},lo.prototype._updateOverlay=function(t){var e,n,r=t.position,i=t.htmlContainer,o=t.element,a=r.left,c=r.top;void 0!==r.right&&(e=o.waypoints?Jt(o).width:o.width,a=-1*r.right+e);void 0!==r.bottom&&(n=o.waypoints?Jt(o).height:o.height,c=-1*r.bottom+n);fo(i,a||0,c||0)},lo.prototype._createOverlayContainer=function(t){var e=gn('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},lo.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";vo(this._overlayRoot,n)},lo.prototype._getOverlayContainer=function(t,e){var n=wt(this._overlayContainers,(function(e){return e.element===t}));return n||e?n:this._createOverlayContainer(t)},lo.prototype._addOverlay=function(t){var e,n,r=t.id,i=t.element,o=t.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),mt(o)&&(o=gn(o)),n=this._getOverlayContainer(i),e=gn('<div class="djs-overlay" data-overlay-id="'+r+'" style="position: absolute">'),e.appendChild(o),t.type&&Ze(e).add("djs-overlay-"+t.type),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[r]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},lo.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,r=n&&n.minZoom,i=n&&n.maxZoom,o=t.htmlContainer,a=!0;n&&((ft(r)&&r>e.scale||ft(i)&&i<e.scale)&&(a=!1),po(o,a)),this._updateOverlayScale(t,e)},lo.prototype._updateOverlayScale=function(t,e){var n,r,i,o=t.scale,a=t.htmlContainer,c="";!0!==o&&(!1===o?(n=1,r=1):(n=o.min,r=o.max),ft(n)&&e.scale<n&&(i=(1/e.scale||1)*n),ft(r)&&e.scale>r&&(i=(1/e.scale||1)*r)),ft(i)&&(c="scale("+i+","+i+")"),vo(a,c)},lo.prototype._updateOverlaysVisibilty=function(t){var e=this;St(this._overlays,(function(n){e._updateOverlayVisibilty(n,t)}))},lo.prototype._init=function(){var t=this._eventBus,e=this;function n(t){e._updateRoot(t),e._updateOverlaysVisibilty(t),e.show()}t.on("canvas.viewbox.changing",(function(t){e.hide()})),t.on("canvas.viewbox.changed",(function(t){n(t.viewbox)})),t.on(["shape.remove","connection.remove"],(function(t){var n=t.element,r=e.get({element:n});St(r,(function(t){e.remove(t.id)}));var i=e._getOverlayContainer(n);if(i){Sn(i.html);var o=e._overlayContainers.indexOf(i);-1!==o&&e._overlayContainers.splice(o,1)}})),t.on("element.changed",uo,(function(t){var n=t.element,r=e._getOverlayContainer(n,!0);r&&(St(r.overlays,(function(t){e._updateOverlay(t)})),e._updateOverlayContainer(r))})),t.on("element.marker.update",(function(t){var n=e._getOverlayContainer(t.element,!0);n&&Ze(n.html)[t.add?"add":"remove"](t.marker)})),t.on("diagram.clear",this.clear,this)};var yo={__init__:["overlays"],overlays:["type",lo]},go=".entry",mo=1e3;function xo(t,e,n){this._eventBus=e,this._overlays=n;var r=ft(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:r},this._current=null,this._init()}function _o(t,e){var n=Ze(t),r=dt(e)?e:e.split(/\s+/g);r.forEach((function(t){n.add(t)}))}xo.$inject=["config.contextPad","eventBus","overlays"],xo.prototype._init=function(){var t=this._eventBus,e=this;t.on("selection.changed",(function(t){var n=t.newSelection;1===n.length?e.open(n[0]):e.close()})),t.on("elements.delete",(function(t){var n=t.elements;St(n,(function(t){e.isOpen(t)&&e.close()}))})),t.on("element.changed",(function(t){var n=t.element,r=e._current;r&&r.element===n&&e.open(n,!0)}))},xo.prototype.registerProvider=function(t,e){e||(e=t,t=mo),this._eventBus.on("contextPad.getProviders",t,(function(t){t.providers.push(e)}))},xo.prototype.getEntries=function(t){var e=this._getProviders(),n={};return St(e,(function(e){var r=e.getContextPadEntries(t);gt(r)?n=r(n):St(r,(function(t,e){n[e]=t}))})),n},xo.prototype.trigger=function(t,e,n){var r,i,o,a=this._current.element,c=this._current.entries,s=e.delegateTarget||e.target;if(!s)return e.preventDefault();if(r=c[qe(s,"data-action")],i=r.action,o=e.originalEvent||e,gt(i)){if("click"===t)return i(o,a,n)}else if(i[t])return i[t](o,a,n);e.preventDefault()},xo.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},xo.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},xo.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this.getPad(t),r=n.html;St(e,(function(t,e){var n,i=t.group||"default",o=gn(t.html||'<div class="entry" draggable="true"></div>');qe(o,"data-action",e),n=wn("[data-group="+i+"]",r),n||(n=gn('<div class="group" data-group="'+i+'"></div>'),r.appendChild(n)),n.appendChild(o),t.className&&_o(o,t.className),t.title&&qe(o,"title",t.title),t.imageUrl&&o.appendChild(gn('<img src="'+t.imageUrl+'">'))})),Ze(r).add("open"),this._current={element:t,pad:n,entries:e},this._eventBus.fire("contextPad.open",{current:this._current})},xo.prototype.getPad=function(t){if(this.isOpen())return this._current.pad;var e=this,n=this._overlays,r=gn('<div class="djs-context-pad"></div>'),i=Wt({html:r},this._overlaysConfig);yn.bind(r,go,"click",(function(t){e.trigger("click",t)})),yn.bind(r,go,"dragstart",(function(t){e.trigger("dragstart",t)})),hn.bind(r,"mousedown",(function(t){t.stopPropagation()})),this._overlayId=n.add(t,"context-pad",i);var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:t,pad:o}),o},xo.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},xo.prototype.isOpen=function(t){return!!this._current&&(!t||this._current.element===t)};var wo={__depends__:[Zn,yo],contextPad:["type",xo]},bo=["marker-start","marker-mid","marker-end"],So=["circle","ellipse","line","path","polygon","polyline","rect"];function Eo(t,e,n,r){this._elementRegistry=t,this._canvas=n,this._styles=r,this._clonedMarkers={};var i=this;e.on("drag.cleanup",(function(){St(i._clonedMarkers,(function(t){W(t)})),i._clonedMarkers={}}))}function ko(t,e,n){var r=Oo(z(t,e));return wn("marker#"+r,n||document)}function Oo(t){return t.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function jo(t){return"url(#"+t+")"}function Co(t){return-1!==So.indexOf(t.nodeName)}Eo.$inject=["elementRegistry","eventBus","canvas","styles"],Eo.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},Eo.prototype.addDragger=function(t,e,n){n=n||this.getGfx(t);var r=V(n),i=n.getBoundingClientRect();return this._cloneMarkers(Ie(r)),z(r,this._styles.cls("djs-dragger",[],{x:i.top,y:i.left})),P(e,r),r},Eo.prototype.addFrame=function(t,e){var n=K("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return P(e,n),n},Eo.prototype._cloneMarkers=function(t){var e=this;if(t.childNodes)for(var n=0;n<t.childNodes.length;n++)e._cloneMarkers(t.childNodes[n]);Co(t)&&bo.forEach((function(n){if(z(t,n)){var r=ko(t,n,e._canvas.getContainer());e._cloneMarker(t,r,n)}}))},Eo.prototype._cloneMarker=function(t,e,n){var r=e.id,i=this._clonedMarkers[r];if(!i){i=V(e);var o=r+"-clone";i.id=o,I(i).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[r]=i;var a=wn("defs",this._canvas._svg);a||(a=K("defs"),P(this._canvas._svg,a)),P(a,i)}var c=jo(this._clonedMarkers[r].id);z(t,n,c)};var Mo={__init__:["previewSupport"],previewSupport:["type",Eo]},Po="drop-ok",To="drop-not-ok",Ro="attach-ok",Ao="new-parent",Lo="create",Bo=2e3;function zo(t,e,n,r,i){function o(t,e,n,r,o){if(!e)return!1;t=bt(t,(function(e){var n=e.labelTarget;return!e.parent&&!(No(e)&&-1!==t.indexOf(n))}));var a=wt(t,(function(t){return!Fo(t)})),c=!1,s=!1,u=!1;$o(t)&&(c=i.allowed("shape.attach",{position:n,shape:a,target:e})),c||(u=$o(t)?i.allowed("shape.create",{position:n,shape:a,source:r,target:e}):i.allowed("elements.create",{elements:t,position:n,target:e}));var l=o.connectionTarget;return u||c?(a&&r&&(s=i.allowed("connection.create",{source:l===r?a:r,target:l===r?r:a,hints:{targetParent:e,targetAttach:c}})),{attach:c,connect:s}):(null===u||null===c)&&null}function a(e,n){[Ro,Po,To,Ao].forEach((function(r){r===n?t.addMarker(e,r):t.removeMarker(e,r)}))}function c(){var t=e.context();t&&t.prefix===Lo&&e.cancel()}n.on(["create.move","create.hover"],(function(t){var e=t.context,n=e.elements,r=t.hover,i=e.source,c=e.hints||{};if(!r)return e.canExecute=!1,void(e.target=null);Do(t);var s={x:t.x,y:t.y},u=e.canExecute=r&&o(n,r,s,i,c);r&&null!==u&&(e.target=r,u&&u.attach?a(r,Ro):a(r,u?Ao:To))})),n.on(["create.end","create.out","create.cleanup"],(function(t){var e=t.hover;e&&a(e,null)})),n.on("create.end",(function(t){var e=t.context,n=e.source,i=e.shape,o=e.elements,a=e.target,c=e.canExecute,s=c&&c.attach,u=c&&c.connect,l=e.hints||{};if(!1===c||!a)return!1;Do(t);var h={x:t.x,y:t.y};u?i=r.appendShape(n,i,h,a,{attach:s,connection:!0===u?{}:u,connectionTarget:l.connectionTarget}):(o=r.createElements(o,h,a,Wt({},l,{attach:s})),i=wt(o,(function(t){return!Fo(t)}))),Wt(e,{elements:o,shape:i}),Wt(t,{elements:o,shape:i})})),n.on("create.init",(function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],Bo,(function(){n.off("elements.changed",c)}))})),this.start=function(t,n,r){dt(n)||(n=[n]);var i=wt(n,(function(t){return!Fo(t)}));if(i){r=Wt({elements:n,hints:{},shape:i},r||{}),St(n,(function(t){yt(t.x)||(t.x=0),yt(t.y)||(t.y=0)}));var o=Jt(n);St(n,(function(t){Fo(t)&&(t.waypoints=Ct(t.waypoints,(function(t){return{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2}}))),Wt(t,{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2})})),e.init(t,Lo,{cursor:"grabbing",autoActivate:!0,data:{shape:i,elements:n,context:r}})}}}function Do(t){var e=t.context,n=e.createConstraints;n&&(n.left&&(t.x=Math.max(t.x,n.left)),n.right&&(t.x=Math.min(t.x,n.right)),n.top&&(t.y=Math.max(t.y,n.top)),n.bottom&&(t.y=Math.min(t.y,n.bottom)))}function Fo(t){return!!t.waypoints}function $o(t){return t&&1===t.length&&!Fo(t[0])}function No(t){return!!t.labelTarget}zo.$inject=["canvas","dragging","eventBus","modeling","rules"];var Io=750;function Ho(t,e,n,r,i){function o(t){var e=K("g");z(e,i.cls("djs-drag-group",["no-events"]));var o=K("g");return t.forEach((function(t){var i;t.hidden||(t.waypoints?(i=n._createContainer("connection",o),n.drawConnection(Ie(i),t)):(i=n._createContainer("shape",o),n.drawShape(Ie(i),t),Ge(i,t.x,t.y)),r.addDragger(t,e,i))})),e}e.on("create.move",Io,(function(e){var n,r=e.hover,i=e.context,a=i.elements,c=i.dragGroup;c||(c=i.dragGroup=o(a)),r?(c.parentNode||(n=t.getDefaultLayer(),P(n,c)),Ge(c,e.x,e.y)):W(c)})),e.on("create.cleanup",(function(t){var e=t.context,n=e.dragGroup;n&&W(n)}))}Ho.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var Wo={__depends__:[wr,Mo,Sr,cr],__init__:["create","createPreview"],create:["type",zo],createPreview:["type",Ho]},Go=250;function Vo(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}Vo.$inject=["eventBus","dragging"],Vo.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error('A tool has to be registered with it\'s "events"');n.push(t),this.bindEvents(t,e)},Vo.prototype.isActive=function(t){return t&&this._active===t},Vo.prototype.length=function(t){return this._tools.length},Vo.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},Vo.prototype.bindEvents=function(t,e){var n=this._eventBus,r=this._dragging,i=[];n.on(e.tool+".init",(function(e){var n=e.context;if(!n.reactivate&&this.isActive(t))return this.setActive(null),void r.cancel();this.setActive(t)}),this),St(e,(function(t){i.push(t+".ended"),i.push(t+".canceled")})),n.on(i,Go,(function(t){var e=t.originalEvent;this._active&&(e&&on(e.target,'.group[data-group="tools"]')||this.setActive(null))}),this)};var qo={__depends__:[wr],__init__:["toolManager"],toolManager:["type",Vo]};function Yo(t){return!t.altKey&&(t.ctrlKey||t.metaKey)}function Uo(t,e){return t=dt(t)?t:[t],-1!==t.indexOf(e.key)||-1!==t.indexOf(e.keyCode)}var Xo=1500,Ko="grab";function Zo(t,e,n,r,i){this._dragging=n;var o=this,a=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",Xo,(function(t){if(qn(t))return this.activateMove(t.originalEvent),!1}),this),a&&a.addListener(Xo,(function(t){function e(t){o.activateMove(t),window.removeEventListener("mousemove",e)}function r(t){Jo(t.keyEvent)&&(window.removeEventListener("mousemove",e),a.removeListener(r,"keyboard.keyup"),n.cancel())}Jo(t.keyEvent)&&(o.isActive()||(window.addEventListener("mousemove",e),a.addListener(Xo,r,"keyboard.keyup")))}),"keyboard.keydown"),t.on("hand.end",(function(e){var n=e.originalEvent.target;if(!e.hover&&!(n instanceof SVGElement))return!1;t.once("hand.ended",(function(){this.activateMove(e.originalEvent,{reactivate:!0})}),this)}),this),t.on("hand.move.move",(function(t){var n=e.viewbox().scale;e.scroll({dx:t.dx*n,dy:t.dy*n})})),t.on("hand.move.end",(function(e){var n=e.context,r=n.reactivate;return!qn(e)&&r&&t.once("hand.move.ended",(function(t){this.activateHand(t.originalEvent,!0,!0)}),this),!1}),this)}function Jo(t){return Uo(" ",t)}Zo.$inject=["eventBus","canvas","dragging","injector","toolManager"],Zo.prototype.activateMove=function(t,e,n){"object"===typeof e&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:Ko,data:{context:n||{}}})},Zo.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:Ko,data:{context:{reactivate:n}}})},Zo.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},Zo.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^(hand|hand\.move)$/.test(t.prefix)};var Qo={__depends__:[qo],__init__:["handTool"],handTool:["type",Zo]},ta="crosshair";function ea(t,e,n,r,i,o){this._selection=i,this._dragging=n;var a=this,c={create:function(t){var n,r=e.getDefaultLayer();n=t.frame=K("rect"),z(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),P(r,n)},update:function(t){var e=t.frame,n=t.bbox;z(e,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(t){t.frame&&W(t.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",(function(e){var n=e.originalEvent.target;(e.hover||n instanceof SVGElement)&&t.once("lasso.selection.ended",(function(){a.activateLasso(e.originalEvent,!0)}))})),t.on("lasso.end",(function(t){var e=na(t),n=r.filter((function(t){return t}));a.select(n,e)})),t.on("lasso.start",(function(t){var e=t.context;e.bbox=na(t),c.create(e)})),t.on("lasso.move",(function(t){var e=t.context;e.bbox=na(t),c.update(e)})),t.on("lasso.cleanup",(function(t){var e=t.context;c.remove(e)})),t.on("element.mousedown",1500,(function(t){if(Yn(t))return a.activateLasso(t.originalEvent),!0}))}function na(t){var e,n={x:t.x-t.dx,y:t.y-t.dy},r={x:t.x,y:t.y};return e=n.x<=r.x&&n.y<r.y||n.x<r.x&&n.y<=r.y?{x:n.x,y:n.y,width:r.x-n.x,height:r.y-n.y}:n.x>=r.x&&n.y<r.y||n.x>r.x&&n.y<=r.y?{x:r.x,y:n.y,width:n.x-r.x,height:r.y-n.y}:n.x<=r.x&&n.y>r.y||n.x<r.x&&n.y>=r.y?{x:n.x,y:r.y,width:r.x-n.x,height:n.y-r.y}:n.x>=r.x&&n.y>r.y||n.x>r.x&&n.y>=r.y?{x:r.x,y:r.y,width:n.x-r.x,height:n.y-r.y}:{x:r.x,y:r.y,width:0,height:0},e}ea.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],ea.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:ta,data:{context:{}}})},ea.prototype.activateSelection=function(t){this._dragging.init(t,"lasso.selection",{trapClick:!1,cursor:ta,data:{context:{}}})},ea.prototype.select=function(t,e){var n=Qt(t,e);this._selection.select(Tt(n))},ea.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},ea.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};var ra={__depends__:[qo],__init__:["lassoTool"],lassoTool:["type",ea]},ia="connect-ok",oa="connect-not-ok";function aa(t,e,n,r,i,o){var a=this;this._dragging=e,this._rules=o,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",(function(t){var e=t.context,n=t.hover,i=e.canStartConnect=a.canStartConnect(n);null!==i&&(e.startTarget=n,r.addMarker(n,i?ia:oa))})),t.on(["global-connect.out","global-connect.cleanup"],(function(t){var e=t.context.startTarget,n=t.context.canStartConnect;e&&r.removeMarker(e,n?ia:oa)})),t.on(["global-connect.ended"],(function(e){var r=e.context,i=r.startTarget,o={x:e.x,y:e.y},c=a.canStartConnect(i);if(c)return t.once("element.out",(function(){t.once(["connect.ended","connect.canceled"],(function(){t.fire("global-connect.drag.ended")})),n.start(null,i,o)})),!1}))}aa.$inject=["eventBus","dragging","connect","canvas","toolManager","rules"],aa.prototype.start=function(t){this._dragging.init(t,"global-connect",{trapClick:!1,data:{context:{}}})},aa.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},aa.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},aa.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};var ca={__depends__:[eo,Sr,wr,qo],globalConnect:["type",aa]},sa=15;function ua(t,e){var n;function r(r){var i=n.start,o=$n(r),a=dr(o,i);if(!n.dragging&&la(a)>sa&&(n.dragging=!0,fr(t),ur("grab")),n.dragging){var c=n.last||n.start;a=dr(o,c),e.scroll({dx:a.x,dy:a.y}),n.last=o}r.preventDefault()}function i(t){hn.unbind(document,"mousemove",r),hn.unbind(document,"mouseup",i),n=null,lr()}function o(t){if(!on(t.target,".djs-draggable")&&!(t.button||t.ctrlKey||t.shiftKey||t.altKey))return n={start:$n(t)},hn.bind(document,"mousemove",r),hn.bind(document,"mouseup",i),!0}t.on("element.mousedown",500,(function(t){return o(t.originalEvent)}))}function la(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}ua.$inject=["eventBus","canvas"];var ha={__init__:["moveCanvas"],moveCanvas:["type",ua]},fa=500,pa=1250,da=1500,va=Math.round;function ya(t){return{x:t.x+va(t.width/2),y:t.y+va(t.height/2)}}function ga(t,e,n,r,i){function o(t,e,n,r){return i.allowed("elements.move",{shapes:t,delta:e,position:n,target:r})}function a(t,n,r,i){if(vt(r)&&(i=r,r=!1),!n.waypoints&&n.parent){var o=ya(n);return e.init(t,o,"shape.move",{cursor:"grabbing",autoActivate:r,data:{shape:n,context:i||{}}}),!0}}t.on("shape.move.start",da,(function(t){var e=t.context,n=t.shape,i=r.get().slice();-1===i.indexOf(n)&&(i=[n]),i=ma(i),Wt(e,{shapes:i,validatedShapes:i,shape:n})})),t.on("shape.move.start",pa,(function(t){var e,n=t.context,r=n.validatedShapes;if(e=n.canExecute=o(r),!e)return!1})),t.on("shape.move.move",fa,(function(t){var e,n=t.context,r=n.validatedShapes,i=t.hover,a={x:t.dx,y:t.dy},c={x:t.x,y:t.y};e=o(r,a,c,i),n.delta=a,n.canExecute=e,n.target=null!==e?i:null})),t.on("shape.move.end",(function(t){var e=t.context,r=e.delta,i=e.canExecute,o="attach"===i,a=e.shapes;if(!1===i)return!1;r.x=va(r.x),r.y=va(r.y),0===r.x&&0===r.y||n.moveElements(a,r,e.target,{primaryShape:e.shape,attach:o})})),t.on("element.mousedown",(function(t){var e=Dn(t);if(!e)throw new Error("must supply DOM mousedown event");return a(e,t.element)})),this.start=a}function ma(t){var e=Rt(t,"id");return bt(t,(function(t){while(t=t.parent)if(e[t.id])return!1;return!0}))}ga.$inject=["eventBus","dragging","modeling","selection","rules"];var xa=499,_a="djs-dragging",wa="drop-ok",ba="drop-not-ok",Sa="new-parent",Ea="attach-ok";function ka(t,e,n,r){function i(t){var e=o(t),n=Oa(e);return n}function o(t){var e=Kt(t,!0),n=Ct(e,(function(t){return(t.incoming||[]).concat(t.outgoing||[])}));return st(e.concat(n))}function a(t,n){[Ea,wa,ba,Sa].forEach((function(r){r===n?e.addMarker(t,r):e.removeMarker(t,r)}))}function c(t,n,i){r.addDragger(n,t.dragGroup),i&&e.addMarker(n,_a),t.allDraggedElements?t.allDraggedElements.push(n):t.allDraggedElements=[n]}t.on("shape.move.start",xa,(function(t){var a=t.context,c=a.shapes,s=a.allDraggedElements,u=i(c);if(!a.dragGroup){var l=K("g");z(l,n.cls("djs-drag-group",["no-events"]));var h=e.getDefaultLayer();P(h,l),a.dragGroup=l}u.forEach((function(t){r.addDragger(t,a.dragGroup)})),s=s?st([s,o(c)]):o(c),St(s,(function(t){e.addMarker(t,_a)})),a.allDraggedElements=s,a.differentParents=ja(c)})),t.on("shape.move.move",xa,(function(t){var e=t.context,n=e.dragGroup,r=e.target,i=e.shape.parent,o=e.canExecute;r&&("attach"===o?a(r,Ea):e.canExecute&&r&&r.id!==i.id?a(r,Sa):a(r,e.canExecute?wa:ba)),Ge(n,t.dx,t.dy)})),t.on(["shape.move.out","shape.move.cleanup"],(function(t){var e=t.context,n=e.target;n&&a(n,null)})),t.on("shape.move.cleanup",(function(t){var n=t.context,r=n.allDraggedElements,i=n.dragGroup;St(r,(function(t){e.removeMarker(t,_a)})),i&&W(i)})),this.makeDraggable=c}function Oa(t){var e=bt(t,(function(e){return!Ca(e)||wt(t,Bt({id:e.source.id}))&&wt(t,Bt({id:e.target.id}))}));return e}function ja(t){return 1!==Pt(Rt(t,(function(t){return t.parent&&t.parent.id})))}function Ca(t){return t.waypoints}ka.$inject=["eventBus","canvas","styles","previewSupport"];var Ma={__depends__:[Zn,cr,tr,Sr,wr,Mo],__init__:["move","movePreview"],move:["type",ga],movePreview:["type",ka]},Pa=".djs-palette-toggle",Ta=".entry",Ra=Pa+", "+Ta,Aa="open",La="two-column",Ba=1e3;function za(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",(function(t){var e=t.tool;n.updateToolHighlight(e)})),t.on("i18n.changed",(function(){n._update()})),t.on("diagram.init",(function(){n._diagramInitialized=!0,n._rebuild()}))}function Da(t,e){var n=Ze(t),r=dt(e)?e:e.split(/\s+/g);r.forEach((function(t){n.add(t)}))}function Fa(t,e){var n=e.getPaletteEntries();return gt(n)?n(t):(St(n,(function(e,n){t[n]=e})),t)}za.$inject=["eventBus","canvas"],za.prototype.registerProvider=function(t,e){e||(e=t,t=Ba),this._eventBus.on("palette.getProviders",t,(function(t){t.providers.push(e)})),this._rebuild()},za.prototype.getEntries=function(){var t=this._getProviders();return t.reduce(Fa,{})},za.prototype._rebuild=function(){if(this._diagramInitialized){var t=this._getProviders();t.length&&(this._container||this._init(),this._update())}},za.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),r=this._container=gn(za.HTML_MARKUP);n.appendChild(r),yn.bind(r,Ra,"click",(function(e){var n=e.delegateTarget;if(nn(n,Pa))return t.toggle();t.trigger("click",e)})),hn.bind(r,"mousedown",(function(t){t.stopPropagation()})),yn.bind(r,Ta,"dragstart",(function(e){t.trigger("dragstart",e)})),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:r})},za.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},za.prototype._toggleState=function(t){t=t||{};var e,n=this._getParentContainer(),r=this._container,i=this._eventBus,o=Ze(r);e="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle(La,e),"open"in t&&o.toggle(Aa,t.open),i.fire("palette.changed",{twoColumn:e,open:this.isOpen()})},za.prototype._update=function(){var t=wn(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Qe(t),St(e,(function(e,n){var r=e.group||"default",i=wn("[data-group="+r+"]",t);i||(i=gn('<div class="group" data-group="'+r+'"></div>'),t.appendChild(i));var o=e.html||(e.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),a=gn(o);i.appendChild(a),e.separator||(qe(a,"data-action",n),e.title&&qe(a,"title",e.title),e.className&&Da(a,e.className),e.imageUrl&&a.appendChild(gn('<img src="'+e.imageUrl+'">')))})),this.open()},za.prototype.trigger=function(t,e,n){var r,i,o,a=this._entries,c=e.delegateTarget||e.target;if(!c)return e.preventDefault();r=a[qe(c,"data-action")],r&&(i=r.action,o=e.originalEvent||e,gt(i)?"click"===t&&i(o,n):i[t]&&i[t](o,n),e.preventDefault())},za.prototype._layoutChanged=function(){this._toggleState({})},za.prototype._needsCollapse=function(t,e){var n=50,r=46*Object.keys(e).length;return t<r+n},za.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},za.prototype.open=function(){this._toggleState({open:!0})},za.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},za.prototype.isActiveTool=function(t){return t&&this._activeTool===t},za.prototype.updateToolHighlight=function(t){var e,n;this._toolsContainer||(e=wn(".djs-palette-entries",this._container),this._toolsContainer=wn("[data-group=tools]",e)),n=this._toolsContainer,St(n.children,(function(e){var n=e.getAttribute("data-action");if(n){var r=Ze(e);n=n.replace("-tool",""),r.contains("entry")&&n===t?r.add("highlighted-entry"):r.remove("highlighted-entry")}}))},za.prototype.isOpen=function(){return Ze(this._container).has(Aa)},za.prototype._getParentContainer=function(){return this._canvas.getContainer()},za.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var $a={__init__:["palette"],palette:["type",za]};function Na(t){return Math.log(t)/Math.log(10)}function Ia(t,e){var n=Na(t.min),r=Na(t.max),i=Math.abs(n)+Math.abs(r);return i/e}function Ha(t,e){return Math.max(t.min,Math.min(t.max,e))}var Wa=Math.sign||function(t){return t>=0?1:-1},Ga={min:.2,max:4},Va=10,qa=.1,Ya=.75;function Ua(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=It(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||Ya;var r=this;e.on("canvas.init",(function(e){r._init(!1!==t.enabled)}))}Ua.$inject=["config.zoomScroll","eventBus","canvas"],Ua.prototype.scroll=function(t){this._canvas.scroll(t)},Ua.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Ua.prototype.zoom=function(t,e){var n=Ia(Ga,2*Va);this._totalDelta+=t,Math.abs(this._totalDelta)>qa&&(this._zoom(t,e,n),this._totalDelta=0)},Ua.prototype._handleWheel=function(t){if(!on(t.target,".djs-scrollable",!0)){var e=this._container;t.preventDefault();var n,r=t.ctrlKey,i=t.shiftKey,o=-1*this._scale;if(o*=r?0===t.deltaMode?.02:.32:0===t.deltaMode?1:16,r){var a=e.getBoundingClientRect(),c={x:t.clientX-a.left,y:t.clientY-a.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*Wa(t.deltaY)*o,this.zoom(n,c)}else n=i?{dx:o*t.deltaY,dy:0}:{dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(n)}},Ua.prototype.stepZoom=function(t,e){var n=Ia(Ga,Va);this._zoom(t,e,n)},Ua.prototype._zoom=function(t,e,n){var r=this._canvas,i=t>0?1:-1,o=Na(r.zoom()),a=Math.round(o/n)*n;a+=n*i;var c=Math.pow(10,a);r.zoom(Ha(Ga,c),e)},Ua.prototype.toggle=function(t){var e=this._container,n=this._handleWheel,r=this._enabled;return"undefined"===typeof t&&(t=!r),r!==t&&hn[t?"bind":"unbind"](e,"wheel",n,!1),this._enabled=t,t},Ua.prototype._init=function(t){this.toggle(t)};var Xa={__init__:["zoomScroll"],zoomScroll:["type",Ua]};function Ka(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}Ka.$inject=["eventBus","injector"],Ka.prototype.execute=function(t,e){if(!t)throw new Error("command required");var n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction(n)},Ka.prototype.canExecute=function(t,e){var n={command:t,context:e},r=this._getHandler(t),i=this._fire(t,"canExecute",n);if(void 0===i){if(!r)return!1;r.canExecute&&(i=r.canExecute(e))}return i},Ka.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,!1!==t&&this._fire("changed")},Ka.prototype.undo=function(){var t,e=this._getUndoAction();if(e){this._pushAction(e);while(e){if(this._internalUndo(e),t=this._getUndoAction(),!t||t.id!==e.id)break;e=t}this._popAction()}},Ka.prototype.redo=function(){var t,e=this._getRedoAction();if(e){this._pushAction(e);while(e){if(this._internalExecute(e,!0),t=this._getRedoAction(),!t||t.id!==e.id)break;e=t}this._popAction()}},Ka.prototype.register=function(t,e){this._setHandler(t,e)},Ka.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(e);this.register(t,n)},Ka.prototype.canUndo=function(){return!!this._getUndoAction()},Ka.prototype.canRedo=function(){return!!this._getRedoAction()},Ka.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ka.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ka.prototype._internalUndo=function(t){var e=this,n=t.command,r=t.context,i=this._getHandler(n);this._atomicDo((function(){e._fire(n,"revert",t),i.revert&&e._markDirty(i.revert(r)),e._revertedAction(t),e._fire(n,"reverted",t)}))},Ka.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);var r,i,o,a=e?[t+"."+e,e]:[t];for(n=this._eventBus.createEvent(n),r=0;i=a[r];r++)if(o=this._eventBus.fire("commandStack."+i,n),n.cancelBubble)break;return o},Ka.prototype._createId=function(){return this._uid++},Ka.prototype._atomicDo=function(t){var e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},Ka.prototype._internalExecute=function(t,e){var n=this,r=t.command,i=t.context,o=this._getHandler(r);if(!o)throw new Error("no command handler registered for <"+r+">");this._pushAction(t),e||(this._fire(r,"preExecute",t),o.preExecute&&o.preExecute(i),this._fire(r,"preExecuted",t)),this._atomicDo((function(){n._fire(r,"execute",t),o.execute&&n._markDirty(o.execute(i)),n._executedAction(t,e),n._fire(r,"executed",t)})),e||(this._fire(r,"postExecute",t),o.postExecute&&o.postExecute(i),this._fire(r,"postExecuted",t)),this._popAction(t)},Ka.prototype._pushAction=function(t){var e=this._currentExecution,n=e.actions,r=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=r&&r.id||this._createId()),n.push(t)},Ka.prototype._popAction=function(){var t=this._currentExecution,e=t.actions,n=t.dirty;e.pop(),e.length||(this._eventBus.fire("elements.changed",{elements:At("id",n.reverse())}),n.length=0,this._fire("changed"))},Ka.prototype._markDirty=function(t){var e=this._currentExecution;t&&(t=dt(t)?t:[t],e.dirty=e.dirty.concat(t))},Ka.prototype._executedAction=function(t,e){var n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)},Ka.prototype._revertedAction=function(t){this._stackIdx--},Ka.prototype._getHandler=function(t){return this._handlerMap[t]},Ka.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};var Za={commandStack:["type",Ka]};function Ja(t,e){if("function"!==typeof e)throw new Error("removeFn iterator must be a function");if(t){var n;while(n=t[0])e(n);return t}}var Qa=1e3;function tc(t){this._eventBus=t}function ec(t,e){return function(n){return t.call(e||null,n.context,n.command,n)}}tc.$inject=["eventBus"],tc.prototype.on=function(t,e,n,r,i,o){if((gt(e)||yt(e))&&(o=i,i=r,r=n,n=e,e=null),gt(n)&&(o=i,i=r,r=n,n=Qa),vt(i)&&(o=i,i=!1),!gt(r))throw new Error("handlerFn must be a function");dt(t)||(t=[t]);var a=this._eventBus;St(t,(function(t){var c=["commandStack",t,e].filter((function(t){return t})).join(".");a.on(c,n,i?ec(r,o):r,o)}))};var nc=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];St(nc,(function(t){tc.prototype[t]=function(e,n,r,i,o){(gt(e)||yt(e))&&(o=i,i=r,r=n,n=e,e=null),this.on(e,t,n,r,i,o)}}));var rc=250,ic=1400;function oc(t,e,n){tc.call(this,e);var r=t.get("movePreview",!1);e.on("shape.move.start",ic,(function(t){var e=t.context,n=e.shapes,r=e.validatedShapes;e.shapes=ac(n),e.validatedShapes=ac(r)})),r&&e.on("shape.move.start",rc,(function(t){var e=t.context,n=e.shapes,i=[];St(n,(function(t){St(t.labels,(function(n){n.hidden||-1!==e.shapes.indexOf(n)||i.push(n),t.labelTarget&&i.push(t)}))})),St(i,(function(t){r.makeDraggable(e,t,!0)}))})),this.preExecuted("elements.move",ic,(function(t){var e=t.context,n=e.closure,r=n.enclosedElements,i=[];St(r,(function(t){St(t.labels,(function(t){r[t.id]||i.push(t)}))})),n.addAll(i)})),this.preExecute(["connection.delete","shape.delete"],(function(t){var e=t.context,r=e.connection||e.shape;Ja(r.labels,(function(t){n.removeShape(t,{nested:!0})}))})),this.execute("shape.delete",(function(t){var e=t.context,n=e.shape,r=n.labelTarget;r&&(e.labelTargetIndex=ue(r.labels,n),e.labelTarget=r,n.labelTarget=null)})),this.revert("shape.delete",(function(t){var e=t.context,n=e.shape,r=e.labelTarget,i=e.labelTargetIndex;r&&(se(r.labels,n,i),n.labelTarget=r)}))}function ac(t){return bt(t,(function(e){return-1===t.indexOf(e.labelTarget)}))}k()(oc,tc),oc.$inject=["injector","eventBus","modeling"];var cc={__init__:["labelSupport"],labelSupport:["type",oc]},sc=function(t){return t},uc=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var r=t.join("");return r},lc=function(t,e){return t.type==e};function hc(t,e){return jt(e,(function(e){return lc(t,e)}))}var fc={width:90,height:20};function pc(){Le.call(this),this._translate=sc}function dc(t,e){this._modeling=t,this._canvas=e}function vc(t){this._modeling=t}function yc(t,e){return jt(t.outgoing,(function(t){return t.target===e}))}function gc(t,e){this._canvas=t,this._layouter=e}k()(pc,Le),pc.$inject=[],pc.prototype.baseCreate=Le.prototype.create,pc.prototype.create=function(t,e){return"label"===t?this.baseCreate(t,Wt({type:"label"},fc,e)):this.createFlowElement(t,e)},pc.prototype.createFlowElement=function(t,e){if(null==e||void 0==e||""==e)return this.baseCreate(t,e);e.businessObject=e.businessObject||{id:uc()},"connection"===t&&(e.type="myline");var n=e.businessObject;n.type=e.type;var r=this._getDefaultSize(n.type);return e=Wt({businessObject:n,id:n.id},r,e),this.baseCreate(t,e)},pc.prototype._getDefaultSize=function(t){var e={width:100,height:80};switch(t){case"startEvent":case"endEvent":e={width:36,height:36};break;case"gatewayAnd":case"gatewayXor":case"gatewayInclusive":e={width:50,height:50};break;case"subprocess":case"userTask":case"scriptTask":e={width:100,height:80};break}return e},dc.$inject=["modeling","canvas"],dc.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,r=t.alignment;St(n,(function(t){var n={x:0,y:0};r.left?n.x=r.left-t.x:r.right?n.x=r.right-t.width-t.x:r.center?n.x=r.center-Math.round(t.width/2)-t.x:r.top?n.y=r.top-t.y:r.bottom?n.y=r.bottom-t.height-t.y:r.middle&&(n.y=r.middle-Math.round(t.height/2)-t.y),e.moveElements([t],n,t.parent)}))},dc.prototype.postExecute=function(t){},vc.$inject=["modeling"],vc.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,r=t.shape,i=t.hints||{};r=t.shape=this._modeling.createShape(r,t.position,n,{attach:i.attach}),t.shape=r},vc.prototype.postExecute=function(t){var e=t.hints||{};yc(t.source,t.shape)||(e.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))},gc.$inject=["canvas","layouter"],gc.prototype.execute=function(t){var e=t.connection,n=t.source,r=t.target,i=t.parent,o=t.parentIndex,a=t.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return e.source=n,e.target=r,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,a)),this._canvas.addConnection(e,i,o),e},gc.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var mc=Math.round;function xc(t){this._modeling=t}function _c(t){return!!t.waypoints}xc.$inject=["modeling"],xc.prototype.preExecute=function(t){var e=t.elements,n=t.parent,r=t.parentIndex,i=t.position,o=t.hints,a=this._modeling;St(e,(function(t){yt(t.x)||(t.x=0),yt(t.y)||(t.y=0)}));var c=Jt(e);St(e,(function(t){_c(t)&&(t.waypoints=Ct(t.waypoints,(function(t){return{x:mc(t.x-c.x-c.width/2+i.x),y:mc(t.y-c.y-c.height/2+i.y)}}))),Wt(t,{x:mc(t.x-c.x-c.width/2+i.x),y:mc(t.y-c.y-c.height/2+i.y)})}));var s=Vt(e),u={};St(e,(function(t){if(_c(t))u[t.id]=yt(r)?a.createConnection(u[t.source.id],u[t.target.id],r,t,t.parent||n,o):a.createConnection(u[t.source.id],u[t.target.id],t,t.parent||n,o);else{var e=Wt({},o);-1===s.indexOf(t)&&(e.autoResize=!1),u[t.id]=yt(r)?a.createShape(t,Gt(t,["x","y","width","height"]),t.parent||n,r,e):a.createShape(t,Gt(t,["x","y","width","height"]),t.parent||n,e)}})),t.elements=Tt(u)};var wc=Math.round;function bc(t){this._canvas=t}function Sc(t){bc.call(this,t)}bc.$inject=["canvas"],bc.prototype.execute=function(t){var e=t.shape,n=t.position,r=t.parent,i=t.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?Wt(e,n):Wt(e,{x:n.x-wc(e.width/2),y:n.y-wc(e.height/2)}),this._canvas.addShape(e,r,i),e},bc.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e},k()(Sc,bc),Sc.$inject=["canvas"];var Ec=bc.prototype.execute;Sc.prototype.execute=function(t){var e=t.shape;return Oc(e),e.labelTarget=t.labelTarget,Ec.call(this,t)};var kc=bc.prototype.revert;function Oc(t){["width","height"].forEach((function(e){"undefined"===typeof t[e]&&(t[e]=0)}))}function jc(t,e){this._canvas=t,this._modeling=e}function Cc(t,e){this._modeling=t,this._elementRegistry=e}function Mc(t,e){this._canvas=t,this._modeling=e}function Pc(t){return t.waypoints}function Tc(t){this._modeling=t}Sc.prototype.revert=function(t){return t.shape.labelTarget=null,kc.call(this,t)},jc.$inject=["canvas","modeling"],jc.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=ue(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},jc.prototype.revert=function(t){var e=t.connection,n=t.parent,r=t.parentIndex;return e.source=t.source,e.target=t.target,se(n.children,e,r),this._canvas.addConnection(e,n),e},Cc.$inject=["modeling","elementRegistry"],Cc.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry,r=t.elements;St(r,(function(t){n.get(t.id)&&(t.waypoints?e.removeConnection(t):e.removeShape(t))}))},Mc.$inject=["canvas","modeling"],Mc.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;Ja(n.incoming,(function(t){e.removeConnection(t,{nested:!0})})),Ja(n.outgoing,(function(t){e.removeConnection(t,{nested:!0})})),Ja(n.children,(function(t){Pc(t)?e.removeConnection(t,{nested:!0}):e.removeShape(t,{nested:!0})}))},Mc.prototype.execute=function(t){var e=this._canvas,n=t.shape,r=n.parent;return t.oldParent=r,t.oldParentIndex=ue(r.children,n),e.removeShape(n),n},Mc.prototype.revert=function(t){var e=this._canvas,n=t.shape,r=t.oldParent,i=t.oldParentIndex;return se(r.children,n,i),e.addShape(n,r),n},Tc.$inject=["modeling"];var Rc={x:"y",y:"x"};function Ac(t,e){this._layouter=t,this._canvas=e}function Lc(){}function Bc(t,e,n){var r=pr(e),i=pr(n),o=dr(t,r),a={x:o.x*(n.width/e.width),y:o.y*(n.height/e.height)};return ni({x:i.x+a.x,y:i.y+a.y})}function zc(t,e,n){var r=Ic(t),i=Hc(r,e),o=r[0];return i.length?i[i.length-1]:Bc(o.original||o,n,e)}function Dc(t,e,n){var r=Ic(t),i=Hc(r,e),o=r[r.length-1];return i.length?i[0]:Bc(o.original||o,n,e)}function Fc(t,e,n){var r=Ic(t),i=Nc(e,n),o=r[0];return Bc(o.original||o,i,e)}function $c(t,e,n){var r=Ic(t),i=Nc(e,n),o=r[r.length-1];return Bc(o.original||o,i,e)}function Nc(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function Ic(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function Hc(t,e){var n=Ct(t,Gc);return bt(n,(function(t){return Wc(t,e)}))}function Wc(t,e){return"intersect"===ai(e,t,1)}function Gc(t){return t.original||t}function Vc(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function qc(t){this._modeling=t}function Yc(t){this._helper=new qc(t)}function Uc(t){this._modeling=t,this._helper=new qc(t)}function Xc(t){this._modeling=t}function Kc(t){return t.original||t}function Zc(t,e){this._modeling=t,this._rules=e}function Jc(t){this._modeling=t}function Qc(t,e){var n=[];return St(t.concat(e),(function(r){var i=r.incoming,o=r.outgoing;St(i.concat(o),(function(r){var i=r.source,o=r.target;(ts(t,i)||ts(t,o)||ts(e,i)||ts(e,o))&&(ts(n,r)||n.push(r))}))})),n}function ts(t,e){return-1!==t.indexOf(e)}function es(t,e,n){var r=t.x,i=t.y,o=t.width,a=t.height,c=n.x,s=n.y;switch(e){case"n":return{x:r,y:i+s,width:o,height:a-s};case"s":return{x:r,y:i,width:o,height:a+s};case"w":return{x:r+c,y:i,width:o-c,height:a};case"e":return{x:r,y:i,width:o+c,height:a};default:throw new Error("unknown direction: "+e)}}function ns(t){this._modeling=t}function rs(t){return Wt({},t)}function is(t){return Ct(t.waypoints,(function(t){return t=rs(t),t.original&&(t.original=rs(t.original)),t}))}function os(t){switch(t){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function as(t,e,n){var r=os(n);return/e|s/.test(n)?t[r]>e:/n|w/.test(n)?t[r]<e:void 0}function cs(t,e){return-1!==t.indexOf(e)}function ss(t){return{x:t.x,y:t.y,height:t.height,width:t.width}}function us(t){this._modeling=t}function ls(t){var e={};return St(t,(function(t){e[t.id]=t.hidden,t.children&&(e=Wt({},e,ls(t.children)))})),e}function hs(t,e){var n=[];return St(t,(function(t){t.hidden=e,n=n.concat(t),t.children&&(n=n.concat(hs(t.children,t.collapsed||e)))})),n}function fs(t,e){var n=[];return St(t,(function(t){t.hidden=e[t.id],n=n.concat(t),t.children&&(n=n.concat(fs(t.children,e)))})),n}function ps(t){this._modeling=t}function ds(t,e){return ce(t&&t.attachers,e)}function vs(t,e,n){if(t){var r=t.attachers;r||(t.attachers=r=[]),se(r,e,n)}}function ys(){}function gs(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var r=this;t.on("diagram.init",(function(){r.registerHandlers(n)}))}Tc.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,r=t.axis,i=t.dimension;function o(t,e){t.range.min=Math.min(e[r],t.range.min),t.range.max=Math.max(e[r]+e[i],t.range.max)}function a(t){return t[r]+t[i]/2}function c(t){return t.length-1}function s(t){return t.max-t.min}function u(t,n){var i={y:0};i[r]=t-a(n),i[r]&&(i[Rc[r]]=0,e.moveElements([n],i,n.parent))}var l,h,f=n[0],p=c(n),d=n[p],v=0;St(n,(function(t,e){var l,h,f;t.elements.length<2?e&&e!==n.length-1&&(o(t,t.elements[0]),v+=s(t.range)):(l=Lt(t.elements,r),h=l[0],e===p&&(h=l[c(l)]),f=a(h),t.range=null,St(l,(function(e){u(f,e),null!==t.range?o(t,e):t.range={min:e[r],max:e[r]+e[i]}})),e&&e!==n.length-1&&(v+=s(t.range)))})),h=Math.abs(d.range.min-f.range.max),l=Math.round((h-v)/(n.length-1)),l<n.length-1||St(n,(function(t,o){var a,c={};t!==f&&t!==d&&(a=n[o-1],t.range.max=0,St(t.elements,(function(n,o){c[Rc[r]]=0,c[r]=a.range.max-n[r]+l,t.range.min!==n[r]&&(c[r]+=n[r]-t.range.min),c[r]&&e.moveElements([n],c,n.parent),t.range.max=Math.max(n[r]+n[i],o?t.range.max:0)})))}))},Tc.prototype.postExecute=function(t){},Ac.$inject=["layouter","canvas"],Ac.prototype.execute=function(t){var e=t.connection,n=e.waypoints;return Wt(t,{oldWaypoints:n}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e},Ac.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e},Lc.prototype.execute=function(t){var e=t.connection,n=t.delta,r=t.newParent||e.parent,i=t.newParentIndex,o=e.parent;return t.oldParent=o,t.oldParentIndex=ce(o.children,e),se(r.children,e,i),e.parent=r,St(e.waypoints,(function(t){t.x+=n.x,t.y+=n.y,t.original&&(t.original.x+=n.x,t.original.y+=n.y)})),e},Lc.prototype.revert=function(t){var e=t.connection,n=e.parent,r=t.oldParent,i=t.oldParentIndex,o=t.delta;return ce(n.children,e),se(r.children,e,i),e.parent=r,St(e.waypoints,(function(t){t.x-=o.x,t.y-=o.y,t.original&&(t.original.x-=o.x,t.original.y-=o.y)})),e},Vc.prototype.add=function(t,e){return this.addAll([t],e)},Vc.prototype.addAll=function(t,e){var n=Zt(t,!!e,this);return Wt(this,n),this},qc.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]},qc.prototype.moveClosure=function(t,e,n,r,i){var o=this._modeling,a=t.allShapes,c=t.allConnections,s=t.enclosedConnections,u=t.topLevel,l=!1;i&&i.parent===n&&(l=!0),St(a,(function(t){o.moveShape(t,e,u[t.id]&&!l&&n,{recurse:!1,layout:!1})})),St(c,(function(t){var r=!!a[t.source.id],i=!!a[t.target.id];s[t.id]&&r&&i?o.moveConnection(t,e,u[t.id]&&!l&&n):o.layoutConnection(t,{connectionStart:r&&Fc(t,t.source,e),connectionEnd:i&&$c(t,t.target,e)})}))},qc.prototype.getClosure=function(t){return(new Vc).addAll(t,!0)},Yc.$inject=["modeling"],Yc.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)},Yc.prototype.postExecute=function(t){var e,n=t.hints;n&&n.primaryShape&&(e=n.primaryShape,n.oldParent=e.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,e)},Uc.$inject=["modeling"],Uc.prototype.execute=function(t){var e=t.shape,n=t.delta,r=t.newParent||e.parent,i=t.newParentIndex,o=e.parent;return t.oldBounds=Gt(e,["x","y","width","height"]),t.oldParent=o,t.oldParentIndex=ce(o.children,e),se(r.children,e,i),Wt(e,{parent:r,x:e.x+n.x,y:e.y+n.y}),e},Uc.prototype.postExecute=function(t){var e=t.shape,n=t.delta,r=t.hints,i=this._modeling;!1!==r.layout&&(St(e.incoming,(function(t){i.layoutConnection(t,{connectionEnd:$c(t,e,n)})})),St(e.outgoing,(function(t){i.layoutConnection(t,{connectionStart:Fc(t,e,n)})}))),!1!==r.recurse&&this.moveChildren(t)},Uc.prototype.revert=function(t){var e=t.shape,n=t.oldParent,r=t.oldParentIndex,i=t.delta;return se(n.children,e,r),Wt(e,{parent:n,x:e.x-i.x,y:e.y-i.y}),e},Uc.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)},Uc.prototype.getNewParent=function(t){return t.newParent||t.shape.parent},Xc.$inject=["modeling"],Xc.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,r=t.connection,i=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return dt(i)&&(t.oldWaypoints=r.waypoints,r.waypoints=i),e&&(t.oldSource=r.source,r.source=e),n&&(t.oldTarget=r.target,r.target=n),r},Xc.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,r=t.newTarget,i=t.dockingOrPoints,o=t.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),!1!==o.layoutConnection&&(!n||r&&"source"!==o.docking||(a.connectionStart=a.connectionStart||Kc(dt(i)?i[0]:i)),!r||n&&"target"!==o.docking||(a.connectionEnd=a.connectionEnd||Kc(dt(i)?i[i.length-1]:i)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(e,a))},Xc.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,r=t.oldWaypoints,i=t.connection;return e&&(i.source=e),n&&(i.target=n),r&&(i.waypoints=r),i},Zc.$inject=["modeling","rules"],Zc.prototype.preExecute=function(t){var e,n=this,r=this._modeling,i=this._rules,o=t.oldShape,a=t.newData,c=t.hints||{};function s(t,e,n){return i.allowed("connection.reconnect",{connection:n,source:t,target:e})}var u,l={x:a.x,y:a.y},h={x:o.x,y:o.y,width:o.width,height:o.height};e=t.newShape=t.newShape||n.createShape(a,l,o.parent,c),o.host&&r.updateAttachment(e,o.host),!1!==c.moveChildren&&(u=o.children.slice(),r.moveElements(u,{x:0,y:0},e,c));var f=o.incoming.slice(),p=o.outgoing.slice();St(f,(function(t){var r=t.source,i=s(r,e,t);i&&n.reconnectEnd(t,e,Dc(t,e,h),c)})),St(p,(function(t){var r=t.target,i=s(e,r,t);i&&n.reconnectStart(t,e,zc(t,e,h),c)}))},Zc.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)},Zc.prototype.execute=function(t){},Zc.prototype.revert=function(t){},Zc.prototype.createShape=function(t,e,n,r){return this._modeling.createShape(t,e,n,r)},Zc.prototype.reconnectStart=function(t,e,n,r){this._modeling.reconnectStart(t,e,n,r)},Zc.prototype.reconnectEnd=function(t,e,n,r){this._modeling.reconnectEnd(t,e,n,r)},Jc.$inject=["modeling"],Jc.prototype.execute=function(t){var e=t.shape,n=t.newBounds,r=t.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},Wt(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},Jc.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,r=t.oldBounds,i=t.hints||{};!1!==i.layout&&(St(n.incoming,(function(t){e.layoutConnection(t,{connectionEnd:Dc(t,n,r)})})),St(n.outgoing,(function(t){e.layoutConnection(t,{connectionStart:zc(t,n,r)})})))},Jc.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return Wt(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},ns.$inject=["modeling"],ns.prototype.preExecute=function(t){var e=t.delta,n=t.direction,r=t.movingShapes,i=t.resizingShapes,o=t.start,a={};this.moveShapes(r,e),St(i,(function(t){a[t.id]=ss(t)})),this.resizeShapes(i,e,n),this.updateConnectionWaypoints(Qc(r,i),e,n,o,r,i,a)},ns.prototype.execute=function(){},ns.prototype.revert=function(){},ns.prototype.moveShapes=function(t,e){var n=this;St(t,(function(t){n._modeling.moveShape(t,e,null,{autoResize:!1,layout:!1,recurse:!1})}))},ns.prototype.resizeShapes=function(t,e,n){var r=this;St(t,(function(t){var i=es(t,n,e);r._modeling.resizeShape(t,i,null,{attachSupport:!1,autoResize:!1,layout:!1})}))},ns.prototype.updateConnectionWaypoints=function(t,e,n,r,i,o,a){var c=this,s=i.concat(o);St(t,(function(t){var u=t.source,l=t.target,h=is(t),f=os(n),p={labelBehavior:!1};cs(s,u)&&cs(s,l)?(h=Ct(h,(function(t){return as(t,r,n)&&(t[f]=t[f]+e[f]),t.original&&as(t.original,r,n)&&(t.original[f]=t.original[f]+e[f]),t})),c._modeling.updateWaypoints(t,h,{labelBehavior:!1})):(cs(s,u)||cs(s,l))&&(cs(i,u)?p.connectionStart=Fc(t,u,e):cs(i,l)?p.connectionEnd=$c(t,l,e):cs(o,u)?p.connectionStart=zc(t,u,a[u.id]):cs(o,l)&&(p.connectionEnd=Dc(t,l,a[l.id])),c._modeling.layoutConnection(t,p))}))},us.$inject=["modeling"],us.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=ls(n),e.collapsed=!e.collapsed;var r=hs(n,e.collapsed);return[e].concat(r)},us.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,r=e.children,i=fs(r,n);return e.collapsed=!e.collapsed,[e].concat(i)},ps.$inject=["modeling"],ps.prototype.execute=function(t){var e=t.shape,n=t.newHost,r=e.host;return t.oldHost=r,t.attacherIdx=ds(r,e),vs(n,e),e.host=n,e},ps.prototype.revert=function(t){var e=t.shape,n=t.newHost,r=t.oldHost,i=t.attacherIdx;return e.host=r,ds(n,e),vs(r,e,i),e},ys.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e},ys.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e},gs.$inject=["eventBus","elementFactory","commandStack"],gs.prototype.getHandlers=function(){return{"shape.append":vc,"shape.create":bc,"shape.delete":Mc,"shape.move":Uc,"shape.resize":Jc,"shape.replace":Zc,"shape.toggleCollapse":us,spaceTool:ns,"label.create":Sc,"connection.create":gc,"connection.delete":jc,"connection.move":Lc,"connection.layout":Ac,"connection.updateWaypoints":ys,"connection.reconnect":Xc,"elements.create":xc,"elements.move":Yc,"elements.delete":Cc,"elements.distribute":Tc,"elements.align":dc,"element.updateAttachment":ps}},gs.prototype.registerHandlers=function(t){St(this.getHandlers(),(function(e,n){t.registerHandler(n,e)}))},gs.prototype.moveShape=function(t,e,n,r,i){"object"===typeof r&&(i=r,r=null);var o={shape:t,delta:e,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)},gs.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)},gs.prototype.moveElements=function(t,e,n,r){r=r||{};var i,o=r.attach,a=n;!0===o?(i=n,a=n.parent):!1===o&&(i=null);var c={shapes:t,delta:e,newParent:a,newHost:i,hints:r};this._commandStack.execute("elements.move",c)},gs.prototype.moveConnection=function(t,e,n,r,i){"object"===typeof r&&(i=r,r=void 0);var o={connection:t,delta:e,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)},gs.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)},gs.prototype.createConnection=function(t,e,n,r,i,o){"object"===typeof n&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:t,target:e,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection},gs.prototype.createShape=function(t,e,n,r,i){"number"!==typeof r&&(i=r,r=void 0),i=i||{};var o,a,c=i.attach;t=this._create("shape",t),c?(o=n.parent,a=n):o=n;var s={position:e,shape:t,parent:o,parentIndex:r,host:a,hints:i};return this._commandStack.execute("shape.create",s),s.shape},gs.prototype.createElements=function(t,e,n,r,i){dt(t)||(t=[t]),"number"!==typeof r&&(i=r,r=void 0),i=i||{};var o={position:e,elements:t,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",o),o.elements},gs.prototype.createLabel=function(t,e,n,r){n=this._create("label",n);var i={labelTarget:t,position:e,parent:r||t.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape},gs.prototype.appendShape=function(t,e,n,r,i){i=i||{},e=this._create("shape",e);var o={source:t,position:n,target:r,shape:e,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",o),o.shape},gs.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)},gs.prototype.distributeElements=function(t,e,n){var r={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",r)},gs.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)},gs.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)},gs.prototype.replaceShape=function(t,e,n){var r={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape},gs.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)},gs.prototype.resizeShape=function(t,e,n,r){var i={shape:t,newBounds:e,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)},gs.prototype.createSpace=function(t,e,n,r,i){var o={delta:n,direction:r,movingShapes:t,resizingShapes:e,start:i};this._commandStack.execute("spaceTool",o)},gs.prototype.updateWaypoints=function(t,e,n){var r={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)},gs.prototype.reconnect=function(t,e,n,r,i){var o={connection:t,newSource:e,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",o)},gs.prototype.reconnectStart=function(t,e,n,r){r||(r={}),this.reconnect(t,e,t.target,n,Wt(r,{docking:"source"}))},gs.prototype.reconnectEnd=function(t,e,n,r){r||(r={}),this.reconnect(t,t.source,e,n,Wt(r,{docking:"target"}))},gs.prototype.connect=function(t,e,n,r){return this.createConnection(t,e,n||{},t.parent,r)},gs.prototype._create=function(t,e){return e instanceof je?e:this._elementFactory.create(t,e)},gs.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)};n("4f37");function ms(t){var e=t.businessObject;if(e)return e.name||""}function xs(t,e){var n=t.businessObject;return n.name=e,t}var _s={width:90,height:20},ws=15;function bs(t){return lc(t,"startEvent")||lc(t,"endEvent")||lc(t,"gatewayAnd")||lc(t,"gatewayXor")||lc(t,"gatewayInclusive")||lc(t,"myline")}function Ss(t){return js(t.label)}function Es(t){var e=t.length/2-1,n=t[Math.floor(e)],r=t[Math.ceil(e+.01)],i=ks(t),o=Math.atan((r.y-n.y)/(r.x-n.x)),a=i.x,c=i.y;return Math.abs(o)<Math.PI/2?c-=ws:a+=ws,{x:a,y:c}}function ks(t){var e=t.length/2-1,n=t[Math.floor(e)],r=t[Math.ceil(e+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function Os(t){return t.waypoints?Es(t.waypoints):{x:t.x+t.width/2,y:t.y+t.height+_s.height/2}}function js(t){return t&&!!t.labelTarget}var Cs={width:0,height:0};function Ms(t,e){function n(t,e){var n=t.label||t,r=t.labelTarget||t;return xs(n,e,r!==n),[n,r]}function r(e){var n=e.element,r=n.businessObject,i=e.newLabel;if(!js(n)&&bs(n)&&!Ss(n)&&!Ps(i)){var o=7,a=Os(n);a={x:a.x,y:a.y+o},t.createLabel(n,a,{id:r.id+"_label",businessObject:r})}}function i(t){return t.oldLabel=ms(t.element),n(t.element,t.newLabel)}function o(t){return n(t.element,t.oldLabel)}function a(n){var r=n.element,i=r.label||r,o=n.newLabel,a=n.newBounds,c=n.hints||{};if(js(i))if(js(i)&&Ps(o))!1!==c.removeShape&&t.removeShape(i,{unsetLabel:!1});else{var s=ms(i);"undefined"===typeof a&&(a=e.getExternalLabelBounds(i,s)),a&&t.resizeShape(i,a,Cs)}}this.preExecute=r,this.execute=i,this.revert=o,this.postExecute=a}function Ps(t){return!t||!t.trim()}function Ts(t,e,n){gs.call(this,t,e,n)}function Rs(t,e){function n(t){var n,r=t.context,i=r.hints||{};r.cropped||!1===i.createElementsBehavior||(n=r.connection,n.waypoints=e.getCroppedWaypoints(n),r.cropped=!0)}tc.call(this,t),this.executed(["connection.layout","connection.create"],n)}function As(){}Ms.$inject=["modeling","textRenderer"],k()(Ts,gs),Ts.$inject=["eventBus","elementFactory","commandStack"],Ts.prototype.getHandlers=function(){var t=gs.prototype.getHandlers.call(this);return t["element.updateLabel"]=Ms,t},Ts.prototype.updateLabel=function(t,e,n,r){this._commandStack.execute("element.updateLabel",{element:t,newLabel:e,newBounds:n,hints:r||{}})},k()(Rs,tc),Rs.$inject=["eventBus","connectionDocking"],As.prototype.layoutConnection=function(t,e){return e=e||{},[e.connectionStart||oi(e.source||t.source),e.connectionEnd||oi(e.target||t.target)]};var Ls=20,Bs=5,zs=Math.round,Ds=20,Fs={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function $s(t,e){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[e].test(t)}function Ns(t,e){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[t].test(e)}function Is(t,e,n){var r,i,o=ai(e,t,Bs),a=n.split(":")[0],c=zs((e.x-t.x)/2+t.x),s=zs((e.y-t.y)/2+t.y),u=Ns(a,o),l=/h|r|l/.test(a),h=!1,f=!1;return u?(r=l?{x:c,y:t.y}:{x:t.x,y:s},i=l?"h:h":"v:v"):(h=$s(o,a),i=l?"h:v":"v:h",h?l?(f=s===t.y,r={x:t.x+Ls*(/l/.test(a)?-1:1),y:f?s+Ls:s}):(f=c===t.x,r={x:f?c+Ls:c,y:t.y+Ls*(/t/.test(a)?-1:1)}):r={x:c,y:s}),{waypoints:Ys(t,r,i).concat(r),directions:i,turnNextDirections:f}}function Hs(t,e,n){return Is(t,e,n)}function Ws(t,e,n){var r=Is(e,t,Vs(n));return{waypoints:r.waypoints.slice().reverse(),directions:Vs(r.directions),turnNextDirections:r.turnNextDirections}}function Gs(t,e){var n=t.directions.split(":")[1],r=e.directions.split(":")[0];t.turnNextDirections&&(n="h"==n?"v":"h"),e.turnNextDirections&&(r="h"==r?"v":"h");var i=n+":"+r,o=Ys(t.waypoints[t.waypoints.length-1],e.waypoints[0],i);return{waypoints:o,directions:i}}function Vs(t){return t.split(":").reverse().join(":")}function qs(t,e,n){var r=zs((e.x-t.x)/2+t.x),i=zs((e.y-t.y)/2+t.y);if("h:v"===n)return[{x:e.x,y:t.y}];if("v:h"===n)return[{x:t.x,y:e.y}];if("h:h"===n)return[{x:r,y:t.y},{x:r,y:e.y}];if("v:v"===n)return[{x:t.x,y:i},{x:e.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Ys(t,e,n){if(n=n||"h:h",!iu(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(ou(n)){var r=Hs(t,e,n),i=Ws(t,e,n),o=Gs(r,i);return[].concat(r.waypoints,o.waypoints,i.waypoints)}return qs(t,e,n)}function Us(t,e,n){var r=Ys(t,e,n);return r.unshift(t),r.push(e),su(r)}function Xs(t,e,n,r,i){var o=i&&i.preferredLayouts||[],a=Et(o,"straight")[0]||"h:h",c=Fs[a]||0,s=ai(t,e,c),u=ru(s,a);n=n||oi(t),r=r||oi(e);var l=u.split(":"),h=cu(n,t,l[0],au(s)),f=cu(r,e,l[1],s);return Us(h,f,u)}function Ks(t,e,n,r,i,o){dt(n)&&(i=n,o=r,n=oi(t),r=oi(e)),o=Wt({preferredLayouts:[]},o),i=i||[];var a,c=o.preferredLayouts,s=-1!==c.indexOf("straight");return a=s&&Qs(t,e,n,r,o),a||(a=o.connectionEnd&&eu(e,t,r,i),a||(a=o.connectionStart&&tu(t,e,n,i),a||(!o.connectionStart&&!o.connectionEnd&&i&&i.length?i:Xs(t,e,n,r,o))))}function Zs(t,e,n){return t>=e&&t<=n}function Js(t,e,n){var r={x:"width",y:"height"};return Zs(e[t],n[t],n[t]+n[r[t]])}function Qs(t,e,n,r,i){var o,a,c={};return a=ai(t,e),/^(top|bottom|left|right)$/.test(a)?(/top|bottom/.test(a)&&(o="x"),/left|right/.test(a)&&(o="y"),"target"===i.preserveDocking?Js(o,r,t)?(c[o]=r[o],[{x:void 0!==c.x?c.x:n.x,y:void 0!==c.y?c.y:n.y,original:{x:void 0!==c.x?c.x:n.x,y:void 0!==c.y?c.y:n.y}},{x:r.x,y:r.y}]):null:Js(o,n,e)?(c[o]=n[o],[{x:n.x,y:n.y},{x:void 0!==c.x?c.x:r.x,y:void 0!==c.y?c.y:r.y,original:{x:void 0!==c.x?c.x:r.x,y:void 0!==c.y?c.y:r.y}}]):null):null}function tu(t,e,n,r){return nu(t,e,n,r)}function eu(t,e,n,r){var i=r.slice().reverse();return i=nu(t,e,n,i),i?i.reverse():null}function nu(t,e,n,r){function i(t){return t.length<3||!(t.length>4)&&!!wt(t,(function(e,n){var r=t[n-1];return r&&Er(e,r)<3}))}function o(t,e,n){var r=jr(e,t);switch(r){case"v":return{x:n.x,y:t.y};case"h":return{x:t.x,y:n.y}}return{x:t.x,y:t.y}}function a(t,e,n){var r;for(r=t.length-2;0!==r;r--)if(Pr(t[r],e,Ds)||Pr(t[r],n,Ds))return t.slice(r);return t}if(i(r))return null;var c,s=r[0],u=r.slice();return u[0]=n,u[1]=o(u[1],s,n),c=a(u,t,e),c!==u&&(u=nu(t,e,n,c)),u&&jr(u)?null:u}function ru(t,e){if(ou(e))return e;switch(t){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return e}}function iu(t){return t&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(t)}function ou(t){return t&&/t|r|b|l/.test(t)}function au(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[t]}function cu(t,e,n,r){if("h"===n&&(n=/left/.test(r)?"l":"r"),"v"===n&&(n=/top/.test(r)?"t":"b"),"t"===n)return{original:t,x:t.x,y:e.y};if("r"===n)return{original:t,x:e.x+e.width,y:t.y};if("b"===n)return{original:t,x:t.x,y:e.y+e.height};if("l"===n)return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function su(t){return t.reduce((function(e,n,r){var i=e[e.length-1],o=t[r+1];return kr(i,o,n,0)||e.push(n),e}),[])}function uu(){}function lu(t,e){return t?t.original||t:oi(e)}function hu(t,e){var n=e.waypoints,r=n&&n.length&&ai(n[0],t);return"top"===r?["t:r"]:"right"===r?["r:b"]:"left"===r?["l:t"]:["b:l"]}function fu(t){return Wt({original:t.point.original||t.point},t.actual)}function pu(t,e){this._elementRegistry=t,this._graphicsFactory=e}k()(uu,As),uu.prototype.layoutConnection=function(t,e){e||(e={});var n,r,i=e.source||t.source,o=e.target||t.target,a=e.waypoints||t.waypoints,c=e.connectionStart,s=e.connectionEnd;return void 0==s&&(c=lu(a&&a[0],i),s=lu(a&&a[a.length-1],o)),c||(c=lu(a&&a[0],i)),s||(s=lu(a&&a[a.length-1],o)),lc(t,"myline")&&(n=i===o?{preferredLayouts:hu(i,t)}:lc(i,"gatewayAnd")||lc(i,"gatewayXor")||lc(i,"gatewayInclusive")?{preferredLayouts:["v:h"]}:lc(o,"gatewayAnd")||lc(o,"gatewayXor")||lc(o,"gatewayInclusive")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(n=Wt(n,e),r=su(Ks(i,o,c,s,a,n))),r||[c,s]},pu.$inject=["elementRegistry","graphicsFactory"],pu.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var r=this.getDockingPoint(t,e,!0),i=this.getDockingPoint(t,n),o=t.waypoints.slice(r.idx+1,i.idx);return o.unshift(fu(r)),o.push(fu(i)),o},pu.prototype.getDockingPoint=function(t,e,n){var r,i,o,a=t.waypoints;return r=n?0:a.length-1,i=a[r],o=this._getIntersection(e,t,n),{point:i,actual:o||i,idx:r}},pu.prototype._getIntersection=function(t,e,n){var r=this._getShapePath(t),i=this._getConnectionPath(e);return ci(r,i,n)},pu.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},pu.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},pu.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)};var du={__depends__:[Za,cc,cr],__init__:["modeling","elementUpdater"],modeling:["type",Ts],layouter:["type",uu],elementUpdater:["type",Rs],elementFactory:["type",pc],connectionDocking:["type",pu]};n("a481"),n("57e7"),n("6c7b");function vu(t){return t.businessObject}function yu(t,e){return t.businessObject.strokeWidth||e||1}function gu(t,e){return t.businessObject.fillColor||e||"white"}function mu(t,e){return t.businessObject.strokeColor||e||"black"}function xu(t){var e=t.x+t.width/2,n=t.y+t.height/2,r=t.width/2,i=[["M",e,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return it(i)}function _u(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=[["M",n+e,r],["l",i-2*e,0],["a",e,e,0,0,1,e,e],["l",0,o-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-i,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-o],["a",e,e,0,0,1,e,-e],["z"]];return it(a)}function wu(t){var e=t.width,n=t.height,r=t.x,i=t.y,o=e/2,a=n/2,c=[["M",r+o,i],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return it(c)}function bu(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=[["M",e,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return it(o)}var Su=10,Eu=.95;function ku(t,e){return t.type==e}function Ou(t,e,n,r,i,o,a){j.call(this,t,a);var c="white",s="black",u=e.computeStyle,l={};function h(t){return C[t]}function f(t,e,n,r,i){vt(r)&&(i=r,r=0),r=r||0,i=u(i,{stroke:"black",strokeWidth:2,fill:"white"}),"none"===i.fill&&delete i.fillOpacity;var o=e/2,a=n/2,c=K("circle");return z(c,{cx:o,cy:a,r:Math.round((e+n)/4-r)}),z(c,i),P(t,c),c}function p(t,e,n,r,i,o){vt(i)&&(o=i,i=0),i=i||0,o=u(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=K("rect");return z(a,{x:i,y:i,width:e-2*i,height:n-2*i,rx:r,ry:r}),z(a,o),P(t,a),a}function d(t,e,n){n=u(n,["no-fill"],{strokeWidth:2,stroke:"black"});var r=K("path");return z(r,{d:e}),z(r,n),P(t,r),r}function v(t,e,n,r){var i=e/2,o=n/2,a=[{x:i,y:0},{x:e,y:o},{x:i,y:n},{x:0,y:o}],c=a.map((function(t){return t.x+","+t.y})).join(" ");r=u(r,{stroke:"black",strokeWidth:2,fill:"white"});var s=K("polygon");return z(s,{points:c}),z(s,r),P(t,s),s}function y(t,e,n,r){return d(e,n,Wt({"data-marker":t},r))}function g(t,e,n){n=Wt({size:{width:100}},n);var r=i.createText(e||"",n);return I(r).add("djs-label"),P(t,r),r}function m(t,e,n){var r=vu(e);return g(t,r.name,{box:e,align:n,padding:5,style:{fill:mu(e,s)}})}function x(t,e){var n={width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y};return g(t,ms(e),{box:n,fitBox:!0,style:Wt({},i.getExternalStyle(),{fill:mu(e,s)})})}function _(t,e,n){var r,i=n&&-1!==n.indexOf("SubProcessMarker");r=i?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},St(n,(function(n){h(n)(t,e,r)}))}function w(t){for(var e=t.waypoints,n="m  "+e[0].x+","+e[0].y,r=1;r<e.length;r++)n+="L"+e[r].x+","+e[r].y+" ";return n}function b(t){return t.replace(/[^0-9a-zA-z]+/g,"_")}function S(t,e){var n=Wt({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},e.attrs),i=e.ref||{x:0,y:0},o=e.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=K("marker");z(e.element,n),P(a,e.element),z(a,{id:t,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*o,markerHeight:20*o,orient:"auto"});var c=wn("defs",r._svg);c||(c=K("defs"),P(r._svg,c)),P(c,a),l[t]=a}function E(t,e,n){var r=t+"-"+b(e)+"-"+b(n)+"-"+uc();return l[r]||k(r,t,e,n),"url(#"+r+")"}function k(t,e,n,r){if("sequenceflow-end"===e){var i=K("path");z(i,{d:"M 1 5 L 11 10 L 1 15 Z"}),S(t,{element:i,ref:{x:11,y:10},scale:.5,attrs:{fill:r,stroke:r}})}if("messageflow-start"===e){var o=K("circle");z(o,{cx:6,cy:6,r:3.5}),S(t,{element:o,attrs:{fill:n,stroke:r},ref:{x:6,y:6}})}if("messageflow-end"===e){var a=K("path");z(a,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),S(t,{element:a,attrs:{fill:n,stroke:r,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===e){var c=K("path");z(c,{d:"M 11 5 L 1 10 L 11 15"}),S(t,{element:c,attrs:{fill:"none",stroke:r,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===e){var s=K("path");z(s,{d:"M 1 5 L 11 10 L 1 15"}),S(t,{element:s,attrs:{fill:"none",stroke:r,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===e){var u=K("path");z(u,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),S(t,{element:u,attrs:{fill:n,stroke:r},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===e){var l=K("path");z(l,{d:"M 6 4 L 10 16"}),S(t,{element:l,attrs:{stroke:r},ref:{x:0,y:10},scale:.5})}}function O(t,e,r,i){if(e.icon){var o=n.getScaledPath(e.icon,{abspos:{x:r,y:i}});d(t,o,{strokeWidth:0,fill:mu(e,e.iconFill)})}}var C=this.handlers={event:function(t,e,n){return"fillOpacity"in n||(n.fillOpacity=Eu),f(t,e.width,e.height,n)},startEvent:function(t,e){var n={fill:gu(e,e.fill),stroke:mu(e,e.stroke),strokeWidth:yu(e,e.strokeWidth)},r=h("event")(t,e,n);return O(t,e,18,18),r},endEvent:function(t,e){var n=h("event")(t,e,{strokeWidth:yu(e,e.strokeWidth||4),fill:gu(e,e.fill),stroke:mu(e,e.stroke)});return O(t,e,18,18),n},gateway:function(t,e){var n={fillOpacity:Eu,strokeWidth:yu(e,e.strokeWidth||4),fill:gu(e,e.fill),stroke:mu(e,e.stroke)};return v(t,e.width,e.height,n)},gatewayAnd:function(t,e){var r=h("gateway")(t,e),i=n.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.47,my:.29}});return d(t,i,{strokeWidth:1,fill:mu(e,e.iconFill),stroke:mu(e,e.iconFill)}),r},gatewayXor:function(t,e){var r=h("gateway")(t,e),i=n.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.32,my:.3}});return d(t,i,{strokeWidth:1,fill:mu(e,e.iconFill),stroke:mu(e,e.iconFill)}),r},gatewayInclusive:function(t,e){var n=h("gateway")(t,e);return f(t,e.width,e.height,.24*e.height,{strokeWidth:2.5,fill:mu(e,e.iconFill),stroke:mu(e,e.iconFill)}),n},activity:function(t,e,n){return n=n||{},"fillOpacity"in n||(n.fillOpacity=Eu),p(t,e.width,e.height,Su,n)},task:function(t,e){var n={fill:gu(e,c),stroke:mu(e,s)},r=h("activity")(t,e,n);return m(t,e,"center-middle"),_(t,e),r},userTask:function(t,e){var r=h("task")(t,e),i=15,o=12,a=n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:i,y:o}});d(t,a,{strokeWidth:.5,fill:gu(e,c),stroke:mu(e,s)});var u=n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:i,y:o}});d(t,u,{strokeWidth:.5,fill:gu(e,c),stroke:mu(e,s)});var l=n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:i,y:o}});return d(t,l,{strokeWidth:.5,fill:mu(e,s),stroke:mu(e,s)}),r},scriptTask:function(t,e){var r=h("task")(t,e),i=n.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return d(t,i,{strokeWidth:1,stroke:mu(e,s)}),r},SubProcessMarker:function(t,e){var r=p(t,14,14,0,{strokeWidth:1,fill:gu(e,c),stroke:mu(e,s)});Ge(r,e.width/2-7.5,e.height-20);var i=n.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2-7.5)/e.width,my:(e.height-20)/e.height}});y("sub-process",t,i,{fill:gu(e,c),stroke:mu(e,s)})},subprocess:function(t,e,n){n=Wt({fill:gu(e,c),stroke:mu(e,s)},n);var r=h("activity")(t,e,n);return m(t,e,"center-middle"),_(t,e,["SubProcessMarker"]),r},label:function(t,e){return x(t,e)},myline:function(t,e){var n=w(e),r=gu(e,o.lineStroke||c),i=mu(e,o.lineStroke||s),a={strokeLinejoin:"round",markerEnd:E("sequenceflow-end",r,i),strokeWidth:2,stroke:mu(e,o.lineStroke||s)},u=d(t,n,a);return u},default:function(t,e){var n={strokeWidth:yu(e,e.strokeWidth||1),fill:gu(e,e.fill),stroke:mu(e,e.stroke)},r=p(t,e.width,e.height,e.radius||Su,n);return m(t,e,"center-middle"),_(t,e),O(t,e,e.iconX,e.iconY),r}};this._drawPath=d}k()(Ou,j),Ou.$inject=["eventBus","styles","pathMap","canvas","textRenderer","myOptions"],Ou.prototype.canRender=function(){return!0},Ou.prototype.drawShape=function(t,e){var n=e.type,r=this.handlers[n]||this.handlers.default;return r(t,e)},Ou.prototype.drawConnection=function(t,e){var n=e.type,r=this.handlers[n];return r(t,e)},Ou.prototype.getShapePath=function(t){return ku(t,"startEvent")||ku(t,"endEvent")?xu(t):ku(t,"userTask")||ku(t,"scriptTask")||ku(t,"subprocess")?_u(t,Su):ku(t,"gatewayAnd")||ku(t,"gatewayXor")||ku(t,"gatewayInclusive")?wu(t):bu(t)};var ju=0,Cu={width:150,height:50};function Mu(t){var e=t.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}function Pu(t){return vt(t)?Wt({top:0,left:0,right:0,bottom:0},t):{top:t,left:t,right:t,bottom:t}}function Tu(t,e){var n;e.textContent=t;try{var r,i=""===t;return e.textContent=i?"dummy":t,n=e.getBBox(),r={width:n.width+2*n.x,height:n.height},i&&(r.width=0),r}catch(o){return{width:0,height:0}}}function Ru(t,e,n){for(var r,i=t.shift(),o=i;;){if(r=Tu(o,n),r.width=o?r.width:0," "===o||""===o||r.width<Math.round(e)||o.length<2)return Au(t,o,i,r);o=Bu(o,r.width,e)}}function Au(t,e,n,r){if(e.length<n.length){var i=n.slice(e.length).trim();t.unshift(i)}return{width:r.width,height:r.height,text:e}}function Lu(t,e){var n,r=t.split(/(\s|-)/g),i=[],o=0;if(r.length>1)while(n=r.shift()){if(!(n.length+o<e)){"-"===n&&i.pop();break}i.push(n),o+=n.length}return i.join("")}function Bu(t,e,n){var r=Math.max(t.length*(n/e),1),i=Lu(t,r);return i||(i=t.slice(0,Math.max(Math.round(r-1),1))),i}function zu(){var t=document.getElementById("helper-svg");return t||(t=K("svg"),z(t,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(t)),t}function Du(t){this._config=Wt({},{size:Cu,padding:ju,style:{},align:"center-top"},t||{})}function Fu(t){if("fontSize"in t&&"lineHeight"in t)return t.lineHeight*parseInt(t.fontSize,10)}Du.prototype.createText=function(t,e){return this.layoutText(t,e).element},Du.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},Du.prototype.layoutText=function(t,e){var n=Wt({},this._config.size,e.box),r=Wt({},this._config.style,e.style),i=Mu(e.align||this._config.align),o=Pu(void 0!==e.padding?e.padding:this._config.padding),a=e.fitBox||!1,c=Fu(r),s=t.split(/\r?\n/g),u=[],l=n.width-o.left-o.right,h=K("text");z(h,{x:0,y:0}),z(h,r);var f=zu();P(f,h);while(s.length)u.push(Ru(s,l,h));"middle"===i.vertical&&(o.top=o.bottom=0);var p=kt(u,(function(t,e,n){return t+(c||e.height)}),0)+o.top+o.bottom,d=kt(u,(function(t,e,n){return e.width>t?e.width:t}),0),v=o.top;"middle"===i.vertical&&(v+=(n.height-p)/2),v-=(c||u[0].height)/4;var y=K("text");z(y,r),St(u,(function(t){var e;switch(v+=c||t.height,i.horizontal){case"left":e=o.left;break;case"right":e=(a?d:l)-o.right-t.width;break;default:e=Math.max(((a?d:l)-t.width)/2+o.left,0)}var n=K("tspan");z(n,{x:e,y:v}),n.textContent=t.text,P(y,n)})),W(h);var g={width:d,height:p};return{dimensions:g,element:y}};var $u=12,Nu=1.2,Iu=30;function Hu(t){var e=Wt({fontFamily:"Arial, sans-serif",fontSize:$u,fontWeight:"normal",lineHeight:Nu},t&&t.defaultStyle||{}),n=parseInt(e.fontSize,10)-1,r=Wt({},e,{fontSize:n},t&&t.externalStyle||{}),i=new Du({style:e});this.getExternalLabelBounds=function(t,e){var n=i.getDimensions(e,{box:{width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y},style:r});return{x:Math.round(t.x+t.width/2-n.width/2),y:Math.round(t.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(t,n){var r=i.getDimensions(n,{box:t,style:e,align:"left-top",padding:5});return{x:t.x,y:t.y,width:t.width,height:Math.max(Iu,Math.round(r.height))}},this.createText=function(t,e){return i.createText(t,e||{})},this.getDefaultStyle=function(){return e},this.getExternalStyle=function(){return r}}Hu.$inject=["config.textRenderer"];var Wu=n("5d58"),Gu=n.n(Wu),Vu=n("67bb"),qu=n.n(Vu);function Yu(t){return Yu="function"===typeof qu.a&&"symbol"===typeof Gu.a?function(t){return typeof t}:function(t){return t&&"function"===typeof qu.a&&t.constructor===qu.a&&t!==qu.a.prototype?"symbol":typeof t},Yu(t)}function Uu(){this.pathMap={GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,e){var n,r;e.abspos?(n=e.abspos.x,r=e.abspos.y):(n=e.containerWidth*e.position.mx,r=e.containerHeight*e.position.my);var i={};"object"==Yu(t)?(i=t,-1==i.d.indexOf("{mx},{my}")&&(i.d="m {mx},{my}"+i.d),i.width&&(n-=i.width/2),i.height&&(r-=i.height/2)):i=this.pathMap[t];var o={};if(e.position){for(var a=e.containerHeight/i.height*e.yScaleFactor,c=e.containerWidth/i.width*e.xScaleFactor,s=0;s<i.heightElements.length;s++)o["y"+s]=i.heightElements[s]*a;for(var u=0;u<i.widthElements.length;u++)o["x"+u]=i.widthElements[u]*c}var l=Ju(i.d,{mx:n,my:r,e:o});return l}}var Xu=/\{([^}]+)\}/g,Ku=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Zu(t,e,n){var r=n;return e.replace(Ku,(function(t,e,n,i,o){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&o&&(r=r()))})),r=(null==r||r==n?t:r)+"",r}function Ju(t,e){return String(t).replace(Xu,(function(t,n){return Zu(t,n,e)}))}var Qu={__init__:["myRenderer"],myRenderer:["type",Ou],textRenderer:["type",Hu],pathMap:["type",Uu]};function tl(t,e,n,r){t.on("element.changed",(function(r){var i=r.element;(i.parent||i===e.getRootElement())&&(r.gfx=n.getGraphics(i)),r.gfx&&t.fire(te(i)+".changed",r)})),t.on("elements.changed",(function(e){var n=e.elements;n.forEach((function(e){t.fire("element.changed",{element:e})})),r.updateContainments(n)})),t.on("shape.changed",(function(t){r.update("shape",t.element,t.gfx)})),t.on("connection.changed",(function(t){r.update("connection",t.element,t.gfx)}))}tl.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var el={__init__:["changeSupport"],changeSupport:["type",tl]},nl=Math.max,rl=Math.min,il=20;function ol(t,e,n){var r=n.x,i=n.y,o={x:t.x,y:t.y,width:t.width,height:t.height};return-1!==e.indexOf("n")?(o.y=t.y+i,o.height=t.height-i):-1!==e.indexOf("s")&&(o.height=t.height+i),-1!==e.indexOf("e")?o.width=t.width+r:-1!==e.indexOf("w")&&(o.x=t.x+r,o.width=t.width-r),o}function al(t,e,n){var r=e[t],i=n.min&&n.min[t],o=n.max&&n.max[t];return yt(i)&&(r=(/top|left/.test(t)?rl:nl)(r,i)),yt(o)&&(r=(/top|left/.test(t)?nl:rl)(r,o)),r}function cl(t,e){if(!e)return t;var n=ri(t);return ii({top:al("top",n,e),right:al("right",n,e),bottom:al("bottom",n,e),left:al("left",n,e)})}function sl(t,e,n,r){var i=ri(e),o={top:/n/.test(t)?i.bottom-n.height:i.top,left:/w/.test(t)?i.right-n.width:i.left,bottom:/s/.test(t)?i.top+n.height:i.bottom,right:/e/.test(t)?i.left+n.width:i.right},a=r?ri(r):o,c={top:rl(o.top,a.top),left:rl(o.left,a.left),bottom:nl(o.bottom,a.bottom),right:nl(o.right,a.right)};return ii(c)}function ul(t,e){return"undefined"!==typeof t?t:il}function ll(t,e){var n,r,i,o;return"object"===typeof e?(n=ul(e.left),r=ul(e.right),i=ul(e.top),o=ul(e.bottom)):n=r=i=o=ul(e),{x:t.x-n,y:t.y-i,width:t.width+n+r,height:t.height+i+o}}function hl(t){return!t.waypoints&&"label"!==t.type}function fl(t,e){var n;if(n=void 0===t.length?bt(t.children,hl):t,n.length)return ll(Jt(n),e)}var pl=10;function dl(t,e,n,r){this._dragging=r,this._rules=e;var i=this;function o(t,e){var n,r=t.shape,o=t.direction,a=t.resizeConstraints;t.delta=e,n=ol(r,o,e),t.newBounds=cl(n,a),t.canExecute=i.canResize(t)}function a(t){var e=t.resizeConstraints,n=t.minBounds;void 0===e&&(void 0===n&&(n=i.computeMinResizeBox(t)),t.resizeConstraints={min:ri(n)})}function c(t){var e=t.shape,r=t.canExecute,i=t.newBounds;if(r){if(i=ei(i),!vl(e,i))return;n.resizeShape(e,i)}}t.on("resize.start",(function(t){a(t.context)})),t.on("resize.move",(function(t){var e={x:t.dx,y:t.dy};o(t.context,e)})),t.on("resize.end",(function(t){c(t.context)}))}function vl(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function yl(t,e){var n=oi(t),r=ri(t),i={x:n.x,y:n.y};return-1!==e.indexOf("n")?i.y=r.top:-1!==e.indexOf("s")&&(i.y=r.bottom),-1!==e.indexOf("e")?i.x=r.right:-1!==e.indexOf("w")&&(i.x=r.left),i}function gl(t){var e="resize-";return"n"===t||"s"===t?e+"ns":"e"===t||"w"===t?e+"ew":"nw"===t||"se"===t?e+"nwse":e+"nesw"}dl.prototype.canResize=function(t){var e=this._rules,n=Gt(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)},dl.prototype.activate=function(t,e,n){var r,i,o=this._dragging;if("string"===typeof n&&(n={direction:n}),r=Wt({shape:e},n),i=r.direction,!i)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");o.init(t,yl(e,i),"resize",{autoActivate:!0,cursor:gl(i),data:{shape:e,context:r}})},dl.prototype.computeMinResizeBox=function(t){var e,n,r=t.shape,i=t.direction;return e=t.minDimensions||{width:pl,height:pl},n=fl(r,t.childrenBoxPadding),sl(i,r,e,n)},dl.$inject=["eventBus","rules","modeling","dragging"];var ml="djs-resizing",xl="resize-not-ok",_l=500;function wl(t,e,n){function r(t){var r=t.shape,i=t.newBounds,o=t.frame;o||(o=t.frame=n.addFrame(r,e.getDefaultLayer()),e.addMarker(r,ml)),i.width>5&&z(o,{x:i.x,width:i.width}),i.height>5&&z(o,{y:i.y,height:i.height}),t.canExecute?I(o).remove(xl):I(o).add(xl)}function i(t){var n=t.shape,r=t.frame;r&&W(t.frame),e.removeMarker(n,ml)}t.on("resize.move",_l,(function(t){r(t.context)})),t.on("resize.cleanup",(function(t){i(t.context)}))}wl.$inject=["eventBus","canvas","previewSupport"];var bl=-6,Sl=4,El=20,kl="djs-resizer",Ol=["n","w","s","e","nw","ne","se","sw"];function jl(t,e,n,r){this._resize=r,this._canvas=e;var i=this;t.on("selection.changed",(function(t){var e=t.newSelection;i.removeResizers(),1===e.length&&St(e,It(i.addResizer,i))})),t.on("shape.changed",(function(t){var e=t.element;n.isSelected(e)&&(i.removeResizers(),i.addResizer(e))}))}function Cl(t){var e={x:0,y:0};return-1!==t.indexOf("e")?e.x=-bl:-1!==t.indexOf("w")&&(e.x=bl),-1!==t.indexOf("s")?e.y=-bl:-1!==t.indexOf("n")&&(e.y=bl),e}jl.prototype.makeDraggable=function(t,e,n){var r=this._resize;function i(e){Vn(e)&&r.activate(e,t,n)}hn.bind(e,"mousedown",i),hn.bind(e,"touchstart",i)},jl.prototype._createResizer=function(t,e,n,r){var i=this._getResizersParent(),o=Cl(r),a=K("g");I(a).add(kl),I(a).add(kl+"-"+t.id),I(a).add(kl+"-"+r),P(i,a);var c=K("rect");z(c,{x:-Sl/2+o.x,y:-Sl/2+o.y,width:Sl,height:Sl}),I(c).add(kl+"-visual"),P(a,c);var s=K("rect");return z(s,{x:-El/2+o.x,y:-El/2+o.y,width:El,height:El}),I(s).add(kl+"-hit"),P(a,s),We(a,e,n),a},jl.prototype.createResizer=function(t,e){var n=yl(t,e),r=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,r,e)},jl.prototype.addResizer=function(t){var e=this,n=this._resize;n.canResize({shape:t})&&St(Ol,(function(n){e.createResizer(t,n)}))},jl.prototype.removeResizers=function(){var t=this._getResizersParent();G(t)},jl.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},jl.$inject=["eventBus","canvas","selection","resize"];var Ml={__depends__:[Sr,wr,Mo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",dl],resizePreview:["type",wl],resizeHandles:["type",jl]},Pl=Math.min,Tl=Math.max;function Rl(t){t.preventDefault()}function Al(t){t.stopPropagation()}function Ll(t){return t.nodeType===Node.TEXT_NODE}function Bl(t){return[].slice.call(t)}function zl(t){this.container=t.container,this.parent=gn('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=wn("[contenteditable]",this.parent),this.keyHandler=t.keyHandler||function(){},this.resizeHandler=t.resizeHandler||function(){},this.autoResize=It(this.autoResize,this),this.handlePaste=It(this.handlePaste,this)}function Dl(t,e){this._eventBus=t,this._providers=[],this._textbox=new zl({container:e.getContainer(),keyHandler:It(this._handleKey,this),resizeHandler:It(this._handleResize,this)})}zl.prototype.create=function(t,e,n,r){var i=this,o=this.parent,a=this.content,c=this.container;r=this.options=r||{},e=this.style=e||{};var s=Gt(e,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);Wt(o.style,{width:t.width+"px",height:t.height+"px",maxWidth:t.maxWidth+"px",maxHeight:t.maxHeight+"px",minWidth:t.minWidth+"px",minHeight:t.minHeight+"px",left:t.x+"px",top:t.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},s);var u=Gt(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return Wt(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),r.centerVertically&&Wt(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),a.innerText=n,hn.bind(a,"keydown",this.keyHandler),hn.bind(a,"mousedown",Al),hn.bind(a,"paste",i.handlePaste),r.autoResize&&hn.bind(a,"input",this.autoResize),r.resizable&&this.resizable(e),c.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o},zl.prototype.handlePaste=function(t){var e,n=this.options,r=this.style;if(t.preventDefault(),e=t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(e),n.autoResize){var i=this.autoResize(r);i&&this.resizeHandler(i)}},zl.prototype.insertText=function(t){var e=document.execCommand("insertText",!1,t);e||this._insertTextIE(t)},zl.prototype._insertTextIE=function(t){var e,n,r=this.getSelection(),i=r.startContainer,o=r.endContainer,a=r.startOffset,c=r.endOffset,s=r.commonAncestorContainer,u=Bl(s.childNodes);if(Ll(s)){var l=i.textContent;i.textContent=l.substring(0,a)+t+l.substring(c),e=i,n=a+t.length}else if(i===this.content&&o===this.content){var h=document.createTextNode(t);this.content.insertBefore(h,u[a]),e=h,n=h.textContent.length}else{var f=u.indexOf(i),p=u.indexOf(o);u.forEach((function(e,n){n===f?e.textContent=i.textContent.substring(0,a)+t+o.textContent.substring(c):n>f&&n<=p&&Sn(e)})),e=i,n=a+t.length}e&&void 0!==n&&setTimeout((function(){self.setSelection(e,n)}))},zl.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var r=t.getBoundingClientRect(),i=e.scrollHeight;t.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}},zl.prototype.resizable=function(){var t=this,e=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){var c,s,u,l;n=this.resizeHandle=gn('<div class="djs-direct-editing-resize-handle"></div>');var h=function(t){Rl(t),Al(t),c=t.clientX,s=t.clientY;var n=e.getBoundingClientRect();u=n.width,l=n.height,hn.bind(document,"mousemove",f),hn.bind(document,"mouseup",p)},f=function(n){Rl(n),Al(n);var h=Pl(Tl(u+n.clientX-c,r),o),f=Pl(Tl(l+n.clientY-s,i),a);e.style.width=h+"px",e.style.height=f+"px",t.resizeHandler({width:u,height:l,dx:n.clientX-c,dy:n.clientY-s})},p=function(t){Rl(t),Al(t),hn.unbind(document,"mousemove",f,!1),hn.unbind(document,"mouseup",p,!1)};hn.bind(n,"mousedown",h)}Wt(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(n)},zl.prototype.destroy=function(){var t=this.parent,e=this.content,n=this.resizeHandle;e.innerText="",t.removeAttribute("style"),e.removeAttribute("style"),hn.unbind(e,"keydown",this.keyHandler),hn.unbind(e,"mousedown",Al),hn.unbind(e,"input",this.autoResize),hn.unbind(e,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Sn(n)),Sn(t)},zl.prototype.getValue=function(){return this.content.innerText.trim()},zl.prototype.getSelection=function(){var t=window.getSelection(),e=t.getRangeAt(0);return e},zl.prototype.setSelection=function(t,e){var n=document.createRange();null===t?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)},Dl.$inject=["eventBus","canvas"],Dl.prototype.registerProvider=function(t){this._providers.push(t)},Dl.prototype.isActive=function(){return!!this._active},Dl.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Dl.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})},Dl.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Dl.prototype.complete=function(){var t=this._active;if(t){var e,n=t.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),o=t.context.text;i===o&&r.height===n.height&&r.width===n.width||(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,i,t.context.text,{x:r.left-e.left,y:r.top-e.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}},Dl.prototype.getValue=function(){return this._textbox.getValue()},Dl.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;return 27===e?(t.preventDefault(),this.cancel()):13!==e||t.shiftKey?void 0:(t.preventDefault(),this.complete())},Dl.prototype._handleResize=function(t){this._fire("resize",t)},Dl.prototype.activate=function(t){var e;this.isActive()&&this.cancel();var n=wt(this._providers,(function(n){return(e=n.activate(t))?n:null}));return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:t,context:e,provider:n},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};var Fl={__depends__:[Zn],__init__:["directEditing"],directEditing:["type",Dl]};function $l(t,e,n,r,i,o){function a(t,e){(e||hc(t,["userTask","scriptTask","subprocess"])||t.isDirectEdit)&&n.activate(t)}this._canvas=e,this._modeling=r,this._textRenderer=o,n.registerProvider(this),t.on("element.dblclick",(function(t){a(t.element,!0)})),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],(function(){n.isActive()&&n.complete()})),t.on(["commandStack.changed"],(function(){n.isActive()&&n.cancel()})),t.on("directEditing.activate",(function(){i.removeResizers()})),t.on("create.end",500,(function(t){var e=t.context,n=e.shape,r=t.context.canExecute,i=t.isTouch;i||r&&(e.hints&&!1===e.hints.createElementsBehavior||a(n))})),t.on("autoPlace.end",500,(function(t){a(t.shape)}))}function Nl(t){return!t||!t.trim()}$l.$inject=["eventBus","canvas","directEditing","modeling","resizeHandles","textRenderer"],$l.prototype.activate=function(t){var e=ms(t);if(void 0!==e){var n={text:e},r=this.getEditingBBox(t);Wt(n,r);var i={};return(hc(t,["userTask","scriptTask","subprocess"])||t.isDirectEdit)&&Wt(i,{centerVertically:!0}),bs(t)&&Wt(i,{autoResize:!0}),Wt(n,{options:i}),n}},$l.prototype.getEditingBBox=function(t){var e=this._canvas,n=t.label||t,r=e.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},o={x:r.x,y:r.y},a=e.zoom(),c=this._textRenderer.getDefaultStyle(),s=this._textRenderer.getExternalStyle(),u=s.fontSize*a,l=s.lineHeight,h=c.fontSize*a,f=c.lineHeight,p={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(hc(t,["userTask","scriptTask","subprocess"])||t.isDirectEdit)&&(Wt(o,{width:r.width,height:r.height}),Wt(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var d=90*a,v=7*a,y=4*a;if(n.labelTarget&&(Wt(o,{width:d,height:r.height+v+y,x:i.x-d/2,y:r.y-v}),Wt(p,{fontSize:u+"px",lineHeight:l,paddingTop:v+"px",paddingBottom:y+"px"})),bs(n)&&!Ss(n)&&!js(n)){var g=Os(t),m=e.getAbsoluteBBox({x:g.x,y:g.y,width:0,height:0}),x=u+v+y;Wt(o,{width:d,height:x,x:m.x-d/2,y:m.y-x/2}),Wt(p,{fontSize:u+"px",lineHeight:l,paddingTop:v+"px",paddingBottom:y+"px"})}return{bounds:o,style:p}},$l.prototype.update=function(t,e){var n;Nl(e)&&(e=null),this._modeling.updateLabel(t,e,n)};var Il={__depends__:[el,Ml,Fl],__init__:["labelEditingProvider"],labelEditingProvider:["type",$l]};function Hl(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function Wl(t){this._snapValues={}}Hl.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},Hl.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,-1===this._snapLocations.indexOf(t)&&this._snapLocations.push(t)},Hl.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)},Hl.prototype.getSnapLocations=function(){return this._snapLocations},Hl.prototype.setSnapLocations=function(t){this._snapLocations=t},Hl.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new Wl,n.initDefaults(this._defaultSnaps)),n},Wl.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),-1===n.x.indexOf(e.x)&&n.x.push(e.x),-1===n.y.indexOf(e.y)&&n.y.push(e.y)},Wl.prototype.snap=function(t,e,n,r){var i=this._snapValues[e];return i&&zi(t[n],i[n],r)},Wl.prototype.initDefaults=function(t){var e=this;St(t||{},(function(t,n){St(t,(function(t){e.add(n,t)}))}))};var Gl=1250;function Vl(t,e,n){var r=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],(function(t){r.initSnap(t)})),e.on(["create.move","create.end","shape.move.move","shape.move.end"],Gl,(function(t){var e=t.context,i=e.shape,o=e.snapContext,a=e.target;if((!t.originalEvent||!Yo(t.originalEvent))&&!Ni(t)&&a){var c=o.pointsForTarget(a);c.initialized||(c=r.addSnapTargetPoints(c,i,a),c.initialized=!0),n.snap(t,c)}})),e.on(["create.cleanup","shape.move.cleanup"],(function(){n.hide()}))}function ql(t){return!!t.waypoints}function Yl(t){return!!t.hidden}function Ul(t){return!!t.labelTarget}function Xl(t){t.invoke(Vl,this)}Vl.$inject=["elementRegistry","eventBus","snapping"],Vl.prototype.initSnap=function(t){var e,n=this._elementRegistry,r=t.context,i=r.shape,o=r.snapContext;o||(o=r.snapContext=new Hl),e=n.get(i.id)?$i(i,t):{x:t.x+$i(i).x,y:t.y+$i(i).y};var a={x:e.x-i.width/2,y:e.y-i.height/2},c={x:e.x+i.width/2,y:e.y+i.height/2};return o.setSnapOrigin("mid",{x:e.x-t.x,y:e.y-t.y}),Ul(i)||(o.setSnapOrigin("top-left",{x:a.x-t.x,y:a.y-t.y}),o.setSnapOrigin("bottom-right",{x:c.x-t.x,y:c.y-t.y})),o},Vl.prototype.addSnapTargetPoints=function(t,e,n){var r=this.getSnapTargets(e,n);return St(r,(function(n){if(Ul(n))Ul(e)&&t.add("mid",$i(n));else if(ql(n)){if(n.waypoints.length<3)return;var r=n.waypoints.slice(1,-1);St(r,(function(e){t.add("mid",e)}))}else t.add("mid",$i(n))})),yt(e.x)&&yt(e.y)?(this._elementRegistry.get(e.id)&&t.add("mid",$i(e)),t):t},Vl.prototype.getSnapTargets=function(t,e){return Hi(e).filter((function(t){return!Yl(t)}))},k()(Xl,Vl),Xl.$inject=["injector"],Xl.prototype.initSnap=function(t){return Vl.prototype.initSnap.call(this,t)},Xl.prototype.addSnapTargetPoints=function(t,e,n){return Vl.prototype.addSnapTargetPoints.call(this,t,e,n)},Xl.prototype.getSnapTargets=function(t,e){return Vl.prototype.getSnapTargets.call(this,t,e)};var Kl=1250;function Zl(t,e){var n=this;t.on(["resize.start"],(function(t){n.initSnap(t)})),t.on(["resize.move","resize.end"],Kl,(function(t){var r=t.context,i=r.shape,o=i.parent,a=r.direction,c=r.snapContext;if((!t.originalEvent||!Yo(t.originalEvent))&&!Ni(t)){var s=c.pointsForTarget(o);s.initialized||(s=n.addSnapTargetPoints(s,i,o,a),s.initialized=!0),rh(a)&&Ii(t,"x",t.x),ih(a)&&Ii(t,"y",t.y),e.snap(t,s)}})),t.on(["resize.cleanup"],(function(){e.hide()}))}function Jl(t,e){var n=oi(t),r=ri(t),i={x:n.x,y:n.y};return-1!==e.indexOf("n")?i.y=r.top:-1!==e.indexOf("s")&&(i.y=r.bottom),-1!==e.indexOf("e")?i.x=r.right:-1!==e.indexOf("w")&&(i.x=r.left),i}function Ql(t,e){return t.host===e}function th(t){return!!t.waypoints}function eh(t){return!!t.hidden}function nh(t){return!!t.labelTarget}function rh(t){return"n"===t||"s"===t}function ih(t){return"e"===t||"w"===t}Zl.prototype.initSnap=function(t){var e=t.context,n=e.shape,r=e.direction,i=e.snapContext;i||(i=e.snapContext=new Hl);var o=Jl(n,r);return i.setSnapOrigin("corner",{x:o.x-t.x,y:o.y-t.y}),i},Zl.prototype.addSnapTargetPoints=function(t,e,n,r){var i=this.getSnapTargets(e,n);return St(i,(function(e){t.add("corner",Fi(e)),t.add("corner",Di(e))})),t.add("corner",Jl(e,r)),t},Zl.$inject=["eventBus","snapping"],Zl.prototype.getSnapTargets=function(t,e){return Hi(e).filter((function(e){return!Ql(e,t)&&!th(e)&&!eh(e)&&!nh(e)}))};var oh=7,ah=1e3;function ch(t){this._canvas=t,this._asyncHide=Nt(It(this.hide,this),ah)}ch.$inject=["canvas"],ch.prototype.snap=function(t,e){var n=t.context,r=n.snapContext,i=r.getSnapLocations(),o={x:Ni(t,"x"),y:Ni(t,"y")};St(i,(function(n){var i=r.getSnapOrigin(n),a={x:t.x+i.x,y:t.y+i.y};if(St(["x","y"],(function(t){var r;o[t]||(r=e.snap(a,n,t,oh),void 0!==r&&(o[t]={value:r,originValue:r-i[t]}))})),o.x&&o.y)return!1})),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),St(["x","y"],(function(e){var n=o[e];vt(n)&&Ii(t,e,n.originValue)}))},ch.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=K("path");return z(n,{d:"M0,0 L0,0"}),I(n).add("djs-snap-line"),P(e,n),{update:function(e){yt(e)?z(n,"horizontal"===t?{d:"M-100000,"+e+" L+100000,"+e,display:""}:{d:"M "+e+",-100000 L "+e+", +100000",display:""}):z(n,{display:"none"})}}},ch.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},ch.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},ch.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},ch.prototype.hide=function(){St(this._snapLines,(function(t){t.update()}))};var sh={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Vl],resizeSnapping:["type",Zl],snapping:["type",ch]},uh={__depends__:[sh],__init__:["createMoveSnapping"],createMoveSnapping:["type",Xl]};n("7514");function lh(t){tc.call(this,t),this.init()}function hh(t){lh.call(this,t)}function fh(t,e,n){return!(!e.type||!t.type||"endEvent"==t.type)&&(t.id!=e.id&&{type:"myline"})}lh.$inject=["eventBus"],k()(lh,tc),lh.prototype.addRule=function(t,e,n){var r=this;"string"===typeof t&&(t=[t]),t.forEach((function(t){r.canExecute(t,e,(function(t,e,r){return n(t)}),!0)}))},lh.prototype.init=function(){},hh.$inject=["eventBus"],k()(hh,lh),hh.prototype.init=function(){this.addRule("connection.start",(function(t){var e=t.source;return!(!e||""==e.type||void 0==e.type||null==e.type)})),this.addRule("connection.create",(function(t){var e=t.source,n=t.target,r=t.hints||{},i=r.targetParent,o=r.targetAttach;if(o)return!1;i&&(n.parent=i);try{return fh(e,n)}finally{i&&(n.parent=null)}})),this.addRule("connection.reconnect",(function(t){var e=t.connection,n=t.source,r=t.target;return fh(n,r,e)})),this.addRule("connection.updateWaypoints",(function(t){return{type:t.connection.type}})),this.addRule("shape.create",(function(t){var e=t.target,n=t.shape;return e.parent&&(e=parent),!!("startEvent"!=n.type||e.children&&null==e.children.find((function(t){return t.type==n.type})))})),this.addRule("shape.resize",(function(t){var e=t.shape;return ee(e)}))},hh.prototype.canConnect=fh;var ph={__init__:["myRuleProvider"],myRuleProvider:["type",hh]};function dh(t,e,n,r,i,o,a){this._create=t,this._elementFactory=e,this._handTool=n,this._lassoTool=r,this._globalConnect=i,this._palette=o,this._myOptions=a,o.registerProvider(this)}dh.$inject=["create","elementFactory","handTool","lassoTool","globalConnect","palette","myOptions"],dh.prototype.getPaletteEntries=function(){var t=this._create,e=this._elementFactory,n=this._handTool,r=this._lassoTool,i=this._globalConnect,o=this._myOptions;function a(n,r,i,o,a){function c(r){var i=e.createShape(Wt({type:n},a));t.start(r,i)}return{group:r,className:i,title:o,action:{dragstart:c,click:c}}}console.log(o);var c={"hand-tool":{group:"tools",className:"icon-hand-tool",title:"激活手动工具",action:{click:function(t){n.activateHand(t)}}},"lasso-tool":{group:"tools",className:"icon-lasso-tool",title:"激活套索工具",action:{click:function(t){r.activateSelection(t)}}},"global-connect-tool":{group:"tools",className:"icon-line-tool",title:"激活连线工具",action:{click:function(t){i.toggle(t)}}},"tool-separator":{group:"tools",separator:!0}};for(var s in o.palette){var u=o.palette[s];c[s]=a(u.type,u.group,u.className,u.title,u.options)}return c};var vh={__init__:["paletteProvider"],paletteProvider:["type",dh]},yh=10,gh=50,mh=250;function xh(t,e,n,r){var i;while(i=wh(t,n,e))n=r(e,n,i);return n}function _h(t){return function(e,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach((function(o){var a=t[o];if(a){var c="x"===o?"width":"height",s=a.margin,u=a.minDistance;i[o]=s<0?Math.min(r[o]+s-e[c]/2,n[o]-u+s):Math.max(r[o]+r[c]+s+e[c]/2,n[o]+u+s)}})),i}}function wh(t,e,n){var r={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},i=Sh(t,n);return wt(i,(function(t){if(t===n)return!1;var e=ai(t,r,yh);return"intersect"===e}))}function bh(t,e){function n(e){return e.source===t?1:-1}e||(e={});var r=e.defaultDistance||gh,i=e.direction||"e",o=e.filter,a=e.getWeight||n,c=e.maxDistance||mh,s=e.reference||"start";function u(t,e){return"n"===i?"start"===s?ri(t).top-ri(e).bottom:"center"===s?ri(t).top-oi(e).y:ri(t).top-ri(e).top:"w"===i?"start"===s?ri(t).left-ri(e).right:"center"===s?ri(t).left-oi(e).x:ri(t).left-ri(e).left:"s"===i?"start"===s?ri(e).top-ri(t).bottom:"center"===s?oi(e).y-ri(t).bottom:ri(e).bottom-ri(t).bottom:"start"===s?ri(e).left-ri(t).right:"center"===s?oi(e).x-ri(t).right:ri(e).right-ri(t).right}o||(o=jh);var l=t.incoming.filter(o).map((function(e){var n=a(e),r=n<0?u(e.source,t):u(t,e.source);return{id:e.source.id,distance:r,weight:n}})),h=t.outgoing.filter(o).map((function(e){var n=a(e),r=n>0?u(t,e.target):u(e.target,t);return{id:e.target.id,distance:r,weight:n}})),f=l.concat(h).reduce((function(t,e){return t[e.id+"__weight_"+e.weight]=e,t}),{}),p=kt(f,(function(t,e){var n=e.distance,r=e.weight;return n<0||n>c||(t[String(n)]||(t[String(n)]=0),t[String(n)]+=1*r,(!t.distance||t[t.distance]<t[String(n)])&&(t.distance=n)),t}),{});return p.distance||r}function Sh(t){var e=Eh(t);return t.host&&(e=e.concat(Eh(t.host))),t.attachers&&(e=e.concat(t.attachers.reduce((function(t,e){return t.concat(Eh(e))}),[]))),e}function Eh(t){return Oh(t).concat(kh(t))}function kh(t){return t.incoming.map((function(t){return t.source}))}function Oh(t){return t.outgoing.map((function(t){return t.target}))}function jh(){return!0}var Ch=100;function Mh(t,e){t.on("autoPlace",Ch,(function(t){var e=t.shape,n=t.source;return Ph(n,e)})),this.append=function(n,r,i){t.fire("autoPlace.start",{source:n,shape:r});var o=t.fire("autoPlace",{source:n,shape:r}),a=e.appendShape(n,r,o,n.parent,i);return t.fire("autoPlace.end",{source:n,shape:a}),a}}function Ph(t,e,n){n||(n={});var r=n.defaultDistance||gh,i=oi(t),o=ri(t);return{x:o.right+r+e.width/2,y:i.y}}function Th(t,e){t.on("autoPlace.end",500,(function(t){e.select(t.shape)}))}Mh.$inject=["eventBus","modeling"],Th.$inject=["eventBus","selection"];var Rh={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Mh],autoPlaceSelectionBehavior:["type",Th]};function Ah(t,e){return Lh(t,e)}function Lh(t,e){var n=ri(t),r=oi(t),i=bh(t,{filter:function(t){return lc(t,"myline")}}),o=30,a=80,c="left",s={x:n.right+i+e.width/2,y:r.y+Bh(c,a)},u={y:{margin:o,minDistance:a}};return xh(t,e,s,_h(u))}function Bh(t,e){return-1!=t.indexOf("top")?-1*e:-1!=t.indexOf("bottom")?e:0}function zh(t){t.on("autoPlace",(function(t){var e=t.shape,n=t.source;return Ah(n,e)}))}zh.$inject=["eventBus"];var Dh={__depends__:[Rh],__init__:["myAutoPlace"],myAutoPlace:["type",zh]};function Fh(t,e,n,r,i,o,a){this._connect=t,this._modeling=n,this._elementFactory=r,this._autoPlace=i,this._create=o,this._myOptions=a,e.registerProvider(this)}Fh.$inject=["connect","contextPad","modeling","elementFactory","autoPlace","create","myOptions"],Fh.prototype.getContextPadEntries=function(t){var e=this._connect,n=this._modeling,r=this._elementFactory,i=this._autoPlace,o=this._create,a=this._myOptions;function c(){n.removeElements([t])}function s(t,n,r){e.start(t,n,r)}function u(t,e,n,a){function c(e,n){var i=r.createShape(Wt({type:t},a));o.start(e,i,{source:n})}function s(e,n){var o=r.createShape(Wt({type:t},a));i.append(n,o)}return"string"!==typeof n&&(a=n),{group:"model",className:e,title:n,action:{dragstart:c,click:s}}}if("label"==t.type)return!1;if("myline"==t.type||"endEvent"==t.type)return{delete:{group:"edit",className:"icon-delete",title:"删除",action:{click:c,dragstart:c}}};var l={};for(var h in a.palette)if("create.start-event"!=h){var f=a.palette[h];l[h]=u(f.type,f.className,f.title,f.options)}return l["connect"]={group:"edit",className:"icon-line-tool",title:"连线",action:{click:s,dragstart:s}},l["delete"]={group:"edit",className:"icon-delete",title:"删除",action:{click:c,dragstart:c}},l};var $h={__init__:["ContextPadProvider"],ContextPadProvider:["type",Fh]};function Nh(t,e){return Wt({id:t.id,type:t.type,businessObject:t},e)}function Ih(t,e,n){var r=t.waypoint;return!r||r.length<2?[oi(e),oi(n)]:r.map((function(t){return{x:t.x,y:t.y}}))}function Hh(t,e,n,r,i){this._eventBus=t,this._canvas=e,this._elementFactory=n,this._elementRegistry=r,this._translate=sc,this._textRenderer=i}Hh.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],Hh.prototype.add=function(t){var e,n=t.label;if(n&&(n.id=t.id,n.name=t.name,delete t.label),"myline"==t.type){var r=this._getSource(t),i=this._getTarget(t);e=this._elementFactory.createConnection(Nh(t,{source:r,target:i,waypoints:Ih(t,r,i)})),this._canvas.addConnection(e)}else{var o=this._elementFactory._getDefaultSize(t.type);e=this._elementFactory.createShape(Nh(t,{x:Math.round(t.x),y:Math.round(t.y),width:o.width,height:o.height,isFrame:!1})),this._canvas.addShape(e)}return n&&e&&this.addLabel(n,e),e},Hh.prototype.addLabel=function(t,e){var n=this._elementFactory.createLabel({id:t.id+"_label",labelTarget:e,type:"label",x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height),businessObject:t});return this._canvas.addShape(n,e.parent)},Hh.prototype.update=function(t,e){var n=this._elementRegistry.get(t);n.businessObject=Wt(n.businessObject,e),"myline"==e.type?(this._canvas.removeConnection(n),this._canvas.addConnection(n,n.parent)):(this._canvas.removeShape(n),this._canvas.addShape(n,n.parent));var r=this._elementRegistry.get(t+"_label");r&&(r.businessObject=n.businessObject,this._canvas.removeShape(r),this._canvas.addShape(r,n.parent))},Hh.prototype._getSource=function(t){return this._getElement(t.from)},Hh.prototype._getTarget=function(t){return this._getElement(t.to)},Hh.prototype._getElement=function(t){return this._elementRegistry.get(t)};var Wh={myImporter:["type",Hh]},Gh=function(t){var e=[];return t.forEach((function(t){if(void 0!=t.type){var n=t.businessObject;if("myline"==t.type)t.source&&t.target&&(n.from=t.source.id,n.to=t.target.id,n.waypoint=t.waypoints.map((function(t){return{x:t.x,y:t.y}})),e.push(n));else if("label"!=t.type)n.x=t.x,n.y=t.y,e.push(n);else{var r=e.find((function(t){return t.id==n.id}));r.name=n.name||"",r.label={x:t.x,y:t.y,height:t.height,width:t.width}}}})),e},Vh=function(t,e){var n=e.get("myImporter"),r=t.filter((function(t){return"myline"!=t.type})),i=t.filter((function(t){return"myline"==t.type}));r.forEach((function(t){n.add(t)})),i.forEach((function(t){n.add(t)}))},qh={name:"b-wflow",props:{paletteOptions:Object,lineStroke:String},data:function(){return{scale:1,diagram:null,palette:{"create.start-event":{className:"icon-start-event",type:"startEvent",group:"event",title:"创建开始事件"},"create.end-event":{className:"icon-end-event",type:"endEvent",group:"event",title:"创建结束事件"},"create.and-gateway":{className:"icon-gateway1",type:"gatewayAnd",group:"gateway",title:"并行网关"},"create.xor-gateway":{className:"icon-gateway2",type:"gatewayXor",group:"gateway",title:"互排网关"},"create.inclusive-gateway":{className:"icon-gateway3",type:"gatewayInclusive",group:"gateway",title:"包含网关"},"create.task":{className:"icon-gateway4",type:"userTask",group:"activity",title:"创建任务"},"create.script":{className:"icon-gateway5",type:"scriptTask",group:"activity",title:"创建脚本"},"create.subprocess":{className:"icon-subprocess",type:"subprocess",group:"activity",title:"创建子流程"}}}},mounted:function(){var t=this;this.$nextTick((function(){t.init()}))},computed:{},methods:{init:function(){var t=this,e={__init__:["myOptions"],myOptions:["type",function(){return{palette:t.paletteOptions||t.palette,lineStroke:t.lineStroke}}]},n=this.$refs.container;this.diagram=new Mn({canvas:{container:n},modules:[Yi,eo,ao,wo,Wo,Bn,Qo,ra,ca,du,ha,Ma,tr,$a,Xa,e,Dh,Qu,Il,$h,vh,ph,uh,Wh]});var r=this.diagram.get("canvas"),i=this.diagram.get("elementFactory");this.reset();var o=i.createRoot();r.setRootElement(o),this.initEvent()},initEvent:function(){var t=this,e=this.diagram.get("eventBus");e.on("element.dblclick",(function(e){t.$emit("elementDblclick",e.element.businessObject)})),e.on("element.click",(function(e){t.$emit("elementClick",e.element.businessObject)})),e.on("create.end",(function(e){t.$emit("elementCreate",e.elements[0].businessObject)})),e.on("autoPlace.end",(function(e){t.$emit("elementCreate",e.shape.businessObject)}))},reset:function(){this.scale=1,this.diagram.get("canvas").zoom("fit-viewport")},handlerZoom:function(t){var e=t?this.scale+t:1;this.diagram.get("canvas").zoom(e),this.scale=e},handlerRedo:function(){this.diagram.get("commandStack").redo()},handlerUndo:function(){this.diagram.get("commandStack").undo()},getData:function(){this.diagram.get("canvas").zoom(1);var t=this.diagram.get("elementRegistry").getAll(),e=Gh(t);return e},setData:function(t){this.diagram.clear(),this.reset(),Vh(t,this.diagram)},updateElemet:function(t){var e=this.diagram.get("myImporter");e.update(t.id,t)}}},Yh=qh;n("71df");function Uh(t,e,n,r,i,o,a,c){var s,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=s):i&&(s=c?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(u.functional){u._injectStyles=s;var l=u.render;u.render=function(t,e){return s.call(e),l(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,s):[s]}return{exports:t,options:u}}var Xh=Uh(Yh,u,l,!1,null,null,null),Kh=Xh.exports,Zh=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"b-flow",style:{height:t.height}})},Jh=[],Qh={name:"b-wflow-viewer",props:{isSimple:Boolean,isAutoHeight:{type:Boolean,default:!0},paletteOptions:Object,lineStroke:String},data:function(){return{scale:1,diagram:null,viewHeight:100,nodeMap:{},minX:1e3,minY:1e3,palette:{"create.start-event":{className:"icon-start-event",type:"startEvent",group:"event",title:"创建开始事件"},"create.end-event":{className:"icon-end-event",type:"endEvent",group:"event",title:"创建结束事件"},"create.and-gateway":{className:"icon-gateway1",type:"gatewayAnd",group:"gateway",title:"并行网关"},"create.xor-gateway":{className:"icon-gateway2",type:"gatewayXor",group:"gateway",title:"互排网关"},"create.inclusive-gateway":{className:"icon-gateway3",type:"gatewayInclusive",group:"gateway",title:"包含网关"},"create.task":{className:"icon-gateway4",type:"userTask",group:"activity",title:"创建任务"},"create.script":{className:"icon-gateway5",type:"scriptTask",group:"activity",title:"创建脚本"},"create.subprocess":{className:"icon-subprocess",type:"subprocess",group:"activity",title:"创建子流程"}}}},mounted:function(){var t=this;this.$nextTick((function(){t.init()}))},computed:{height:function(){return this.isAutoHeight?"100%":"".concat(this.viewHeight,"px")}},methods:{init:function(){var t=this,e=this.$refs.container,n={__init__:["myOptions"],myOptions:["type",function(){return{palette:t.paletteOptions||t.palette,lineStroke:t.lineStroke}}]};this.diagram=new Mn({canvas:{container:e},modules:[eo,Wo,du,ha,Xa,n,Qu,Wh]});var r=this.diagram.get("canvas"),i=this.diagram.get("elementFactory");this.reset();var o=i.createRoot();r.setRootElement(o),this.initEvent(),this.$emit("init")},initEvent:function(){var t=this,e=this.diagram.get("eventBus");e.on("element.dblclick",(function(e){t.$emit("elementDblclick",e.element.businessObject)})),e.on("element.click",(function(e){t.$emit("elementClick",e.element.businessObject)}))},reset:function(){this.scale=1,this.diagram.get("canvas").zoom("fit-viewport")},handlerZoom:function(t){var e=t?this.scale+t:1;this.diagram.get("canvas").zoom(e),this.scale=e},getData:function(){var t=this.diagram.get("elementRegistry").getAll(),e=Gh(t);return e},setData:function(t,e){var n=this;this.nodeMap={},t.forEach((function(t){n.nodeMap[t.id]=t,"myline"!=t.type?(n.minX>t.x&&(n.minX=t.x),n.minY>t.y&&(n.minY=t.y)):(t.waypoint.forEach((function(t){n.minX>t.x&&(n.minX=t.x),n.minY>t.y&&(n.minY=t.y)})),t.label&&(n.minX>t.label.x&&(n.minX=t.label.x),n.minY>t.label.y&&(n.minY=t.label.y)))})),this.isSimple&&(t=this.makeSimple(t,e)),this.isAutoHeight||this.setVeiwHeight(t,e),this.$nextTick((function(){n.diagram.clear(),n.reset(),Vh(t,n.diagram),setTimeout((function(){void 0!=e&&n.handlerZoom(e)}),100)}))},updateElemet:function(t){var e=this.diagram.get("myImporter");e.update(t.id,t)},setVeiwHeight:function(t,e){var n=0;t.forEach((function(t){var r=0;switch(t.type){case"userTask":case"subprocess":case"scriptTask":r=t.y+77*(1+e);break;case"myline":r=t.y;break;default:r=t.y+77*(1+e);break}n<r&&(n=r)})),this.viewHeight=n+16},makeSimple:function(t,e){var n=this,r=[];e=e||0;var i=this.minX-16-518*e/(1+e),o=this.minY-16+(3-30*e)/(1+e);return console.log(t),t.forEach((function(t){t.label&&(t.label.x=t.label.x-i,t.label.y=t.label.y-o),"myline"!=t.type?"scriptTask"!=t.type&&(t.x=t.x-i,t.y=t.y-o,r.push(t)):(t.waypoint.forEach((function(t){t.x=t.x-i,t.y=t.y-o})),"scriptTask"!=n.nodeMap[t.from].type&&"scriptTask"!=n.nodeMap[t.to].type&&r.push(t))})),r}}},tf=Qh,ef=(n("1062"),Uh(tf,Zh,Jh,!1,null,null,null)),nf=ef.exports;Kh.install=function(t){t.component(Kh.name,Kh),t.component(nf.name,nf)};var rf=Kh;function of(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function af(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?of(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cf={},sf={bWflow:rf},uf=function t(e){t.installed||(Object.values(sf).map((function(t){e.use(t)})),Object.keys(cf).forEach((function(t){e.prototype["$"+t]=cf[t]})))};"undefined"!==typeof window&&window.Vue&&uf(window.Vue);var lf=af({install:uf},sf);e["default"]=lf},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}})}));
//# sourceMappingURL=bwflow.umd.min.js.map