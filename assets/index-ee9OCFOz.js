import{J as G,aC as le,av as te,i as oe,r as d,O as M,ai as k,o as r,c as N,w as $,d as I,a5 as b,l as v,F as w,m as T,a4 as F,a1 as V,b as B,a$ as D,a7 as O,aH as ae,eB as ne,bF as se,H as j,b5 as ie,aU as U,t as A,b1 as re,b2 as ce,eC as pe}from"./index-BF2fBoPb.js";import{i as ue}from"./index-BFNslPul.js";const de=G({name:"IconGrid",components:{ElEmpty:le,ElScrollbar:te,EleTooltip:oe},props:{icon:String,data:{type:Array,required:!0},emptyProps:Object,tooltip:Boolean,tooltipProps:Object,popperVisible:Boolean,gridStyle:Object,itemStyle:Object},emits:{select:e=>!0},setup(e,{emit:n}){const i=d(!1),f=d(""),c=d(),y=t=>{i.value=t},s=()=>{y(!1)},a=(t,o)=>{e.tooltip&&e.popperVisible&&t&&(c.value=o.currentTarget,f.value=t,i.value=!0)},p=t=>{n("select",t)};return M(()=>e.popperVisible,t=>{t||s()}),{tooltipVisible:i,tooltipContent:f,virtualRef:c,updateTooltipVisible:y,hideTooltip:s,handleItemHover:a,handleItemClick:p}}}),ve=(e,n)=>{const i=e.__vccOpts||e;for(const[f,c]of n)i[f]=c;return i},fe=["title","onClick","onMouseover"],ye={key:0,class:"ele-icon-select-empty"};function me(e,n,i,f,c,y){const s=k("ElEmpty"),a=k("EleTooltip"),p=k("ElScrollbar");return r(),N(p,{class:"ele-icon-select-body"},{default:$(()=>[I("div",{class:"ele-icon-select-grid",style:b(e.gridStyle)},[(r(!0),v(w,null,T(e.data,(t,o)=>(r(),v("div",{key:o+"-"+t,class:F(["ele-icon-select-item",{"is-active":e.icon&&t===e.icon}]),title:e.tooltip?void 0:t,style:b(e.itemStyle),onClick:u=>e.handleItemClick(t),onMouseover:u=>e.handleItemHover(t,u)},[V(e.$slots,"icon",{icon:t})],46,fe))),128))],4),!e.data||!e.data.length?(r(),v("div",ye,[B(s,D({imageSize:60},e.emptyProps||{}),null,16)])):O("",!0),B(a,D({placement:"top",offset:6,teleported:!1},e.tooltipProps||{},{visible:e.tooltipVisible,content:e.tooltipContent,virtualRef:e.virtualRef,virtualTriggering:!0,"onUpdate:visible":e.updateTooltipVisible}),null,16,["visible","content","virtualRef","onUpdate:visible"])]),_:3})}const be=ve(de,[["render",me]]),he={modelValue:String,data:{type:Array,required:!0},disabled:Boolean,size:String,clearable:Boolean,placeholder:String,automaticDropdown:Boolean,filterable:[Boolean,String],teleported:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},placement:{type:String,default:"bottom-start"},transition:{type:String,default:"el-zoom-in-top"},popperOptions:Object,popperClass:String,popperWidth:{type:[Number,String],default:414},popperHeight:{type:[Number,String],default:260},selectStyle:Object,inputStyle:Object,selectTagsStyle:Object,hideOnSingleTab:Boolean,emptyProps:Object,tooltip:{type:Boolean,default:!0},tooltipProps:Object,headerStyle:Object,tabsStyle:Object,searchStyle:Object,menusStyle:Object,bodyStyle:Object,gridStyle:Object,itemStyle:Object,filterPlaceholder:{type:String,default:""},responsive:{type:Boolean,default:null}},Se={"update:modelValue":e=>!0,change:e=>!0,visibleChange:e=>!0,clear:()=>!0,focus:e=>!0,blur:e=>!0},ge=G({name:"EleIconSelect",components:{ElInput:ae,EleBasicSelect:ue,IconGrid:be},props:he,emits:Se,setup(e,{emit:n}){const{validateChange:i}=ne(),f=se(e),c=d(null),y=d(!1),s=d([]),a=d(),p=d([]),t=d(),o=d([]),u=d(""),W=j(()=>!(!s.value||!s.value.length||e.hideOnSingleTab&&s.value.length===1)),q=j(()=>{const l=["ele-icon-select-popper"];return f.value&&l.push("is-responsive"),e.popperClass&&l.push(e.popperClass),l.join(" ")}),J=j(()=>{if(e.popperHeight)return{height:typeof e.popperHeight=="number"?`${e.popperHeight}px`:e.popperHeight}}),K=()=>{c.value&&c.value.updatePopper()},g=()=>{if(e.data==null||!e.data.length||typeof e.data[0]=="string"){s.value=[],p.value=[],a.value=void 0,t.value=void 0,o.value=E(e.data);return}s.value=e.data.map(m=>m.title),(a.value==null||a.value>=s.value.length)&&(a.value=0);const l=e.data[a.value];if(typeof l!="string"&&l.children!=null&&l.children.length){p.value=l.children.map(m=>m.title),(t.value==null||t.value>=p.value.length)&&(t.value=0),o.value=E(l.children[t.value].icons);return}p.value=[],t.value=void 0,o.value=typeof l!="string"?E(l.icons):[]},E=l=>{if(!l)return[];if(!u.value)return l;const m=u.value.toLowerCase();return l.filter(h=>h.toLowerCase().includes(m))},P=l=>{l&&R(""),y.value!==l&&(y.value=l,n("visibleChange",l))},z=l=>{pe(l,e.modelValue)&&(n("update:modelValue",l),i(),n("change",l))},Q=()=>{z(null),P(!1),n("clear")},X=l=>{n("focus",l)},Y=l=>{n("blur",l)},R=l=>{var m;if(u.value!==l&&(u.value=l),g(),!(!((m=e.data)!=null&&m.length)||o.value.length))for(let h=0;h<e.data.length;h++){const S=e.data[h];if(typeof S=="string")return;const H=u.value.toLowerCase();if(S.children!=null&&S.children.length)for(let C=0;C<S.children.length;C++){const L=S.children[C].icons;if(L&&L.some(ee=>ee.toLowerCase().includes(H))){t.value=C,a.value=h,g();return}}else if(S.icons!=null&&S.icons.some(C=>C.toLowerCase().includes(H))){a.value=h,g();return}}},Z=l=>{a.value=l,g()},_=l=>{t.value=l,g()},x=l=>{z(l),P(!1)};return M(()=>e.data,()=>{g()},{immediate:!0,deep:!0}),{SearchOutlined:ie,selectRef:c,selectVisible:y,tabs:s,tabActive:a,menus:p,menuActive:t,icons:o,keywords:u,tabBar:W,selectPopperClass:q,iconPopperStyle:J,updatePopover:K,updateVisible:P,handleSelectClear:Q,handleSelectFocus:X,handleSelectBlur:Y,handleSelectFilter:R,handleTabClick:Z,handleMenuClick:_,handleIconSelect:x}}}),Ce=(e,n)=>{const i=e.__vccOpts||e;for(const[f,c]of n)i[f]=c;return i},ke=["onClick"],Ve={class:"ele-icon-select-main"},Oe=["onClick"];function $e(e,n,i,f,c,y){const s=k("ElInput"),a=k("IconGrid"),p=k("EleBasicSelect");return r(),N(p,{ref:"selectRef",value:e.modelValue,multiple:!1,disabled:e.disabled,size:e.size,clearable:e.clearable,placeholder:e.placeholder,automaticDropdown:e.automaticDropdown,filterable:typeof e.filterable=="boolean"?e.filterable:!1,teleported:e.teleported,persistent:e.persistent,placement:e.placement,transition:e.transition,popperWidth:e.popperWidth,popperOptions:e.popperOptions,popperClass:e.selectPopperClass,selectClass:"is-icon-select",selectStyle:e.selectStyle,inputStyle:e.inputStyle,selectTagsStyle:e.selectTagsStyle,selectedLabel:e.modelValue,visible:e.selectVisible,"onUpdate:visible":e.updateVisible,onFilterChange:e.handleSelectFilter,onClear:e.handleSelectClear,onFocus:e.handleSelectFocus,onBlur:e.handleSelectBlur},U({default:$(()=>[I("div",{class:"ele-icon-select",style:b(e.iconPopperStyle)},[e.tabBar||e.filterable==="popper"?(r(),v("div",{key:0,class:"ele-icon-select-header",style:b(e.headerStyle)},[V(e.$slots,"tabLeftExtra"),e.tabBar?(r(),v("div",{key:0,class:"ele-icon-select-tabs",style:b(e.tabsStyle)},[(r(!0),v(w,null,T(e.tabs,(t,o)=>(r(),v("div",{key:o+"-"+t,class:F(["ele-icon-select-tab",{"is-active":o===e.tabActive}]),onClick:u=>e.handleTabClick(o)},A(t),11,ke))),128))],4)):O("",!0),e.filterable==="popper"?(r(),v("div",{key:1,class:"ele-icon-select-search",style:b(e.searchStyle)},[B(s,{size:"small",clearable:!0,modelValue:e.keywords,validateEvent:!1,prefixIcon:e.SearchOutlined,placeholder:e.filterPlaceholder,"onUpdate:modelValue":e.handleSelectFilter},null,8,["modelValue","prefixIcon","placeholder","onUpdate:modelValue"])],4)):O("",!0),V(e.$slots,"tabRightExtra")],4)):O("",!0),I("div",Ve,[e.menus&&e.menus.length?(r(),v("div",{key:0,class:"ele-icon-select-menus",style:b(e.menusStyle)},[(r(!0),v(w,null,T(e.menus,(t,o)=>(r(),v("div",{key:o+"-"+t,class:F(["ele-icon-select-menu",{"is-active":o===e.menuActive}]),onClick:u=>e.handleMenuClick(o)},A(t),11,Oe))),128))],4)):O("",!0),B(a,{data:e.icons,icon:e.modelValue,emptyProps:e.emptyProps,tooltip:e.tooltip,tooltipProps:e.tooltipProps,popperVisible:e.selectVisible,gridStyle:e.gridStyle,itemStyle:e.itemStyle,style:b(e.bodyStyle),onSelect:e.handleIconSelect},U({_:2},[e.$slots.icon?{name:"icon",fn:$(t=>[V(e.$slots,"icon",re(ce(t||{})))]),key:"0"}:void 0]),1032,["data","icon","emptyProps","tooltip","tooltipProps","popperVisible","gridStyle","itemStyle","style","onSelect"])])],4)]),_:2},[e.modelValue&&e.$slots.icon?{name:"prefix",fn:$(()=>[V(e.$slots,"icon",{icon:e.modelValue,prefix:!0})]),key:"0"}:void 0]),1032,["value","disabled","size","clearable","placeholder","automaticDropdown","filterable","teleported","persistent","placement","transition","popperWidth","popperOptions","popperClass","selectStyle","inputStyle","selectTagsStyle","selectedLabel","visible","onUpdate:visible","onFilterChange","onClear","onFocus","onBlur"])}const Pe=Ce(ge,[["render",$e]]);export{Pe as i};
