import{L as G,aI as H,g as J,k as M,bj as q,be as Q,i as X,b0 as Y,r as y,J as m,R,aj as f,o as i,c as p,w as s,a2 as h,a8 as C,e as Z,a5 as _,a6 as A,b as T,cK as F,aV as x,aG as ee,m as E,F as k,n as le,d as B,t as N}from"./index-C4BxmZrN.js";const te={value:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,selectedLabel:String,selected:Array,maxTagCount:Number,maxTagTextLength:Number,tagType:String,automaticDropdown:Boolean,filterable:Boolean,visible:Boolean,teleported:Boolean,persistent:Boolean,placement:String,transition:{type:String,default:"el-fade-in-linear"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectClass:String,selectStyle:Object,inputStyle:Object},ae={"update:visible":e=>!0,removeTag:e=>!0,clear:()=>!0,focus:e=>!0,blur:e=>!0,filterChange:e=>!0},ne=G({name:"EleBasicSelect",components:{ElInput:H,ElIcon:J,ElTag:M,CloseCircleFilled:q,ArrowDown:Q,EleTooltip:X,ReceiverView:Y},props:te,emits:ae,setup(e,{emit:t}){const a=y(null),o=y(null),r=y(null),d=y(e.multiple||!e.selectedLabel?"":e.selectedLabel),c=y(""),n=m(()=>e.multiple?!Array.isArray(e.value)||!e.value.length:e.value==null||e.value===""),V=m(()=>{const l=n.value&&e.placeholder?e.placeholder:"";return!e.filterable||!e.visible||e.multiple?l:e.selectedLabel||l}),b=m(()=>typeof e.maxTagCount=="number"&&e.selected!=null&&e.selected.length>e.maxTagCount),g=m(()=>!b.value||n.value||e.selected==null?e.selected||[]:e.selected.slice(0,e.maxTagCount)),w=m(()=>!b.value||n.value||e.selected==null?[]:e.selected.slice(e.maxTagCount)),z=m(()=>n.value||e.maxTagCount==null||e.maxTagCount<0?0:e.value.length-e.maxTagCount),u=()=>{a.value&&a.value.updatePopper()},S=l=>{if(e.filterable&&e.visible){if(l!=null&&l.target!=null){const $=l.target;if($.nodeName&&$.nodeName.toLowerCase()==="input")return}const v=e.multiple?r.value:o.value;v&&v.focus()}},L=l=>{e.filterable&&e.visible&&e.multiple&&(c.value=l,t("filterChange",l))},O=l=>{e.filterable&&e.visible&&!e.multiple&&(d.value=l,t("filterChange",l))},I=l=>{(!e.disabled||!l)&&t("update:visible",l)},D=l=>{e.disabled||t("removeTag",l)},K=()=>{t("clear")},U=l=>{e.automaticDropdown&&!e.visible&&I(!0),t("focus",l)},j=l=>{t("blur",l)},W=l=>{!e.disabled&&e.visible&&(l.stopPropagation(),l.preventDefault(),I(!1))};return R(()=>e.selectedLabel,l=>{(!e.filterable||!e.visible)&&(d.value=e.multiple||!l?"":l)}),R(()=>e.visible,l=>{if(e.filterable)if(e.multiple)c.value="",l&&S();else{const v=e.selectedLabel;d.value=l||!v?"":v}}),{tooltipRef:a,inputRef:o,searchRef:r,inputValue:d,searchValue:c,isEmpty:n,inputPlaceholder:V,isCollapse:b,currentTags:g,omittedTags:w,omittedSize:z,updatePopper:u,focusSearchInput:S,updateSearchValue:L,updateInputValue:O,updateVisible:I,onTagClose:D,onClear:K,onInputFocus:U,onInputBlur:j,onInputEsc:W}}}),ie=(e,t)=>{const a=e.__vccOpts||e;for(const[o,r]of t)a[o]=r;return a},se={key:0,class:"ele-select-tags"};function oe(e,t,a,o,r,d){const c=f("CloseCircleFilled"),n=f("ElIcon"),V=f("ArrowDown"),b=f("ElInput"),g=f("ElTag"),w=f("ReceiverView"),z=f("EleTooltip");return i(),p(z,{ref:"tooltipRef",trigger:"click",visible:e.visible,disabled:e.disabled,placement:e.placement,teleported:e.teleported,width:e.popperWidth,popperClass:e.popperClass,popperOptions:e.popperOptions,transition:e.transition,gpuAcceleration:e.transition==="el-fade-in-linear",effect:"light",persistent:!0,isPopover:!0,triggerKeys:[],"onUpdate:visible":e.updateVisible},{body:s(()=>[e.persistent||e.visible?(i(),p(w,{key:0,class:"ele-popover-body",onClick:e.focusSearchInput},{default:s(()=>[h(e.$slots,"default")]),_:3},8,["onClick"])):C("",!0)]),default:s(()=>[Z("div",{class:_(["ele-select",e.selectClass,{"is-empty":e.isEmpty},{"is-multiple":e.multiple},{"is-disabled":e.disabled},{"is-filterable":e.filterable},{"is-small":e.size==="small"},{"is-large":e.size==="large"},{"is-opened":e.visible}]),style:A(e.selectStyle)},[T(b,{ref:"inputRef",size:e.size,disabled:e.disabled,validateEvent:!1,modelValue:e.inputValue,placeholder:e.filterable&&e.multiple&&e.visible?"":e.inputPlaceholder,readonly:!e.filterable||!e.visible||e.multiple,style:A(e.inputStyle),"onUpdate:modelValue":e.updateInputValue,onFocus:e.onInputFocus,onBlur:e.onInputBlur,onKeydown:F(e.onInputEsc,["esc"])},x({suffix:s(()=>[e.clearable&&!e.disabled&&!e.isEmpty?(i(),p(n,{key:0,class:"ele-select-clear el-input__icon",onClick:ee(e.onClear,["stop"])},{default:s(()=>[h(e.$slots,"clearIcon",{},()=>[T(c)])]),_:3},8,["onClick"])):C("",!0),T(n,{class:"ele-select-arrow el-input__icon"},{default:s(()=>[h(e.$slots,"suffixIcon",{visible:e.visible},()=>[T(V)])]),_:3})]),_:2},[e.$slots.prefix?{name:"prefix",fn:s(()=>[h(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["size","disabled","modelValue","placeholder","readonly","style","onUpdate:modelValue","onFocus","onBlur","onKeydown"]),e.multiple?(i(),E("div",se,[(i(!0),E(k,null,le(e.currentTags,(u,S)=>(i(),p(g,{key:S+"-"+u.value,size:e.size,type:e.tagType,closable:!e.disabled,disableTransitions:!0,title:u.label,onClose:L=>e.onTagClose(u)},{default:s(()=>[u.label&&e.maxTagTextLength&&u.label.length>e.maxTagTextLength?(i(),E(k,{key:0},[B(N(u.label.slice(0,e.maxTagTextLength))+"... ",1)],64)):(i(),E(k,{key:1},[B(N(u.label),1)],64))]),_:2},1032,["size","type","closable","title","onClose"]))),128)),e.isCollapse?(i(),p(g,{key:0,size:e.size,type:e.tagType,disableTransitions:!0},{default:s(()=>[h(e.$slots,"maxTagPlaceholder",{omittedValues:e.omittedTags,omittedSize:e.omittedSize},()=>[B(" +"+N(e.omittedSize),1)])]),_:3},8,["size","type"])):C("",!0),!e.disabled&&e.filterable?(i(),p(g,{key:1,size:e.size,disableTransitions:!0,class:"ele-select-search"},{default:s(()=>[T(b,{ref:"searchRef",size:e.size,validateEvent:!1,modelValue:e.searchValue,placeholder:e.inputPlaceholder,"onUpdate:modelValue":e.updateSearchValue,onKeydown:F(e.onInputEsc,["esc"])},null,8,["size","modelValue","placeholder","onUpdate:modelValue","onKeydown"])]),_:1},8,["size"])):C("",!0)])):C("",!0)],6)]),_:3},8,["visible","disabled","placement","teleported","width","popperClass","popperOptions","transition","gpuAcceleration","onUpdate:visible"])}const ue=ie(ne,[["render",oe]]);function P(e,t){return e==null||e===""||t&&!e.length}function de(e,t,a){const o=P(e),r=P(t);if(o&&r)return!1;if(!a)return o!==r||e!==t;const d=o||!e.length,c=r||!t.length;return d&&c?!1:d!==c||e.length!==t.length?!0:e.some(n=>!t.includes(n))}export{P as a,ue as i,de as v};
