import{N,e as D,f as h,S as C,b as U,A as Z,y as E,F as g,a as R,V as O,M as X,T as z,X as $,c as W,i as Y,k as J,z as Q}from"../js/ol@7.4.0@ol/ol@7.4.0@ol.2a99620d.js";import{Q as H,R as K}from"../js/@element-plus_icons-vue@2.1.0@@element-plus/@element-plus_icons-vue@2.1.0@@element-plus.1b5ed4e9.js";import{A as ss,M as ns}from"../js/index/index.47495de9.js";import{D as as,n as ls,v as ps,V as P,o as v,c as M,a as e,N as q,j as w,J as os,a0 as es}from"../js/@vue_runtime-core@3.3.4@@vue/@vue_runtime-core@3.3.4@@vue.35efc880.js";import{h as ts,u as S}from"../js/@vue_reactivity@3.3.4@@vue/@vue_reactivity@3.3.4@@vue.e6fc7fe8.js";import{L as cs}from"../js/@vue_shared@3.3.4@@vue/@vue_shared@3.3.4@@vue.5a5848fd.js";import{_ as rs}from"./app.f296b152.js";import"../js/earcut@2.2.4@earcut/earcut@2.2.4@earcut.e6a9c857.js";import"../js/rbush@3.0.1@rbush/rbush@3.0.1@rbush.75a05972.js";import"../js/quickselect@2.0.0@quickselect/quickselect@2.0.0@quickselect.f3892974.js";import"../js/@docsearch_css@3.5.1@@docsearch/@docsearch_css@3.5.1@@docsearch.4ed993c7.js";import"../js/body-scroll-lock@4.0.0-beta.0@body-scroll-lock/body-scroll-lock@4.0.0-beta.0@body-scroll-lock.e1f8a6eb.js";import"../js/geotiff@2.0.7@geotiff/geotiff@2.0.7@geotiff.101896b7.js";import"../js/@vue_runtime-dom@3.3.4@@vue/@vue_runtime-dom@3.3.4@@vue.5dd85bb5.js";import"../js/@vueuse_core@10.2.0@@vueuse/@vueuse_core@10.2.0@@vueuse.8a5d8129.js";import"../js/@vueuse_shared@10.2.0@@vueuse/@vueuse_shared@10.2.0@@vueuse.9afec68c.js";import"../js/es/element-plus@2.3.7@element-plus.9cf0a975.js";import"../js/lodash-es@4.17.21@lodash-es/lodash-es@4.17.21@lodash-es.36eb724a.js";import"../js/@vueuse_core@9.13.0@@vueuse/@vueuse_core@9.13.0@@vueuse.604f33c6.js";import"../js/@vueuse_shared@9.13.0@@vueuse/@vueuse_shared@9.13.0@@vueuse.740d90d5.js";import"../js/@sxzz_popperjs-es@2.11.7@@sxzz/@sxzz_popperjs-es@2.11.7@@sxzz.c75af06c.js";import"../js/@ctrl_tinycolor@3.6.0@@ctrl/@ctrl_tinycolor@3.6.0@@ctrl.f8748455.js";import"../js/dayjs@1.11.8@dayjs/dayjs@1.11.8@dayjs.ab63237d.js";import"../js/async-validator@4.2.5@async-validator/async-validator@4.2.5@async-validator.dee29e8b.js";import"../js/memoize-one@6.0.0@memoize-one/memoize-one@6.0.0@memoize-one.297ddbcb.js";import"../js/escape-html@1.0.3@escape-html/escape-html@1.0.3@escape-html.3a386d15.js";import"../js/normalize-wheel-es@1.2.0@normalize-wheel-es/normalize-wheel-es@1.2.0@normalize-wheel-es.ed76fb12.js";import"../js/@floating-ui_dom@1.4.2@@floating-ui/@floating-ui_dom@1.4.2@@floating-ui.4bb7de12.js";import"../js/@floating-ui_core@1.3.1@@floating-ui/@floating-ui_core@1.3.1@@floating-ui.a8b4680c.js";const Fs={id:"map"},ys={class:"setting"},Ds=as({__name:"index",setup(T){const a=ts({speed:100,isPlay:!1});let s,d,t,l,A,c,r=0,i=[],f=0;const V=()=>{s=new X({target:"map",layers:[new z({source:new $({attributions:ss,url:ns,maxZoom:20})})],view:new W({projection:"EPSG:3857",center:[-563952395e-2,-350127452e-2],zoom:9,minZoom:2,maxZoom:19}),controls:Y().extend([new J])})},k=()=>{a.isPlay?b():L()};function x(F){const p=Number(a.speed),o=F.frameState.time,y=o-d;r=(r+p*y/1e6)%2,d=o;const n=t.getCoordinateAt(r>1?2-r:r);l.setCoordinates(n);const u=Q(F);i.length&&(f=Math.atan2(0,1)-Math.atan2(n[1]-i[1],n[0]-i[0])),u.setStyle(new C({text:new E({text:"->",rotation:f,font:"normal 20px 微软雅黑",fill:new g({color:"red"})})})),u.drawGeometry(l),i=n,s==null||s.render()}function L(){a.isPlay=!0,d=Date.now(),A.on("postrender",x),c.setGeometry(void 0)}function b(){a.isPlay=!1,c.setGeometry(l),A.un("postrender",x),c.setStyle(new C({text:new E({text:"->",rotation:f,font:"normal 20px 微软雅黑",fill:new g({color:"red"})})})),s==null||s.render()}return ls(()=>{V(),fetch("/json/route.json").then(F=>{F.json().then(p=>{var B;const o=p.routes[0].geometry;t=new N({factor:1e6}).readGeometry(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});const y=new D({type:"route",geometry:t}),n=new D({type:"icon",geometry:new h(t.getFirstCoordinate())}),u=new D({type:"icon",geometry:new h(t.getLastCoordinate())}),_=(B=n==null?void 0:n.getGeometry())==null?void 0:B.clone();if(_){l=_;const G=new D({type:"geoMarker",geometry:l});c=new D({geometry:l,type:"text"});let m=l.getFirstCoordinate();const j={route:new C({stroke:new U({width:6,color:[237,212,0,.8]})}),icon:new C({image:new Z({anchor:[.5,1],src:"/image/icon.png"})}),text:new C({text:new E({text:"->",rotation:Math.atan2(m[0]-m[1],m[1]-m[0]),font:"normal 20px 微软雅黑",fill:new g({color:"red"})})})};A=new R({source:new O({features:[y,G,n,u,c]}),style:function(I){return j[I.get("type")]}}),s==null||s.addLayer(A)}})})}),ps(()=>{s&&(s.dispose(),s=null)}),(F,p)=>{const o=P("el-slider"),y=P("el-button");return v(),M("div",Fs,[e("div",ys,[q(" 滑动控制速度: "),w(o,{modelValue:a.speed,"onUpdate:modelValue":p[0]||(p[0]=n=>a.speed=n),class:"slider",min:10,max:999},null,8,["modelValue"]),w(y,{type:"primary",icon:a.isPlay?S(K):S(H),onClick:k},{default:os(()=>[q(cs(a.isPlay?"关闭":"开启"),1)]),_:1},8,["icon"])])])}}});const Cs=rs(Ds,[["__scopeId","data-v-d74cc5b9"]]),As=e("h1",{id:"轨迹跟踪",tabindex:"-1"},[q("轨迹跟踪 "),e("a",{class:"header-anchor",href:"#轨迹跟踪","aria-label":'Permalink to "轨迹跟踪"'},"​")],-1),is=e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"TIP"),e("p",null,"滑动滑块可改变箭头运动速度，点击按钮可控制开启或关闭。")],-1),us=es("",2),$s=JSON.parse('{"title":"轨迹跟踪","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/others/trajectory-tracking/index.md","filePath":"open-layers/others/trajectory-tracking/index.md","lastUpdated":1687683239000}'),ms={name:"open-layers/others/trajectory-tracking/index.md"},Ws=Object.assign(ms,{setup(T){return(a,s)=>(v(),M("div",null,[As,is,w(Cs),us]))}});export{$s as __pageData,Ws as default};
