import{A as q,M as B,S as C,N as A}from"./chunks/index.47495de9.js";import{c as f,S as x,I as _,T as h,F as w,a as S,V as b}from"./chunks/Vector.f72cf874.js";import{g as d,M as k,V as T,B as L}from"./chunks/reproj.50e0d4ab.js";import{O as y}from"./chunks/Overlay.aad42cba.js";import{T as N}from"./chunks/TileImage.36abd4f0.js";import{X as O}from"./chunks/XYZ.eaf43adc.js";import{E as V}from"./chunks/index.2972f73c.js";import{F as I}from"./chunks/FullScreen.9a3e590b.js";import{V as M}from"./chunks/Vector.0afd591d.js";import{d as P,a2 as U,p as H,a3 as G,D as i,o as m,c as u,z as p,G as r,B as F,F as Z,a as D,M as z,N as j,_ as R,O as X}from"./chunks/framework.166469be.js";import"./chunks/index.a5aab8d8.js";const E=n=>new x({image:new _({anchor:[.5,60],anchorOrigin:"top-right",anchorXUnits:"fraction",anchorYUnits:"pixels",offsetOrigin:"top-right",scale:.4,opacity:.75,src:"/image//blue.png"}),text:new h({textAlign:"center",textBaseline:"middle",font:"normal 14px 微软雅黑",text:n.get("name"),fill:new w({color:"#aa3300"}),stroke:new S({color:"#ffcc33",width:2})})}),Y=({coordinate:n,vectorSource:s,name:l="标注点"})=>{if(s===null)return;const e=new f({geometry:new d(n),name:l});e.setStyle(E(e)),s.addFeature(e)},$=({coordinate:n,map:s})=>{if(s===null)return;const l=document.createElement("div");l.className="marker",l.title="标注点";const e=document.getElementById("label");if(e===null)return;e.appendChild(l);const a=document.createElement("a");a.className="address",a.href="#",J(a,l.title),l.appendChild(a);const o=new y({position:n,positioning:"center-center",element:l,stopEvent:!1});s.addOverlay(o);const t=new y({position:n,element:a});s.addOverlay(t)};function J(n,s){typeof n.textContent=="string"?n.textContent=s:n.innerText=s}const g=n=>(z("data-v-81822a3b"),n=n(),j(),n),K={id:"top"},Q=g(()=>p("div",{id:"label",style:{display:"none"}},[p("div",{id:"marker",class:"marker",title:"Marker"},[p("a",{class:"address",id:"address",target:"_blank",href:"https://juejin.cn/user/588993965598407"}," 标注点 ")])],-1)),W=g(()=>p("div",{id:"map"},null,-1)),ss=P({__name:"index",setup(n){const s=U({map:null,vectorSource:null,type:""}),l=new N({source:new O({attributions:q,url:B,maxZoom:20})}),e=()=>{s.map=new k({target:"map",layers:[l],view:new T({projection:"EPSG:4326",center:C,zoom:5}),controls:L().extend([new I])});const a=new f({geometry:new d(C),name:"深圳市"});a.setStyle(E(a)),s.vectorSource=new b({features:[a]});const o=new M({source:s.vectorSource});s.map.addLayer(o);const t=new y({position:A,positioning:"center-center",element:document.getElementById("marker")||void 0,stopEvent:!1});s.map.addOverlay(t),t.getElement().title="南昌市";const c=new y({position:A,element:document.getElementById("address")||void 0});s.map.addOverlay(c),c.getElement().innerText=t.getElement().title};return H(()=>{e(),s.map&&s.map.on("click",a=>{if(!s.type){V({message:"请先选择标注类型后用鼠标在地图上点击添加标注",type:"warning"});return}const o=a.coordinate;s.type==="vector"&&Y({coordinate:o,vectorSource:s.vectorSource}),s.type==="overlay"&&$({coordinate:o,map:s.map})})}),G(()=>{s.map&&(s.map.dispose(),s.map=null)}),(a,o)=>{const t=i("el-radio"),c=i("el-radio-group");return m(),u(Z,null,[p("div",K,[r(c,{modelValue:s.type,"onUpdate:modelValue":o[0]||(o[0]=v=>s.type=v)},{default:F(()=>[r(t,{label:"vector",size:"large"},{default:F(()=>[D("Vector Labels")]),_:1}),r(t,{label:"overlay",size:"large"},{default:F(()=>[D("Overlay Labels")]),_:1})]),_:1},8,["modelValue"])]),Q,W],64)}}});const ns=R(ss,[["__scopeId","data-v-81822a3b"]]),as=p("h1",{id:"图文标注",tabindex:"-1"},[D("图文标注 "),p("a",{class:"header-anchor",href:"#图文标注","aria-label":'Permalink to "图文标注"'},"​")],-1),ls=p("div",{class:"tip custom-block"},[p("p",{class:"custom-block-title"},"TIP"),p("p",null,"选择标注类型后用鼠标在地图上点击添加标注。")],-1),ps=X("",4),ds=JSON.parse('{"title":"图文标注","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/map-marker/text-pic/index.md","filePath":"open-layers/map-marker/text-pic/index.md"}'),os={name:"open-layers/map-marker/text-pic/index.md"},ms=Object.assign(os,{setup(n){return(s,l)=>(m(),u("div",null,[as,ls,r(ns),ps]))}});export{ds as __pageData,ms as default};
