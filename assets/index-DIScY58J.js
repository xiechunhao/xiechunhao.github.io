import{dq as Va,L as pe,a1 as ue,V as Da,a9 as $e,aP as Pa,aO as La,g as ve,cm as aa,dF as ta,cS as _a,N as la,J as y,aj as W,o as h,m as L,a8 as X,c as M,aG as ge,w as I,b as Y,a5 as D,F as le,e as re,aw as sa,cv as na,eN as Ia,r as T,n as ce,d as oa,t as ae,P as Ma,cp as ze,co as Ue,cI as xa,eT as je,cz as me,a3 as ia,bQ as be,er as za,eU as Ba,cX as we,cW as Se,Z as Fa,a as We,R as te,eV as Aa,U as ra,W as ne,b_ as ca,eW as Ha,bZ as O,eX as Ce,eY as ua,cs as Ra,eM as Oa,eZ as Ka,ct as qa,du as Ua,cu as ja,cw as Wa,cx as Za,cC as Xa,cy as Ya,bJ as Ja,e_ as Ga,dD as Qa,bU as ke,u as p,a6 as et,aI as at,cl as tt,cH as lt,k as Be,cE as Ze,cK as st,e$ as nt,cP as ot,dw as it,bV as Xe,a2 as rt,f0 as ct,f1 as ut,f2 as dt,Y as pt,E as ht,s as ft,a_ as vt}from"./index-C4BxmZrN.js";import{u as Ye,c as Je}from"./arrays-6TrVLtTe.js";import{c as da}from"./cloneDeep-hApPH6eT.js";var gt=1/0;function mt(e){var a=e==null?0:e.length;return a?Va(e,gt):[]}var bt=pe({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:s}=this.$parent,{data:t,label:o}=a,{renderLabelFn:d}=s;return Da("span",{class:e.e("label")},d?d({node:a,data:t}):o)}});const Ae=Symbol(),yt=pe({name:"ElCascaderNode",components:{ElCheckbox:Pa,ElRadio:La,NodeContent:bt,ElIcon:ve,Check:aa,Loading:ta,ArrowRight:_a},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const s=la(Ae),t=ue("cascader-node"),o=y(()=>s.isHoverMenu),d=y(()=>s.config.multiple),r=y(()=>s.config.checkStrictly),v=y(()=>{var N;return(N=s.checkedNodes[0])==null?void 0:N.uid}),u=y(()=>e.node.isDisabled),k=y(()=>e.node.isLeaf),g=y(()=>r.value&&!k.value||!u.value),m=y(()=>_(s.expandingNode)),C=y(()=>r.value&&s.checkedNodes.some(_)),_=N=>{var A;const{level:H,uid:Z}=e.node;return((A=N==null?void 0:N.pathNodes[H-1])==null?void 0:A.uid)===Z},F=()=>{m.value||s.expandNode(e.node)},x=N=>{const{node:A}=e;N!==A.checked&&s.handleCheckChange(A,N)},R=()=>{s.lazyLoad(e.node,()=>{k.value||F()})},P=N=>{o.value&&(K(),!k.value&&a("expand",N))},K=()=>{const{node:N}=e;!g.value||N.loading||(N.loaded?F():R())},z=()=>{o.value&&!k.value||(k.value&&!u.value&&!r.value&&!d.value?B(!0):K())},J=N=>{r.value?(x(N),e.node.loaded&&F()):B(N)},B=N=>{e.node.loaded?(x(N),!r.value&&F()):R()};return{panel:s,isHoverMenu:o,multiple:d,checkStrictly:r,checkedNodeId:v,isDisabled:u,isLeaf:k,expandable:g,inExpandingPath:m,inCheckedPath:C,ns:t,handleHoverExpand:P,handleExpand:K,handleClick:z,handleCheck:B,handleSelectCheck:J}}}),kt=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Ct=re("span",null,null,-1);function Nt(e,a,s,t,o,d){const r=W("el-checkbox"),v=W("el-radio"),u=W("check"),k=W("el-icon"),g=W("node-content"),m=W("loading"),C=W("arrow-right");return h(),L("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:D([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(..._)=>e.handleHoverExpand&&e.handleHoverExpand(..._)),onFocus:a[3]||(a[3]=(..._)=>e.handleHoverExpand&&e.handleHoverExpand(..._)),onClick:a[4]||(a[4]=(..._)=>e.handleClick&&e.handleClick(..._))},[X(" prefix "),e.multiple?(h(),M(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(h(),M(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ge(()=>{},["stop"]))},{default:I(()=>[X(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Ct]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(h(),M(k,{key:2,class:D(e.ns.e("prefix"))},{default:I(()=>[Y(u)]),_:1},8,["class"])):X("v-if",!0),X(" content "),Y(g),X(" postfix "),e.isLeaf?X("v-if",!0):(h(),L(le,{key:3},[e.node.loading?(h(),M(k,{key:0,class:D([e.ns.is("loading"),e.ns.e("postfix")])},{default:I(()=>[Y(m)]),_:1},8,["class"])):(h(),M(k,{key:1,class:D(["arrow-right",e.ns.e("postfix")])},{default:I(()=>[Y(C)]),_:1},8,["class"]))],64))],42,kt)}var Et=$e(yt,[["render",Nt],["__file","node.vue"]]);const wt=pe({name:"ElCascaderMenu",components:{Loading:ta,ElIcon:ve,ElScrollbar:sa,ElCascaderNode:Et},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Ma(),s=ue("cascader-menu"),{t}=na(),o=Ia();let d=null,r=null;const v=la(Ae),u=T(null),k=y(()=>!e.nodes.length),g=y(()=>!v.initialLoaded),m=y(()=>`${o.value}-${e.index}`),C=R=>{d=R.target},_=R=>{if(!(!v.isHoverMenu||!d||!u.value))if(d.contains(R.target)){F();const P=a.vnode.el,{left:K}=P.getBoundingClientRect(),{offsetWidth:z,offsetHeight:J}=P,B=R.clientX-K,N=d.offsetTop,A=N+d.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${B} ${N} L${z} 0 V${N} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${B} ${A} L${z} ${J} V${A} Z" />
        `}else r||(r=window.setTimeout(x,v.config.hoverThreshold))},F=()=>{r&&(clearTimeout(r),r=null)},x=()=>{u.value&&(u.value.innerHTML="",F())};return{ns:s,panel:v,hoverZone:u,isEmpty:k,isLoading:g,menuId:m,t,handleExpand:C,handleMouseMove:_,clearHoverZone:x}}});function St(e,a,s,t,o,d){const r=W("el-cascader-node"),v=W("loading"),u=W("el-icon"),k=W("el-scrollbar");return h(),M(k,{key:e.menuId,tag:"ul",role:"menu",class:D(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:I(()=>{var g;return[(h(!0),L(le,null,ce(e.nodes,m=>(h(),M(r,{key:m.uid,node:m,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(h(),L("div",{key:0,class:D(e.ns.e("empty-text"))},[Y(u,{size:"14",class:D(e.ns.is("loading"))},{default:I(()=>[Y(v)]),_:1},8,["class"]),oa(" "+ae(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(h(),L("div",{key:1,class:D(e.ns.e("empty-text"))},ae(e.t("el.cascader.noData")),3)):(g=e.panel)!=null&&g.isHoverMenu?(h(),L("svg",{key:2,ref:"hoverZone",class:D(e.ns.e("hover-zone"))},null,2)):X("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var $t=$e(wt,[["render",St],["__file","menu.vue"]]);let Tt=0;const Vt=e=>{const a=[e];let{parent:s}=e;for(;s;)a.unshift(s),s=s.parent;return a};class de{constructor(a,s,t,o=!1){this.data=a,this.config=s,this.parent=t,this.root=o,this.uid=Tt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:d,label:r,children:v}=s,u=a[v],k=Vt(this);this.level=o?0:t?t.level+1:1,this.value=a[d],this.label=a[r],this.pathNodes=k,this.pathValues=k.map(g=>g.value),this.pathLabels=k.map(g=>g.label),this.childrenData=u,this.children=(u||[]).map(g=>new de(g,s,this)),this.loaded=!s.lazy||this.isLeaf||!ze(u)}get isDisabled(){const{data:a,parent:s,config:t}=this,{disabled:o,checkStrictly:d}=t;return(Ue(o)?o(a,this):!!a[o])||!d&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:a,config:s,childrenData:t,loaded:o}=this,{lazy:d,leaf:r}=s,v=Ue(r)?r(a,this):a[r];return xa(v)?d&&!o?!1:!(Array.isArray(t)&&t.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:s,children:t}=this,o=new de(a,this.config,this);return Array.isArray(s)?s.push(a):this.childrenData=[a],t.push(o),o}calcText(a,s){const t=a?this.pathLabels.join(s):this.label;return this.text=t,t}broadcast(a,...s){const t=`onParent${je(a)}`;this.children.forEach(o=>{o&&(o.broadcast(a,...s),o[t]&&o[t](...s))})}emit(a,...s){const{parent:t}=this,o=`onChild${je(a)}`;t&&(t[o]&&t[o](...s),t.emit(a,...s))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,s=a.filter(o=>!o.isDisabled),t=s.length?s.every(o=>o.checked):!1;this.setCheckState(t)}setCheckState(a){const s=this.children.length,t=this.children.reduce((o,d)=>{const r=d.checked?1:d.indeterminate?.5:0;return o+r},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&a,this.indeterminate=this.loaded&&t!==s&&t>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:s,multiple:t}=this.config;s||!t?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const Fe=(e,a)=>e.reduce((s,t)=>(t.isLeaf?s.push(t):(!a&&s.push(t),s=s.concat(Fe(t.children,a))),s),[]);class Ge{constructor(a,s){this.config=s;const t=(a||[]).map(o=>new de(o,this.config));this.nodes=t,this.allNodes=Fe(t,!1),this.leafNodes=Fe(t,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,s){const t=s?s.appendChild(a):new de(a,this.config);s||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(a,s){a.forEach(t=>this.appendNode(t,s))}getNodeByValue(a,s=!1){return!a&&a!==0?null:this.getFlattedNodes(s).find(o=>me(o.value,a)||me(o.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:t,level:o})=>me(a.value,t)&&a.level===o)||null}}const pa=ia({modelValue:{type:be([Number,String,Array])},options:{type:be(Array),default:()=>[]},props:{type:be(Object),default:()=>({})}}),Dt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:za,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Pt=e=>y(()=>({...Dt,...e.props})),Qe=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},Lt=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Ba(e)&&e.click()},_t=(e,a)=>{const s=a.slice(0),t=s.map(d=>d.uid),o=e.reduce((d,r)=>{const v=t.indexOf(r.uid);return v>-1&&(d.push(r),s.splice(v,1),t.splice(v,1)),d},[]);return o.push(...s),o},It=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:$t},props:{...pa,border:{type:Boolean,default:!0},renderLabel:Function},emits:[we,Se,"close","expand-change"],setup(e,{emit:a,slots:s}){let t=!1;const o=ue("cascader"),d=Pt(e);let r=null;const v=T(!0),u=T([]),k=T(null),g=T([]),m=T(null),C=T([]),_=y(()=>d.value.expandTrigger==="hover"),F=y(()=>e.renderLabel||s.default),x=()=>{const{options:c}=e,b=d.value;t=!1,r=new Ge(c,b),g.value=[r.getNodes()],b.lazy&&ze(e.options)?(v.value=!1,R(void 0,f=>{f&&(r=new Ge(f,b),g.value=[r.getNodes()]),v.value=!0,H(!1,!0)})):H(!1,!0)},R=(c,b)=>{const f=d.value;c=c||new de({},f,void 0,!0),c.loading=!0;const w=$=>{const S=c,U=S.root?null:S;$&&(r==null||r.appendNodes($,U)),S.loading=!1,S.loaded=!0,S.childrenData=S.childrenData||[],b&&b($)};f.lazyLoad(c,w)},P=(c,b)=>{var f;const{level:w}=c,$=g.value.slice(0,w);let S;c.isLeaf?S=c.pathNodes[w-2]:(S=c,$.push(c.children)),((f=m.value)==null?void 0:f.uid)!==(S==null?void 0:S.uid)&&(m.value=c,g.value=$,!b&&a("expand-change",(c==null?void 0:c.pathValues)||[]))},K=(c,b,f=!0)=>{const{checkStrictly:w,multiple:$}=d.value,S=C.value[0];t=!0,!$&&(S==null||S.doCheck(!1)),c.doCheck(b),A(),f&&!$&&!w&&a("close"),!f&&!$&&!w&&z(c)},z=c=>{c&&(c=c.parent,z(c),c&&P(c))},J=c=>r==null?void 0:r.getFlattedNodes(c),B=c=>{var b;return(b=J(c))==null?void 0:b.filter(f=>f.checked!==!1)},N=()=>{C.value.forEach(c=>c.doCheck(!1)),A(),g.value=g.value.slice(0,1),m.value=null,a("expand-change",[])},A=()=>{var c;const{checkStrictly:b,multiple:f}=d.value,w=C.value,$=B(!b),S=_t(w,$),U=S.map(V=>V.valueByOption);C.value=S,k.value=f?U:(c=U[0])!=null?c:null},H=(c=!1,b=!1)=>{const{modelValue:f}=e,{lazy:w,multiple:$,checkStrictly:S}=d.value,U=!S;if(!(!v.value||t||!b&&me(f,k.value)))if(w&&!c){const se=Ye(mt(Je(f))).map(j=>r==null?void 0:r.getNodeByValue(j)).filter(j=>!!j&&!j.loaded&&!j.loading);se.length?se.forEach(j=>{R(j,()=>H(!1,b))}):H(!0,b)}else{const V=$?Je(f):[f],se=Ye(V.map(j=>r==null?void 0:r.getNodeByValue(j,U)));Z(se,b),k.value=da(f)}},Z=(c,b=!0)=>{const{checkStrictly:f}=d.value,w=C.value,$=c.filter(V=>!!V&&(f||V.isLeaf)),S=r==null?void 0:r.getSameNode(m.value),U=b&&S||$[0];U?U.pathNodes.forEach(V=>P(V,!0)):m.value=null,w.forEach(V=>V.doCheck(!1)),We($).forEach(V=>V.doCheck(!0)),C.value=$,ne(oe)},oe=()=>{ca&&u.value.forEach(c=>{const b=c==null?void 0:c.$el;if(b){const f=b.querySelector(`.${o.namespace.value}-scrollbar__wrap`),w=b.querySelector(`.${o.b("node")}.${o.is("active")}`)||b.querySelector(`.${o.b("node")}.in-active-path`);Ha(f,w)}})},he=c=>{const b=c.target,{code:f}=c;switch(f){case O.up:case O.down:{c.preventDefault();const w=f===O.up?-1:1;Ce(ua(b,w,`.${o.b("node")}[tabindex="-1"]`));break}case O.left:{c.preventDefault();const w=u.value[Qe(b)-1],$=w==null?void 0:w.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);Ce($);break}case O.right:{c.preventDefault();const w=u.value[Qe(b)+1],$=w==null?void 0:w.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);Ce($);break}case O.enter:Lt(b);break}};return Fa(Ae,We({config:d,expandingNode:m,checkedNodes:C,isHoverMenu:_,initialLoaded:v,renderLabelFn:F,lazyLoad:R,expandNode:P,handleCheckChange:K})),te([d,()=>e.options],x,{deep:!0,immediate:!0}),te(()=>e.modelValue,()=>{t=!1,H()},{deep:!0}),te(()=>k.value,c=>{me(c,e.modelValue)||(a(we,c),a(Se,c))}),Aa(()=>u.value=[]),ra(()=>!ze(e.modelValue)&&H()),{ns:o,menuList:u,menus:g,checkedNodes:C,handleKeyDown:he,handleCheckChange:K,getFlattedNodes:J,getCheckedNodes:B,clearCheckedNodes:N,calculateCheckedValue:A,scrollToExpandingNode:oe}}});function Mt(e,a,s,t,o,d){const r=W("el-cascader-menu");return h(),L("div",{class:D([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...v)=>e.handleKeyDown&&e.handleKeyDown(...v))},[(h(!0),L(le,null,ce(e.menus,(v,u)=>(h(),M(r,{key:u,ref_for:!0,ref:k=>e.menuList[u]=k,index:u,nodes:[...v]},null,8,["index","nodes"]))),128))],34)}var Ne=$e(It,[["render",Mt],["__file","index.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const xt=Ne,zt=ia({...pa,size:Ra,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:be(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:be(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Oa.teleported,tagType:{...Ka.type,default:"info"},validateEvent:{type:Boolean,default:!0},...qa}),Bt={[we]:e=>!0,[Se]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ua(e),expandChange:e=>!!e,removeTag:e=>!!e},Ft={key:0},At=["placeholder","onKeydown"],Ht=["onClick"],Rt="ElCascader",Ot=pe({name:Rt}),Kt=pe({...Ot,props:zt,emits:Bt,setup(e,{expose:a,emit:s}){const t=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:l})=>{const{modifiersData:n,placement:i}=l;["right","left","bottom","top"].includes(i)||(n.arrow.x=35)},requires:["arrow"]}]},d=ja();let r=0,v=0;const u=ue("cascader"),k=ue("input"),{t:g}=na(),{form:m,formItem:C}=Wa(),{valueOnClear:_}=Za(t),F=T(null),x=T(null),R=T(null),P=T(null),K=T(null),z=T(!1),J=T(!1),B=T(!1),N=T(!1),A=T(""),H=T(""),Z=T([]),oe=T([]),he=T([]),c=T(!1),b=y(()=>d.style),f=y(()=>t.disabled||(m==null?void 0:m.disabled)),w=y(()=>t.placeholder||g("el.cascader.placeholder")),$=y(()=>H.value||Z.value.length>0||c.value?"":w.value),S=Xa(),U=y(()=>["small"].includes(S.value)?"small":"default"),V=y(()=>!!t.props.multiple),se=y(()=>!t.filterable||V.value),j=y(()=>V.value?H.value:A.value),ye=y(()=>{var l;return((l=P.value)==null?void 0:l.checkedNodes)||[]}),ha=y(()=>!t.clearable||f.value||B.value||!J.value?!1:!!ye.value.length),Te=y(()=>{const{showAllLevels:l,separator:n}=t,i=ye.value;return i.length?V.value?"":i[0].calcText(l,n):""}),fa=y(()=>(C==null?void 0:C.validateState)||""),Ve=y({get(){return da(t.modelValue)},set(l){const n=l||_.value;s(we,n),s(Se,n),t.validateEvent&&(C==null||C.validate("change").catch(i=>Ya()))}}),va=y(()=>[u.b(),u.m(S.value),u.is("disabled",f.value),d.class]),ga=y(()=>[k.e("icon"),"icon-arrow-down",u.is("reverse",z.value)]),ma=y(()=>u.is("focus",z.value||N.value)),He=y(()=>{var l,n;return(n=(l=F.value)==null?void 0:l.popperRef)==null?void 0:n.contentRef}),q=l=>{var n,i,E;f.value||(l=l!=null?l:!z.value,l!==z.value&&(z.value=l,(i=(n=x.value)==null?void 0:n.input)==null||i.setAttribute("aria-expanded",`${l}`),l?(fe(),ne((E=P.value)==null?void 0:E.scrollToExpandingNode)):t.filterable&&Ie(),s("visibleChange",l)))},fe=()=>{ne(()=>{var l;(l=F.value)==null||l.updatePopper()})},De=()=>{B.value=!1},Pe=l=>{const{showAllLevels:n,separator:i}=t;return{node:l,key:l.uid,text:l.calcText(n,i),hitState:!1,closable:!f.value&&!l.isDisabled,isCollapseTag:!1}},Le=l=>{var n;const i=l.node;i.doCheck(!1),(n=P.value)==null||n.calculateCheckedValue(),s("removeTag",i.valueByOption)},ba=()=>{if(!V.value)return;const l=ye.value,n=[],i=[];if(l.forEach(E=>i.push(Pe(E))),oe.value=i,l.length){l.slice(0,t.maxCollapseTags).forEach(G=>n.push(Pe(G)));const E=l.slice(t.maxCollapseTags),Q=E.length;Q&&(t.collapseTags?n.push({key:-1,text:`+ ${Q}`,closable:!1,isCollapseTag:!0}):E.forEach(G=>n.push(Pe(G))))}Z.value=n},Re=()=>{var l,n;const{filterMethod:i,showAllLevels:E,separator:Q}=t,G=(n=(l=P.value)==null?void 0:l.getFlattedNodes(!t.props.checkStrictly))==null?void 0:n.filter(ee=>ee.isDisabled?!1:(ee.calcText(E,Q),i(ee,j.value)));V.value&&(Z.value.forEach(ee=>{ee.hitState=!1}),oe.value.forEach(ee=>{ee.hitState=!1})),B.value=!0,he.value=G,fe()},ya=()=>{var l;let n;B.value&&K.value?n=K.value.$el.querySelector(`.${u.e("suggestion-item")}`):n=(l=P.value)==null?void 0:l.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),n&&(n.focus(),!B.value&&n.click())},_e=()=>{var l,n;const i=(l=x.value)==null?void 0:l.input,E=R.value,Q=(n=K.value)==null?void 0:n.$el;if(!(!ca||!i)){if(Q){const G=Q.querySelector(`.${u.e("suggestion-list")}`);G.style.minWidth=`${i.offsetWidth}px`}if(E){const{offsetHeight:G}=E,ee=Z.value.length>0?`${Math.max(G+6,r)}px`:`${r}px`;i.style.height=ee,fe()}}},ka=l=>{var n;return(n=P.value)==null?void 0:n.getCheckedNodes(l)},Ca=l=>{fe(),s("expandChange",l)},ie=l=>{var n;const i=(n=l.target)==null?void 0:n.value;if(l.type==="compositionend")c.value=!1,ne(()=>Me(i));else{const E=i[i.length-1]||"";c.value=!ct(E)}},Na=l=>{if(!c.value)switch(l.code){case O.enter:q();break;case O.down:q(!0),ne(ya),l.preventDefault();break;case O.esc:z.value===!0&&(l.preventDefault(),l.stopPropagation(),q(!1));break;case O.tab:q(!1);break}},Ea=()=>{var l;(l=P.value)==null||l.clearCheckedNodes(),!z.value&&t.filterable&&Ie(),q(!1)},Ie=()=>{const{value:l}=Te;A.value=l,H.value=l},wa=l=>{var n,i;const{checked:E}=l;V.value?(n=P.value)==null||n.handleCheckChange(l,!E,!1):(!E&&((i=P.value)==null||i.handleCheckChange(l,!0,!1)),q(!1))},Sa=l=>{const n=l.target,{code:i}=l;switch(i){case O.up:case O.down:{const E=i===O.up?-1:1;Ce(ua(n,E,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:n.click();break}},$a=()=>{const l=Z.value,n=l[l.length-1];v=H.value?0:v+1,!(!n||!v||t.collapseTags&&l.length>1)&&(n.hitState?Le(n):n.hitState=!0)},Oe=l=>{const n=l.target,i=u.e("search-input");n.className===i&&(N.value=!0),s("focus",l)},Ke=l=>{N.value=!1,s("blur",l)},Ta=Ja(()=>{const{value:l}=j;if(!l)return;const n=t.beforeFilter(l);Ga(n)?n.then(Re).catch(()=>{}):n!==!1?Re():De()},t.debounce),Me=(l,n)=>{!z.value&&q(!0),!(n!=null&&n.isComposing)&&(l?Ta():De())},qe=l=>Number.parseFloat(ut(k.cssVarName("input-height"),l).value)-2;return te(B,fe),te([ye,f],ba),te(Z,()=>{ne(()=>_e())}),te(S,async()=>{await ne();const l=x.value.input;r=qe(l)||r,_e()}),te(Te,Ie,{immediate:!0}),ra(()=>{const l=x.value.input,n=qe(l);r=l.offsetHeight||n,Qa(l,_e)}),a({getCheckedNodes:ka,cascaderPanelRef:P,togglePopperVisible:q,contentRef:He}),(l,n)=>(h(),M(p(Ze),{ref_key:"tooltipRef",ref:F,visible:z.value,teleported:l.teleported,"popper-class":[p(u).e("dropdown"),l.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${p(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:De},{default:I(()=>[ke((h(),L("div",{class:D(p(va)),style:et(p(b)),onClick:n[5]||(n[5]=()=>q(p(se)?void 0:!0)),onKeydown:Na,onMouseenter:n[6]||(n[6]=i=>J.value=!0),onMouseleave:n[7]||(n[7]=i=>J.value=!1)},[Y(p(at),{ref_key:"input",ref:x,modelValue:A.value,"onUpdate:modelValue":n[1]||(n[1]=i=>A.value=i),placeholder:p($),readonly:p(se),disabled:p(f),"validate-event":!1,size:p(S),class:D(p(ma)),tabindex:p(V)&&l.filterable&&!p(f)?-1:void 0,onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:Oe,onBlur:Ke,onInput:Me},{suffix:I(()=>[p(ha)?(h(),M(p(ve),{key:"clear",class:D([p(k).e("icon"),"icon-circle-close"]),onClick:ge(Ea,["stop"])},{default:I(()=>[Y(p(tt))]),_:1},8,["class","onClick"])):(h(),M(p(ve),{key:"arrow-down",class:D(p(ga)),onClick:n[0]||(n[0]=ge(i=>q(),["stop"]))},{default:I(()=>[Y(p(lt))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),p(V)?(h(),L("div",{key:0,ref_key:"tagWrapper",ref:R,class:D([p(u).e("tags"),p(u).is("validate",!!p(fa))])},[(h(!0),L(le,null,ce(Z.value,i=>(h(),M(p(Be),{key:i.key,type:l.tagType,size:p(U),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:E=>Le(i)},{default:I(()=>[i.isCollapseTag===!1?(h(),L("span",Ft,ae(i.text),1)):(h(),M(p(Ze),{key:1,disabled:z.value||!l.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:I(()=>[re("span",null,ae(i.text),1)]),content:I(()=>[re("div",{class:D(p(u).e("collapse-tags"))},[(h(!0),L(le,null,ce(oe.value.slice(l.maxCollapseTags),(E,Q)=>(h(),L("div",{key:Q,class:D(p(u).e("collapse-tag"))},[(h(),M(p(Be),{key:E.key,class:"in-tooltip",type:l.tagType,size:p(U),hit:E.hitState,closable:E.closable,"disable-transitions":"",onClose:G=>Le(E)},{default:I(()=>[re("span",null,ae(E.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),l.filterable&&!p(f)?ke((h(),L("input",{key:0,"onUpdate:modelValue":n[2]||(n[2]=i=>H.value=i),type:"text",class:D(p(u).e("search-input")),placeholder:p(Te)?"":p(w),onInput:n[3]||(n[3]=i=>Me(H.value,i)),onClick:n[4]||(n[4]=ge(i=>q(!0),["stop"])),onKeydown:st($a,["delete"]),onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:Oe,onBlur:Ke},null,42,At)),[[nt,H.value]]):X("v-if",!0)],2)):X("v-if",!0)],38)),[[p(ot),()=>q(!1),p(He)]])]),content:I(()=>[ke(Y(p(xt),{ref_key:"cascaderPanelRef",ref:P,modelValue:p(Ve),"onUpdate:modelValue":n[8]||(n[8]=i=>it(Ve)?Ve.value=i:null),options:l.options,props:t.props,border:!1,"render-label":l.$slots.default,onExpandChange:Ca,onClose:n[9]||(n[9]=i=>l.$nextTick(()=>q(!1)))},null,8,["modelValue","options","props","render-label"]),[[Xe,!B.value]]),l.filterable?ke((h(),M(p(sa),{key:0,ref_key:"suggestionPanel",ref:K,tag:"ul",class:D(p(u).e("suggestion-panel")),"view-class":p(u).e("suggestion-list"),onKeydown:Sa},{default:I(()=>[he.value.length?(h(!0),L(le,{key:0},ce(he.value,i=>(h(),L("li",{key:i.uid,class:D([p(u).e("suggestion-item"),p(u).is("checked",i.checked)]),tabindex:-1,onClick:E=>wa(i)},[re("span",null,ae(i.text),1),i.checked?(h(),M(p(ve),{key:0},{default:I(()=>[Y(p(aa))]),_:1})):X("v-if",!0)],10,Ht))),128)):rt(l.$slots,"empty",{key:1},()=>[re("li",{class:D(p(u).e("empty-text"))},ae(p(g)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Xe,B.value]]):X("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ee=$e(Kt,[["__file","cascader.vue"]]);Ee.install=e=>{e.component(Ee.name,Ee)};const qt=Ee,Ut=qt,jt="/",Wt=dt("regions",{state:()=>({regionsData:null}),actions:{setRegionsData(e){this.regionsData=e}}});function Zt(){const e=Wt(),{regionsData:a}=pt(e);return a.value==null&&(e.setRegionsData([]),Xt().then(s=>{e.setRegionsData(s)}).catch(s=>{ht.error(s.message)})),a}async function Xt(){var a;return(a=(await ft.get(jt+"json/regions-data.json",{baseURL:""})).data)!=null?a:[]}function xe(e,a){return a==="label"?e.map(s=>{const t={label:s.label,value:s.label};return s.children&&(t.children=s.children.map(o=>{const d={label:o.label,value:o.label};return o.children&&(d.children=o.children.map(r=>({label:r.label,value:r.label}))),d})),t}):e}function Yt(e,a,s){return xe(a==="provinceCity"?e.map(t=>{const o={label:t.label,value:t.value};return t.children&&(o.children=t.children.map(d=>({label:d.label,value:d.value}))),o}):a==="province"?e.map(t=>({label:t.label,value:t.value})):e,s)}function ea(e,a){const s=[];return e&&e.length&&a&&a.forEach(t=>{t.value===e[0]&&(s.push(t.label),t.children&&t.children.length&&t.children.forEach(o=>{o.value===e[1]&&s.push(o.label),o.children&&o.children.length&&o.children.forEach(d=>{d.value===e[2]&&s.push(d.label)})}))}),s}const Jt={key:0},Gt={name:"RegionsSelect"},tl=Object.assign(Gt,{props:{modelValue:Array,options:Array,valueField:String,type:String,component:String,placeholder:String,disabled:Boolean,clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},cascaderProps:Object,collapseTags:{type:Boolean,default:!0},maxCollapseTags:{type:Number,default:5},collapseTagsTooltip:Boolean,size:String},emits:["update:modelValue"],setup(e,{expose:a,emit:s}){const t=e,o=s,d=Zt(),r=T(null),v=y(()=>{var m,C;const g=(C=(m=t.options)!=null?m:d.value)!=null?C:[];return Yt(g,t.type,t.valueField)}),u=y(()=>{const g=" / ",m=t.modelValue;if(m&&m.length&&Array.isArray(m[0])){const _=[];return m.forEach(F=>{const x=ea(F,v.value);_.push(x.join(g))}),_}return ea(m,v.value).join(g)}),k=g=>{o("update:modelValue",g)};return a({cascaderRef:r,getCheckedNodes:g=>{var m,C;return(C=(m=r.value)==null?void 0:m.getCheckedNodes)==null?void 0:C.call(m,!!g)}}),(g,m)=>{const C=Be,_=vt,F=Ut;return e.component==="text"?(h(),L(le,{key:0},[typeof u.value=="string"?(h(),L("span",Jt,ae(u.value),1)):(h(),M(_,{key:1,wrap:!0},{default:I(()=>[(h(!0),L(le,null,ce(u.value,x=>(h(),M(C,{key:x,"disable-transitions":!0,size:"small",type:"info"},{default:I(()=>[oa(ae(x),1)]),_:2},1024))),128))]),_:1}))],64)):(h(),M(F,{key:1,ref_key:"cascaderRef",ref:r,size:e.size,disabled:e.disabled,clearable:e.clearable,"model-value":e.modelValue,options:v.value,filterable:e.filterable,placeholder:e.placeholder,props:e.cascaderProps,"popper-class":"ele-popper-higher","collapse-tags":e.collapseTags,"max-collapse-tags":e.maxCollapseTags,"collapse-tags-tooltip":e.collapseTagsTooltip,class:"ele-fluid","onUpdate:modelValue":k},null,8,["size","disabled","clearable","model-value","options","filterable","placeholder","props","collapse-tags","max-collapse-tags","collapse-tags-tooltip"]))}}});export{Ut as E,tl as _};
