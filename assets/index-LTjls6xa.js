import{i as ce}from"./index-p1XoTQj1.js";import{b4 as fe,r as x,o as p,c as k,w as l,b as t,cM as be,aF as D,u as r,a7 as U,e as f,l as F,F as j,d as s,bf as ve,bd as Z,aH as ee,aG as _e,aB as P,g as te,ax as le,aK as ge,J as xe,b5 as J,h as ae,c3 as ye,_ as ke,fA as Ve,aM as Ee,aL as we,fB as Ce,a as ze,H as De,a5 as Q,t as z,bD as $e,as as Ne,bq as he,at as Be,m as Se,V as X,aV as Te,E as M,au as Ie,aS as Me,j as Ue,ag as Fe,k as Ke}from"./index-BF2fBoPb.js";import{i as oe}from"./index-Cjr4ibGp.js";import{i as Oe}from"./index-DG03PXF-.js";import"./index-CcYpqHDV.js";import"./index-B-b3I1wI.js";import"./index-BnIMXyIx.js";import"./virtual-list-B6G0p9cv.js";import"./index-BWYZqqjh.js";import"./index-DuliLu7F.js";import{i as Re}from"./index-CdRmj7H0.js";import{i as We}from"./index-B9tUNhN6.js";import{E as He,a as je}from"./col-DirwGu8S.js";import{E as Pe}from"./date-picker-BzLnEAo6.js";import{p as Ae,l as Le}from"./index-AC-OHBhs.js";import"./isArrayLikeObject-j402kJv_.js";import"./vuedraggable.umd-DLnsjw3h.js";import"./arrays-6TrVLtTe.js";import"./index-DOwINDGR.js";const Ye={__name:"search-form",emits:["search"],setup(A,{emit:u}){const $=u,[i,C]=fe({username:"",organizationName:"",phone:"",email:""}),c=x(["",""]),b=x(!1),V=()=>{var m;const[E,n]=(m=c.value)!=null?m:[];$("search",{...i,createTimeStart:E?`${E} 00:00:00`:"",createTimeEnd:n?`${n} 23:59:59`:""})},v=()=>{C(),c.value=["",""],V()},y=()=>{b.value=!b.value};return(E,n)=>{const m=ee,d=_e,w=He,K=Pe,B=P,N=te,O=le,S=je,R=ge,W=oe;return p(),k(W,{"body-style":{paddingBottom:"2px"}},{default:l(()=>[t(R,{"label-width":"72px",onKeyup:be(V,["enter"]),onSubmit:n[5]||(n[5]=D(()=>{},["prevent"]))},{default:l(()=>[t(S,{gutter:8},{default:l(()=>[t(w,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{label:"用户账号"},{default:l(()=>[t(m,{clearable:"",modelValue:r(i).username,"onUpdate:modelValue":n[0]||(n[0]=_=>r(i).username=_),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),t(w,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{label:"组织机构"},{default:l(()=>[t(m,{clearable:"",modelValue:r(i).organizationName,"onUpdate:modelValue":n[1]||(n[1]=_=>r(i).organizationName=_),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),b.value?(p(),k(w,{key:0,lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{label:"手机号"},{default:l(()=>[t(m,{clearable:"",modelValue:r(i).phone,"onUpdate:modelValue":n[2]||(n[2]=_=>r(i).phone=_),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})):U("",!0),b.value?(p(),k(w,{key:1,lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{label:"邮箱"},{default:l(()=>[t(m,{clearable:"",modelValue:r(i).email,"onUpdate:modelValue":n[3]||(n[3]=_=>r(i).email=_),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})):U("",!0),b.value?(p(),k(w,{key:2,lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{label:"创建时间"},{default:l(()=>[t(K,{"unlink-panels":"",type:"daterange",modelValue:c.value,"onUpdate:modelValue":n[4]||(n[4]=_=>c.value=_),"range-separator":"-","value-format":"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"ele-fluid"},null,8,["modelValue"])]),_:1})]),_:1})):U("",!0),t(w,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[t(d,{"label-width":"16px"},{default:l(()=>[t(B,{type:"primary",onClick:V},{default:l(()=>n[6]||(n[6]=[f("查询")])),_:1}),t(B,{onClick:v},{default:l(()=>n[7]||(n[7]=[f("重置")])),_:1}),t(O,{type:"primary",underline:!1,onClick:y,style:{"margin-left":"12px"}},{default:l(()=>[b.value?(p(),F(j,{key:0},[n[8]||(n[8]=s("span",null,"收起",-1)),t(N,{style:{"vertical-align":"-1px"}},{default:l(()=>[t(r(ve))]),_:1})],64)):(p(),F(j,{key:1},[n[9]||(n[9]=s("span",null,"展开",-1)),t(N,{style:{"vertical-align":"-2px"}},{default:l(()=>[t(r(Z))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qe={style:{"margin-bottom":"12px"}},Ge={style:{"text-align":"right"}},Je=xe({__name:"nickname-filter",emits:["search"],setup(A,{emit:u}){const $=u,i=x(""),C=x(!1),c=()=>{C.value=!!i.value,$("search",i.value)},b=()=>{i.value="",C.value=!1,c()};return(V,v)=>{const y=ae,E=ee,n=P,m=ye;return p(),F("div",{onClick:v[1]||(v[1]=D(()=>{},["stop"]))},[t(m,{width:200,trigger:"click",placement:"bottom-end","popper-options":{modifiers:[{name:"offset",options:{offset:[24,4]}}]}},{reference:l(()=>[t(y,{type:C.value?"primary":"placeholder",icon:r(J),class:"demo-filter-icon"},null,8,["type","icon"])]),default:l(()=>[s("div",qe,[t(E,{size:"small",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=d=>i.value=d),placeholder:"请输入关键字",onChange:c},null,8,["modelValue"])]),s("div",Ge,[t(n,{size:"small",onClick:b},{default:l(()=>v[2]||(v[2]=[f("重置")])),_:1}),t(n,{size:"small",type:"primary",icon:r(J),class:"ele-btn-icon",onClick:c},{default:l(()=>v[3]||(v[3]=[f(" 搜索 ")])),_:1},8,["icon"])])]),_:1})])}}}),Qe=ke(Je,[["__scopeId","data-v-73f819b8"]]),Xe={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ze={style:{display:"flex","align-items":"center"}},et={style:{flex:"1",overflow:"hidden","text-overflow":"ellipsis"}},tt={style:{"text-align":"center"}},lt={style:{color:"red"}},at={name:"ListBasic"},Et=Object.assign(at,{setup(A){const{t:u}=Ve.useI18n(),{push:$}=Ee(),{removePageTab:i}=we(),[C]=Ce(["sex"]),c=x(null),b=x(""),V=ze({}),v=De(()=>[{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{columnKey:"avatar",prop:"avatar",label:u("list.basic.table.avatar"),width:100,align:"center",slot:"avatar"},{prop:"username",label:u("list.basic.table.username"),minWidth:110,sortable:"custom"},{prop:"nickname",label:u("list.basic.table.nickname"),minWidth:110,sortable:"custom",headerSlot:"nicknameHeader"},{columnKey:"roles",label:u("list.basic.table.roles"),minWidth:110,slot:"roles",hideInTable:!0,formatter:a=>a.roles.map(e=>e.roleName).join(",")},{prop:"organizationName",label:u("list.basic.table.organizationName"),minWidth:110,sortable:"custom"},{prop:"phone",label:u("list.basic.table.phone"),minWidth:110,sortable:"custom",hideInTable:!0},{prop:"email",label:u("list.basic.table.email"),minWidth:110,sortable:"custom",hideInTable:!0},{columnKey:"sex",prop:"sexName",label:u("list.basic.table.sexName"),width:110,align:"center",sortable:"custom",filters:C.value.map(a=>({text:a.dictDataName,value:a.dictDataCode})),filterMultiple:!1},{prop:"createTime",label:u("list.basic.table.createTime"),minWidth:110,sortable:"custom"},{prop:"status",label:u("list.basic.table.status"),width:110,sortable:"custom",align:"center",slot:"status",filters:[{text:"正常",value:"0"},{text:"冻结",value:"1"}],filterMultiple:!1,formatter:a=>a.status==0?"正常":"冻结"},{columnKey:"action",label:u("list.basic.table.action"),width:130,align:"center",showOverflowTooltip:!1,resizable:!1,slot:"action",fixed:"right",hideInPrint:!0,hideInExport:!0}]),y=x([]),E=x(null),n=x(!0),m=x(!0),d=x(!1),w=({pages:a,where:e,orders:g,filters:h})=>Ae({...e,...g,...h,...a}),K=()=>{X(()=>{var e,g;const a=[45,47,48];(g=(e=c.value)==null?void 0:e.setSelectedRowKeys)==null||g.call(e,a)})},B=a=>{Object.assign(V,a),_()},N=a=>{var e,g;(g=(e=c.value)==null?void 0:e.reload)==null||g.call(e,{page:1,where:a})},O=()=>{var a,e;(e=(a=c.value)==null?void 0:a.clearSelection)==null||e.call(a)},S=a=>{const e=a?`/list/basic/edit/${a.userId}`:"/list/basic/add";i({key:e}),X(()=>{$(e)})},R=a=>{Te.confirm(`确定要删除“${a.username}”吗?`,"系统提示",{type:"warning",draggable:!0}).then(()=>{M.success("点击了删除")}).catch(()=>{})},W=a=>{a==="del"?M.error("点击了批量删除"):a==="edit"?M.info({message:"点击了批量修改",plain:!0}):a==="disabled"&&M.info({message:"点击了批量禁用",plain:!0})},_=()=>{b.value?N({...V,nickname:b.value}):N(V)},ne=a=>{b.value=a,_()},L=({where:a,orders:e,filters:g})=>Le({...a,...e,...g});return(a,e)=>{const g=ae,h=le,se=We,Y=P,ie=te,re=Ie,H=Me,T=Ue,q=Fe,G=Re,de=Ke,ue=Oe,me=oe,pe=ce;return p(),k(pe,{"flex-table":d.value},{default:l(()=>[t(Ye,{onSearch:B}),t(me,{"flex-table":d.value,"body-style":{paddingBottom:"4px"},style:Q({minHeight:d.value?"380px":void 0,marginBottom:d.value?"0px":void 0})},{default:l(()=>[t(se,{"show-icon":"",closable:!1,style:Q({marginBottom:m.value?"12px":"4px"})},{title:l(()=>[e[9]||(e[9]=s("span",null,"已选择 ",-1)),t(g,{strong:"",type:"primary",tag:"span"},{default:l(()=>[f(z(y.value.length),1)]),_:1}),e[10]||(e[10]=s("span",null," 项数据 ",-1)),e[11]||(e[11]=s("span",null,"其中冻结状态的用户有 ",-1)),s("b",null,z(y.value.filter(o=>o.status===1).length)+" 个  ",1),t(h,{type:"primary",underline:!1,style:{"vertical-align":"0px"},onClick:O},{default:l(()=>e[8]||(e[8]=[f(" 清空 ")])),_:1})]),_:1},8,["style"]),t(ue,{ref_key:"tableRef",ref:c,"row-key":"userId",columns:v.value,datasource:w,current:E.value,"onUpdate:current":e[6]||(e[6]=o=>E.value=o),selections:y.value,"onUpdate:selections":e[7]||(e[7]=o=>y.value=o),"show-overflow-tooltip":!0,"export-config":{fileName:"基础列表数据",datasource:L},"print-config":{datasource:L},border:n.value,sticky:!d.value,toolbar:{theme:m.value?"default":"plain"},"default-sort":{prop:"createTime",order:"ascending"},"footer-style":{paddingBottom:"12px"},style:{"padding-bottom":"0"},onDone:K},{toolbar:l(()=>[t(Y,{type:"primary",icon:r($e),class:"ele-btn-icon",onClick:e[0]||(e[0]=o=>S())},{default:l(()=>e[12]||(e[12]=[f(" 新建 ")])),_:1},8,["icon"]),t(re,{disabled:!y.value.length,items:[{title:"批量修改",command:"edit",icon:r(Ne)},{title:"批量禁用",command:"disabled",icon:r(he)},{title:"批量删除",command:"del",icon:r(Be),danger:!0,divided:!0}],"icon-props":{size:15},placement:"bottom-start",style:{"margin-left":"12px"},onCommand:W},{default:l(()=>[t(Y,{disabled:!y.value.length,class:"ele-btn-icon"},{default:l(()=>[e[13]||(e[13]=s("span",null,"批量操作",-1)),t(ie,{size:12,style:{margin:"0 -4px 0 2px"}},{default:l(()=>[t(r(Z))]),_:1})]),_:1},8,["disabled"])]),_:1},8,["disabled","items"])]),tools:l(()=>[s("div",Xe,[e[14]||(e[14]=s("div",null,"边框 ",-1)),t(H,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),size:"small"},null,8,["modelValue"]),t(T,{direction:"vertical"}),e[15]||(e[15]=s("div",null,"表头背景 ",-1)),t(H,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),size:"small"},null,8,["modelValue"]),t(T,{direction:"vertical"}),e[16]||(e[16]=s("div",null,"高度铺满 ",-1)),t(H,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),size:"small"},null,8,["modelValue"]),t(T,{direction:"vertical"})])]),avatar:l(({row:o})=>[o.avatar?(p(),k(q,{key:0,src:o.avatar,size:32,onClick:e[4]||(e[4]=D(()=>{},["stop"])),style:{"vertical-align":"-8px"}},null,8,["src"])):(p(),k(q,{key:1,size:32,style:{background:"#1677ff","vertical-align":"-8px"},onClick:e[5]||(e[5]=D(()=>{},["stop"]))},{default:l(()=>[f(z(o.nickname&&o.nickname.length>2?o.nickname.substring(o.nickname.length-2):o.nickname),1)]),_:2},1024))]),status:l(({row:o})=>[o.status===0?(p(),k(G,{key:0,text:"正常",size:"8px"})):o.status===1?(p(),k(G,{key:1,text:"冻结",type:"danger",ripple:!1,size:"8px"})):U("",!0)]),roles:l(({row:o})=>[(p(!0),F(j,null,Se(o.roles,I=>(p(),k(de,{key:I.roleId,size:"small","disable-transitions":!0,style:{"margin-right":"6px"}},{default:l(()=>[f(z(I.roleName),1)]),_:2},1024))),128))]),action:l(({row:o})=>[t(h,{type:"primary",underline:!1,onClick:D(I=>S(o),["stop"])},{default:l(()=>e[17]||(e[17]=[f(" 修改 ")])),_:2},1032,["onClick"]),t(T,{direction:"vertical"}),t(h,{type:"danger",underline:!1,onClick:D(I=>R(o),["stop"])},{default:l(()=>e[18]||(e[18]=[f(" 删除 ")])),_:2},1032,["onClick"])]),nicknameHeader:l(({column:o})=>[s("div",Ze,[s("div",et,z(o.label),1),t(Qe,{onSearch:ne})])]),printTop:l(()=>e[19]||(e[19]=[s("h2",{style:{"text-align":"center"}},"还可以自定义打印的顶部区域",-1)])),printBottom:l(({data:o})=>[e[22]||(e[22]=s("h2",{style:{"text-align":"center"}},"还可以自定义打印的底部区域",-1)),s("div",tt,[e[20]||(e[20]=f(" 共打印了 ")),s("b",lt,z(o.length),1),e[21]||(e[21]=f(" 条数据 "))])]),_:1},8,["columns","current","selections","export-config","print-config","border","sticky","toolbar"])]),_:1},8,["flex-table","style"])]),_:1},8,["flex-table"])}}});export{Et as default};
