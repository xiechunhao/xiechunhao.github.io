import{D as C,_ as r,$ as F,a0 as A,a1 as u,a2 as m,a3 as d,a4 as f,M as h,V as _,B as E}from"./chunks/reproj.50e0d4ab.js";import{A as g,M}from"./chunks/index.47495de9.js";import{T as P}from"./chunks/TileImage.36abd4f0.js";import{X as T}from"./chunks/XYZ.eaf43adc.js";import{d as q,h as v,p as B,a3 as j,o as y,c as i,z as p,_ as w,G as O,a as S,O as x}from"./chunks/framework.166469be.js";const e="projection",D="coordinateFormat";class b extends C{constructor(s){s=s||{};const n=document.createElement("div");n.className=s.className!==void 0?s.className:"ol-mouse-position",super({element:n,render:s.render,target:s.target}),this.on,this.once,this.un,this.addChangeListener(e,this.handleProjectionChanged_),s.coordinateFormat&&this.setCoordinateFormat(s.coordinateFormat),s.projection&&this.setProjection(s.projection),this.renderOnMouseOut_=s.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?s.placeholder:"&#160;",this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=s.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(D)}getProjection(){return this.get(e)}handleMouseMove(s){const n=this.getMap();this.updateHTML_(n.getEventPixel(s))}handleMouseOut(s){this.updateHTML_(null)}setMap(s){if(super.setMap(s),s){const n=s.getViewport();this.listenerKeys.push(r(n,F.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(r(n,F.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(s){this.set(D,s)}setProjection(s){this.set(e,A(s))}updateHTML_(s){let n=this.placeholder_;if(s&&this.mapProjection_){if(!this.transform_){const l=this.getProjection();l?this.transform_=u(this.mapProjection_,l):this.transform_=m}const a=this.getMap().getCoordinateFromPixelInternal(s);if(a){if(this.transform_(a,a),this.wrapX_){const o=this.getProjection()||this.mapProjection_;d(a,o)}const l=this.getCoordinateFormat();l?n=l(a):n=a.toString()}}(!this.renderedHTML_||n!==this.renderedHTML_)&&(this.element.innerHTML=n,this.renderedHTML_=n)}render(s){const n=s.frameState;n?this.mapProjection_!=n.viewState.projection&&(this.mapProjection_=n.viewState.projection,this.transform_=null):this.mapProjection_=null}}const L=b,N={id:"map"},I=q({__name:"index",setup(c){const s=new P({source:new T({attributions:g,url:M,maxZoom:20})}),n=v(null);let t=null;const a=o=>new L({coordinateFormat:f(4),projection:"EPSG:4326",className:"custom-mouse-position",target:o,undefinedHTML:"&nbsp;"}),l=o=>{t=new h({target:"map",layers:[s],view:new _({projection:"EPSG:4326",center:[0,0],zoom:5}),controls:E({attributionOptions:{collapsible:!0}}).extend([o])})};return B(()=>{n.value!==null&&l(a(n.value))}),j(()=>{t&&(t.dispose(),t=null)}),(o,k)=>(y(),i("div",N,[p("div",{id:"mouse-position",ref_key:"mouse",ref:n},null,512)]))}});const H=w(I,[["__scopeId","data-v-e7da45d1"]]),R=p("h1",{id:"鼠标位置",tabindex:"-1"},[S("鼠标位置 "),p("a",{class:"header-anchor",href:"#鼠标位置","aria-label":'Permalink to "鼠标位置"'},"​")],-1),V=p("div",{class:"tip custom-block"},[p("p",{class:"custom-block-title"},"TIP"),p("p",null,"鼠标滑过地图显示坐标位置。")],-1),X=x("",2),J=JSON.parse('{"title":"鼠标位置","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/map-controls/mouse-position/index.md","filePath":"open-layers/map-controls/mouse-position/index.md"}'),U={name:"open-layers/map-controls/mouse-position/index.md"},K=Object.assign(U,{setup(c){return(s,n)=>(y(),i("div",null,[R,V,O(H),X]))}});export{J as __pageData,K as default};
