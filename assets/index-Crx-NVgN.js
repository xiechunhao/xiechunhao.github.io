import{L as R,g as h,ao as w,f7 as $,i as B,b3 as z,r as f,a0 as H,K as N,aj as v,o as r,m as A,e as k,a2 as D,a6 as a,c as s,w as O,a7 as S,b1 as T,a$ as C,b as F,a5 as L}from"./index-C4BxmZrN.js";const V={text:String,innerStyle:Object,customStyle:Object,icon:[String,Object,Function],iconProps:Object,iconStyle:Object,copiedIcon:[String,Object,Function],copiedIconProps:Object,copiedIconStyle:Object,tooltip:{type:[Boolean,Object],default:!0},resetAfter:{type:Number,default:1e3},locale:Object},K={copy:e=>!0},M=R({name:"EleCopyable",components:{ElIcon:h,CopyOutlined:w,CheckOutlined:$,EleTooltip:B},props:V,emits:K,setup(e,{emit:n}){const{lang:c}=z("copyable",e),o={timer:null},p=f(null),d=f(null),m=f(),i=f(!1),u=()=>{d.value&&d.value.updatePopper()},b=()=>{var l;return e.text?e.text:((l=p.value)==null?void 0:l.innerText)||""},y=l=>{var g;return typeof((g=navigator==null?void 0:navigator.clipboard)==null?void 0:g.writeText)=="function"?navigator.clipboard.writeText(l):new Promise((I,P)=>{const t=document.createElement("textarea");t.value=l,t.style.position="fixed",t.style.top="-200px",t.style.left="-200px",t.style.width="100px",t.style.height="100px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy")?(t.remove(),I()):(t.remove(),P(new Error("浏览器不支持复制")))})},j=()=>{y(b()).then(()=>{i.value=!0,u(),o.timer&&clearTimeout(o.timer),o.timer=setTimeout(()=>{i.value=!1,u()},e.resetAfter||1e3),n("copy")}).catch(l=>{i.value=!1,u(),n("copy",l)})},E=l=>{e.tooltip&&(m.value=l.currentTarget)};return H(()=>{o.timer&&clearTimeout(o.timer),o.timer=null,i.value=!1}),N(()=>{o.timer&&clearTimeout(o.timer),o.timer=null}),{lang:c,innerRef:p,tooltipRef:d,virtualRef:m,copied:i,onCopyClick:j,onCopyHover:E}}}),U=(e,n)=>{const c=e.__vccOpts||e;for(const[o,p]of n)c[o]=p;return c};function q(e,n,c,o,p,d){const m=v("CheckOutlined"),i=v("ElIcon"),u=v("CopyOutlined"),b=v("EleTooltip");return r(),A("div",{class:L(["ele-copyable",{"ele-copyable-done":e.copied}])},[k("div",{ref:"innerRef",class:"ele-copyable-inner",style:a(e.innerStyle)},[D(e.$slots,"default")],4),k("div",{class:"ele-copyable-icon",style:a(e.customStyle),onMouseover:n[0]||(n[0]=(...y)=>e.onCopyHover&&e.onCopyHover(...y)),onClick:n[1]||(n[1]=(...y)=>e.onCopyClick&&e.onCopyClick(...y))},[e.copied?(r(),s(i,T(C({key:0},e.copiedIconProps||{})),{default:O(()=>[e.copiedIcon?(r(),s(S(e.copiedIcon),{key:0,style:a(e.copiedIconStyle)},null,8,["style"])):(r(),s(m,{key:1,style:a(e.copiedIconStyle)},null,8,["style"]))]),_:1},16)):(r(),s(i,T(C({key:1},e.iconProps||{})),{default:O(()=>[e.icon?(r(),s(S(e.icon),{key:0,style:a(e.iconStyle)},null,8,["style"])):(r(),s(u,{key:1,style:a(e.iconStyle)},null,8,["style"]))]),_:1},16))],36),F(b,C({placement:"top",offset:6},!e.tooltip||e.tooltip===!0?{}:e.tooltip,{content:e.copied?e.lang.copied:e.lang.copy,virtualRef:e.virtualRef,virtualTriggering:!0,ref:"tooltipRef"}),null,16,["content","virtualRef"])],2)}const J=U(M,[["render",q]]);export{J as i};
