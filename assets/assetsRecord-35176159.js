import{k as G,l as U,m as w,n as O,q as K,d as V,r as h,s as W,w as L,v as X,o as J,b as c,x as F,y as z,z as Q,A as Z,u as ee,a as $,c as H,e as E,B as A,h as b,C as N,F as C,D as te,i as ae,t as B,E as se}from"../js/index.6b62816b.js";import{u as j,d as ne,e as M,f as I,i as oe,L as Y,g as ie,h as le,p as ce,_ as re,j as ue,b as de}from"./index.vue_vue_type_style_index_0_lang-0bc9ca2b.js";const fe=Symbol(),he=()=>G(fe,null),[ge,p,ve]=U("list"),me={error:Boolean,offset:w(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:O("down"),loadingText:String,finishedText:String,immediateCheck:K};var _e=V({name:ge,props:me,emits:["load","update:error","update:loading"],setup(e,{emit:f,slots:o}){const n=h(e.loading),r=h(),T=h(),u=he(),a=j(r),m=W(()=>e.scroller||a.value),d=()=>{F(()=>{if(n.value||e.finished||e.disabled||e.error||(u==null?void 0:u.value)===!1)return;const{direction:s}=e,x=+e.offset,g=I(m);if(!g.height||oe(r))return;let y=!1;const v=I(T);s==="up"?y=g.top-v.top<=x:y=v.bottom-g.bottom<=x,y&&(n.value=!0,f("update:loading",!0),f("load"))})},S=()=>{if(e.finished){const s=o.finished?o.finished():e.finishedText;if(s)return c("div",{class:p("finished-text")},[s])}},R=()=>{f("update:error",!1),d()},_=()=>{if(e.error){const s=o.error?o.error():e.errorText;if(s)return c("div",{role:"button",class:p("error-text"),tabindex:0,onClick:R},[s])}},l=()=>{if(n.value&&!e.finished&&!e.disabled)return c("div",{class:p("loading")},[o.loading?o.loading():c(Y,{class:p("loading-icon")},{default:()=>[e.loadingText||ve("loading")]})])};return L(()=>[e.loading,e.finished,e.error],d),u&&L(u,s=>{s&&d()}),X(()=>{n.value=e.loading}),J(()=>{e.immediateCheck&&d()}),ne({check:d}),M("scroll",d,{target:m,passive:!0}),()=>{var s;const x=(s=o.default)==null?void 0:s.call(o),g=c("div",{ref:T,class:p("placeholder")},null);return c("div",{ref:r,role:"feed",class:p(),"aria-busy":n.value},[e.direction==="down"?x:g,l(),S(),_(),e.direction==="up"?x:g])}}});const Te=z(_e),[xe,k,Se]=U("pull-refresh"),q=50,ye=["pulling","loosing","success"],be={disabled:Boolean,modelValue:Boolean,headHeight:w(q),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:Q,successDuration:w(500),animationDuration:w(300)};var Re=V({name:xe,props:be,emits:["change","refresh","update:modelValue"],setup(e,{emit:f,slots:o}){let n;const r=h(),T=h(),u=j(r),a=Z({status:"normal",distance:0,duration:0}),m=ie(),d=()=>{if(e.headHeight!==q)return{height:"".concat(e.headHeight,"px")}},S=()=>a.status!=="loading"&&a.status!=="success"&&!e.disabled,R=t=>{const i=+(e.pullDistance||e.headHeight);return t>i&&(t<i*2?t=i+(t-i)/2:t=i*1.5+(t-i*2)/4),Math.round(t)},_=(t,i)=>{const D=+(e.pullDistance||e.headHeight);a.distance=t,i?a.status="loading":t===0?a.status="normal":t<D?a.status="pulling":a.status="loosing",f("change",{status:a.status,distance:t})},l=()=>{const{status:t}=a;return t==="normal"?"":e["".concat(t,"Text")]||Se(t)},s=()=>{const{status:t,distance:i}=a;if(o[t])return o[t]({distance:i});const D=[];return ye.includes(t)&&D.push(c("div",{class:k("text")},[l()])),t==="loading"&&D.push(c(Y,{class:k("loading")},{default:l})),D},x=()=>{a.status="success",setTimeout(()=>{_(0)},+e.successDuration)},g=t=>{n=le(u.value)===0,n&&(a.duration=0,m.start(t))},y=t=>{S()&&g(t)},v=t=>{if(S()){n||g(t);const{deltaY:i}=m;m.move(t),n&&i.value>=0&&m.isVertical()&&(ce(t),_(R(i.value)))}},P=()=>{n&&m.deltaY.value&&S()&&(a.duration=+e.animationDuration,a.status==="loosing"?(_(+e.headHeight,!0),f("update:modelValue",!0),F(()=>f("refresh"))):_(0))};return L(()=>e.modelValue,t=>{a.duration=+e.animationDuration,t?_(+e.headHeight,!0):o.success||e.successText?x():_(0,!1)}),M("touchmove",v,{target:T}),()=>{var t;const i={transitionDuration:"".concat(a.duration,"ms"),transform:a.distance?"translate3d(0,".concat(a.distance,"px, 0)"):""};return c("div",{ref:r,class:k()},[c("div",{ref:T,class:k("track"),style:i,onTouchstartPassive:y,onTouchend:P,onTouchcancel:P},[c("div",{class:k("head"),style:d()},[s()]),(t=o.default)==null?void 0:t.call(o)])])}}});const pe=z(Re);const De={class:"main"},Ee={class:"content"},ke={class:"title"},Pe={class:"money"},we={class:"time"},$e=V({__name:"assetsRecord",setup(e){const{t:f}=ee(),o=te(),n=h([]),r=h(!1),T=h(!1),u=h(!1),a=h(o.query.type),m=h([{name:f("incomeReward"),type:"EARNINGS"},{name:f("incomeReward"),type:"NEWUSER"},{name:f("incomeReward"),type:"INVITE"},{name:f("incomeReward"),type:"CONTRIB"}]),d=h({page:0,size:20}),S=()=>{u.value&&(n.value=[],u.value=!1),R()},R=async()=>{try{let{list:l}=await ue({type:a.value,page:d.value.page,size:d.value.size});r.value=!1,l?(n.value=n.value.concat(l),d.value.page++):T.value=!0}catch(l){console.error(l)}finally{r.value=!1}},_=()=>{d.value.page=0,n.value=[],u.value=!1,T.value=!1,r.value=!0,R()};return(l,s)=>{const x=re,g=Te,y=pe;return $(),H(C,null,[c(x),E("div",De,[c(y,{modelValue:b(u),"onUpdate:modelValue":s[1]||(s[1]=v=>N(u)?u.value=v:null),onRefresh:_,"loosing-text":l.$t("loosingText"),"pulling-text":l.$t("pullingText")},{default:A(()=>[c(g,{loading:b(r),"onUpdate:loading":s[0]||(s[0]=v=>N(r)?r.value=v:null),finished:b(T),"finished-text":l.$t("finishedText"),"loading-text":l.$t("loadingText"),onLoad:S},{default:A(()=>[($(!0),H(C,null,ae(b(n),(v,P)=>($(),H("div",{key:P,class:"wallet"},[E("div",Ee,[E("div",ke,B(b(m).find(t=>t.type==b(a)).name),1),E("div",Pe,B(v.num),1),E("div",we,B(b(se)(v.createAt,"y-m-d h:i:s")),1)])]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["modelValue","loosing-text","pulling-text"])])],64)}}});const Le=de($e,[["__scopeId","data-v-6232387b"]]);export{Le as default};
