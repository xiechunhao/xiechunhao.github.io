import{b5 as pe,r as g,o as m,c as y,w as t,b as e,cK as _e,aG as z,u as r,a8 as M,d as _,m as F,F as H,bg as fe,be as Z,e as s,aI as ee,aH as be,aC as L,g as te,ay as le,aL as ve,L as ge,b6 as q,h as ae,c4 as xe,_ as ye,fj as he,aN as ke,aM as Ve,fk as Ee,a as Ce,J as we,a6 as Q,t as w,bE as ze,at as $e,br as Ne,au as De,n as Te,W as X,aW as Ie,E as B,av as Se,aT as Ue,j as Be,ah as Me,k as Fe}from"./index-C4BxmZrN.js";import{i as oe}from"./index-CkGVv88Q.js";import{i as Ke}from"./index-BCHJo1Hi.js";import"./index-DPWieFbN.js";import"./index-BY7TmcLY.js";import"./index-Cw5RFCD5.js";import"./virtual-list-CYzSvSUd.js";import"./index-CuklncWx.js";import"./index-CL6ZmOyB.js";import{i as We}from"./index-BKzJx-g6.js";import{i as Oe}from"./index-Cl8n7AcP.js";import{E as Re,a as je}from"./col-DljvzS69.js";import{E as He}from"./date-picker-wyenFiKS.js";import{p as Le,l as Pe}from"./index-DUSysJZb.js";import{i as Ye}from"./index-DSHqkOzX.js";import"./isArrayLikeObject-XYcYxEsS.js";import"./vuedraggable.umd-BuphSp9t.js";import"./arrays-6TrVLtTe.js";import"./index-dVmM0e8c.js";const Ae=s("span",null,"收起",-1),Ge=s("span",null,"展开",-1),Je={__name:"search-form",emits:["search"],setup(P,{emit:c}){const $=c,[i,C]=pe({username:"",organizationName:"",phone:"",email:""}),p=g(["",""]),f=g(!1),h=()=>{var u;const[V,n]=(u=p.value)!=null?u:[];$("search",{...i,createTimeStart:V?`${V} 00:00:00`:"",createTimeEnd:n?`${n} 23:59:59`:""})},k=()=>{C(),p.value=["",""],h()},x=()=>{f.value=!f.value};return(V,n)=>{const u=ee,d=be,E=Re,K=He,T=L,N=te,W=le,I=je,O=ve,R=oe;return m(),y(R,{"body-style":{paddingBottom:"2px"}},{default:t(()=>[e(O,{"label-width":"72px",onKeyup:_e(h,["enter"]),onSubmit:n[5]||(n[5]=z(()=>{},["prevent"]))},{default:t(()=>[e(I,{gutter:8},{default:t(()=>[e(E,{lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{label:"用户账号"},{default:t(()=>[e(u,{clearable:"",modelValue:r(i).username,"onUpdate:modelValue":n[0]||(n[0]=b=>r(i).username=b),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(E,{lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{label:"组织机构"},{default:t(()=>[e(u,{clearable:"",modelValue:r(i).organizationName,"onUpdate:modelValue":n[1]||(n[1]=b=>r(i).organizationName=b),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),f.value?(m(),y(E,{key:0,lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{label:"手机号"},{default:t(()=>[e(u,{clearable:"",modelValue:r(i).phone,"onUpdate:modelValue":n[2]||(n[2]=b=>r(i).phone=b),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})):M("",!0),f.value?(m(),y(E,{key:1,lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{label:"邮箱"},{default:t(()=>[e(u,{clearable:"",modelValue:r(i).email,"onUpdate:modelValue":n[3]||(n[3]=b=>r(i).email=b),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})):M("",!0),f.value?(m(),y(E,{key:2,lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{label:"创建时间"},{default:t(()=>[e(K,{"unlink-panels":"",type:"daterange",modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=b=>p.value=b),"range-separator":"-","value-format":"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"ele-fluid"},null,8,["modelValue"])]),_:1})]),_:1})):M("",!0),e(E,{lg:8,md:12,sm:12,xs:24},{default:t(()=>[e(d,{"label-width":"16px"},{default:t(()=>[e(T,{type:"primary",onClick:h},{default:t(()=>[_("查询")]),_:1}),e(T,{onClick:k},{default:t(()=>[_("重置")]),_:1}),e(W,{type:"primary",underline:!1,onClick:x,style:{"margin-left":"12px"}},{default:t(()=>[f.value?(m(),F(H,{key:0},[Ae,e(N,{style:{"vertical-align":"-1px"}},{default:t(()=>[e(r(fe))]),_:1})],64)):(m(),F(H,{key:1},[Ge,e(N,{style:{"vertical-align":"-2px"}},{default:t(()=>[e(r(Z))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qe={style:{"margin-bottom":"12px"}},Qe={style:{"text-align":"right"}},Xe=ge({__name:"nickname-filter",emits:["search"],setup(P,{emit:c}){const $=c,i=g(""),C=g(!1),p=()=>{C.value=!!i.value,$("search",i.value)},f=()=>{i.value="",C.value=!1,p()};return(h,k)=>{const x=ae,V=ee,n=L,u=xe;return m(),F("div",{onClick:k[1]||(k[1]=z(()=>{},["stop"]))},[e(u,{width:200,trigger:"click",placement:"bottom-end","popper-options":{modifiers:[{name:"offset",options:{offset:[24,4]}}]}},{reference:t(()=>[e(x,{type:C.value?"primary":"placeholder",icon:r(q),class:"demo-filter-icon"},null,8,["type","icon"])]),default:t(()=>[s("div",qe,[e(V,{size:"small",modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=d=>i.value=d),placeholder:"请输入关键字",onChange:p},null,8,["modelValue"])]),s("div",Qe,[e(n,{size:"small",onClick:f},{default:t(()=>[_("重置")]),_:1}),e(n,{size:"small",type:"primary",icon:r(q),class:"ele-btn-icon",onClick:p},{default:t(()=>[_(" 搜索 ")]),_:1},8,["icon"])])]),_:1})])}}}),Ze=ye(Xe,[["__scopeId","data-v-73f819b8"]]),et=s("span",null,"已选择 ",-1),tt=s("span",null," 项数据 ",-1),lt=s("span",null,"其中冻结状态的用户有 ",-1),at=s("span",null,"批量操作",-1),ot={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},nt=s("div",null,"边框 ",-1),st=s("div",null,"表头背景 ",-1),it=s("div",null,"高度铺满 ",-1),rt={style:{display:"flex","align-items":"center"}},dt={style:{flex:"1",overflow:"hidden","text-overflow":"ellipsis"}},ct=s("h2",{style:{"text-align":"center"}},"还可以自定义打印的顶部区域",-1),ut=s("h2",{style:{"text-align":"center"}},"还可以自定义打印的底部区域",-1),mt={style:{"text-align":"center"}},pt={style:{color:"red"}},_t={name:"ListBasic"},Ut=Object.assign(_t,{setup(P){const{t:c}=he.useI18n(),{push:$}=ke(),{removePageTab:i}=Ve(),[C]=Ee(["sex"]),p=g(null),f=g(""),h=Ce({}),k=we(()=>[{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{columnKey:"avatar",prop:"avatar",label:c("list.basic.table.avatar"),width:100,align:"center",slot:"avatar"},{prop:"username",label:c("list.basic.table.username"),minWidth:110,sortable:"custom"},{prop:"nickname",label:c("list.basic.table.nickname"),minWidth:110,sortable:"custom",headerSlot:"nicknameHeader"},{columnKey:"roles",label:c("list.basic.table.roles"),minWidth:110,slot:"roles",hideInTable:!0,formatter:a=>a.roles.map(l=>l.roleName).join(",")},{prop:"organizationName",label:c("list.basic.table.organizationName"),minWidth:110,sortable:"custom"},{prop:"phone",label:c("list.basic.table.phone"),minWidth:110,sortable:"custom",hideInTable:!0},{prop:"email",label:c("list.basic.table.email"),minWidth:110,sortable:"custom",hideInTable:!0},{columnKey:"sex",prop:"sexName",label:c("list.basic.table.sexName"),width:110,align:"center",sortable:"custom",filters:C.value.map(a=>({text:a.dictDataName,value:a.dictDataCode})),filterMultiple:!1},{prop:"createTime",label:c("list.basic.table.createTime"),minWidth:110,sortable:"custom"},{prop:"status",label:c("list.basic.table.status"),width:110,sortable:"custom",align:"center",slot:"status",filters:[{text:"正常",value:"0"},{text:"冻结",value:"1"}],filterMultiple:!1,formatter:a=>a.status==0?"正常":"冻结"},{columnKey:"action",label:c("list.basic.table.action"),width:130,align:"center",showOverflowTooltip:!1,resizable:!1,slot:"action",fixed:"right",hideInPrint:!0,hideInExport:!0}]),x=g([]),V=g(null),n=g(!0),u=g(!0),d=g(!1),E=({pages:a,where:l,orders:v,filters:D})=>Le({...l,...v,...D,...a}),K=()=>{X(()=>{var l,v;const a=[45,47,48];(v=(l=p.value)==null?void 0:l.setSelectedRowKeys)==null||v.call(l,a)})},T=a=>{Object.assign(h,a),b()},N=a=>{var l,v;(v=(l=p.value)==null?void 0:l.reload)==null||v.call(l,{page:1,where:a})},W=()=>{var a,l;(l=(a=p.value)==null?void 0:a.clearSelection)==null||l.call(a)},I=a=>{const l=a?`/list/basic/edit/${a.userId}`:"/list/basic/add";i({key:l}),X(()=>{$(l)})},O=a=>{Ie.confirm(`确定要删除“${a.username}”吗?`,"系统提示",{type:"warning",draggable:!0}).then(()=>{B.success("点击了删除")}).catch(()=>{})},R=a=>{a==="del"?B.error("点击了批量删除"):a==="edit"?B.info({message:"点击了批量修改",plain:!0}):a==="disabled"&&B.info({message:"点击了批量禁用",plain:!0})},b=()=>{f.value?N({...h,nickname:f.value}):N(h)},ne=a=>{f.value=a,b()},Y=({where:a,orders:l,filters:v})=>Pe({...a,...l,...v});return(a,l)=>{const v=ae,D=le,se=Oe,A=L,ie=te,re=Se,j=Ue,S=Be,G=Me,J=We,de=Fe,ce=Ke,ue=oe,me=Ye;return m(),y(me,{"flex-table":d.value},{default:t(()=>[e(Je,{onSearch:T}),e(ue,{"flex-table":d.value,"body-style":{paddingBottom:"4px"},style:Q({minHeight:d.value?"380px":void 0,marginBottom:d.value?"0px":void 0})},{default:t(()=>[e(se,{"show-icon":"",closable:!1,style:Q({marginBottom:u.value?"12px":"4px"})},{title:t(()=>[et,e(v,{strong:"",type:"primary",tag:"span"},{default:t(()=>[_(w(x.value.length),1)]),_:1}),tt,lt,s("b",null,w(x.value.filter(o=>o.status===1).length)+" 个  ",1),e(D,{type:"primary",underline:!1,style:{"vertical-align":"0px"},onClick:W},{default:t(()=>[_(" 清空 ")]),_:1})]),_:1},8,["style"]),e(ce,{ref_key:"tableRef",ref:p,"row-key":"userId",columns:k.value,datasource:E,current:V.value,"onUpdate:current":l[6]||(l[6]=o=>V.value=o),selections:x.value,"onUpdate:selections":l[7]||(l[7]=o=>x.value=o),"show-overflow-tooltip":!0,"export-config":{fileName:"基础列表数据",datasource:Y},"print-config":{datasource:Y},border:n.value,sticky:!d.value,toolbar:{theme:u.value?"default":"plain"},"default-sort":{prop:"createTime",order:"ascending"},"footer-style":{paddingBottom:"12px"},style:{"padding-bottom":"0"},onDone:K},{toolbar:t(()=>[e(A,{type:"primary",icon:r(ze),class:"ele-btn-icon",onClick:l[0]||(l[0]=o=>I())},{default:t(()=>[_(" 新建 ")]),_:1},8,["icon"]),e(re,{disabled:!x.value.length,items:[{title:"批量修改",command:"edit",icon:r($e)},{title:"批量禁用",command:"disabled",icon:r(Ne)},{title:"批量删除",command:"del",icon:r(De),danger:!0,divided:!0}],"icon-props":{size:15},placement:"bottom-start",style:{"margin-left":"12px"},onCommand:R},{default:t(()=>[e(A,{disabled:!x.value.length,class:"ele-btn-icon"},{default:t(()=>[at,e(ie,{size:12,style:{margin:"0 -4px 0 2px"}},{default:t(()=>[e(r(Z))]),_:1})]),_:1},8,["disabled"])]),_:1},8,["disabled","items"])]),tools:t(()=>[s("div",ot,[nt,e(j,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value=o),size:"small"},null,8,["modelValue"]),e(S,{direction:"vertical"}),st,e(j,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=o=>u.value=o),size:"small"},null,8,["modelValue"]),e(S,{direction:"vertical"}),it,e(j,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=o=>d.value=o),size:"small"},null,8,["modelValue"]),e(S,{direction:"vertical"})])]),avatar:t(({row:o})=>[o.avatar?(m(),y(G,{key:0,src:o.avatar,size:32,onClick:l[4]||(l[4]=z(()=>{},["stop"])),style:{"vertical-align":"-8px"}},null,8,["src"])):(m(),y(G,{key:1,size:32,style:{background:"#1677ff","vertical-align":"-8px"},onClick:l[5]||(l[5]=z(()=>{},["stop"]))},{default:t(()=>[_(w(o.nickname&&o.nickname.length>2?o.nickname.substring(o.nickname.length-2):o.nickname),1)]),_:2},1024))]),status:t(({row:o})=>[o.status===0?(m(),y(J,{key:0,text:"正常",size:"8px"})):o.status===1?(m(),y(J,{key:1,text:"冻结",type:"danger",ripple:!1,size:"8px"})):M("",!0)]),roles:t(({row:o})=>[(m(!0),F(H,null,Te(o.roles,U=>(m(),y(de,{key:U.roleId,size:"small","disable-transitions":!0,style:{"margin-right":"6px"}},{default:t(()=>[_(w(U.roleName),1)]),_:2},1024))),128))]),action:t(({row:o})=>[e(D,{type:"primary",underline:!1,onClick:z(U=>I(o),["stop"])},{default:t(()=>[_(" 修改 ")]),_:2},1032,["onClick"]),e(S,{direction:"vertical"}),e(D,{type:"danger",underline:!1,onClick:z(U=>O(o),["stop"])},{default:t(()=>[_(" 删除 ")]),_:2},1032,["onClick"])]),nicknameHeader:t(({column:o})=>[s("div",rt,[s("div",dt,w(o.label),1),e(Ze,{onSearch:ne})])]),printTop:t(()=>[ct]),printBottom:t(({data:o})=>[ut,s("div",mt,[_(" 共打印了 "),s("b",pt,w(o.length),1),_(" 条数据 ")])]),_:1},8,["columns","current","selections","export-config","print-config","border","sticky","toolbar"])]),_:1},8,["flex-table","style"])]),_:1},8,["flex-table"])}}});export{Ut as default};
