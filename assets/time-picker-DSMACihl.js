import{ep as ke,eq as B,er as Z,es as Se,et as _e,ds as Te,a2 as Ce,bP as Pe,a8 as we,J as Q,cx as De,a0 as z,L as Re,H as _,r as W,o as Ve,l as Ae,d as h,a4 as b,u as t,t as x,b as O,a7 as xe,G as R,cr as F,bY as Oe,Y as Ee,a$ as Ie,a9 as Me}from"./index-BF2fBoPb.js";import{t as Ne,u as ye,T as J,a as He,b as Be,c as Fe,d as Ue,e as Ke,D as Le,C as Ye}from"./date-picker-BzLnEAo6.js";import{b as $e,i as je}from"./isArrayLikeObject-j402kJv_.js";function Ge(){}function qe(s){return s!==s}function ze(s,r,o){for(var u=o-1,m=s.length;++u<m;)if(s[u]===r)return u;return-1}function Je(s,r,o){return r===r?ze(s,r,o):ke(s,qe,o)}function Ze(s,r){var o=s==null?0:s.length;return!!o&&Je(s,r,0)>-1}var Qe=1/0,We=B&&1/Z(new B([,-0]))[1]==Qe?function(s){return new B(s)}:Ge,Xe=200;function en(s,r,o){var u=-1,m=Ze,v=s.length,a=!0,i=[],f=i;if(v>=Xe){var T=We(s);if(T)return Z(T);a=!1,m=_e,f=new Se}else f=i;e:for(;++u<v;){var k=s[u],S=k;if(k=k!==0?k:0,a&&S===S){for(var V=f.length;V--;)if(f[V]===S)continue e;i.push(k)}else m(f,S,o)||(f!==i&&f.push(S),i.push(k))}return i}var U=$e(function(s){return en(Te(s,1,je,!0))});const nn=Ce({...Ne,parsedValue:{type:Pe(Array)}}),an=Q({__name:"panel-time-range",props:nn,emits:["pick","select-range","set-picker-option"],setup(s,{emit:r}){const o=s,u=(e,n)=>{const l=[];for(let c=e;c<=n;c++)l.push(c);return l},{t:m,lang:v}=De(),a=z("time"),i=z("picker"),f=Re("EP_PICKER_BASE"),{arrowControl:T,disabledHours:k,disabledMinutes:S,disabledSeconds:V,defaultValue:E}=f.props,X=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),w.value?"has-seconds":""]),ee=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),w.value?"has-seconds":""]),C=_(()=>o.parsedValue[0]),P=_(()=>o.parsedValue[1]),ne=ye(o),ae=()=>{r("pick",ne.value,!1)},w=_(()=>o.format.includes("ss")),K=_(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),te=(e=!1)=>{r("pick",[C.value,P.value],e)},se=e=>{L(e.millisecond(0),P.value)},oe=e=>{L(C.value,e.millisecond(0))},re=e=>{const n=e.map(c=>R(c).locale(v.value)),l=$(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},L=(e,n)=>{r("pick",[e,n],!0)},le=_(()=>C.value>P.value),A=W([0,2]),ie=(e,n)=>{r("select-range",e,n,"min"),A.value=[e,n]},Y=_(()=>w.value?11:8),ce=(e,n)=>{r("select-range",e,n,"max");const l=t(Y);A.value=[e+l,n+l]},ue=e=>{const n=w.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(w.value?["seconds"]:[]),d=(n.indexOf(A.value[0])+e+n.length)%n.length,p=n.length/2;d<p?y.start_emitSelectRange(l[d]):y.end_emitSelectRange(l[d-p])},de=e=>{const n=e.code,{left:l,right:c,up:d,down:p}=Oe;if([l,c].includes(n)){ue(n===l?-1:1),e.preventDefault();return}if([d,p].includes(n)){const g=n===d?-1:1,D=A.value[0]<Y.value?"start":"end";y[`${D}_scrollDown`](g),e.preventDefault();return}},I=(e,n)=>{const l=k?k(e):[],c=e==="start",p=(n||(c?P.value:C.value)).hour(),g=c?u(p+1,23):u(0,p-1);return U(l,g)},M=(e,n,l)=>{const c=S?S(e,n):[],d=n==="start",p=l||(d?P.value:C.value),g=p.hour();if(e!==g)return c;const D=p.minute(),H=d?u(D+1,59):u(0,D-1);return U(c,H)},N=(e,n,l,c)=>{const d=V?V(e,n,l):[],p=l==="start",g=c||(p?P.value:C.value),D=g.hour(),H=g.minute();if(e!==D||n!==H)return d;const q=g.second(),he=p?u(q+1,59):u(0,q-1);return U(d,he)},$=([e,n])=>[j(e,"start",!0,n),j(n,"end",!1,e)],{getAvailableHours:pe,getAvailableMinutes:me,getAvailableSeconds:fe}=Be(I,M,N),{timePickerOptions:y,getAvailableTime:j,onSetOption:G}=He({getAvailableHours:pe,getAvailableMinutes:me,getAvailableSeconds:fe}),be=e=>e?F(e)?e.map(n=>R(n,o.format).locale(v.value)):R(e,o.format).locale(v.value):null,ve=e=>e?F(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,ge=()=>{if(F(E))return E.map(n=>R(n).locale(v.value));const e=R(E).locale(v.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",ve]),r("set-picker-option",["parseUserInput",be]),r("set-picker-option",["isValidValue",re]),r("set-picker-option",["handleKeydownInput",de]),r("set-picker-option",["getDefaultValue",ge]),r("set-picker-option",["getRangeAvailableTime",$]),(e,n)=>e.actualVisible?(Ve(),Ae("div",{key:0,class:b([t(a).b("range-picker"),t(i).b("panel")])},[h("div",{class:b(t(a).be("range-picker","content"))},[h("div",{class:b(t(a).be("range-picker","cell"))},[h("div",{class:b(t(a).be("range-picker","header"))},x(t(m)("el.datepicker.startTime")),3),h("div",{class:b(t(X))},[O(J,{ref:"minSpinner",role:"start","show-seconds":t(w),"am-pm-mode":t(K),"arrow-control":t(T),"spinner-date":t(C),"disabled-hours":I,"disabled-minutes":M,"disabled-seconds":N,onChange:se,onSetOption:t(G),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),h("div",{class:b(t(a).be("range-picker","cell"))},[h("div",{class:b(t(a).be("range-picker","header"))},x(t(m)("el.datepicker.endTime")),3),h("div",{class:b(t(ee))},[O(J,{ref:"maxSpinner",role:"end","show-seconds":t(w),"am-pm-mode":t(K),"arrow-control":t(T),"spinner-date":t(P),"disabled-hours":I,"disabled-minutes":M,"disabled-seconds":N,onChange:oe,onSetOption:t(G),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),h("div",{class:b(t(a).be("panel","footer"))},[h("button",{type:"button",class:b([t(a).be("panel","btn"),"cancel"]),onClick:l=>ae()},x(t(m)("el.datepicker.cancel")),11,["onClick"]),h("button",{type:"button",class:b([t(a).be("panel","btn"),"confirm"]),disabled:t(le),onClick:l=>te()},x(t(m)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):xe("v-if",!0)}});var tn=we(an,[["__file","panel-time-range.vue"]]);R.extend(Fe);var sn=Q({name:"ElTimePicker",install:null,props:{...Ue,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,r){const o=W(),[u,m]=s.isRange?["timerange",tn]:["time",Ke],v=a=>r.emit("update:modelValue",a);return Ee("ElPopperOptions",s.popperOptions),r.expose({focus:a=>{var i;(i=o.value)==null||i.handleFocusInput(a)},blur:a=>{var i;(i=o.value)==null||i.handleBlurInput(a)},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const i=(a=s.format)!=null?a:Le;return O(Ye,Ie(s,{ref:o,type:u,format:i,"onUpdate:modelValue":v}),{default:f=>O(m,f,null)})}}});const cn=Me(sn);export{cn as E};
