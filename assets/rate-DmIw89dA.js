import{a2 as pe,bP as E,cf as R,cW as V,a3 as U,cX as he,cs as be,cv as ye,cY as Ve,cg as X,cZ as g,J as oe,L as Y,c_ as we,c$ as xe,cE as Ce,a0 as ge,d0 as Ie,r as T,H as u,cr as _,ch as q,d1 as N,c0 as G,O as Se,o as i,l as v,F as D,m as Ee,a4 as m,u as o,b as J,w as Z,bT as Q,c as w,a6 as x,bU as ee,a7 as H,g as ae,a5 as M,t as Te,a8 as _e,bY as C,cN as le,a9 as Ne}from"./index-BF2fBoPb.js";const De=pe({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:E([Array,Object]),default:()=>R(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:E([Array,Object]),default:()=>[V,V,V]},voidIcon:{type:U,default:()=>he},disabledVoidIcon:{type:U,default:()=>V},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:E(Array),default:()=>R(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:be,clearable:Boolean,...ye(["ariaLabel"])}),He={[Ve]:p=>X(p),[g]:p=>X(p)},Me=oe({name:"ElRate"}),Be=oe({...Me,props:De,emits:He,setup(p,{expose:te,emit:h}){const e=p;function I(a,l){const t=n=>q(n),c=Object.keys(l).map(n=>+n).filter(n=>{const y=l[n];return(t(y)?y.excluded:!1)?a<n:a<=n}).sort((n,y)=>n-y),b=l[c[0]];return t(b)&&b.value||b}const B=Y(we,void 0),P=Y(xe,void 0),se=Ce(),r=ge("rate"),{inputId:re,isLabeledByFormItem:k}=Ie(e,{formItemContext:P}),s=T(e.modelValue),S=T(-1),f=T(!0),ne=u(()=>[r.b(),r.m(se.value)]),d=u(()=>e.disabled||(B==null?void 0:B.disabled)),ue=u(()=>r.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":F.value})),A=u(()=>{let a="";return e.showScore?a=e.scoreTemplate.replace(/\{\s*value\s*\}/,d.value?`${e.modelValue}`:`${s.value}`):e.showText&&(a=e.texts[Math.ceil(s.value)-1]),a}),O=u(()=>e.modelValue*100-Math.floor(e.modelValue)*100),ce=u(()=>_(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),F=u(()=>{const a=I(s.value,ce.value);return q(a)?"":a}),ie=u(()=>{let a="";return d.value?a=`${O.value}%`:e.allowHalf&&(a="50%"),{color:F.value,width:a}}),L=u(()=>{let a=_(e.icons)?[...e.icons]:{...e.icons};return a=N(a),_(a)?{[e.lowThreshold]:a[0],[e.highThreshold]:{value:a[1],excluded:!0},[e.max]:a[2]}:a}),de=u(()=>I(e.modelValue,L.value)),j=u(()=>d.value?G(e.disabledVoidIcon)?e.disabledVoidIcon:N(e.disabledVoidIcon):G(e.voidIcon)?e.voidIcon:N(e.voidIcon)),fe=u(()=>I(s.value,L.value));function z(a){const l=d.value&&O.value>0&&a-1<e.modelValue&&a>e.modelValue,t=e.allowHalf&&f.value&&a-.5<=s.value&&a>s.value;return l||t}function $(a){e.clearable&&a===e.modelValue&&(a=0),h(g,a),e.modelValue!==a&&h("change",a)}function ve(a){d.value||(e.allowHalf&&f.value?$(s.value):$(a))}function me(a){if(d.value)return;let l=s.value;const t=a.code;return t===C.up||t===C.right?(e.allowHalf?l+=.5:l+=1,a.stopPropagation(),a.preventDefault()):(t===C.left||t===C.down)&&(e.allowHalf?l-=.5:l-=1,a.stopPropagation(),a.preventDefault()),l=l<0?0:l,l=l>e.max?e.max:l,h(g,l),h("change",l),l}function K(a,l){if(!d.value){if(e.allowHalf&&l){let t=l.target;le(t,r.e("item"))&&(t=t.querySelector(`.${r.e("icon")}`)),(t.clientWidth===0||le(t,r.e("decimal")))&&(t=t.parentNode),f.value=l.offsetX*2<=t.clientWidth,s.value=f.value?a-.5:a}else s.value=a;S.value=a}}function W(){d.value||(e.allowHalf&&(f.value=e.modelValue!==Math.floor(e.modelValue)),s.value=e.modelValue,S.value=-1)}return Se(()=>e.modelValue,a=>{s.value=a,f.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||h(g,0),te({setCurrentValue:K,resetCurrentValue:W}),(a,l)=>{var t;return i(),v("div",{id:o(re),class:m([o(ne),o(r).is("disabled",o(d))]),role:"slider","aria-label":o(k)?void 0:a.ariaLabel||"rating","aria-labelledby":o(k)?(t=o(P))==null?void 0:t.labelId:void 0,"aria-valuenow":s.value,"aria-valuetext":o(A)||void 0,"aria-valuemin":"0","aria-valuemax":a.max,tabindex:"0",style:M(o(ue)),onKeydown:me},[(i(!0),v(D,null,Ee(a.max,(c,b)=>(i(),v("span",{key:b,class:m(o(r).e("item")),onMousemove:n=>K(c,n),onMouseleave:W,onClick:n=>ve(c)},[J(o(ae),{class:m([o(r).e("icon"),{hover:S.value===c},o(r).is("active",c<=s.value)])},{default:Z(()=>[z(c)?H("v-if",!0):(i(),v(D,{key:0},[Q((i(),w(x(o(fe)),null,null,512)),[[ee,c<=s.value]]),Q((i(),w(x(o(j)),null,null,512)),[[ee,!(c<=s.value)]])],64)),z(c)?(i(),v(D,{key:1},[(i(),w(x(o(j)),{class:m([o(r).em("decimal","box")])},null,8,["class"])),J(o(ae),{style:M(o(ie)),class:m([o(r).e("icon"),o(r).e("decimal")])},{default:Z(()=>[(i(),w(x(o(de))))]),_:1},8,["style","class"])],64)):H("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),a.showText||a.showScore?(i(),v("span",{key:0,class:m(o(r).e("text")),style:M({color:a.textColor})},Te(o(A)),7)):H("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Pe=_e(Be,[["__file","rate.vue"]]);const Oe=Ne(Pe);export{Oe as E};
