import{bZ as k,H as d,eb as X,N as Q,ec as m,bP as g,a2 as N,cf as ee,J as te,a0 as F,r as P,a as ne,ed as re,u as p,O as ae,I as se,T as B,aF as oe}from"./index-BF2fBoPb.js";const le=e=>k?window.requestAnimationFrame(e):setTimeout(e,16),ie=e=>k?window.cancelAnimationFrame(e):clearTimeout(e);var G=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ce(e,t){return!!(e===t||G(e)&&G(t))}function ue(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!ce(e[r],t[r]))return!1;return!0}function de(e,t){t===void 0&&(t=ue);var r=null;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var c=e.apply(this,a);return r={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){r=null},i}const Re=()=>{const t=Q().proxy.$props;return d(()=>{const r=(i,a,s)=>({});return t.perfMode?X(r):de(r)})},Le=50,Ae="itemRendered",we="scroll",me="forward",fe="backward",Me="auto",_e="smart",ze="start",Ce="center",Ie="end",T="horizontal",H="vertical",ve="ltr",q="rtl",he="negative",ge="positive-ascending",be="positive-descending",Se={[T]:"left",[H]:"top"},ye=20,A=m({type:g([Number,Function]),required:!0}),w=m({type:Number}),M=m({type:Number,default:2}),pe=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),E=m({type:Number,required:!0}),$=m({type:String,values:["horizontal","vertical"],default:H}),V=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>ee([])},direction:pe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Oe=N({cache:M,estimatedItemSize:w,layout:$,initScrollOffset:_,total:E,itemSize:A,...V}),z={type:Number,default:6},Z={type:Number,default:0},j={type:Number,default:2},xe=N({columnCache:M,columnWidth:A,estimatedColumnWidth:w,estimatedRowHeight:w,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:M,rowHeight:A,totalColumn:E,totalRow:E,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:Z,scrollbarEndGap:j,role:String,...V}),Te=N({alwaysOn:Boolean,class:String,layout:$,total:E,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:Z,endGap:j,visible:Boolean}),De=(e,t)=>e<t?me:fe,Fe=e=>e===ve||e===q||e===T,Pe=e=>e===q;let v=null;function Be(e=!1){if(v===null||e){const t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?v=be:(t.scrollLeft=1,t.scrollLeft===0?v=he:v=ge),document.body.removeChild(t),v}return v}function Ee({move:e,size:t,bar:r},i){const a={},s=`translate${r.axis}(${e}px)`;return a[r.size]=t,a.transform=s,a.msTransform=s,a.webkitTransform=s,i==="horizontal"?a.height="100%":a.width="100%",a}const Ge=te({name:"ElVirtualScrollBar",props:Te,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const r=d(()=>e.startGap+e.endGap),i=F("virtual-scrollbar"),a=F("scrollbar"),s=P(),c=P();let C=null,R=null;const l=ne({isDragging:!1,traveled:0}),o=d(()=>re[e.layout]),I=d(()=>e.clientSize-p(r)),K=d(()=>({position:"absolute",width:`${T===e.layout?I.value:e.scrollbarSize}px`,height:`${T===e.layout?e.scrollbarSize:I.value}px`,[Se[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const n=e.ratio,u=e.clientSize;if(n>=100)return Number.POSITIVE_INFINITY;if(n>=50)return n*u/100;const f=u/3;return Math.floor(Math.min(Math.max(n*u,ye),f))}),U=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const n=`${L.value}px`;return Ee({bar:o.value,size:n,move:l.traveled},e.layout)}),h=d(()=>Math.floor(e.clientSize-L.value-p(r))),W=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",b);const n=p(c);n&&(R=document.onselectstart,document.onselectstart=()=>!1,n.addEventListener("touchmove",S,{passive:!0}),n.addEventListener("touchend",b))},O=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b),document.onselectstart=R,R=null;const n=p(c);n&&(n.removeEventListener("touchmove",S),n.removeEventListener("touchend",b))},x=n=>{n.stopImmediatePropagation(),!(n.ctrlKey||[1,2].includes(n.button))&&(l.isDragging=!0,l[o.value.axis]=n.currentTarget[o.value.offset]-(n[o.value.client]-n.currentTarget.getBoundingClientRect()[o.value.direction]),t("start-move"),W())},b=()=>{l.isDragging=!1,l[o.value.axis]=0,t("stop-move"),O()},S=n=>{const{isDragging:u}=l;if(!u||!c.value||!s.value)return;const f=l[o.value.axis];if(!f)return;ie(C);const y=(s.value.getBoundingClientRect()[o.value.direction]-n[o.value.client])*-1,J=c.value[o.value.offset]-f,D=y-J;C=le(()=>{l.traveled=Math.max(e.startGap,Math.min(D,h.value)),t("scroll",D,h.value)})},Y=n=>{const u=Math.abs(n.target.getBoundingClientRect()[o.value.direction]-n[o.value.client]),f=c.value[o.value.offset]/2,y=u-f;l.traveled=Math.max(0,Math.min(y,h.value)),t("scroll",y,h.value)};return ae(()=>e.scrollFrom,n=>{l.isDragging||(l.traveled=Math.ceil(n*h.value))}),se(()=>{O()}),()=>B("div",{role:"presentation",ref:s,class:[i.b(),e.class,(e.alwaysOn||l.isDragging)&&"always-on"],style:K.value,onMousedown:oe(Y,["stop","prevent"]),onTouchstartPrevent:x},B("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:x},[]))}});export{Me as A,fe as B,Ce as C,Le as D,Ie as E,me as F,T as H,Ae as I,q as R,we as S,H as V,Be as a,ge as b,ie as c,he as d,Ge as e,be as f,De as g,ze as h,Pe as i,_e as j,Oe as k,Te as l,Fe as m,le as r,Re as u,xe as v};
