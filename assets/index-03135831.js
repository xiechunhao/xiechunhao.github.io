import{d as ye,a as he,D as p,r as fe,o as Te,a6 as B,c as d,e as r,h as o,t as l,g as n,i as F,f as m,w as $,j as h,k as f,p as V,a4 as P,m as z,v as $e,x as Ae}from"../js/index.dc884249.js";import{P as ke}from"./index-1fc73317.js";import{L as Ie}from"./index-c74e2b58.js";import{A as Se}from"./index-e394210d.js";import{_ as ne,I as be}from"./loading-black-d850f57c.js";import{_ as we}from"./icon-close-ffb8f992.js";import{a as Ce,A as Ne}from"./activity-1845c990.js";import{H as K}from"./request-6724ac56.js";import{f as Le}from"./filter-09506a2e.js";import{a as b}from"./function-call-1366be59.js";import{B as Be}from"./index-c65add84.js";import{P as Ee}from"./index-c95161c5.js";import{I as qe}from"./index-49d41786.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-e1afc077.js";import"./use-expose-9032f2c9.js";import"./isSymbol-88262e3a.js";import"./use-route-4e332491.js";import"./index-972af07d.js";import"./on-popup-reopen-e2cd79b3.js";const U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAixJREFUSEu1lr9rU1EUxz/f15Qq6lLyMqiLk07+BaJNi79B6VIRBHFQBKsEhG5KBkWEgkJ10AoqiKso2IBgXlwcxMnJzaU6JEHRirQkuUeSZ2PTvuS9Krnr/d7zveec7/neK3osC4a3w8Bx4CjGbqR0C25WRXwAXkLjubJf57uFUdSGvUpvJeXlkZ0BpXpdAqyO6SF1l9eB6pfV2DUEVkwfQ94TYEvvwGt2FzB3SqPVFyt3Ogis5F/EcRvJW2fwEG7m8MhppDKzfL5N0Lo5evbPwZcjNkmw8eVMWgStmg96H2PLIvuBUx0xHJPhAjW3q9mTkKCYuY84G3NoCdfYi9lPBlLvgE098casRsvn9EeKn+LVwnlly/daFwr806BHseqisUMW+BdAd2LAd5WtTK7EWODfAuVizk02CQqgQ12BshlKlZzyuA4CQ5T8G6ApIHKewAqyoj+PtC2CYBHnLmmsOttz2t/4Ezg9iBSI2WdZkFkEhjqCiF+Y26ds9X2SebBieid4byPUtRRNAIvIHdFINUhEEPh7QAVg8yr8UvcShVN5E6tcVZZ6NyIrZaYwux6pwrBE/hzocI8mB9Tq49r/7XtHk+cYYqP/GHSie5bNJieSKa+plA9qgkbbEUqZpxgnE8i05fkJBs2uKVu5Eg5a5jIwnWjQkluFNTAbw7wanpVAg4msYl1m11RXuDasy+zCLPpo138b18cHp03SzyezTdLPR7/Tkv//2/IbjFwTkllaBtYAAAAASUVORK5CYII=",Je=v=>K("/promotion-client/activity/deficitSubsidy/getTotal/".concat(v.activityId),{},"get"),Re=v=>K("/promotion-client/activity/deficitSubsidy/sendCoins/".concat(v.recordId,"\n"),v,"post"),Ve=v=>K("/promotion-client/activity/deficitSubsidy/recordList",v,"post"),E=v=>($e("data-v-d6eb37e0"),v=v(),Ae(),v),Pe={class:"body"},xe={class:"banner"},Fe=["src"],ze={class:"px-3"},Ke={class:"tips"},Ue={style:{color:"#FECE2D"}},He=E(()=>o("img",{src:U,alt:""},null,-1)),Oe={class:"condition"},je={class:"left"},We={class:"text"},Me={class:"gold"},Ge=E(()=>o("img",{src:U,alt:""},null,-1)),Ye={class:"detail_div"},Qe={class:"top_div",id:"tabBig"},Xe=["onClick","id"],Ze={key:0,class:"bottom_div"},es={class:"displayGrid2",style:{"border-radius":"6px 6px 0 0",height:"40px"}},ss={key:1,class:"maxSubsidyCoin"},ts=E(()=>o("img",{src:U,alt:""},null,-1)),os={class:"px-3"},ns={class:"rule"},is={class:"rule-title"},as=["innerHTML"],ls={key:0,class:"games"},ds={key:0,class:"games-title"},rs={key:1,class:"games_content"},cs={class:"games_left"},us=["id","onClick"],ps=["src"],gs=["src"],_s=["id"],vs=["id"],ms=["onClick"],ys={class:"games_right_grd"},hs=["onClick"],fs=E(()=>o("img",{src:ne,class:"imgs",alt:""},null,-1)),Ts={class:"div_s"},$s={key:2,class:"games_content games_content2"},As={class:"games-title2"},ks={class:"games_right games_right2"},Is=["id"],Ss={class:"games_right_grd"},bs=["onClick"],ws=E(()=>o("img",{src:ne,class:"imgs",alt:""},null,-1)),Cs={class:"div_s"},Ns={style:{height:"300px"}},Ls={class:"table"},Bs={class:"table-header"},Es={class:"item"},qs={class:"item"},Ds={class:"item"},Js={class:"item"},Rs={class:"item"},Vs={class:"item"},Ps={key:0},xs={key:1},Fs={key:2,style:{color:"#f62727"}},zs=ye({__name:"index",setup(v){const{t:q}=he(),H=p(null),w=p(!1),a=fe({gameTypeTenants:[],gameTypeTenants2:[],ruleDescription:"",scrollToAnchorKey:"",ruleList:{},positions:[],positionsIndex:0,data:{},activeInfo:{},subsidyType:1}),A=p({}),O=p([]),j=p(""),C=p(!1),_=p({recordId:0,cyclePeriod:0,deficitCoin:0,subsidyCoin:0,getStatus:0}),k=p([]),I=p(!1),S=p(!1),D=p(0),y=p([]),N=p(!1),L=p(!1),W=p(0);Te(()=>{ae(),re(),G(),H.value&&H.value.addEventListener("scroll",Z)});const M=async(e,s)=>{try{C.value=!0,W.value=s;let i=e||_.value.recordId;await Re({recordId:i})&&(b(q("ling_qu_cg")),G(),C.value=!1),e&&Y()}catch(i){b(i.msg)}finally{C.value=!1}},G=async()=>{try{const e=await Je({activityId:B("activityConfigId")});_.value=e}catch(e){}},ie=()=>{I.value=!0,D.value=0,y.value=[],N.value=!1},Y=()=>{D.value=0,y.value=[],N.value=!1,S.value=!0,Q()},Q=async()=>{try{D.value++,L.value&&(y.value=[],L.value=!1);const e=await Ve({pageSize:30,pageNum:D.value});S.value=!1,y.value=[...y.value,...e.list],y.value.length>=e.total&&(N.value=!0),y.value.length==0&&(N.value=!0)}catch(e){b(e.msg)}finally{S.value=!1}},ae=async()=>{const e=await Ce();try{let s=B("activityConfigId")||0;const[i]=Le(e,u=>u.activityConfigId==s);a.activeInfo=i||{}}catch(s){b(s.msg)}},le=e=>{a.positionsIndex=e,de(e)},de=e=>{const s=document.getElementById("tabBig");let u=document.querySelector("body").offsetWidth/2;const g=document.getElementById("anchor_".concat(e));let T=g.offsetLeft,x=g.clientWidth,J=T+x/2;J>u?s.scrollTo({left:J-u,behavior:"smooth"}):s.scrollTo({left:0,behavior:"smooth"})},re=async()=>{try{const e=await Ne(B("activityConfigId"));try{a.data=e,a.ruleDescription=e.ruleDescription?Object.values(JSON.parse(e.ruleDescription))[0]:"",a.ruleList=JSON.parse(e.ruleJson),console.log(a.ruleList,"set.ruleList"),a.subsidyType=a.ruleList.subsidyType,a.positions=JSON.parse(e.ruleJson).positions;const s=[];if(a.ruleList.rules.forEach(i=>{for(let u=i.minVipLevel;u<=i.maxVipLevel;u++)console.log(i,"item"),s.push({level:"vip"+u,rulus:i.details,maxSubsidyCoin:i.maxSubsidyCoin})}),console.log(s,"vipArr"),k.value=s,e.gameTypeTenants&&e.gameTypeTenants[0]!=null){let i=e.gameTypeTenants.filter(u=>u.gameTenantDetails&&u.gameTenantDetails[0]!=null);i=i.map(u=>{let g=u.gameTenantDetails.map(T=>T.companyTypeName);return g=[...new Set(g)],g=g.map(T=>({name:T})),g[0]!=null&&g.length>1&&(u.gruop=[{name:q("quan_bu")},...g]),u}),a.gameTypeTenants2=JSON.parse(JSON.stringify(i)),a.gameTypeTenants=JSON.parse(JSON.stringify(i)),a.gameTypeTenants[0]!=null&&(a.scrollToAnchorKey="".concat(a.gameTypeTenants[0].id,"_").concat(a.gameTypeTenants[0].typeName))}}catch(s){b(s.msg)}}catch(e){b(e.msg)}},ce=e=>{let s=!1;return document.getElementById(e)&&document.getElementById(e).scrollWidth>65&&(s=!0),s},ue=e=>{let s=q("quan_bu");return A.value[e]!=null&&(s=A.value[e]),s},pe=(e,s)=>{O.value=s,j.value=e,w.value=!0},ge=e=>{w.value=!1,A.value[j.value]=e.name;let s=JSON.parse(JSON.stringify(a.gameTypeTenants2)).map(i=>(A.value["".concat(i.id,"_").concat(i.typeName)]!=null&&A.value["".concat(i.id,"_").concat(i.typeName)]!=q("quan_bu")&&(i.gameTenantDetails=i.gameTenantDetails.filter(u=>u.companyTypeName==A.value["".concat(i.id,"_").concat(i.typeName)])),i));a.gameTypeTenants=JSON.parse(JSON.stringify(s))},X=e=>{let s={gameId:e.gameId,nameI18N:e.name,pathname:"/game",companyTypeId:e.companyTypeId},i=B("device");i==="android"?window.jsandroid.jumpGame(JSON.stringify(s)):i==="ios"?window.webkit.messageHandlers.jumpGame.postMessage(s):window.parent.postMessage({type:"jumpGame",data:s},"*")},_e=e=>{let s={url:e},i=B("device");i==="android"?window.jsandroid.routers(JSON.stringify(s)):i==="ios"?window.webkit.messageHandlers.routers.postMessage(s):window.parent.postMessage({type:"routers",data:s},"*")},ve=e=>{a.scrollToAnchorKey=e;const s=document.getElementById("".concat(e,"_right"));s&&s.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})},Z=()=>{document.querySelectorAll(".games_right_div").forEach(s=>{const i=s.getBoundingClientRect();if(i.top<window.innerHeight&&i.bottom>=0&&a.scrollToAnchorKey!=s.id.replace("_right","")){const u=s.id.replace("_right","");a.scrollToAnchorKey=u}})};return(e,s)=>{var ee,se,te,oe;const i=Be,u=qe,g=be,T=Se,x=Ie,J=ke,me=Ee;return d(),r("div",Pe,[o("div",{class:"record",onClick:ie},l(e.$t("reliefFundRecords")),1),o("div",xe,[o("img",{src:(ee=n(a).activeInfo)==null?void 0:ee.activityHomePage},null,8,Fe)]),o("div",ze,[o("div",Ke,[o("div",null,[F(l(n(_).cyclePeriod==1?e.$t("yesterdayLoss"):n(_).cyclePeriod==2?e.$t("lossLastWeek"):e.$t("lossLastMonth"))+"： ",1),o("span",Ue,l(n(_).deficitCoin),1)]),He]),o("div",Oe,[o("div",je,[o("span",We,l(n(_).cyclePeriod==1?e.$t("reliefMoneyToday"):n(_).cyclePeriod==2?e.$t("reliefMoneyLastWeek"):e.$t("reliefMoneyLastMonth")),1),o("span",Me,[o("i",null,l(n(_).subsidyCoin),1),Ge])]),m(i,{class:"button",onClick:s[0]||(s[0]=t=>M()),disabled:n(_).getStatus!=0||!n(_).recordId,loading:n(C)},{default:$(()=>[F(l(n(_).getStatus==0?e.$t("ling_qu"):n(_).getStatus==1?e.$t("yi_ling_qu"):e.$t("yiguoqi")),1)]),_:1},8,["disabled","loading"])])]),o("div",Ye,[o("div",Qe,[(d(!0),r(h,null,f(n(k),(t,c)=>(d(),r("div",{key:t.num,class:z(["positions",n(a).positionsIndex==c?"positions_2":""]),onClick:R=>le(c),id:"anchor_".concat(c)},[o("div",null,l(e.$t("VIP"))+l(c),1)],10,Xe))),128))]),(se=n(k)[n(a).positionsIndex])!=null&&se.rulus?(d(),r("div",Ze,[o("div",es,[o("div",null,l(e.$t("lossAmount")),1),o("div",null,l(e.$t("rescueFund")),1)]),(d(!0),r(h,null,f(n(k)[n(a).positionsIndex].rulus,(t,c)=>(d(),r("div",{class:"displayGrid2",key:c},[o("div",null,"≥ "+l(t.deficitCoin),1),o("div",null,l(t.subsidy)+l(n(a).subsidyType==2?"%":""),1)]))),128))])):V("",!0),((te=n(k)[n(a).positionsIndex])==null?void 0:te.maxSubsidyCoin)>0?(d(),r("div",ss,[o("span",null,l(e.$t("maxSubsidyCoin"))+" "+l((oe=n(k)[n(a).positionsIndex])==null?void 0:oe.maxSubsidyCoin),1),ts])):V("",!0)]),o("div",os,[o("div",ns,[o("div",is,l(e.$t("huo_dong_gz")),1),o("div",{class:"rule-content",innerHTML:n(a).ruleDescription},null,8,as)])]),n(a).gameTypeTenants[0]!=null?(d(),r("div",ls,[n(a).ruleList.platformDetermine!=2?(d(),r("div",ds,l(e.$t("wanyouxicanyuhuodong")),1)):V("",!0),n(a).ruleList.platformDetermine!=2?(d(),r("div",rs,[o("div",cs,[(d(!0),r(h,null,f(n(a).gameTypeTenants,(t,c)=>(d(),r("div",{key:t.id,class:z(["games_left_div",n(a).scrollToAnchorKey=="".concat(t.id,"_").concat(t.typeName)?"games_left_div2":""]),id:"".concat(t.id,"_").concat(t.typeName),onClick:R=>ve("".concat(t.id,"_").concat(t.typeName))},[n(a).scrollToAnchorKey=="".concat(t.id,"_").concat(t.typeName)?(d(),r("img",{key:0,src:t.iconActive,alt:""},null,8,ps)):(d(),r("img",{key:1,src:t.icon,alt:""},null,8,gs)),o("div",null,[o("div",{id:"".concat(t.id,"_").concat(c),class:z({rollStyle:ce("".concat(t.id,"_").concat(c))})},l(t.typeName),11,_s)])],10,us))),128))]),o("div",{class:"games_right",onScroll:Z},[(d(!0),r(h,null,f(n(a).gameTypeTenants,t=>(d(),r("div",{key:t.id,class:"games_right_div",id:"".concat(t.id,"_").concat(t.typeName,"_right")},[t.gruop?(d(),r("div",{key:0,class:"Selected",onClick:c=>pe("".concat(t.id,"_").concat(t.typeName),t.gruop)},[o("div",null,l(ue("".concat(t.id,"_").concat(t.typeName))),1),m(u,{name:"arrow-down",color:"#98A7B5",size:"12"})],8,ms)):V("",!0),o("div",ys,[(d(!0),r(h,null,f(t.gameTenantDetails,c=>(d(),r("div",{key:c.gameId,class:"games_right_div2",onClick:R=>X(c)},[m(g,{"lazy-load":"",src:c.h5Img,radius:5,class:"imgs"},{loading:$(()=>[fs]),_:2},1032,["src"]),o("div",Ts,l(c.name),1)],8,hs))),128))])],8,vs))),128))],32)])):(d(),r("div",$s,[o("div",As,l(e.$t("wanyouxicanyuhuodong")),1),o("div",ks,[(d(!0),r(h,null,f(n(a).gameTypeTenants,t=>(d(),r("div",{key:t.id,class:"games_right_div",id:"".concat(t.id,"_").concat(t.typeName,"_right")},[o("div",Ss,[(d(!0),r(h,null,f(t.gameTenantDetails,c=>(d(),r("div",{key:c.gameId,class:"games_right_div2",onClick:R=>X(c)},[m(g,{"lazy-load":"",src:c.h5Img,radius:5,class:"imgs"},{loading:$(()=>[ws]),_:2},1032,["src"]),o("div",Cs,l(c.name),1)],8,bs))),128))])],8,Is))),128))])]))])):(d(),r("div",{key:1,class:"but_wxy",onClick:s[1]||(s[1]=t=>_e("/game"))},l(e.$t("quwanyouxi")),1)),m(T,{show:n(w),"onUpdate:show":s[2]||(s[2]=t=>P(w)?w.value=t:null),actions:n(O),onSelect:ge},null,8,["show","actions"]),m(me,{show:n(I),"onUpdate:show":s[7]||(s[7]=t=>P(I)?I.value=t:null),"close-on-click-overlay":!1,class:"popup-record-content"},{default:$(()=>[o("div",{class:"title",onClick:s[4]||(s[4]=t=>I.value=!1)},[o("span",null,l(e.$t("reliefFundRecords")),1),o("img",{src:we,onClick:s[3]||(s[3]=t=>I.value=!1)})]),o("div",Ns,[o("div",Ls,[o("div",Bs,[o("div",Es,l(e.$t("releaseDate")),1),o("div",qs,l(e.$t("rescueFund")),1),o("div",Ds,l(e.$t("state")),1)]),m(J,{modelValue:n(L),"onUpdate:modelValue":s[6]||(s[6]=t=>P(L)?L.value=t:null),onRefresh:Y,"loosing-text":e.$t("loosingText"),"pulling-text":e.$t("pullingText")},{default:$(()=>[m(x,{loading:n(S),"onUpdate:loading":s[5]||(s[5]=t=>P(S)?S.value=t:null),finished:n(N),"finished-text":e.$t("meiyougengduole"),"loading-text":e.$t("jia_zai_zhong"),class:"table-body",onLoad:Q},{default:$(()=>[(d(!0),r(h,null,f(n(y),(t,c)=>(d(),r("div",{key:c,class:"item-box"},[o("div",Js,l(t.sendDay),1),o("div",Rs,l(t.subsidyCoin),1),o("div",Vs,[t.getStatus==0&&t.recordId!=null&&t.recordId!=0?(d(),r("span",Ps,[m(i,{class:"button",onClick:R=>M(t.recordId,c),loading:n(W)==c?n(C):!1},{default:$(()=>[F(l(e.$t("ling_qu")),1)]),_:2},1032,["onClick","loading"])])):t.getStatus==1?(d(),r("span",xs,l(e.$t("yi_ling_qu")),1)):(d(),r("span",Fs,l(e.$t("yiguoqi")),1))])]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["modelValue","loosing-text","pulling-text"])])])]),_:1},8,["show"])])}}});const dt=De(zs,[["__scopeId","data-v-d6eb37e0"]]);export{dt as default};
