var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{f as d,_ as u}from"./index-AUd2T663.js";import{_ as n}from"./ButtonTable-BCd2qicg.js";/* empty css               */import{h as i,r as m,X as p,j as f,t as c,m as b,q as _,aN as v,G as g,J as y,M as h,aU as w,aJ as j,aY as x,z as V,u as O,Z as k,_ as C,ap as P,s as U,i as q,Y as B,aj as T,E as Y}from"./vendor-CC2XCvy_.js";const D={class:"page-content"},E={class:"dialog-footer"},I=u(i({__name:"Department",setup(e){const u=m("add"),i=m(!1),I=p({name:"",sort:"1",status:!0}),J=p([{id:1,date:"2016-05-02",name:"人力资源部",status:1,sort:1},{id:2,date:"2016-05-04",name:"公关部",status:1,sort:2},{id:3,date:"2016-05-01",name:"市场部",status:1,sort:3,children:[{id:31,date:"2016-05-01",name:"王小虎",status:1,sort:1},{id:32,date:"2016-05-01",name:"王小虎",status:0,sort:2}]},{id:4,date:"2016-05-03",name:"财务部",status:1,sort:4},{id:5,date:"2016-05-03",name:"广告部",status:1,sort:5},{id:6,date:"2016-05-03",name:"营销部",status:1,sort:5},{id:7,date:"2016-05-03",name:"开发部",status:1,sort:5},{id:8,date:"2016-05-03",name:"测试部",status:1,sort:5},{id:9,date:"2016-05-03",name:"安全监察部",status:0,sort:5},{id:10,date:"2016-05-03",name:"设计部",status:1,sort:5},{id:11,date:"2016-05-03",name:"监事会",status:1,sort:5},{id:12,date:"2016-05-03",name:"董事会",status:1,sort:5}]),S=m(),z=p({name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}]}),G=()=>{I.name="",I.sort="1",I.status=!0},M=(e,t)=>{u.value=e,i.value=!0,"edit"===e&&t?(I.name=t.name,I.sort=t.sort.toString(),I.status=1===t.status):G()},N=()=>{T.confirm("确定要删除该部门吗？","删除部门",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{}))},R=()=>{return e=this,d=null,n=function*(){S.value&&(yield S.value.validate((e=>{var d,n;e&&(d=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&o(e,a,t[a]);return e})({},I),n={status:I.status?1:0},t(d,a(n)),Y.success("add"===u.value?"添加成功":"修改成功"),i.value=!1)})))},new Promise(((t,a)=>{var s=e=>{try{r(n.next(e))}catch(t){a(t)}},l=e=>{try{r(n.throw(e))}catch(t){a(t)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);r((n=n.apply(e,d)).next())}));var e,d,n};return(e,t)=>{const a=g,s=v,l=y,r=w,o=j,m=x,p=n,T=d,Y=C,X=P,Z=k,$=B;return c(),f("div",D,[b(r,{gutter:12},{default:_((()=>[b(s,{xs:24,sm:12,lg:8},{default:_((()=>[b(a,{placeholder:"部门名称"})])),_:1}),b(s,{xs:24,sm:12,lg:8,class:"el-col2"},{default:_((()=>[b(l,null,{default:_((()=>t[6]||(t[6]=[h("搜索")]))),_:1}),b(l,{onClick:t[0]||(t[0]=e=>M("add"))},{default:_((()=>t[7]||(t[7]=[h("新增部门")]))),_:1})])),_:1})])),_:1}),b(T,{data:O(J)},{default:_((()=>[b(o,{prop:"name",label:"名称"}),b(o,{prop:"sort",label:"排序",sortable:""}),b(o,{prop:"date",label:"日期"}),b(o,{label:"状态",prop:"status"},{default:_((e=>[b(m,{type:1===e.row.status?"primary":"info"},{default:_((()=>[h(V(1===e.row.status?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1}),b(o,{fixed:"right",label:"操作",width:"150px"},{default:_((e=>[b(p,{type:"edit",onClick:t=>M("edit",e.row)},null,8,["onClick"]),b(p,{type:"delete",onClick:N})])),_:1})])),_:1},8,["data"]),b($,{modelValue:O(i),"onUpdate:modelValue":t[5]||(t[5]=e=>q(i)?i.value=e:null),title:"add"===O(u)?"添加部门":"编辑部门",width:"30%",onClosed:G},{footer:_((()=>[U("div",E,[b(l,{onClick:t[4]||(t[4]=e=>i.value=!1)},{default:_((()=>t[8]||(t[8]=[h("取消")]))),_:1}),b(l,{type:"primary",onClick:R},{default:_((()=>t[9]||(t[9]=[h("提交")]))),_:1})])])),default:_((()=>[b(Z,{ref_key:"formRef",ref:S,model:O(I),rules:O(z),"label-width":"60px"},{default:_((()=>[b(Y,{label:"名称",prop:"name"},{default:_((()=>[b(a,{modelValue:O(I).name,"onUpdate:modelValue":t[1]||(t[1]=e=>O(I).name=e)},null,8,["modelValue"])])),_:1}),b(Y,{label:"排序",prop:"sort"},{default:_((()=>[b(a,{modelValue:O(I).sort,"onUpdate:modelValue":t[2]||(t[2]=e=>O(I).sort=e)},null,8,["modelValue"])])),_:1}),b(Y,{label:"状态",prop:"status"},{default:_((()=>[b(X,{modelValue:O(I).status,"onUpdate:modelValue":t[3]||(t[3]=e=>O(I).status=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-9a5daee0"]]);export{I as default};
