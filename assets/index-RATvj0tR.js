import{i as M}from"./index-p1XoTQj1.js";import{r as b,o as p,l as E,b as s,w as t,e as i,c as v,a7 as K,fS as j,E as d,aB as U,h as B,ax as I,j as V,fT as P,fU as W,_ as q,aM as z,ce as L,a as S,H as D,O as H,u as N,d as h,a4 as J,bV as A,fV as F,bO as G}from"./index-BF2fBoPb.js";import{i as Q}from"./index-Cjr4ibGp.js";import{i as O}from"./index-DG03PXF-.js";import"./index-CcYpqHDV.js";import"./index-B-b3I1wI.js";import"./index-BnIMXyIx.js";import"./virtual-list-B6G0p9cv.js";import"./index-BWYZqqjh.js";import"./index-DuliLu7F.js";import"./isArrayLikeObject-j402kJv_.js";import"./vuedraggable.umd-DLnsjw3h.js";const X={__name:"message-notice",emits:["reload"],setup(R,{emit:w}){const k=w,c=b(null),_=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"通知标题",minWidth:110},{prop:"time",label:"通知时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),r=b([]),y=({pages:o,where:e,orders:n})=>j({...e,...n,...o}),a=o=>{if(!(o==null?r.value:[o]).length){d.error("请至少选择一条数据");return}d.success("点击了确认"),u()},f=o=>{if(!(o==null?r.value:[o]).length){d.error("请至少选择一条数据");return}d.error("点击了删除")},u=()=>{k("reload")};return(o,e)=>{const n=U,g=B,x=I,C=V,$=O;return p(),E("div",null,[s($,{ref_key:"tableRef",ref:c,"row-key":"id",columns:_.value,datasource:y,"show-overflow-tooltip":!0,selections:r.value,"onUpdate:selections":e[2]||(e[2]=l=>r.value=l),"highlight-current-row":!0,"export-config":{fileName:"系统通知数据"}},{toolbar:t(()=>[s(n,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=l=>a())},{default:t(()=>e[3]||(e[3]=[i(" 批量确认 ")])),_:1}),s(n,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=l=>f())},{default:t(()=>e[4]||(e[4]=[i(" 删除通知 ")])),_:1})]),status:t(({row:l})=>[l.status===0?(p(),v(g,{key:0,type:"warning"},{default:t(()=>e[5]||(e[5]=[i("未确认")])),_:1})):l.status===1?(p(),v(g,{key:1,type:"info"},{default:t(()=>e[6]||(e[6]=[i("已确认")])),_:1})):K("",!0)]),action:t(({row:l})=>[s(x,{type:"primary",underline:!1,onClick:m=>a(l)},{default:t(()=>e[7]||(e[7]=[i(" 确认 ")])),_:2},1032,["onClick"]),s(C,{direction:"vertical"}),s(x,{type:"danger",underline:!1,onClick:m=>f(l)},{default:t(()=>e[8]||(e[8]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},Y={__name:"message-letter",emits:["reload"],setup(R,{emit:w}){const k=w,c=b(null),_=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"私信内容",minWidth:110},{prop:"time",label:"发送时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),r=b([]),y=({pages:e,where:n,orders:g})=>P({...n,...g,...e}),a=e=>{console.log(JSON.stringify(e)),d.success("点击了回复")},f=e=>{if(!(e==null?r.value:[e]).length){d.error("请至少选择一条数据");return}d.error("点击了删除")},u=()=>{if(!r.value.length){d.error("请至少选择一条数据");return}d.success("点击了标记已读"),o()},o=()=>{k("reload")};return(e,n)=>{const g=U,x=B,C=I,$=V,l=O;return p(),E("div",null,[s(l,{ref_key:"tableRef",ref:c,"row-key":"id",columns:_.value,datasource:y,"show-overflow-tooltip":!0,selections:r.value,"onUpdate:selections":n[1]||(n[1]=m=>r.value=m),"highlight-current-row":!0,"export-config":{fileName:"用户私信数据"}},{toolbar:t(()=>[s(g,{type:"primary",class:"ele-btn-icon",onClick:u},{default:t(()=>n[2]||(n[2]=[i(" 标记已读 ")])),_:1}),s(g,{type:"danger",class:"ele-btn-icon",onClick:n[0]||(n[0]=m=>f())},{default:t(()=>n[3]||(n[3]=[i(" 删除消息 ")])),_:1})]),status:t(({row:m})=>[m.status===0?(p(),v(x,{key:0,type:"warning"},{default:t(()=>n[4]||(n[4]=[i("未读")])),_:1})):m.status===1?(p(),v(x,{key:1,type:"info"},{default:t(()=>n[5]||(n[5]=[i("已读")])),_:1})):K("",!0)]),action:t(({row:m})=>[s(C,{type:"primary",underline:!1,onClick:T=>a(m)},{default:t(()=>n[6]||(n[6]=[i(" 回复 ")])),_:2},1032,["onClick"]),s($,{direction:"vertical",style:{margin:"0"}}),s(C,{type:"danger",underline:!1,onClick:T=>f(m)},{default:t(()=>n[7]||(n[7]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},Z={__name:"message-todo",emits:["reload"],setup(R,{emit:w}){const k=w,c=b(null),_=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"待办内容",minWidth:110},{prop:"time",label:"结束时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),r=b([]),y=({pages:o,where:e,orders:n})=>W({...e,...n,...o}),a=o=>{if(!(o==null?r.value:[o]).length){d.error("请至少选择一条数据");return}d.success("点击了完成"),u()},f=o=>{if(!(o==null?r.value:[o]).length){d.error("请至少选择一条数据");return}d.error("点击了删除")},u=()=>{k("reload")};return(o,e)=>{const n=U,g=B,x=I,C=V,$=O;return p(),E("div",null,[s($,{ref_key:"tableRef",ref:c,"row-key":"id",columns:_.value,datasource:y,"show-overflow-tooltip":!0,selections:r.value,"onUpdate:selections":e[2]||(e[2]=l=>r.value=l),"highlight-current-row":!0,"export-config":{fileName:"待办事项数据"}},{toolbar:t(()=>[s(n,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=l=>a())},{default:t(()=>e[3]||(e[3]=[i(" 批量完成 ")])),_:1}),s(n,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=l=>f())},{default:t(()=>e[4]||(e[4]=[i(" 删除待办 ")])),_:1})]),status:t(({row:l})=>[l.status===0?(p(),v(g,{key:0,type:"warning"},{default:t(()=>e[5]||(e[5]=[i("未完成")])),_:1})):l.status===1?(p(),v(g,{key:1,type:"info"},{default:t(()=>e[6]||(e[6]=[i("已完成")])),_:1})):K("",!0)]),action:t(({row:l})=>[s(x,{type:"primary",underline:!1,onClick:m=>a(l)},{default:t(()=>e[7]||(e[7]=[i(" 完成 ")])),_:2},1032,["onClick"]),s(C,{direction:"vertical"}),s(x,{type:"danger",underline:!1,onClick:m=>f(l)},{default:t(()=>e[8]||(e[8]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},ee={class:"message-side"},te={class:"message-body"},ne={name:"UserMessage"},oe=Object.assign(ne,{setup(R){const{currentRoute:w}=z(),{mobile:k}=L(),c=b("notice"),_=S({notice:0,letter:0,todo:0}),r=D(()=>[{index:"notice",path:"/user/message?type=notice",title:"系统通知",badge:{value:_.notice}},{index:"letter",path:"/user/message?type=letter",title:"用户私信",badge:{value:_.letter}},{index:"todo",path:"/user/message?type=todo",title:"待办事项",badge:{value:_.todo}}]);H(w,a=>{const{path:f,query:u}=N(a);if(f==="/user/message"){const o="notice";u.type?typeof u.type=="string"?c.value=u.type:u.type.length&&u.type[0]?c.value=u.type[0]:c.value=o:c.value=o}},{immediate:!0});const y=()=>{F().then(a=>{Object.assign(_,a)}).catch(a=>{d.error(a.message)})};return y(),(a,f)=>{const u=G,o=Q,e=M;return p(),v(e,{"multi-card":!1},{default:t(()=>[s(o,{"body-style":{padding:0}},{default:t(()=>[h("div",{class:J(["message-wrapper",{"is-mobile":N(k)}])},[h("div",ee,[s(u,{items:r.value,"default-active":c.value,mode:N(k)?"horizontal":"vertical"},null,8,["items","default-active","mode"])]),h("div",te,[s(A,{name:"slide-right",mode:"out-in"},{default:t(()=>[c.value=="notice"?(p(),v(X,{key:0,onReload:y})):c.value=="todo"?(p(),v(Z,{key:1,onReload:y})):(p(),v(Y,{key:2,onReload:y}))]),_:1})])],2)]),_:1})]),_:1})}}}),ye=q(oe,[["__scopeId","data-v-4b4e6726"]]);export{ye as default};
