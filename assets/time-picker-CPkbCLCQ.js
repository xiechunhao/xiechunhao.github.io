import{t as Se,u as Te,T as z,d as R,a as _e,b as Pe,c as Ce,e as De,f as we,D as Re,C as Ve}from"./date-picker-wyenFiKS.js";import{ed as Ae,ee as H,ef as Q,eg as xe,eh as Oe,dq as Ee,a3 as Ie,bQ as Me,a9 as Ne,L as W,cv as ye,a1 as J,N as Be,J as T,r as X,o as Fe,m as He,e as h,a5 as b,u as s,t as x,b as E,a8 as Ue,cr as U,bZ as Ke,Z as Le,a$ as $e}from"./index-C4BxmZrN.js";import{b as je,i as Ze}from"./isArrayLikeObject-XYcYxEsS.js";function qe(){}function Ge(t){return t!==t}function Ye(t,r,o){for(var u=o-1,m=t.length;++u<m;)if(t[u]===r)return u;return-1}function ze(t,r,o){return r===r?Ye(t,r,o):Ae(t,Ge,o)}function Je(t,r){var o=t==null?0:t.length;return!!o&&ze(t,r,0)>-1}var Qe=1/0,We=H&&1/Q(new H([,-0]))[1]==Qe?function(t){return new H(t)}:qe,Xe=200;function en(t,r,o){var u=-1,m=Je,v=t.length,a=!0,i=[],f=i;if(v>=Xe){var _=We(t);if(_)return Q(_);a=!1,m=Oe,f=new xe}else f=i;e:for(;++u<v;){var k=t[u],S=k;if(k=k!==0?k:0,a&&S===S){for(var V=f.length;V--;)if(f[V]===S)continue e;i.push(k)}else m(f,S,o)||(f!==i&&f.push(S),i.push(k))}return i}var K=je(function(t){return en(Ee(t,1,Ze,!0))});const nn=Ie({...Se,parsedValue:{type:Me(Array)}}),an=["disabled"],tn=W({__name:"panel-time-range",props:nn,emits:["pick","select-range","set-picker-option"],setup(t,{emit:r}){const o=t,u=(e,n)=>{const l=[];for(let c=e;c<=n;c++)l.push(c);return l},{t:m,lang:v}=ye(),a=J("time"),i=J("picker"),f=Be("EP_PICKER_BASE"),{arrowControl:_,disabledHours:k,disabledMinutes:S,disabledSeconds:V,defaultValue:I}=f.props,ee=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),D.value?"has-seconds":""]),ne=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),D.value?"has-seconds":""]),P=T(()=>o.parsedValue[0]),C=T(()=>o.parsedValue[1]),ae=Te(o),te=()=>{r("pick",ae.value,!1)},D=T(()=>o.format.includes("ss")),L=T(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{r("pick",[P.value,C.value],e)},oe=e=>{$(e.millisecond(0),C.value)},re=e=>{$(P.value,e.millisecond(0))},le=e=>{const n=e.map(c=>R(c).locale(v.value)),l=Z(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},$=(e,n)=>{r("pick",[e,n],!0)},ie=T(()=>P.value>C.value),A=X([0,2]),ce=(e,n)=>{r("select-range",e,n,"min"),A.value=[e,n]},j=T(()=>D.value?11:8),ue=(e,n)=>{r("select-range",e,n,"max");const l=s(j);A.value=[e+l,n+l]},de=e=>{const n=D.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(D.value?["seconds"]:[]),d=(n.indexOf(A.value[0])+e+n.length)%n.length,p=n.length/2;d<p?B.start_emitSelectRange(l[d]):B.end_emitSelectRange(l[d-p])},pe=e=>{const n=e.code,{left:l,right:c,up:d,down:p}=Ke;if([l,c].includes(n)){de(n===l?-1:1),e.preventDefault();return}if([d,p].includes(n)){const g=n===d?-1:1,w=A.value[0]<j.value?"start":"end";B[`${w}_scrollDown`](g),e.preventDefault();return}},M=(e,n)=>{const l=k?k(e):[],c=e==="start",p=(n||(c?C.value:P.value)).hour(),g=c?u(p+1,23):u(0,p-1);return K(l,g)},N=(e,n,l)=>{const c=S?S(e,n):[],d=n==="start",p=l||(d?C.value:P.value),g=p.hour();if(e!==g)return c;const w=p.minute(),F=d?u(w+1,59):u(0,w-1);return K(c,F)},y=(e,n,l,c)=>{const d=V?V(e,n,l):[],p=l==="start",g=c||(p?C.value:P.value),w=g.hour(),F=g.minute();if(e!==w||n!==F)return d;const Y=g.second(),ke=p?u(Y+1,59):u(0,Y-1);return K(d,ke)},Z=([e,n])=>[q(e,"start",!0,n),q(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=Pe(M,N,y),{timePickerOptions:B,getAvailableTime:q,onSetOption:G}=_e({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?U(e)?e.map(n=>R(n,o.format).locale(v.value)):R(e,o.format).locale(v.value):null,ge=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(U(I))return I.map(n=>R(n).locale(v.value));const e=R(I).locale(v.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",ge]),r("set-picker-option",["parseUserInput",ve]),r("set-picker-option",["isValidValue",le]),r("set-picker-option",["handleKeydownInput",pe]),r("set-picker-option",["getDefaultValue",he]),r("set-picker-option",["getRangeAvailableTime",Z]),(e,n)=>e.actualVisible?(Fe(),He("div",{key:0,class:b([s(a).b("range-picker"),s(i).b("panel")])},[h("div",{class:b(s(a).be("range-picker","content"))},[h("div",{class:b(s(a).be("range-picker","cell"))},[h("div",{class:b(s(a).be("range-picker","header"))},x(s(m)("el.datepicker.startTime")),3),h("div",{class:b(s(ee))},[E(z,{ref:"minSpinner",role:"start","show-seconds":s(D),"am-pm-mode":s(L),"arrow-control":s(_),"spinner-date":s(P),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:oe,onSetOption:s(G),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),h("div",{class:b(s(a).be("range-picker","cell"))},[h("div",{class:b(s(a).be("range-picker","header"))},x(s(m)("el.datepicker.endTime")),3),h("div",{class:b(s(ne))},[E(z,{ref:"maxSpinner",role:"end","show-seconds":s(D),"am-pm-mode":s(L),"arrow-control":s(_),"spinner-date":s(C),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:re,onSetOption:s(G),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),h("div",{class:b(s(a).be("panel","footer"))},[h("button",{type:"button",class:b([s(a).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=l=>te())},x(s(m)("el.datepicker.cancel")),3),h("button",{type:"button",class:b([s(a).be("panel","btn"),"confirm"]),disabled:s(ie),onClick:n[1]||(n[1]=l=>se())},x(s(m)("el.datepicker.confirm")),11,an)],2)],2)):Ue("v-if",!0)}});var sn=Ne(tn,[["__file","panel-time-range.vue"]]);R.extend(Ce);var on=W({name:"ElTimePicker",install:null,props:{...De,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,r){const o=X(),[u,m]=t.isRange?["timerange",sn]:["time",we],v=a=>r.emit("update:modelValue",a);return Le("ElPopperOptions",t.popperOptions),r.expose({focus:a=>{var i;(i=o.value)==null||i.handleFocusInput(a)},blur:a=>{var i;(i=o.value)==null||i.handleBlurInput(a)},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const i=(a=t.format)!=null?a:Re;return E(Ve,$e(t,{ref:o,type:u,format:i,"onUpdate:modelValue":v}),{default:f=>E(m,f,null)})}}});const O=on;O.install=t=>{t.component(O.name,O)};const un=O;export{un as E};
