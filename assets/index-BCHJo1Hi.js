import{d2 as sn,d3 as un,d4 as Xa,d5 as To,d6 as Ja,d7 as Qa,d8 as Za,d9 as er,da as tr,db as lr,dc as Ro,dd as nr,de as or,df as Pl,dg as ar,dh as rr,di as sr,dj as Ln,dk as ir,dl as ur,dm as cr,dn as dr,dp as fr,dq as hr,L as Re,a1 as Ze,r as O,ch as ot,J as H,u as E,U as gt,b_ as Kt,P as qe,W as Qe,dr as mr,a7 as Pn,V as re,c1 as Kl,ds as zt,cI as xo,dt as gr,du as vr,b as I,cE as Eo,c2 as Kn,cr as Wt,dv as zl,ci as el,R as de,O as yr,bJ as tl,dw as Cr,a9 as ko,aP as ft,aw as cn,g as ht,cH as pr,cG as br,cP as wr,cv as Ol,aj as K,dx as Oo,o as D,c as ne,w as j,m as Y,e as ye,a5 as pe,F as ze,n as $e,d as Ct,t as je,bU as ml,dy as dn,dz as Sr,dA as fn,N as vt,dB as Tl,c0 as Tr,cL as gl,dC as ll,T as Xt,bT as zn,dD as Wl,cC as Rr,cs as xr,Z as Ho,a2 as Ee,a6 as at,a8 as be,bV as Wn,dE as Er,cS as hn,dF as kr,dG as Or,K as Mo,aa as mn,ab as Hr,M as kt,co as gn,dH as vl,b$ as Dt,cO as Vn,bQ as we,cg as Mr,a3 as Bt,dI as Fr,a$ as Oe,dJ as $r,dK as Ir,aD as vn,dL as jt,aF as Hl,dM as He,dN as nl,bH as Fo,dO as Nr,$ as $o,a0 as Io,dP as Ar,aC as yn,aQ as Dr,i as Ml,bo as Lr,aG as Fl,b1 as We,aV as it,b2 as Je,be as Pr,dQ as Kr,a as ol,dR as zr,ce as Wr,bB as Vr,bA as Br,bx as jr,aL as No,aH as Ao,aI as _r,aK as Do,aJ as Lo,bc as Ur,aE as Po,dS as qr,dT as Gr,dU as Yr,dV as Xr,dW as Jr,av as Qr,b3 as Zr,dX as es}from"./index-C4BxmZrN.js";import{i as ts}from"./index-BY7TmcLY.js";import{i as ls}from"./index-Cw5RFCD5.js";import{b as ns,i as os}from"./isArrayLikeObject-XYcYxEsS.js";import{c as as,r as Ko,v as Nt,I as Bn,S as jn,F as ul,u as rs,B as _n,g as cl,A as Mt,R as ss,a as Un,b as is,d as qn,i as Gn,e as Yn,f as us,C as Pt,E as Vl,h as Bl,j as zo,D as Xn,k as cs,l as ds}from"./virtual-list-CYzSvSUd.js";import{i as fs}from"./index-DPWieFbN.js";import{V as hs}from"./vuedraggable.umd-BuphSp9t.js";import{i as ms}from"./index-CuklncWx.js";import{i as gs}from"./index-CL6ZmOyB.js";function vs(e,t,l){if(!sn(l))return!1;var n=typeof t;return(n=="number"?un(l)&&Xa(t,l.length):n=="string"&&t in l)?To(l[t],e):!1}function ys(e){return ns(function(t,l){var n=-1,o=l.length,s=o>1?l[o-1]:void 0,r=o>2?l[2]:void 0;for(s=e.length>3&&typeof s=="function"?(o--,s):void 0,r&&vs(l[0],l[1],r)&&(s=o<3?void 0:s,o=1),t=Object(t);++n<o;){var a=l[n];a&&e(t,a,n,s)}return t})}var Cs="[object Object]",ps=Function.prototype,bs=Object.prototype,Wo=ps.toString,ws=bs.hasOwnProperty,Ss=Wo.call(Object);function Ts(e){if(!Ja(e)||Qa(e)!=Cs)return!1;var t=Za(e);if(t===null)return!0;var l=ws.call(t,"constructor")&&t.constructor;return typeof l=="function"&&l instanceof l&&Wo.call(l)==Ss}function Rs(e){return function(t,l,n){for(var o=-1,s=Object(t),r=n(t),a=r.length;a--;){var i=r[++o];if(l(s[i],i,s)===!1)break}return t}}var Vo=Rs();function xs(e,t){return e&&Vo(e,t,er)}function Es(e,t){return function(l,n){if(l==null)return l;if(!un(l))return e(l,n);for(var o=l.length,s=-1,r=Object(l);++s<o&&n(r[s],s,r)!==!1;);return l}}var ks=Es(xs);function jl(e,t,l){(l!==void 0&&!To(e[t],l)||l===void 0&&!(t in e))&&tr(e,t,l)}function _l(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Os(e){return lr(e,Ro(e))}function Hs(e,t,l,n,o,s,r){var a=_l(e,l),i=_l(t,l),u=r.get(i);if(u){jl(e,l,u);return}var c=s?s(a,i,l+"",e,t,r):void 0,f=c===void 0;if(f){var h=Pl(i),g=!h&&nr(i),m=!h&&!g&&or(i);c=i,h||g||m?Pl(a)?c=a:os(a)?c=ar(a):g?(f=!1,c=rr(i,!0)):m?(f=!1,c=sr(i,!0)):c=[]:Ts(i)||Ln(i)?(c=a,Ln(a)?c=Os(a):(!sn(a)||ir(a))&&(c=ur(i))):f=!1}f&&(r.set(i,c),o(c,i,n,s,r),r.delete(i)),jl(e,l,c)}function Bo(e,t,l,n,o){e!==t&&Vo(t,function(s,r){if(o||(o=new cr),sn(s))Hs(e,t,r,l,Bo,n,o);else{var a=n?n(_l(e,r),s,r+"",e,t,o):void 0;a===void 0&&(a=s),jl(e,r,a)}},Ro)}function Ms(e,t){var l=-1,n=un(e)?Array(e.length):[];return ks(e,function(o,s,r){n[++l]=t(o,s,r)}),n}function Fs(e,t){var l=Pl(e)?fr:Ms;return l(e,dr(t))}function $s(e,t){return hr(Fs(e,t),1)}var Is=ys(function(e,t,l){Bo(e,t,l)}),Jn=!1,Ot,Ul,ql,yl,Cl,jo,pl,Gl,Yl,Xl,_o,Jl,Ql,Uo,qo;function nt(){if(!Jn){Jn=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),l=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Jl=/\b(iPhone|iP[ao]d)/.exec(e),Ql=/\b(iP[ao]d)/.exec(e),Xl=/Android/i.exec(e),Uo=/FBAN\/\w+;/i.exec(e),qo=/Mobile/i.exec(e),_o=!!/Win64/.exec(e),t){Ot=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Ot&&document&&document.documentMode&&(Ot=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);jo=n?parseFloat(n[1])+4:Ot,Ul=t[2]?parseFloat(t[2]):NaN,ql=t[3]?parseFloat(t[3]):NaN,yl=t[4]?parseFloat(t[4]):NaN,yl?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),Cl=t&&t[1]?parseFloat(t[1]):NaN):Cl=NaN}else Ot=Ul=ql=Cl=yl=NaN;if(l){if(l[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);pl=o?parseFloat(o[1].replace("_",".")):!0}else pl=!1;Gl=!!l[2],Yl=!!l[3]}else pl=Gl=Yl=!1}}var Zl={ie:function(){return nt()||Ot},ieCompatibilityMode:function(){return nt()||jo>Ot},ie64:function(){return Zl.ie()&&_o},firefox:function(){return nt()||Ul},opera:function(){return nt()||ql},webkit:function(){return nt()||yl},safari:function(){return Zl.webkit()},chrome:function(){return nt()||Cl},windows:function(){return nt()||Gl},osx:function(){return nt()||pl},linux:function(){return nt()||Yl},iphone:function(){return nt()||Jl},mobile:function(){return nt()||Jl||Ql||Xl||qo},nativeApp:function(){return nt()||Uo},android:function(){return nt()||Xl},ipad:function(){return nt()||Ql}},Ns=Zl,dl=!!(typeof window<"u"&&window.document&&window.document.createElement),As={canUseDOM:dl,canUseWorkers:typeof Worker<"u",canUseEventListeners:dl&&!!(window.addEventListener||window.attachEvent),canUseViewport:dl&&!!window.screen,isInWorker:!dl},Go=As,Yo;Go.canUseDOM&&(Yo=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Ds(e,t){if(!Go.canUseDOM||t&&!("addEventListener"in document))return!1;var l="on"+e,n=l in document;if(!n){var o=document.createElement("div");o.setAttribute(l,"return;"),n=typeof o[l]=="function"}return!n&&Yo&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var Ls=Ds,Qn=10,Zn=40,eo=800;function Xo(e){var t=0,l=0,n=0,o=0;return"detail"in e&&(l=e.detail),"wheelDelta"in e&&(l=-e.wheelDelta/120),"wheelDeltaY"in e&&(l=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=l,l=0),n=t*Qn,o=l*Qn,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||o)&&e.deltaMode&&(e.deltaMode==1?(n*=Zn,o*=Zn):(n*=eo,o*=eo)),n&&!t&&(t=n<1?-1:1),o&&!l&&(l=o<1?-1:1),{spinX:t,spinY:l,pixelX:n,pixelY:o}}Xo.getEventType=function(){return Ns.firefox()?"DOMMouseScroll":Ls("wheel")?"wheel":"mousewheel"};var Ps=Xo;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Ks=function(e,t){if(e&&e.addEventListener){const l=function(n){const o=Ps(n);t&&Reflect.apply(t,this,[n,o])};e.addEventListener("wheel",l,{passive:!0})}},zs={beforeMount(e,t){Ks(e,t.value)}},Ws=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:l,atYStartEdge:n},o)=>{let s=null,r=0,a=0;const i=(c,f)=>{const h=c<=0&&t.value||c>=0&&e.value,g=f<=0&&n.value||f>=0&&l.value;return h&&g};return{hasReachedEdge:i,onWheel:c=>{as(s);let f=c.deltaX,h=c.deltaY;Math.abs(f)>Math.abs(h)?h=0:f=0,c.shiftKey&&h!==0&&(f=h,h=0),!(i(r,a)&&i(r+f,a+h))&&(r+=f,a+=h,c.preventDefault(),s=Ko(()=>{o(r,a),r=0,a=0}))}}},Jo=({name:e,clearCache:t,getColumnPosition:l,getColumnStartIndexForOffset:n,getColumnStopIndexForStartIndex:o,getEstimatedTotalHeight:s,getEstimatedTotalWidth:r,getColumnOffset:a,getRowOffset:i,getRowPosition:u,getRowStartIndexForOffset:c,getRowStopIndexForStartIndex:f,initCache:h,injectToInstance:g,validateProps:m})=>Re({name:e!=null?e:"ElVirtualList",props:Nt,emits:[Bn,jn],setup(d,{emit:y,expose:w,slots:b}){const S=Ze("vl");m(d);const v=qe(),C=O(h(d,v));g==null||g(v,C);const p=O(),x=O(),M=O(),R=O(null),F=O({isScrolling:!1,scrollLeft:ot(d.initScrollLeft)?d.initScrollLeft:0,scrollTop:ot(d.initScrollTop)?d.initScrollTop:0,updateRequested:!1,xAxisScrollDir:ul,yAxisScrollDir:ul}),P=rs(),T=H(()=>Number.parseInt(`${d.height}`,10)),$=H(()=>Number.parseInt(`${d.width}`,10)),W=H(()=>{const{totalColumn:B,totalRow:_,columnCache:G}=d,{isScrolling:se,xAxisScrollDir:Q,scrollLeft:ie}=E(F);if(B===0||_===0)return[0,0,0,0];const ce=n(d,ie,E(C)),ve=o(d,ce,ie,E(C)),Ie=!se||Q===_n?Math.max(1,G):1,Ae=!se||Q===ul?Math.max(1,G):1;return[Math.max(0,ce-Ie),Math.max(0,Math.min(B-1,ve+Ae)),ce,ve]}),oe=H(()=>{const{totalColumn:B,totalRow:_,rowCache:G}=d,{isScrolling:se,yAxisScrollDir:Q,scrollTop:ie}=E(F);if(B===0||_===0)return[0,0,0,0];const ce=c(d,ie,E(C)),ve=f(d,ce,ie,E(C)),Ie=!se||Q===_n?Math.max(1,G):1,Ae=!se||Q===ul?Math.max(1,G):1;return[Math.max(0,ce-Ie),Math.max(0,Math.min(_-1,ve+Ae)),ce,ve]}),J=H(()=>s(d,E(C))),he=H(()=>r(d,E(C))),Se=H(()=>{var B;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:d.direction,height:ot(d.height)?`${d.height}px`:d.height,width:ot(d.width)?`${d.width}px`:d.width},(B=d.style)!=null?B:{}]}),L=H(()=>{const B=`${E(he)}px`;return{height:`${E(J)}px`,pointerEvents:E(F).isScrolling?"none":void 0,width:B}}),V=()=>{const{totalColumn:B,totalRow:_}=d;if(B>0&&_>0){const[ve,Ie,Ae,Ye]=E(W),[De,_e,U,le]=E(oe);y(Bn,{columnCacheStart:ve,columnCacheEnd:Ie,rowCacheStart:De,rowCacheEnd:_e,columnVisibleStart:Ae,columnVisibleEnd:Ye,rowVisibleStart:U,rowVisibleEnd:le})}const{scrollLeft:G,scrollTop:se,updateRequested:Q,xAxisScrollDir:ie,yAxisScrollDir:ce}=E(F);y(jn,{xAxisScrollDir:ie,scrollLeft:G,yAxisScrollDir:ce,scrollTop:se,updateRequested:Q})},Z=B=>{const{clientHeight:_,clientWidth:G,scrollHeight:se,scrollLeft:Q,scrollTop:ie,scrollWidth:ce}=B.currentTarget,ve=E(F);if(ve.scrollTop===ie&&ve.scrollLeft===Q)return;let Ie=Q;if(Gn(d.direction))switch(Un()){case qn:Ie=-Q;break;case us:Ie=ce-G-Q;break}F.value={...ve,isScrolling:!0,scrollLeft:Ie,scrollTop:Math.max(0,Math.min(ie,se-_)),updateRequested:!0,xAxisScrollDir:cl(ve.scrollLeft,Ie),yAxisScrollDir:cl(ve.scrollTop,ie)},Qe(()=>Fe()),Ne(),V()},ee=(B,_)=>{const G=E(T),se=(J.value-G)/_*B;Te({scrollTop:Math.min(J.value-G,se)})},Ce=(B,_)=>{const G=E($),se=(he.value-G)/_*B;Te({scrollLeft:Math.min(he.value-G,se)})},{onWheel:ae}=Ws({atXStartEdge:H(()=>F.value.scrollLeft<=0),atXEndEdge:H(()=>F.value.scrollLeft>=he.value-E($)),atYStartEdge:H(()=>F.value.scrollTop<=0),atYEndEdge:H(()=>F.value.scrollTop>=J.value-E(T))},(B,_)=>{var G,se,Q,ie;(se=(G=x.value)==null?void 0:G.onMouseUp)==null||se.call(G),(ie=(Q=M.value)==null?void 0:Q.onMouseUp)==null||ie.call(Q);const ce=E($),ve=E(T);Te({scrollLeft:Math.min(F.value.scrollLeft+B,he.value-ce),scrollTop:Math.min(F.value.scrollTop+_,J.value-ve)})}),Te=({scrollLeft:B=F.value.scrollLeft,scrollTop:_=F.value.scrollTop})=>{B=Math.max(B,0),_=Math.max(_,0);const G=E(F);_===G.scrollTop&&B===G.scrollLeft||(F.value={...G,xAxisScrollDir:cl(G.scrollLeft,B),yAxisScrollDir:cl(G.scrollTop,_),scrollLeft:B,scrollTop:_,updateRequested:!0},Qe(()=>Fe()),Ne(),V())},xe=(B=0,_=0,G=Mt)=>{const se=E(F);_=Math.max(0,Math.min(_,d.totalColumn-1)),B=Math.max(0,Math.min(B,d.totalRow-1));const Q=mr(S.namespace.value),ie=E(C),ce=s(d,ie),ve=r(d,ie);Te({scrollLeft:a(d,_,G,se.scrollLeft,ie,ve>d.width?Q:0),scrollTop:i(d,B,G,se.scrollTop,ie,ce>d.height?Q:0)})},Me=(B,_)=>{const{columnWidth:G,direction:se,rowHeight:Q}=d,ie=P.value(t&&G,t&&Q,t&&se),ce=`${B},${_}`;if(zt(ie,ce))return ie[ce];{const[,ve]=l(d,_,E(C)),Ie=E(C),Ae=Gn(se),[Ye,De]=u(d,B,Ie),[_e]=l(d,_,Ie);return ie[ce]={position:"absolute",left:Ae?void 0:`${ve}px`,right:Ae?`${ve}px`:void 0,top:`${De}px`,height:`${Ye}px`,width:`${_e}px`},ie[ce]}},Fe=()=>{F.value.isScrolling=!1,Qe(()=>{P.value(-1,null,null)})};gt(()=>{if(!Kt)return;const{initScrollLeft:B,initScrollTop:_}=d,G=E(p);G&&(ot(B)&&(G.scrollLeft=B),ot(_)&&(G.scrollTop=_)),V()});const Ne=()=>{const{direction:B}=d,{scrollLeft:_,scrollTop:G,updateRequested:se}=E(F),Q=E(p);if(se&&Q){if(B===ss)switch(Un()){case qn:{Q.scrollLeft=-_;break}case is:{Q.scrollLeft=_;break}default:{const{clientWidth:ie,scrollWidth:ce}=Q;Q.scrollLeft=ce-ie-_;break}}else Q.scrollLeft=Math.max(0,_);Q.scrollTop=Math.max(0,G)}},{resetAfterColumnIndex:Pe,resetAfterRowIndex:Ge,resetAfter:mt}=v.proxy;w({windowRef:p,innerRef:R,getItemStyleCache:P,scrollTo:Te,scrollToItem:xe,states:F,resetAfterColumnIndex:Pe,resetAfterRowIndex:Ge,resetAfter:mt});const ut=()=>{const{scrollbarAlwaysOn:B,scrollbarStartGap:_,scrollbarEndGap:G,totalColumn:se,totalRow:Q}=d,ie=E($),ce=E(T),ve=E(he),Ie=E(J),{scrollLeft:Ae,scrollTop:Ye}=E(F),De=re(Yn,{ref:x,alwaysOn:B,startGap:_,endGap:G,class:S.e("horizontal"),clientSize:ie,layout:"horizontal",onScroll:Ce,ratio:ie*100/ve,scrollFrom:Ae/(ve-ie),total:Q,visible:!0}),_e=re(Yn,{ref:M,alwaysOn:B,startGap:_,endGap:G,class:S.e("vertical"),clientSize:ce,layout:"vertical",onScroll:ee,ratio:ce*100/Ie,scrollFrom:Ye/(Ie-ce),total:se,visible:!0});return{horizontalScrollbar:De,verticalScrollbar:_e}},Ve=()=>{var B;const[_,G]=E(W),[se,Q]=E(oe),{data:ie,totalColumn:ce,totalRow:ve,useIsScrolling:Ie,itemKey:Ae}=d,Ye=[];if(ve>0&&ce>0)for(let De=se;De<=Q;De++)for(let _e=_;_e<=G;_e++)Ye.push((B=b.default)==null?void 0:B.call(b,{columnIndex:_e,data:ie,key:Ae({columnIndex:_e,data:ie,rowIndex:De}),isScrolling:Ie?E(F).isScrolling:void 0,style:Me(De,_e),rowIndex:De}));return Ye},A=()=>{const B=Pn(d.innerElement),_=Ve();return[re(B,{style:E(L),ref:R},Kl(B)?_:{default:()=>_})]};return()=>{const B=Pn(d.containerElement),{horizontalScrollbar:_,verticalScrollbar:G}=ut(),se=A();return re("div",{key:0,class:S.e("wrapper"),role:d.role},[re(B,{class:d.className,style:E(Se),onScroll:Z,onWheel:ae,ref:p},Kl(B)?se:{default:()=>se}),_,G])}}}),Vs=Jo({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:l},n,o,s,r,a)=>{l=Number(l);const i=Math.max(0,e*t-l),u=Math.min(i,n*t),c=Math.max(0,n*t-l+a+t);switch(o==="smart"&&(s>=c-l&&s<=u+l?o=Mt:o=Pt),o){case Bl:return u;case Vl:return c;case Pt:{const f=Math.round(c+(u-c)/2);return f<Math.ceil(l/2)?0:f>i+Math.floor(l/2)?i:f}case Mt:default:return s>=c&&s<=u?s:c>u||s<c?c:u}},getRowOffset:({rowHeight:e,height:t,totalRow:l},n,o,s,r,a)=>{t=Number(t);const i=Math.max(0,l*e-t),u=Math.min(i,n*e),c=Math.max(0,n*e-t+a+e);switch(o===zo&&(s>=c-t&&s<=u+t?o=Mt:o=Pt),o){case Bl:return u;case Vl:return c;case Pt:{const f=Math.round(c+(u-c)/2);return f<Math.ceil(t/2)?0:f>i+Math.floor(t/2)?i:f}case Mt:default:return s>=c&&s<=u?s:c>u||s<c?c:u}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:l},n,o)=>{const s=n*e,r=Math.ceil((l+o-s)/e);return Math.max(0,Math.min(t-1,n+r-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:l},n,o)=>{const s=n*e,r=Math.ceil((l+o-s)/e);return Math.max(0,Math.min(t-1,n+r-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),{max:Rl,min:Qo,floor:Zo}=Math,Bs={column:"columnWidth",row:"rowHeight"},en={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},St=(e,t,l,n)=>{const[o,s,r]=[l[n],e[Bs[n]],l[en[n]]];if(t>r){let a=0;if(r>=0){const i=o[r];a=i.offset+i.size}for(let i=r+1;i<=t;i++){const u=s(i);o[i]={offset:a,size:u},a+=u}l[en[n]]=t}return o[t]},ea=(e,t,l,n,o,s)=>{for(;l<=n;){const r=l+Zo((n-l)/2),a=St(e,r,t,s).offset;if(a===o)return r;a<o?l=r+1:n=r-1}return Rl(0,l-1)},js=(e,t,l,n,o)=>{const s=o==="column"?e.totalColumn:e.totalRow;let r=1;for(;l<s&&St(e,l,t,o).offset<n;)l+=r,r*=2;return ea(e,t,Zo(l/2),Qo(l,s-1),n,o)},to=(e,t,l,n)=>{const[o,s]=[t[n],t[en[n]]];return(s>0?o[s].offset:0)>=l?ea(e,t,0,s,l,n):js(e,t,Rl(0,s),l,n)},ta=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:l,row:n})=>{let o=0;if(l>=e&&(l=e-1),l>=0){const a=n[l];o=a.offset+a.size}const r=(e-l-1)*t;return o+r},la=({totalColumn:e},{column:t,estimatedColumnWidth:l,lastVisitedColumnIndex:n})=>{let o=0;if(n>e&&(n=e-1),n>=0){const a=t[n];o=a.offset+a.size}const r=(e-n-1)*l;return o+r},_s={column:la,row:ta},lo=(e,t,l,n,o,s,r)=>{const[a,i]=[s==="row"?e.height:e.width,_s[s]],u=St(e,t,o,s),c=i(e,o),f=Rl(0,Qo(c-a,u.offset)),h=Rl(0,u.offset-a+r+u.size);switch(l===zo&&(n>=h-a&&n<=f+a?l=Mt:l=Pt),l){case Bl:return f;case Vl:return h;case Pt:return Math.round(h+(f-h)/2);case Mt:default:return n>=h&&n<=f?n:h>f||n<h?h:f}},Us=Jo({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,l)=>{const n=St(e,t,l,"column");return[n.size,n.offset]},getRowPosition:(e,t,l)=>{const n=St(e,t,l,"row");return[n.size,n.offset]},getColumnOffset:(e,t,l,n,o,s)=>lo(e,t,l,n,o,"column",s),getRowOffset:(e,t,l,n,o,s)=>lo(e,t,l,n,o,"row",s),getColumnStartIndexForOffset:(e,t,l)=>to(e,l,t,"column"),getColumnStopIndexForStartIndex:(e,t,l,n)=>{const o=St(e,t,n,"column"),s=l+e.width;let r=o.offset+o.size,a=t;for(;a<e.totalColumn-1&&r<s;)a++,r+=St(e,t,n,"column").size;return a},getEstimatedTotalHeight:ta,getEstimatedTotalWidth:la,getRowStartIndexForOffset:(e,t,l)=>to(e,l,t,"row"),getRowStopIndexForStartIndex:(e,t,l,n)=>{const{totalRow:o,height:s}=e,r=St(e,t,n,"row"),a=l+s;let i=r.size+r.offset,u=t;for(;u<o-1&&i<a;)u++,i+=St(e,u,n,"row").size;return u},injectToInstance:(e,t)=>{const l=({columnIndex:s,rowIndex:r},a)=>{var i,u;a=xo(a)?!0:a,ot(s)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,s-1)),ot(r)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,r-1)),(i=e.exposed)==null||i.getItemStyleCache.value(-1,null,null),a&&((u=e.proxy)==null||u.$forceUpdate())},n=(s,r)=>{l({columnIndex:s},r)},o=(s,r)=>{l({rowIndex:s},r)};Object.assign(e.proxy,{resetAfterColumnIndex:n,resetAfterRowIndex:o,resetAfter:l})},initCache:({estimatedColumnWidth:e=Xn,estimatedRowHeight:t=Xn})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Al=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},qs=function(e,t,l,n,o){if(!t&&!n&&(!o||Array.isArray(o)&&!o.length))return e;typeof l=="string"?l=l==="descending"?-1:1:l=l&&l<0?-1:1;const s=n?null:function(a,i){return o?(Array.isArray(o)||(o=[o]),o.map(u=>typeof u=="string"?zl(a,u):u(a,i,e))):(t!=="$key"&&el(a)&&"$value"in a&&(a=a.$value),[el(a)?zl(a,t):a])},r=function(a,i){if(n)return n(a.value,i.value);for(let u=0,c=a.key.length;u<c;u++){if(a.key[u]<i.key[u])return-1;if(a.key[u]>i.key[u])return 1}return 0};return e.map((a,i)=>({value:a,index:i,key:s?s(a,i):null})).sort((a,i)=>{let u=r(a,i);return u||(u=a.index-i.index),u*+l}).map(a=>a.value)},na=function(e,t){let l=null;return e.columns.forEach(n=>{n.id===t&&(l=n)}),l},Gs=function(e,t){let l=null;for(let n=0;n<e.columns.length;n++){const o=e.columns[n];if(o.columnKey===t){l=o;break}}return l||gr("ElTable",`No column matching with column-key: ${t}`),l},no=function(e,t,l){const n=(t.className||"").match(new RegExp(`${l}-table_[^\\s]+`,"gm"));return n?na(e,n[0]):null},Ue=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(!t.includes("."))return`${e[t]}`;const l=t.split(".");let n=e;for(const o of l)n=n[o];return`${n}`}else if(typeof t=="function")return t.call(null,e)},Ft=function(e,t){const l={};return(e||[]).forEach((n,o)=>{l[Ue(n,t)]={row:n,index:o}}),l};function Ys(e,t){const l={};let n;for(n in e)l[n]=e[n];for(n in t)if(zt(t,n)){const o=t[n];typeof o<"u"&&(l[n]=o)}return l}function Cn(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function oa(e){return e===""||e!==void 0&&(e=Cn(e),Number.isNaN(e)&&(e=80)),e}function Xs(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function Js(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,l)=>(...n)=>t(l(...n)))}function Jt(e,t,l){let n=!1;const o=e.indexOf(t),s=o!==-1,r=a=>{a==="add"?e.push(t):e.splice(o,1),n=!0,Wt(t.children)&&t.children.forEach(i=>{Jt(e,i,l!=null?l:!s)})};return vr(l)?l&&!s?r("add"):!l&&s&&r("remove"):r(s?"remove":"add"),n}function Qs(e,t,l="children",n="hasChildren"){const o=r=>!(Array.isArray(r)&&r.length);function s(r,a,i){t(r,a,i),a.forEach(u=>{if(u[n]){t(u,null,i+1);return}const c=u[l];o(c)||s(u,c,i+1)})}e.forEach(r=>{if(r[n]){t(r,null,0);return}const a=r[l];o(a)||s(r,a,0)})}let ct=null;function Zs(e,t,l,n){if((ct==null?void 0:ct.trigger)===l)return;ct==null||ct();const o=n==null?void 0:n.refs.tableWrapper,s=o==null?void 0:o.dataset.prefix,r={strategy:"fixed",...e.popperOptions},a=I(Eo,{content:t,virtualTriggering:!0,virtualRef:l,appendTo:o,placement:"top",transition:"none",offset:0,hideAfter:0,...e,popperOptions:r,onHide:()=>{ct==null||ct()}});a.appContext={...n.appContext,...n};const i=document.createElement("div");Kn(a,i),a.component.exposed.onOpen();const u=o==null?void 0:o.querySelector(`.${s}-scrollbar__wrap`);ct=()=>{Kn(null,i),u==null||u.removeEventListener("scroll",ct),ct=null},ct.trigger=l,u==null||u.addEventListener("scroll",ct)}function aa(e){return e.children?$s(e.children,aa):[e]}function oo(e,t){return e+t.colSpan}const ra=(e,t,l,n)=>{let o=0,s=e;const r=l.states.columns.value;if(n){const i=aa(n[e]);o=r.slice(0,r.indexOf(i[0])).reduce(oo,0),s=o+i.reduce(oo,0)-1}else o=e;let a;switch(t){case"left":s<l.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=r.length-l.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:s<l.states.fixedLeafColumnsLength.value?a="left":o>=r.length-l.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:s}:{}},pn=(e,t,l,n,o,s=0)=>{const r=[],{direction:a,start:i,after:u}=ra(t,l,n,o);if(a){const c=a==="left";r.push(`${e}-fixed-column--${a}`),c&&u+s===n.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!c&&i-s===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function ao(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const bn=(e,t,l,n)=>{const{direction:o,start:s=0,after:r=0}=ra(e,t,l,n);if(!o)return;const a={},i=o==="left",u=l.states.columns.value;return i?a.left=u.slice(0,s).reduce(ao,0):a.right=u.slice(r+1).reverse().reduce(ao,0),a},Vt=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function ei(e){const t=qe(),l=O(!1),n=O([]);return{updateExpandRows:()=>{const i=e.data.value||[],u=e.rowKey.value;if(l.value)n.value=i.slice();else if(u){const c=Ft(n.value,u);n.value=i.reduce((f,h)=>{const g=Ue(h,u);return c[g]&&f.push(h),f},[])}else n.value=[]},toggleRowExpansion:(i,u)=>{Jt(n.value,i,u)&&t.emit("expand-change",i,n.value.slice())},setExpandRowKeys:i=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,f=Ft(u,c);n.value=i.reduce((h,g)=>{const m=f[g];return m&&h.push(m.row),h},[])},isRowExpanded:i=>{const u=e.rowKey.value;return u?!!Ft(n.value,u)[Ue(i,u)]:n.value.includes(i)},states:{expandRows:n,defaultExpandAll:l}}}function ti(e){const t=qe(),l=O(null),n=O(null),o=u=>{t.store.assertRowKey(),l.value=u,r(u)},s=()=>{l.value=null},r=u=>{const{data:c,rowKey:f}=e;let h=null;f.value&&(h=(E(c)||[]).find(g=>Ue(g,f.value)===u)),n.value=h,t.emit("current-change",n.value,null)};return{setCurrentRowKey:o,restoreCurrentRowKey:s,setCurrentRowByKey:r,updateCurrentRow:u=>{const c=n.value;if(u&&u!==c){n.value=u,t.emit("current-change",n.value,c);return}!u&&c&&(n.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],f=n.value;if(!c.includes(f)&&f){if(u){const h=Ue(f,u);r(h)}else n.value=null;n.value===null&&t.emit("current-change",null,f)}else l.value&&(r(l.value),s())},states:{_currentRowKey:l,currentRow:n}}}function li(e){const t=O([]),l=O({}),n=O(16),o=O(!1),s=O({}),r=O("hasChildren"),a=O("children"),i=qe(),u=H(()=>{if(!e.rowKey.value)return{};const w=e.data.value||[];return f(w)}),c=H(()=>{const w=e.rowKey.value,b=Object.keys(s.value),S={};return b.length&&b.forEach(v=>{if(s.value[v].length){const C={children:[]};s.value[v].forEach(p=>{const x=Ue(p,w);C.children.push(x),p[r.value]&&!S[x]&&(S[x]={children:[]})}),S[v]=C}}),S}),f=w=>{const b=e.rowKey.value,S={};return Qs(w,(v,C,p)=>{const x=Ue(v,b);Array.isArray(C)?S[x]={children:C.map(M=>Ue(M,b)),level:p}:o.value&&(S[x]={children:[],lazy:!0,level:p})},a.value,r.value),S},h=(w=!1,b=(S=>(S=i.store)==null?void 0:S.states.defaultExpandAll.value)())=>{var S;const v=u.value,C=c.value,p=Object.keys(v),x={};if(p.length){const M=E(l),R=[],F=(T,$)=>{if(w)return t.value?b||t.value.includes($):!!(b||T!=null&&T.expanded);{const W=b||t.value&&t.value.includes($);return!!(T!=null&&T.expanded||W)}};p.forEach(T=>{const $=M[T],W={...v[T]};if(W.expanded=F($,T),W.lazy){const{loaded:oe=!1,loading:J=!1}=$||{};W.loaded=!!oe,W.loading=!!J,R.push(T)}x[T]=W});const P=Object.keys(C);o.value&&P.length&&R.length&&P.forEach(T=>{const $=M[T],W=C[T].children;if(R.includes(T)){if(x[T].children.length!==0)throw new Error("[ElTable]children must be an empty array.");x[T].children=W}else{const{loaded:oe=!1,loading:J=!1}=$||{};x[T]={lazy:!0,loaded:!!oe,loading:!!J,expanded:F($,T),children:W,level:""}}})}l.value=x,(S=i.store)==null||S.updateTableScrollY()};de(()=>t.value,()=>{h(!0)}),de(()=>u.value,()=>{h()}),de(()=>c.value,()=>{h()});const g=w=>{t.value=w,h()},m=(w,b)=>{i.store.assertRowKey();const S=e.rowKey.value,v=Ue(w,S),C=v&&l.value[v];if(v&&C&&"expanded"in C){const p=C.expanded;b=typeof b>"u"?!C.expanded:b,l.value[v].expanded=b,p!==b&&i.emit("expand-change",w,b),i.store.updateTableScrollY()}},d=w=>{i.store.assertRowKey();const b=e.rowKey.value,S=Ue(w,b),v=l.value[S];o.value&&v&&"loaded"in v&&!v.loaded?y(w,S,v):m(w,void 0)},y=(w,b,S)=>{const{load:v}=i.props;v&&!l.value[b].loaded&&(l.value[b].loading=!0,v(w,S,C=>{if(!Array.isArray(C))throw new TypeError("[ElTable] data must be an array");l.value[b].loading=!1,l.value[b].loaded=!0,l.value[b].expanded=!0,C.length&&(s.value[b]=C),i.emit("expand-change",w,!0)}))};return{loadData:y,loadOrToggle:d,toggleTreeExpansion:m,updateTreeExpandKeys:g,updateTreeData:h,normalize:f,states:{expandRowKeys:t,treeData:l,indent:n,lazy:o,lazyTreeNodeMap:s,lazyColumnIdentifier:r,childrenColumnName:a}}}const ni=(e,t)=>{const l=t.sortingColumn;return!l||typeof l.sortable=="string"?e:qs(e,t.sortProp,t.sortOrder,l.sortMethod,l.sortBy)},bl=e=>{const t=[];return e.forEach(l=>{l.children&&l.children.length>0?t.push.apply(t,bl(l.children)):t.push(l)}),t};function oi(){var e;const t=qe(),{size:l}=yr((e=t.proxy)==null?void 0:e.$props),n=O(null),o=O([]),s=O([]),r=O(!1),a=O([]),i=O([]),u=O([]),c=O([]),f=O([]),h=O([]),g=O([]),m=O([]),d=[],y=O(0),w=O(0),b=O(0),S=O(!1),v=O([]),C=O(!1),p=O(!1),x=O(null),M=O({}),R=O(null),F=O(null),P=O(null),T=O(null),$=O(null);de(o,()=>t.state&&he(!1),{deep:!0});const W=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},oe=U=>{var le;(le=U.children)==null||le.forEach(me=>{me.fixed=U.fixed,oe(me)})},J=()=>{a.value.forEach(ge=>{oe(ge)}),c.value=a.value.filter(ge=>ge.fixed===!0||ge.fixed==="left"),f.value=a.value.filter(ge=>ge.fixed==="right"),c.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,c.value.unshift(a.value[0]));const U=a.value.filter(ge=>!ge.fixed);i.value=[].concat(c.value).concat(U).concat(f.value);const le=bl(U),me=bl(c.value),ue=bl(f.value);y.value=le.length,w.value=me.length,b.value=ue.length,u.value=[].concat(me).concat(le).concat(ue),r.value=c.value.length>0||f.value.length>0},he=(U,le=!1)=>{U&&J(),le?t.state.doLayout():t.state.debouncedUpdateLayout()},Se=U=>v.value.includes(U),L=()=>{S.value=!1,v.value.length&&(v.value=[],t.emit("selection-change",[]))},V=()=>{let U;if(n.value){U=[];const le=Ft(v.value,n.value),me=Ft(o.value,n.value);for(const ue in le)zt(le,ue)&&!me[ue]&&U.push(le[ue].row)}else U=v.value.filter(le=>!o.value.includes(le));if(U.length){const le=v.value.filter(me=>!U.includes(me));v.value=le,t.emit("selection-change",le.slice())}},Z=()=>(v.value||[]).slice(),ee=(U,le=void 0,me=!0)=>{if(Jt(v.value,U,le)){const ge=(v.value||[]).slice();me&&t.emit("select",ge,U),t.emit("selection-change",ge)}},Ce=()=>{var U,le;const me=p.value?!S.value:!(S.value||v.value.length);S.value=me;let ue=!1,ge=0;const Ke=(le=(U=t==null?void 0:t.store)==null?void 0:U.states)==null?void 0:le.rowKey.value;o.value.forEach((ke,yt)=>{const tt=yt+ge;x.value?x.value.call(null,ke,tt)&&Jt(v.value,ke,me)&&(ue=!0):Jt(v.value,ke,me)&&(ue=!0),ge+=xe(Ue(ke,Ke))}),ue&&t.emit("selection-change",v.value?v.value.slice():[]),t.emit("select-all",v.value)},ae=()=>{const U=Ft(v.value,n.value);o.value.forEach(le=>{const me=Ue(le,n.value),ue=U[me];ue&&(v.value[ue.index]=le)})},Te=()=>{var U,le,me;if(((U=o.value)==null?void 0:U.length)===0){S.value=!1;return}let ue;n.value&&(ue=Ft(v.value,n.value));const ge=function(tt){return ue?!!ue[Ue(tt,n.value)]:v.value.includes(tt)};let Ke=!0,ke=0,yt=0;for(let tt=0,lt=(o.value||[]).length;tt<lt;tt++){const Et=(me=(le=t==null?void 0:t.store)==null?void 0:le.states)==null?void 0:me.rowKey.value,Ut=tt+yt,bt=o.value[tt],et=x.value&&x.value.call(null,bt,Ut);if(ge(bt))ke++;else if(!x.value||et){Ke=!1;break}yt+=xe(Ue(bt,Et))}ke===0&&(Ke=!1),S.value=Ke},xe=U=>{var le;if(!t||!t.store)return 0;const{treeData:me}=t.store.states;let ue=0;const ge=(le=me.value[U])==null?void 0:le.children;return ge&&(ue+=ge.length,ge.forEach(Ke=>{ue+=xe(Ke)})),ue},Me=(U,le)=>{Array.isArray(U)||(U=[U]);const me={};return U.forEach(ue=>{M.value[ue.id]=le,me[ue.columnKey||ue.id]=le}),me},Fe=(U,le,me)=>{F.value&&F.value!==U&&(F.value.order=null),F.value=U,P.value=le,T.value=me},Ne=()=>{let U=E(s);Object.keys(M.value).forEach(le=>{const me=M.value[le];if(!me||me.length===0)return;const ue=na({columns:u.value},le);ue&&ue.filterMethod&&(U=U.filter(ge=>me.some(Ke=>ue.filterMethod.call(null,Ke,ge,ue))))}),R.value=U},Pe=()=>{o.value=ni(R.value,{sortingColumn:F.value,sortProp:P.value,sortOrder:T.value})},Ge=(U=void 0)=>{U&&U.filter||Ne(),Pe()},mt=U=>{const{tableHeaderRef:le}=t.refs;if(!le)return;const me=Object.assign({},le.filterPanels),ue=Object.keys(me);if(ue.length)if(typeof U=="string"&&(U=[U]),Array.isArray(U)){const ge=U.map(Ke=>Gs({columns:u.value},Ke));ue.forEach(Ke=>{const ke=ge.find(yt=>yt.id===Ke);ke&&(ke.filteredValue=[])}),t.store.commit("filterChange",{column:ge,values:[],silent:!0,multi:!0})}else ue.forEach(ge=>{const Ke=u.value.find(ke=>ke.id===ge);Ke&&(Ke.filteredValue=[])}),M.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},ut=()=>{F.value&&(Fe(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Ve,toggleRowExpansion:A,updateExpandRows:te,states:B,isRowExpanded:_}=ei({data:o,rowKey:n}),{updateTreeExpandKeys:G,toggleTreeExpansion:se,updateTreeData:Q,loadOrToggle:ie,states:ce}=li({data:o,rowKey:n}),{updateCurrentRowData:ve,updateCurrentRow:Ie,setCurrentRowKey:Ae,states:Ye}=ti({data:o,rowKey:n});return{assertRowKey:W,updateColumns:J,scheduleLayout:he,isSelected:Se,clearSelection:L,cleanSelection:V,getSelectionRows:Z,toggleRowSelection:ee,_toggleAllSelection:Ce,toggleAllSelection:null,updateSelectionByRowKey:ae,updateAllSelected:Te,updateFilters:Me,updateCurrentRow:Ie,updateSort:Fe,execFilter:Ne,execSort:Pe,execQuery:Ge,clearFilter:mt,clearSort:ut,toggleRowExpansion:A,setExpandRowKeysAdapter:U=>{Ve(U),G(U)},setCurrentRowKey:Ae,toggleRowExpansionAdapter:(U,le)=>{u.value.some(({type:ue})=>ue==="expand")?A(U,le):se(U,le)},isRowExpanded:_,updateExpandRows:te,updateCurrentRowData:ve,loadOrToggle:ie,updateTreeData:Q,states:{tableSize:l,rowKey:n,data:o,_data:s,isComplex:r,_columns:a,originColumns:i,columns:u,fixedColumns:c,rightFixedColumns:f,leafColumns:h,fixedLeafColumns:g,rightFixedLeafColumns:m,updateOrderFns:d,leafColumnsLength:y,fixedLeafColumnsLength:w,rightFixedLeafColumnsLength:b,isAllSelected:S,selection:v,reserveSelection:C,selectOnIndeterminate:p,selectable:x,filters:M,filteredData:R,sortingColumn:F,sortProp:P,sortOrder:T,hoverRow:$,...B,...ce,...Ye}}}function tn(e,t){return e.map(l=>{var n;return l.id===t.id?t:((n=l.children)!=null&&n.length&&(l.children=tn(l.children,t)),l)})}function ln(e){e.forEach(t=>{var l,n;t.no=(l=t.getColumnIndex)==null?void 0:l.call(t),(n=t.children)!=null&&n.length&&ln(t.children)}),e.sort((t,l)=>t.no-l.no)}function ai(){const e=qe(),t=oi();return{ns:Ze("table"),...t,mutations:{setData(r,a){const i=E(r._data)!==a;r.data.value=a,r._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),E(r.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):i?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(r,a,i,u){const c=E(r._columns);let f=[];i?(i&&!i.children&&(i.children=[]),i.children.push(a),f=tn(c,i)):(c.push(a),f=c),ln(f),r._columns.value=f,r.updateOrderFns.push(u),a.type==="selection"&&(r.selectable.value=a.selectable,r.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(r,a){var i;((i=a.getColumnIndex)==null?void 0:i.call(a))!==a.no&&(ln(r._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(r,a,i,u){const c=E(r._columns)||[];if(i)i.children.splice(i.children.findIndex(h=>h.id===a.id),1),Qe(()=>{var h;((h=i.children)==null?void 0:h.length)===0&&delete i.children}),r._columns.value=tn(c,i);else{const h=c.indexOf(a);h>-1&&(c.splice(h,1),r._columns.value=c)}const f=r.updateOrderFns.indexOf(u);f>-1&&r.updateOrderFns.splice(f,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(r,a){const{prop:i,order:u,init:c}=a;if(i){const f=E(r.columns).find(h=>h.property===i);f&&(f.order=u,e.store.updateSort(f,i,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(r,a){const{sortingColumn:i,sortProp:u,sortOrder:c}=r,f=E(i),h=E(u),g=E(c);g===null&&(r.sortingColumn.value=null,r.sortProp.value=null);const m={filter:!0};e.store.execQuery(m),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:f,prop:h,order:g}),e.store.updateTableScrollY()},filterChange(r,a){const{column:i,values:u,silent:c}=a,f=e.store.updateFilters(i,u);e.store.execQuery(),c||e.emit("filter-change",f),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(r,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(r,a){r.hoverRow.value=a},setCurrentRow(r,a){e.store.updateCurrentRow(a)}},commit:function(r,...a){const i=e.store.mutations;if(i[r])i[r].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${r}`)},updateTableScrollY:function(){Qe(()=>e.layout.updateScrollY.apply(e.layout))}}}const Qt={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function ri(e,t){if(!e)throw new Error("Table is required.");const l=ai();return l.toggleAllSelection=tl(l._toggleAllSelection,10),Object.keys(Qt).forEach(n=>{sa(ia(t,n),n,l)}),si(l,t),l}function si(e,t){Object.keys(Qt).forEach(l=>{de(()=>ia(t,l),n=>{sa(n,l,e)})})}function sa(e,t,l){let n=e,o=Qt[t];typeof Qt[t]=="object"&&(o=o.key,n=n||Qt[t].default),l.states[o].value=n}function ia(e,t){if(t.includes(".")){const l=t.split(".");let n=e;return l.forEach(o=>{n=n[o]}),n}else return e[t]}class ii{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=O(null),this.scrollX=O(!1),this.scrollY=O(!1),this.bodyWidth=O(null),this.fixedWidth=O(null),this.rightFixedWidth=O(null),this.gutterWidth=0;for(const l in t)zt(t,l)&&(Cr(this[l])?this[l].value=t[l]:this[l]=t[l]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const l=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(l!=null&&l.wrapRef)){let n=!0;const o=this.scrollY.value;return n=l.wrapRef.scrollHeight>l.wrapRef.clientHeight,this.scrollY.value=n,o!==n}return!1}setHeight(t,l="height"){if(!Kt)return;const n=this.table.vnode.el;if(t=Xs(t),this.height.value=Number(t),!n&&(t||t===0))return Qe(()=>this.setHeight(t,l));typeof t=="number"?(n.style[l]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(n.style[l]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?t.push.apply(t,n.columns):t.push(n)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let l=t;for(;l.tagName!=="DIV";){if(getComputedStyle(l).display==="none")return!0;l=l.parentElement}return!1}updateColumnsWidth(){if(!Kt)return;const t=this.fit,l=this.table.vnode.el.clientWidth;let n=0;const o=this.getFlattenColumns(),s=o.filter(i=>typeof i.width!="number");if(o.forEach(i=>{typeof i.width=="number"&&i.realWidth&&(i.realWidth=null)}),s.length>0&&t){if(o.forEach(i=>{n+=Number(i.width||i.minWidth||80)}),n<=l){this.scrollX.value=!1;const i=l-n;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+i;else{const u=s.reduce((h,g)=>h+Number(g.minWidth||80),0),c=i/u;let f=0;s.forEach((h,g)=>{if(g===0)return;const m=Math.floor(Number(h.minWidth||80)*c);f+=m,h.realWidth=Number(h.minWidth||80)+m}),s[0].realWidth=Number(s[0].minWidth||80)+i-f}}else this.scrollX.value=!0,s.forEach(i=>{i.realWidth=Number(i.minWidth)});this.bodyWidth.value=Math.max(n,l),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(i=>{!i.width&&!i.minWidth?i.realWidth=80:i.realWidth=Number(i.width||i.minWidth),n+=i.realWidth}),this.scrollX.value=n>l,this.bodyWidth.value=n;const r=this.store.states.fixedColumns.value;if(r.length>0){let i=0;r.forEach(u=>{i+=Number(u.realWidth||u.width)}),this.fixedWidth.value=i}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let i=0;a.forEach(u=>{i+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=i}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const l=this.observers.indexOf(t);l!==-1&&this.observers.splice(l,1)}notifyObservers(t){this.observers.forEach(n=>{var o,s;switch(t){case"columns":(o=n.state)==null||o.onColumnsChange(this);break;case"scrollable":(s=n.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:ui}=ft,ci=Re({name:"ElTableFilterPanel",components:{ElCheckbox:ft,ElCheckboxGroup:ui,ElScrollbar:cn,ElTooltip:Eo,ElIcon:ht,ArrowDown:pr,ArrowUp:br},directives:{ClickOutside:wr},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=qe(),{t:l}=Ol(),n=Ze("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const s=O(!1),r=O(null),a=H(()=>e.column&&e.column.filters),i=H(()=>e.column.filterClassName?`${n.b()} ${e.column.filterClassName}`:n.b()),u=H({get:()=>{var C;return(((C=e.column)==null?void 0:C.filteredValue)||[])[0]},set:C=>{c.value&&(typeof C<"u"&&C!==null?c.value.splice(0,1,C):c.value.splice(0,1))}}),c=H({get(){return e.column?e.column.filteredValue||[]:[]},set(C){e.column&&e.upDataColumn("filteredValue",C)}}),f=H(()=>e.column?e.column.filterMultiple:!0),h=C=>C.value===u.value,g=()=>{s.value=!1},m=C=>{C.stopPropagation(),s.value=!s.value},d=()=>{s.value=!1},y=()=>{S(c.value),g()},w=()=>{c.value=[],S(c.value),g()},b=C=>{u.value=C,S(typeof C<"u"&&C!==null?c.value:[]),g()},S=C=>{e.store.commit("filterChange",{column:e.column,values:C}),e.store.updateAllSelected()};de(s,C=>{e.column&&e.upDataColumn("filterOpened",C)},{immediate:!0});const v=H(()=>{var C,p;return(p=(C=r.value)==null?void 0:C.popperRef)==null?void 0:p.contentRef});return{tooltipVisible:s,multiple:f,filterClassName:i,filteredValue:c,filterValue:u,filters:a,handleConfirm:y,handleReset:w,handleSelect:b,isActive:h,t:l,ns:n,showFilterPanel:m,hideFilterPanel:d,popperPaneRef:v,tooltip:r}}}),di={key:0},fi=["disabled"],hi=["label","onClick"];function mi(e,t,l,n,o,s){const r=K("el-checkbox"),a=K("el-checkbox-group"),i=K("el-scrollbar"),u=K("arrow-up"),c=K("arrow-down"),f=K("el-icon"),h=K("el-tooltip"),g=Oo("click-outside");return D(),ne(h,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:""},{content:j(()=>[e.multiple?(D(),Y("div",di,[ye("div",{class:pe(e.ns.e("content"))},[I(i,{"wrap-class":e.ns.e("wrap")},{default:j(()=>[I(a,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=m=>e.filteredValue=m),class:pe(e.ns.e("checkbox-group"))},{default:j(()=>[(D(!0),Y(ze,null,$e(e.filters,m=>(D(),ne(r,{key:m.value,value:m.value},{default:j(()=>[Ct(je(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),ye("div",{class:pe(e.ns.e("bottom"))},[ye("button",{class:pe({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:t[1]||(t[1]=(...m)=>e.handleConfirm&&e.handleConfirm(...m))},je(e.t("el.table.confirmFilter")),11,fi),ye("button",{type:"button",onClick:t[2]||(t[2]=(...m)=>e.handleReset&&e.handleReset(...m))},je(e.t("el.table.resetFilter")),1)],2)])):(D(),Y("ul",{key:1,class:pe(e.ns.e("list"))},[ye("li",{class:pe([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:t[3]||(t[3]=m=>e.handleSelect(null))},je(e.t("el.table.clearFilter")),3),(D(!0),Y(ze,null,$e(e.filters,m=>(D(),Y("li",{key:m.value,class:pe([e.ns.e("list-item"),e.ns.is("active",e.isActive(m))]),label:m.value,onClick:d=>e.handleSelect(m.value)},je(m.text),11,hi))),128))],2))]),default:j(()=>[ml((D(),Y("span",{class:pe([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...m)=>e.showFilterPanel&&e.showFilterPanel(...m))},[I(f,null,{default:j(()=>[e.column.filterOpened?(D(),ne(u,{key:0})):(D(),ne(c,{key:1}))]),_:1})],2)),[[g,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var gi=ko(ci,[["render",mi],["__file","filter-panel.vue"]]);function ua(e){const t=qe();dn(()=>{l.value.addObserver(t)}),gt(()=>{n(l.value),o(l.value)}),Sr(()=>{n(l.value),o(l.value)}),fn(()=>{l.value.removeObserver(t)});const l=H(()=>{const s=e.layout;if(!s)throw new Error("Can not find table layout.");return s}),n=s=>{var r;const a=((r=e.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const i=s.getFlattenColumns(),u={};i.forEach(c=>{u[c.id]=c});for(let c=0,f=a.length;c<f;c++){const h=a[c],g=h.getAttribute("name"),m=u[g];m&&h.setAttribute("width",m.realWidth||m.width)}},o=s=>{var r,a;const i=((r=e.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,f=i.length;c<f;c++)i[c].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,f=u.length;c<f;c++){const h=u[c];h.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",h.style.display=s.scrollY.value?"":"none"}};return{tableLayout:l.value,onColumnsChange:n,onScrollableChange:o}}const pt=Symbol("ElTable");function vi(e,t){const l=qe(),n=vt(pt),o=d=>{d.stopPropagation()},s=(d,y)=>{!y.filters&&y.sortable?m(d,y,!1):y.filterable&&!y.sortable&&o(d),n==null||n.emit("header-click",y,d)},r=(d,y)=>{n==null||n.emit("header-contextmenu",y,d)},a=O(null),i=O(!1),u=O({}),c=(d,y)=>{if(Kt&&!(y.children&&y.children.length>0)&&a.value&&e.border){i.value=!0;const w=n;t("set-drag-visible",!0);const S=(w==null?void 0:w.vnode.el).getBoundingClientRect().left,v=l.vnode.el.querySelector(`th.${y.id}`),C=v.getBoundingClientRect(),p=C.left-S+30;Tl(v,"noclick"),u.value={startMouseLeft:d.clientX,startLeft:C.right-S,startColumnLeft:C.left-S,tableLeft:S};const x=w==null?void 0:w.refs.resizeProxy;x.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const M=F=>{const P=F.clientX-u.value.startMouseLeft,T=u.value.startLeft+P;x.style.left=`${Math.max(p,T)}px`},R=()=>{if(i.value){const{startColumnLeft:F,startLeft:P}=u.value,$=Number.parseInt(x.style.left,10)-F;y.width=y.realWidth=$,w==null||w.emit("header-dragend",y.width,P-F,y,d),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",i.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",R),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{ll(v,"noclick")},0)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",R)}},f=(d,y)=>{if(y.children&&y.children.length>0)return;const w=d.target;if(!Tr(w))return;const b=w==null?void 0:w.closest("th");if(!(!y||!y.resizable)&&!i.value&&e.border){const S=b.getBoundingClientRect(),v=document.body.style;S.width>12&&S.right-d.pageX<8?(v.cursor="col-resize",gl(b,"is-sortable")&&(b.style.cursor="col-resize"),a.value=y):i.value||(v.cursor="",gl(b,"is-sortable")&&(b.style.cursor="pointer"),a.value=null)}},h=()=>{Kt&&(document.body.style.cursor="")},g=({order:d,sortOrders:y})=>{if(d==="")return y[0];const w=y.indexOf(d||null);return y[w>y.length-2?0:w+1]},m=(d,y,w)=>{var b;d.stopPropagation();const S=y.order===w?null:w||g(y),v=(b=d.target)==null?void 0:b.closest("th");if(v&&gl(v,"noclick")){ll(v,"noclick");return}if(!y.sortable)return;const C=e.store.states;let p=C.sortProp.value,x;const M=C.sortingColumn.value;(M!==y||M===y&&M.order===null)&&(M&&(M.order=null),C.sortingColumn.value=y,p=y.property),S?x=y.order=S:x=y.order=null,C.sortProp.value=p,C.sortOrder.value=x,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:r,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:m,handleFilterClick:o}}function yi(e){const t=vt(pt),l=Ze("table");return{getHeaderRowStyle:a=>{const i=t==null?void 0:t.props.headerRowStyle;return typeof i=="function"?i.call(null,{rowIndex:a}):i},getHeaderRowClass:a=>{const i=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?i.push(u):typeof u=="function"&&i.push(u.call(null,{rowIndex:a})),i.join(" ")},getHeaderCellStyle:(a,i,u,c)=>{var f;let h=(f=t==null?void 0:t.props.headerCellStyle)!=null?f:{};typeof h=="function"&&(h=h.call(null,{rowIndex:a,columnIndex:i,row:u,column:c}));const g=bn(i,c.fixed,e.store,u);return Vt(g,"left"),Vt(g,"right"),Object.assign({},h,g)},getHeaderCellClass:(a,i,u,c)=>{const f=pn(l.b(),i,c.fixed,e.store,u),h=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...f];c.children||h.push("is-leaf"),c.sortable&&h.push("is-sortable");const g=t==null?void 0:t.props.headerCellClassName;return typeof g=="string"?h.push(g):typeof g=="function"&&h.push(g.call(null,{rowIndex:a,columnIndex:i,row:u,column:c})),h.push(l.e("cell")),h.filter(m=>!!m).join(" ")}}}const ca=e=>{const t=[];return e.forEach(l=>{l.children?(t.push(l),t.push.apply(t,ca(l.children))):t.push(l)}),t},Ci=e=>{let t=1;const l=(s,r)=>{if(r&&(s.level=r.level+1,t<s.level&&(t=s.level)),s.children){let a=0;s.children.forEach(i=>{l(i,s),a+=i.colSpan}),s.colSpan=a}else s.colSpan=1};e.forEach(s=>{s.level=1,l(s,void 0)});const n=[];for(let s=0;s<t;s++)n.push([]);return ca(e).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(r=>r.isSubColumn=!0)):s.rowSpan=t-s.level+1,n[s.level-1].push(s)}),n};function pi(e){const t=vt(pt),l=H(()=>Ci(e.store.states.originColumns.value));return{isGroup:H(()=>{const s=l.value.length>1;return s&&t&&(t.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:l}}var bi=Re({name:"ElTableHeader",components:{ElCheckbox:ft},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const l=qe(),n=vt(pt),o=Ze("table"),s=O({}),{onColumnsChange:r,onScrollableChange:a}=ua(n);gt(async()=>{await Qe(),await Qe();const{prop:p,order:x}=e.defaultSort;n==null||n.store.commit("sort",{prop:p,order:x,init:!0})});const{handleHeaderClick:i,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:g,handleFilterClick:m}=vi(e,t),{getHeaderRowStyle:d,getHeaderRowClass:y,getHeaderCellStyle:w,getHeaderCellClass:b}=yi(e),{isGroup:S,toggleAllSelection:v,columnRows:C}=pi(e);return l.state={onColumnsChange:r,onScrollableChange:a},l.filterPanels=s,{ns:o,filterPanels:s,onColumnsChange:r,onScrollableChange:a,columnRows:C,getHeaderRowClass:y,getHeaderRowStyle:d,getHeaderCellClass:b,getHeaderCellStyle:w,handleHeaderClick:i,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:g,handleFilterClick:m,isGroup:S,toggleAllSelection:v}},render(){const{ns:e,isGroup:t,columnRows:l,getHeaderCellStyle:n,getHeaderCellClass:o,getHeaderRowClass:s,getHeaderRowStyle:r,handleHeaderClick:a,handleHeaderContextMenu:i,handleMouseDown:u,handleMouseMove:c,handleSortClick:f,handleMouseOut:h,store:g,$parent:m}=this;let d=1;return re("thead",{class:{[e.is("group")]:t}},l.map((y,w)=>re("tr",{class:s(w),key:w,style:r(w)},y.map((b,S)=>(b.rowSpan>d&&(d=b.rowSpan),re("th",{class:o(w,S,y,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:n(w,S,y,b),onClick:v=>a(v,b),onContextmenu:v=>i(v,b),onMousedown:v=>u(v,b),onMousemove:v=>c(v,b),onMouseout:h},[re("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:S,store:g,_self:m}):b.label,b.sortable&&re("span",{onClick:v=>f(v,b),class:"caret-wrapper"},[re("i",{onClick:v=>f(v,b,"ascending"),class:"sort-caret ascending"}),re("i",{onClick:v=>f(v,b,"descending"),class:"sort-caret descending"})]),b.filterable&&re(gi,{store:g,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(v,C)=>{b[v]=C}})])]))))))}});function wi(e){const t=vt(pt),l=O(""),n=O(re("div")),o=(m,d,y)=>{var w;const b=t,S=Al(m);let v;const C=(w=b==null?void 0:b.vnode.el)==null?void 0:w.dataset.prefix;S&&(v=no({columns:e.store.states.columns.value},S,C),v&&(b==null||b.emit(`cell-${y}`,d,v,S,m))),b==null||b.emit(`row-${y}`,d,v,m)},s=(m,d)=>{o(m,d,"dblclick")},r=(m,d)=>{e.store.commit("setCurrentRow",d),o(m,d,"click")},a=(m,d)=>{o(m,d,"contextmenu")},i=tl(m=>{e.store.commit("setHoverRow",m)},30),u=tl(()=>{e.store.commit("setHoverRow",null)},30),c=m=>{const d=window.getComputedStyle(m,null),y=Number.parseInt(d.paddingLeft,10)||0,w=Number.parseInt(d.paddingRight,10)||0,b=Number.parseInt(d.paddingTop,10)||0,S=Number.parseInt(d.paddingBottom,10)||0;return{left:y,right:w,top:b,bottom:S}},f=(m,d,y)=>{let w=d.target.parentNode;for(;m>1&&(w=w==null?void 0:w.nextSibling,!(!w||w.nodeName!=="TR"));)y(w,"hover-row hover-fixed-row"),m--};return{handleDoubleClick:s,handleClick:r,handleContextMenu:a,handleMouseEnter:i,handleMouseLeave:u,handleCellMouseEnter:(m,d,y)=>{var w;const b=t,S=Al(m),v=(w=b==null?void 0:b.vnode.el)==null?void 0:w.dataset.prefix;if(S){const he=no({columns:e.store.states.columns.value},S,v);S.rowSpan>1&&f(S.rowSpan,m,Tl);const Se=b.hoverState={cell:S,column:he,row:d};b==null||b.emit("cell-mouse-enter",Se.row,Se.column,Se.cell,m)}if(!y)return;const C=m.target.querySelector(".cell");if(!(gl(C,`${v}-tooltip`)&&C.childNodes.length))return;const p=document.createRange();p.setStart(C,0),p.setEnd(C,C.childNodes.length);let x=p.getBoundingClientRect().width,M=p.getBoundingClientRect().height;x-Math.floor(x)<.001&&(x=Math.floor(x)),M-Math.floor(M)<.001&&(M=Math.floor(M));const{top:P,left:T,right:$,bottom:W}=c(C),oe=T+$,J=P+W;(x+oe>C.offsetWidth||M+J>C.offsetHeight||C.scrollWidth>C.offsetWidth)&&Zs(y,S.innerText||S.textContent,S,b)},handleCellMouseLeave:m=>{const d=Al(m);if(!d)return;d.rowSpan>1&&f(d.rowSpan,m,ll);const y=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",y==null?void 0:y.row,y==null?void 0:y.column,y==null?void 0:y.cell,m)},tooltipContent:l,tooltipTrigger:n}}function Si(e){const t=vt(pt),l=Ze("table");return{getRowStyle:(u,c)=>{const f=t==null?void 0:t.props.rowStyle;return typeof f=="function"?f.call(null,{row:u,rowIndex:c}):f||null},getRowClass:(u,c)=>{const f=[l.e("row")];t!=null&&t.props.highlightCurrentRow&&u===e.store.states.currentRow.value&&f.push("current-row"),e.stripe&&c%2===1&&f.push(l.em("row","striped"));const h=t==null?void 0:t.props.rowClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{row:u,rowIndex:c})),f},getCellStyle:(u,c,f,h)=>{const g=t==null?void 0:t.props.cellStyle;let m=g!=null?g:{};typeof g=="function"&&(m=g.call(null,{rowIndex:u,columnIndex:c,row:f,column:h}));const d=bn(c,e==null?void 0:e.fixed,e.store);return Vt(d,"left"),Vt(d,"right"),Object.assign({},m,d)},getCellClass:(u,c,f,h,g)=>{const m=pn(l.b(),c,e==null?void 0:e.fixed,e.store,void 0,g),d=[h.id,h.align,h.className,...m],y=t==null?void 0:t.props.cellClassName;return typeof y=="string"?d.push(y):typeof y=="function"&&d.push(y.call(null,{rowIndex:u,columnIndex:c,row:f,column:h})),d.push(l.e("cell")),d.filter(w=>!!w).join(" ")},getSpan:(u,c,f,h)=>{let g=1,m=1;const d=t==null?void 0:t.props.spanMethod;if(typeof d=="function"){const y=d({row:u,column:c,rowIndex:f,columnIndex:h});Array.isArray(y)?(g=y[0],m=y[1]):typeof y=="object"&&(g=y.rowspan,m=y.colspan)}return{rowspan:g,colspan:m}},getColspanRealWidth:(u,c,f)=>{if(c<1)return u[f].realWidth;const h=u.map(({realWidth:g,width:m})=>g||m).slice(f,f+c);return Number(h.reduce((g,m)=>Number(g)+Number(m),-1))}}}function Ti(e){const t=vt(pt),l=Ze("table"),{handleDoubleClick:n,handleClick:o,handleContextMenu:s,handleMouseEnter:r,handleMouseLeave:a,handleCellMouseEnter:i,handleCellMouseLeave:u,tooltipContent:c,tooltipTrigger:f}=wi(e),{getRowStyle:h,getRowClass:g,getCellStyle:m,getCellClass:d,getSpan:y,getColspanRealWidth:w}=Si(e),b=H(()=>e.store.states.columns.value.findIndex(({type:x})=>x==="default")),S=(x,M)=>{const R=t.props.rowKey;return R?Ue(x,R):M},v=(x,M,R,F=!1)=>{const{tooltipEffect:P,tooltipOptions:T,store:$}=e,{indent:W,columns:oe}=$.states,J=g(x,M);let he=!0;return R&&(J.push(l.em("row",`level-${R.level}`)),he=R.display),re("tr",{style:[he?null:{display:"none"},h(x,M)],class:J,key:S(x,M),onDblclick:L=>n(L,x),onClick:L=>o(L,x),onContextmenu:L=>s(L,x),onMouseenter:()=>r(M),onMouseleave:a},oe.value.map((L,V)=>{const{rowspan:Z,colspan:ee}=y(x,L,M,V);if(!Z||!ee)return null;const Ce=Object.assign({},L);Ce.realWidth=w(oe.value,ee,V);const ae={store:e.store,_self:e.context||t,column:Ce,row:x,$index:M,cellIndex:V,expanded:F};V===b.value&&R&&(ae.treeNode={indent:R.level*W.value,level:R.level},typeof R.expanded=="boolean"&&(ae.treeNode.expanded=R.expanded,"loading"in R&&(ae.treeNode.loading=R.loading),"noLazyChildren"in R&&(ae.treeNode.noLazyChildren=R.noLazyChildren)));const Te=`${M},${V}`,xe=Ce.columnKey||Ce.rawColumnKey||"",Me=C(V,L,ae),Fe=L.showOverflowTooltip&&Is({effect:P},T,L.showOverflowTooltip);return re("td",{style:m(M,V,x,L),class:d(M,V,x,L,ee-1),key:`${xe}${Te}`,rowspan:Z,colspan:ee,onMouseenter:Ne=>i(Ne,x,Fe),onMouseleave:u},[Me])}))},C=(x,M,R)=>M.renderCell(R);return{wrappedRowRender:(x,M)=>{const R=e.store,{isRowExpanded:F,assertRowKey:P}=R,{treeData:T,lazyTreeNodeMap:$,childrenColumnName:W,rowKey:oe}=R.states,J=R.states.columns.value;if(J.some(({type:Se})=>Se==="expand")){const Se=F(x),L=v(x,M,void 0,Se),V=t.renderExpanded;return Se?V?[[L,re("tr",{key:`expanded-row__${L.key}`},[re("td",{colspan:J.length,class:`${l.e("cell")} ${l.e("expanded-cell")}`},[V({row:x,$index:M,store:R,expanded:Se})])])]]:(console.error("[Element Error]renderExpanded is required."),L):[[L]]}else if(Object.keys(T.value).length){P();const Se=Ue(x,oe.value);let L=T.value[Se],V=null;L&&(V={expanded:L.expanded,level:L.level,display:!0},typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(V.noLazyChildren=!(L.children&&L.children.length)),V.loading=L.loading));const Z=[v(x,M,V)];if(L){let ee=0;const Ce=(Te,xe)=>{Te&&Te.length&&xe&&Te.forEach(Me=>{const Fe={display:xe.display&&xe.expanded,level:xe.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Ne=Ue(Me,oe.value);if(Ne==null)throw new Error("For nested data item, row-key is required.");if(L={...T.value[Ne]},L&&(Fe.expanded=L.expanded,L.level=L.level||Fe.level,L.display=!!(L.expanded&&Fe.display),typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(Fe.noLazyChildren=!(L.children&&L.children.length)),Fe.loading=L.loading)),ee++,Z.push(v(Me,M+ee,Fe)),L){const Pe=$.value[Ne]||Me[W.value];Ce(Pe,L)}})};L.display=!0;const ae=$.value[Se]||x[W.value];Ce(ae,L)}return Z}else return v(x,M,void 0)},tooltipContent:c,tooltipTrigger:f}}const Ri={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var xi=Re({name:"ElTableBody",props:Ri,setup(e){const t=qe(),l=vt(pt),n=Ze("table"),{wrappedRowRender:o,tooltipContent:s,tooltipTrigger:r}=Ti(e),{onColumnsChange:a,onScrollableChange:i}=ua(l),u=[];return de(e.store.states.hoverRow,(c,f)=>{var h;const g=t==null?void 0:t.vnode.el,m=Array.from((g==null?void 0:g.children)||[]).filter(w=>w==null?void 0:w.classList.contains(`${n.e("row")}`));let d=c;const y=(h=m[d])==null?void 0:h.childNodes;if(y!=null&&y.length){let w=0;Array.from(y).reduce((S,v,C)=>{var p,x;return((p=y[C])==null?void 0:p.colSpan)>1&&(w=(x=y[C])==null?void 0:x.colSpan),v.nodeName!=="TD"&&w===0&&S.push(C),w>0&&w--,S},[]).forEach(S=>{for(var v;d>0;){const C=(v=m[d-1])==null?void 0:v.childNodes;if(C[S]&&C[S].nodeName==="TD"&&C[S].rowSpan>1){Tl(C[S],"hover-cell"),u.push(C[S]);break}d--}})}else u.forEach(w=>ll(w,"hover-cell")),u.length=0;!e.store.states.isComplex.value||!Kt||Ko(()=>{const w=m[f],b=m[c];w&&!w.classList.contains("hover-fixed-row")&&ll(w,"hover-row"),b&&Tl(b,"hover-row")})}),fn(()=>{var c;(c=ct)==null||c()}),{ns:n,onColumnsChange:a,onScrollableChange:i,wrappedRowRender:o,tooltipContent:s,tooltipTrigger:r}},render(){const{wrappedRowRender:e,store:t}=this,l=t.states.data.value||[];return re("tbody",{tabIndex:-1},[l.reduce((n,o)=>n.concat(e(o,n.length)),[])])}});function Ei(){const e=vt(pt),t=e==null?void 0:e.store,l=H(()=>t.states.fixedLeafColumnsLength.value),n=H(()=>t.states.rightFixedColumns.value.length),o=H(()=>t.states.columns.value.length),s=H(()=>t.states.fixedColumns.value.length),r=H(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:l,rightFixedLeafCount:n,columnsCount:o,leftFixedCount:s,rightFixedCount:r,columns:t.states.columns}}function ki(e){const{columns:t}=Ei(),l=Ze("table");return{getCellClasses:(s,r)=>{const a=s[r],i=[l.e("cell"),a.id,a.align,a.labelClassName,...pn(l.b(),r,a.fixed,e.store)];return a.className&&i.push(a.className),a.children||i.push(l.is("leaf")),i},getCellStyles:(s,r)=>{const a=bn(r,s.fixed,e.store);return Vt(a,"left"),Vt(a,"right"),a},columns:t}}var Oi=Re({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:l,columns:n}=ki(e);return{ns:Ze("table"),getCellClasses:t,getCellStyles:l,columns:n}},render(){const{columns:e,getCellStyles:t,getCellClasses:l,summaryMethod:n,sumText:o}=this,s=this.store.states.data.value;let r=[];return n?r=n({columns:e,data:s}):e.forEach((a,i)=>{if(i===0){r[i]=o;return}const u=s.map(g=>Number(g[a.property])),c=[];let f=!0;u.forEach(g=>{if(!Number.isNaN(+g)){f=!1;const m=`${g}`.split(".")[1];c.push(m?m.length:0)}});const h=Math.max.apply(null,c);f?r[i]="":r[i]=u.reduce((g,m)=>{const d=Number(m);return Number.isNaN(+d)?g:Number.parseFloat((g+m).toFixed(Math.min(h,20)))},0)}),re(re("tfoot",[re("tr",{},[...e.map((a,i)=>re("td",{key:i,colspan:a.colSpan,rowspan:a.rowSpan,class:l(e,i),style:t(a,i)},[re("div",{class:["cell",a.labelClassName]},[r[i]])]))])]))}});function Hi(e){return{setCurrentRow:c=>{e.commit("setCurrentRow",c)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(c,f)=>{e.toggleRowSelection(c,f,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:c=>{e.clearFilter(c)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(c,f)=>{e.toggleRowExpansionAdapter(c,f)},clearSort:()=>{e.clearSort()},sort:(c,f)=>{e.commit("sort",{prop:c,order:f})}}}function Mi(e,t,l,n){const o=O(!1),s=O(null),r=O(!1),a=L=>{r.value=L},i=O({width:null,height:null,headerHeight:null}),u=O(!1),c={display:"inline-block",verticalAlign:"middle"},f=O(),h=O(0),g=O(0),m=O(0),d=O(0),y=O(0);Xt(()=>{t.setHeight(e.height)}),Xt(()=>{t.setMaxHeight(e.maxHeight)}),de(()=>[e.currentRowKey,l.states.rowKey],([L,V])=>{!E(V)||!E(L)||l.setCurrentRowKey(`${L}`)},{immediate:!0}),de(()=>e.data,L=>{n.store.commit("setData",L)},{immediate:!0,deep:!0}),Xt(()=>{e.expandRowKeys&&l.setExpandRowKeysAdapter(e.expandRowKeys)});const w=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},b=(L,V)=>{const{pixelX:Z,pixelY:ee}=V;Math.abs(Z)>=Math.abs(ee)&&(n.refs.bodyWrapper.scrollLeft+=V.pixelX/5)},S=H(()=>e.height||e.maxHeight||l.states.fixedColumns.value.length>0||l.states.rightFixedColumns.value.length>0),v=H(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),C=()=>{S.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(R)};gt(async()=>{await Qe(),l.updateColumns(),F(),requestAnimationFrame(C);const L=n.vnode.el,V=n.refs.headerWrapper;e.flexible&&L&&L.parentElement&&(L.parentElement.style.minWidth="0"),i.value={width:f.value=L.offsetWidth,height:L.offsetHeight,headerHeight:e.showHeader&&V?V.offsetHeight:null},l.states.columns.value.forEach(Z=>{Z.filteredValue&&Z.filteredValue.length&&n.store.commit("filterChange",{column:Z,values:Z.filteredValue,silent:!0})}),n.$ready=!0});const p=(L,V)=>{if(!L)return;const Z=Array.from(L.classList).filter(ee=>!ee.startsWith("is-scrolling-"));Z.push(t.scrollX.value?V:"is-scrolling-none"),L.className=Z.join(" ")},x=L=>{const{tableWrapper:V}=n.refs;p(V,L)},M=L=>{const{tableWrapper:V}=n.refs;return!!(V&&V.classList.contains(L))},R=function(){if(!n.refs.scrollBarRef)return;if(!t.scrollX.value){const xe="is-scrolling-none";M(xe)||x(xe);return}const L=n.refs.scrollBarRef.wrapRef;if(!L)return;const{scrollLeft:V,offsetWidth:Z,scrollWidth:ee}=L,{headerWrapper:Ce,footerWrapper:ae}=n.refs;Ce&&(Ce.scrollLeft=V),ae&&(ae.scrollLeft=V);const Te=ee-Z-1;V>=Te?x("is-scrolling-right"):x(V===0?"is-scrolling-left":"is-scrolling-middle")},F=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&zn(n.refs.scrollBarRef.wrapRef,"scroll",R,{passive:!0}),e.fit?Wl(n.vnode.el,P):zn(window,"resize",P),Wl(n.refs.bodyWrapper,()=>{var L,V;P(),(V=(L=n.refs)==null?void 0:L.scrollBarRef)==null||V.update()}))},P=()=>{var L,V,Z,ee;const Ce=n.vnode.el;if(!n.$ready||!Ce)return;let ae=!1;const{width:Te,height:xe,headerHeight:Me}=i.value,Fe=f.value=Ce.offsetWidth;Te!==Fe&&(ae=!0);const Ne=Ce.offsetHeight;(e.height||S.value)&&xe!==Ne&&(ae=!0);const Pe=e.tableLayout==="fixed"?n.refs.headerWrapper:(L=n.refs.tableHeaderRef)==null?void 0:L.$el;e.showHeader&&(Pe==null?void 0:Pe.offsetHeight)!==Me&&(ae=!0),h.value=((V=n.refs.tableWrapper)==null?void 0:V.scrollHeight)||0,m.value=(Pe==null?void 0:Pe.scrollHeight)||0,d.value=((Z=n.refs.footerWrapper)==null?void 0:Z.offsetHeight)||0,y.value=((ee=n.refs.appendWrapper)==null?void 0:ee.offsetHeight)||0,g.value=h.value-m.value-d.value-y.value,ae&&(i.value={width:Fe,height:Ne,headerHeight:e.showHeader&&(Pe==null?void 0:Pe.offsetHeight)||0},C())},T=Rr(),$=H(()=>{const{bodyWidth:L,scrollY:V,gutterWidth:Z}=t;return L.value?`${L.value-(V.value?Z:0)}px`:""}),W=H(()=>e.maxHeight?"fixed":e.tableLayout),oe=H(()=>{if(e.data&&e.data.length)return null;let L="100%";e.height&&g.value&&(L=`${g.value}px`);const V=f.value;return{width:V?`${V}px`:"",height:L}}),J=H(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),he=H(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${m.value+d.value}px)`}:{maxHeight:`${e.maxHeight-m.value-d.value}px`}:{});return{isHidden:o,renderExpanded:s,setDragVisible:a,isGroup:u,handleMouseLeave:w,handleHeaderFooterMousewheel:b,tableSize:T,emptyBlockStyle:oe,handleFixedMousewheel:(L,V)=>{const Z=n.refs.bodyWrapper;if(Math.abs(V.spinY)>0){const ee=Z.scrollTop;V.pixelY<0&&ee!==0&&L.preventDefault(),V.pixelY>0&&Z.scrollHeight-Z.clientHeight>ee&&L.preventDefault(),Z.scrollTop+=Math.ceil(V.pixelY/5)}else Z.scrollLeft+=Math.ceil(V.pixelX/5)},resizeProxyVisible:r,bodyWidth:$,resizeState:i,doLayout:C,tableBodyStyles:v,tableLayout:W,scrollbarViewStyle:c,tableInnerStyle:J,scrollbarStyle:he}}function Fi(e){const t=O(),l=()=>{const o=e.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},r=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{r.forEach(a=>a())}),t.value.observe(o,s)};gt(()=>{l()}),fn(()=>{var n;(n=t.value)==null||n.disconnect()})}var da={data:{type:Array,default:()=>[]},size:xr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function fa(e){const t=e.tableLayout==="auto";let l=e.columns||[];t&&l.every(o=>o.width===void 0)&&(l=[]);const n=o=>{const s={key:`${e.tableLayout}_${o.id}`,style:{},name:void 0};return t?s.style={width:`${o.width}px`}:s.name=o.id,s};return re("colgroup",{},l.map(o=>re("col",n(o))))}fa.props=["columns","tableLayout"];const $i=()=>{const e=O(),t=(s,r)=>{const a=e.value;a&&a.scrollTo(s,r)},l=(s,r)=>{const a=e.value;a&&ot(r)&&["Top","Left"].includes(s)&&a[`setScroll${s}`](r)};return{scrollBarRef:e,scrollTo:t,setScrollTop:s=>l("Top",s),setScrollLeft:s=>l("Left",s)}};let Ii=1;const Ni=Re({name:"ElTable",directives:{Mousewheel:zs},components:{TableHeader:bi,TableBody:xi,TableFooter:Oi,ElScrollbar:cn,hColgroup:fa},props:da,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=Ol(),l=Ze("table"),n=qe();Ho(pt,n);const o=ri(n,e);n.store=o;const s=new ii({store:n.store,table:n,fit:e.fit,showHeader:e.showHeader});n.layout=s;const r=H(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:i,toggleRowSelection:u,clearSelection:c,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:g,clearSort:m,sort:d}=Hi(o),{isHidden:y,renderExpanded:w,setDragVisible:b,isGroup:S,handleMouseLeave:v,handleHeaderFooterMousewheel:C,tableSize:p,emptyBlockStyle:x,handleFixedMousewheel:M,resizeProxyVisible:R,bodyWidth:F,resizeState:P,doLayout:T,tableBodyStyles:$,tableLayout:W,scrollbarViewStyle:oe,tableInnerStyle:J,scrollbarStyle:he}=Mi(e,s,o,n),{scrollBarRef:Se,scrollTo:L,setScrollLeft:V,setScrollTop:Z}=$i(),ee=tl(T,50),Ce=`${l.namespace.value}-table_${Ii++}`;n.tableId=Ce,n.state={isGroup:S,resizeState:P,doLayout:T,debouncedUpdateLayout:ee};const ae=H(()=>e.sumText||t("el.table.sumText")),Te=H(()=>e.emptyText||t("el.table.emptyText"));return Fi(n),{ns:l,layout:s,store:o,handleHeaderFooterMousewheel:C,handleMouseLeave:v,tableId:Ce,tableSize:p,isHidden:y,isEmpty:r,renderExpanded:w,resizeProxyVisible:R,resizeState:P,isGroup:S,bodyWidth:F,tableBodyStyles:$,emptyBlockStyle:x,debouncedUpdateLayout:ee,handleFixedMousewheel:M,setCurrentRow:a,getSelectionRows:i,toggleRowSelection:u,clearSelection:c,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:g,clearSort:m,doLayout:T,sort:d,t,setDragVisible:b,context:n,computedSumText:ae,computedEmptyText:Te,tableLayout:W,scrollbarViewStyle:oe,tableInnerStyle:J,scrollbarStyle:he,scrollBarRef:Se,scrollTo:L,setScrollLeft:V,setScrollTop:Z}}}),Ai=["data-prefix"],Di={ref:"hiddenColumns",class:"hidden-columns"};function Li(e,t,l,n,o,s){const r=K("hColgroup"),a=K("table-header"),i=K("table-body"),u=K("table-footer"),c=K("el-scrollbar"),f=Oo("mousewheel");return D(),Y("div",{ref:"tableWrapper",class:pe([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:at(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=(...h)=>e.handleMouseLeave&&e.handleMouseLeave(...h))},[ye("div",{class:pe(e.ns.e("inner-wrapper")),style:at(e.tableInnerStyle)},[ye("div",Di,[Ee(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?ml((D(),Y("div",{key:0,ref:"headerWrapper",class:pe(e.ns.e("header-wrapper"))},[ye("table",{ref:"tableHeader",class:pe(e.ns.e("header")),style:at(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[I(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),I(a,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[f,e.handleHeaderFooterMousewheel]]):be("v-if",!0),ye("div",{ref:"bodyWrapper",class:pe(e.ns.e("body-wrapper"))},[I(c,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:j(()=>[ye("table",{ref:"tableBody",class:pe(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:at({width:e.bodyWidth,tableLayout:e.tableLayout})},[I(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(D(),ne(a,{key:0,ref:"tableHeaderRef",class:pe(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):be("v-if",!0),I(i,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(D(),ne(u,{key:1,class:pe(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):be("v-if",!0)],6),e.isEmpty?(D(),Y("div",{key:0,ref:"emptyBlock",style:at(e.emptyBlockStyle),class:pe(e.ns.e("empty-block"))},[ye("span",{class:pe(e.ns.e("empty-text"))},[Ee(e.$slots,"empty",{},()=>[Ct(je(e.computedEmptyText),1)])],2)],6)):be("v-if",!0),e.$slots.append?(D(),Y("div",{key:1,ref:"appendWrapper",class:pe(e.ns.e("append-wrapper"))},[Ee(e.$slots,"append")],2)):be("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary&&e.tableLayout==="fixed"?ml((D(),Y("div",{key:1,ref:"footerWrapper",class:pe(e.ns.e("footer-wrapper"))},[ye("table",{class:pe(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:at(e.tableBodyStyles)},[I(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),I(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Wn,!e.isEmpty],[f,e.handleHeaderFooterMousewheel]]):be("v-if",!0),e.border||e.isGroup?(D(),Y("div",{key:2,class:pe(e.ns.e("border-left-patch"))},null,2)):be("v-if",!0)],6),ml(ye("div",{ref:"resizeProxy",class:pe(e.ns.e("column-resize-proxy"))},null,2),[[Wn,e.resizeProxyVisible]])],46,Ai)}var Pi=ko(Ni,[["render",Li],["__file","table.vue"]]);const Ki={selection:"table-column--selection",expand:"table__expand-column"},zi={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Wi=e=>Ki[e]||"",Vi={selection:{renderHeader({store:e,column:t}){function l(){return e.states.data.value&&e.states.data.value.length===0}return re(ft,{disabled:l(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:l,$index:n}){return re(ft,{disabled:t.selectable?!t.selectable.call(null,e,n):!1,size:l.states.tableSize.value,onChange:()=>{l.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:l.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let l=t+1;const n=e.index;return typeof n=="number"?l=t+n:typeof n=="function"&&(l=n(t)),re("div",{},[l])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:l}){const{ns:n}=t,o=[n.e("expand-icon")];return l&&o.push(n.em("expand-icon","expanded")),re("div",{class:o,onClick:function(r){r.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[re(ht,null,{default:()=>[re(hn)]})]})},sortable:!1,resizable:!1}};function Bi({row:e,column:t,$index:l}){var n;const o=t.property,s=o&&Er(e,o).value;return t&&t.formatter?t.formatter(e,t,s,l):((n=s==null?void 0:s.toString)==null?void 0:n.call(s))||""}function ji({row:e,treeNode:t,store:l},n=!1){const{ns:o}=l;if(!t)return n?[re("span",{class:o.e("placeholder")})]:null;const s=[],r=function(a){a.stopPropagation(),!t.loading&&l.loadOrToggle(e)};if(t.indent&&s.push(re("span",{class:o.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const a=[o.e("expand-icon"),t.expanded?o.em("expand-icon","expanded"):""];let i=hn;t.loading&&(i=kr),s.push(re("div",{class:a,onClick:r},{default:()=>[re(ht,{class:{[o.is("loading")]:t.loading}},{default:()=>[re(i)]})]}))}else s.push(re("span",{class:o.e("placeholder")}));return s}function ro(e,t){return e.reduce((l,n)=>(l[n]=n,l),t)}function _i(e,t){const l=qe();return{registerComplexWatchers:()=>{const s=["fixed"],r={realWidth:"width",realMinWidth:"minWidth"},a=ro(s,r);Object.keys(a).forEach(i=>{const u=r[i];zt(t,u)&&de(()=>t[u],c=>{let f=c;u==="width"&&i==="realWidth"&&(f=Cn(c)),u==="minWidth"&&i==="realMinWidth"&&(f=oa(c)),l.columnConfig.value[u]=f,l.columnConfig.value[i]=f;const h=u==="fixed";e.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],r={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=ro(s,r);Object.keys(a).forEach(i=>{const u=r[i];zt(t,u)&&de(()=>t[u],c=>{l.columnConfig.value[i]=c})})}}}function Ui(e,t,l){const n=qe(),o=O(""),s=O(!1),r=O(),a=O(),i=Ze("table");Xt(()=>{r.value=e.align?`is-${e.align}`:null,r.value}),Xt(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:r.value,a.value});const u=H(()=>{let v=n.vnode.vParent||n.parent;for(;v&&!v.tableId&&!v.columnId;)v=v.vnode.vParent||v.parent;return v}),c=H(()=>{const{store:v}=n.parent;if(!v)return!1;const{treeData:C}=v.states,p=C.value;return p&&Object.keys(p).length>0}),f=O(Cn(e.width)),h=O(oa(e.minWidth)),g=v=>(f.value&&(v.width=f.value),h.value&&(v.minWidth=h.value),!f.value&&h.value&&(v.width=void 0),v.minWidth||(v.minWidth=80),v.realWidth=Number(v.width===void 0?v.minWidth:v.width),v),m=v=>{const C=v.type,p=Vi[C]||{};Object.keys(p).forEach(M=>{const R=p[M];M!=="className"&&R!==void 0&&(v[M]=R)});const x=Wi(C);if(x){const M=`${E(i.namespace)}-${x}`;v.className=v.className?`${v.className} ${M}`:M}return v},d=v=>{Array.isArray(v)?v.forEach(p=>C(p)):C(v);function C(p){var x;((x=p==null?void 0:p.type)==null?void 0:x.name)==="ElTableColumn"&&(p.vParent=n)}};return{columnId:o,realAlign:r,isSubColumn:s,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:g,setColumnForcedProps:m,setColumnRenders:v=>{e.renderHeader||v.type!=="selection"&&(v.renderHeader=p=>(n.columnConfig.value.label,Ee(t,"header",p,()=>[v.label])));let C=v.renderCell;return v.type==="expand"?(v.renderCell=p=>re("div",{class:"cell"},[C(p)]),l.value.renderExpanded=p=>t.default?t.default(p):t.default):(C=C||Bi,v.renderCell=p=>{let x=null;if(t.default){const $=t.default(p);x=$.some(W=>W.type!==Or)?$:C(p)}else x=C(p);const{columns:M}=l.value.store.states,R=M.value.findIndex($=>$.type==="default"),F=c.value&&p.cellIndex===R,P=ji(p,F),T={class:"cell",style:{}};return v.showOverflowTooltip&&(T.class=`${T.class} ${E(i.namespace)}-tooltip`,T.style={width:`${(p.column.realWidth||Number(p.column.width))-1}px`}),d(x),re("div",T,[P,x])}),v},getPropsData:(...v)=>v.reduce((C,p)=>(Array.isArray(p)&&p.forEach(x=>{C[x]=e[x]}),C),{}),getColumnElIndex:(v,C)=>Array.prototype.indexOf.call(v,C),updateColumnOrder:()=>{l.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var qi={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let Gi=1;var ha=Re({name:"ElTableColumn",components:{ElCheckbox:ft},props:qi,setup(e,{slots:t}){const l=qe(),n=O({}),o=H(()=>{let S=l.parent;for(;S&&!S.tableId;)S=S.parent;return S}),{registerNormalWatchers:s,registerComplexWatchers:r}=_i(o,e),{columnId:a,isSubColumn:i,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:g,getPropsData:m,getColumnElIndex:d,realAlign:y,updateColumnOrder:w}=Ui(e,t,o),b=c.value;a.value=`${b.tableId||b.columnId}_column_${Gi++}`,dn(()=>{i.value=o.value!==b;const S=e.type||"default",v=e.sortable===""?!0:e.sortable,C=xo(e.showOverflowTooltip)?b.props.showOverflowTooltip:e.showOverflowTooltip,p={...zi[S],id:a.value,type:S,property:e.prop||e.property,align:y,headerAlign:u,showOverflowTooltip:C,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:v,index:e.index,rawColumnKey:l.vnode.key};let P=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);P=Ys(p,P),P=Js(g,f,h)(P),n.value=P,s(),r()}),gt(()=>{var S;const v=c.value,C=i.value?v.vnode.el.children:(S=v.refs.hiddenColumns)==null?void 0:S.children,p=()=>d(C||[],l.vnode.el);n.value.getColumnIndex=p,p()>-1&&o.value.store.commit("insertColumn",n.value,i.value?v.columnConfig.value:null,w)}),Mo(()=>{o.value.store.commit("removeColumn",n.value,i.value?b.columnConfig.value:null,w)}),l.columnId=a.value,l.columnConfig=n},render(){var e,t,l;try{const n=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(n))for(const r of n)((l=r.type)==null?void 0:l.name)==="ElTableColumn"||r.shapeFlag&2?o.push(r):r.type===ze&&Array.isArray(r.children)&&r.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!Kl(a==null?void 0:a.children)&&o.push(a)});return re("div",o)}catch(n){return re("div",[])}}});const Yi=mn(Pi,{TableColumn:ha}),Xi=Hr(ha);var rt=(e=>(e.ASC="asc",e.DESC="desc",e))(rt||{}),al=(e=>(e.CENTER="center",e.RIGHT="right",e))(al||{}),ma=(e=>(e.LEFT="left",e.RIGHT="right",e))(ma||{});const nn={asc:"desc",desc:"asc"},rl=Symbol("placeholder"),Ji=(e,t,l)=>{var n;const o={flexGrow:0,flexShrink:0,...l?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};l||(o.flexShrink=1);const s={...(n=e.style)!=null?n:{},...o,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(s.maxWidth=e.maxWidth),e.minWidth&&(s.minWidth=e.minWidth)),s};function Qi(e,t,l){const n=H(()=>E(t).filter(d=>!d.hidden)),o=H(()=>E(n).filter(d=>d.fixed==="left"||d.fixed===!0)),s=H(()=>E(n).filter(d=>d.fixed==="right")),r=H(()=>E(n).filter(d=>!d.fixed)),a=H(()=>{const d=[];return E(o).forEach(y=>{d.push({...y,placeholderSign:rl})}),E(r).forEach(y=>{d.push(y)}),E(s).forEach(y=>{d.push({...y,placeholderSign:rl})}),d}),i=H(()=>E(o).length||E(s).length),u=H(()=>E(t).reduce((y,w)=>(y[w.key]=Ji(w,E(l),e.fixed),y),{})),c=H(()=>E(n).reduce((d,y)=>d+y.width,0)),f=d=>E(t).find(y=>y.key===d),h=d=>E(u)[d],g=(d,y)=>{d.width=y};function m(d){var y;const{key:w}=d.currentTarget.dataset;if(!w)return;const{sortState:b,sortBy:S}=e;let v=rt.ASC;el(b)?v=nn[b[w]]:v=nn[S.order],(y=e.onColumnSort)==null||y.call(e,{column:f(w),key:w,order:v})}return{columns:t,columnsStyles:u,columnsTotalWidth:c,fixedColumnsOnLeft:o,fixedColumnsOnRight:s,hasFixedColumns:i,mainColumns:a,normalColumns:r,visibleColumns:n,getColumn:f,getColumnStyle:h,updateColumnWidth:g,onColumnSorted:m}}const Zi=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:o})=>{const s=O({scrollLeft:0,scrollTop:0});function r(g){var m,d,y;const{scrollTop:w}=g;(m=t.value)==null||m.scrollTo(g),(d=l.value)==null||d.scrollToTop(w),(y=n.value)==null||y.scrollToTop(w)}function a(g){s.value=g,r(g)}function i(g){s.value.scrollTop=g,r(E(s))}function u(g){var m,d;s.value.scrollLeft=g,(d=(m=t.value)==null?void 0:m.scrollTo)==null||d.call(m,E(s))}function c(g){var m;a(g),(m=e.onScroll)==null||m.call(e,g)}function f({scrollTop:g}){const{scrollTop:m}=E(s);g!==m&&i(g)}function h(g,m="auto"){var d;(d=t.value)==null||d.scrollToRow(g,m)}return de(()=>E(s).scrollTop,(g,m)=>{g>m&&o()}),{scrollPos:s,scrollTo:a,scrollToLeft:u,scrollToTop:i,scrollToRow:h,onScroll:c,onVerticalScroll:f}},eu=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:o,ns:s,isScrolling:r})=>{const a=qe(),{emit:i}=a,u=kt(!1),c=O(e.defaultExpandedRowKeys||[]),f=O(-1),h=kt(null),g=O({}),m=O({}),d=kt({}),y=kt({}),w=kt({}),b=H(()=>ot(e.estimatedRowHeight));function S(F){var P;(P=e.onRowsRendered)==null||P.call(e,F),F.rowCacheEnd>E(f)&&(f.value=F.rowCacheEnd)}function v({hovered:F,rowKey:P}){if(r.value)return;o.vnode.el.querySelectorAll(`[rowkey=${P}]`).forEach(W=>{F?W.classList.add(s.is("hovered")):W.classList.remove(s.is("hovered"))})}function C({expanded:F,rowData:P,rowIndex:T,rowKey:$}){var W,oe;const J=[...E(c)],he=J.indexOf($);F?he===-1&&J.push($):he>-1&&J.splice(he,1),c.value=J,i("update:expandedRowKeys",J),(W=e.onRowExpand)==null||W.call(e,{expanded:F,rowData:P,rowIndex:T,rowKey:$}),(oe=e.onExpandedRowsChange)==null||oe.call(e,J)}const p=tl(()=>{var F,P,T,$;u.value=!0,g.value={...E(g),...E(m)},x(E(h),!1),m.value={},h.value=null,(F=t.value)==null||F.forceUpdate(),(P=l.value)==null||P.forceUpdate(),(T=n.value)==null||T.forceUpdate(),($=a.proxy)==null||$.$forceUpdate(),u.value=!1},0);function x(F,P=!1){E(b)&&[t,l,n].forEach(T=>{const $=E(T);$&&$.resetAfterRowIndex(F,P)})}function M(F,P,T){const $=E(h);($===null||$>T)&&(h.value=T),m.value[F]=P}function R({rowKey:F,height:P,rowIndex:T},$){$?$===ma.RIGHT?w.value[F]=P:d.value[F]=P:y.value[F]=P;const W=Math.max(...[d,w,y].map(oe=>oe.value[F]||0));E(g)[F]!==W&&(M(F,W,T),p())}return{expandedRowKeys:c,lastRenderedRowIndex:f,isDynamic:b,isResetting:u,rowHeights:g,resetAfterIndex:x,onRowExpanded:C,onRowHovered:v,onRowsRendered:S,onRowHeightChange:R}},tu=(e,{expandedRowKeys:t,lastRenderedRowIndex:l,resetAfterIndex:n})=>{const o=O({}),s=H(()=>{const a={},{data:i,rowKey:u}=e,c=E(t);if(!c||!c.length)return i;const f=[],h=new Set;c.forEach(m=>h.add(m));let g=i.slice();for(g.forEach(m=>a[m[u]]=0);g.length>0;){const m=g.shift();f.push(m),h.has(m[u])&&Array.isArray(m.children)&&m.children.length>0&&(g=[...m.children,...g],m.children.forEach(d=>a[d[u]]=a[m[u]]+1))}return o.value=a,f}),r=H(()=>{const{data:a,expandColumnKey:i}=e;return i?E(s):a});return de(r,(a,i)=>{a!==i&&(l.value=-1,n(0,!0))}),{data:r,depthMap:o}},lu=(e,t)=>e+t,wl=e=>Wt(e)?e.reduce(lu,0):e,At=(e,t,l={})=>gn(e)?e(t):e!=null?e:l,Rt=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=vl(e[t])}),e),ga=e=>Dt(e)?t=>re(e,t):e,nu=(e,{columnsTotalWidth:t,data:l,fixedColumnsOnLeft:n,fixedColumnsOnRight:o})=>{const s=H(()=>{const{fixed:S,width:v,vScrollbarSize:C}=e,p=v-C;return S?Math.max(Math.round(E(t)),p):p}),r=H(()=>E(s)+e.vScrollbarSize),a=H(()=>{const{height:S=0,maxHeight:v=0,footerHeight:C,hScrollbarSize:p}=e;if(v>0){const x=E(m),M=E(i),F=E(g)+x+M+p;return Math.min(F,v-C)}return S-C}),i=H(()=>{const{rowHeight:S,estimatedRowHeight:v}=e,C=E(l);return ot(v)?C.length*v:C.length*S}),u=H(()=>{const{maxHeight:S}=e,v=E(a);if(ot(S)&&S>0)return v;const C=E(i)+E(g)+E(m);return Math.min(v,C)}),c=S=>S.width,f=H(()=>wl(E(n).map(c))),h=H(()=>wl(E(o).map(c))),g=H(()=>wl(e.headerHeight)),m=H(()=>{var S;return(((S=e.fixedData)==null?void 0:S.length)||0)*e.rowHeight}),d=H(()=>E(a)-E(g)-E(m)),y=H(()=>{const{style:S={},height:v,width:C}=e;return Rt({...S,height:v,width:C})}),w=H(()=>Rt({height:e.footerHeight})),b=H(()=>({top:vl(E(g)),bottom:vl(e.footerHeight),width:vl(e.width)}));return{bodyWidth:s,fixedTableHeight:u,mainTableHeight:a,leftTableWidth:f,rightTableWidth:h,headerWidth:r,rowsHeight:i,windowHeight:d,footerHeight:w,emptyStyle:b,rootStyle:y,headerHeight:g}},ou=e=>{const t=O(),l=O(0),n=O(0);let o;return gt(()=>{o=Wl(t,([s])=>{const{width:r,height:a}=s.contentRect,{paddingLeft:i,paddingRight:u,paddingTop:c,paddingBottom:f}=getComputedStyle(s.target),h=Number.parseInt(i)||0,g=Number.parseInt(u)||0,m=Number.parseInt(c)||0,d=Number.parseInt(f)||0;l.value=r-h-g,n.value=a-m-d}).stop}),Mo(()=>{o==null||o()}),de([l,n],([s,r])=>{var a;(a=e.onResize)==null||a.call(e,{width:s,height:r})}),{sizer:t,width:l,height:n}};function au(e){const t=O(),l=O(),n=O(),{columns:o,columnsStyles:s,columnsTotalWidth:r,fixedColumnsOnLeft:a,fixedColumnsOnRight:i,hasFixedColumns:u,mainColumns:c,onColumnSorted:f}=Qi(e,Vn(e,"columns"),Vn(e,"fixed")),{scrollTo:h,scrollToLeft:g,scrollToTop:m,scrollToRow:d,onScroll:y,onVerticalScroll:w,scrollPos:b}=Zi(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:ut}),S=Ze("table-v2"),v=qe(),C=kt(!1),{expandedRowKeys:p,lastRenderedRowIndex:x,isDynamic:M,isResetting:R,rowHeights:F,resetAfterIndex:P,onRowExpanded:T,onRowHeightChange:$,onRowHovered:W,onRowsRendered:oe}=eu(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:v,ns:S,isScrolling:C}),{data:J,depthMap:he}=tu(e,{expandedRowKeys:p,lastRenderedRowIndex:x,resetAfterIndex:P}),{bodyWidth:Se,fixedTableHeight:L,mainTableHeight:V,leftTableWidth:Z,rightTableWidth:ee,headerWidth:Ce,rowsHeight:ae,windowHeight:Te,footerHeight:xe,emptyStyle:Me,rootStyle:Fe,headerHeight:Ne}=nu(e,{columnsTotalWidth:r,data:J,fixedColumnsOnLeft:a,fixedColumnsOnRight:i}),Pe=O(),Ge=H(()=>{const Ve=E(J).length===0;return Wt(e.fixedData)?e.fixedData.length===0&&Ve:Ve});function mt(Ve){const{estimatedRowHeight:A,rowHeight:te,rowKey:B}=e;return A?E(F)[E(J)[Ve][B]]||A:te}function ut(){const{onEndReached:Ve}=e;if(!Ve)return;const{scrollTop:A}=E(b),te=E(ae),B=E(Te),_=te-(A+B)+e.hScrollbarSize;E(x)>=0&&te===A+E(V)-E(Ne)&&Ve(_)}return de(()=>e.expandedRowKeys,Ve=>p.value=Ve,{deep:!0}),{columns:o,containerRef:Pe,mainTableRef:t,leftTableRef:l,rightTableRef:n,isDynamic:M,isResetting:R,isScrolling:C,hasFixedColumns:u,columnsStyles:s,columnsTotalWidth:r,data:J,expandedRowKeys:p,depthMap:he,fixedColumnsOnLeft:a,fixedColumnsOnRight:i,mainColumns:c,bodyWidth:Se,emptyStyle:Me,rootStyle:Fe,headerWidth:Ce,footerHeight:xe,mainTableHeight:V,fixedTableHeight:L,leftTableWidth:Z,rightTableWidth:ee,showEmpty:Ge,getRowHeight:mt,onColumnSorted:f,onRowHovered:W,onRowExpanded:T,onRowsRendered:oe,onRowHeightChange:$,scrollTo:h,scrollToLeft:g,scrollToTop:m,scrollToRow:d,onScroll:y,onVerticalScroll:w}}const wn=Symbol("tableV2"),va=String,sl={type:we(Array),required:!0},Sn={type:we(Array)},ya={...Sn,required:!0},ru=String,so={type:we(Array),default:()=>Mr([])},Ht={type:Number,required:!0},Ca={type:we([String,Number,Symbol]),default:"id"},io={type:we(Object)},$t=Bt({class:String,columns:sl,columnsStyles:{type:we(Object),required:!0},depth:Number,expandColumnKey:ru,estimatedRowHeight:{...Nt.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:we(Function)},onRowHover:{type:we(Function)},onRowHeightChange:{type:we(Function)},rowData:{type:we(Object),required:!0},rowEventHandlers:{type:we(Object)},rowIndex:{type:Number,required:!0},rowKey:Ca,style:{type:we(Object)}}),Dl={type:Number,required:!0},Tn=Bt({class:String,columns:sl,fixedHeaderData:{type:we(Array)},headerData:{type:we(Array),required:!0},headerHeight:{type:we([Number,Array]),default:50},rowWidth:Dl,rowHeight:{type:Number,default:50},height:Dl,width:Dl}),Sl=Bt({columns:sl,data:ya,fixedData:Sn,estimatedRowHeight:$t.estimatedRowHeight,width:Ht,height:Ht,headerWidth:Ht,headerHeight:Tn.headerHeight,bodyWidth:Ht,rowHeight:Ht,cache:cs.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Nt.scrollbarAlwaysOn,scrollbarStartGap:Nt.scrollbarStartGap,scrollbarEndGap:Nt.scrollbarEndGap,class:va,style:io,containerStyle:io,getRowHeight:{type:we(Function),required:!0},rowKey:$t.rowKey,onRowsRendered:{type:we(Function)},onScroll:{type:we(Function)}}),su=Bt({cache:Sl.cache,estimatedRowHeight:$t.estimatedRowHeight,rowKey:Ca,headerClass:{type:we([String,Function])},headerProps:{type:we([Object,Function])},headerCellProps:{type:we([Object,Function])},headerHeight:Tn.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:we([String,Function])},rowProps:{type:we([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:we([Object,Function])},columns:sl,data:ya,dataGetter:{type:we(Function)},fixedData:Sn,expandColumnKey:$t.expandColumnKey,expandedRowKeys:so,defaultExpandedRowKeys:so,class:va,fixed:Boolean,style:{type:we(Object)},width:Ht,height:Ht,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Nt.hScrollbarSize,vScrollbarSize:Nt.vScrollbarSize,scrollbarAlwaysOn:ds.alwaysOn,sortBy:{type:we(Object),default:()=>({})},sortState:{type:we(Object),default:void 0},onColumnSort:{type:we(Function)},onExpandedRowsChange:{type:we(Function)},onEndReached:{type:we(Function)},onRowExpand:$t.onRowExpand,onScroll:Sl.onScroll,onRowsRendered:Sl.onRowsRendered,rowEventHandlers:$t.rowEventHandlers}),Rn=(e,{slots:t})=>{var l;const{cellData:n,style:o}=e,s=((l=n==null?void 0:n.toString)==null?void 0:l.call(n))||"",r=Ee(t,"default",e,()=>[s]);return I("div",{class:e.class,title:s,style:o},[r])};Rn.displayName="ElTableV2Cell";Rn.inheritAttrs=!1;const xn=(e,{slots:t})=>Ee(t,"default",e,()=>{var l,n;return[I("div",{class:e.class,title:(l=e.column)==null?void 0:l.title},[(n=e.column)==null?void 0:n.title])]});xn.displayName="ElTableV2HeaderCell";xn.inheritAttrs=!1;const iu=Bt({class:String,columns:sl,columnsStyles:{type:we(Object),required:!0},headerIndex:Number,style:{type:we(Object)}}),uu=Re({name:"ElTableV2HeaderRow",props:iu,setup(e,{slots:t}){return()=>{const{columns:l,columnsStyles:n,headerIndex:o,style:s}=e;let r=l.map((a,i)=>t.cell({columns:l,column:a,columnIndex:i,headerIndex:o,style:n[a.key]}));return t.header&&(r=t.header({cells:r.map(a=>Wt(a)&&a.length===1?a[0]:a),columns:l,headerIndex:o})),I("div",{class:e.class,style:s,role:"row"},[r])}}}),cu="ElTableV2Header",du=Re({name:cu,props:Tn,setup(e,{slots:t,expose:l}){const n=Ze("table-v2"),o=O(),s=H(()=>Rt({width:e.width,height:e.height})),r=H(()=>Rt({width:e.rowWidth,height:e.height})),a=H(()=>Fr(E(e.headerHeight))),i=f=>{const h=E(o);Qe(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},u=()=>{const f=n.e("fixed-header-row"),{columns:h,fixedHeaderData:g,rowHeight:m}=e;return g==null?void 0:g.map((d,y)=>{var w;const b=Rt({height:m,width:"100%"});return(w=t.fixed)==null?void 0:w.call(t,{class:f,columns:h,rowData:d,rowIndex:-(y+1),style:b})})},c=()=>{const f=n.e("dynamic-header-row"),{columns:h}=e;return E(a).map((g,m)=>{var d;const y=Rt({width:"100%",height:g});return(d=t.dynamic)==null?void 0:d.call(t,{class:f,columns:h,headerIndex:m,style:y})})};return l({scrollToLeft:i}),()=>{if(!(e.height<=0))return I("div",{ref:o,class:e.class,style:E(s),role:"rowgroup"},[I("div",{style:E(r),class:n.e("header")},[c(),u()])])}}}),fu=e=>{const{isScrolling:t}=vt(wn),l=O(!1),n=O(),o=H(()=>ot(e.estimatedRowHeight)&&e.rowIndex>=0),s=(i=!1)=>{const u=E(n);if(!u)return;const{columns:c,onRowHeightChange:f,rowKey:h,rowIndex:g,style:m}=e,{height:d}=u.getBoundingClientRect();l.value=!0,Qe(()=>{if(i||d!==Number.parseInt(m.height)){const y=c[0],w=(y==null?void 0:y.placeholderSign)===rl;f==null||f({rowKey:h,height:d,rowIndex:g},y&&!w&&y.fixed)}})},r=H(()=>{const{rowData:i,rowIndex:u,rowKey:c,onRowHover:f}=e,h=e.rowEventHandlers||{},g={};return Object.entries(h).forEach(([m,d])=>{gn(d)&&(g[m]=y=>{d({event:y,rowData:i,rowIndex:u,rowKey:c})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:d})=>{const y=g[m];g[m]=w=>{f({event:w,hovered:d,rowData:i,rowIndex:u,rowKey:c}),y==null||y(w)}}),g}),a=i=>{const{onRowExpand:u,rowData:c,rowIndex:f,rowKey:h}=e;u==null||u({expanded:i,rowData:c,rowIndex:f,rowKey:h})};return gt(()=>{E(o)&&s(!0)}),{isScrolling:t,measurable:o,measured:l,rowRef:n,eventHandlers:r,onExpand:a}},hu="ElTableV2TableRow",mu=Re({name:hu,props:$t,setup(e,{expose:t,slots:l,attrs:n}){const{eventHandlers:o,isScrolling:s,measurable:r,measured:a,rowRef:i,onExpand:u}=fu(e);return t({onExpand:u}),()=>{const{columns:c,columnsStyles:f,expandColumnKey:h,depth:g,rowData:m,rowIndex:d,style:y}=e;let w=c.map((b,S)=>{const v=Wt(m.children)&&m.children.length>0&&b.key===h;return l.cell({column:b,columns:c,columnIndex:S,depth:g,style:f[b.key],rowData:m,rowIndex:d,isScrolling:E(s),expandIconProps:v?{rowData:m,rowIndex:d,onExpand:u}:void 0})});if(l.row&&(w=l.row({cells:w.map(b=>Wt(b)&&b.length===1?b[0]:b),style:y,columns:c,depth:g,rowData:m,rowIndex:d,isScrolling:E(s)})),E(r)){const{height:b,...S}=y||{},v=E(a);return I("div",Oe({ref:i,class:e.class,style:v?y:S,role:"row"},n,E(o)),[w])}return I("div",Oe(n,{ref:i,class:e.class,style:y,role:"row"},E(o)),[w])}}}),gu=e=>{const{sortOrder:t}=e;return I(ht,{size:14,class:e.class},{default:()=>[t===rt.ASC?I($r,null,null):I(Ir,null,null)]})},vu=e=>{const{expanded:t,expandable:l,onExpand:n,style:o,size:s}=e,r={onClick:l?()=>n(!t):void 0,class:e.class};return I(ht,Oe(r,{size:s,style:o}),{default:()=>[I(hn,null,null)]})},yu="ElTableV2Grid",Cu=e=>{const t=O(),l=O(),n=H(()=>{const{data:d,rowHeight:y,estimatedRowHeight:w}=e;if(!w)return d.length*y}),o=H(()=>{const{fixedData:d,rowHeight:y}=e;return((d==null?void 0:d.length)||0)*y}),s=H(()=>wl(e.headerHeight)),r=H(()=>{const{height:d}=e;return Math.max(0,d-E(s)-E(o))}),a=H(()=>E(s)+E(o)>0),i=({data:d,rowIndex:y})=>d[y][e.rowKey];function u({rowCacheStart:d,rowCacheEnd:y,rowVisibleStart:w,rowVisibleEnd:b}){var S;(S=e.onRowsRendered)==null||S.call(e,{rowCacheStart:d,rowCacheEnd:y,rowVisibleStart:w,rowVisibleEnd:b})}function c(d,y){var w;(w=l.value)==null||w.resetAfterRowIndex(d,y)}function f(d,y){const w=E(t),b=E(l);!w||!b||(el(d)?(w.scrollToLeft(d.scrollLeft),b.scrollTo(d)):(w.scrollToLeft(d),b.scrollTo({scrollLeft:d,scrollTop:y})))}function h(d){var y;(y=E(l))==null||y.scrollTo({scrollTop:d})}function g(d,y){var w;(w=E(l))==null||w.scrollToItem(d,1,y)}function m(){var d,y;(d=E(l))==null||d.$forceUpdate(),(y=E(t))==null||y.$forceUpdate()}return{bodyRef:l,forceUpdate:m,fixedRowHeight:o,gridHeight:r,hasHeader:a,headerHeight:s,headerRef:t,totalHeight:n,itemKey:i,onItemRendered:u,resetAfterRowIndex:c,scrollTo:f,scrollToTop:h,scrollToRow:g}},En=Re({name:yu,props:Sl,setup(e,{slots:t,expose:l}){const{ns:n}=vt(wn),{bodyRef:o,fixedRowHeight:s,gridHeight:r,hasHeader:a,headerRef:i,headerHeight:u,totalHeight:c,forceUpdate:f,itemKey:h,onItemRendered:g,resetAfterRowIndex:m,scrollTo:d,scrollToTop:y,scrollToRow:w}=Cu(e);l({forceUpdate:f,totalHeight:c,scrollTo:d,scrollToTop:y,scrollToRow:w,resetAfterRowIndex:m});const b=()=>e.bodyWidth;return()=>{const{cache:S,columns:v,data:C,fixedData:p,useIsScrolling:x,scrollbarAlwaysOn:M,scrollbarEndGap:R,scrollbarStartGap:F,style:P,rowHeight:T,bodyWidth:$,estimatedRowHeight:W,headerWidth:oe,height:J,width:he,getRowHeight:Se,onScroll:L}=e,V=ot(W),Z=V?Us:Vs,ee=E(u);return I("div",{role:"table",class:[n.e("table"),e.class],style:P},[I(Z,{ref:o,data:C,useIsScrolling:x,itemKey:h,columnCache:0,columnWidth:V?b:$,totalColumn:1,totalRow:C.length,rowCache:S,rowHeight:V?Se:T,width:he,height:E(r),class:n.e("body"),role:"rowgroup",scrollbarStartGap:F,scrollbarEndGap:R,scrollbarAlwaysOn:M,onScroll:L,onItemRendered:g,perfMode:!1},{default:Ce=>{var ae;const Te=C[Ce.rowIndex];return(ae=t.row)==null?void 0:ae.call(t,{...Ce,columns:v,rowData:Te})}}),E(a)&&I(du,{ref:i,class:n.e("header-wrapper"),columns:v,headerData:C,headerHeight:e.headerHeight,fixedHeaderData:p,rowWidth:oe,rowHeight:T,width:he,height:Math.min(ee+E(s),J)},{dynamic:t.header,fixed:t.row})])}}});function pu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const bu=(e,{slots:t})=>{const{mainTableRef:l,...n}=e;return I(En,Oe({ref:l},n),pu(t)?t:{default:()=>[t]})};function wu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const Su=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:l,...n}=e;return I(En,Oe({ref:l},n),wu(t)?t:{default:()=>[t]})};function Tu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const Ru=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:l,...n}=e;return I(En,Oe({ref:l},n),Tu(t)?t:{default:()=>[t]})};function xu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const Eu=(e,{slots:t})=>{const{columns:l,columnsStyles:n,depthMap:o,expandColumnKey:s,expandedRowKeys:r,estimatedRowHeight:a,hasFixedColumns:i,rowData:u,rowIndex:c,style:f,isScrolling:h,rowProps:g,rowClass:m,rowKey:d,rowEventHandlers:y,ns:w,onRowHovered:b,onRowExpanded:S}=e,v=At(m,{columns:l,rowData:u,rowIndex:c},""),C=At(g,{columns:l,rowData:u,rowIndex:c}),p=u[d],x=o[p]||0,M=!!s,R=c<0,F=[w.e("row"),v,{[w.e(`row-depth-${x}`)]:M&&c>=0,[w.is("expanded")]:M&&r.includes(p),[w.is("fixed")]:!x&&R,[w.is("customized")]:!!t.row}],P=i?b:void 0,T={...C,columns:l,columnsStyles:n,class:F,depth:x,expandColumnKey:s,estimatedRowHeight:R?void 0:a,isScrolling:h,rowIndex:c,rowData:u,rowKey:p,rowEventHandlers:y,style:f};return I(mu,Oe(T,{onRowExpand:S,onMouseenter:oe=>{P==null||P({hovered:!0,rowKey:p,event:oe,rowData:u,rowIndex:c})},onMouseleave:oe=>{P==null||P({hovered:!1,rowKey:p,event:oe,rowData:u,rowIndex:c})},rowkey:p}),xu(t)?t:{default:()=>[t]})},on=({columns:e,column:t,columnIndex:l,depth:n,expandIconProps:o,isScrolling:s,rowData:r,rowIndex:a,style:i,expandedRowKeys:u,ns:c,cellProps:f,expandColumnKey:h,indentSize:g,iconSize:m,rowKey:d},{slots:y})=>{const w=Rt(i);if(t.placeholderSign===rl)return I("div",{class:c.em("row-cell","placeholder"),style:w},null);const{cellRenderer:b,dataKey:S,dataGetter:v}=t,C=gn(v)?v({columns:e,column:t,columnIndex:l,rowData:r,rowIndex:a}):zl(r,S!=null?S:""),p=At(f,{cellData:C,columns:e,column:t,columnIndex:l,rowIndex:a,rowData:r}),x={class:c.e("cell-text"),columns:e,column:t,columnIndex:l,cellData:C,isScrolling:s,rowData:r,rowIndex:a},M=ga(b),R=M?M(x):Ee(y,"default",x,()=>[I(Rn,x,null)]),F=[c.e("row-cell"),t.class,t.align===al.CENTER&&c.is("align-center"),t.align===al.RIGHT&&c.is("align-right")],P=a>=0&&h&&t.key===h,T=a>=0&&u.includes(r[d]);let $;const W=`margin-inline-start: ${n*g}px;`;return P&&(el(o)?$=I(vu,Oe(o,{class:[c.e("expand-icon"),c.is("expanded",T)],size:m,expanded:T,style:W,expandable:!0}),null):$=I("div",{style:[W,`width: ${m}px; height: ${m}px;`].join(" ")},null)),I("div",Oe({class:F,style:w},p,{role:"cell"}),[$,R])};on.inheritAttrs=!1;function ku(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const Ou=({columns:e,columnsStyles:t,headerIndex:l,style:n,headerClass:o,headerProps:s,ns:r},{slots:a})=>{const i={columns:e,headerIndex:l},u=[r.e("header-row"),At(o,i,""),{[r.is("customized")]:!!a.header}],c={...At(s,i),columnsStyles:t,class:u,columns:e,headerIndex:l,style:n};return I(uu,c,ku(a)?a:{default:()=>[a]})},uo=(e,{slots:t})=>{const{column:l,ns:n,style:o,onColumnSorted:s}=e,r=Rt(o);if(l.placeholderSign===rl)return I("div",{class:n.em("header-row-cell","placeholder"),style:r},null);const{headerCellRenderer:a,headerClass:i,sortable:u}=l,c={...e,class:n.e("header-cell-text")},f=ga(a),h=f?f(c):Ee(t,"default",c,()=>[I(xn,c,null)]),{sortBy:g,sortState:m,headerCellProps:d}=e;let y,w;if(m){const v=m[l.key];y=!!nn[v],w=y?v:rt.ASC}else y=l.key===g.key,w=y?g.order:rt.ASC;const b=[n.e("header-cell"),At(i,e,""),l.align===al.CENTER&&n.is("align-center"),l.align===al.RIGHT&&n.is("align-right"),u&&n.is("sortable")],S={...At(d,e),onClick:l.sortable?s:void 0,class:b,style:r,"data-key":l.key};return I("div",Oe(S,{role:"columnheader"}),[h,u&&I(gu,{class:[n.e("sort-icon"),y&&n.is("sorting")],sortOrder:w},null)])},pa=(e,{slots:t})=>{var l;return I("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};pa.displayName="ElTableV2Footer";const ba=(e,{slots:t})=>{const l=Ee(t,"default",{},()=>[I(vn,null,null)]);return I("div",{class:e.class,style:e.style},[l])};ba.displayName="ElTableV2Empty";const wa=(e,{slots:t})=>{var l;return I("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};wa.displayName="ElTableV2Overlay";function Gt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dt(e)}const Hu="ElTableV2",Mu=Re({name:Hu,props:su,setup(e,{slots:t,expose:l}){const n=Ze("table-v2"),{columnsStyles:o,fixedColumnsOnLeft:s,fixedColumnsOnRight:r,mainColumns:a,mainTableHeight:i,fixedTableHeight:u,leftTableWidth:c,rightTableWidth:f,data:h,depthMap:g,expandedRowKeys:m,hasFixedColumns:d,mainTableRef:y,leftTableRef:w,rightTableRef:b,isDynamic:S,isResetting:v,isScrolling:C,bodyWidth:p,emptyStyle:x,rootStyle:M,headerWidth:R,footerHeight:F,showEmpty:P,scrollTo:T,scrollToLeft:$,scrollToTop:W,scrollToRow:oe,getRowHeight:J,onColumnSorted:he,onRowHeightChange:Se,onRowHovered:L,onRowExpanded:V,onRowsRendered:Z,onScroll:ee,onVerticalScroll:Ce}=au(e);return l({scrollTo:T,scrollToLeft:$,scrollToTop:W,scrollToRow:oe}),Ho(wn,{ns:n,isResetting:v,isScrolling:C}),()=>{const{cache:ae,cellProps:Te,estimatedRowHeight:xe,expandColumnKey:Me,fixedData:Fe,headerHeight:Ne,headerClass:Pe,headerProps:Ge,headerCellProps:mt,sortBy:ut,sortState:Ve,rowHeight:A,rowClass:te,rowEventHandlers:B,rowKey:_,rowProps:G,scrollbarAlwaysOn:se,indentSize:Q,iconSize:ie,useIsScrolling:ce,vScrollbarSize:ve,width:Ie}=e,Ae=E(h),Ye={cache:ae,class:n.e("main"),columns:E(a),data:Ae,fixedData:Fe,estimatedRowHeight:xe,bodyWidth:E(p)+ve,headerHeight:Ne,headerWidth:E(R),height:E(i),mainTableRef:y,rowKey:_,rowHeight:A,scrollbarAlwaysOn:se,scrollbarStartGap:2,scrollbarEndGap:ve,useIsScrolling:ce,width:Ie,getRowHeight:J,onRowsRendered:Z,onScroll:ee},De=E(c),_e=E(u),U={cache:ae,class:n.e("left"),columns:E(s),data:Ae,estimatedRowHeight:xe,leftTableRef:w,rowHeight:A,bodyWidth:De,headerWidth:De,headerHeight:Ne,height:_e,rowKey:_,scrollbarAlwaysOn:se,scrollbarStartGap:2,scrollbarEndGap:ve,useIsScrolling:ce,width:De,getRowHeight:J,onScroll:Ce},me=E(f)+ve,ue={cache:ae,class:n.e("right"),columns:E(r),data:Ae,estimatedRowHeight:xe,rightTableRef:b,rowHeight:A,bodyWidth:me,headerWidth:me,headerHeight:Ne,height:_e,rowKey:_,scrollbarAlwaysOn:se,scrollbarStartGap:2,scrollbarEndGap:ve,width:me,style:`--${E(n.namespace)}-table-scrollbar-size: ${ve}px`,useIsScrolling:ce,getRowHeight:J,onScroll:Ce},ge=E(o),Ke={ns:n,depthMap:E(g),columnsStyles:ge,expandColumnKey:Me,expandedRowKeys:E(m),estimatedRowHeight:xe,hasFixedColumns:E(d),rowProps:G,rowClass:te,rowKey:_,rowEventHandlers:B,onRowHovered:L,onRowExpanded:V,onRowHeightChange:Se},ke={cellProps:Te,expandColumnKey:Me,indentSize:Q,iconSize:ie,rowKey:_,expandedRowKeys:E(m),ns:n},yt={ns:n,headerClass:Pe,headerProps:Ge,columnsStyles:ge},tt={ns:n,sortBy:ut,sortState:Ve,headerCellProps:mt,onColumnSorted:he},lt={row:bt=>I(Eu,Oe(bt,Ke),{row:t.row,cell:et=>{let wt;return t.cell?I(on,Oe(et,ke,{style:ge[et.column.key]}),Gt(wt=t.cell(et))?wt:{default:()=>[wt]}):I(on,Oe(et,ke,{style:ge[et.column.key]}),null)}}),header:bt=>I(Ou,Oe(bt,yt),{header:t.header,cell:et=>{let wt;return t["header-cell"]?I(uo,Oe(et,tt,{style:ge[et.column.key]}),Gt(wt=t["header-cell"](et))?wt:{default:()=>[wt]}):I(uo,Oe(et,tt,{style:ge[et.column.key]}),null)}})},Et=[e.class,n.b(),n.e("root"),{[n.is("dynamic")]:E(S)}],Ut={class:n.e("footer"),style:E(F)};return I("div",{class:Et,style:E(M)},[I(bu,Ye,Gt(lt)?lt:{default:()=>[lt]}),I(Su,U,Gt(lt)?lt:{default:()=>[lt]}),I(Ru,ue,Gt(lt)?lt:{default:()=>[lt]}),t.footer&&I(pa,Ut,{default:t.footer}),E(P)&&I(ba,{class:n.e("empty"),style:E(x)},{default:t.empty}),t.overlay&&I(wa,{class:n.e("overlay")},{default:t.overlay})])}}}),Fu=Bt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:we(Function)}}),$u=Re({name:"ElAutoResizer",props:Fu,setup(e,{slots:t}){const l=Ze("auto-resizer"),{height:n,width:o,sizer:s}=ou(e),r={width:"100%",height:"100%"};return()=>{var a;return I("div",{ref:s,class:l.b(),style:r},[(a=t.default)==null?void 0:a.call(t,{height:n.value,width:o.value})])}}}),Iu=mn(Mu);mn($u);function Le(e,t){if(e==null)return;if(typeof t=="function")return t(e);if(t==null||t==="")return;let l=e;return t.split(".").forEach(n=>{l=l?l[n]:null}),l}function Sa(e,t,l,n,o){const s=[];return e&&e.forEach(r=>{var a,i;s.push(re(Xi,{...jt(r,["showOverflowTooltip","columnKey","className","uid","slot","headerSlot","hideInTable","hideInSetting","children"]),showOverflowTooltip:Du(r.showOverflowTooltip,o),columnKey:(a=r.columnKey)!=null?a:r.prop,className:ju(r),index:(i=r.index)!=null?i:t,key:r.uid},{default:u=>{const c=Ea(l,r.slot),f=u==null?void 0:u.$index;return!c||f==-1&&n?Sa(r.children,t,l,n,o):c(u)},header:u=>{var c;const f=(c=u==null?void 0:u.column)==null?void 0:c.label,h=Lu(l,r.headerSlot,u);return re("div",{class:"ele-cell-title",title:f},h!=null?h:f)}}))}),s}function Ta(e,t){if(e!=null){if(typeof e=="function")return e(t);if(typeof e=="string"&&e)return e}}function Nu(e,t){const l=["ele-table-tr"],n=Ta(e,t);return n!=null&&l.push(n),l.join(" ")}function Au(e,t,l){const n=["ele-table-head-tr"];l&&n.push("is-ellipsis");const o=Ta(e,t);return o!=null&&n.push(o),n.join(" ")}function Ra(e,t,l){return e?{effect:t,...l||{},...e===!0?{}:e}:!1}function xa(e,t){return e===!1||e==null&&!t?!1:{...!t||t===!0?{}:t,...!e||e===!0?{}:e}}function Du(e,t){const l=xa(e,t);if(!l)return!1;const n=["ele-popper","ele-tooltip","ele-table-tooltip"];return l.popperClass&&n.push(l.popperClass),l.popperClass=n.join(" "),l}function Ea(e,t){if(t&&e[t]!=null&&typeof e[t]=="function")return e[t]}function Lu(e,t,l){const n=Ea(e,t);if(n!=null)return n(l||{})}function ka(e,t,l){return e===!1?{}:{imageSize:68,...!e||e===!0?{}:e,description:l||t,class:"ele-table-empty"}}function Pu(e,t,l,n){const o=e.empty;if(!(!t&&!o))return()=>{if(o)return o({text:l,error:n});if(t)return re(vn,ka(t,l,n))}}function Ku(e,t,l){var n,o;if(e==null)return;const s=(n=E(e))==null?void 0:n.store,r=E((o=s==null?void 0:s.states)==null?void 0:o.selection);r.indexOf(t)!==-1||r.push(t),s.updateAllSelected()}function zu(e){var t,l;const n=(l=(t=E(e))==null?void 0:t.store)==null?void 0:l.states,o=E(n==null?void 0:n.columns),s=E(n==null?void 0:n.filters);if(!s||!o)return;const r=Object.keys(s),a={};return o.forEach(i=>{r.includes(i.id)&&(a[i.columnKey||i.id]=s[i.id])}),a}function Wu(e,t,l){if(!t&&!l)return{cols:e};const n=l==null?[]:Object.keys(l),o=t!=null&&t.prop!=null&&t.prop!="";let s=!1;return{cols:Hl(e,a=>{var f;o&&a.prop===t.prop&&(s=!0);const i=(f=a.columnKey)!=null?f:a.prop,c=(i?n.includes(i):!1)&&l?l[i]:void 0;return{...a,filteredValue:c!=null?c:a.filteredValue}}),sorter:o&&s?t:void 0}}function Vu(e){let t;return He(e,l=>{if(l.type==="selection")return t=typeof l.selectable=="function"?l.selectable:null,!1}),t}function Bu(e,t,l){const n=Vu(l);return typeof n>"u"?!0:!(n==null||n(e,t)===!0)}function an(e){let t=!1;return He(e,l=>{if(l.type==="selection")return t=!!l.reserveSelection,!1}),t}function xl(e){return e===!0||e==="left"?0:e==="right"?2:1}function ju(e){const t=[];return e.type==="index"&&t.push("is-index"),e.className&&t.push(e.className),t.length?t.join(" "):void 0}function It(e,t){const l=[];return e&&e.forEach(n=>{const o=Le(n,t);o!=null&&l.push(o)}),l}function fl(e,t,l,n){return nl(t,o=>Le(o,l)===e,n)}function co(e,t,l){const n=[],o=[];return He(e,s=>{n.push(Le(s,t)),o.push(s)},l),[n,o]}function El(e,t){return!(e==null&&t==null||e===t)}function dt(e,t){const l=e==null||!e.length,n=t==null||!t.length;return l&&n?!1:l!==n||e.length!==t.length?!0:e.some(o=>!t.includes(o))}function Oa(e){return{clearSelection:()=>{const l=e();l&&l.clearSelection()},getSelectionRows:()=>{const l=e();if(l)return l.getSelectionRows()},toggleRowSelection:(l,n)=>{const o=e();o&&o.toggleRowSelection(l,n)},toggleAllSelection:()=>{const l=e();l&&l.toggleAllSelection()},toggleRowExpansion:(l,n)=>{const o=e();o&&o.toggleRowExpansion(l,n)},setCurrentRow:l=>{const n=e();n&&n.setCurrentRow(l)},clearSort:()=>{const l=e();l&&l.clearSort()},clearFilter:l=>{const n=e();n&&n.clearFilter(l)},doLayout:()=>{const l=e();l&&l.doLayout()},sort:(l,n)=>{const o=e();o&&o.sort(l,n)},scrollTo:(l,n)=>{const o=e();o&&o.scrollTo(l,n)},setScrollTop:l=>{const n=e();n&&n.setScrollTop(l)},setScrollLeft:l=>{const n=e();n&&n.setScrollLeft(l)},setCurrentRowKey:l=>{const n=e();n&&n.setCurrentRowKey(l)},getCurrentRow:()=>{const l=e();if(l)return l.getCurrentRow()},setSelectedRows:l=>{const n=e();n&&n.setSelectedRows(l)},setSelectedRowKeys:(l,n)=>{const o=e();o&&o.setSelectedRowKeys(l,n)},toggleRowExpansionAll:l=>{const n=e();n&&n.toggleRowExpansionAll(l)},updateSelectedAndChecked:()=>{const l=e();l&&l.updateSelectedAndChecked()}}}function kn(e){return{onSelect:(t,l)=>{e("select",t,l)},onSelectAll:t=>{e("selectAll",t)},onCellMouseEnter:(t,l,n,o)=>{e("cellMouseEnter",t,l,n,o)},onCellMouseLeave:(t,l,n,o)=>{e("cellMouseLeave",t,l,n,o)},onCellClick:(t,l,n,o)=>{e("cellClick",t,l,n,o)},onCellDblclick:(t,l,n,o)=>{e("cellDblclick",t,l,n,o)},onCellContextmenu:(t,l,n,o)=>{e("cellContextmenu",t,l,n,o)},onRowClick:(t,l,n)=>{e("rowClick",t,l,n)},onRowContextmenu:(t,l,n)=>{e("rowContextmenu",t,l,n)},onRowDblclick:(t,l,n)=>{e("rowDblclick",t,l,n)},onHeaderClick:(t,l)=>{e("headerClick",t,l)},onHeaderContextmenu:(t,l)=>{e("headerContextmenu",t,l)},onHeaderDragend:(t,l,n,o)=>{e("headerDragend",t,l,n,o)},onExpandChange:(t,l)=>{e("expandChange",t,l)},onSelectionChange:t=>{e("selectionChange",t)},onSortChange:t=>{e("sortChange",t)},onFilterChange:t=>{e("filterChange",t)},onCurrentChange:(t,l)=>{e("currentChange",t,l)},"onUpdate:currentRowKey":t=>{e("update:currentRowKey",t)},"onUpdate:selectedRowKeys":t=>{e("update:selectedRowKeys",t)}}}const Ha=jt(da,["style"]),$l={...Ha,stripe:{type:Boolean,default:null},border:{type:Boolean,default:null},rowKey:{type:[String,Function],required:!0},columns:{type:Array,required:!0},pageIndex:Number,errorText:String,headerEllipsis:{type:Boolean,default:!0},slotNormalize:{type:Boolean,default:!0},sticky:Boolean,bottomLine:{type:Boolean,default:!0},emptyProps:{type:[Boolean,Object],default:()=>null},rowClickChecked:[Boolean,String],reserveCurrent:Boolean,selectedRowKeys:Array,cacheData:Array},On={select:(e,t)=>!0,selectAll:e=>!0,selectionChange:e=>!0,cellMouseEnter:(e,t,l,n)=>!0,cellMouseLeave:(e,t,l,n)=>!0,cellClick:(e,t,l,n)=>!0,cellDblclick:(e,t,l,n)=>!0,cellContextmenu:(e,t,l,n)=>!0,rowClick:(e,t,l)=>!0,rowContextmenu:(e,t,l)=>!0,rowDblclick:(e,t,l)=>!0,headerClick:(e,t)=>!0,headerContextmenu:(e,t)=>!0,sortChange:e=>!0,filterChange:e=>!0,currentChange:(e,t)=>!0,headerDragend:(e,t,l,n)=>!0,expandChange:(e,t)=>!0,"update:currentRowKey":e=>!0,"update:selectedRowKeys":e=>!0},_u=Object.keys(Ha),Uu=Object.keys($l),qu=Re({name:"EleDataTable",props:$l,emits:On,setup(e,{emit:t,slots:l,expose:n}){var P;const o=kn(t),s=Oa(()=>a.value),r={sorter:e.defaultSort,key:null,checkedKeys:[],checked:[],reserveChecked:an(e.columns)},a=O(null),i=O((P=e.columns)!=null?P:[]),u=H(()=>Ra(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions)),c=H(()=>{var T;return((T=e.treeProps)==null?void 0:T.children)||"children"}),f=()=>{var T;const $=(T=a.value)==null?void 0:T.scrollBarRef;$&&typeof $.update=="function"&&$.update()},h=()=>{s.clearSort(),r.sorter={}},g=()=>{p([])},m=(T,$)=>{s.toggleRowSelection(T,$);const W=s.getSelectionRows()||[];p(It(W,e.rowKey),W)},d=T=>{C(Le(T,e.rowKey),T)},y=T=>{C(T)},w=()=>r.row,b=T=>{T&&p(It(T,e.rowKey),T,!!T.length)},S=T=>{T&&p(T)},v=T=>{He(e.data,$=>{var W;(W=$[c.value])!=null&&W.length&&s.toggleRowExpansion($,T)},c.value)},C=(T,$)=>{if(!El(r.key,T)){T!=null&&$!=null&&(r.row!==$&&(r.row=$,o.onCurrentChange($,r.oldRow)),s.setCurrentRow($));return}if(T!=null){const W=fl(T,e.data,e.rowKey,c.value);if(W!=null||e.reserveCurrent){r.oldRow=r.row,r.row=W||$||void 0,r.row==null&&e.cacheData!=null&&(r.row=fl(T,e.cacheData,e.rowKey,c.value)),r.key=T,s.setCurrentRow(W),M(T),o.onCurrentChange(r.row,r.oldRow);return}}r.key!=null&&(r.oldRow=r.row,r.row=void 0,r.key=null,s.setCurrentRow(null),M(),o.onCurrentChange(void 0,r.oldRow))},p=(T,$,W)=>{if(!W&&!dt(r.checkedKeys,T))return;const[oe,J]=co(e.data,e.rowKey,c.value),[he,Se]=co(e.cacheData,e.rowKey,c.value),L=$?$.map(ae=>Le(ae,e.rowKey)):[],V=r.checked.map(ae=>Le(ae,e.rowKey)),Z=[],ee=[];T.forEach(ae=>{const Te=oe.indexOf(ae);if(Te!==-1)Z.push(ae),ee.push(J[Te]);else if(r.reserveChecked){if(Z.push(ae),$!=null){const Me=L.indexOf(ae);if(Me!==-1&&!$[Me]._isMock){ee.push($[Me]);return}}if(e.cacheData!=null){const Me=he.indexOf(ae);if(Me!==-1){ee.push(Se[Me]);return}}const xe=V.indexOf(ae);if(xe!==-1){ee.push(r.checked[xe]);return}typeof e.rowKey=="string"&&ee.push({[e.rowKey]:ae,_isMock:!0})}});const Ce=dt(r.checked,ee);r.checked=ee,r.checkedKeys=Z,(Ce||W&&dt(s.getSelectionRows(),ee))&&(s.clearSelection(),ee.forEach(ae=>{Ku(a.value,ae)})),R(Z),Ce&&o.onSelectionChange(ee)},x=()=>{const T=r.key;if(T!=null){const $=fl(T,e.data,e.rowKey,c.value);if($!=null)C(T,$);else if(!e.reserveCurrent)C(null);else if(e.cacheData!=null){const W=fl(T,e.cacheData,e.rowKey,c.value);W!=null&&C(T,W)}}r.checkedKeys.length&&p(r.checkedKeys,void 0,!0)},M=T=>{El(e.currentRowKey,T)&&o["onUpdate:currentRowKey"](T)},R=T=>{const $=e.selectedRowKeys||[];dt($,T)&&o["onUpdate:selectedRowKeys"](T)};de(()=>e.columns,T=>{if(r.reserveChecked=an(T),!T)i.value=[];else{const{cols:$,sorter:W}=Wu(T,r.sorter,r.filter);i.value=$,Qe(()=>{s.doLayout(),f(),W&&s.sort(W.prop,W.order||"ascending")})}},{deep:!0}),de([()=>e.data,()=>e.cacheData],()=>{Qe(()=>{x()})}),de(()=>e.currentRowKey,T=>{C(T)}),de(()=>e.selectedRowKeys,T=>{p(T||[])},{deep:!0}),gt(()=>{e.currentRowKey!=null&&C(e.currentRowKey),e.selectedRowKeys!=null&&e.selectedRowKeys.length&&p(e.selectedRowKeys)});const F={...s,clearSort:h,clearSelection:g,toggleRowSelection:m,setCurrentRow:d,setCurrentRowKey:y,getCurrentRow:w,setSelectedRows:b,setSelectedRowKeys:S,toggleRowExpansionAll:v,updateSelectedAndChecked:x,tableRef:a};return n(F),()=>re(Yi,{...Fo(e,_u),...jt(o,["onUpdate:currentRowKey","onUpdate:selectedRowKeys"]),ref:a,class:["ele-data-table",{"is-sticky":e.sticky},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine}],currentRowKey:void 0,emptyText:e.errorText||e.emptyText,rowClassName:T=>Nu(e.rowClassName,T),headerRowClassName:T=>Au(e.headerRowClassName,T,e.headerEllipsis),onRowClick:(T,$,W)=>{if(e.rowClickChecked&&!Bu(T,e.data.indexOf(T),e.columns)){const oe=s.getSelectionRows();if(e.rowClickChecked==="smart"&&(!oe||!oe.length||oe.length===1)){const J=Le(T,e.rowKey);p(J==null?[]:[J])}else m(T)}o.onRowClick(T,$,W)},onHeaderClick:(T,$)=>{if(T.sortable&&T.filters){const W=$.currentTarget;if(W){const oe=W.querySelector(".caret-wrapper");oe&&oe.dispatchEvent(new MouseEvent("click"))}}o.onHeaderClick(T,$)},onSortChange:T=>{const $=r.sorter;$&&T.prop===$.prop&&T.order===$.order||(r.sorter=T,o.onSortChange(T))},onFilterChange:T=>{var $;r.filter=($=zu(a.value))!=null?$:T,o.onFilterChange(r.filter)},onCurrentChange:(T,$)=>{T!=null&&T!==$&&C(Le(T,e.rowKey),T)},onSelect:(T,$)=>{o.onSelect(T,$),p(It(T,e.rowKey),T)},onSelectAll:T=>{p(It(T,e.rowKey),T),o.onSelectAll(T)},onSelectionChange:()=>{},showOverflowTooltip:void 0,tooltipOptions:void 0,tooltipEffect:void 0},{default:()=>Sa(i.value,e.pageIndex,l,e.slotNormalize,u.value),append:l.append,empty:Pu(l,e.emptyProps,e.emptyText,e.errorText)})}});function Gu(e,t){return t!=null&&t>0?t:e==="small"?34:e==="large"?50:42}function xt(e){var t,l,n;return e&&(n=(l=(t=e.columnKey)!=null?t:e.property)!=null?l:e.prop)!=null?n:""}function kl(e,t){if(typeof e=="number")return e<0?t:e;if(e==null||e===""||e==="auto"||e.endsWith("%"))return t;const l=Number.parseInt(e);return isNaN(l)?t:l}function Yu(e,t,l,n){const o=kl(t),s=kl(e);return s!=null?o==null||s<=o?s:o:Math.max(n,l)}function fo(e){let t,l;e.forEach((n,o)=>{const s=n.originalCol;s&&(s.fixed==="left"||s.fixed===!0?t=o:l==null&&s.fixed==="right"&&(l=o))}),t!=null&&(e[t].isFixedLeftLast=!0),l!=null&&(e[l].isFixedRightFirst=!0)}function Ma(e,t,l,n,o){l[n]==null&&(l[n]=[]),e.forEach(s=>{var u;const r=xt(s),a=jt(s,["children"]);o!=null&&o.originalCol!=null&&(a.fixed=o.originalCol.fixed);const i={key:r,originalCol:a};if(s.children&&s.children.length)i.rowspan=1,i.colspan=s.children.length,Ma(s.children,t,l,n+1,i),o&&o.colspan!=null&&(o.colspan+=i.colspan-1);else{i.colspan=1;const c={width:kl(s.width),minWidth:kl(s.minWidth,80),key:r,dataKey:(u=s.property)!=null?u:s.prop,originalCol:a};t.push(c)}l[n].push(i)})}function Fa(e){const t=[],l=[];if(!e||!e.length)return{cols:t,rows:l};const n=[...e];n.sort((o,s)=>xl(o.fixed)-xl(s.fixed)),Ma(n,t,l,0),fo(t),l.forEach((o,s)=>{o.forEach(r=>{r!=null&&r.rowspan==null&&(r.rowspan=l.length-s)})});for(let o=0;o<l.length;o++)for(let s=0;s<l[o].length;s++){const r=l[o][s];if(r.colspan!=null&&r.colspan>1)for(let a=1;a<r.colspan;a++)l[o].splice(s+a,0,{colspan:0,rowspan:1});if(r.rowspan!=null&&r.rowspan>1)for(let a=1;a<r.rowspan;a++)l[o+a].splice(s,0,{colspan:1,rowspan:0,originalCol:r.originalCol})}return l.forEach(o=>{fo(o)}),{cols:t,rows:l}}function Xu(e,t,l,n){if(e.width!=null)return e.width;if(e.minWidth==null)return 0;const o=t-l;return o<=n?e.minWidth:Math.floor(e.minWidth/n*o)}function ho(e,t){let l=0;e.forEach((o,s)=>{const r=o.originalCol;r&&(r.fixed==="left"||r.fixed===!0)&&(t[s].fixedLeft=l+"px",t[s].width&&(l+=t[s].width))});let n=0;for(let o=e.length-1;o>=0;o--){const s=e[o].originalCol;s&&s.fixed==="right"&&(t[o].fixedRight=n+"px",t[o].width&&(n+=t[o].width))}}function Ju(e,t,l){let n=!0,o=0,s=0;e.forEach(c=>{if(c.width==null){n=!1,c.minWidth!=null&&(s+=c.minWidth);return}o+=c.width});const r=n?Math.min(l,o):l,a=[];let i=0;e.forEach((c,f)=>{const h=Xu(c,r,o,s);i+=h,a[f]={width:h},f===e.length-1&&r>i&&(a[f].width=h+r-i,i=r)}),ho(e,a);const u=[];return t.forEach(c=>{const f=[];c.forEach((h,g)=>{if(!e[g]||!h.colspan){f[g]={width:0};return}let m=a[g].width||0;if(h.colspan>1){const d=g+h.colspan;for(let y=g+1;y<d;y++)a[y]&&a[y].width&&(m+=a[y].width)}f[g]={width:m}}),u.push(f),ho(c,f)}),{width:r,colSizes:a,rowSizes:u,sumWidth:i}}function Qu(e,t){if(e.length!==t.length)return!0;for(let l=0;l<e.length;l++)if(e[l].width!==t[l].width)return!0;return!1}function Zu(e,t){return e.map((n,o)=>({title:n.originalCol?n.originalCol.label:void 0,width:t[o].width,key:n.key,dataKey:n.dataKey})).filter(n=>!!n.width)}function mo(e,t,l,n,o,s){if(!e||!e.length)return[];if(t)return e.map((a,i)=>{var f;const u=(f=Le(a,o))!=null?f:i,c={rowId:"_expand_"+u,rowIndex:i,rowData:a,isExpandRow:!0};return{rowId:u,rowIndex:i,rowData:a,isDisabled:!(s==null||s(a,r)===!0),children:[c]}});let r=-1;return Hl(e,a=>{var i;return r++,{rowId:(i=Le(a,o))!=null?i:r,rowIndex:r,rowData:a,isDisabled:!(s==null||s(a,r)===!0),hasChildren:a[n]===!0}},l)}function Yt(e,t,l,n){return l==null?nl(t,o=>o.rowId===e&&!o.isExpandRow):nl(t,o=>Le(o,l)===e,n)}function hl(e,t,l){const n=[],o=[];return He(e,s=>{const r=t==null;(!r||!s.isExpandRow)&&(n.push(r?s.rowId:Le(s,t)),o.push(s))},l),[n,o]}function ec(e,t,l){if(e)return!0;let n=!0;for(let o=0;o<t.length;o++){const s=t[o].originalCol;if(s&&s.type!=="selection"&&s.type!=="expand"){if(s.showOverflowTooltip==null)n=!1;else if(s.showOverflowTooltip===!1)return!0}}return n?!1:l==null||l===!1}function _t(e,t){var l,n;if(typeof e.render=="function"&&e.params!=null){const o=e.render(...e.params);if(o!=null)return Array.isArray(o)?o:[o]}return(n=(l=t.slots).default)==null?void 0:n.call(l)}function tc(e,t){const l=xt(t);if(e==null||e.order==null||e.key!==l)return{key:l,order:rt.ASC};if(e.order!==rt.DESC)return{key:l,order:rt.DESC}}function lc(e){if(e==="ascending")return rt.ASC;if(e==="descending")return rt.DESC}function $a(e){if(e!=null){if(e===rt.ASC)return"ascending";if(e===rt.DESC)return"descending"}}function nc(e){if(!e)return;const{prop:t,order:l}=e;if(!(!t||!l||!["ascending","descending"].includes(l)))return{key:t,order:l==="ascending"?rt.ASC:rt.DESC}}function oc(e){const t={};return He(e,l=>{const n=xt(l);n&&l.filteredValue!=null&&l.filteredValue.length&&(t[n]=l.filteredValue)}),t}function ac(e,t){var n;if(!e)return;if(!t)return e.filteredValue;const l=xt(e);return l&&(n=t[l])!=null?n:e.filteredValue}function go(e){for(let t=0;t<e.length;t++){const l=e[t].originalCol;if(l&&l.type==="selection")return typeof l.selectable=="function"?l.selectable:null}}function rc(e){const{children:t,hasChildren:l}=e||{};return{childrenName:t||"children",hasChildrenName:l||"hasChildren"}}function Ia(e,t,l){return t==null?String((l!=null?l:1)+e):String(typeof t=="function"?t(e):t+e)}function Na(e,t){const l={rowspan:1,colspan:1};if(typeof t=="function"){const n=t(e);if(n!=null)if(Array.isArray(n)){const[o,s]=n;o!=null&&(l.rowspan=o),s!=null&&(l.colspan=s)}else n.rowspan!=null&&(l.rowspan=n.rowspan),n.colspan!=null&&(l.colspan=n.colspan)}return l}function Aa(e,t,l){if(typeof e!="function"||t==null||l==null)return;const n=t.map(o=>({...o.originalCol||{},property:o.dataKey}));return e({columns:n,data:l})}function Da(e,t){if(!e||!t)return"";let l=0;for(let n=0;n<e.length;n++){const o=Number(Le(e[n],t));if(Number.isNaN(o))return"";l+=o}return String(l)}function sc(e,t,l){let n;return e!=null&&t!=null&&He(e,o=>{if(l!=null){if(o.property===l||o.prop===l)return n=o,!1}else if(xt(o)===t)return n=o,!1}),n}function ic(e){const t=e.querySelector(".ele-table-cell");return Ar(t,"horizontal")}function uc(e){const t=O(0),l=O(0),n=()=>{const a=e();if(a){const i=Math.floor(a.clientWidth);t.value!==i&&(t.value=i);const u=Math.floor(a.clientHeight);t.value!==u&&(l.value=u)}},o=new ResizeObserver(Nr(()=>{n()},400)),s=()=>{r();const a=e();a&&o.observe(a)},r=()=>{const a=e();a&&o.unobserve(a)};return gt(()=>{n(),s()}),dn(()=>{o.disconnect()}),$o(()=>{n(),s()}),Io(()=>{r()}),{wrapWidth:t,wrapHeight:l,updateWrapSize:n}}const cc=Re({name:"CellCheckbox",components:{ElCheckbox:ft},props:{checked:Boolean,indeterminate:Boolean,disabled:Boolean,size:String},emits:{change:e=>!0},setup(e,{emit:t}){return{onUpdateModelValue:n=>{e.checked!==n&&t("change",n)}}}}),dc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function fc(e,t,l,n,o,s){const r=K("ElCheckbox");return D(),ne(r,{modelValue:e.checked,indeterminate:e.indeterminate,disabled:e.disabled,size:e.size,"onUpdate:modelValue":e.onUpdateModelValue},null,8,["modelValue","indeterminate","disabled","size","onUpdate:modelValue"])}const La=dc(cc,[["render",fc]]),hc=Re({name:"CellFilter",components:{ElIcon:ht,ElButton:yn,ElScrollbar:cn,ElCheckboxGroup:Dr,ElCheckbox:ft,EleTooltip:Ml,FilterFilled:Lr},props:{filtered:Array,filterMultiple:Boolean,filters:Array,filterPlacement:{type:String,default:"bottom-start"}},emits:{change:e=>!0},setup(e,{emit:t}){const{t:l}=Ol(),n=O(null),o=O([]),s=H(()=>l("el.table.clearFilter")),r=H(()=>{if(!(!e.filtered||!e.filtered.length))return e.filtered[0]}),a=H(()=>l("el.table.confirmFilter")),i=H(()=>l("el.table.resetFilter")),u=()=>{n.value&&n.value.hide()},c=()=>{var d;o.value=(d=e.filtered)!=null?d:[]},f=d=>{h(d==null?[]:[d]),u()},h=d=>{t("change",d)};return{popperRef:n,checkedValue:o,clearFilterText:s,filteredValue:r,confirmText:a,resetText:i,onItemClick:f,onFilterChange:h,onConfirm:()=>{h(o.value),u()},onReset:()=>{o.value=[],h([]),u()},onBeforeEnter:c}}}),mc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},gc={class:"ele-table-filter-footer"},vc={key:1,class:"ele-table-filter-list"},yc=["onClick"];function Cc(e,t,l,n,o,s){const r=K("FilterFilled"),a=K("ElIcon"),i=K("ElCheckbox"),u=K("ElCheckboxGroup"),c=K("ElScrollbar"),f=K("ElButton"),h=K("EleTooltip");return D(),Y("div",{class:"ele-table-filter",onClick:t[2]||(t[2]=Fl(()=>{},["stop"]))},[I(h,{ref:"popperRef",trigger:"click",showArrow:!1,placement:e.filterPlacement,popperClass:"ele-table-filter-popper",gpuAcceleration:!0,effect:"light",isPopover:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,4]}}]},onBeforeShow:e.onBeforeEnter},{body:j(()=>[e.filterMultiple?(D(),Y(ze,{key:0},[I(c,{class:"ele-table-filter-body"},{default:j(()=>[I(u,{modelValue:e.checkedValue,"onUpdate:modelValue":t[0]||(t[0]=g=>e.checkedValue=g)},{default:j(()=>[(D(!0),Y(ze,null,$e(e.filters,g=>(D(),ne(i,{key:g.value,value:g.value,label:g.text},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),ye("div",gc,[I(f,{size:"small",text:!0,onClick:e.onReset},{default:j(()=>[Ct(je(e.resetText),1)]),_:1},8,["onClick"]),I(f,{size:"small",type:"primary",disabled:!e.checkedValue.length,onClick:e.onConfirm},{default:j(()=>[Ct(je(e.confirmText),1)]),_:1},8,["disabled","onClick"])])],64)):(D(),Y("div",vc,[ye("div",{class:pe(["ele-table-filter-item",{"is-active":e.filteredValue==null}]),onClick:t[1]||(t[1]=g=>e.onItemClick())},je(e.clearFilterText),3),(D(!0),Y(ze,null,$e(e.filters,g=>(D(),Y("div",{key:g.value,class:pe(["ele-table-filter-item",{"is-active":e.filteredValue===g.value}]),onClick:m=>e.onItemClick(g.value)},je(g.text),11,yc))),128))]))]),default:j(()=>[I(a,null,{default:j(()=>[I(r)]),_:1})]),_:1},8,["placement","onBeforeShow"])])}const pc=mc(hc,[["render",Cc]]),bc=Re({name:"HeaderCell",components:{CellCheckbox:La,CellFilter:pc,CellRender:_t},props:{column:Object,columnIndex:Number,headerIndex:Number,colSize:Object,sortBy:Object,filterValue:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,click:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=H(()=>e.column?e.column.originalCol:void 0),o=H(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.headerIndex})),s=H(()=>{const d=["el-table-v2__header-cell","ele-table-td"];e.column&&(e.column.colspan?e.column.colspan>1&&d.push("is-multi-cell"):d.push("is-none"),e.column.rowspan?e.column.rowspan>1&&d.push("is-multi-row"):d.push("is-placeholder"));const y=n.value;if(y){const w=y.headerAlign||y.align;if(w&&d.push("is-align-"+w),(y.sortable===!0||y.sortable==="custom")&&d.push("is-sortable"),e.sortBy!=null&&xt(y)===e.sortBy.key){const b=$a(e.sortBy.order);b&&d.push("is-"+b)}if(y.filters&&y.filters.length&&e.filterValue&&e.filterValue.length&&d.push("is-filtered"),y.type==="selection"&&d.push("is-selection"),y.type==="expand"&&d.push("is-expand"),e.headerEllipsis&&d.push("is-ellipsis"),y.fixed==="right"?d.push("is-fixed-right"):(y.fixed==="left"||y.fixed===!0)&&d.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&d.push("is-fixed-left-last"),e.column.isFixedRightFirst&&d.push("is-fixed-right-first")),typeof e.headerCellClass=="function"){const b=e.headerCellClass(o.value);b&&d.push(b)}else e.headerCellClass&&d.push(e.headerCellClass);y.labelClassName&&d.push(y.labelClassName)}return d.join(" ")}),r=H(()=>{if(!(e.rowHeight==null||e.column==null||!e.column.rowspan||e.column.rowspan<=1))return e.column.rowspan*e.rowHeight+"px"}),a=H(()=>{if(!e.colSize)return;const{width:d,fixedLeft:y,fixedRight:w}=e.colSize,b=e.headerCellStyle,S=o.value;return[{width:d+"px",height:r.value,left:y,right:w},(typeof b=="function"?b(S):b)||{}]}),i=H(()=>n.value?n.value.label:void 0),u=H(()=>{const d=n.value;if(d){const y={column:d,$index:e.columnIndex};if(d.headerSlot){const w=l[d.headerSlot];if(typeof w=="function")return{render:w,params:[y]}}if(typeof d.renderHeader=="function")return{render:d.renderHeader,params:[y]}}return{}});return{originalCol:n,cellClass:s,cellStyle:a,cellTitle:i,renderOpt:u,onCheckedChange:d=>{t("checkedChange",d)},onFilterChange:d=>{t("filterChange",{column:n.value,value:d})},onClick:d=>{t("click",n.value,d)},onContextmenu:d=>{t("contextmenu",n.value,d)},onMouseenter:d=>{t("mouseenter",n.value,d)}}}}),wc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Sc={key:0,class:"ele-table-cell"},Tc=["title"],Rc={key:0,class:"ele-table-sorter"};function xc(e,t,l,n,o,s){const r=K("CellCheckbox"),a=K("CellRender"),i=K("CellFilter");return D(),Y("div",{class:pe(e.cellClass),style:at(e.cellStyle),onClick:t[0]||(t[0]=(...u)=>e.onClick&&e.onClick(...u)),onContextmenu:t[1]||(t[1]=(...u)=>e.onContextmenu&&e.onContextmenu(...u)),onMouseenter:t[2]||(t[2]=(...u)=>e.onMouseenter&&e.onMouseenter(...u))},[e.originalCol?(D(),Y("div",Sc,[ye("div",{class:"ele-cell-title",title:e.headerEllipsis?e.cellTitle:void 0},[e.originalCol.type==="selection"?(D(),ne(r,{key:0,checked:e.isCheckAll,indeterminate:e.isIndeterminate,disabled:e.disabledCheckbox,size:e.tableSize,onChange:e.onCheckedChange},null,8,["checked","indeterminate","disabled","size","onChange"])):(D(),ne(a,We(Oe({key:1},e.renderOpt)),{default:j(()=>[Ct(je(e.cellTitle),1)]),_:1},16))],8,Tc),e.originalCol.sortable?(D(),Y("div",Rc)):be("",!0),e.originalCol.filters&&e.originalCol.filters.length?(D(),ne(i,{key:1,filtered:e.filterValue,filterMultiple:e.originalCol.filterMultiple,filters:e.originalCol.filters,filterPlacement:e.originalCol.filterPlacement,onChange:e.onFilterChange},null,8,["filtered","filterMultiple","filters","filterPlacement","onChange"])):be("",!0)])):be("",!0)],38)}const Ec=wc(bc,[["render",xc]]),kc=Re({name:"HeaderRow",components:{HeaderCell:Ec},props:{headerCols:Array,headerColSizes:Array,headerIndex:Number,sortBy:Object,filtered:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,cellClick:(e,t)=>!0,cellContextmenu:(e,t)=>!0,cellMouseenter:(e,t)=>!0},setup(e,{emit:t}){return{getKey:(u,c)=>{var f;return e.headerIndex+"-"+((f=u.key)!=null?f:c)},getFiltered:u=>ac(u.originalCol,e.filtered),onCellCheckedChange:u=>{t("checkedChange",u)},onCellFilterChange:u=>{t("filterChange",u)},onCellClick:(u,c)=>{t("cellClick",u,c)},onCellContextmenu:(u,c)=>{t("cellContextmenu",u,c)},onCellMouseenter:(u,c)=>{t("cellMouseenter",u,c)}}}}),Oc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Hc(e,t,l,n,o,s){const r=K("HeaderCell");return D(!0),Y(ze,null,$e(e.headerCols,(a,i)=>(D(),ne(r,{key:e.getKey(a,i),column:a,columnIndex:i,headerIndex:e.headerIndex,colSize:e.headerColSizes?e.headerColSizes[i]:void 0,sortBy:e.sortBy,filterValue:e.getFiltered(a),isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:e.disabledCheckbox,tableSize:e.tableSize,headerCellClass:e.headerCellClass,headerCellStyle:e.headerCellStyle,headerEllipsis:e.headerEllipsis,rowHeight:e.rowHeight,onCheckedChange:e.onCellCheckedChange,onFilterChange:e.onCellFilterChange,onClick:e.onCellClick,onContextmenu:e.onCellContextmenu,onMouseenter:e.onCellMouseenter},it({_:2},[$e(Object.keys(e.$slots),u=>({name:u,fn:j(c=>[Ee(e.$slots,u,We(Je(c||{})))])}))]),1032,["column","columnIndex","headerIndex","colSize","sortBy","filterValue","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","headerEllipsis","rowHeight","onCheckedChange","onFilterChange","onClick","onContextmenu","onMouseenter"]))),128)}const Mc=Oc(kc,[["render",Hc]]),Fc=Re({name:"BodyCell",components:{ElIcon:ht,ArrowDown:Pr,LoadingDotOutlined:Kr,CellCheckbox:La,CellRender:_t},props:{column:{type:Object,required:!0},columnIndex:{type:Number,required:!0},rowIndex:{type:Number,required:!0},rowData:{type:Object,required:!0},colSizes:{type:Array,required:!0},bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,isChecked:Boolean,isDisabled:Boolean,tableSize:String,expandColumnKey:String,hasChildren:Boolean,rowIndent:String,isCollapse:Boolean,loading:Boolean,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{checkedChange:e=>!0,expandChange:e=>!0,click:(e,t)=>!0,dblclick:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0,mouseleave:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=H(()=>e.column.originalCol),o=H(()=>{var R;return(R=n.value.type)!=null?R:""}),s=H(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.rowIndex,row:e.rowData})),r=H(()=>{const R=Na(s.value,e.spanMethod);return["indedx","selection","expand"].includes(o.value)&&(R.rowspan=1),R}),a=H(()=>{if(o.value==="selection"||o.value==="expand")return!0;const R=n.value;return R&&R.showOverflowTooltip!=null?R.showOverflowTooltip!==!1:!!e.tableTooltipProps}),i=H(()=>{const R=["el-table-v2__row-cell","ele-table-td"];r.value.colspan?r.value.colspan>1&&R.push("is-multi-cell"):R.push("is-none"),r.value.rowspan?r.value.rowspan>1&&R.push("is-multi-row"):R.push("is-placeholder"),o.value==="index"&&R.push("is-index"),o.value==="selection"&&R.push("is-selection"),o.value==="expand"&&R.push("is-expand");const F=n.value;if(F){if(F.align&&R.push("is-align-"+F.align),a.value&&R.push("is-ellipsis"),F.fixed==="right"?R.push("is-fixed-right"):(F.fixed==="left"||F.fixed===!0)&&R.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&R.push("is-fixed-left-last"),e.column.isFixedRightFirst&&R.push("is-fixed-right-first")),typeof e.bodyCellClass=="function"){const P=e.bodyCellClass(s.value);P&&R.push(P)}else e.bodyCellClass&&R.push(e.bodyCellClass);F.className&&R.push(F.className)}return R.join(" ")}),u=H(()=>{const R=r.value.colspan;if(R===0)return"0px";let F=e.colSizes[e.columnIndex].width||0;if(R&&R>1){const P=e.columnIndex+R;for(let T=e.columnIndex;T<P;T++)e.colSizes[T]&&e.colSizes[T].width!=null&&(F+=e.colSizes[T].width)}return F+"px"}),c=H(()=>{if(e.fixedCellHeight&&e.rowHeight!=null)return e.rowHeight+"px";const R=r.value.rowspan;if(!(e.rowHeight==null||R==null||R<=1))return R*e.rowHeight+"px"}),f=H(()=>{if(!(!e.autoRowHeight||!e.rowHeight))return e.rowHeight+"px"}),h=H(()=>{if(!(!e.colSizes||e.columnIndex==null))return e.colSizes[e.columnIndex]}),g=H(()=>{const R=e.bodyCellStyle,F=s.value;return[{width:u.value,height:c.value,minHeight:f.value,left:h.value?h.value.fixedLeft:void 0,right:h.value?h.value.fixedRight:void 0},(typeof R=="function"?R(F):R)||{}]}),m=H(()=>{const R=n.value;if(R&&R.type==="index")return typeof R.index=="function"?void 0:Ia(e.rowIndex,R.index,e.pageIndex);const F=e.column?e.column.dataKey:void 0,{rowspan:P,colspan:T}=r.value;if(!(P===0||T===0||F==null||!e.rowData))return Le(e.rowData,F)}),d=H(()=>e.column!=null&&e.expandColumnKey!=null&&e.expandColumnKey===e.column.key),y=H(()=>{const R=n.value,{rowspan:F,colspan:P}=r.value;if(R&&F!==0&&P!==0){const{rowIndex:T,rowData:$}=e;if(R.type==="index")return typeof R.index=="function"?{render:R.index,params:[T]}:{};if(R.slot&&typeof l[R.slot]=="function")return{render:l[R.slot],params:[{row:$,column:R,$index:T}]};if(typeof R.formatter=="function")return{render:R.formatter,params:[$,R,m.value,T]}}return{}});return{colType:o,cellClass:i,cellStyle:g,cellText:m,isExpandCol:d,renderOpt:y,onTextClick:R=>{o.value==="selection"&&R.stopPropagation()},onCheckedChange:R=>{t("checkedChange",R)},onExpandChange:()=>{e.loading||t("expandChange",e.isCollapse)},onClick:R=>{t("click",n.value,R)},onDblclick:R=>{t("dblclick",n.value,R)},onContextmenu:R=>{t("contextmenu",n.value,R)},onMouseenter:R=>{t("mouseenter",n.value,R)},onMouseleave:R=>{t("mouseleave",n.value,R)}}}}),$c=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Ic={key:2,class:"ele-table-placeholder"};function Nc(e,t,l,n,o,s){const r=K("LoadingDotOutlined"),a=K("ArrowDown"),i=K("ElIcon"),u=K("CellCheckbox"),c=K("CellRender");return D(),Y("div",{class:pe(e.cellClass),style:at(e.cellStyle),onClick:t[2]||(t[2]=(...f)=>e.onClick&&e.onClick(...f)),onDblclick:t[3]||(t[3]=(...f)=>e.onDblclick&&e.onDblclick(...f)),onContextmenu:t[4]||(t[4]=(...f)=>e.onContextmenu&&e.onContextmenu(...f)),onMouseenter:t[5]||(t[5]=(...f)=>e.onMouseenter&&e.onMouseenter(...f)),onMouseleave:t[6]||(t[6]=(...f)=>e.onMouseleave&&e.onMouseleave(...f))},[ye("div",{class:"ele-table-cell",onClick:t[1]||(t[1]=(...f)=>e.onTextClick&&e.onTextClick(...f))},[e.isExpandCol?(D(),Y(ze,{key:0},[e.rowIndent?(D(),Y("div",{key:0,class:"ele-table-indent",style:at({width:e.rowIndent})},null,4)):be("",!0),e.hasChildren?(D(),Y("div",{key:1,class:pe(["ele-table-expand",{"is-collapse":e.isCollapse}]),onClick:t[0]||(t[0]=Fl((...f)=>e.onExpandChange&&e.onExpandChange(...f),["stop"]))},[I(i,{class:pe({"is-loading":e.loading})},{default:j(()=>[e.loading?(D(),ne(r,{key:0})):(D(),ne(a,{key:1}))]),_:1},8,["class"])],2)):(D(),Y("div",Ic))],64)):be("",!0),e.colType==="selection"?(D(),ne(u,{key:1,checked:e.isChecked,disabled:e.isDisabled,size:e.tableSize,onChange:e.onCheckedChange},null,8,["checked","disabled","size","onChange"])):e.colType!=="expand"?(D(),ne(c,We(Oe({key:2},e.renderOpt)),{default:j(()=>[Ct(je(e.cellText),1)]),_:1},16)):be("",!0)])],38)}const Ac=$c(Fc,[["render",Nc]]),Dc=Re({name:"BodyRow",components:{BodyCell:Ac},props:{bodyCols:{type:Array,required:!0},colSizes:{type:Array,required:!0},rowIndex:{type:Number,required:!0},rowItem:{type:Object,required:!0},rowId:[String,Number],checkedRowKeys:Set,bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,tableSize:String,expandColumnKey:String,expandedRowKeys:Array,lazy:Boolean,load:Function,level:Number,indent:Number,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{cellCheckedChange:(e,t)=>!0,cellExpandChange:(e,t,l)=>!0,cellClick:(e,t,l)=>!0,cellDblclick:(e,t,l)=>!0,cellContextmenu:(e,t,l)=>!0,cellMouseenter:(e,t,l)=>!0,cellMouseleave:(e,t,l)=>!0},setup(e,{emit:t}){const l=O(!1),n=H(()=>!e.checkedRowKeys||e.rowId==null?!1:e.checkedRowKeys.has(e.rowId)),o=H(()=>{if(e.rowItem){if(e.rowItem.children)return!!e.rowItem.children.length;if(e.lazy&&e.rowItem.hasChildren)return!0}return!1}),s=H(()=>{if(!(!e.level||!e.indent))return e.level*e.indent+"px"}),r=H(()=>!e.expandedRowKeys||e.rowId==null?!0:!e.expandedRowKeys.includes(e.rowId));return{loading:l,isChecked:n,hasChildren:o,rowIndent:s,isCollapse:r,onCellCheckedChange:m=>{t("cellCheckedChange",e.rowItem,m)},onCellExpandChange:m=>{if(m&&e.lazy&&!e.rowItem.children){e.load&&(l.value=!0,e.load(e.rowItem.rowData,null,d=>{l.value=!1,t("cellExpandChange",e.rowItem,m,d)}));return}t("cellExpandChange",e.rowItem,m)},onCellClick:(m,d)=>{t("cellClick",e.rowItem,m,d)},onCellDblclick:(m,d)=>{t("cellDblclick",e.rowItem,m,d)},onCellContextmenu:(m,d)=>{t("cellContextmenu",e.rowItem,m,d)},onCellMouseenter:(m,d)=>{t("cellMouseenter",e.rowItem,m,d)},onCellMouseleave:(m,d)=>{t("cellMouseleave",e.rowItem,m,d)}}}}),Lc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Pc(e,t,l,n,o,s){const r=K("BodyCell");return D(!0),Y(ze,null,$e(e.bodyCols,(a,i)=>{var u,c;return D(),ne(r,{key:((u=e.rowId)!=null?u:e.rowIndex)+"-"+((c=a.key)!=null?c:i),column:a,columnIndex:i,rowIndex:e.rowIndex,rowData:e.rowItem.rowData,colSizes:e.colSizes,bodyCellClass:e.bodyCellClass,bodyCellStyle:e.bodyCellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.tableTooltipProps,pageIndex:e.pageIndex,rowHeight:e.rowHeight,isChecked:e.isChecked,isDisabled:e.rowItem.isDisabled,tableSize:e.tableSize,expandColumnKey:e.expandColumnKey,hasChildren:e.hasChildren,rowIndent:e.rowIndent,isCollapse:e.isCollapse,loading:e.loading,fixedCellHeight:e.fixedCellHeight,autoRowHeight:e.autoRowHeight,onCheckedChange:e.onCellCheckedChange,onExpandChange:e.onCellExpandChange,onClick:e.onCellClick,onDblclick:e.onCellDblclick,onContextmenu:e.onCellContextmenu,onMouseenter:e.onCellMouseenter,onMouseleave:e.onCellMouseleave},it({_:2},[$e(Object.keys(e.$slots),f=>({name:f,fn:j(h=>[Ee(e.$slots,f,We(Je(h||{})))])}))]),1032,["column","columnIndex","rowIndex","rowData","colSizes","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","isChecked","isDisabled","tableSize","expandColumnKey","hasChildren","rowIndent","isCollapse","loading","fixedCellHeight","autoRowHeight","onCheckedChange","onExpandChange","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave"])}),128)}const Kc=Lc(Dc,[["render",Pc]]),zc=Re({name:"ExpandRow",props:{column:Object,rowIndex:Number,rowData:Object}}),Wc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Vc={class:"el-table-v2__row-cell ele-table-td"};function Bc(e,t,l,n,o,s){return D(),Y("div",Vc,[e.column&&e.column.slot?Ee(e.$slots,e.column.slot,We(Oe({key:0},{row:e.rowData,column:e.column,$index:e.rowIndex}))):be("",!0)])}const jc=Wc(zc,[["render",Bc]]),_c=Re({name:"FooterRow",components:{CellRender:_t},props:{bodyCols:{type:Array,required:!0},tableData:{type:Array,required:!0},colSizes:{type:Array,required:!0},sumWidth:Number,rowHeight:Number,sumText:String,summaryMethod:Function},emits:{mouseenter:e=>!0},setup(e,{emit:t}){const l=H(()=>e.tableData.map(r=>r.rowData)),n=H(()=>Aa(e.summaryMethod,e.bodyCols,l.value));return{sumCols:H(()=>{const r=n.value;return e.bodyCols.map((a,i)=>{const u=e.colSizes[i],c=Da(l.value,a.dataKey),f=a.originalCol;return{key:i+"-"+a.key,width:u&&u.width||0,fixedLeft:u?u.fixedLeft:void 0,fixedRight:u?u.fixedRight:void 0,text:r==null?i===0?e.sumText:c:r[i],align:f?f.align:void 0,fixed:f?f.fixed:void 0,isFixedLeftLast:a.isFixedLeftLast,isFixedRightFirst:a.isFixedRightFirst}})}),onMouseenter:r=>{t("mouseenter",r)}}}}),Uc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},qc={class:"ele-table-cell"};function Gc(e,t,l,n,o,s){const r=K("CellRender");return D(),Y("div",{class:"ele-table-foot-tr",style:at({width:(e.sumWidth||0)+"px",height:(e.rowHeight||0)+"px"})},[(D(!0),Y(ze,null,$e(e.sumCols,a=>(D(),Y("div",{key:a.key,class:pe(["ele-table-td","is-ellipsis",{"is-align-left":a.align==="left"},{"is-align-center":a.align==="center"},{"is-align-right":a.align==="right"},{"is-fixed-left":a.fixed==="left"||a.fixed===!0},{"is-fixed-right":a.fixed==="right"},{"is-fixed-left-last":a.isFixedLeftLast},{"is-fixed-right-first":a.isFixedRightFirst}]),style:at({width:a.width+"px",left:a.fixedLeft,right:a.fixedRight}),onMouseenter:t[0]||(t[0]=(...i)=>e.onMouseenter&&e.onMouseenter(...i))},[ye("div",qc,[I(r,{render:()=>a.text,params:[]},null,8,["render"])])],38))),128))],4)}const Yc=Uc(_c,[["render",Gc]]),Xc={...$l,rowHeight:Number},Jc={...On},Qc=Re({name:"EleVirtualTable",components:{ElTableV2:Iu,ElEmpty:vn,EleTooltip:Ml,HeaderRow:Mc,BodyRow:Kc,ExpandRow:jc,FooterRow:Yc},props:Xc,emits:Jc,setup(e,{emit:t}){var An;const{t:l}=Ol(),n=kn(t),{wrapWidth:o,wrapHeight:s,updateWrapSize:r}=uc(()=>i.value),a={checked:new Map,reserveChecked:!1,scrollTop:0},i=O(null),u=O(null),c=O(0),f=O([]),h=O([]),g=O([]),m=O([]),d=O(0),y=O(0),w=O(0),b=O([]),S=O([]),v=O(0),C=O((An=e.currentRowKey)!=null?An:null),p=O(new Set(e.selectedRowKeys||[])),x=O(!1),M=O([]),R=O(nc(e.defaultSort)),F=ol(oc(e.columns)),P=ol({placement:"top",trigger:"click",offset:0,hideAfter:0,content:"",virtualRef:void 0,virtualTriggering:!0,disabled:!0,visible:!1,teleported:!1,transition:"ele-transition-none"}),T=H(()=>rc(e.treeProps)),$=H(()=>T.value.childrenName),W=H(()=>T.value.hasChildrenName),oe=H(()=>b.value.some(k=>{var N;return((N=k.children)==null?void 0:N.length)||e.lazy&&k.hasChildren})),J=H(()=>h.value.find(k=>!!(k&&k.originalCol&&k.originalCol.type==="expand"))),he=H(()=>!!J.value),Se=H(()=>{if(J.value)return J.value.key;if(!oe.value)return;const k=h.value.find(N=>{if(!N||!N.key||!N.originalCol)return!1;const z=N.originalCol.type;return!z||!["selection","index"].includes(z)});return k?k.key:void 0}),L=H(()=>Gu(e.size,e.rowHeight)),V=H(()=>ec(he.value,h.value,e.showOverflowTooltip)),Z=H(()=>e.showHeader?f.value.length:0),ee=H(()=>!!(e.showSummary&&b.value.length)),Ce=H(()=>{const k=L.value,N=new Array(Z.value).fill(k);return{cache:2,estimatedRowHeight:V.value?k:void 0,headerClass:q=>{const X=e.headerRowClassName,fe=["ele-table-head-tr"];if(typeof X=="function"){const Be=X({rowIndex:q.headerIndex});Be&&fe.push(Be)}else typeof X=="string"&&X&&fe.push(X);return fe.join(" ")},headerProps:q=>{const X={rowIndex:q.headerIndex},fe=e.headerRowStyle;return{style:typeof fe=="function"?fe(X):fe}},headerHeight:Z.value?N:0,footerHeight:ee.value?k:void 0,rowClass:q=>{const X=["ele-table-tr"],fe=q.rowData,Be=fe.rowIndex;if(fe&&fe.isExpandRow===!0)X.push("is-expand-row");else if(fe){e.stripe&&(Be+1)%2===0&&X.push("is-even"),e.highlightCurrentRow&&C.value!=null&&C.value===fe.rowId&&X.push("is-current");const st=e.rowClassName;if(typeof st=="function"){const Xe=st({row:fe.rowData,rowIndex:Be});Xe&&X.push(Xe)}else typeof st=="string"&&st&&X.push(st)}return X.join(" ")},rowKey:"rowId",rowProps:q=>{const X=q.rowData,fe={row:X.rowData,rowIndex:X.rowIndex},Be=e.rowStyle;return{style:typeof Be=="function"?Be(fe):Be}},rowHeight:V.value?void 0:k,columns:S.value,data:b.value,expandColumnKey:Se.value,expandedRowKeys:M.value,defaultExpandedRowKeys:M.value,fixed:!0,width:y.value,height:w.value,hScrollbarSize:0,vScrollbarSize:0,scrollbarAlwaysOn:e.scrollbarAlwaysOn,sortBy:R.value}}),ae=H(()=>!!(p.value.size&&!x.value)),Te=H(()=>v.value>1),xe=H(()=>{const k=d.value-y.value-1;return k>1&&v.value<k}),Me=H(()=>{var k;return(k=e.sumText)!=null?k:l("el.table.sumText")}),Fe=H(()=>e.errorText||e.emptyText||l("el.table.emptyText")),Ne=H(()=>ka(e.emptyProps,Fe.value)),Pe=(k,N)=>{const z=k.innerText,q=xa(N?N.showOverflowTooltip:void 0,Ra(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions));if(z&&q&&ic(k)){P.content=z;const X=["virtualRef","virtualTriggering","disabled","visible","teleported"];Object.keys(q).forEach(fe=>{const Be=q[fe];!X.includes(fe)&&P[fe]!==Be&&(P[fe]=Be)}),P.virtualRef=k,P.disabled=!1,P.visible=!0}else Ge()},Ge=()=>{P.visible=!1,P.disabled=!0},mt=k=>{const N=xt(k.column);N&&(F[N]=k.value,n.onFilterChange(F))},ut=(k,N)=>{le(k.rowData,k.rowId,N);const z=ke();n.onSelect(z,k.rowData),n.onSelectionChange(z)},Ve=(k,N,z)=>{if(N&&z!=null){const q=mo(z,he.value,$.value,W.value,e.rowKey,go(h.value));let X=-1;if(He(b.value,fe=>{X++,fe.rowId===k.rowId&&(fe.children=q,q.length||(fe.hasChildren=!1)),fe.rowIndex=X}),!q.length)return}lt(k,N)},A=(k,N,z)=>{const q=z.currentTarget,X=k.rowData,fe=k.rowId;n.onCellClick(X,N,q,z),e.highlightCurrentRow&&Et(X),e.rowClickChecked&&!k.isDisabled&&(e.rowClickChecked==="smart"&&(!p.value.size||p.value.size===1)?fe!=null&&!p.value.has(fe)&&(p.value=new Set([fe]),a.checked.clear(),a.checked.set(fe,X),U(),Tt([fe]),n.onSelectionChange([X])):(le(X,fe),n.onSelectionChange(ke()))),n.onRowClick(X,N,z)},te=(k,N,z)=>{const q=z.currentTarget;n.onCellDblclick(k.rowData,N,q,z),n.onRowDblclick(k.rowData,N,z)},B=(k,N,z)=>{const q=z.currentTarget;n.onCellContextmenu(k.rowData,N,q,z),n.onRowContextmenu(k.rowData,N,z)},_=(k,N,z)=>{const q=z.currentTarget;Pe(q,N),n.onCellMouseEnter(k.rowData,N,q,z)},G=(k,N,z)=>{const q=z.currentTarget;n.onCellMouseLeave(k.rowData,N,q,z)},se=(k,N)=>{k&&(k.sortable===!0||k.sortable==="custom")&&(R.value=tc(R.value,k),n.onSortChange({prop:k.property||k.prop,order:$a(R.value?R.value.order:void 0),column:k})),n.onHeaderClick(k,N)},Q=(k,N)=>{n.onHeaderContextmenu(k,N)},ie=()=>{Ge()},ce=k=>{Pe(k.currentTarget,{showOverflowTooltip:!0})},ve=()=>{Ge()},Ie=()=>{Ge()},Ae=k=>{a.scrollTop=k.scrollTop;const N=k.scrollLeft;if(v.value!==N&&(v.value=N),ee.value&&u.value&&u.value.$el){const z=u.value.$el.children;if(z)for(let q=0;q<z.length;q++){const X=z[q];if(X.classList.contains("el-table-v2__footer")){X.scrollLeft!=N&&(X.scrollLeft=N);break}}}},Ye=()=>{b.value=mo(e.data,he.value,$.value,W.value,e.rowKey,go(h.value)),e.defaultExpandAll?ge(!0):e.expandRowKeys&&e.expandRowKeys.length?M.value=[...e.expandRowKeys]:ge(!1)},De=(k,N)=>{if(!El(C.value,k)){k!=null&&N!=null&&a.row!==N&&(a.row=N,n.onCurrentChange(N,a.oldRow));return}if(k!=null){const z=Yt(k,b.value);if(z!=null||e.reserveCurrent){a.oldRow=a.row,a.row=(z==null?void 0:z.rowData)||N||void 0,a.row==null&&e.cacheData!=null&&(a.row=Yt(k,e.cacheData,e.rowKey,$.value)),C.value=k,Nn(k),n.onCurrentChange(a.row,a.oldRow);return}}C.value!=null&&(a.oldRow=a.row,a.row=void 0,C.value=null,Nn(),n.onCurrentChange(void 0,a.oldRow))},_e=()=>{const k=C.value;if(k!=null){const N=Yt(k,b.value);if(N!=null)De(k,N.rowData);else if(!e.reserveCurrent)De(null);else if(e.cacheData!=null){const z=Yt(k,e.cacheData,e.rowKey,$.value);z!=null&&De(k,z)}}if(p.value.size){const N=ke(),z=[],[q,X]=hl(b.value),[fe,Be]=hl(e.cacheData,e.rowKey,$.value);p.value.forEach(Xe=>{const qt=q.indexOf(Xe);if(qt!==-1){const Lt=X[qt].rowData;a.checked.get(Xe)!==Lt&&a.checked.set(Xe,Lt)}else if(!a.reserveChecked)z.push(Xe);else if(e.cacheData!=null){const Lt=fe.indexOf(Xe),Dn=Lt!==-1?Be[Lt]:void 0;Lt!==-1&&a.checked.get(Xe)!==Dn&&a.checked.set(Xe,Dn)}}),z.forEach(Xe=>{p.value.delete(Xe),a.checked.delete(Xe)}),U(),z.length&&Tt(Array.from(p.value));const st=ke();dt(N,st)&&n.onSelectionChange(st)}},U=()=>{if(!b.value.length||!p.value.size){x.value=!1;return}const k=nl(b.value,N=>!N.isExpandRow&&!N.isDisabled&&N.rowId!=null&&!p.value.has(N.rowId));x.value=k==null},le=(k,N,z)=>{const q=p.value.has(N),X=z==null?!q:z;X!==q&&(X?(p.value.add(N),a.checked.set(N,k)):(p.value.delete(N),a.checked.delete(N)),U(),Tt(Array.from(p.value)))},me=k=>{if(!(!k||!dt(ke(),k))){if(a.reserveChecked){const N=ke();p.value.clear(),a.checked.clear(),k.forEach(q=>{const X=Le(q,e.rowKey);X!=null&&(p.value.add(X),a.checked.set(X,q))}),U(),Tt(Array.from(p.value));const z=ke();dt(N,z)&&n.onSelectionChange(z);return}ue(It(k,e.rowKey))}},ue=k=>{if(!k||!dt(Array.from(p.value),k))return;const N=ke();if(a.reserveChecked){const[q,X]=hl(b.value),[fe,Be]=hl(e.cacheData,e.rowKey,$.value);p.value=new Set(k),a.checked.clear(),k.forEach(st=>{const Xe=q.indexOf(st);if(Xe!==-1)a.checked.set(st,X[Xe].rowData);else if(e.cacheData!=null){const qt=fe.indexOf(st);qt!==-1&&a.checked.set(st,Be[qt])}})}else p.value.clear(),a.checked.clear(),k.length&&He(b.value,q=>{!q.isExpandRow&&q.rowId!=null&&k.includes(q.rowId)&&(p.value.add(q.rowId),a.checked.set(q.rowId,q.rowData))});U(),Tt(Array.from(p.value));const z=ke();dt(N,z)&&n.onSelectionChange(z)},ge=k=>{if(!k){M.value.length&&(M.value=[],n.onExpandChange(void 0,[]));return}const N=[],z=[];He(b.value,q=>{q.children&&q.children.length&&q.rowId!=null&&(N.push(q.rowId),z.push(q.rowData))}),M.value=N,n.onExpandChange(void 0,z)},Ke=()=>{if(p.value.size){const k=!!a.checked.size;p.value.clear(),a.checked.clear(),x.value=!1,Tt([]),k&&n.onSelectionChange([])}},ke=()=>Array.from(a.checked.values()),yt=(k,N)=>{const z=Le(k,e.rowKey);if(z==null||!a.reserveChecked&&!Yt(z,b.value))return;const q=ke();le(k,z,N);const X=ke();dt(q,X)&&n.onSelectionChange(X)},tt=()=>{if(!b.value.length)return;if(x.value||ae.value&&!e.selectOnIndeterminate){if(p.value.size)if(a.reserveChecked){He(b.value,z=>{!z.isExpandRow&&z.rowId!=null&&(p.value.delete(z.rowId),a.checked.delete(z.rowId))}),x.value=!1,Tt(Array.from(p.value));const N=ke();n.onSelectionChange(N),n.onSelectAll(N)}else Ke(),n.onSelectAll([]);return}He(b.value,N=>{!N.isExpandRow&&!N.isDisabled&&N.rowId!=null&&(p.value.add(N.rowId),a.checked.set(N.rowId,N.rowData))}),x.value=!0,Tt(Array.from(p.value));const k=ke();n.onSelectionChange(k),n.onSelectAll(k)},lt=(k,N)=>{const z=k.rowId,q=M.value.includes(z),X=N==null?!q:N;if(X!==q){if(X)M.value.push(z);else{const fe=M.value.findIndex(Be=>Be===z);M.value.splice(fe,1)}n.onExpandChange(k.rowData,X)}},Et=k=>{De(Le(k,e.rowKey),k)},Ut=k=>{De(k)},bt=()=>a.row,et=()=>{R.value!=null&&(R.value=void 0)},wt=k=>{(k==null?Object.keys(F):k).forEach(z=>{const q=F[z];(q==null||q.length)&&(F[z]=[])})},Nl=k=>{const{width:N,sumWidth:z,rowSizes:q,colSizes:X}=Ju(h.value,f.value,o.value);if(!N)return;const fe=d.value&&d.value!==z,Be=Qu(m.value,X);y.value=N,d.value=z,g.value=q,(k||Be)&&(m.value=X,S.value=Zu(h.value,m.value)),fe&&c.value++},qa=(k,N)=>{const z=sc(e.columns,void 0,k);R.value={key:xt(z),order:lc(N)},n.onSortChange({prop:k,order:N,column:z})},$n=(k,N)=>{if(!u.value)return;const z=typeof k=="number",q=z?k:k.top,X=z?N:k.left;u.value.scrollTo({scrollTop:q,scrollLeft:X})},Ga=k=>{u.value&&u.value.scrollToTop(k)},In=k=>{u.value&&u.value.scrollToLeft(k)},Ya=(k,N)=>{u.value&&u.value.scrollToRow(k,N)},Nn=k=>{El(e.currentRowKey,k)&&n["onUpdate:currentRowKey"](k)},Tt=k=>{const N=e.selectedRowKeys||[];dt(N,k)&&n["onUpdate:selectedRowKeys"](k)};return $o(()=>{const k=a.scrollTop,N=v.value;(k||N)&&$n(k?k-1:0,N?N-1:0)}),Io(()=>{Ge()}),de([()=>e.height,()=>e.maxHeight,L,Z,ee,s],()=>{const k=Z.value+(ee.value?2:1),N=Yu(e.height,e.maxHeight,k*L.value,s.value);N!==w.value&&(w.value=N)},{immediate:!0}),de(()=>e.columns,k=>{a.reserveChecked=an(k);const{cols:N,rows:z}=Fa(k);h.value=N,f.value=z,Nl(!0)},{deep:!0,immediate:!0}),de(o,()=>{Nl()}),de([()=>e.data,he,$],()=>{Ye()},{immediate:!0}),de(()=>e.rowKey,()=>{Et(),Ke(),ge(!1),Ye()}),de([b,()=>e.cacheData],()=>{_e()}),de(()=>e.currentRowKey,k=>{De(k)}),de(()=>e.selectedRowKeys,k=>{ue(k||[])},{deep:!0}),de(()=>e.expandRowKeys,k=>{k!=null&&(M.value=[...k])},{deep:!0}),de(()=>e.showHeader,k=>{k&&Qe(()=>{const N=v.value;N&&In(N-1)})}),{rootRef:i,tableRef:u,tableKey:c,wrapWidth:o,headerRows:f,bodyCols:h,headerRowSizes:g,bodyColSizes:m,colsSumWidth:d,tableWidth:y,tableData:b,isCheckAll:x,isIndeterminate:ae,checkedRowKeys:p,expandedRowKeys:M,sortBy:R,filtered:F,tableTooltipProps:P,tableExpandCol:J,hasExpandCol:he,tableExpandColumnKey:Se,tableRowHeight:L,autoRowHeight:V,hasFooter:ee,tableProps:Ce,isPingLeft:Te,isPingRight:xe,tableSumText:Me,tableEmptyText:Fe,tableEmptyProps:Ne,onTableFilterChange:mt,onCellCheckedChange:ut,onCellExpandChange:Ve,onCellClick:A,onCellDblclick:te,onCellContextmenu:B,onCellMouseenter:_,onCellMouseleave:G,onHeaderCellClick:se,onHeaderCellContextmenu:Q,onHeaderCellMouseenter:ie,onFooterCellMouseenter:ce,onExpandCellMouseenter:ve,onTableMouseleave:Ie,onTableScroll:Ae,updateWrapSize:r,updateTableData:Ye,updateSelectedAndChecked:_e,setSelectedRows:me,setSelectedRowKeys:ue,toggleRowExpansionAll:ge,clearSelection:Ke,getSelectionRows:ke,toggleRowSelection:yt,toggleAllSelection:tt,toggleRowExpansion:lt,setCurrentRow:Et,setCurrentRowKey:Ut,getCurrentRow:bt,clearSort:et,clearFilter:wt,doLayout:Nl,sort:qa,scrollTo:$n,setScrollTop:Ga,setScrollLeft:In,scrollToRow:Ya,hideTooltip:Ge}}}),Zc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},ed={key:0,class:"ele-table-empty-text"};function td(e,t,l,n,o,s){const r=K("HeaderRow"),a=K("ExpandRow"),i=K("BodyRow"),u=K("FooterRow"),c=K("ElEmpty"),f=K("ElTableV2"),h=K("EleTooltip");return D(),Y("div",{ref:"rootRef",class:pe(["ele-virtual-table",{"is-border":e.border||e.headerRows.length>1},{"is-stripe":e.stripe},{"is-sticky":e.sticky},{"has-footer":e.hasFooter},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine},{"is-ping-left":e.isPingLeft},{"is-ping-right":e.isPingRight},{"is-auto-width":e.wrapWidth===e.tableWidth},{"is-small":e.size==="small"},{"is-large":e.size==="large"}]),onMouseleave:t[1]||(t[1]=(...g)=>e.onTableMouseleave&&e.onTableMouseleave(...g))},[e.tableProps.width?(D(),ne(f,Oe({key:0},e.tableProps,{key:e.tableKey,ref:"tableRef",onScroll:e.onTableScroll}),it({header:j(g=>[g&&e.headerRows[g.headerIndex]?(D(),ne(r,{key:0,headerCols:e.headerRows[g.headerIndex],headerColSizes:e.headerRowSizes[g.headerIndex],headerIndex:g.headerIndex,sortBy:e.sortBy,filtered:e.filtered,isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:!e.tableData.length,tableSize:e.size,headerCellClass:e.headerCellClassName,headerCellStyle:e.headerCellStyle,headerEllipsis:!0,rowHeight:e.tableRowHeight,onCheckedChange:t[0]||(t[0]=m=>e.toggleAllSelection()),onFilterChange:e.onTableFilterChange,onCellClick:e.onHeaderCellClick,onCellContextmenu:e.onHeaderCellContextmenu,onCellMouseenter:e.onHeaderCellMouseenter},it({_:2},[$e(Object.keys(e.$slots).filter(m=>!["default","empty","append"].includes(m)),m=>({name:m,fn:j(d=>[Ee(e.$slots,m,We(Je(d||{})))])}))]),1032,["headerCols","headerColSizes","headerIndex","sortBy","filtered","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","rowHeight","onFilterChange","onCellClick","onCellContextmenu","onCellMouseenter"])):be("",!0)]),row:j(g=>{var m;return[g&&g.rowData&&g.rowData.isExpandRow?(D(),ne(a,{key:0,column:(m=e.tableExpandCol)==null?void 0:m.originalCol,rowIndex:g.rowData.rowIndex,rowData:g.rowData.rowData,onMouseenter:e.onExpandCellMouseenter},it({_:2},[$e(Object.keys(e.$slots).filter(d=>!["default","empty","append"].includes(d)),d=>({name:d,fn:j(y=>[Ee(e.$slots,d,We(Je(y||{})))])}))]),1032,["column","rowIndex","rowData","onMouseenter"])):g&&g.rowData&&g.rowData.rowData?(D(),ne(i,{key:1,bodyCols:e.bodyCols,colSizes:e.bodyColSizes,rowIndex:g.rowData.rowIndex,rowItem:g.rowData,rowId:g.rowData.rowId,checkedRowKeys:e.checkedRowKeys,bodyCellClass:e.cellClassName,bodyCellStyle:e.cellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.showOverflowTooltip,pageIndex:e.pageIndex,rowHeight:e.tableRowHeight,tableSize:e.size,expandColumnKey:e.tableExpandColumnKey,expandedRowKeys:e.expandedRowKeys,lazy:e.lazy,load:e.load,level:g.depth,indent:e.indent,fixedCellHeight:e.hasExpandCol,autoRowHeight:e.autoRowHeight,onCellCheckedChange:e.onCellCheckedChange,onCellExpandChange:e.onCellExpandChange,onCellClick:e.onCellClick,onCellDblclick:e.onCellDblclick,onCellContextmenu:e.onCellContextmenu,onCellMouseenter:e.onCellMouseenter,onCellMouseleave:e.onCellMouseleave},it({_:2},[$e(Object.keys(e.$slots).filter(d=>!["default","empty","append"].includes(d)),d=>({name:d,fn:j(y=>[Ee(e.$slots,d,We(Je(y||{})))])}))]),1032,["bodyCols","colSizes","rowIndex","rowItem","rowId","checkedRowKeys","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","tableSize","expandColumnKey","expandedRowKeys","lazy","load","level","indent","fixedCellHeight","autoRowHeight","onCellCheckedChange","onCellExpandChange","onCellClick","onCellDblclick","onCellContextmenu","onCellMouseenter","onCellMouseleave"])):be("",!0)]}),empty:j(()=>[Ee(e.$slots,"empty",{text:e.emptyText,error:e.errorText},()=>[e.emptyProps===!1?(D(),Y("div",ed,je(e.tableEmptyText),1)):(D(),ne(c,We(Oe({key:1},e.tableEmptyProps)),null,16))])]),_:2},[e.hasFooter?{name:"footer",fn:j(()=>[I(u,{bodyCols:e.bodyCols,colSizes:e.bodyColSizes,sumWidth:e.colsSumWidth,tableData:e.tableData,rowHeight:e.tableRowHeight,sumText:e.tableSumText,summaryMethod:e.summaryMethod,onMouseenter:e.onFooterCellMouseenter},null,8,["bodyCols","colSizes","sumWidth","tableData","rowHeight","sumText","summaryMethod","onMouseenter"])]),key:"0"}:void 0]),1040,["onScroll"])):be("",!0),I(h,We(Je(e.tableTooltipProps)),null,16)],34)}const ld=Zc(Qc,[["render",td]]);function Hn(e,t){return e==null?t!=null?t:!0:e?!t||typeof t!="object"?e:typeof e!="object"?t:{...t,...e}:!1}function nd(e,t){var n;const l=Mn(void 0,e,t);return(n=l==null?void 0:l.currentPage)!=null?n:1}function od(e,t){var n;const l=Mn(void 0,e,t);return(n=l==null?void 0:l.pageSize)!=null?n:10}function Mn(e,t,l,n){const o=Hn(t,l);if(o==null||o===!1)return null;const s={small:e!=="large",pagerCount:5,layout:"total, prev, pager, next, sizes, jumper",pageSizes:[10,20,30,40,50,100],hideOnSinglePage:!1};return typeof o!="object"?Object.assign(s,n):Object.assign(s,jt(o,["autoAmend"]),n)}function ad(e,t){const l=Hn(e,t);return l?typeof l=="object"?!!l.autoAmend:l===!0:!1}function Ll(e,t,l){var n,o,s;return(s=(o=(n=dd(e))!=null?n:t)!=null?o:l)!=null?s:"default"}function rd(e){const t={};return He(e,l=>{typeof l.columnKey=="string"&&l.columnKey.length&&l.filteredValue&&(t[l.columnKey]=l.filteredValue)}),t}function Pa(e,t){return Object.assign({pageName:"page",limitName:"limit",sortName:"sort",orderName:"order",ascValue:"asc",descValue:"desc"},e,t)}function Ka(e,t){return Object.assign({dataName:"list",countName:"count"},e,t)}function za(e){var t,l;const n=[];if(!e||!e.order)return n;const o=e.order==="descending",s=(t=e.column)==null?void 0:t.sortMethod,r=(l=e.column)==null?void 0:l.sortBy;if(Array.isArray(r)&&r.length)r.forEach(a=>{typeof a=="string"&&a.length&&n.push({field:a,descend:o,sortMethod:s})});else{const a=typeof r=="string"&&r?r:e.prop;a&&n.push({field:a,descend:o,sortMethod:s})}return n}function vo(e,t,l){const n={},{sortName:o,orderName:s,ascValue:r,descValue:a}=Pa(l,t);if(!o||!s)return n;const i=za(e);return i.length===1?(n[o]=i[0].field,n[s]=i[0].descend?a:r):i.length&&(n[o]=i.map(u=>[u.field,u.descend?a:r].join(" ")).join(",")),n}function yo(e){const t={};return e&&Object.keys(e).forEach(l=>{const n=e[l];n!=null&&(typeof n=="string"?n&&(t[l]=n):Array.isArray(n)?n.length&&(t[l]=n.join(",")):t[l]=n)}),t}function Co(e,t,l,n){const o={},{pageName:s,limitName:r}=Pa(n,l);return!s||!r||(o[s]=e,o[r]=t),o}function sd(e,t,l,n,o){var a;if(!e||Array.isArray(e))return{data:po(e,n,o)};const{dataName:s,countName:r}=Ka(l,t);return s?{data:po(Le(e,s),n,o),total:(a=r?Le(e,r):void 0)!=null?a:0}:{}}function po(e,t,l){var o;if(!e||!t)return e||[];const n=(o=l==null?void 0:l.hasChildren)!=null?o:"hasChildren";return e.map(s=>{var a;const r={...s};return r[n]=(a=r[n])!=null?a:!0,r})}function id(e,t,l,n){const o=Wa(e,t),s=o.length;if(!l||!n)return{page:1,data:o,total:s};const r=Math.ceil(s/n);r&&l>r&&(l=r);const a=(l-1)*n,i=a+n,u=o.slice(a,i>s?s:i);return{page:l,data:u,total:s}}function Wa(e,t){if(!e||!e.length)return[];const l=[...e];return za(t).forEach(n=>{l.sort((o,s)=>{if(typeof n.sortMethod=="function"){const u=n.sortMethod(o,s);return n.descend?-u:u}const r=o[n.field],a=s[n.field];if(r==a)return 0;const i=r<a?-1:1;return n.descend?-i:i})}),l}function Zt(e){return e.columnKey==null||e.columnKey===""?e.prop:e.columnKey}function Va(e){const t=[];return e.forEach(l=>{var n;if(!l.hideInTable)if((n=l.children)!=null&&n.length){const o=Va(l.children);o.length&&t.push({...l,children:o})}else t.push({...l})}),t}function ud(e,t,l){const n=ja(t);return n?il(e,n,l):Va(e)}function il(e,t,l,n){const o=[];return!e||!e.length||(e.forEach(s=>{var c;const r=Zt(s);if(r==null||n&&!n(s))return;const a=nl(t,f=>f.uid===r);if(a&&!a.checked)return;const i=(c=a==null?void 0:a.fixed)!=null?c:s.fixed,u=zr(8);if(s.children&&s.children.length){const f=il(s.children,t,l,n);f.length&&o.push({...s,fixed:i,uid:u,children:f});return}o.push({...s,fixed:i,uid:u})}),!l||!o.length)||o.sort((s,r)=>{const a=Zt(s),i=Zt(r);let u=0,c,f;return He(t,h=>{h.uid===a&&(c=u),h.uid===i&&(f=u),u++}),c==null&&s.hideInSetting&&s.fixed==="right"&&(c=u),c==null&&(c=-1),s.fixed===!0||s.fixed==="left"?c-=u:(s.fixed==="right"||s.hideInSetting&&!s.fixed)&&(c+=u),f==null&&r.hideInSetting&&r.fixed==="right"&&(f=u),f==null&&(f=-1),r.fixed===!0||r.fixed==="left"?f-=u:(r.fixed==="right"||r.hideInSetting&&!r.fixed)&&(f+=u),c-f}),o}function Ba(e,t,l,n,o){const s=e==null?[]:[...e];return s.sort((r,a)=>xl(r.fixed)-xl(a.fixed)),Hl(s,(r,a,i)=>{const u=Zt(r);if(!(u==null||l&&!l(r)))return{uid:u,label:r.label||t,checked:!r.hideInTable,fixed:!1}})}function cd(e,t,l){const n=ja(l);if(n)return n;const o=["selection","index","expand"];return Hl(e,s=>{const r=Zt(s);if(r&&!s.hideInSetting&&!(s.type&&o.includes(s.type)))return{uid:r,prop:s.prop,columnKey:s.columnKey,label:s.label||t,checked:!s.hideInTable,fixed:s.fixed}})}function ja(e){if(e){const t=localStorage.getItem(rn(e));if(t)try{const l=JSON.parse(t);if(l&&Array.isArray(l))return l.forEach(n=>{n.uid==null&&n.id!=null&&(n.uid=n.id)}),l}catch(l){console.error(l)}}}function rn(e){return`${e}Cols`}function _a(e){return`${e}Size`}function dd(e){if(e){const t=localStorage.getItem(_a(e));if(t)return t}}function bo(e){return e!=null?e:t=>JSON.stringify(t)}function fd(e,t,l,n){if(!e)return"";if(e.type==="index")return Ia(l,e.index,n);const o=Le(t,e.prop);return typeof e.formatter=="function"?e.formatter(t,e,o,l):o==null?"":String(o)}function hd(e,t){return e?typeof e.renderHeader=="function"?e.renderHeader({column:e,$index:t}):e.label==null?"":String(e.label):""}function Ua(e,t,l,n,o,s,r){const{rows:a,cols:i}=Fa(t),u=[];e.forEach((h,g)=>{const m=[];i.forEach((d,y)=>{const{key:w,originalCol:b}=d,{colspan:S,rowspan:v}=Na({column:b,columnIndex:y,row:h,rowIndex:g},l),p=S==0||v==0?"":fd(b,h,g,n);m.push({key:w,row:h,index:g,column:b,text:p,colspan:S,rowspan:v})}),u.push(m)});const c=[];a.forEach((h,g)=>{const m=[];h.forEach(d=>{const{key:y,colspan:w,rowspan:b,originalCol:S}=d,C=w==0||b==0?"":hd(S,g);m.push({key:y,index:g,column:S,text:C,colspan:w,rowspan:b})}),c.push(m)});const f=[];if(o&&e.length){const h=[],g=Aa(r,i,e);i.forEach((m,d)=>{const{key:y,dataKey:w,originalCol:b}=m,S=Da(e,w);h.push({key:y,column:b,text:g==null?d===0?s:S:g[d],index:0})}),f.push(h)}return{headerData:c,bodyData:u,footerData:f,bodyCols:i}}function md(e,t,l,n){const o=[];[...t,...l,...n].forEach(a=>{o.push(a.map(i=>{var u;return(u=i.text)!=null?u:""}).join(","))});const s=encodeURIComponent(o.join(`
`)),r=document.createElement("a");r.href="data:text/csv;charset=utf-8,"+s,r.download=e+".csv",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function wo(e){return e.hideInExport?!1:!e.type||!["selection","expand"].includes(e.type)}function So(e){return e.hideInPrint?!1:!e.type||!["selection","expand"].includes(e.type)}const gd={title:String,placement:{type:String,default:"top"},disabled:Boolean},vd={click:e=>!0},yd=Re({name:"EleTool",components:{EleTooltip:Ml},props:gd,emits:vd,setup(e,{emit:t}){const l=O(!1),n=s=>{if(s&&(!e.title||e.disabled)){l.value=!1;return}l.value=s},o=s=>{l.value=!1,t("click",s)};return de([()=>e.disabled,()=>e.title],()=>{(!e.title||e.disabled)&&(l.value=!1)}),{visible:l,updateVisible:n,onClick:o}}}),Cd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},pd={class:"ele-tool-body"};function bd(e,t,l,n,o,s){const r=K("EleTooltip");return D(),Y("div",{class:"ele-tool",onClick:t[0]||(t[0]=(...a)=>e.onClick&&e.onClick(...a))},[I(r,{content:e.title,visible:e.visible,placement:e.placement,offset:10,"onUpdate:visible":e.updateVisible},{default:j(()=>[ye("div",pd,[Ee(e.$slots,"default")])]),_:3},8,["content","visible","placement","onUpdate:visible"])])}const Il=Cd(yd,[["render",bd]]),wd=Re({name:"ToolColumnList",components:{VueDraggable:hs,ElCheckbox:ft,ElIcon:ht,HolderOutlined:Wr,VerticalRightOutlined:Vr,VerticalLeftOutlined:Br},props:{data:Array,parent:Object,sortable:Boolean,allowFixed:Boolean},emits:{sortChange:(e,t)=>!0,checkedChange:(e,t)=>!0,fixedLeft:e=>!0,fixedRight:e=>!0,fixedLeftTooltip:e=>!0,fixedRightTooltip:e=>!0},setup(e,{emit:t}){const l=f=>{i(f,e.parent)},n=(f,h)=>{t("checkedChange",f,h)},o=f=>{t("fixedLeft",f)},s=f=>{t("fixedRight",f)},r=f=>{u(f.currentTarget)},a=f=>{c(f.currentTarget)},i=(f,h)=>{t("sortChange",f,h)},u=f=>{t("fixedLeftTooltip",f)},c=f=>{t("fixedRightTooltip",f)};return{onSortChange:l,onCheckedChange:n,onFixedLeft:o,onFixedRight:s,onFixedLeftTooltip:r,onFixedRightTooltip:a,onChildSortChange:i,onChildFixedLeftTooltip:u,onChildFixedRightTooltip:c}}}),Sd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Td={class:"ele-tool-column-item"},Rd={class:"ele-tool-column-item-body"},xd={key:0,class:"ele-tool-column-handle"},Ed={class:"ele-tool-column-label"},kd={key:1,class:"ele-tool-column-fixed"},Od=["onClick"],Hd=["onClick"];function Md(e,t,l,n,o,s){const r=K("HolderOutlined"),a=K("ElIcon"),i=K("ElCheckbox"),u=K("VerticalRightOutlined"),c=K("VerticalLeftOutlined"),f=K("ToolColumnList",!0),h=K("VueDraggable");return D(),ne(h,{itemKey:"uid",animation:300,modelValue:e.data,setData:()=>{},handle:".ele-tool-column-handle",componentData:{class:"ele-tool-column-list"},forceFallback:!0,"onUpdate:modelValue":e.onSortChange},{item:j(({element:g})=>[ye("div",Td,[ye("div",Rd,[e.sortable?(D(),Y("div",xd,[I(a,null,{default:j(()=>[I(r)]),_:1})])):be("",!0),ye("div",Ed,[I(i,{label:g.label,modelValue:g.checked,"onUpdate:modelValue":m=>e.onCheckedChange(g,m)},null,8,["label","modelValue","onUpdate:modelValue"])]),e.allowFixed?(D(),Y("div",kd,[ye("div",{class:pe(["ele-tool-column-fixed-item",{"is-active":g.fixed===!0||g.fixed==="left"}]),onClick:m=>e.onFixedLeft(g),onMouseover:t[0]||(t[0]=(...m)=>e.onFixedLeftTooltip&&e.onFixedLeftTooltip(...m))},[I(a,null,{default:j(()=>[I(u)]),_:1})],42,Od),ye("div",{class:pe(["ele-tool-column-fixed-item",{"is-active":g.fixed==="right"}]),onClick:m=>e.onFixedRight(g),onMouseover:t[1]||(t[1]=(...m)=>e.onFixedRightTooltip&&e.onFixedRightTooltip(...m))},[I(a,null,{default:j(()=>[I(c)]),_:1})],42,Hd)])):be("",!0)]),g.children&&g.children.length?(D(),ne(f,{key:0,data:g.children,parent:g,sortable:e.sortable,onSortChange:e.onChildSortChange,onCheckedChange:e.onCheckedChange,onFixedLeft:e.onFixedLeft,onFixedRight:e.onFixedRight,onFixedLeftTooltip:e.onChildFixedLeftTooltip,onFixedRightTooltip:e.onChildFixedRightTooltip},null,8,["data","parent","sortable","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip"])):be("",!0)])]),_:1},8,["modelValue","onUpdate:modelValue"])}const Fn=Sd(wd,[["render",Md]]),Fd=Re({name:"ToolColumn",components:{ElCheckbox:ft,ElIcon:ht,EleTooltip:Ml,SettingOutlined:jr,EleTool:Il,ToolColumnList:Fn},props:{title:String,placement:String,checkAllText:String,resetText:String,untitledText:String,fixedLeftText:String,fixedRightText:String,columns:Array,sortable:Boolean,allowFixed:Boolean,cacheKey:String},emits:{"update:columns":e=>!0},setup(e,{emit:t}){const l=O([]),n=O(!1),o=O(!1),s=O(""),r=O(),a=()=>{const S=cd(e.columns,e.untitledText,e.cacheKey);l.value=S;let v=!0,C=!1;He(l.value,p=>{if(!p.checked&&v&&(v=!1),p.checked&&!C&&(C=!0),!v&&C)return!1}),n.value=l.value.length>0&&v,o.value=!v&&C},i=()=>{const S=il(e.columns,l.value,e.sortable);t("update:columns",S)},u=()=>{e.cacheKey&&localStorage.setItem(rn(e.cacheKey),JSON.stringify(l.value))},c=()=>{e.cacheKey&&localStorage.removeItem(rn(e.cacheKey))},f=(S,v)=>{let C=!0,p=!1;He(l.value,x=>{if(x.uid===S.uid&&(x.checked=v),!x.checked&&C&&(C=!1),x.checked&&!p&&(p=!0),x.uid===S.uid&&!C&&p)return!1}),n.value=l.value.length>0&&C,o.value=!C&&p,u(),i()},h=S=>{n.value=S,o.value=!1,He(l.value,v=>{v.checked!==S&&(v.checked=S)}),u(),i()},g=()=>{c(),a(),i()},m=(S,v)=>{v?He(l.value,C=>{if(C.uid===v.uid)return C.children=S,!1}):l.value=S,u(),i()},d=S=>{He(l.value,v=>{if(v.uid===S.uid)return v.fixed=v.fixed===!0||v.fixed==="left"?!1:"left",!1}),u(),i()},y=S=>{He(l.value,v=>{if(v.uid===S.uid)return v.fixed=v.fixed==="right"?!1:"right",!1}),u(),i()},w=S=>{var v;r.value=S,s.value=(v=e.fixedLeftText)!=null?v:""},b=S=>{var v;r.value=S,s.value=(v=e.fixedRightText)!=null?v:""};return de([()=>e.columns,()=>e.untitledText],()=>{a()},{immediate:!0,deep:!0}),{data:l,isCheckAll:n,isIndeterminate:o,tooltipContent:s,virtualRef:r,onCheckedChange:f,onCheckAllChange:h,onReset:g,onSortChange:m,onFixedLeft:d,onFixedRight:y,onFixedLeftTooltip:w,onFixedRightTooltip:b}}}),$d=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Id={class:"ele-tool-column-header"},Nd={class:"ele-tool-column-label"};function Ad(e,t,l,n,o,s){const r=K("SettingOutlined"),a=K("ElIcon"),i=K("ElCheckbox"),u=K("ToolColumnList"),c=K("EleTooltip"),f=K("EleTool");return D(),ne(f,{title:e.title,placement:e.placement},{default:j(()=>[I(c,{trigger:"click",placement:"bottom-end",popperClass:"ele-tool-column-popover",transition:"el-zoom-in-top",gpuAcceleration:!1,effect:"light",isPopover:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[20,10]}}]}},{body:j(()=>[ye("div",{class:pe(["ele-popover-body","ele-tool-column",{"is-sortable":e.sortable}])},[ye("div",Id,[ye("div",Nd,[I(i,{label:e.checkAllText,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.onCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),ye("div",{class:"ele-tool-column-link",onClick:t[0]||(t[0]=(...h)=>e.onReset&&e.onReset(...h))},je(e.resetText),1)]),e.data.length?(D(),ne(u,{key:0,data:e.data,sortable:e.sortable,allowFixed:e.allowFixed,onSortChange:e.onSortChange,onCheckedChange:e.onCheckedChange,onFixedLeft:e.onFixedLeft,onFixedRight:e.onFixedRight,onFixedLeftTooltip:e.onFixedLeftTooltip,onFixedRightTooltip:e.onFixedRightTooltip},null,8,["data","sortable","allowFixed","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip"])):be("",!0)],2),I(c,{trigger:"hover",placement:"top",teleported:!1,persistent:!1,virtualTriggering:!0,virtualRef:e.virtualRef,content:e.tooltipContent},null,8,["virtualRef","content"])]),default:j(()=>[I(a,null,{default:j(()=>[I(r)]),_:1})]),_:1})]),_:1},8,["title","placement"])}const Dd=$d(Fd,[["render",Ad]]),Ld=Re({name:"ToolExport",components:{ElForm:No,ElFormItem:Ao,ElInput:_r,ElSelect:Do,ElOption:Lo,ElCheckbox:ft,ElButton:yn,ElIcon:ht,DownloadOutlined:Ur,EleTool:Il,EleModal:Po,ToolColumnList:Fn},props:{title:String,placement:String,checkAllText:String,resetText:String,untitledText:String,fileNameText:String,fileNamePlaceholderText:String,selectDataText:String,selectColumnText:String,dataTypePageText:String,dataTypeSelectedText:String,dataTypeAllText:String,cancelText:String,okText:String,modalProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,showSummary:Boolean,sumText:String,summaryMethod:Function,pageIndex:Number,fetch:Function,defaultFileName:{type:String,default:"list"},defaultDataType:{type:String,default:"pageData"},beforeExport:Function},setup(e){const t=O(!1),l=O(!1),n=O(null),o=ol({fileName:e.defaultFileName}),s=ol({required:!0,message:e.fileNamePlaceholderText,type:"string",trigger:"blur"}),r=O(e.defaultDataType),a=O([]),i=O(!1),u=O(!1),c=()=>{t.value=!0},f=()=>{t.value=!1},h=()=>{l.value=!0},g=()=>{l.value=!1},m=C=>{h();const p=il(e.columns,a.value,!0,wo),{headerData:x,bodyData:M,footerData:R,bodyCols:F}=Ua(C,p,e.spanMethod,e.pageIndex,e.showSummary,e.sumText,e.summaryMethod);typeof e.beforeExport=="function"&&e.beforeExport({data:C,columns:p,headerData:x,bodyData:M,footerData:R,bodyCols:F,fileName:o.fileName,hideLoading:g,closeModal:f})===!1||(md(o.fileName,x,M,R),g(),f())},d=()=>{var C,p;(p=(C=n.value)==null?void 0:C.validate)==null||p.call(C,x=>{if(x){if(r.value==="selections"){m([...e.selections||[]]);return}if(r.value!=="data"){m([...e.pageData||[]]);return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(h(),e.fetch(M=>{e.datasource(M).then(R=>{if(R==null){g();return}m(R)}).catch(()=>{g()})}))}})},y=()=>{a.value=Ba(e.columns,e.untitledText,wo);let C=!0,p=!1;He(a.value,x=>{if(!x.checked&&C&&(C=!1),x.checked&&!p&&(p=!0),!C&&p)return!1}),i.value=a.value.length>0&&C,u.value=!C&&p},w=(C,p)=>{let x=!0,M=!1;He(a.value,R=>{if(R.uid===C.uid&&(R.checked=p),!R.checked&&x&&(x=!1),R.checked&&!M&&(M=!0),R.uid===C.uid&&!x&&M)return!1}),i.value=a.value.length>0&&x,u.value=!x&&M},b=(C,p)=>{p?He(a.value,x=>{if(x.uid===p.uid)return x.children=C,!1}):a.value=C},S=C=>{i.value=C,u.value=!1,He(a.value,p=>{p.checked!==C&&(p.checked=C)})},v=()=>{y()};return de(t,C=>{var p,x;if(C){o.fileName=e.defaultFileName,r.value=e.defaultDataType,y();return}l.value=!1,(x=(p=n.value)==null?void 0:p.clearValidate)==null||x.call(p)}),de(()=>e.fileNamePlaceholderText,C=>{s.message=C}),{visible:t,loading:l,formRef:n,form:o,fileNameRules:s,dataType:r,colItems:a,isCheckAll:i,isIndeterminate:u,openModal:c,closeModal:f,handleExport:d,onCheckedChange:w,onSortChange:b,onCheckAllChange:S,onReset:v}}}),Pd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Kd={class:"ele-tool-column is-sortable"},zd={class:"ele-tool-column-header"},Wd={class:"ele-tool-column-label"};function Vd(e,t,l,n,o,s){const r=K("DownloadOutlined"),a=K("ElIcon"),i=K("ElInput"),u=K("ElFormItem"),c=K("ElOption"),f=K("ElSelect"),h=K("ElCheckbox"),g=K("ToolColumnList"),m=K("ElForm"),d=K("ElButton"),y=K("EleModal"),w=K("EleTool");return D(),ne(w,{title:e.title,placement:e.placement,onClick:e.openModal},{default:j(()=>[I(a,{style:{transform:"scale(1.1)","transform-origin":"bottom"}},{default:j(()=>[I(r)]),_:1}),I(y,Oe({form:!0,width:"460px",title:e.title,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[4]||(t[4]=b=>e.visible=b)}),{footer:j(()=>[I(d,{onClick:e.closeModal},{default:j(()=>[Ct(je(e.cancelText),1)]),_:1},8,["onClick"]),I(d,{loading:e.loading,type:"primary",onClick:e.handleExport},{default:j(()=>[Ct(je(e.okText),1)]),_:1},8,["loading","onClick"])]),default:j(()=>[I(m,{ref:"formRef",model:e.form,labelWidth:"80px",onSubmit:t[3]||(t[3]=Fl(()=>{},["prevent"])),class:"ele-tool-export-form"},{default:j(()=>[I(u,{label:e.fileNameText,prop:"fileName",rules:e.fileNameRules},{default:j(()=>[I(i,{maxlength:20,clearable:!0,modelValue:e.form.fileName,"onUpdate:modelValue":t[0]||(t[0]=b=>e.form.fileName=b),placeholder:e.fileNamePlaceholderText},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),I(u,{label:e.selectDataText},{default:j(()=>[I(f,{modelValue:e.dataType,"onUpdate:modelValue":t[1]||(t[1]=b=>e.dataType=b),placeholder:e.selectDataText},{default:j(()=>[e.pageData!=null?(D(),ne(c,{key:0,value:"pageData",label:e.dataTypePageText},null,8,["label"])):be("",!0),e.selections!=null?(D(),ne(c,{key:1,value:"selections",label:e.dataTypeSelectedText},null,8,["label"])):be("",!0),e.datasource!=null?(D(),ne(c,{key:2,value:"data",label:e.dataTypeAllText},null,8,["label"])):be("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),I(u,{label:e.selectColumnText},{default:j(()=>[ye("div",Kd,[ye("div",zd,[ye("div",Wd,[I(h,{label:e.checkAllText,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.onCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),ye("div",{class:"ele-tool-column-link",onClick:t[2]||(t[2]=(...b)=>e.onReset&&e.onReset(...b))},je(e.resetText),1)]),I(g,{data:e.colItems,sortable:!0,onSortChange:e.onSortChange,onCheckedChange:e.onCheckedChange},null,8,["data","onSortChange","onCheckedChange"])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},16,["title","modelValue"])]),_:1},8,["title","placement","onClick"])}const Bd=Pd(Ld,[["render",Vd]]),jd=Re({name:"ToolPrintBodyCell",components:{CellRender:_t},props:{col:{type:Object,required:!0},columnIndex:Number,bodyCellStyle:[Object,Function],bodyCellClass:[String,Function]},setup(e,{slots:t}){const l=H(()=>{const{text:r,row:a,column:i,index:u}=e.col,c=[{row:a,column:i,$index:u}];return i&&!["expand","selection","index"].includes(i.type||"")&&i.slot&&typeof t[i.slot]=="function"?{render:t[i.slot],params:c}:{render:()=>r,params:c}}),n=H(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index,row:e.col.row})),o=H(()=>typeof e.bodyCellStyle=="function"?e.bodyCellStyle(n.value):e.bodyCellStyle),s=H(()=>{const r=[],a=e.col.column;if(a){if(a.align&&r.push("is-align-"+a.align),typeof e.bodyCellClass=="function"){const i=e.bodyCellClass(n.value);i&&r.push(i)}else e.bodyCellClass&&r.push(e.bodyCellClass);a.className&&r.push(a.className)}return r.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:s}}}),_d=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Ud=["colspan","rowspan"];function qd(e,t,l,n,o,s){const r=K("CellRender");return D(),Y("td",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:at(e.cellStyle),class:pe(e.cellClass)},[I(r,We(Je(e.renderOpt)),null,16)],14,Ud)}const Gd=_d(jd,[["render",qd]]),Yd=Re({name:"ToolPrintHeaderCell",components:{CellRender:_t},props:{col:{type:Object,required:!0},columnIndex:Number,headerCellStyle:[Object,Function],headerCellClass:[String,Function]},setup(e,{slots:t}){const l=H(()=>{const{text:r,column:a}=e.col,i=[{column:a,$index:e.columnIndex}];return a&&a.type!=="index"&&a.headerSlot&&typeof t[a.headerSlot]=="function"?{render:t[a.headerSlot],params:i}:{render:()=>r,params:i}}),n=H(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index})),o=H(()=>typeof e.headerCellStyle=="function"?e.headerCellStyle(n.value):e.headerCellStyle),s=H(()=>{const r=[],a=e.col.column;if(a){const i=a.headerAlign||a.align;if(i&&r.push("is-align-"+i),typeof e.headerCellClass=="function"){const u=e.headerCellClass(n.value);u&&r.push(u)}else e.headerCellClass&&r.push(e.headerCellClass);a.labelClassName&&r.push(a.labelClassName)}return r.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:s}}}),Xd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Jd=["colspan","rowspan"];function Qd(e,t,l,n,o,s){const r=K("CellRender");return D(),Y("th",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:at(e.cellStyle),class:pe(e.cellClass)},[I(r,We(Je(e.renderOpt)),null,16)],14,Jd)}const Zd=Xd(Yd,[["render",Qd]]),ef=Re({name:"ToolPrint",components:{ElForm:No,ElFormItem:Ao,ElSelect:Do,ElOption:Lo,ElCheckbox:ft,ElButton:yn,ElIcon:ht,PrinterOutlined:qr,EleTool:Il,EleModal:Po,ElePrinter:ms,EleTable:gs,CellRender:_t,ToolColumnList:Fn,ToolPrintBodyCell:Gd,ToolPrintHeaderCell:Zd},props:{title:String,placement:String,checkAllText:String,resetText:String,untitledText:String,selectDataText:String,selectColumnText:String,dataTypePageText:String,dataTypeSelectedText:String,dataTypeAllText:String,cancelText:String,okText:String,modalProps:Object,printerProps:Object,tableProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,fetch:Function,defaultDataType:{type:String,default:"pageData"},beforePrint:Function},setup(e){const t=O(!1),l=O(!1),n=O(e.defaultDataType),o=O([]),s=O(!1),r=O(!1),a=ol({printing:!1,headerData:[],bodyData:[],footerData:[],hasHeader:!1,hasFooter:!1,bodyCols:[],data:[]}),i=()=>{t.value=!0},u=()=>{t.value=!1},c=()=>{l.value=!0},f=()=>{l.value=!1},h=()=>{f()},g=v=>{c();const C=il(e.columns,o.value,!0,So),{headerData:p,bodyData:x,footerData:M,bodyCols:R}=Ua(v,C,e.spanMethod,e.pageIndex,e.showSummary,e.sumText,e.summaryMethod);typeof e.beforePrint=="function"&&e.beforePrint({data:v,columns:C,headerData:p,bodyData:x,footerData:M,bodyCols:R,hideLoading:f,closeModal:u})===!1||(a.data=v,a.headerData=p,a.bodyData=x,a.footerData=M,a.hasHeader=!!a.headerData.length,a.hasFooter=!!a.footerData.length,a.bodyCols=R,Qe(()=>{a.printing=!0}))},m=()=>{if(n.value==="selections"){g([...e.selections||[]]);return}if(n.value!=="data"){g([...e.pageData||[]]);return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(c(),e.fetch(v=>{e.datasource(v).then(C=>{if(C==null){f();return}g(C)}).catch(()=>{f()})}))},d=()=>{o.value=Ba(e.columns,e.untitledText,So);let v=!0,C=!1;He(o.value,p=>{if(!p.checked&&v&&(v=!1),p.checked&&!C&&(C=!0),!v&&C)return!1}),s.value=o.value.length>0&&v,r.value=!v&&C},y=(v,C)=>{let p=!0,x=!1;He(o.value,M=>{if(M.uid===v.uid&&(M.checked=C),!M.checked&&p&&(p=!1),M.checked&&!x&&(x=!0),M.uid===v.uid&&!p&&x)return!1}),s.value=o.value.length>0&&p,r.value=!p&&x},w=(v,C)=>{C?He(o.value,p=>{if(p.uid===C.uid)return p.children=v,!1}):o.value=v},b=v=>{s.value=v,r.value=!1,He(o.value,C=>{C.checked!==v&&(C.checked=v)})},S=()=>{d()};return de(t,v=>{if(v){n.value=e.defaultDataType,d();return}a.data=[],a.headerData=[],a.bodyData=[],a.footerData=[],a.bodyCols=[],a.hasHeader=!1,a.hasFooter=!1,a.printing=!1,l.value=!1}),{visible:t,loading:l,dataType:n,colItems:o,isCheckAll:s,isIndeterminate:r,printOptions:a,openModal:i,closeModal:u,onPrintDone:h,handlePrint:m,onCheckedChange:y,onSortChange:w,onCheckAllChange:b,onReset:S}}}),tf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},lf={class:"ele-tool-column is-sortable"},nf={class:"ele-tool-column-header"},of={class:"ele-tool-column-label"},af=["width"],rf={key:0},sf={key:1};function uf(e,t,l,n,o,s){const r=K("PrinterOutlined"),a=K("ElIcon"),i=K("ElOption"),u=K("ElSelect"),c=K("ElFormItem"),f=K("ElCheckbox"),h=K("ToolColumnList"),g=K("ElForm"),m=K("ElButton"),d=K("EleModal"),y=K("ToolPrintHeaderCell"),w=K("ToolPrintBodyCell"),b=K("CellRender"),S=K("EleTable"),v=K("ElePrinter"),C=K("EleTool");return D(),ne(C,{title:e.title,placement:e.placement,onClick:e.openModal},{default:j(()=>[I(a,null,{default:j(()=>[I(r)]),_:1}),I(d,Oe({form:!0,width:"460px",title:e.title,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=p=>e.visible=p)}),{footer:j(()=>[I(m,{onClick:e.closeModal},{default:j(()=>[Ct(je(e.cancelText),1)]),_:1},8,["onClick"]),I(m,{loading:e.loading,type:"primary",onClick:e.handlePrint},{default:j(()=>[Ct(je(e.okText),1)]),_:1},8,["loading","onClick"])]),default:j(()=>[I(g,{labelWidth:"80px",onSubmit:t[2]||(t[2]=Fl(()=>{},["prevent"])),class:"ele-tool-print-form"},{default:j(()=>[I(c,{label:e.selectDataText},{default:j(()=>[I(u,{modelValue:e.dataType,"onUpdate:modelValue":t[0]||(t[0]=p=>e.dataType=p),placeholder:e.selectDataText},{default:j(()=>[e.pageData!=null?(D(),ne(i,{key:0,value:"pageData",label:e.dataTypePageText},null,8,["label"])):be("",!0),e.selections!=null?(D(),ne(i,{key:1,value:"selections",label:e.dataTypeSelectedText},null,8,["label"])):be("",!0),e.datasource!=null?(D(),ne(i,{key:2,value:"data",label:e.dataTypeAllText},null,8,["label"])):be("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),I(c,{label:e.selectColumnText},{default:j(()=>[ye("div",lf,[ye("div",nf,[ye("div",of,[I(f,{label:e.checkAllText,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.onCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),ye("div",{class:"ele-tool-column-link",onClick:t[1]||(t[1]=(...p)=>e.onReset&&e.onReset(...p))},je(e.resetText),1)]),I(h,{data:e.colItems,sortable:!0,onSortChange:e.onSortChange,onCheckedChange:e.onCheckedChange},null,8,["data","onSortChange","onCheckedChange"])])]),_:1},8,["label"])]),_:1})]),_:1},16,["title","modelValue"]),I(v,Oe({target:"_iframe"},e.printerProps||{},{modelValue:e.printOptions.printing,"onUpdate:modelValue":t[4]||(t[4]=p=>e.printOptions.printing=p),onDone:e.onPrintDone}),{default:j(()=>[Ee(e.$slots,"printTop",{data:e.printOptions.data}),I(S,Oe({border:!0,printSkin:!0,hasHeader:e.printOptions.hasHeader,hasFooter:e.printOptions.hasFooter},e.tableProps||{}),{default:j(()=>[ye("colgroup",null,[(D(!0),Y(ze,null,$e(e.printOptions.bodyCols,p=>(D(),Y("col",{key:p.key,width:p.width},null,8,af))),128))]),e.printOptions.hasHeader?(D(),Y("thead",rf,[(D(!0),Y(ze,null,$e(e.printOptions.headerData,(p,x)=>(D(),Y("tr",{key:x},[(D(!0),Y(ze,null,$e(p,(M,R)=>(D(),Y(ze,null,[M.rowspan!=0&&M.colspan!=0?(D(),ne(y,{key:M.key,col:M,columnIndex:R,headerCellStyle:e.headerCellStyle,headerCellClass:e.headerCellClassName},it({_:2},[$e(Object.keys(e.$slots).filter(F=>!["printTop","printBottom"].includes(F)),F=>({name:F,fn:j(P=>[Ee(e.$slots,F,We(Je(P||{})))])}))]),1032,["col","columnIndex","headerCellStyle","headerCellClass"])):be("",!0)],64))),256))]))),128))])):be("",!0),ye("tbody",null,[(D(!0),Y(ze,null,$e(e.printOptions.bodyData,(p,x)=>(D(),Y("tr",{key:x},[(D(!0),Y(ze,null,$e(p,(M,R)=>(D(),Y(ze,null,[M.rowspan!=0&&M.colspan!=0?(D(),ne(w,{key:M.key,col:M,columnIndex:R,bodyCellStyle:e.cellStyle,bodyCellClass:e.cellClassName},it({_:2},[$e(Object.keys(e.$slots).filter(F=>!["printTop","printBottom"].includes(F)),F=>({name:F,fn:j(P=>[Ee(e.$slots,F,We(Je(P||{})))])}))]),1032,["col","columnIndex","bodyCellStyle","bodyCellClass"])):be("",!0)],64))),256))]))),128))]),e.printOptions.hasFooter?(D(),Y("tfoot",sf,[(D(!0),Y(ze,null,$e(e.printOptions.footerData,(p,x)=>(D(),Y("tr",{key:x},[(D(!0),Y(ze,null,$e(p,M=>(D(),Y("td",{key:M.key},[I(b,{render:()=>M.text,params:[]},null,8,["render"])]))),128))]))),128))])):be("",!0)]),_:3},16,["hasHeader","hasFooter"]),Ee(e.$slots,"printBottom",{data:e.printOptions.data})]),_:3},16,["modelValue","onDone"])]),_:3},8,["title","placement","onClick"])}const cf=tf(ef,[["render",uf]]),df=Re({name:"TableTools",components:{ElIcon:ht,ReloadOutlined:Gr,ColumnHeightOutlined:Yr,FullscreenOutlined:Xr,FullscreenExitOutlined:Jr,EleDropdown:Qr,EleTool:Il,ToolColumn:Dd,ToolExport:Bd,ToolPrint:cf},props:{tools:{type:Array,required:!0},size:String,columns:Array,columnSortable:Boolean,columnFixed:Boolean,maximized:Boolean,cacheKey:String,locale:Object,selections:Array,pageData:Array,spanMethod:Function,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,fetch:Function,exportConfig:{type:Object,required:!0},printConfig:{type:Object,required:!0}},emits:{reload:()=>!0,"update:size":e=>!0,"update:columns":e=>!0,"update:maximized":e=>!0},setup(e,{emit:t}){const{lang:l}=Zr("table",e),n=H(()=>e.maximized?"bottom":"top");return{lang:l,placement:n,reload:()=>{t("reload")},updateSize:i=>{e.cacheKey&&localStorage.setItem(_a(e.cacheKey),i),t("update:size",i)},updateColumns:i=>{t("update:columns",i)},toggleMaximized:()=>{t("update:maximized",!e.maximized)}}}}),ff=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function hf(e,t,l,n,o,s){const r=K("ReloadOutlined"),a=K("ElIcon"),i=K("EleTool"),u=K("ColumnHeightOutlined"),c=K("EleDropdown"),f=K("ToolColumn"),h=K("FullscreenExitOutlined"),g=K("FullscreenOutlined"),m=K("ToolExport"),d=K("ToolPrint");return D(!0),Y(ze,null,$e(e.tools,(y,w)=>(D(),Y(ze,null,[y==="reload"?(D(),ne(i,{key:w+"-reload",placement:e.placement,title:e.lang.refresh,onClick:e.reload},{default:j(()=>[I(a,null,{default:j(()=>[I(r)]),_:1})]),_:2},1032,["placement","title","onClick"])):y==="size"?(D(),ne(i,{key:w+"-size",placement:e.placement,title:e.lang.sizes},{default:j(()=>[I(c,{trigger:"click",placement:"bottom",popperClass:"ele-tool-size-popper",modelValue:e.size,items:[{title:e.lang.sizeLarge,command:"large"},{title:e.lang.sizeDefault,command:"default"},{title:e.lang.sizeSmall,command:"small"}],popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},onCommand:e.updateSize},{default:j(()=>[I(a,null,{default:j(()=>[I(u)]),_:1})]),_:1},8,["modelValue","items","onCommand"])]),_:2},1032,["placement","title"])):y==="columns"?(D(),ne(f,{key:w+"-columns",title:e.lang.columns,placement:e.placement,checkAllText:e.lang.columnTitle,resetText:e.lang.columnReset,untitledText:e.lang.columnUntitled,fixedLeftText:e.lang.columnFixedLeft,fixedRightText:e.lang.columnFixedRight,columns:e.columns,sortable:e.columnSortable,allowFixed:e.columnFixed,cacheKey:e.cacheKey,"onUpdate:columns":e.updateColumns},null,8,["title","placement","checkAllText","resetText","untitledText","fixedLeftText","fixedRightText","columns","sortable","allowFixed","cacheKey","onUpdate:columns"])):y==="maximized"?(D(),ne(i,{key:w+"-maximized",placement:e.placement,title:e.lang.maximized,onClick:e.toggleMaximized},{default:j(()=>[I(a,null,{default:j(()=>[e.maximized?(D(),ne(h,{key:0})):(D(),ne(g,{key:1}))]),_:1})]),_:2},1032,["placement","title","onClick"])):y==="export"?(D(),ne(m,{key:w+"-export",placement:e.placement,title:e.lang.export,checkAllText:e.lang.columnTitle,resetText:e.lang.columnReset,untitledText:e.lang.columnUntitled,fileNameText:e.lang.exportFileName,fileNamePlaceholderText:e.lang.exportFileNamePlaceholder,selectDataText:e.lang.exportSelectData,selectColumnText:e.lang.exportSelectColumn,dataTypePageText:e.lang.exportDataTypePage,dataTypeSelectedText:e.lang.exportDataTypeSelected,dataTypeAllText:e.lang.exportDataTypeAll,cancelText:e.lang.exportCancel,okText:e.lang.exportOk,modalProps:e.exportConfig.modalProps,columns:e.columns,selections:e.selections,pageData:e.pageData,datasource:e.exportConfig.datasource,spanMethod:e.spanMethod,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,pageIndex:e.pageIndex,fetch:e.fetch,defaultFileName:e.exportConfig.fileName,defaultDataType:e.exportConfig.dataType,beforeExport:e.exportConfig.beforeExport},null,8,["placement","title","checkAllText","resetText","untitledText","fileNameText","fileNamePlaceholderText","selectDataText","selectColumnText","dataTypePageText","dataTypeSelectedText","dataTypeAllText","cancelText","okText","modalProps","columns","selections","pageData","datasource","spanMethod","showSummary","sumText","summaryMethod","pageIndex","fetch","defaultFileName","defaultDataType","beforeExport"])):y==="print"?(D(),ne(d,{key:w+"-print",placement:e.placement,title:e.lang.print,checkAllText:e.lang.columnTitle,resetText:e.lang.columnReset,untitledText:e.lang.columnUntitled,selectDataText:e.lang.exportSelectData,selectColumnText:e.lang.exportSelectColumn,dataTypePageText:e.lang.exportDataTypePage,dataTypeSelectedText:e.lang.exportDataTypeSelected,dataTypeAllText:e.lang.exportDataTypeAll,cancelText:e.lang.exportCancel,okText:e.lang.exportOk,modalProps:e.printConfig.modalProps,columns:e.columns,selections:e.selections,pageData:e.pageData,datasource:e.printConfig.datasource,spanMethod:e.spanMethod,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.pageIndex,fetch:e.fetch,defaultDataType:e.printConfig.dataType,beforePrint:e.printConfig.beforePrint},it({_:2},[$e(Object.keys(e.$slots),b=>({name:b,fn:j(S=>[Ee(e.$slots,b,We(Je(S||{})))])}))]),1032,["placement","title","checkAllText","resetText","untitledText","selectDataText","selectColumnText","dataTypePageText","dataTypeSelectedText","dataTypeAllText","cancelText","okText","modalProps","columns","selections","pageData","datasource","spanMethod","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","fetch","defaultDataType","beforePrint"])):y&&!["default","printTop","printBottom"].includes(y)&&e.$slots[y]?Ee(e.$slots,y,{key:6,pageIndex:e.pageIndex,fetch:e.fetch}):be("",!0)],64))),256)}const mf=ff(df,[["render",hf]]),gf={...jt($l,["data","pageIndex","errorText","cacheData"]),rowKey:{type:[String,Function],required:!1},loading:Boolean,datasource:{type:[Array,Function],required:!0},where:Object,request:Object,response:Object,parseData:Function,loadOnCreated:{type:Boolean,default:!0},loadOnChanged:{type:Boolean,default:!0},selections:Array,current:Object,toolbar:{type:[Boolean,Object],default:!0},tools:{type:[Boolean,Array],default:()=>null},columnSortable:{type:Boolean,default:!0},columnFixed:{type:Boolean,default:!0},maximizedIndex:Number,maximizedHeight:[String,Number],tableStyle:Object,footerStyle:Object,pagination:{type:[Boolean,Object],default:()=>null},loadingProps:Object,cacheKey:String,virtual:Boolean,rowHeight:Number,locale:Object,exportConfig:Object,printConfig:Object},vf={...On,done:(e,t)=>!0,"update:selections":e=>!0,"update:current":e=>!0,columnsChange:e=>!0,sizeChange:e=>!0,maximizedChange:e=>!0,refresh:()=>!0},yf=Re({name:"EleProTable",components:{EleLoading:ts,ElePagination:ls,EleDataTable:qu,EleVirtualTable:ld,EleToolbar:fs,TableTools:mf},props:gf,emits:vf,setup(e,{emit:t}){var ut,Ve;const l=kn(t),n=Oa(()=>Fe()),o=es("table"),s={sorter:(ut=e.defaultSort)!=null?ut:{},filter:rd(e.columns),where:(Ve=e.where)!=null?Ve:{}},r=O(null),a=O([]),i=O(nd(e.pagination,o.value.pagination)),u=O(od(e.pagination,o.value.pagination)),c=O(0),f=O(e.loading),h=O([]),g=O(Ll(e.cacheKey,e.size,o.value.size)),m=O(!1),d=O(""),y=O(),w=kt(bo(e.rowKey)),b=H(()=>{var A,te;return(((A=i.value)!=null?A:1)-1)*((te=u.value)!=null?te:0)+1}),S=H(()=>Mn(g.value,e.pagination,o.value.pagination,{total:c.value,pageSize:u.value,currentPage:i.value,hasNext:a.value.length>=u.value})),v=H(()=>Hn(e.emptyProps,o.value.emptyProps)),C=H(()=>typeof e.datasource=="function"),p=H(()=>{var te,B,_,G;const A=m.value&&e.maximizedHeight;return{...Fo(e,Uu),height:A?e.maximizedHeight:e.height,border:(B=(te=e.border)!=null?te:o.value.border)!=null?B:!1,stripe:(G=(_=e.stripe)!=null?_:o.value.stripe)!=null?G:!1,load:$,size:g.value,data:a.value,columns:h.value,cacheData:y.value,errorText:d.value,pageIndex:b.value,emptyProps:v.value,rowHeight:e.virtual?e.rowHeight:void 0,rowKey:w.value,style:e.tableStyle,class:"ele-pro-table-view",...l,onSelectionChange:ae,onSortChange:Z,onFilterChange:ee,onCurrentChange:Ce}}),x=H(()=>{var te,B;const A=(B=(te=e.tools)!=null?te:o.value.tools)!=null?B:!0;return A===!0?["reload","size","columns","maximized"]:A||[]}),M=H(()=>{const A=o.value.exportConfig||{},te=e.exportConfig||{};return{...A,...te,modalProps:{...A.modalProps||{},...te.modalProps||{}}}}),R=H(()=>{const A=o.value.printConfig||{},te=e.printConfig||{};return{...A,...te,modalProps:{...A.modalProps||{},...te.modalProps||{}},printerProps:{...A.printerProps||{},...te.printerProps||{}},tableProps:{...A.tableProps||{},...te.tableProps||{}}}}),F=H(()=>{var te;const A=(te=e.maximizedIndex)!=null?te:o.value.maximizedIndex;return{...e.loadingProps||{},loading:f.value,class:["ele-pro-table",{"is-maximized":m.value},{"is-border":p.value.border}],style:m.value?{zIndex:A}:void 0}}),P=(A,te,B)=>{A&&(A.page&&(i.value=A.page),A.limit&&(u.value=A.limit),A.where&&(s.where=A.where),A.sorter&&(s.sorter=A.sorter),A.filter&&(s.filter=A.filter)),d.value="";const _=s.sorter;if(!C.value){const{data:Q,page:ie,total:ce}=id(e.datasource,_,S.value?i.value:void 0,u.value);y.value=e.datasource,a.value=Q,i.value=ie,c.value=ce,W({data:Q,page:ie,total:ce,response:e.datasource});return}te||(f.value=!0);const G=s.filter,se=vo(_,e.request,o.value.request);e.datasource({page:i.value,limit:u.value,pages:Co(i.value,u.value,e.request,o.value.request),where:Object.assign({},s.where),orders:se,filters:yo(G),sorter:_,filter:G,parent:te}).then(Q=>{var Ae;const ie=(Ae=e.parseData)!=null?Ae:o.value.parseData,ce=ie?ie(Q):Q,{data:ve,total:Ie}=sd(ce,e.response,o.value.response,e.lazy,e.treeProps);T(ve,Ie,te,ce,B)}).catch(Q=>{T(Q==null?void 0:Q.message),B&&console.error(Q)})},T=(A,te,B,_,G)=>{if(!Array.isArray(A)){if(a.value=[],f.value=!1,typeof A=="string"&&A){d.value=A;return}d.value="获取数据失败",console.error("返回的数据格式与配置的不一致, 返回的数据:",_,"需要的格式:",Ka(o.value.response,e.response));return}if(G)G(A);else{if(ad(e.pagination,o.value.pagination)&&!A.length&&te&&te!=="*"&&i.value&&u.value){const Q=Math.ceil(te/u.value);if(Q&&i.value>Q){i.value=Q,P();return}}a.value=A,c.value=te||A.length}f.value=!1;const se={data:a.value,page:i.value,total:c.value,response:_};W(se,B)},$=(A,te,B)=>{if(e.load){e.load(A,te,B);return}P(void 0,A,B)},W=(A,te)=>{Qe(()=>{e.current!=null&&n.setCurrentRowKey(Le(e.current,w.value)),e.selections!=null&&e.selections.length&&n.setSelectedRowKeys(It(e.selections,w.value))}),t("done",A,te)},oe=()=>{if(C.value){P();return}t("refresh")},J=A=>{g.value=A,t("sizeChange",A)},he=A=>{h.value=A,t("columnsChange",A)},Se=A=>{m.value=A,t("maximizedChange",A)},L=A=>{u.value=A,P()},V=A=>{i.value=A,P()},Z=A=>{e.loadOnChanged&&(s.sorter=A,P()),l.onSortChange(A)},ee=A=>{e.loadOnChanged&&(s.filter=A,P()),l.onFilterChange(A)},Ce=(A,te)=>{Te(A),l.onCurrentChange(A,te)},ae=A=>{xe(A),l.onSelectionChange(A)},Te=A=>{A!==e.current&&t("update:current",A)},xe=A=>{dt(A,e.selections)&&t("update:selections",A)},Me=()=>{n.doLayout()},Fe=()=>r.value,Ne=()=>a.value,Pe=A=>{a.value=A},Ge=A=>{if(!S.value||u.value==null||C.value)return;const te=w.value,_=Wa(e.datasource,s.sorter).findIndex(se=>Le(se,te)===A),G=Math.floor(_/u.value)+1;i.value!==G&&P({page:G})},mt=A=>{const{sorter:te,filter:B}=s,_=vo(te,e.request,o.value.request);A({page:i.value,limit:u.value,pages:Co(i.value,u.value,e.request,o.value.request),where:Object.assign({},s.where),orders:_,filters:yo(B),sorter:te,filter:B})};return de(()=>e.columns,A=>{A?h.value=ud(A,e.cacheKey,e.columnSortable):h.value.length&&(h.value=[])},{immediate:!0,deep:!0}),de(()=>e.datasource,()=>{P()},{deep:!0}),de(()=>e.loading,A=>{f.value=A}),de(()=>e.size,A=>{g.value=Ll(void 0,A,o.value.size)}),de(()=>e.current,A=>{n.setCurrentRowKey(Le(A,w.value))}),de(()=>e.selections,A=>{n.setSelectedRowKeys(It(A,w.value))}),de(()=>e.rowKey,()=>{w.value=bo(e.rowKey)}),de(o,A=>{g.value=Ll(e.cacheKey,e.size,A.size)},{deep:!0}),gt(()=>{e.loadOnCreated&&P()}),{...n,tableViewRef:r,tableData:a,tableSize:g,tableMaximized:m,tableIndex:b,paginationProps:S,tableProps:p,toolNames:x,toolExportConfig:M,toolPrintConfig:R,loadingProps:F,onRefresh:oe,onSizeChange:J,onColumnsChange:he,onMaximizedChange:Se,onPageSizeChange:L,onPageCurrentChange:V,reload:P,reloadTable:Me,getTableRef:Fe,getData:Ne,setData:Pe,goPageByRowKey:Ge,fetch:mt}}}),Cf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function pf(e,t,l,n,o,s){const r=K("TableTools"),a=K("EleToolbar"),i=K("EleVirtualTable"),u=K("EleDataTable"),c=K("ElePagination"),f=K("EleLoading");return D(),ne(f,We(Je(e.loadingProps)),{default:j(()=>[e.toolbar?(D(),ne(a,We(Oe({key:0},e.toolbar===!0?{}:e.toolbar)),{tools:j(()=>[Ee(e.$slots,"tools"),e.toolNames&&e.toolNames.length?(D(),ne(r,{key:0,tools:e.toolNames,size:e.tableSize,columns:e.columns,columnSortable:e.columnSortable,columnFixed:e.columnFixed,maximized:e.tableMaximized,cacheKey:e.cacheKey,locale:e.locale,selections:e.selections,pageData:e.tableData,spanMethod:e.spanMethod,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.tableIndex,fetch:e.fetch,exportConfig:e.toolExportConfig,printConfig:e.toolPrintConfig,onReload:e.onRefresh,"onUpdate:size":e.onSizeChange,"onUpdate:columns":e.onColumnsChange,"onUpdate:maximized":e.onMaximizedChange},it({_:2},[$e(Object.keys(e.$slots).filter(h=>!["default","toolbar","tools","footer","empty","append"].includes(h)),h=>({name:h,fn:j(g=>[Ee(e.$slots,h,We(Je(g||{})))])}))]),1032,["tools","size","columns","columnSortable","columnFixed","maximized","cacheKey","locale","selections","pageData","spanMethod","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","fetch","exportConfig","printConfig","onReload","onUpdate:size","onUpdate:columns","onUpdate:maximized"])):be("",!0)]),default:j(()=>[Ee(e.$slots,"toolbar")]),_:3},16)):be("",!0),Ee(e.$slots,"default"),e.virtual?(D(),ne(i,Oe({key:1},e.tableProps,{ref:"tableViewRef"}),it({_:2},[$e(Object.keys(e.$slots).filter(h=>!["default","toolbar","tools","footer","printTop","printBottom"].includes(h)),h=>({name:h,fn:j(g=>[Ee(e.$slots,h,We(Je(g||{})))])}))]),1040)):(D(),ne(u,Oe({key:2},e.tableProps,{ref:"tableViewRef"}),it({_:2},[$e(Object.keys(e.$slots).filter(h=>!["default","toolbar","tools","footer","printTop","printBottom"].includes(h)),h=>({name:h,fn:j(g=>[Ee(e.$slots,h,We(Je(g||{})))])}))]),1040)),e.paginationProps||e.$slots.footer?(D(),Y("div",{key:3,class:"ele-pro-table-footer",style:at(e.footerStyle)},[Ee(e.$slots,"footer"),e.paginationProps&&e.paginationProps.total?(D(),ne(c,Oe({key:0},e.paginationProps,{"onUpdate:currentPage":e.onPageCurrentChange,"onUpdate:pageSize":e.onPageSizeChange}),it({_:2},[$e(Object.keys(e.$slots).filter(h=>!["default","toolbar","tools","footer","empty","append","printTop","printBottom"].includes(h)),h=>({name:h,fn:j(g=>[Ee(e.$slots,h,We(Je(g||{})))])}))]),1040,["onUpdate:currentPage","onUpdate:pageSize"])):be("",!0)],4)):be("",!0)]),_:3},16)}const Hf=Cf(yf,[["render",pf]]);export{qu as a,Hf as i};
