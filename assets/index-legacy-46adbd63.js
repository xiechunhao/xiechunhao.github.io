System.register(["../js/index-legacy.f8cb7a75.js","./use-expose-legacy-7ae1465d.js","./index-legacy-9c7c096d.js","./index-legacy-90f92861.js","./on-popup-reopen-legacy-6b72697d.js"],(function(e,o){"use strict";var t,n,a,l,s,r,c,i,u,v,d,p,f,y,h,b,m,I,w,x,O,g,k,C,z,j,A,P,S,B,T,X,L,Y,E,H,R,V,D,K;return{setters:[e=>{t=e.bK,n=e.bm,a=e.A,l=e.z,s=e.P,r=e.D,c=e.bU,i=e.bV,u=e.b6,v=e.Z,d=e.bW,p=e.bs,f=e.X,y=e.C,h=e.y,b=e.d,m=e.H,I=e.I,w=e.a7,x=e.K,O=e.o,g=e.bX,k=e.bM,C=e.f,z=e.T,j=e.j,A=e.bY,P=e.U,S=e.bZ,B=e.R,T=e.S,X=e.V},e=>{L=e.u},e=>{Y=e.T,E=e.p,H=e.H,R=e.I},e=>{V=e.u,D=e.O},e=>{K=e.P}],execute:function(){function o(e,{args:o=[],done:a,canceled:l,error:s}){if(e){const r=e.apply(null,o);t(r)?r.then((e=>{e?a():l&&l()})).catch(s||n):r?a():l&&l()}else a()}e({c:o,u:U});const M=e("p",{show:Boolean,zIndex:a,overlay:l,duration:a,teleport:[String,Object],lockScroll:l,lazyRender:l,beforeClose:Function,overlayStyle:Object,overlayClass:s,transitionAppear:Boolean,closeOnClickOverlay:l});function U(){const e=r(0),o=r(0),t=r(0),n=r(0),a=r(0),l=r(0),s=r(""),c=r(!0),i=()=>{t.value=0,n.value=0,a.value=0,l.value=0,s.value="",c.value=!0};return{move:r=>{const i=r.touches[0];var u,v;t.value=(i.clientX<0?0:i.clientX)-e.value,n.value=i.clientY-o.value,a.value=Math.abs(t.value),l.value=Math.abs(n.value),(!s.value||a.value<10&&l.value<10)&&(s.value=(u=a.value,v=l.value,u>v?"horizontal":v>u?"vertical":"")),c.value&&(a.value>Y||l.value>Y)&&(c.value=!1)},start:t=>{i(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:i,startX:e,startY:o,deltaX:t,deltaY:n,offsetX:a,offsetY:l,direction:s,isVertical:()=>"vertical"===s.value,isHorizontal:()=>"horizontal"===s.value,isTap:c}}e("a",Object.keys(M));let Z=0;const $="van-overflow-hidden",q=()=>{var e;const{scopeId:o}=(null==(e=p())?void 0:e.vnode)||{};return o?{[o]:""}:null},F=f({},M,{round:Boolean,position:y("center"),closeIcon:y("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:y("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[G,W]=h("popup");var J=b({name:G,inheritAttrs:!1,props:F,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:a}){let l,s;const p=r(),f=r(),y=V((()=>e.show||!e.lazyRender)),h=m((()=>{const o={zIndex:p.value};return I(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),b=()=>{l||(l=!0,p.value=void 0!==e.zIndex?+e.zIndex:A(),t("open"))},X=()=>{l&&o(e.beforeClose,{done(){l=!1,t("close"),t("update:show",!1)}})},Y=o=>{t("clickOverlay",o),e.closeOnClickOverlay&&X()},M=()=>{if(e.overlay)return C(D,P({show:e.show,class:e.overlayClass,zIndex:p.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},q(),{onClick:Y}),{default:a["overlay-content"]})},F=e=>{t("clickCloseIcon",e),X()},G=()=>{if(e.closeable)return C(R,{role:"button",tabindex:0,name:e.closeIcon,class:[W("close-icon",e.closeIconPosition),H],classPrefix:e.iconPrefix,onClick:F},null)};let J;const N=()=>{J&&clearTimeout(J),J=setTimeout((()=>{t("opened")}))},Q=()=>t("closed"),_=e=>t("keydown",e),ee=y((()=>{var o;const{round:t,position:l,safeAreaInsetTop:s,safeAreaInsetBottom:r}=e;return B(C("div",P({ref:f,style:h.value,role:"dialog",tabindex:0,class:[W({round:t,[l]:l}),{"van-safe-area-top":s,"van-safe-area-bottom":r}],onKeydown:_},n,q()),[null==(o=a.default)?void 0:o.call(a),G()]),[[T,e.show]])})),oe=()=>{const{position:o,transition:t,transitionAppear:n}=e;return C(S,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:n,onAfterEnter:N,onAfterLeave:Q},{default:ee})};return v((()=>e.show),(e=>{e&&!l&&(b(),0===n.tabindex&&w((()=>{var e;null==(e=f.value)||e.focus()}))),!e&&l&&(l=!1,t("close"))})),L({popupRef:f}),function(e,o){const t=U(),n=o=>{t.move(o);const n=t.deltaY.value>0?"10":"01",a=d(o.target,e.value),{scrollHeight:l,offsetHeight:s,scrollTop:r}=a;let c="11";0===r?c=s>=l?"00":"01":r+s>=l&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(n,2)||E(o,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",n,{passive:!1}),Z||document.body.classList.add($),Z++},l=()=>{Z&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",n),Z--,Z||document.body.classList.remove($))},s=()=>o()&&l();c((()=>o()&&a())),i(s),u(s),v(o,(e=>{e?a():l()}))}(f,(()=>e.show&&e.lockScroll)),x("popstate",(()=>{e.closeOnPopstate&&(X(),s=!1)})),O((()=>{e.show&&b()})),g((()=>{s&&(t("update:show",!0),s=!1)})),i((()=>{e.show&&e.teleport&&(X(),s=!0)})),k(K,(()=>e.show)),()=>e.teleport?C(z,{to:e.teleport},{default:()=>[M(),oe()]}):C(j,null,[M(),oe()])}});e("P",X(J))}}}));
