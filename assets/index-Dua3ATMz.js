import{J as w,k as L,aH as M,g as N,i as U,bD as H,fl as J,eB as K,r as n,$ as Z,Z as q,ai as p,o as s,l as S,F as G,m as Q,c as h,w as g,e as W,t as I,a5 as V,a7 as E,bT as B,bU as O,a1 as X,b as k,a4 as R,a$ as Y,V as $}from"./index-BF2fBoPb.js";const _={modelValue:Array,type:String,hit:Boolean,color:String,size:String,effect:String,round:Boolean,placeholder:String,inputStyle:Object,inputTagStyle:Object,buttonStyle:Object,itemStyle:Object,validator:Function,beforeRemove:Function,tooltipProps:Object,readonly:Boolean,disabled:Boolean},x={"update:modelValue":e=>!0,change:e=>!0},ee=w({name:"EleEditTag",components:{ElTag:L,ElInput:M,ElIcon:N,EleTooltip:U,PlusOutlined:H,LoadingOutlined:J},props:_,emits:x,setup(e,{emit:i}){const{validateChange:m}=K(),b=n(null),c=n(null),u=n(!1),a=n(""),o=n(""),r=n(!1),t=n(!1),v=n(!1),T=l=>{i("update:modelValue",l),m(),i("change",l)},d=l=>{if(t.value=!1,u.value=!1,C(""),o.value="",r.value=!1,l){const f=e.modelValue?[...e.modelValue]:[];f.push(l),T(f)}},y=l=>{if(!e.modelValue)return;const f=[...e.modelValue];f.splice(l,1),T(f)},C=l=>{a.value=l},z=()=>{setTimeout(()=>{c.value&&c.value.focus()},0)},F=()=>{e.disabled||(t.value=!1,o.value="",u.value=!0,$(()=>{z()}))},P=l=>{if(typeof e.beforeRemove!="function"){y(l);return}const f=e.modelValue?e.modelValue[l]:void 0;e.beforeRemove(l,f).then(()=>{y(l)}).catch(()=>{})},j=()=>{if(a.value){if(typeof e.validator!="function"){d(a.value);return}r.value=!0,e.validator(a.value).then(()=>{d(a.value)}).catch(l=>{r.value=!1,l&&l.message!=null&&l.message!==""&&(o.value=l.message,u.value&&!v.value&&(t.value=!0)),$(()=>{z()})})}},A=()=>{t.value=!1,a.value||(u.value=!1,o.value="")},D=()=>{o.value&&!t.value&&u.value&&!v.value&&(t.value=!0)};return Z(()=>{v.value=!0,t.value=!1}),q(()=>{v.value=!1}),{inputTagRef:b,inputRef:c,isEdit:u,inputValue:a,errorMessage:o,loading:r,tooltipVisible:t,updateInputValue:C,handleAddClick:F,handleTagClose:P,handleInputChange:j,handleInputBlur:A,handleInputFocus:D}}}),le=(e,i)=>{const m=e.__vccOpts||e;for(const[b,c]of i)m[b]=c;return m},ae={key:0};function te(e,i,m,b,c,u){const a=p("ElTag"),o=p("PlusOutlined"),r=p("ElIcon"),t=p("LoadingOutlined"),v=p("ElInput"),T=p("EleTooltip");return s(),S("div",{class:R(["ele-edit-tag",{"is-large":e.size==="large"},{"is-small":e.size==="small"},{"is-disabled":e.disabled},{"is-readonly":e.readonly}])},[e.modelValue?(s(!0),S(G,{key:0},Q(e.modelValue,(d,y)=>(s(),h(a,{key:y+"-"+d,hit:e.hit,type:e.type,color:e.color,size:e.size,effect:e.effect,round:e.round,closable:!(e.readonly||e.disabled),disableTransitions:!0,style:V(e.itemStyle),onClose:C=>e.handleTagClose(y)},{default:g(()=>[W(I(d),1)]),_:2},1032,["hit","type","color","size","effect","round","closable","style","onClose"]))),128)):E("",!0),e.readonly?E("",!0):B((s(),h(a,{key:1,hit:e.hit,type:"info",size:e.size,round:e.round,disableTransitions:!0,class:"ele-edit-tag-add",style:V(e.buttonStyle),onClick:e.handleAddClick},{default:g(()=>[X(e.$slots,"placeholder",{},()=>[e.placeholder?(s(),S("span",ae,I(e.placeholder),1)):(s(),h(r,{key:1,class:"ele-edit-tag-add-icon"},{default:g(()=>[k(o)]),_:1}))])]),_:3},8,["hit","size","round","style","onClick"])),[[O,!e.isEdit]]),e.readonly?E("",!0):B((s(),h(a,{key:2,ref:"inputTagRef",size:e.size,round:e.round,disableTransitions:!0,class:R(["ele-edit-tag-input",{"is-error":!!e.errorMessage}]),style:V(e.inputTagStyle)},{default:g(()=>[k(v,{ref:"inputRef",disabled:e.loading,modelValue:e.inputValue,"onUpdate:modelValue":i[0]||(i[0]=d=>e.inputValue=d),validateEvent:!1,style:V(e.inputStyle),onChange:e.handleInputChange,onBlur:e.handleInputBlur,onFocus:e.handleInputFocus},{suffix:g(()=>[e.loading?(s(),h(r,{key:0,class:"is-loading"},{default:g(()=>[k(t)]),_:1})):E("",!0)]),_:1},8,["disabled","modelValue","style","onChange","onBlur","onFocus"])]),_:1},8,["size","round","class","style"])),[[O,e.isEdit]]),k(T,Y({offset:7,hideAfter:0,trigger:"click",triggerKeys:[],disabled:!e.tooltipVisible},e.tooltipProps||{},{virtualTriggering:!0,virtualRef:e.inputTagRef?e.inputTagRef.$el:void 0,content:e.errorMessage,visible:e.tooltipVisible}),null,16,["disabled","virtualRef","content","visible"])],2)}const ne=le(ee,[["render",te]]);export{ne as i};
