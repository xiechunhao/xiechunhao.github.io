import{a as o,L as l}from"./leaflet-src.347f22be.js";import{M as m,A as _}from"./index.a511ac44.js";import{d as F,p as b,a3 as w,o as v,c as x,_ as y}from"./framework.873b9d65.js";import"./commonjsHelpers.042e6b4d.js";(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(`.leaflet-grid-label .gridlabel-vert {
    margin-left: 8px;
    -webkit-transform: rotate(90deg);
    transform: rotate(90deg);
}

.leaflet-grid-label .gridlabel-vert,
.leaflet-grid-label .gridlabel-horiz {
    padding-left:2px;
    text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;
}`)),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var B=Object.defineProperty,M=(t,e,i)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,u=(t,e,i)=>(M(t,typeof e!="symbol"?e+"":e,i),i);const s=class extends o.LayerGroup{constructor(t){super(),u(this,"options",{redraw:"moveend",minDistance:100}),u(this,"lineStyle",{stroke:!0,color:"#111",opacity:.6,weight:1,interactive:!1}),u(this,"_bounds"),o.Util.setOptions(this,t)}onAdd(t){return this._map=t,this.redraw(),this._map.on("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(t.addLayer,t),this}onRemove(t){return t.off("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(this.removeLayer,this),this}redraw(){return this._bounds=this._map.getBounds().pad(.5),this.clearLayers(),this.constructLines(),this}constructLines(){const t=this._map.getBounds(),e=this._map.getZoom();this._bounds=s.bboxIntersect(t,[[-85,-180],[85,180]]);const i=this._map.getBounds;try{this._map.getBounds=function(){return s.bboxIntersect(i.apply(this),[[-85,-180],[85,180]])};const a=this._map.project(t.getCenter(),e),c=s.getGridDivisor(this._map.unproject(a.add([this.options.minDistance/2,0]),e).lng-this._map.unproject(a.subtract([this.options.minDistance/2,0]),e).lng,!1),f=Math.max(t.getWest(),-180),L=Math.min(t.getEast(),180);for(let n=s.fixFloatingPoint(Math.ceil(f/c)*c);n<=L;n+=c)this.addLayer(this.buildXLine(n)),this.addLayer(this.buildLabel("gridlabel-horiz",s.fixFloatingPoint(n)));if(t.getNorth()>0){let n=Math.max(0,t.getSouth()),d=!0;for(;n<t.getNorth()&&n<85;){const g=this._map.project([n,t.getCenter().lng],e),h=this._map.unproject(g.subtract([0,this.options.minDistance]),e),r=s.getGridDivisor(h.lat-n,!0);n=s.fixFloatingPoint(d?Math.ceil(n/r)*r:Math.ceil(h.lat/r)*r),d=!1,this.addLayer(this.buildYLine(n)),this.addLayer(this.buildLabel("gridlabel-vert",n))}}if(t.getSouth()<0){let n=Math.min(0,t.getNorth()),d=!0;for(;n>t.getSouth()&&n>-85;){const g=this._map.project([n,t.getCenter().lng],e),h=this._map.unproject(g.add([0,this.options.minDistance]),e),r=s.getGridDivisor(s.fixFloatingPoint(n-h.lat),!0);n=s.fixFloatingPoint(d?Math.floor(n/r)*r:Math.floor(h.lat/r)*r),d=!1,this.addLayer(this.buildYLine(n)),this.addLayer(this.buildLabel("gridlabel-vert",n))}}}finally{this._map.getBounds=i}}buildXLine(t){const e=new o.LatLng(this._bounds.getSouth(),t),i=new o.LatLng(this._bounds.getNorth(),t);return new o.Polyline([e,i],this.lineStyle)}buildYLine(t){const e=new o.LatLng(t,this._bounds.getWest()),i=new o.LatLng(t,this._bounds.getEast());return new o.Polyline([e,i],this.lineStyle)}buildLabel(t,e){const i=this._map.getBounds().pad(-.003);let a;return t=="gridlabel-horiz"?a=new o.LatLng(i.getNorth(),e):a=new o.LatLng(e,i.getWest()),o.marker(a,{interactive:!1,icon:o.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="'+t+'">'+e+"&#8239;Â°</div>"})})}static fixFloatingPoint(t){return s.round(t,12)}static round(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}static getGridDivisor(t,e){if(t<=0||!isFinite(t))throw new Error("Invalid number "+t);if(e&&t>=5)return 5;if(t<=10){let i=1;for(;t>1;)i*=10,t/=10;for(;t<=.1;)i/=10,t*=10;return t==.1?s.fixFloatingPoint(.1*i):t<=.2?s.fixFloatingPoint(.2*i):t<=.5?s.fixFloatingPoint(.5*i):i}else return t<=30?30:t<=45?45:t<=60?60:90}static bboxIntersect(t,e){const i=t instanceof o.LatLngBounds?t:o.latLngBounds(t),a=e instanceof o.LatLngBounds?e:o.latLngBounds(e);return o.latLngBounds([[Math.max(i.getSouth(),a.getSouth()),Math.max(i.getWest(),a.getWest())],[Math.min(i.getNorth(),a.getNorth()),Math.min(i.getEast(),a.getEast())]])}};let p=s;u(p,"niceRound",s.getGridDivisor);const P={id:"map"},S=F({__name:"index",setup(t){let e=null;const i=()=>{e=l.map("map",{zoomControl:!1,crs:l.CRS.EPSG3857,center:[22.548857,114.064839],minZoom:1,maxZoom:18,zoom:10,maxBounds:l.latLngBounds(l.latLng(-180,-180),l.latLng(180,180))}),l.tileLayer(m,{noWrap:!0,attribution:_}).addTo(e),new p().addTo(e)};return b(()=>{i()}),w(()=>{e&&(e.remove(),e=null)}),(a,c)=>(v(),x("div",P))}});const j=y(S,[["__scopeId","data-v-543b8bf9"]]);export{j as default};
