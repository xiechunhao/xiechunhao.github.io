import{c as ft,S as z,F as _e,I as be,a as Se,T as ke}from"./Vector.f72cf874.js";import{G as X,M as gt,a as mt}from"./GeometryCollection.2da265b8.js";import{a0 as yt,A as N,aM as j,P as ve,g as St,ap as $,ba as ht,cJ as Et}from"./reproj.50e0d4ab.js";import{L as Xe}from"./LineString.e8af5305.js";import{M as ze}from"./MultiLineString.5776de5d.js";import{m as f,e as c,X as pt,t as we,d as U,p as y,u as te,v as ne,r as L,c as ae,a as Oe,q as O,b as p,o as ee,x as H,f as g,y as Y,h as E,O as F,z as Ne,A as Rt,w as M,l as k,B as Z,s as G}from"./xsd.5dc9ad32.js";import{t as Be}from"./Feature.4c59703c.js";const D=["http://www.google.com/kml/ext/2.2"],u=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],At="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Me={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},_t=f(u,{ExtendedData:it,Region:rt,MultiGeometry:c(tt,"geometry"),LineString:c(je,"geometry"),LinearRing:c(et,"geometry"),Point:c(nt,"geometry"),Polygon:c(ot,"geometry"),Style:c(xe),StyleMap:sn,address:c(L),description:c(L),name:c(L),open:c(Y),phoneNumber:c(L),styleUrl:c(Ve),visibility:c(Y)},f(D,{MultiTrack:c(Ht,"geometry"),Track:c(Je,"geometry")})),Nt=f(u,{ExtendedData:it,Region:rt,Link:En,address:c(L),description:c(L),name:c(L),open:c(Y),phoneNumber:c(L),visibility:c(Y)}),Lt=f(u,{href:c(Qe)}),Pt=f(u,{Altitude:c(E),Longitude:c(E),Latitude:c(E),Tilt:c(E),AltitudeMode:c(L),Heading:c(E),Roll:c(E)}),Ke=f(u,{LatLonAltBox:dn,Lod:gn}),xt=f(u,["Document","Placemark"]),It=f(u,{Document:g(xn),Placemark:g(at)});let B,ie=null,he,q,W,J,se,Ee=null,Le,pe=null,Re,v=null,Ce=null,Ae=null;function le(i){return 32/Math.min(i[0],i[1])}function Tt(){B=[255,255,255,1],ie=new _e({color:B}),he=[20,2],q="pixels",W="pixels",J=[64,64],se="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Ee=new be({anchor:he,anchorOrigin:"bottom-left",anchorXUnits:q,anchorYUnits:W,crossOrigin:"anonymous",rotation:0,scale:le(J),size:J,src:se}),Le="NO_IMAGE",pe=new Se({color:B,width:1}),Re=new Se({color:[51,51,51,1],width:2}),v=new ke({font:"bold 16px Helvetica",fill:ie,stroke:Re,scale:.8}),Ce=new z({fill:ie,image:Ee,text:v,stroke:pe,zIndex:0}),Ae=[Ce]}let oe;function Ft(i){return i}class wt extends pt{constructor(e){super(),e=e||{},Ae||Tt(),this.dataProjection=yt("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:Ae,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Ft,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=f(u,{Document:we(this.readDocumentOrFolder_,this),Folder:we(this.readDocumentOrFolder_,this),Placemark:U(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),o=y([],n,e,t,this);if(o)return o}readPlacemark_(e,t){const n=y({geometry:null},_t,e,t,this);if(!n)return;const o=new ft,r=e.getAttribute("id");r!==null&&o.setId(r);const s=t[0],l=n.geometry;if(l&&Be(l,!1,s),o.setGeometry(l),delete n.geometry,this.extractStyles_){const a=n.Style,d=n.styleUrl,m=Mt(a,d,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);o.setStyle(m)}return delete n.Style,o.setProperties(n,!0),o}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const o=xe.call(this,e,t);if(o){let r,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?r=new URL("#"+n,s).href:r="#"+n,this.sharedStyles_[r]=o}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const o=qe.call(this,e,t);if(!o)return;let r,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?r=new URL("#"+n,s).href:r="#"+n,this.sharedStyles_[r]=o}readFeatureFromNode(e,t){if(!u.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!u.includes(e.namespaceURI))return[];let n;const o=e.localName;if(o=="Document"||o=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(o=="Placemark"){const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r?[r]:[]}if(o=="kml"){n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling){const s=this.readFeaturesFromNode(r,t);s&&N(n,s)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=te(e);return this.readNameFromDocument(t)}return ne(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(u.includes(t.namespaceURI)&&t.localName=="name")return L(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(u.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const o=this.readNameFromNode(t);if(o)return o}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=te(e);N(t,this.readNetworkLinksFromDocument(n))}else ne(e)?N(t,this.readNetworkLinksFromDocument(e)):N(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&N(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(u.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const o=y({},Nt,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;u.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&N(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=te(e);N(t,this.readRegionFromDocument(n))}else ne(e)?N(t,this.readRegionFromDocument(e)):N(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&N(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(u.includes(n.namespaceURI)&&n.localName=="Region"){const o=y({},Ke,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;u.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&N(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=te(e);N(t,this.readCameraFromDocument(n))}else ne(e)?N(t,this.readCameraFromDocument(e)):N(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&N(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(u.includes(n.namespaceURI)&&n.localName==="Camera"){const o=y({},Pt,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;u.includes(n.namespaceURI)&&(o==="Document"||o==="Folder"||o==="Placemark"||o==="kml")&&N(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=ae(u[4],"kml"),o="http://www.w3.org/2000/xmlns/";n.setAttributeNS(o,"xmlns:gx",D[0]),n.setAttributeNS(o,"xmlns:xsi",Oe),n.setAttributeNS(Oe,"xsi:schemaLocation",At);const r={node:n},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);const l=xt[n.namespaceURI],a=O(s,l);return p(r,It,F,a,[t],l,this),n}}function Ot(i,e){const t=[0,0];let n="start";const o=i.getImage();if(o){const l=o.getSize();if(l&&l.length==2){const a=o.getScaleArray(),d=o.getAnchor();t[0]=a[0]*(l[0]-d[0]),t[1]=a[1]*(l[1]/2-d[1]),n="left"}}let r=i.getText();return r?(r=r.clone(),r.setFont(r.getFont()||v.getFont()),r.setScale(r.getScale()||v.getScale()),r.setFill(r.getFill()||v.getFill()),r.setStroke(r.getStroke()||Re)):r=v.clone(),r.setText(e),r.setOffsetX(t[0]),r.setOffsetY(t[1]),r.setTextAlign(n),new z({image:o,text:r})}function Mt(i,e,t,n,o){return function(r,s){let l=o,a="",d=[];if(l){const S=r.getGeometry();if(S)if(S instanceof X)d=S.getGeometriesArrayRecursive().filter(function(h){const R=h.getType();return R==="Point"||R==="MultiPoint"}),l=d.length>0;else{const h=S.getType();l=h==="Point"||h==="MultiPoint"}}l&&(a=r.get("name"),l=l&&!!a,l&&/&[^&]+;/.test(a)&&(oe||(oe=document.createElement("textarea")),oe.innerHTML=a,a=oe.value));let m=t;if(i?m=i:e&&(m=Ze(e,t,n)),l){const S=Ot(m[0],a);if(d.length>0){S.setGeometry(new X(d));const h=new z({geometry:m[0].getGeometry(),image:null,fill:m[0].getFill(),stroke:m[0].getStroke(),text:null});return[S,h].concat(m.slice(1))}return S}return m}}function Ze(i,e,t){return Array.isArray(i)?i:typeof i=="string"?Ze(t[i],e,t):e}function ce(i){const e=H(i,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function He(i){let e=H(i,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let o;for(;o=n.exec(e);){const r=parseFloat(o[1]),s=parseFloat(o[2]),l=o[3]?parseFloat(o[3]):0;t.push(r,s,l),e=e.substr(o[0].length)}if(e==="")return t}function Qe(i){const e=H(i,!1).trim();let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Ve(i){const e=H(i,!1).trim().replace(/^(?!.*#)/,"#");let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Ct(i){const e=i.getAttribute("xunits"),t=i.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(i.getAttribute("x")),xunits:Me[e],y:parseFloat(i.getAttribute("y")),yunits:Me[t],origin:n}}function $e(i){return E(i)}const Dt=f(u,{Pair:rn});function qe(i,e){return y(void 0,Dt,i,e,this)}const Ut=f(u,{Icon:c($t),color:c(ce),heading:c(E),hotSpot:c(Ct),scale:c($e)});function Yt(i,e){const t=y({},Ut,i,e);if(!t)return;const n=e[e.length-1],o="Icon"in t?t.Icon:{},r=!("Icon"in t)||Object.keys(o).length>0;let s;const l=o.href;l?s=l:r&&(s=se);let a,d,m,S="bottom-left";const h=t.hotSpot;h?(a=[h.x,h.y],d=h.xunits,m=h.yunits,S=h.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(a=he,d=q,m=W):s.includes("arrow-reverse")?(a=[54,42],d=q,m=W):s.includes("paddle")&&(a=[32,1],d=q,m=W));let R;const A=o.x,C=o.y;A!==void 0&&C!==void 0&&(R=[A,C]);let _;const P=o.w,I=o.h;P!==void 0&&I!==void 0&&(_=[P,I]);let T;const x=t.heading;x!==void 0&&(T=Et(x));const Q=t.scale,b=t.color;if(r){s==se&&(_=J);const w=new be({anchor:a,anchorOrigin:S,anchorXUnits:d,anchorYUnits:m,crossOrigin:this.crossOrigin_,offset:R,offsetOrigin:"bottom-left",rotation:T,scale:Q,size:_,src:this.iconUrlFunction_(s),color:b}),Ie=w.getScaleArray()[0],fe=w.getSize();if(fe===null){const V=w.getImageState();if(V===$.IDLE||V===$.LOADING){const Te=function(){const Fe=w.getImageState();if(!(Fe===$.IDLE||Fe===$.LOADING)){const ge=w.getSize();if(ge&&ge.length==2){const dt=le(ge);w.setScale(Ie*dt)}w.unlistenImageChange(Te)}};w.listenImageChange(Te),V===$.IDLE&&w.load()}}else if(fe.length==2){const V=le(fe);w.setScale(Ie*V)}n.imageStyle=w}else n.imageStyle=Le}const Gt=f(u,{color:c(ce),scale:c($e)});function bt(i,e){const t=y({},Gt,i,e);if(!t)return;const n=e[e.length-1],o=new ke({fill:new _e({color:"color"in t?t.color:B}),scale:t.scale});n.textStyle=o}const kt=f(u,{color:c(ce),width:c(E)});function vt(i,e){const t=y({},kt,i,e);if(!t)return;const n=e[e.length-1],o=new Se({color:"color"in t?t.color:B,width:"width"in t?t.width:1});n.strokeStyle=o}const Xt=f(u,{color:c(ce),fill:c(Y),outline:c(Y)});function zt(i,e){const t=y({},Xt,i,e);if(!t)return;const n=e[e.length-1],o=new _e({color:"color"in t?t.color:B});n.fillStyle=o;const r=t.fill;r!==void 0&&(n.fill=r);const s=t.outline;s!==void 0&&(n.outline=s)}const Bt=f(u,{coordinates:Ne(He)});function We(i,e){return y(null,Bt,i,e)}function Kt(i,e){const n=e[e.length-1].coordinates,o=H(i,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(o);if(s){const l=parseFloat(s[1]),a=parseFloat(s[2]),d=parseFloat(s[3]);n.push([l,a,d])}else n.push([])}const Zt=f(D,{Track:U(Je)});function Ht(i,e){const t=y([],Zt,i,e);if(t)return new ze(t)}const Qt=f(u,{when:pn},f(D,{coord:Kt}));function Je(i,e){const t=y({coordinates:[],whens:[]},Qt,i,e);if(!t)return;const n=[],o=t.coordinates,r=t.whens;for(let s=0,l=Math.min(o.length,r.length);s<l;++s)o[s].length==3&&n.push(o[s][0],o[s][1],o[s][2],r[s]);return new Xe(n,"XYZM")}const Vt=f(u,{href:c(Qe)},f(D,{x:c(E),y:c(E),w:c(E),h:c(E)}));function $t(i,e){const t=y({},Vt,i,e);return t||null}const qt=f(u,{coordinates:Ne(He)});function Pe(i,e){return y(null,qt,i,e)}const ue=f(u,{extrude:c(Y),tessellate:c(Y),altitudeMode:c(L)});function je(i,e){const t=y({},ue,i,e),n=Pe(i,e);if(n){const o=new Xe(n,"XYZ");return o.setProperties(t,!0),o}}function et(i,e){const t=y({},ue,i,e),n=Pe(i,e);if(n){const o=new ve(n,"XYZ",[n.length]);return o.setProperties(t,!0),o}}const Wt=f(u,{LineString:U(je),LinearRing:U(et),MultiGeometry:U(tt),Point:U(nt),Polygon:U(ot)});function tt(i,e){const t=y([],Wt,i,e);if(!t)return null;if(t.length===0)return new X(t);let n,o=!0;const r=t[0].getType();let s;for(let l=1,a=t.length;l<a;++l)if(s=t[l],s.getType()!=r){o=!1;break}if(o){let l,a;if(r=="Point"){const d=t[0];l=d.getLayout(),a=d.getFlatCoordinates();for(let m=1,S=t.length;m<S;++m)s=t[m],N(a,s.getFlatCoordinates());n=new gt(a,l),me(n,t)}else r=="LineString"?(n=new ze(t),me(n,t)):r=="Polygon"?(n=new mt(t),me(n,t)):r=="GeometryCollection"?n=new X(t):j(!1,37)}else n=new X(t);return n}function nt(i,e){const t=y({},ue,i,e),n=Pe(i,e);if(n){const o=new St(n,"XYZ");return o.setProperties(t,!0),o}}const Jt=f(u,{innerBoundaryIs:yn,outerBoundaryIs:hn});function ot(i,e){const t=y({},ue,i,e),n=y([null],Jt,i,e);if(n&&n[0]){const o=n[0],r=[o.length];for(let l=1,a=n.length;l<a;++l)N(o,n[l]),r.push(o.length);const s=new ve(o,"XYZ",r);return s.setProperties(t,!0),s}}const jt=f(u,{IconStyle:Yt,LabelStyle:bt,LineStyle:vt,PolyStyle:zt});function xe(i,e){const t=y({},jt,i,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:ie;const o=t.fill;o!==void 0&&!o&&(n=null);let r;"imageStyle"in t?t.imageStyle!=Le&&(r=t.imageStyle):r=Ee;const s="textStyle"in t?t.textStyle:v,l="strokeStyle"in t?t.strokeStyle:pe,a=t.outline;return a!==void 0&&!a?[new z({geometry:function(d){const m=d.getGeometry(),S=m.getType();if(S==="GeometryCollection"){const h=m;return new X(h.getGeometriesArrayRecursive().filter(function(R){const A=R.getType();return A!=="Polygon"&&A!=="MultiPolygon"}))}if(S!=="Polygon"&&S!=="MultiPolygon")return m},fill:n,image:r,stroke:l,text:s,zIndex:void 0}),new z({geometry:function(d){const m=d.getGeometry(),S=m.getType();if(S==="GeometryCollection"){const h=m;return new X(h.getGeometriesArrayRecursive().filter(function(R){const A=R.getType();return A==="Polygon"||A==="MultiPolygon"}))}if(S==="Polygon"||S==="MultiPolygon")return m},fill:n,stroke:null,zIndex:void 0})]:[new z({fill:n,image:r,stroke:l,text:s,zIndex:void 0})]}function me(i,e){const t=e.length,n=new Array(e.length),o=new Array(e.length),r=new Array(e.length);let s,l,a;s=!1,l=!1,a=!1;for(let d=0;d<t;++d){const m=e[d];n[d]=m.get("extrude"),o[d]=m.get("tessellate"),r[d]=m.get("altitudeMode"),s=s||n[d]!==void 0,l=l||o[d]!==void 0,a=a||r[d]}s&&i.set("extrude",n),l&&i.set("tessellate",o),a&&i.set("altitudeMode",r)}const en=f(u,{displayName:c(L),value:c(L)});function tn(i,e){const t=i.getAttribute("name");ee(en,i,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const nn=f(u,{Data:tn,SchemaData:an});function it(i,e){ee(nn,i,e)}function rt(i,e){ee(Ke,i,e)}const on=f(u,{Style:c(xe),key:c(L),styleUrl:c(Ve)});function rn(i,e){const t=y({},on,i,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const o=t.styleUrl;o&&(e[e.length-1]=o);const r=t.Style;r&&(e[e.length-1]=r)}}function sn(i,e){const t=qe.call(this,i,e);if(!t)return;const n=e[e.length-1];Array.isArray(t)?n.Style=t:typeof t=="string"?n.styleUrl=t:j(!1,38)}const ln=f(u,{SimpleData:cn});function an(i,e){ee(ln,i,e)}function cn(i,e){const t=i.getAttribute("name");if(t!==null){const n=L(i),o=e[e.length-1];o[t]=n}}const un=f(u,{altitudeMode:c(L),minAltitude:c(E),maxAltitude:c(E),north:c(E),south:c(E),east:c(E),west:c(E)});function dn(i,e){const t=y({},un,i,e);if(!t)return;const n=e[e.length-1],o=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=o,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const fn=f(u,{minLodPixels:c(E),maxLodPixels:c(E),minFadeExtent:c(E),maxFadeExtent:c(E)});function gn(i,e){const t=y({},fn,i,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const mn=f(u,{LinearRing:U(We)});function yn(i,e){const t=y([],mn,i,e);t.length>0&&e[e.length-1].push(...t)}const Sn=f(u,{LinearRing:Ne(We)});function hn(i,e){const t=y(void 0,Sn,i,e);if(t){const n=e[e.length-1];n[0]=t}}function En(i,e){ee(Lt,i,e)}function pn(i,e){const n=e[e.length-1].whens,o=H(i,!1),r=Date.parse(o);n.push(isNaN(r)?0:r)}function de(i,e){const t=ht(e),o=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let r=0;r<4;++r){const s=Math.floor(o[r]).toString(16);o[r]=s.length==1?"0"+s:s}M(i,o.join(""))}function Rn(i,e,t){const n=t[t.length-1],o=n.layout,r=n.stride;let s;o=="XY"||o=="XYM"?s=2:o=="XYZ"||o=="XYZM"?s=3:j(!1,34);const l=e.length;let a="";if(l>0){a+=e[0];for(let d=1;d<s;++d)a+=","+e[d];for(let d=r;d<l;d+=r){a+=" "+e[d];for(let m=1;m<s;++m)a+=","+e[d+m]}}M(i,a)}const re=f(u,{Data:g(An),value:g(Nn),displayName:g(_n)});function An(i,e,t){i.setAttribute("name",e.name);const n={node:i},o=e.value;typeof o=="object"?(o!==null&&o.displayName&&p(n,re,F,[o.displayName],t,["displayName"]),o!==null&&o.value&&p(n,re,F,[o.value],t,["value"])):p(n,re,F,[o],t,["value"])}function _n(i,e){Rt(i,e)}function Nn(i,e){M(i,e)}const Ln=f(u,{Placemark:g(at)}),Pn=function(i,e,t){const n=e[e.length-1].node;return ae(n.namespaceURI,"Placemark")};function xn(i,e,t){p({node:i},Ln,Pn,e,t,void 0,this)}const In=G("Data");function Tn(i,e,t){const n={node:i},o=e.names,r=e.values,s=o.length;for(let l=0;l<s;l++)p(n,re,In,[{name:o[l],value:r[l]}],t)}const De=f(u,["href"],f(D,["x","y","w","h"])),Ue=f(u,{href:g(M)},f(D,{x:g(k),y:g(k),w:g(k),h:g(k)})),Fn=function(i,e,t){return ae(D[0],"gx:"+t)};function wn(i,e,t){const n={node:i},o=t[t.length-1].node;let r=De[o.namespaceURI],s=O(e,r);p(n,Ue,F,s,t,r),r=De[D[0]],s=O(e,r),p(n,Ue,Fn,s,t,r)}const On=f(u,["scale","heading","Icon","color","hotSpot"]),Mn=f(u,{Icon:g(wn),color:g(de),heading:g(k),hotSpot:g(ro),scale:g(ut)});function Cn(i,e,t){const n={node:i},o={},r=e.getSrc(),s=e.getSize(),l=e.getImageSize(),a={href:r};if(s){a.w=s[0],a.h=s[1];const _=e.getAnchor(),P=e.getOrigin();if(P&&l&&P[0]!==0&&P[1]!==s[1]&&(a.x=P[0],a.y=l[1]-(P[1]+s[1])),_&&(_[0]!==s[0]/2||_[1]!==s[1]/2)){const I={x:_[0],xunits:"pixels",y:s[1]-_[1],yunits:"pixels"};o.hotSpot=I}}o.Icon=a;let d=e.getScaleArray()[0],m=s;if(m===null&&(m=J),m.length==2){const _=le(m);d=d/_}d!==1&&(o.scale=d);const S=e.getRotation();S!==0&&(o.heading=S);const h=e.getColor();h&&(o.color=h);const R=t[t.length-1].node,A=On[R.namespaceURI],C=O(o,A);p(n,Mn,F,C,t,A)}const Dn=f(u,["color","scale"]),Un=f(u,{color:g(de),scale:g(ut)});function Yn(i,e,t){const n={node:i},o={},r=e.getFill();r&&(o.color=r.getColor());const s=e.getScale();s&&s!==1&&(o.scale=s);const l=t[t.length-1].node,a=Dn[l.namespaceURI],d=O(o,a);p(n,Un,F,d,t,a)}const Gn=f(u,["color","width"]),bn=f(u,{color:g(de),width:g(k)});function kn(i,e,t){const n={node:i},o={color:e.getColor(),width:Number(e.getWidth())||1},r=t[t.length-1].node,s=Gn[r.namespaceURI],l=O(o,s);p(n,bn,F,l,t,s)}const vn={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},st=function(i,e,t){if(i){const n=e[e.length-1].node;return ae(n.namespaceURI,vn[i.getType()])}},Xn=G("Point"),zn=G("LineString"),Bn=G("LinearRing"),Kn=G("Polygon"),Zn=f(u,{LineString:g(K),Point:g(K),Polygon:g(ct),GeometryCollection:g(lt)});function lt(i,e,t){const n={node:i},o=e.getType();let r=[],s;o==="GeometryCollection"?(e.getGeometriesArrayRecursive().forEach(function(l){const a=l.getType();a==="MultiPoint"?r=r.concat(l.getPoints()):a==="MultiLineString"?r=r.concat(l.getLineStrings()):a==="MultiPolygon"?r=r.concat(l.getPolygons()):a==="Point"||a==="LineString"||a==="Polygon"?r.push(l):j(!1,39)}),s=st):o==="MultiPoint"?(r=e.getPoints(),s=Xn):o==="MultiLineString"?(r=e.getLineStrings(),s=zn):o==="MultiPolygon"?(r=e.getPolygons(),s=Kn):j(!1,39),p(n,Zn,s,r,t)}const Hn=f(u,{LinearRing:g(K)});function Ye(i,e,t){p({node:i},Hn,Bn,[e],t)}const ye=f(u,{ExtendedData:g(Tn),MultiGeometry:g(lt),LineString:g(K),LinearRing:g(K),Point:g(K),Polygon:g(ct),Style:g(io),address:g(M),description:g(M),name:g(M),open:g(Z),phoneNumber:g(M),styleUrl:g(M),visibility:g(Z)}),Qn=f(u,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Vn=G("ExtendedData");function at(i,e,t){const n={node:i};e.getId()&&i.setAttribute("id",e.getId());const o=e.getProperties(),r={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};r[e.getGeometryName()]=1;const s=Object.keys(o||{}).sort().filter(function(R){return!r[R]}),l=e.getStyleFunction();if(l){const R=l(e,0);if(R){const A=Array.isArray(R)?R:[R];let C=A;if(e.getGeometry()&&(C=A.filter(function(_){const P=_.getGeometryFunction()(e);if(P){const I=P.getType();return I==="GeometryCollection"?P.getGeometriesArrayRecursive().filter(function(T){const x=T.getType();return x==="Point"||x==="MultiPoint"}).length:I==="Point"||I==="MultiPoint"}})),this.writeStyles_){let _=A,P=A;e.getGeometry()&&(_=A.filter(function(I){const T=I.getGeometryFunction()(e);if(T){const x=T.getType();return x==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(Q){const b=Q.getType();return b==="LineString"||b==="MultiLineString"}).length:x==="LineString"||x==="MultiLineString"}}),P=A.filter(function(I){const T=I.getGeometryFunction()(e);if(T){const x=T.getType();return x==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(Q){const b=Q.getType();return b==="Polygon"||b==="MultiPolygon"}).length:x==="Polygon"||x==="MultiPolygon"}})),o.Style={pointStyles:C,lineStyles:_,polyStyles:P}}if(C.length&&o.name===void 0){const _=C[0].getText();_&&(o.name=_.getText())}}}const a=t[t.length-1].node,d=Qn[a.namespaceURI],m=O(o,d);if(p(n,ye,F,m,t,d),s.length>0){const R=O(o,s);p(n,ye,Vn,[{names:s,values:R}],t)}const S=t[0];let h=e.getGeometry();h&&(h=Be(h,!0,S)),p(n,ye,st,[h],t)}const $n=f(u,["extrude","tessellate","altitudeMode","coordinates"]),qn=f(u,{extrude:g(Z),tessellate:g(Z),altitudeMode:g(M),coordinates:g(Rn)});function K(i,e,t){const n=e.getFlatCoordinates(),o={node:i};o.layout=e.getLayout(),o.stride=e.getStride();const r=e.getProperties();r.coordinates=n;const s=t[t.length-1].node,l=$n[s.namespaceURI],a=O(r,l);p(o,qn,F,a,t,l)}const Wn=f(u,["color","fill","outline"]),Ge=f(u,{outerBoundaryIs:g(Ye),innerBoundaryIs:g(Ye)}),Jn=G("innerBoundaryIs"),jn=G("outerBoundaryIs");function ct(i,e,t){const n=e.getLinearRings(),o=n.shift(),r={node:i};p(r,Ge,Jn,n,t),p(r,Ge,jn,[o],t)}const eo=f(u,{color:g(de),fill:g(Z),outline:g(Z)});function to(i,e,t){const n={node:i},o=e.getFill(),r=e.getStroke(),s={color:o?o.getColor():void 0,fill:o?void 0:!1,outline:r?void 0:!1},l=t[t.length-1].node,a=Wn[l.namespaceURI],d=O(s,a);p(n,eo,F,d,t,a)}function ut(i,e){k(i,Math.round(e*1e6)/1e6)}const no=f(u,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),oo=f(u,{IconStyle:g(Cn),LabelStyle:g(Yn),LineStyle:g(kn),PolyStyle:g(to)});function io(i,e,t){const n={node:i},o={};if(e.pointStyles.length){const a=e.pointStyles[0].getText();a&&(o.LabelStyle=a);const d=e.pointStyles[0].getImage();d&&typeof d.getSrc=="function"&&(o.IconStyle=d)}if(e.lineStyles.length){const a=e.lineStyles[0].getStroke();a&&(o.LineStyle=a)}if(e.polyStyles.length){const a=e.polyStyles[0].getStroke();a&&!o.LineStyle&&(o.LineStyle=a),o.PolyStyle=e.polyStyles[0]}const r=t[t.length-1].node,s=no[r.namespaceURI],l=O(o,s);p(n,oo,F,l,t,s)}function ro(i,e){i.setAttribute("x",String(e.x)),i.setAttribute("y",String(e.y)),i.setAttribute("xunits",e.xunits),i.setAttribute("yunits",e.yunits)}const mo=wt;export{mo as K};
