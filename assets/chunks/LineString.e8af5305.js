import{cr as A,bH as S,c7 as x,A as L,ca as D,cs as d,ct as w,cu as P,bh as X,cv as Y,cw as E,cc as b}from"./reproj.50e0d4ab.js";import{l as F}from"./Vector.f72cf874.js";function q(e,t,n,i,s,a,h){let l,u;const c=(n-t)/i;if(c===1)l=t;else if(c===2)l=t,u=s;else if(c!==0){let r=e[t],p=e[t+1],o=0;const f=[0];for(let M=t+i;M<n;M+=i){const v=e[M],y=e[M+1];o+=Math.sqrt((v-r)*(v-r)+(y-p)*(y-p)),f.push(o),r=v,p=y}const R=s*o,g=A(f,R);g<0?(u=(R-f[-g-2])/(f[-g-1]-f[-g-2]),l=t+(-g-2)*i):l=t+g*i}h=h>1?h:2,a=a||new Array(h);for(let r=0;r<h;++r)a[r]=l===void 0?NaN:u===void 0?e[l+r]:S(e[l+r],e[l+i+r],u);return a}function _(e,t,n,i,s,a){if(n==t)return null;let h;if(s<e[t+i-1])return a?(h=e.slice(t,t+i),h[i-1]=s,h):null;if(e[n-1]<s)return a?(h=e.slice(n-i,n),h[i-1]=s,h):null;if(s==e[t+i-1])return e.slice(t,t+i);let l=t/i,u=n/i;for(;l<u;){const o=l+u>>1;s<e[(o+1)*i-1]?u=o:l=o+1}const c=e[l*i-1];if(s==c)return e.slice((l-1)*i,(l-1)*i+i);const r=e[(l+1)*i-1],p=(s-c)/(r-c);h=[];for(let o=0;o<i-1;++o)h.push(S(e[(l-1)*i+o],e[l*i+o],p));return h.push(s),h}function k(e,t,n,i,s,a,h){if(h)return _(e,t,n[n.length-1],i,s,a);let l;if(s<e[i-1])return a?(l=e.slice(0,i),l[i-1]=s,l):null;if(e[e.length-1]<s)return a?(l=e.slice(e.length-i),l[i-1]=s,l):null;for(let u=0,c=n.length;u<c;++u){const r=n[u];if(t!=r){if(s<e[t+i-1])return null;if(s<=e[r-1])return _(e,t,r,i,s,!1);t=r}}return null}class C extends x{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?L(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new C(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<D(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),w(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,s))}forEachSegment(t){return P(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return X(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return q(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return F(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=Y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new C(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=b(this.flatCoordinates,0,t,this.stride),this.changed()}}const H=C;export{H as L,q as i,k as l};
