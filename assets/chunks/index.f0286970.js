import{L as n}from"./leaflet-src.347f22be.js";import{M as a,A as r}from"./index.a511ac44.js";import{d,p as l,a4 as c,o as h,c as _,_ as m}from"./framework.57763b9a.js";import"./commonjsHelpers.042e6b4d.js";(function(){L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"前进",backTitle:"后退",homeTitle:"回到地图初始位置"},onAdd:function(t){this.options.center||(this.options.center=t.getCenter()),this.options.zoom||(this.options.zoom=t.getZoom());var o=this.options,e="leaflet-control-navbar",s=L.DomUtil.create("div",e+" leaflet-bar");return this._homeButton=this._createButton(o.homeTitle,e+"-home",s,this._goHome),this._fwdButton=this._createButton(o.forwardTitle,e+"-fwd",s,this._goFwd),this._backButton=this._createButton(o.backTitle,e+"-back",s,this._goBack),this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}],this._curIndx=0,this._updateDisabled(),t.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),t.setView(o.center,o.zoom),s},onRemove:function(t){t.off("moveend",this._updateHistory,this)},_goHome:function(){if(this.options.bbox)try{this._map.fitBounds(this.options.bbox)}catch{this._map.setView(this.options.center,this.options.zoom)}this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(this._curIndx!==0){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx--,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx++,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_createButton:function(t,o,e,s){var i=L.DomUtil.create("a",o,e);return i.href="#",i.title=t,L.DomEvent.on(i,"mousedown dblclick",L.DomEvent.stopPropagation).on(i,"click",L.DomEvent.stop).on(i,"click",s,this).on(i,"click",this._refocusOnMap,this),i},_updateHistory:function(){var t={center:this._map.getCenter(),zoom:this._map.getZoom()},o=this._curIndx+1;this._viewHistory.splice(o,this._viewHistory.length-o,t),this._curIndx++,this._updateDisabled()},_setFwdEnabled:function(t){var o="leaflet-disabled",e="leaflet-control-navbar-fwd-disabled";t===!0?(L.DomUtil.removeClass(this._fwdButton,e),L.DomUtil.removeClass(this._fwdButton,o)):(L.DomUtil.addClass(this._fwdButton,e),L.DomUtil.addClass(this._fwdButton,o))},_setBackEnabled:function(t){var o="leaflet-disabled",e="leaflet-control-navbar-back-disabled";t===!0?(L.DomUtil.removeClass(this._backButton,e),L.DomUtil.removeClass(this._backButton,o)):(L.DomUtil.addClass(this._backButton,e),L.DomUtil.addClass(this._backButton,o))},_updateDisabled:function(){this._curIndx==this._viewHistory.length-1?this._setFwdEnabled(!1):this._setFwdEnabled(!0),this._curIndx<=0?this._setBackEnabled(!1):this._setBackEnabled(!0)}}),L.control.navbar=function(t){return new L.Control.NavBar(t)}})();const u={id:"map"},p=d({__name:"index",setup(t){let o=null;const e=()=>{o=n.map("map",{zoomControl:!1,crs:n.CRS.EPSG3857,center:[22.548857,114.064839],minZoom:1,maxZoom:18,zoom:10,maxBounds:n.latLngBounds(n.latLng(-180,-180),n.latLng(180,180))}),n.tileLayer(a,{noWrap:!0,attribution:r}).addTo(o),n.control.navbar({forwardTitle:"前进",backTitle:"后退",homeTitle:"回到地图初始位置"}).addTo(o)};return l(()=>{e()}),c(()=>{o&&(o.remove(),o=null)}),(s,i)=>(h(),_("div",u))}});const B=m(p,[["__scopeId","data-v-449ca147"]]);export{B as default};
