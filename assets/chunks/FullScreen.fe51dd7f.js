import{bS as f,E as C,bT as o,bU as g,bV as i,bW as a,u as F,bX as c,r as m}from"./reproj.9b488601.js";const r=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],u={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class N extends f{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const l=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof l=="string"?document.createTextNode(l):l;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(C.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${o} ${g}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(h(t))if(d(t))L(t);else{let l;this.source_?l=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:l=e.getTargetElement(),this.keys_?E(l):_(l)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=d(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(i(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(u.ENTERFULLSCREEN)):(i(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(u.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(a.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(a.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let l=0,n=e.length;l<n;++l)F(e[l]);e.length=0;const t=this.getMap();if(t){const l=t.getOwnerDocument();h(l)?this.element.classList.remove(c):this.element.classList.add(c);for(let n=0,b=r.length;n<b;++n)e.push(m(l,r[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function h(s){const e=s.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&s.fullscreenEnabled)}function d(s){return!!(s.webkitIsFullScreen||s.fullscreenElement)}function _(s){s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen&&s.webkitRequestFullscreen()}function E(s){s.webkitRequestFullscreen?s.webkitRequestFullscreen():_(s)}function L(s){s.exitFullscreen?s.exitFullscreen():s.webkitExitFullscreen&&s.webkitExitFullscreen()}const v=N;export{v as F};
