import{L as m}from"./leaflet-src.347f22be.js";import{M,A as E}from"./index.a511ac44.js";import{d as x,p as I,a3 as S,o as w,c as b,_ as P}from"./framework.873b9d65.js";import"./commonjsHelpers.042e6b4d.js";/*!
	Copyright (c) 2011-2015, Pavel Shramov, Bruno Bergot - MIT licence
*/L.KML=L.FeatureGroup.extend({initialize:function(e){this._kml=e,this._layers={},e&&this.addKML(e)},addKML:function(e){var t=L.KML.parseKML(e);if(!(!t||!t.length)){for(var r=0;r<t.length;r++)this.fire("addlayer",{layer:t[r]}),this.addLayer(t[r]);this.latLngs=L.KML.getLatLngs(e),this.fire("loaded")}},latLngs:[]});L.Util.extend(L.KML,{parseKML:function(e){var t=this.parseStyles(e);this.parseStyleMap(e,t);for(var r=e.getElementsByTagName("Folder"),n=[],o,a=0;a<r.length;a++)this._check_folder(r[a])&&(o=this.parseFolder(r[a],t),o&&n.push(o));r=e.getElementsByTagName("Placemark");for(var s=0;s<r.length;s++)this._check_folder(r[s])&&(o=this.parsePlacemark(r[s],e,t),o&&n.push(o));r=e.getElementsByTagName("GroundOverlay");for(var i=0;i<r.length;i++)o=this.parseGroundOverlay(r[i]),o&&n.push(o);return n},_check_folder:function(e,t){for(e=e.parentNode;e&&e.tagName!=="Folder";)e=e.parentNode;return!e||e===t},parseStyles:function(e){for(var t={},r=e.getElementsByTagName("Style"),n=0,o=r.length;n<o;n++){var a=this.parseStyle(r[n]);if(a){var s="#"+a.id;t[s]=a}}return t},parseStyle:function(e){var t={},r={},n={},o,a,s={color:!0,width:!0,Icon:!0,href:!0,hotSpot:!0};function i(l){for(var f={},u=0;u<l.childNodes.length;u++){var d=l.childNodes[u],h=d.tagName;if(s[h])if(h==="hotSpot")for(var c=0;c<d.attributes.length;c++)f[d.attributes[c].name]=d.attributes[c].nodeValue;else{var g=d.childNodes[0].nodeValue;h==="color"?(f.opacity=parseInt(g.substring(0,2),16)/255,f.color="#"+g.substring(6,8)+g.substring(4,6)+g.substring(2,4)):h==="width"?f.weight=g:h==="Icon"?(n=i(d),n.href&&(f.href=n.href)):h==="href"&&(f.href=g)}}return f}return o=e.getElementsByTagName("LineStyle"),o&&o[0]&&(t=i(o[0])),o=e.getElementsByTagName("PolyStyle"),o&&o[0]&&(r=i(o[0])),r.color&&(t.fillColor=r.color),r.opacity&&(t.fillOpacity=r.opacity),o=e.getElementsByTagName("IconStyle"),o&&o[0]&&(n=i(o[0])),n.href&&(t.icon=new L.KMLIcon({iconUrl:n.href,shadowUrl:null,anchorRef:{x:n.x,y:n.y},anchorType:{x:n.xunits,y:n.yunits}})),a=e.getAttribute("id"),a&&t&&(t.id=a),t},parseStyleMap:function(e,t){for(var r=e.getElementsByTagName("StyleMap"),n=0;n<r.length;n++){var o=r[n],a,s,i;a=o.getElementsByTagName("key"),a&&a[0]&&(s=a[0].textContent),a=o.getElementsByTagName("styleUrl"),a&&a[0]&&(i=a[0].textContent),s==="normal"&&(t["#"+o.getAttribute("id")]=t[i])}},parseFolder:function(e,t){var r,n=[],o;r=e.getElementsByTagName("Folder");for(var a=0;a<r.length;a++)this._check_folder(r[a],e)&&(o=this.parseFolder(r[a],t),o&&n.push(o));r=e.getElementsByTagName("Placemark");for(var s=0;s<r.length;s++)this._check_folder(r[s],e)&&(o=this.parsePlacemark(r[s],e,t),o&&n.push(o));r=e.getElementsByTagName("GroundOverlay");for(var i=0;i<r.length;i++)this._check_folder(r[i],e)&&(o=this.parseGroundOverlay(r[i]),o&&n.push(o));if(n.length)return n.length===1?n[0]:new L.FeatureGroup(n)},parsePlacemark:function(e,t,r,n){var o,a,s,i,l,f,u=n||{};for(l=e.getElementsByTagName("styleUrl"),a=0;a<l.length;a++){var d=l[a].childNodes[0].nodeValue;for(var h in r[d])u[h]=r[d][h]}if(f=e.getElementsByTagName("Style")[0],f){var c=this.parseStyle(e);if(c)for(i in c)u[i]=c[i]}var g=["MultiGeometry","MultiTrack","gx:MultiTrack"];for(o in g)for(l=e.getElementsByTagName(g[o]),a=0;a<l.length;a++)return this.parsePlacemark(l[a],t,r,u);var p=[],N=["LineString","Polygon","Point","Track","gx:Track"];for(s in N){var T=N[s];for(l=e.getElementsByTagName(T),a=0;a<l.length;a++){var B=this["parse"+T.replace(/gx:/,"")](l[a],t,u);B&&p.push(B)}}if(p.length){var y=p[0];p.length>1&&(y=new L.FeatureGroup(p));var v,_="";for(l=e.getElementsByTagName("name"),l.length&&l[0].childNodes.length&&(v=l[0].childNodes[0].nodeValue),l=e.getElementsByTagName("description"),a=0;a<l.length;a++)for(s=0;s<l[a].childNodes.length;s++)_=_+l[a].childNodes[s].nodeValue;return v&&y.on("add",function(){y.bindPopup("<h2>"+v+"</h2>"+_,{className:"kml-popup"})}),y}},parseCoords:function(e){var t=e.getElementsByTagName("coordinates");return this._read_coords(t[0])},parseLineString:function(e,t,r){var n=this.parseCoords(e);if(n.length)return new L.Polyline(n,r)},parseTrack:function(e,t,r){var n=t.getElementsByTagName("gx:coord");n.length===0&&(n=t.getElementsByTagName("coord"));for(var o=[],a=0;a<n.length;a++)o=o.concat(this._read_gxcoords(n[a]));if(o.length)return new L.Polyline(o,r)},parsePoint:function(e,t,r){var n=e.getElementsByTagName("coordinates");if(n.length){var o=n[0].childNodes[0].nodeValue.split(",");return new L.KMLMarker(new L.LatLng(o[1],o[0]),r)}},parsePolygon:function(e,t,r){var n,o=[],a=[],s,i;for(n=e.getElementsByTagName("outerBoundaryIs"),s=0;s<n.length;s++)i=this.parseCoords(n[s]),i&&o.push(i);for(n=e.getElementsByTagName("innerBoundaryIs"),s=0;s<n.length;s++)i=this.parseCoords(n[s]),i&&a.push(i);if(o.length)return r.fillColor&&(r.fill=!0),o.length===1?new L.Polygon(o.concat(a),r):new L.MultiPolygon(o,r)},getLatLngs:function(e){for(var t=e.getElementsByTagName("coordinates"),r=[],n=0;n<t.length;n++)r=r.concat(this._read_coords(t[n]));return r},_read_coords:function(e){var t="",r=[],n;for(n=0;n<e.childNodes.length;n++)t=t+e.childNodes[n].nodeValue;for(t=t.split(/[\s\n]+/),n=0;n<t.length;n++){var o=t[n].split(",");o.length<2||r.push(new L.LatLng(o[1],o[0]))}return r},_read_gxcoords:function(e){var t="",r=[];return t=e.firstChild.nodeValue.split(" "),r.push(new L.LatLng(t[1],t[0])),r},parseGroundOverlay:function(e){var t=e.getElementsByTagName("LatLonBox")[0],r=new L.LatLngBounds([t.getElementsByTagName("south")[0].childNodes[0].nodeValue,t.getElementsByTagName("west")[0].childNodes[0].nodeValue],[t.getElementsByTagName("north")[0].childNodes[0].nodeValue,t.getElementsByTagName("east")[0].childNodes[0].nodeValue]),n={Icon:!0,href:!0,color:!0};function o(i){for(var l={},f={},u=0;u<i.childNodes.length;u++){var d=i.childNodes[u],h=d.tagName;if(n[h]){var c=d.childNodes[0].nodeValue;h==="Icon"?(f=o(d),f.href&&(l.href=f.href)):h==="href"?l.href=c:h==="color"&&(l.opacity=parseInt(c.substring(0,2),16)/255,l.color="#"+c.substring(6,8)+c.substring(4,6)+c.substring(2,4))}}return l}var a={};if(a=o(e),t.getElementsByTagName("rotation")[0]!==void 0){var s=t.getElementsByTagName("rotation")[0].childNodes[0].nodeValue;a.rotation=parseFloat(s)}return new L.RotatedImageOverlay(a.href,r,{opacity:a.opacity,angle:a.rotation})}});L.KMLIcon=L.Icon.extend({options:{iconSize:[32,32],iconAnchor:[16,16]},_setIconStyles:function(e,t){L.Icon.prototype._setIconStyles.apply(this,[e,t]),e.complete?this.applyCustomStyles(e):e.onload=this.applyCustomStyles.bind(this,e)},applyCustomStyles:function(e){var t=this.options;this.options.popupAnchor=[0,-.83*e.height],t.anchorType.x==="fraction"&&(e.style.marginLeft=-t.anchorRef.x*e.width+"px"),t.anchorType.y==="fraction"&&(e.style.marginTop=-(1-t.anchorRef.y)*e.height+1+"px"),t.anchorType.x==="pixels"&&(e.style.marginLeft=-t.anchorRef.x+"px"),t.anchorType.y==="pixels"&&(e.style.marginTop=t.anchorRef.y-e.height+1+"px")}});L.KMLMarker=L.Marker.extend({options:{icon:new L.KMLIcon.Default}});L.RotatedImageOverlay=L.ImageOverlay.extend({options:{angle:0},_reset:function(){L.ImageOverlay.prototype._reset.call(this),this._rotate()},_animateZoom:function(e){L.ImageOverlay.prototype._animateZoom.call(this,e),this._rotate()},_rotate:function(){if(L.DomUtil.TRANSFORM)this._image.style[L.DomUtil.TRANSFORM]+=" rotate("+this.options.angle+"deg)";else if(L.Browser.ie){var e=this.options.angle*(Math.PI/180),t=Math.cos(e),r=Math.sin(e);this._image.style.filter+=" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+t+", M12="+-r+", M21="+r+", M22="+t+")"}},getBounds:function(){return this._bounds}});const k={id:"map"},O=x({__name:"index",setup(e){let t=null;const r=()=>{t=m.map("map",{crs:m.CRS.EPSG3857,center:[36.148,-112.335],minZoom:1,maxZoom:18,zoom:15}),m.tileLayer(M,{noWrap:!0,attribution:E}).addTo(t),fetch("/kml/KML_Samples.kml").then(n=>n.text()).then(n=>{if(t===null)return;const a=new DOMParser().parseFromString(n,"text/xml"),s=new m.KML(a);t.addLayer(s)})};return I(()=>{r()}),S(()=>{t&&(t.remove(),t=null)}),(n,o)=>(w(),b("div",k))}});const F=P(O,[["__scopeId","data-v-6b32114f"]]);export{F as default};
