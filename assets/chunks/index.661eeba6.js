import{L as e}from"./leaflet-src.347f22be.js";import{A as s}from"./index.a511ac44.js";import{d as n,p as r,a3 as p,o as l,c as h,_ as m}from"./framework.efc265d9.js";import"./commonjsHelpers.042e6b4d.js";L.MagnifyingGlass=L.Layer.extend({options:{radius:100,zoomOffset:3,layers:[],fixedPosition:!1,latLng:[0,0],fixedZoom:-1},initialize:function(t){L.Util.setOptions(this,t),this._fixedZoom=this.options.fixedZoom!=-1,this._mainMap=null,this._glassMap=null},getMap:function(){return this._glassMap},_createMiniMap:function(t){return new L.Map(t,{layers:this.options.layers,zoom:this._getZoom(),maxZoom:this._mainMap.getMaxZoom(),minZoom:this._mainMap.getMinZoom(),crs:this._mainMap.options.crs,fadeAnimation:!1,attributionControl:!1,zoomControl:!1,boxZoom:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1})},_getZoom:function(){return this._fixedZoom?this.options.fixedZoom:this._mainMap.getZoom()+this.options.zoomOffset},_updateZoom:function(){this._glassMap.setZoom(this._getZoom())},setRadius:function(t){this.options.radius=t,this._wrapperElt&&(this._wrapperElt.style.width=this.options.radius*2+"px",this._wrapperElt.style.height=this.options.radius*2+"px")},setLatLng:function(t){this.options.latLng=t,this._update(t)},_updateFromMouse:function(t){this._update(t.latlng,t.layerPoint)},_updateFixed:function(){this._update(this.options.latLng)},_update:function(t,i){this._glassMap.setView(t,this._getZoom(),{pan:{animate:!1}}),i=i||this._mainMap.latLngToLayerPoint(t),this._wrapperElt.style.left=i.x-this.options.radius+"px",this._wrapperElt.style.top=i.y-this.options.radius+"px"},onAdd:function(t){this._mainMap=t,this._wrapperElt=L.DomUtil.create("div","leaflet-magnifying-glass");var i=L.DomUtil.create("div","",this._wrapperElt);L.Browser.webkit&&L.DomUtil.addClass(i,"leaflet-magnifying-glass-webkit"),this._glassMap=this._createMiniMap(i),L.DomEvent.addListener(this._wrapperElt,"click",this._fireClick,this);var o=this.options;return this.setRadius(o.radius),this.setLatLng(o.latLng),this._glassMap.whenReady(function(){o.fixedPosition?(this._mainMap.on("zoomend",this._updateFixed,this),L.DomUtil.addClass(this._wrapperElt,"leaflet-zoom-hide")):(this._mainMap.on("mousemove",this._updateFromMouse,this),this._fixedZoom||this._mainMap.on("zoomend",this._updateZoom,this))},this),t.getPanes().popupPane.appendChild(this._wrapperElt),this._glassMap.invalidateSize(),this},_fireClick:function(t){this.fire("click",t),L.DomEvent.stopPropagation(t)},onRemove:function(t){t.off("viewreset",this._updateFixed,this),t.off("mousemove",this._updateFromMouse,this),t.off("zoomend",this._updateZoom,this);for(var i=0,o=this.options.layers.length;i<o;i++)this._glassMap.removeLayer(this.options.layers[i]);return this._glassMap.remove(),L.DomEvent.removeListener(this._wrapperElt,"click",this._fireClick),t.getPanes().popupPane.removeChild(this._wrapperElt),this._mainMap=null,this}});L.magnifyingGlass=function(t){return new L.MagnifyingGlass(t)};const d={id:"map"},_=n({__name:"index",setup(t){let i=null;const o=()=>{i=e.map("map",{zoomControl:!1,crs:e.CRS.EPSG3857,center:[22.548857,114.064839],minZoom:1,maxZoom:18,zoom:10,maxBounds:e.latLngBounds(e.latLng(-180,-180),e.latLng(180,180))}),e.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:s}).addTo(i),e.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:s}).addTo(i);const a=e.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:s});e.magnifyingGlass({layers:[a],radius:100,zoomOffset:0}).addTo(i)};return r(()=>{o()}),p(()=>{i&&(i.remove(),i=null)}),(a,f)=>(l(),h("div",d))}});const M=m(_,[["__scopeId","data-v-d22c47bb"]]);export{M as default};
