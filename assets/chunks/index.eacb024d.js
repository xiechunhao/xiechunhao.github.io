import{a as g,L as h}from"./leaflet-src.347f22be.js";import{g as M}from"./commonjsHelpers.042e6b4d.js";import{A as r}from"./index.a511ac44.js";import{d as f,p as u,a4 as v,o as y,c as x,_ as T}from"./framework.57763b9a.js";var _={exports:{}};(function(m,s){(function(t,o){m.exports=t(g),typeof o<"u"&&o.L&&(o.L.Control.MiniMap=t(L),o.L.control.minimap=function(i,e){return new o.L.Control.MiniMap(i,e)})})(function(t){var o=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(i,e){t.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=i},onAdd:function(i){this._mainMap=i,this._container=t.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",t.DomEvent.disableClickPropagation(this._container),t.DomEvent.on(this._container,"mousewheel",t.DomEvent.stopPropagation);var e={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:i.options.crs};return e=t.Util.extend(this.options.mapOptions,e),this._miniMap=new t.Map(this._container,e),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(t.Util.bind(function(){this._aimingRect=t.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=t.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(i){t.Control.prototype.addTo.call(this,i);var e=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(i){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(i){this._miniMap.removeLayer(this._layer),this._layer=i,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(i,e,l,a,d,c){var n=t.DomUtil.create("a",l,a);n.innerHTML=i,n.href="#",n.title=e;var p=t.DomEvent.stopPropagation;return t.DomEvent.on(n,"click",p).on(n,"mousedown",p).on(n,"dblclick",p).on(n,"click",t.DomEvent.preventDefault).on(n,"click",d,c),n},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(i){i!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(i){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(i){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(i){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),l=this._miniMap.latLngToContainerPoint(e.getSouthWest()),a=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:l,ne:a}}},_onMiniMapMoving:function(i){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new t.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(i){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var i=this.options.zoomLevelFixed;return this._isDefined(i)&&this._isInteger(i)},_decideZoom:function(i){if(this._isZoomLevelFixed())return i?this.options.zoomLevelFixed:this._mainMap.getZoom();if(i)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e=this._miniMap.getZoom()-this._mainMap.getZoom(),l=this._miniMap.getZoom()-this.options.zoomLevelOffset,a;return e>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(a=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):a=this._mainMap.getZoom():a=l,this._lastMiniMapZoom=this._miniMap.getZoom(),a},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(i){return typeof i=="number"},_isDefined:function(i){return typeof i<"u"},_onToggle:function(){t.Util.requestAnimFrame(function(){t.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),t.Browser.any3d||t.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){t.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var i={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",i),this.fire("toggle",i)}});return t.Map.mergeOptions({miniMapControl:!1}),t.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=new o().addTo(this))}),o},window)})(_);var D=_.exports;const z=M(D),B={id:"map"},Z=f({__name:"index",setup(m){let s=null;const t=()=>{s=h.map("map",{zoomControl:!1,crs:h.CRS.EPSG3857,center:[22.548857,114.064839],minZoom:1,maxZoom:18,zoom:18,maxBounds:h.latLngBounds(h.latLng(-180,-180),h.latLng(180,180))}),h.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:r}).addTo(s),h.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{noWrap:!0,attribution:r}).addTo(s);const o=new h.TileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=55b4d4eaef95384c946e9bd1b99c5610",{minZoom:1,maxZoom:18,noWrap:!0}),i=new z(o,{toggleDisplay:!0});s.addControl(i)};return u(()=>{t()}),v(()=>{s&&(s.remove(),s=null)}),(o,i)=>(y(),x("div",B))}});const E=T(Z,[["__scopeId","data-v-ad071cd0"]]);export{E as default};
