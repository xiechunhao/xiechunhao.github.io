import{i as Ve}from"./index-p1XoTQj1.js";import{bC as $e,aR as De,J as he,aH as Re,aB as te,g as Me,aC as Be,bD as Te,bE as je,bh as ze,b5 as ge,r as E,H as Z,O as B,R as ae,I as le,ai as U,o as C,c as T,w as _,d as L,l as $,F as J,b as k,a4 as Q,a7 as j,a5 as x,t as O,e as N,m as ke,a$ as oe,V as ee,aD as Ke,b0 as Ne,bF as Fe,bG as We,aU as Ze,a1 as xe,b1 as Je,b2 as qe,W as se,X as ie,a as He,u as ye,bd as Ge,au as Xe,bH as we}from"./index-BF2fBoPb.js";import{E as Ye}from"./autocomplete-CnziFlEx.js";import{i as Qe}from"./index-B-b3I1wI.js";import{i as re}from"./index-Cjr4ibGp.js";var Ie={exports:{}};(function(e,y){(function(o,M){e.exports=M()})($e,function(){function o(t){var f=[];return t.AMapUI&&f.push(M(t.AMapUI)),t.Loca&&f.push(p(t.Loca)),Promise.all(f)}function M(t){return new Promise(function(f,i){var g=[];if(t.plugins)for(var d=0;d<t.plugins.length;d+=1)l.AMapUI.plugins.indexOf(t.plugins[d])==-1&&g.push(t.plugins[d]);if(r.AMapUI===s.failed)i("前次请求 AMapUI 失败");else if(r.AMapUI===s.notload){r.AMapUI=s.loading,l.AMapUI.version=t.version||l.AMapUI.version,d=l.AMapUI.version;var m=document.body||document.head,b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/ui/"+d+"/main.js",b.onerror=function(I){r.AMapUI=s.failed,i("请求 AMapUI 失败")},b.onload=function(){if(r.AMapUI=s.loaded,g.length)window.AMapUI.loadUI(g,function(){for(var I=0,V=g.length;I<V;I++){var R=g[I].split("/").slice(-1)[0];window.AMapUI[R]=arguments[I]}for(f();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(f();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},m.appendChild(b)}else r.AMapUI===s.loaded?t.version&&t.version!==l.AMapUI.version?i("不允许多个版本 AMapUI 混用"):g.length?window.AMapUI.loadUI(g,function(){for(var I=0,V=g.length;I<V;I++){var R=g[I].split("/").slice(-1)[0];window.AMapUI[R]=arguments[I]}f()}):f():t.version&&t.version!==l.AMapUI.version?i("不允许多个版本 AMapUI 混用"):c.AMapUI.push(function(I){I?i(I):g.length?window.AMapUI.loadUI(g,function(){for(var V=0,R=g.length;V<R;V++){var F=g[V].split("/").slice(-1)[0];window.AMapUI[F]=arguments[V]}f()}):f()})})}function p(t){return new Promise(function(f,i){if(r.Loca===s.failed)i("前次请求 Loca 失败");else if(r.Loca===s.notload){r.Loca=s.loading,l.Loca.version=t.version||l.Loca.version;var g=l.Loca.version,d=l.AMap.version.startsWith("2"),m=g.startsWith("2");if(d&&!m||!d&&m)i("JSAPI 与 Loca 版本不对应！！");else{d=l.key,m=document.body||document.head;var b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/loca?v="+g+"&key="+d,b.onerror=function(I){r.Loca=s.failed,i("请求 AMapUI 失败")},b.onload=function(){for(r.Loca=s.loaded,f();c.Loca.length;)c.Loca.splice(0,1)[0]()},m.appendChild(b)}}else r.Loca===s.loaded?t.version&&t.version!==l.Loca.version?i("不允许多个版本 Loca 混用"):f():t.version&&t.version!==l.Loca.version?i("不允许多个版本 Loca 混用"):c.Loca.push(function(I){I?i(I):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var s;(function(t){t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed"})(s||(s={}));var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:s.notload,AMapUI:s.notload,Loca:s.notload},c={AMap:[],AMapUI:[],Loca:[]},v=[],w=function(t){typeof t=="function"&&(r.AMap===s.loaded?t(window.AMap):v.push(t))};return{load:function(t){return new Promise(function(f,i){if(r.AMap==s.failed)i("");else if(r.AMap==s.notload){var g=t.key,d=t.version,m=t.plugins;g?(window.AMap&&location.host!=="lbs.amap.com"&&i("禁止多种API加载方式混用"),l.key=g,l.AMap.version=d||l.AMap.version,l.AMap.plugins=m||l.AMap.plugins,r.AMap=s.loading,d=document.body||document.head,window.___onAPILoaded=function(I){if(delete window.___onAPILoaded,I)r.AMap=s.failed,i(I);else for(r.AMap=s.loaded,o(t).then(function(){f(window.AMap)}).catch(i);v.length;)v.splice(0,1)[0]()},m=document.createElement("script"),m.type="text/javascript",m.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+g+"&plugin="+l.AMap.plugins.join(","),m.onerror=function(I){r.AMap=s.failed,i(I)},d.appendChild(m)):i("请填写key")}else if(r.AMap==s.loaded)if(t.key&&t.key!==l.key)i("多个不一致的 key");else if(t.version&&t.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(g=[],t.plugins)for(d=0;d<t.plugins.length;d+=1)l.AMap.plugins.indexOf(t.plugins[d])==-1&&g.push(t.plugins[d]);g.length?window.AMap.plugin(g,function(){o(t).then(function(){f(window.AMap)}).catch(i)}):o(t).then(function(){f(window.AMap)}).catch(i)}else if(t.key&&t.key!==l.key)i("多个不一致的 key");else if(t.version&&t.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{var b=[];if(t.plugins)for(d=0;d<t.plugins.length;d+=1)l.AMap.plugins.indexOf(t.plugins[d])==-1&&b.push(t.plugins[d]);w(function(){b.length?window.AMap.plugin(b,function(){o(t).then(function(){f(window.AMap)}).catch(i)}):o(t).then(function(){f(window.AMap)}).catch(i)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:s.notload,AMapUI:s.notload,Loca:s.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})})(Ie);var en=Ie.exports;const ue=De(en),ce={height:{type:String,default:"460px"},center:Array,zoom:{type:Number,default:11},selectedZoom:{type:Number,default:17},poiLimit:{type:Number,default:30},poiType:{type:String,default:""},poiKeywords:{type:String,default:""},poiRadius:{type:Number,default:1e3},returnRegions:Boolean,required:{type:Boolean,default:!0},message:String,suggestionCity:{type:String,default:"全国"},searchPlaceholder:String,markerSrc:{type:String,default:"https://3gimg.qq.com/lightmap/components/locationPicker2/image/marker.png"},mapKey:String,mapVersion:{type:String,default:"2.0"},mapStyle:String,darkMode:Boolean,okText:String,emptyProps:Object,searchStyle:Object,mode:{type:String,default:"poi"},filterable:{type:Boolean,default:!0},clickMessage:String,selected:Object,sideStyle:Object},nn={...ce,modelValue:Boolean,modalProps:Object,responsive:{type:Boolean,default:null},locale:Object,keywordMode:Boolean,headerStyle:Object},on={done:e=>!0,mapDone:e=>!0,open:()=>!0,closed:()=>!0,"update:modelValue":e=>!0},tn=Object.keys(ce),ne="ele-map-view-body-icon",an=he({name:"MapView",components:{ElAutocomplete:Ye,ElInput:Re,ElButton:te,ElIcon:Me,ElEmpty:Be,EleLoading:Qe,PlusOutlined:Te,EnvironmentOutlined:je,CheckCircleOutlined:ze,SearchOutlined:ge},props:ce,emits:{mapDone:e=>!0,select:e=>!0,done:e=>!0},setup(e,{emit:y}){const o={},M=E(null),p=E(null),s=E(null),l=E(!0),r=E(!1),c=E(!1),v=E([]),w=E([]),t=E([ne]),f=E(""),i=E(null),g=Z(()=>e.required&&!i.value),d=Z(()=>e.mode==="keyword"),m=Z(()=>e.mode==="poi"),b=()=>{if(e.selected!=null){const{lng:n,lat:a}=e.selected;if(a!=null&&n!=null)return e.selected}},I=(n,a)=>a.lat===n.lat&&a.lng===n.lng&&a.name===n.name&&a.address===n.address,V=(n,a)=>{const u=a.findIndex(h=>I(n,h));if(u==-1)return[n,...a];const S=[...a];return S[u]=n,S},R=n=>n==null||typeof n!="object"||n.province==null&&n.city==null&&n.district==null&&n.citycode==null,F=n=>{const a=n.name||"",S=(Array.isArray(n.address)?n.address[0]:n.address)||"",{lat:h,lng:A}=n.location,P=R(n.city)?void 0:n.city,X=[a,S,h,A].join(",");return{...n,name:a,address:S,lat:h,lng:A,city:P,key:X}},de=()=>{const n=s.value;n&&(n.scrollTop=0)},_e=()=>{const n=s.value;if(n){const a=n.querySelector(".ele-map-view-item.is-active");a&&(typeof a.scrollIntoViewIfNeeded=="function"?a.scrollIntoViewIfNeeded(!0):a.scrollIntoView({behavior:"smooth",block:"center"}))}},D=(n,a)=>{i.value!==n&&(i.value=n,a&&y("select",i.value))},Se=n=>new Promise((a,u)=>{if(!o.autoCompleteIns){u(new Error("AutoComplete instance is null"));return}o.autoCompleteIns.search(n,(S,h)=>{if(S==="error"){const P=S+" "+(h?JSON.stringify(h):"");u(new Error(P));return}if(!(h!=null&&h.tips)){a([]);return}const A=h.tips.filter(P=>!!P.location);a(A.map(P=>F(P)))})}),be=(n,a)=>new Promise((u,S)=>{if(!o.placeSearchIns){S(new Error("PlaceSearch instance is null"));return}o.placeSearchIns.searchNearBy(e.poiKeywords,[n,a],e.poiRadius,(h,A)=>{var P;if(h==="complete"&&((P=A==null?void 0:A.poiList)!=null&&P.pois)){const Oe=A.poiList.pois.filter(Y=>!!Y.location);u(Oe.map(Y=>F(Y)));return}if(h==="no_data"){u([]);return}const X=h+" "+(A?JSON.stringify(A):"");S(new Error(X))})}),W=(n,a)=>{l.value=!0,r.value=!0,be(n,a).then(u=>{if(r.value=!1,l.value=!1,!o.selectedSuggestion){v.value=u,D(null,!0),de();return}v.value=V(o.selectedSuggestion,u),D(o.selectedSuggestion,!0),o.selectedSuggestion=null,ee(()=>{})}).catch(u=>{console.error(u),r.value=!1,l.value=!1;const S=o.selectedSuggestion;v.value=S?[S]:[],D(S||null,!0)})},q=()=>{t.value=[ne],ee(()=>{setTimeout(()=>{t.value=[ne,"ele-map-view-anim-bounce"]},0)})},H=()=>{o.centerMarker&&o.mapIns&&o.mapIns.remove(o.centerMarker)},z=(n,a)=>{if(!o.centerMarker){console.error("centerMarker is null");return}if(!o.mapIns){console.error("map instance is null");return}H(),n!=null&&a!=null&&(o.centerMarker.setPosition([n,a]),o.mapIns.add(o.centerMarker))},K=(n,a,u)=>{o.mapIns&&n!=null&&a!=null&&(u==null?o.mapIns.setCenter([n,a]):o.mapIns.setZoomAndCenter(u,[n,a]))},pe=n=>new Promise((a,u)=>{if(!o.mapIns){u(new Error("map instance is null"));return}const S=o.mapIns.getCenter();if(!n){a(S||{});return}o.mapIns.getCity(h=>{a({...S||{},city:h})})}),me=n=>{o.mapIns&&(typeof n=="boolean"?n?o.mapIns.setMapStyle("amap://styles/dark"):o.mapIns.setMapStyle("amap://styles/normal"):n&&o.mapIns.setMapStyle(n))},Ae=()=>{o.mapIns&&o.mapIns.destroy(),o.centerMarker=null,o.placeSearchIns=null,o.autoCompleteIns=null,o.mapIns=null},G=()=>{Ae(),o.lastSuggestion="",o.selectedSuggestion=null,o.isItemClickMove=!1,v.value=[],w.value=[],f.value="",D(null)},fe=()=>{!e.mapKey||o.mapIns||ue.load({key:e.mapKey,version:e.mapVersion,plugins:["AMap.PlaceSearch","AMap.AutoComplete"]}).then(n=>{G(),o.centerMarker=new n.Marker({icon:new n.Icon({image:e.markerSrc,size:new n.Size(26,36.5),imageSize:new n.Size(26,36.5)}),offset:new n.Pixel(-13,-36.5)}),o.autoCompleteIns=new n.AutoComplete({city:e.suggestionCity}),o.placeSearchIns=new n.PlaceSearch({type:e.poiType,pageSize:e.poiLimit,pageIndex:1});const a=b(),u=a?[a.lng,a.lat]:void 0,S=e.darkMode?"amap://styles/dark":void 0;o.mapIns=new n.Map(M.value,{zoom:a==null?e.zoom:e.selectedZoom,center:u||e.center,resizeEnable:!0,mapStyle:e.mapStyle||S}),o.mapIns.on("complete",()=>{const h=b();if(h!=null&&(D(h),!m.value)){const{lng:A,lat:P}=h;z(A,P)}if(m.value||d.value){o.selectedSuggestion=h;const{lng:A,lat:P}=o.mapIns.getCenter();W(A,P);return}l.value=!1}),o.mapIns.on("moveend",()=>{if(o.isItemClickMove||!m.value){o.isItemClickMove=!1;return}q();const{lng:h,lat:A}=o.mapIns.getCenter();W(h,A)}),o.mapIns.on("click",h=>{if(m.value||d.value)return;if(h.lnglat==null||typeof h.lnglat!="object"){console.error(h);return}const{lng:A,lat:P}=h.lnglat;D(F({location:{lat:P,lng:A}}),!0),K(A,P,e.selectedZoom),z(A,P)}),y("mapDone",o.mapIns)}).catch(n=>{console.error(n)})},Ce=()=>o.mapIns,ve=()=>{const n=b();if(o.mapIns==null||n==null)return;D(n);const{lng:a,lat:u}=n;o.isItemClickMove=!0,K(a,u,e.selectedZoom),m.value||z(a,u),(d.value||m.value)&&!v.value.includes(n)&&(v.value=V(n,v.value)),ee(()=>{_e()})},Pe=(n,a)=>{if(!n||o.lastSuggestion===n){a&&a(w.value);return}o.lastSuggestion=n,d.value&&(r.value=!0),Se(n).then(u=>{if(d.value){v.value=u,r.value=!1,D(null,!0),H(),de();return}w.value=u,a&&a(w.value)}).catch(u=>{console.error(u),r.value=!1,a&&a(w.value)})},Le=n=>{if(p.value&&p.value.blur(),!n)return;const{lng:a,lat:u}=n;if(!(a==null||u==null)){if(!m.value){z(a,u),K(a,u,e.selectedZoom),D(n,!0);return}l.value=!0,o.selectedSuggestion=n,o.isItemClickMove=!0,K(a,u,e.selectedZoom),q(),W(a,u)}},Ee=n=>{o.isItemClickMove=!0,D(n,!0);const{lng:a,lat:u}=n;if(K(a,u,e.selectedZoom),m.value){q();return}z(a,u)},Ue=()=>{if(!i.value){c.value=!0,pe(e.returnRegions).then(n=>{c.value=!1,y("done",n)}).catch(n=>{console.error(n),c.value=!1,y("done",{})});return}if(!e.returnRegions||!R(i.value.city)){y("done",i.value);return}c.value=!0,o.isItemClickMove=!0,K(i.value.lng,i.value.lat),pe(!0).then(({city:n})=>{c.value=!1,y("done",{...i.value||{},city:n})}).catch(n=>{console.error(n),c.value=!1,y("done",i.value||{})})};return B(()=>e.selected,()=>{ve()}),B(()=>e.darkMode,n=>{e.mapStyle||me(n)}),B(()=>e.mapStyle,n=>{n&&me(n)}),B(()=>e.mode,n=>{if(f.value="",w.value=[],o.selectedSuggestion=null,o.lastSuggestion="",H(),n!=="poi"&&i.value){const{lng:a,lat:u}=i.value.location;z(a,u)}if(!v.value.length&&(n==="poi"||n==="keyword"))if(i.value){const{lng:a,lat:u}=i.value.location;W(a,u)}else{const{lng:a,lat:u}=o.mapIns.getCenter();W(a,u)}}),B(()=>e.mapKey,()=>{G(),fe()}),ae(()=>{fe()}),le(()=>{G()}),{SearchOutlined:ge,mapRef:M,autocompleteRef:p,listRef:s,loading:l,poiLoading:r,confirmLoading:c,data:v,suggestionData:w,centerIconClass:t,keywords:f,current:i,confirmDisabled:g,keywordMode:d,poiMode:m,getMapIns:Ce,showInitSelected:ve,handleSearch:Pe,handleSearchSelect:Le,handleItemClick:Ee,handleConfirm:Ue}}}),ln=(e,y)=>{const o=e.__vccOpts||e;for(const[M,p]of y)o[M]=p;return o},sn={class:"ele-map-view-body"},rn={ref:"mapRef",style:{height:"100%"}},un=["src"],cn={class:"ele-map-suggest-item"},dn={class:"ele-map-suggest-title"},pn={class:"ele-map-suggest-text"},mn={key:0,class:"ele-map-view-message"},fn={ref:"listRef",class:"ele-map-view-list"},vn=["onClick"],gn={class:"ele-map-view-item-body"},yn={class:"ele-map-view-item-title"},hn={key:0,class:"ele-map-view-item-text"},Mn={key:0,class:"ele-map-view-empty"},kn={class:"ele-map-view-extra"},wn={key:0,class:"ele-map-view-message"};function In(e,y,o,M,p,s){const l=U("PlusOutlined"),r=U("ElIcon"),c=U("SearchOutlined"),v=U("ElAutocomplete"),w=U("ElButton"),t=U("ElInput"),f=U("EnvironmentOutlined"),i=U("CheckCircleOutlined"),g=U("ElEmpty"),d=U("EleLoading");return C(),T(d,{loading:e.loading,class:Q(["ele-map-view",{"is-poi-mode":e.poiMode}]),style:x({height:e.height})},{default:_(()=>[L("div",sn,[L("div",rn,null,512),e.poiMode?(C(),$(J,{key:0},[k(r,{class:"ele-map-view-icon-plus"},{default:_(()=>[k(l)]),_:1}),L("img",{src:e.markerSrc,class:Q(e.centerIconClass)},null,10,un)],64)):j("",!0),e.filterable&&!e.keywordMode?(C(),$("div",{key:1,class:"ele-map-view-search",style:x(e.searchStyle)},[k(v,{ref:"autocompleteRef",valueKey:"name",clearable:!0,modelValue:e.keywords,"onUpdate:modelValue":y[0]||(y[0]=m=>e.keywords=m),placeholder:e.searchPlaceholder,popperClass:"ele-map-suggest-popper",fetchSuggestions:e.handleSearch,onSelect:e.handleSearchSelect},{prefix:_(()=>[k(r,{class:"el-input__icon"},{default:_(()=>[k(c)]),_:1})]),default:_(({item:m})=>[L("div",cn,[L("div",dn,O(m.name),1),L("div",pn,O(m.district),1)])]),_:1},8,["modelValue","placeholder","fetchSuggestions","onSelect"])],4)):j("",!0),!e.poiMode&&!e.keywordMode?(C(),$(J,{key:2},[e.confirmDisabled&&e.clickMessage?(C(),$("div",mn,O(e.clickMessage),1)):(C(),T(w,{key:1,type:"primary",loading:e.confirmLoading,disabled:e.confirmDisabled,class:"ele-map-view-btn-ok",onClick:e.handleConfirm},{default:_(()=>[N(O(e.okText),1)]),_:1},8,["loading","disabled","onClick"]))],64)):j("",!0)]),e.keywordMode||e.poiMode?(C(),T(d,{key:0,loading:e.poiLoading,style:x(e.sideStyle),class:"ele-map-view-side"},{default:_(()=>[e.keywordMode?(C(),$("div",{key:0,class:"ele-map-view-search",style:x(e.searchStyle)},[k(t,{clearable:!0,modelValue:e.keywords,"onUpdate:modelValue":y[1]||(y[1]=m=>e.keywords=m),prefixIcon:e.SearchOutlined,placeholder:e.searchPlaceholder,validateEvent:!1,onChange:e.handleSearch},null,8,["modelValue","prefixIcon","placeholder","onChange"])],4)):j("",!0),L("div",fn,[(C(!0),$(J,null,ke(e.data,m=>(C(),$("div",{key:m.key,class:Q(["ele-map-view-item",{"is-active":m===e.current}]),onClick:b=>e.handleItemClick(m)},[k(r,{class:"ele-map-view-item-icon"},{default:_(()=>[k(f)]),_:1}),L("div",gn,[L("div",yn,O(m.name),1),m.address?(C(),$("div",hn,O(m.address),1)):j("",!0)]),k(r,{class:"ele-map-view-item-radio"},{default:_(()=>[k(i)]),_:1})],10,vn))),128)),!e.data||!e.data.length?(C(),$("div",Mn,[k(g,oe({imageSize:80},e.emptyProps||{}),null,16)])):j("",!0)],512),L("div",kn,[e.confirmDisabled&&e.message?(C(),$("div",wn,O(e.message),1)):(C(),T(w,{key:1,type:"primary",loading:e.confirmLoading,disabled:e.confirmDisabled,class:"ele-map-view-btn-ok",onClick:e.handleConfirm},{default:_(()=>[N(O(e.okText),1)]),_:1},8,["loading","disabled","onClick"]))])]),_:1},8,["loading","style"])):j("",!0)]),_:1},8,["loading","class","style"])}const _n=ln(an,[["render",In]]),Sn=he({name:"EleMapPicker",components:{EleModal:Ke,MapView:_n},props:nn,emits:on,setup(e,{emit:y}){const{lang:o,globalConfig:M}=Ne("map",e),p=Fe(e),s=E(null),l=Z(()=>e.mapKey||M.mapKey),r=Z(()=>We(e,tn)),c=t=>{y("update:modelValue",t)},v=t=>{y("mapDone",t)},w=t=>{y("done",t)};return B(()=>e.modelValue,t=>{t&&s.value&&s.value.showInitSelected()}),{lang:o,isResponsive:p,mapRef:s,aMapKey:l,mapProps:r,updateModelValue:c,handleMapDone:v,handleDone:w}}}),bn=(e,y)=>{const o=e.__vccOpts||e;for(const[M,p]of y)o[M]=p;return o};function An(e,y,o,M,p,s){const l=U("MapView"),r=U("EleModal");return C(),T(r,oe({width:"740px",title:e.lang.title},e.modalProps||{},{modelValue:e.modelValue,class:["ele-map-picker",{"is-responsive":e.isResponsive}],"onUpdate:modelValue":e.updateModelValue}),Ze({default:_(()=>[k(l,oe(e.mapProps,{ref:"mapRef",message:e.lang.message,clickMessage:e.lang.clickMessage,searchPlaceholder:e.lang.placeholder,okText:e.lang.ok,mapKey:e.aMapKey,mode:e.keywordMode?"keyword":e.mode,onMapDone:e.handleMapDone,onDone:e.handleDone}),null,16,["message","clickMessage","searchPlaceholder","okText","mapKey","mode","onMapDone","onDone"])]),_:2},[ke(Object.keys(e.$slots).filter(c=>c!=="default"),c=>({name:c,fn:_(v=>[xe(e.$slots,c,Je(qe(v||{})))])}))]),1040,["title","modelValue","class","onUpdate:modelValue"])}const Cn=bn(Sn,[["render",An]]),Pn={style:{"margin-top":"12px"}},Ln={style:{"margin-top":"12px"}},En={style:{"margin-top":"12px"}},Un={__name:"demo-picker",setup(e){const y=se(),{darkMode:o}=ie(y),M=E(!1),p=E("lnglat"),s=He({location:"",address:"",lngAndLat:""}),l=()=>{M.value=!0},r=c=>{var v,w,t;s.location=`${(v=c.city)==null?void 0:v.province}/${(w=c.city)==null?void 0:w.city}/${(t=c.city)==null?void 0:t.district}`,s.address=`${c.name} ${c.address}`,s.lngAndLat=`${c.lng},${c.lat}`,M.value=!1};return(c,v)=>{const w=Me,t=te,f=Xe,i=re,g=Cn;return C(),$(J,null,[k(i,{header:"地图位置选择器"},{default:_(()=>[L("div",null,[k(f,{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=d=>p.value=d),items:[{title:"点击地图模式",command:"lnglat"},{title:"关键字检索模式",command:"keyword"},{title:"POI检索模式",command:"poi"}],trigger:"click",style:{"margin-right":"12px"}},{default:_(({selected:d})=>[k(t,{class:"ele-btn-icon",style:{width:"134px"}},{default:_(()=>[L("span",null,O(d.title),1),k(w,{size:12,style:{margin:"0 -4px 0 2px"}},{default:_(()=>[k(ye(Ge))]),_:1})]),_:2},1024)]),_:1},8,["modelValue"]),k(t,{type:"primary",class:"ele-btn-icon",onClick:l},{default:_(()=>v[2]||(v[2]=[N(" 打开位置选择 ")])),_:1})]),L("div",Pn,"经 纬 度 : "+O(s.lngAndLat),1),L("div",Ln,"选中位置: "+O(s.location),1),L("div",En,"详细地址: "+O(s.address),1)]),_:1}),k(g,{modelValue:M.value,"onUpdate:modelValue":v[1]||(v[1]=d=>M.value=d),"dark-mode":ye(o),"return-regions":!0,mode:p.value,onDone:r},null,8,["modelValue","dark-mode","mode"])],64)}}},On={__name:"demo-map",setup(e){const y=se(),{darkMode:o}=ie(y),M=E(null);let p;const s=()=>{ue.load({key:we,version:"2.0",plugins:["AMap.InfoWindow","AMap.Marker"]}).then(l=>{const r={zoom:13,center:[114.346084,30.516215],mapStyle:o.value?"amap://styles/dark":void 0};p=new l.Map(M.value,r);const c=new l.InfoWindow({content:`
            <div style="color: #333;">
              <div style="padding: 5px;font-size: 16px;">武汉易云智科技有限公司</div>
              <div style="padding: 0 5px;">地址: 湖北省武汉市洪山区雄楚大道222号</div>
              <div style="padding: 0 5px;">电话: 020-123456789</div>
            </div>
            <a
              style="padding: 8px 0 0 5px;text-decoration: none;display: inline-block;color: #1677ff;"
              href="//uri.amap.com/marker?position=114.346084,30.511215&name=武汉易云智科技有限公司"
              target="_blank">到这里去→
            </a>
          `});c.open(p,[114.346084,30.511215]);const v=new l.Icon({size:new l.Size(25,34),image:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-red.png",imageSize:new l.Size(25,34)}),w=new l.Marker({icon:v,position:[114.346084,30.511215],offset:new l.Pixel(-12,-28)});w.setMap(p),w.on("click",()=>{c.open(p)})}).catch(l=>{console.error(l)})};return ae(()=>{s()}),le(()=>{p&&(p.destroy(),p=null)}),B(o,l=>{p&&(l?p.setMapStyle("amap://styles/dark"):p.setMapStyle("amap://styles/normal"))}),(l,r)=>{const c=re;return C(),T(c,{header:"官网底部地图"},{default:_(()=>[L("div",{ref_key:"locationMapRef",ref:M,style:{height:"360px","max-width":"800px"}},null,512)]),_:1})}}},Vn={__name:"demo-track",setup(e){const y=se(),{darkMode:o}=ie(y),M=E(null);let p,s;const l=[[116.478935,39.997761],[116.478939,39.997825],[116.478912,39.998549],[116.478912,39.998549],[116.478998,39.998555],[116.478998,39.998555],[116.479282,39.99856],[116.479658,39.998528],[116.480151,39.998453],[116.480784,39.998302],[116.480784,39.998302],[116.481149,39.998184],[116.481573,39.997997],[116.481863,39.997846],[116.482072,39.997718],[116.482362,39.997718],[116.483633,39.998935],[116.48367,39.998968],[116.484648,39.999861]],r=()=>{ue.load({key:we,version:"2.0",plugins:["AMap.MoveAnimation","AMap.Marker","AMap.Polyline"]}).then(t=>{const f={zoom:17,center:[116.478935,39.997761],mapStyle:o.value?"amap://styles/dark":void 0};p=new t.Map(M.value,f),s=new t.Marker({map:p,position:[116.478935,39.997761],icon:"https://a.amap.com/jsapi_demos/static/demo-center-v2/car.png",offset:new t.Pixel(-13,-26)}),new t.Polyline({map:p,path:l,showDir:!0,strokeColor:"#2288FF",strokeOpacity:1,strokeWeight:6});const i=new t.Polyline({map:p,showDir:!0,strokeColor:"#44BB55",strokeOpacity:1,strokeWeight:6});s.on("moving",g=>{i.setPath(g.passedPath)}),p.setFitView()}).catch(t=>{console.error(t)})},c=()=>{s&&(s.stopMove(),s.moveAlong(l,{duration:200,autoRotation:!0}))},v=()=>{s&&s.pauseMove()},w=()=>{s&&s.resumeMove()};return ae(()=>{r()}),le(()=>{p&&(p.destroy(),p=null)}),B(o,()=>{p&&(o.value?p.setMapStyle("amap://styles/dark"):p.setMapStyle("amap://styles/normal"))}),(t,f)=>{const i=te,g=re;return C(),T(g,{header:"轨迹展示及轨迹回放"},{default:_(()=>[L("div",{ref_key:"trackMapRef",ref:M,style:{height:"360px","max-width":"800px","margin-bottom":"16px"}},null,512),L("div",null,[k(i,{type:"primary",class:"ele-btn-icon",onClick:c},{default:_(()=>f[0]||(f[0]=[N(" 开始移动 ")])),_:1}),k(i,{type:"primary",class:"ele-btn-icon",onClick:v},{default:_(()=>f[1]||(f[1]=[N(" 暂停移动 ")])),_:1}),k(i,{type:"primary",class:"ele-btn-icon",onClick:w},{default:_(()=>f[2]||(f[2]=[N(" 继续移动 ")])),_:1})])]),_:1})}}},$n={name:"ExtensionMap"},zn=Object.assign($n,{setup(e){return(y,o)=>{const M=Ve;return C(),T(M,null,{default:_(()=>[k(Un),k(On),k(Vn)]),_:1})}}});export{zn as default};
