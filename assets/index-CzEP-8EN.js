import{T,r as c,d as r,G as V,o as w,c as z,e as t,f as n,h as e,k as C,p as b,H as k,l as B,m as D,z as L,I as F,D as S,B as O,v as Q}from"./index-BmfY8c7d.js";function j(p){return T({url:"/system/online/list",method:"get",params:p})}function E(p){return T({url:"/system/online/"+p,method:"delete"})}const G={class:"app-container"},H=O({name:"Online"}),M=Object.assign(H,{setup(p){const{proxy:f}=Q(),N=c([]),_=c(!0),g=c(0),a=c(1),s=c(10),u=c({ipaddr:void 0,userName:void 0});function h(){_.value=!0,j(u.value).then(i=>{N.value=i.rows,g.value=i.total,_.value=!1})}function m(){a.value=1,h()}function I(){f.resetForm("queryRef"),m()}function R(i){f.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?').then(function(){return E(i.tokenId)}).then(()=>{h(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}return h(),(i,o)=>{const x=r("el-input"),v=r("el-form-item"),y=r("el-button"),U=r("el-form"),d=r("el-table-column"),$=r("el-table"),q=r("pagination"),K=V("hasPermi"),P=V("loading");return w(),z("div",G,[t(U,{model:e(u),ref:"queryRef",inline:!0},{default:n(()=>[t(v,{label:"登录地址",prop:"ipaddr"},{default:n(()=>[t(x,{modelValue:e(u).ipaddr,"onUpdate:modelValue":o[0]||(o[0]=l=>e(u).ipaddr=l),placeholder:"请输入登录地址",clearable:"",style:{width:"200px"},onKeyup:C(m,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{label:"用户名称",prop:"userName"},{default:n(()=>[t(x,{modelValue:e(u).userName,"onUpdate:modelValue":o[1]||(o[1]=l=>e(u).userName=l),placeholder:"请输入用户名称",clearable:"",style:{width:"200px"},onKeyup:C(m,["enter"])},null,8,["modelValue"])]),_:1}),t(v,null,{default:n(()=>[t(y,{type:"primary",icon:"Search",onClick:m},{default:n(()=>[b("搜索")]),_:1}),t(y,{icon:"Refresh",onClick:I},{default:n(()=>[b("重置")]),_:1})]),_:1})]),_:1},8,["model"]),k((w(),B($,{data:e(N).slice((e(a)-1)*e(s),e(a)*e(s)),style:{width:"100%"}},{default:n(()=>[t(d,{label:"序号",width:"50",type:"index",align:"center"},{default:n(l=>[D("span",null,L((e(a)-1)*e(s)+l.$index+1),1)]),_:1}),t(d,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),t(d,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),t(d,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),t(d,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:n(l=>[D("span",null,L(i.parseTime(l.row.loginTime)),1)]),_:1}),t(d,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[k((w(),B(y,{link:"",type:"primary",icon:"Delete",onClick:A=>R(l.row)},{default:n(()=>[b("强退")]),_:2},1032,["onClick"])),[[K,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[P,e(_)]]),k(t(q,{total:e(g),page:e(a),"onUpdate:page":o[2]||(o[2]=l=>S(a)?a.value=l:null),limit:e(s),"onUpdate:limit":o[3]||(o[3]=l=>S(s)?s.value=l:null)},null,8,["total","page","limit"]),[[F,e(g)>0]])])}}});export{M as default};
