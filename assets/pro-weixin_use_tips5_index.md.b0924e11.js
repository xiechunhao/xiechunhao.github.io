import{_ as s,o as a,c as n,O as o}from"./chunks/framework.57763b9a.js";const d=JSON.parse('{"title":"小程序分包加载","description":"","frontmatter":{},"headers":[],"relativePath":"pro-weixin/use/tips5/index.md","filePath":"pro-weixin/use/tips5/index.md","lastUpdated":1688802289000}'),l={name:"pro-weixin/use/tips5/index.md"},p=o(`<h1 id="小程序分包加载" tabindex="-1">小程序分包加载 <a class="header-anchor" href="#小程序分包加载" aria-label="Permalink to &quot;小程序分包加载&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>分包加载是优化小程序加载速度的一种手段</p></div><h2 id="_1-为什么使用" tabindex="-1">1. 为什么使用？ <a class="header-anchor" href="#_1-为什么使用" aria-label="Permalink to &quot;1. 为什么使用？&quot;">​</a></h2><ol><li>微信平台对小程序单个包的代码体积限制为 <code>2M</code>，超过 2M 的情况下可以采用分包来解决</li><li>即使小程序代码体积没有超过 <code>2M</code> 时也可以拆分成多个包来<code>实现按需加载</code></li><li>配置文件能忽略的只有静态资源，代码无法被忽略</li></ol><h2 id="_2-使用分包" tabindex="-1">2 使用分包 <a class="header-anchor" href="#_2-使用分包" aria-label="Permalink to &quot;2 使用分包&quot;">​</a></h2><ol><li><p>在全局配置中（<code>app.json</code>）使用 <code>subPackages</code> 来配置分包的根目录和分包中的页面路径：</p><ul><li>• <code>root</code> 指定分包的根目录</li><li>• <code>pages</code> 指定分包中的页面路径</li><li>• 注：根目录和路径不存在时，小程序开发者工具会自动创建。</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">subPackages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">subpkg_test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">pages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pages/test/index</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">subpkg_user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">pages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pages/profile/index</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ol><h2 id="_3-分包预加载" tabindex="-1">3. 分包预加载 <a class="header-anchor" href="#_3-分包预加载" aria-label="Permalink to &quot;3. 分包预加载&quot;">​</a></h2><ol><li>在实际使用分包的过程中，纯粹的按需加载也不是最优的方案，可以将即将访问的页面的包预先下载下来，这样能进一步提升小程序加载的速度，通过 <code>preloadRule</code> 来配置预加载的包：</li></ol><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">preloadRule</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">pages/framework/index</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">network</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">all</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">packages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">subpkg_user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p>上述代码的含义是在加载 <code>pages/framework/index</code> 页面时，自动的去加载 <code>subpkg_user</code> 这个分包，等到要访问这个分包中的页面时会直接打开。</p></blockquote>`,10),e=[p];function t(c,r,D,F,y,i){return a(),n("div",null,e)}const u=s(l,[["render",t]]);export{d as __pageData,u as default};
