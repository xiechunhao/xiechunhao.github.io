import{r as b,o as p,m as E,b as l,w as t,d as s,c as v,a8 as K,fB as W,E as u,aC as B,h as U,ay as I,j as P,fC as j,fD as M,_ as O,aN as q,cf as z,a as D,J,R as L,u as R,e as N,a5 as S,bW as A,fE as F,bP as G}from"./index-C4BxmZrN.js";import{i as H}from"./index-CkGVv88Q.js";import{i as T}from"./index-BCHJo1Hi.js";import"./index-DPWieFbN.js";import"./index-BY7TmcLY.js";import"./index-Cw5RFCD5.js";import"./virtual-list-CYzSvSUd.js";import"./index-CuklncWx.js";import"./index-CL6ZmOyB.js";import{i as Q}from"./index-DSHqkOzX.js";import"./isArrayLikeObject-XYcYxEsS.js";import"./vuedraggable.umd-BuphSp9t.js";const X={__name:"message-notice",emits:["reload"],setup($,{emit:x}){const h=x,d=b(null),f=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"通知标题",minWidth:110},{prop:"time",label:"通知时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),i=b([]),y=({pages:n,where:e,orders:a})=>W({...e,...a,...n}),r=n=>{if(!(n==null?i.value:[n]).length){u.error("请至少选择一条数据");return}u.success("点击了确认"),c()},_=n=>{if(!(n==null?i.value:[n]).length){u.error("请至少选择一条数据");return}u.error("点击了删除")},c=()=>{h("reload")};return(n,e)=>{const a=B,g=U,k=I,w=P,C=T;return p(),E("div",null,[l(C,{ref_key:"tableRef",ref:d,"row-key":"id",columns:f.value,datasource:y,"show-overflow-tooltip":!0,selections:i.value,"onUpdate:selections":e[2]||(e[2]=o=>i.value=o),"highlight-current-row":!0,"export-config":{fileName:"系统通知数据"}},{toolbar:t(()=>[l(a,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=o=>r())},{default:t(()=>[s(" 批量确认 ")]),_:1}),l(a,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=o=>_())},{default:t(()=>[s(" 删除通知 ")]),_:1})]),status:t(({row:o})=>[o.status===0?(p(),v(g,{key:0,type:"warning"},{default:t(()=>[s("未确认")]),_:1})):o.status===1?(p(),v(g,{key:1,type:"info"},{default:t(()=>[s("已确认")]),_:1})):K("",!0)]),action:t(({row:o})=>[l(k,{type:"primary",underline:!1,onClick:m=>r(o)},{default:t(()=>[s(" 确认 ")]),_:2},1032,["onClick"]),l(w,{direction:"vertical"}),l(k,{type:"danger",underline:!1,onClick:m=>_(o)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},Y={__name:"message-letter",emits:["reload"],setup($,{emit:x}){const h=x,d=b(null),f=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"私信内容",minWidth:110},{prop:"time",label:"发送时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),i=b([]),y=({pages:e,where:a,orders:g})=>j({...a,...g,...e}),r=e=>{console.log(JSON.stringify(e)),u.success("点击了回复")},_=e=>{if(!(e==null?i.value:[e]).length){u.error("请至少选择一条数据");return}u.error("点击了删除")},c=()=>{if(!i.value.length){u.error("请至少选择一条数据");return}u.success("点击了标记已读"),n()},n=()=>{h("reload")};return(e,a)=>{const g=B,k=U,w=I,C=P,o=T;return p(),E("div",null,[l(o,{ref_key:"tableRef",ref:d,"row-key":"id",columns:f.value,datasource:y,"show-overflow-tooltip":!0,selections:i.value,"onUpdate:selections":a[1]||(a[1]=m=>i.value=m),"highlight-current-row":!0,"export-config":{fileName:"用户私信数据"}},{toolbar:t(()=>[l(g,{type:"primary",class:"ele-btn-icon",onClick:c},{default:t(()=>[s(" 标记已读 ")]),_:1}),l(g,{type:"danger",class:"ele-btn-icon",onClick:a[0]||(a[0]=m=>_())},{default:t(()=>[s(" 删除消息 ")]),_:1})]),status:t(({row:m})=>[m.status===0?(p(),v(k,{key:0,type:"warning"},{default:t(()=>[s("未读")]),_:1})):m.status===1?(p(),v(k,{key:1,type:"info"},{default:t(()=>[s("已读")]),_:1})):K("",!0)]),action:t(({row:m})=>[l(w,{type:"primary",underline:!1,onClick:V=>r(m)},{default:t(()=>[s(" 回复 ")]),_:2},1032,["onClick"]),l(C,{direction:"vertical",style:{margin:"0"}}),l(w,{type:"danger",underline:!1,onClick:V=>_(m)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},Z={__name:"message-todo",emits:["reload"],setup($,{emit:x}){const h=x,d=b(null),f=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"待办内容",minWidth:110},{prop:"time",label:"结束时间",width:140,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),i=b([]),y=({pages:n,where:e,orders:a})=>M({...e,...a,...n}),r=n=>{if(!(n==null?i.value:[n]).length){u.error("请至少选择一条数据");return}u.success("点击了完成"),c()},_=n=>{if(!(n==null?i.value:[n]).length){u.error("请至少选择一条数据");return}u.error("点击了删除")},c=()=>{h("reload")};return(n,e)=>{const a=B,g=U,k=I,w=P,C=T;return p(),E("div",null,[l(C,{ref_key:"tableRef",ref:d,"row-key":"id",columns:f.value,datasource:y,"show-overflow-tooltip":!0,selections:i.value,"onUpdate:selections":e[2]||(e[2]=o=>i.value=o),"highlight-current-row":!0,"export-config":{fileName:"待办事项数据"}},{toolbar:t(()=>[l(a,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=o=>r())},{default:t(()=>[s(" 批量完成 ")]),_:1}),l(a,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=o=>_())},{default:t(()=>[s(" 删除待办 ")]),_:1})]),status:t(({row:o})=>[o.status===0?(p(),v(g,{key:0,type:"warning"},{default:t(()=>[s("未完成")]),_:1})):o.status===1?(p(),v(g,{key:1,type:"info"},{default:t(()=>[s("已完成")]),_:1})):K("",!0)]),action:t(({row:o})=>[l(k,{type:"primary",underline:!1,onClick:m=>r(o)},{default:t(()=>[s(" 完成 ")]),_:2},1032,["onClick"]),l(w,{direction:"vertical"}),l(k,{type:"danger",underline:!1,onClick:m=>_(o)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}},ee={class:"message-side"},te={class:"message-body"},ne={name:"UserMessage"},oe=Object.assign(ne,{setup($){const{currentRoute:x}=q(),{mobile:h}=z(),d=b("notice"),f=D({notice:0,letter:0,todo:0}),i=J(()=>[{index:"notice",path:"/user/message?type=notice",title:"系统通知",badge:{value:f.notice}},{index:"letter",path:"/user/message?type=letter",title:"用户私信",badge:{value:f.letter}},{index:"todo",path:"/user/message?type=todo",title:"待办事项",badge:{value:f.todo}}]);L(x,r=>{const{path:_,query:c}=R(r);if(_==="/user/message"){const n="notice";c.type?typeof c.type=="string"?d.value=c.type:c.type.length&&c.type[0]?d.value=c.type[0]:d.value=n:d.value=n}},{immediate:!0});const y=()=>{F().then(r=>{Object.assign(f,r)}).catch(r=>{u.error(r.message)})};return y(),(r,_)=>{const c=G,n=H,e=Q;return p(),v(e,{"multi-card":!1},{default:t(()=>[l(n,{"body-style":{padding:0}},{default:t(()=>[N("div",{class:S(["message-wrapper",{"is-mobile":R(h)}])},[N("div",ee,[l(c,{items:i.value,"default-active":d.value,mode:R(h)?"horizontal":"vertical"},null,8,["items","default-active","mode"])]),N("div",te,[l(A,{name:"slide-right",mode:"out-in"},{default:t(()=>[d.value=="notice"?(p(),v(X,{key:0,onReload:y})):d.value=="todo"?(p(),v(Z,{key:1,onReload:y})):(p(),v(Y,{key:2,onReload:y}))]),_:1})])],2)]),_:1})]),_:1})}}}),ye=O(oe,[["__scopeId","data-v-4b4e6726"]]);export{ye as default};
