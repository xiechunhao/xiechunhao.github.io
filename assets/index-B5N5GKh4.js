import{ds as _a,J as fe,a0 as de,T as Da,a8 as Se,aO as Pa,aN as La,g as ve,cl as ta,dG as la,cU as Ma,L as sa,H as b,ai as Z,o as f,l as L,a7 as G,c as B,aF as ge,w as _,d as ce,b as J,a4 as D,F as oe,av as na,cx as oa,e$ as Ia,r as T,m as ue,e as Ie,t as le,a1 as Ne,N as Ba,cp as Be,cn as qe,cK as Fa,f5 as je,cB as me,a2 as ia,bP as ie,eD as za,f6 as xa,cZ as Ee,cY as we,Y as Aa,a as Ze,O as ne,f7 as Ra,R as ca,V as re,bZ as ra,f8 as Ha,bY as H,f9 as Ce,fa as ua,a9 as da,cs as Oa,ct as Ka,e_ as Ua,fb as We,cu as qa,dw as ja,cw as Za,cy as Wa,cz as Ya,fc as Ga,cE as Ja,cA as Xa,bI as Qa,fd as et,dE as at,bT as ke,u,a5 as tt,aH as lt,ck as st,cJ as nt,k as Fe,cG as Ye,cM as ot,fe as it,cR as ct,U as rt,bU as Ge,ff as ut,X as dt,E as pt,s as ft,fg as ht,aZ as vt}from"./index-BF2fBoPb.js";import{u as Je,c as Xe}from"./arrays-6TrVLtTe.js";import{c as pa}from"./cloneDeep-Zuu3-0H5.js";var gt=1/0;function mt(e){var l=e==null?0:e.length;return l?_a(e,gt):[]}var bt=fe({name:"NodeContent",setup(){return{ns:de("cascader-node")}},render(){const{ns:e}=this,{node:l,panel:s}=this.$parent,{data:t,label:n}=l,{renderLabelFn:p}=s;return Da("span",{class:e.e("label")},p?p({node:l,data:t}):n)}});const xe=Symbol(),yt=fe({name:"ElCascaderNode",components:{ElCheckbox:Pa,ElRadio:La,NodeContent:bt,ElIcon:ve,Check:ta,Loading:la,ArrowRight:Ma},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:l}){const s=sa(xe),t=de("cascader-node"),n=b(()=>s.isHoverMenu),p=b(()=>s.config.multiple),c=b(()=>s.config.checkStrictly),g=b(()=>{var E;return(E=s.checkedNodes[0])==null?void 0:E.uid}),d=b(()=>e.node.isDisabled),k=b(()=>e.node.isLeaf),h=b(()=>c.value&&!k.value||!d.value),m=b(()=>O(s.expandingNode)),N=b(()=>c.value&&s.checkedNodes.some(O)),O=E=>{var V;const{level:q,uid:se}=e.node;return((V=E==null?void 0:E.pathNodes[q-1])==null?void 0:V.uid)===se},F=()=>{m.value||s.expandNode(e.node)},M=E=>{const{node:V}=e;E!==V.checked&&s.handleCheckChange(V,E)},x=()=>{s.lazyLoad(e.node,()=>{k.value||F()})},A=E=>{n.value&&(W(),!k.value&&l("expand",E))},W=()=>{const{node:E}=e;!h.value||E.loading||(E.loaded?F():x())},I=()=>{n.value&&!k.value||(k.value&&!d.value&&!c.value&&!p.value?P(!0):W())},Y=E=>{c.value?(M(E),e.node.loaded&&F()):P(E)},P=E=>{e.node.loaded?(M(E),!c.value&&F()):x()};return{panel:s,isHoverMenu:n,multiple:p,checkStrictly:c,checkedNodeId:g,isDisabled:d,isLeaf:k,expandable:h,inExpandingPath:m,inCheckedPath:N,ns:t,handleHoverExpand:A,handleExpand:W,handleClick:I,handleCheck:P,handleSelectCheck:Y}}});function kt(e,l,s,t,n,p){const c=Z("el-checkbox"),g=Z("el-radio"),d=Z("check"),k=Z("el-icon"),h=Z("node-content"),m=Z("loading"),N=Z("arrow-right");return f(),L("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:D([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[G(" prefix "),e.multiple?(f(),B(c,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ge(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(f(),B(g,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ge(()=>{},["stop"])},{default:_(()=>[G(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ce("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(f(),B(k,{key:2,class:D(e.ns.e("prefix"))},{default:_(()=>[J(d)]),_:1},8,["class"])):G("v-if",!0),G(" content "),J(h),G(" postfix "),e.isLeaf?G("v-if",!0):(f(),L(oe,{key:3},[e.node.loading?(f(),B(k,{key:0,class:D([e.ns.is("loading"),e.ns.e("postfix")])},{default:_(()=>[J(m)]),_:1},8,["class"])):(f(),B(k,{key:1,class:D(["arrow-right",e.ns.e("postfix")])},{default:_(()=>[J(N)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var Ct=Se(yt,[["render",kt],["__file","node.vue"]]);const Nt=fe({name:"ElCascaderMenu",components:{Loading:la,ElIcon:ve,ElScrollbar:na,ElCascaderNode:Ct},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const l=Ba(),s=de("cascader-menu"),{t}=oa(),n=Ia();let p=null,c=null;const g=sa(xe),d=T(null),k=b(()=>!e.nodes.length),h=b(()=>!g.initialLoaded),m=b(()=>`${n.value}-${e.index}`),N=x=>{p=x.target},O=x=>{if(!(!g.isHoverMenu||!p||!d.value))if(p.contains(x.target)){F();const A=l.vnode.el,{left:W}=A.getBoundingClientRect(),{offsetWidth:I,offsetHeight:Y}=A,P=x.clientX-W,E=p.offsetTop,V=E+p.offsetHeight;d.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${P} ${E} L${I} 0 V${E} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${P} ${V} L${I} ${Y} V${V} Z" />
        `}else c||(c=window.setTimeout(M,g.config.hoverThreshold))},F=()=>{c&&(clearTimeout(c),c=null)},M=()=>{d.value&&(d.value.innerHTML="",F())};return{ns:s,panel:g,hoverZone:d,isEmpty:k,isLoading:h,menuId:m,t,handleExpand:N,handleMouseMove:O,clearHoverZone:M}}});function Et(e,l,s,t,n,p){const c=Z("el-cascader-node"),g=Z("loading"),d=Z("el-icon"),k=Z("el-scrollbar");return f(),B(k,{key:e.menuId,tag:"ul",role:"menu",class:D(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:_(()=>{var h;return[(f(!0),L(oe,null,ue(e.nodes,m=>(f(),B(c,{key:m.uid,node:m,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),L("div",{key:0,class:D(e.ns.e("empty-text"))},[J(d,{size:"14",class:D(e.ns.is("loading"))},{default:_(()=>[J(g)]),_:1},8,["class"]),Ie(" "+le(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),L("div",{key:1,class:D(e.ns.e("empty-text"))},[Ne(e.$slots,"empty",{},()=>[Ie(le(e.t("el.cascader.noData")),1)])],2)):(h=e.panel)!=null&&h.isHoverMenu?(f(),L("svg",{key:2,ref:"hoverZone",class:D(e.ns.e("hover-zone"))},null,2)):G("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var wt=Se(Nt,[["render",Et],["__file","menu.vue"]]);let St=0;const $t=e=>{const l=[e];let{parent:s}=e;for(;s;)l.unshift(s),s=s.parent;return l};class pe{constructor(l,s,t,n=!1){this.data=l,this.config=s,this.parent=t,this.root=n,this.uid=St++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:c,children:g}=s,d=l[g],k=$t(this);this.level=n?0:t?t.level+1:1,this.value=l[p],this.label=l[c],this.pathNodes=k,this.pathValues=k.map(h=>h.value),this.pathLabels=k.map(h=>h.label),this.childrenData=d,this.children=(d||[]).map(h=>new pe(h,s,this)),this.loaded=!s.lazy||this.isLeaf||!Be(d)}get isDisabled(){const{data:l,parent:s,config:t}=this,{disabled:n,checkStrictly:p}=t;return(qe(n)?n(l,this):!!l[n])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:l,config:s,childrenData:t,loaded:n}=this,{lazy:p,leaf:c}=s,g=qe(c)?c(l,this):l[c];return Fa(g)?p&&!n?!1:!(Array.isArray(t)&&t.length):!!g}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(l){const{childrenData:s,children:t}=this,n=new pe(l,this.config,this);return Array.isArray(s)?s.push(l):this.childrenData=[l],t.push(n),n}calcText(l,s){const t=l?this.pathLabels.join(s):this.label;return this.text=t,t}broadcast(l,...s){const t=`onParent${je(l)}`;this.children.forEach(n=>{n&&(n.broadcast(l,...s),n[t]&&n[t](...s))})}emit(l,...s){const{parent:t}=this,n=`onChild${je(l)}`;t&&(t[n]&&t[n](...s),t.emit(l,...s))}onParentCheck(l){this.isDisabled||this.setCheckState(l)}onChildCheck(){const{children:l}=this,s=l.filter(n=>!n.isDisabled),t=s.length?s.every(n=>n.checked):!1;this.setCheckState(t)}setCheckState(l){const s=this.children.length,t=this.children.reduce((n,p)=>{const c=p.checked?1:p.indeterminate?.5:0;return n+c},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&l,this.indeterminate=this.loaded&&t!==s&&t>0}doCheck(l){if(this.checked===l)return;const{checkStrictly:s,multiple:t}=this.config;s||!t?this.checked=l:(this.broadcast("check",l),this.setCheckState(l),this.emit("check"))}}const ze=(e,l)=>e.reduce((s,t)=>(t.isLeaf?s.push(t):(!l&&s.push(t),s=s.concat(ze(t.children,l))),s),[]);class Qe{constructor(l,s){this.config=s;const t=(l||[]).map(n=>new pe(n,this.config));this.nodes=t,this.allNodes=ze(t,!1),this.leafNodes=ze(t,!0)}getNodes(){return this.nodes}getFlattedNodes(l){return l?this.leafNodes:this.allNodes}appendNode(l,s){const t=s?s.appendChild(l):new pe(l,this.config);s||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(l,s){l.forEach(t=>this.appendNode(t,s))}getNodeByValue(l,s=!1){return!l&&l!==0?null:this.getFlattedNodes(s).find(n=>me(n.value,l)||me(n.pathValues,l))||null}getSameNode(l){return l&&this.getFlattedNodes(!1).find(({value:t,level:n})=>me(l.value,t)&&l.level===n)||null}}const fa=ia({modelValue:{type:ie([Number,String,Array])},options:{type:ie(Array),default:()=>[]},props:{type:ie(Object),default:()=>({})}}),Tt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:za,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Vt=e=>b(()=>({...Tt,...e.props})),ea=e=>{if(!e)return 0;const l=e.id.split("-");return Number(l[l.length-2])},_t=e=>{if(!e)return;const l=e.querySelector("input");l?l.click():xa(e)&&e.click()},Dt=(e,l)=>{const s=l.slice(0),t=s.map(p=>p.uid),n=e.reduce((p,c)=>{const g=t.indexOf(c.uid);return g>-1&&(p.push(c),s.splice(g,1),t.splice(g,1)),p},[]);return n.push(...s),n},Pt=fe({name:"ElCascaderPanel",components:{ElCascaderMenu:wt},props:{...fa,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:l,slots:s}){let t=!1;const n=de("cascader"),p=Vt(e);let c=null;const g=T(!0),d=T([]),k=T(null),h=T([]),m=T(null),N=T([]),O=b(()=>p.value.expandTrigger==="hover"),F=b(()=>e.renderLabel||s.default),M=()=>{const{options:r}=e,v=p.value;t=!1,c=new Qe(r,v),h.value=[c.getNodes()],v.lazy&&Be(e.options)?(g.value=!1,x(void 0,C=>{C&&(c=new Qe(C,v),h.value=[c.getNodes()]),g.value=!0,q(!1,!0)})):q(!1,!0)},x=(r,v)=>{const C=p.value;r=r||new pe({},C,void 0,!0),r.loading=!0;const y=w=>{const $=r,R=$.root?null:$;w&&(c==null||c.appendNodes(w,R)),$.loading=!1,$.loaded=!0,$.childrenData=$.childrenData||[],v&&v(w)};C.lazyLoad(r,y)},A=(r,v)=>{var C;const{level:y}=r,w=h.value.slice(0,y);let $;r.isLeaf?$=r.pathNodes[y-2]:($=r,w.push(r.children)),((C=m.value)==null?void 0:C.uid)!==($==null?void 0:$.uid)&&(m.value=r,h.value=w,!v&&l("expand-change",(r==null?void 0:r.pathValues)||[]))},W=(r,v,C=!0)=>{const{checkStrictly:y,multiple:w}=p.value,$=N.value[0];t=!0,!w&&($==null||$.doCheck(!1)),r.doCheck(v),V(),C&&!w&&!y&&l("close"),!C&&!w&&!y&&I(r)},I=r=>{r&&(r=r.parent,I(r),r&&A(r))},Y=r=>c==null?void 0:c.getFlattedNodes(r),P=r=>{var v;return(v=Y(r))==null?void 0:v.filter(C=>C.checked!==!1)},E=()=>{N.value.forEach(r=>r.doCheck(!1)),V(),h.value=h.value.slice(0,1),m.value=null,l("expand-change",[])},V=()=>{var r;const{checkStrictly:v,multiple:C}=p.value,y=N.value,w=P(!v),$=Dt(y,w),R=$.map(z=>z.valueByOption);N.value=$,k.value=C?R:(r=R[0])!=null?r:null},q=(r=!1,v=!1)=>{const{modelValue:C}=e,{lazy:y,multiple:w,checkStrictly:$}=p.value,R=!$;if(!(!g.value||t||!v&&me(C,k.value)))if(y&&!r){const K=Je(mt(Xe(C))).map(j=>c==null?void 0:c.getNodeByValue(j)).filter(j=>!!j&&!j.loaded&&!j.loading);K.length?K.forEach(j=>{x(j,()=>q(!1,v))}):q(!0,v)}else{const z=w?Xe(C):[C],K=Je(z.map(j=>c==null?void 0:c.getNodeByValue(j,R)));se(K,v),k.value=pa(C)}},se=(r,v=!0)=>{const{checkStrictly:C}=p.value,y=N.value,w=r.filter(z=>!!z&&(C||z.isLeaf)),$=c==null?void 0:c.getSameNode(m.value),R=v&&$||w[0];R?R.pathNodes.forEach(z=>A(z,!0)):m.value=null,y.forEach(z=>z.doCheck(!1)),Ze(w).forEach(z=>z.doCheck(!0)),N.value=w,re(X)},X=()=>{ra&&d.value.forEach(r=>{const v=r==null?void 0:r.$el;if(v){const C=v.querySelector(`.${n.namespace.value}-scrollbar__wrap`),y=v.querySelector(`.${n.b("node")}.${n.is("active")}`)||v.querySelector(`.${n.b("node")}.in-active-path`);Ha(C,y)}})},ee=r=>{const v=r.target,{code:C}=r;switch(C){case H.up:case H.down:{r.preventDefault();const y=C===H.up?-1:1;Ce(ua(v,y,`.${n.b("node")}[tabindex="-1"]`));break}case H.left:{r.preventDefault();const y=d.value[ea(v)-1],w=y==null?void 0:y.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Ce(w);break}case H.right:{r.preventDefault();const y=d.value[ea(v)+1],w=y==null?void 0:y.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Ce(w);break}case H.enter:_t(v);break}};return Aa(xe,Ze({config:p,expandingNode:m,checkedNodes:N,isHoverMenu:O,initialLoaded:g,renderLabelFn:F,lazyLoad:x,expandNode:A,handleCheckChange:W})),ne([p,()=>e.options],M,{deep:!0,immediate:!0}),ne(()=>e.modelValue,()=>{t=!1,q()},{deep:!0}),ne(()=>k.value,r=>{me(r,e.modelValue)||(l(Ee,r),l(we,r))}),Ra(()=>d.value=[]),ca(()=>!Be(e.modelValue)&&q()),{ns:n,menuList:d,menus:h,checkedNodes:N,handleKeyDown:ee,handleCheckChange:W,getFlattedNodes:Y,getCheckedNodes:P,clearCheckedNodes:E,calculateCheckedValue:V,scrollToExpandingNode:X}}});function Lt(e,l,s,t,n,p){const c=Z("el-cascader-menu");return f(),L("div",{class:D([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(f(!0),L(oe,null,ue(e.menus,(g,d)=>(f(),B(c,{key:d,ref_for:!0,ref:k=>e.menuList[d]=k,index:d,nodes:[...g]},{empty:_(()=>[Ne(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Mt=Se(Pt,[["render",Lt],["__file","index.vue"]]);const It=da(Mt),Bt=ia({...fa,size:Oa,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ie(Function),default:(e,l)=>e.text.includes(l)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ie(Function),default:()=>!0},placement:{type:ie(String),values:Ka,default:"bottom-start"},fallbackPlacements:{type:ie(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ua.teleported,tagType:{...We.type,default:"info"},tagEffect:{...We.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...qa}),Ft={[Ee]:e=>!0,[we]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>ja(e),expandChange:e=>!!e,removeTag:e=>!!e},zt="ElCascader",xt=fe({name:zt}),At=fe({...xt,props:Bt,emits:Ft,setup(e,{expose:l,emit:s}){const t=e,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:o,placement:i}=a;["right","left","bottom","top"].includes(i)||(o.arrow.x=35)},requires:["arrow"]}]},p=Za();let c=0,g=0;const d=de("cascader"),k=de("input"),{t:h}=oa(),{form:m,formItem:N}=Wa(),{valueOnClear:O}=Ya(t),{isComposing:F,handleComposition:M}=Ga({afterComposition(a){var o;const i=(o=a.target)==null?void 0:o.value;Le(i)}}),x=T(null),A=T(null),W=T(null),I=T(null),Y=T(null),P=T(!1),E=T(!1),V=T(!1),q=T(!1),se=T(""),X=T(""),ee=T([]),r=T([]),v=T([]),C=b(()=>p.style),y=b(()=>t.disabled||(m==null?void 0:m.disabled)),w=b(()=>t.placeholder||h("el.cascader.placeholder")),$=b(()=>X.value||ee.value.length>0||F.value?"":w.value),R=Ja(),z=b(()=>["small"].includes(R.value)?"small":"default"),K=b(()=>!!t.props.multiple),j=b(()=>!t.filterable||K.value),Ae=b(()=>K.value?X.value:se.value),be=b(()=>{var a;return((a=I.value)==null?void 0:a.checkedNodes)||[]}),ha=b(()=>!t.clearable||y.value||V.value||!E.value?!1:!!be.value.length),ye=b(()=>{const{showAllLevels:a,separator:o}=t,i=be.value;return i.length?K.value?"":i[0].calcText(a,o):""}),va=b(()=>(N==null?void 0:N.validateState)||""),$e=b({get(){return pa(t.modelValue)},set(a){const o=a!=null?a:O.value;s(Ee,o),s(we,o),t.validateEvent&&(N==null||N.validate("change").catch(i=>Xa()))}}),ga=b(()=>[d.b(),d.m(R.value),d.is("disabled",y.value),p.class]),ma=b(()=>[k.e("icon"),"icon-arrow-down",d.is("reverse",P.value)]),ba=b(()=>d.is("focus",P.value||q.value)),Re=b(()=>{var a,o;return(o=(a=x.value)==null?void 0:a.popperRef)==null?void 0:o.contentRef}),U=a=>{var o,i,S;y.value||(a=a!=null?a:!P.value,a!==P.value&&(P.value=a,(i=(o=A.value)==null?void 0:o.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),re((S=I.value)==null?void 0:S.scrollToExpandingNode)):t.filterable&&Pe(),s("visibleChange",a)))},he=()=>{re(()=>{var a;(a=x.value)==null||a.updatePopper()})},Te=()=>{V.value=!1},Ve=a=>{const{showAllLevels:o,separator:i}=t;return{node:a,key:a.uid,text:a.calcText(o,i),hitState:!1,closable:!y.value&&!a.isDisabled,isCollapseTag:!1}},_e=a=>{var o;const i=a.node;i.doCheck(!1),(o=I.value)==null||o.calculateCheckedValue(),s("removeTag",i.valueByOption)},ya=()=>{if(!K.value)return;const a=be.value,o=[],i=[];if(a.forEach(S=>i.push(Ve(S))),r.value=i,a.length){a.slice(0,t.maxCollapseTags).forEach(Q=>o.push(Ve(Q)));const S=a.slice(t.maxCollapseTags),ae=S.length;ae&&(t.collapseTags?o.push({key:-1,text:`+ ${ae}`,closable:!1,isCollapseTag:!0}):S.forEach(Q=>o.push(Ve(Q))))}ee.value=o},He=()=>{var a,o;const{filterMethod:i,showAllLevels:S,separator:ae}=t,Q=(o=(a=I.value)==null?void 0:a.getFlattedNodes(!t.props.checkStrictly))==null?void 0:o.filter(te=>te.isDisabled?!1:(te.calcText(S,ae),i(te,Ae.value)));K.value&&(ee.value.forEach(te=>{te.hitState=!1}),r.value.forEach(te=>{te.hitState=!1})),V.value=!0,v.value=Q,he()},ka=()=>{var a;let o;V.value&&Y.value?o=Y.value.$el.querySelector(`.${d.e("suggestion-item")}`):o=(a=I.value)==null?void 0:a.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`),o&&(o.focus(),!V.value&&o.click())},De=()=>{var a,o;const i=(a=A.value)==null?void 0:a.input,S=W.value,ae=(o=Y.value)==null?void 0:o.$el;if(!(!ra||!i)){if(ae){const Q=ae.querySelector(`.${d.e("suggestion-list")}`);Q.style.minWidth=`${i.offsetWidth}px`}if(S){const{offsetHeight:Q}=S,te=ee.value.length>0?`${Math.max(Q+6,c)}px`:`${c}px`;i.style.height=te,he()}}},Ca=a=>{var o;return(o=I.value)==null?void 0:o.getCheckedNodes(a)},Na=a=>{he(),s("expandChange",a)},Ea=a=>{if(!F.value)switch(a.code){case H.enter:U();break;case H.down:U(!0),re(ka),a.preventDefault();break;case H.esc:P.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case H.tab:U(!1);break}},wa=()=>{var a;(a=I.value)==null||a.clearCheckedNodes(),!P.value&&t.filterable&&Pe(),U(!1),s("clear")},Pe=()=>{const{value:a}=ye;se.value=a,X.value=a},Sa=a=>{var o,i;const{checked:S}=a;K.value?(o=I.value)==null||o.handleCheckChange(a,!S,!1):(!S&&((i=I.value)==null||i.handleCheckChange(a,!0,!1)),U(!1))},$a=a=>{const o=a.target,{code:i}=a;switch(i){case H.up:case H.down:{const S=i===H.up?-1:1;Ce(ua(o,S,`.${d.e("suggestion-item")}[tabindex="-1"]`));break}case H.enter:o.click();break}},Ta=()=>{const a=ee.value,o=a[a.length-1];g=X.value?0:g+1,!(!o||!g||t.collapseTags&&a.length>1)&&(o.hitState?_e(o):o.hitState=!0)},Oe=a=>{const o=a.target,i=d.e("search-input");o.className===i&&(q.value=!0),s("focus",a)},Ke=a=>{q.value=!1,s("blur",a)},Va=Qa(()=>{const{value:a}=Ae;if(!a)return;const o=t.beforeFilter(a);et(o)?o.then(He).catch(()=>{}):o!==!1?He():Te()},t.debounce),Le=(a,o)=>{!P.value&&U(!0),!(o!=null&&o.isComposing)&&(a?Va():Te())},Ue=a=>Number.parseFloat(ut(k.cssVarName("input-height"),a).value)-2;return ne(V,he),ne([be,y,()=>t.collapseTags],ya),ne(ee,()=>{re(()=>De())}),ne(R,async()=>{await re();const a=A.value.input;c=Ue(a)||c,De()}),ne(ye,Pe,{immediate:!0}),ca(()=>{const a=A.value.input,o=Ue(a);c=a.offsetHeight||o,at(a,De)}),l({getCheckedNodes:Ca,cascaderPanelRef:I,togglePopperVisible:U,contentRef:Re,presentText:ye}),(a,o)=>(f(),B(u(Ye),{ref_key:"tooltipRef",ref:x,visible:P.value,teleported:a.teleported,"popper-class":[u(d).e("dropdown"),a.popperClass],"popper-options":n,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${u(d).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:Te},{default:_(()=>[ke((f(),L("div",{class:D(u(ga)),style:tt(u(C)),onClick:()=>U(u(j)?void 0:!0),onKeydown:Ea,onMouseenter:i=>E.value=!0,onMouseleave:i=>E.value=!1},[J(u(lt),{ref_key:"input",ref:A,modelValue:se.value,"onUpdate:modelValue":i=>se.value=i,placeholder:u($),readonly:u(j),disabled:u(y),"validate-event":!1,size:u(R),class:D(u(ba)),tabindex:u(K)&&a.filterable&&!u(y)?-1:void 0,onCompositionstart:u(M),onCompositionupdate:u(M),onCompositionend:u(M),onFocus:Oe,onBlur:Ke,onInput:Le},{suffix:_(()=>[u(ha)?(f(),B(u(ve),{key:"clear",class:D([u(k).e("icon"),"icon-circle-close"]),onClick:ge(wa,["stop"])},{default:_(()=>[J(u(st))]),_:1},8,["class","onClick"])):(f(),B(u(ve),{key:"arrow-down",class:D(u(ma)),onClick:ge(i=>U(),["stop"])},{default:_(()=>[J(u(nt))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),u(K)?(f(),L("div",{key:0,ref_key:"tagWrapper",ref:W,class:D([u(d).e("tags"),u(d).is("validate",!!u(va))])},[(f(!0),L(oe,null,ue(ee.value,i=>(f(),B(u(Fe),{key:i.key,type:a.tagType,size:u(z),effect:a.tagEffect,hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:S=>_e(i)},{default:_(()=>[i.isCollapseTag===!1?(f(),L("span",{key:0},le(i.text),1)):(f(),B(u(Ye),{key:1,disabled:P.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:_(()=>[ce("span",null,le(i.text),1)]),content:_(()=>[ce("div",{class:D(u(d).e("collapse-tags"))},[(f(!0),L(oe,null,ue(r.value.slice(a.maxCollapseTags),(S,ae)=>(f(),L("div",{key:ae,class:D(u(d).e("collapse-tag"))},[(f(),B(u(Fe),{key:S.key,class:"in-tooltip",type:a.tagType,size:u(z),effect:a.tagEffect,hit:S.hitState,closable:S.closable,"disable-transitions":"",onClose:Q=>_e(S)},{default:_(()=>[ce("span",null,le(S.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!u(y)?ke((f(),L("input",{key:0,"onUpdate:modelValue":i=>X.value=i,type:"text",class:D(u(d).e("search-input")),placeholder:u(ye)?"":u(w),onInput:i=>Le(X.value,i),onClick:ge(i=>U(!0),["stop"]),onKeydown:ot(Ta,["delete"]),onCompositionstart:u(M),onCompositionupdate:u(M),onCompositionend:u(M),onFocus:Oe,onBlur:Ke},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[it,X.value]]):G("v-if",!0)],2)):G("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[u(ct),()=>U(!1),u(Re)]])]),content:_(()=>[ke(J(u(It),{ref_key:"cascaderPanelRef",ref:I,modelValue:u($e),"onUpdate:modelValue":i=>rt($e)?$e.value=i:null,options:a.options,props:t.props,border:!1,"render-label":a.$slots.default,onExpandChange:Na,onClose:i=>a.$nextTick(()=>U(!1))},{empty:_(()=>[Ne(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Ge,!V.value]]),a.filterable?ke((f(),B(u(na),{key:0,ref_key:"suggestionPanel",ref:Y,tag:"ul",class:D(u(d).e("suggestion-panel")),"view-class":u(d).e("suggestion-list"),onKeydown:$a},{default:_(()=>[v.value.length?(f(!0),L(oe,{key:0},ue(v.value,i=>(f(),L("li",{key:i.uid,class:D([u(d).e("suggestion-item"),u(d).is("checked",i.checked)]),tabindex:-1,onClick:S=>Sa(i)},[ce("span",null,le(i.text),1),i.checked?(f(),B(u(ve),{key:0},{default:_(()=>[J(u(ta))]),_:1})):G("v-if",!0)],10,["onClick"]))),128)):Ne(a.$slots,"empty",{key:1},()=>[ce("li",{class:D(u(d).e("empty-text"))},le(u(h)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ge,V.value]]):G("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Rt=Se(At,[["__file","cascader.vue"]]);const Ht=da(Rt),Ot="/",Kt=ht("regions",{state:()=>({regionsData:null}),actions:{setRegionsData(e){this.regionsData=e}}});function Ut(){const e=Kt(),{regionsData:l}=dt(e);return l.value==null&&(e.setRegionsData([]),qt().then(s=>{e.setRegionsData(s)}).catch(s=>{pt.error(s.message)})),l}async function qt(){var l;return(l=(await ft.get(Ot+"json/regions-data.json",{baseURL:""})).data)!=null?l:[]}function Me(e,l){return l==="label"?e.map(s=>{const t={label:s.label,value:s.label};return s.children&&(t.children=s.children.map(n=>{const p={label:n.label,value:n.label};return n.children&&(p.children=n.children.map(c=>({label:c.label,value:c.label}))),p})),t}):e}function jt(e,l,s){return Me(l==="provinceCity"?e.map(t=>{const n={label:t.label,value:t.value};return t.children&&(n.children=t.children.map(p=>({label:p.label,value:p.value}))),n}):l==="province"?e.map(t=>({label:t.label,value:t.value})):e,s)}function aa(e,l){const s=[];return e&&e.length&&l&&l.forEach(t=>{t.value===e[0]&&(s.push(t.label),t.children&&t.children.length&&t.children.forEach(n=>{n.value===e[1]&&s.push(n.label),n.children&&n.children.length&&n.children.forEach(p=>{p.value===e[2]&&s.push(p.label)})}))}),s}const Zt={key:0},Wt={name:"RegionsSelect"},Xt=Object.assign(Wt,{props:{modelValue:Array,options:Array,valueField:String,type:String,component:String,placeholder:String,disabled:Boolean,clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},cascaderProps:Object,collapseTags:{type:Boolean,default:!0},maxCollapseTags:{type:Number,default:5},collapseTagsTooltip:Boolean,size:String},emits:["update:modelValue"],setup(e,{expose:l,emit:s}){const t=e,n=s,p=Ut(),c=T(null),g=b(()=>{var m,N;const h=(N=(m=t.options)!=null?m:p.value)!=null?N:[];return jt(h,t.type,t.valueField)}),d=b(()=>{const h=" / ",m=t.modelValue;if(m&&m.length&&Array.isArray(m[0])){const O=[];return m.forEach(F=>{const M=aa(F,g.value);O.push(M.join(h))}),O}return aa(m,g.value).join(h)}),k=h=>{n("update:modelValue",h)};return l({cascaderRef:c,getCheckedNodes:h=>{var m,N;return(N=(m=c.value)==null?void 0:m.getCheckedNodes)==null?void 0:N.call(m,!!h)}}),(h,m)=>{const N=Fe,O=vt,F=Ht;return e.component==="text"?(f(),L(oe,{key:0},[typeof d.value=="string"?(f(),L("span",Zt,le(d.value),1)):(f(),B(O,{key:1,wrap:!0},{default:_(()=>[(f(!0),L(oe,null,ue(d.value,M=>(f(),B(N,{key:M,"disable-transitions":!0,size:"small",type:"info"},{default:_(()=>[Ie(le(M),1)]),_:2},1024))),128))]),_:1}))],64)):(f(),B(F,{key:1,ref_key:"cascaderRef",ref:c,size:e.size,disabled:e.disabled,clearable:e.clearable,"model-value":e.modelValue,options:g.value,filterable:e.filterable,placeholder:e.placeholder,props:e.cascaderProps,"popper-class":"ele-popper-higher","collapse-tags":e.collapseTags,"max-collapse-tags":e.maxCollapseTags,"collapse-tags-tooltip":e.collapseTagsTooltip,class:"ele-fluid","onUpdate:modelValue":k},null,8,["size","disabled","clearable","model-value","options","filterable","placeholder","props","collapse-tags","max-collapse-tags","collapse-tags-tooltip"]))}}});export{Ht as E,Xt as _};
