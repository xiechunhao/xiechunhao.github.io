import{fp as yt,J as ue,a0 as Ne,r as q,cg as Se,H as B,u as r,bS as kt,R as Je,bZ as pt,dA as mt,Z as Ct,a6 as Oe,T as ge,F as bt,c0 as Fe,N as Ie,V as re,du as St,a2 as De,bP as se,cf as me,a3 as Nt,O as ce,cn as Et,K as Tt,ch as Ot,L as Qe,ek as wt,o as le,l as we,d as Re,c as ye,w as be,a4 as de,aF as he,g as Kt,a7 as ze,aO as xt,b as et,a5 as tt,a8 as lt,cO as Mt,Y as Pe,c$ as Lt,cx as It,t as nt,a9 as Dt,fk as oe,dM as Rt,eB as _t,ai as He,aU as Vt,a1 as $e,b1 as We,b2 as je,a$ as Bt,e as At,dP as Ft,eC as qe}from"./index-BF2fBoPb.js";import{i as zt}from"./index-BFNslPul.js";import{c as Pt,r as Ht,H as at,V as $t,k as Wt,I as Ge,S as Ue,u as jt,m as Ke,R as Ee,a as Ye,b as qt,d as Xe,e as Gt,B as Ut,F as Yt,g as Te,A as xe,f as Xt,C as Ze,E as Zt,h as Jt,j as Qt}from"./virtual-list-B6G0p9cv.js";const el={[at]:"deltaX",[$t]:"deltaY"},tl=({atEndEdge:e,atStartEdge:t,layout:c},o)=>{let n,h=0;const i=f=>f<0&&t.value||f>0&&e.value;return{hasReachedEdge:i,onWheel:f=>{Pt(n);const y=f[el[c.value]];i(h)&&i(h+y)||(h+=y,yt()||f.preventDefault(),n=Ht(()=>{o(h),h=0}))}}},ll=({name:e,getOffset:t,getItemSize:c,getItemOffset:o,getEstimatedTotalSize:n,getStartIndexForOffset:h,getStopIndexForStartIndex:i,initCache:v,clearCache:f,validateProps:y})=>ue({name:e!=null?e:"ElVirtualList",props:Wt,emits:[Ge,Ue],setup(d,{emit:S,expose:s}){y(d);const I=Ie(),x=Ne("vl"),T=q(v(d,I)),D=jt(),N=q(),_=q(),k=q(),g=q({isScrolling:!1,scrollDir:"forward",scrollOffset:Se(d.initScrollOffset)?d.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:d.scrollbarAlwaysOn}),M=B(()=>{const{total:u,cache:b}=d,{isScrolling:p,scrollDir:O,scrollOffset:m}=r(g);if(u===0)return[0,0,0,0];const R=h(d,m,r(T)),H=i(d,R,m,r(T)),ne=!p||O===Ut?Math.max(1,b):1,ae=!p||O===Yt?Math.max(1,b):1;return[Math.max(0,R-ne),Math.max(0,Math.min(u-1,H+ae)),R,H]}),E=B(()=>n(d,r(T))),L=B(()=>Ke(d.layout)),A=B(()=>[{position:"relative",[`overflow-${L.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:d.direction,height:Se(d.height)?`${d.height}px`:d.height,width:Se(d.width)?`${d.width}px`:d.width},d.style]),F=B(()=>{const u=r(E),b=r(L);return{height:b?"100%":`${u}px`,pointerEvents:r(g).isScrolling?"none":void 0,width:b?`${u}px`:"100%"}}),P=B(()=>L.value?d.width:d.height),{onWheel:l}=tl({atStartEdge:B(()=>g.value.scrollOffset<=0),atEndEdge:B(()=>g.value.scrollOffset>=E.value),layout:B(()=>d.layout)},u=>{var b,p;(p=(b=k.value).onMouseUp)==null||p.call(b),j(Math.min(g.value.scrollOffset+u,E.value-P.value))});kt(N,"wheel",l,{passive:!1});const w=()=>{const{total:u}=d;if(u>0){const[m,R,H,ne]=r(M);S(Ge,m,R,H,ne)}const{scrollDir:b,scrollOffset:p,updateRequested:O}=r(g);S(Ue,b,p,O)},K=u=>{const{clientHeight:b,scrollHeight:p,scrollTop:O}=u.currentTarget,m=r(g);if(m.scrollOffset===O)return;const R=Math.max(0,Math.min(O,p-b));g.value={...m,isScrolling:!0,scrollDir:Te(m.scrollOffset,R),scrollOffset:R,updateRequested:!1},re(U)},V=u=>{const{clientWidth:b,scrollLeft:p,scrollWidth:O}=u.currentTarget,m=r(g);if(m.scrollOffset===p)return;const{direction:R}=d;let H=p;if(R===Ee)switch(Ye()){case Xe:{H=-p;break}case Xt:{H=O-b-p;break}}H=Math.max(0,Math.min(H,O-b)),g.value={...m,isScrolling:!0,scrollDir:Te(m.scrollOffset,H),scrollOffset:H,updateRequested:!1},re(U)},$=u=>{r(L)?V(u):K(u),w()},W=(u,b)=>{const p=(E.value-P.value)/b*u;j(Math.min(E.value-P.value,p))},j=u=>{u=Math.max(u,0),u!==r(g).scrollOffset&&(g.value={...r(g),scrollOffset:u,scrollDir:Te(r(g).scrollOffset,u),updateRequested:!0},re(U))},X=(u,b=xe)=>{const{scrollOffset:p}=r(g);u=Math.max(0,Math.min(u,d.total-1)),j(t(d,u,b,p,r(T)))},ee=u=>{const{direction:b,itemSize:p,layout:O}=d,m=D.value(f&&p,f&&O,f&&b);let R;if(St(m,String(u)))R=m[u];else{const H=o(d,u,r(T)),ne=c(d,u,r(T)),ae=r(L),a=b===Ee,C=ae?H:0;m[u]=R={position:"absolute",left:a?void 0:`${C}px`,right:a?`${C}px`:void 0,top:ae?0:`${H}px`,height:ae?"100%":`${ne}px`,width:ae?`${ne}px`:"100%"}}return R},U=()=>{g.value.isScrolling=!1,re(()=>{D.value(-1,null,null)})},z=()=>{const u=N.value;u&&(u.scrollTop=0)};Je(()=>{if(!pt)return;const{initScrollOffset:u}=d,b=r(N);Se(u)&&b&&(r(L)?b.scrollLeft=u:b.scrollTop=u),w()}),mt(()=>{const{direction:u,layout:b}=d,{scrollOffset:p,updateRequested:O}=r(g),m=r(N);if(O&&m)if(b===at)if(u===Ee)switch(Ye()){case Xe:{m.scrollLeft=-p;break}case qt:{m.scrollLeft=p;break}default:{const{clientWidth:R,scrollWidth:H}=m;m.scrollLeft=H-R-p;break}}else m.scrollLeft=p;else m.scrollTop=p}),Ct(()=>{r(N).scrollTop=r(g).scrollOffset});const ie={ns:x,clientSize:P,estimatedTotalSize:E,windowStyle:A,windowRef:N,innerRef:_,innerStyle:F,itemsToRender:M,scrollbarRef:k,states:g,getItemStyle:ee,onScroll:$,onScrollbarScroll:W,onWheel:l,scrollTo:j,scrollToItem:X,resetScrollTop:z};return s({windowRef:N,innerRef:_,getItemStyleCache:D,scrollTo:j,scrollToItem:X,resetScrollTop:z,states:g}),ie},render(d){var S;const{$slots:s,className:I,clientSize:x,containerElement:T,data:D,getItemStyle:N,innerElement:_,itemsToRender:k,innerStyle:g,layout:M,total:E,onScroll:L,onScrollbarScroll:A,states:F,useIsScrolling:P,windowStyle:l,ns:w}=d,[K,V]=k,$=Oe(T),W=Oe(_),j=[];if(E>0)for(let z=K;z<=V;z++)j.push(ge(bt,{key:z},(S=s.default)==null?void 0:S.call(s,{data:D,index:z,isScrolling:P?F.isScrolling:void 0,style:N(z)})));const X=[ge(W,{style:g,ref:"innerRef"},Fe(W)?j:{default:()=>j})],ee=ge(Gt,{ref:"scrollbarRef",clientSize:x,layout:M,onScroll:A,ratio:x*100/this.estimatedTotalSize,scrollFrom:F.scrollOffset/(this.estimatedTotalSize-x),total:E}),U=ge($,{class:[w.e("window"),I],style:l,onScroll:L,ref:"windowRef",key:0},Fe($)?[X]:{default:()=>[X]});return ge("div",{key:0,class:[w.e("wrapper"),F.scrollbarAlwaysOn?"always-on":""]},[U,ee])}}),nl=ll({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:c,layout:o,width:n},h,i,v)=>{const f=Ke(o)?n:e,y=Math.max(0,t*c-f),d=Math.min(y,h*c),S=Math.max(0,(h+1)*c-f);switch(i===Qt&&(v>=S-f&&v<=d+f?i=xe:i=Ze),i){case Jt:return d;case Zt:return S;case Ze:{const s=Math.round(S+(d-S)/2);return s<Math.ceil(f/2)?0:s>y+Math.floor(f/2)?y:s}case xe:default:return v>=S&&v<=d?v:v<S?S:d}},getStartIndexForOffset:({total:e,itemSize:t},c)=>Math.max(0,Math.min(e-1,Math.floor(c/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:c,layout:o,width:n},h,i)=>{const v=h*c,f=Ke(o)?n:e,y=Math.ceil((f+i-v)/c);return Math.max(0,Math.min(t-1,h+y-1))},initCache(){},clearCache:!0,validateProps(){}}),_e=Symbol(),al={key:-1,level:-1,data:{}};var Ce=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(Ce||{}),Me=(e=>(e.ADD="add",e.DELETE="delete",e))(Me||{});const st={type:Number,default:26},sl=De({data:{type:se(Array),default:()=>me([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:se(Object),default:()=>me({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:se(Array),default:()=>me([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:se(Array),default:()=>me([])},indent:{type:Number,default:16},itemSize:st,icon:{type:Nt},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:se([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:se(Function)},perfMode:{type:Boolean,default:!0}}),ol=De({node:{type:se(Object),default:()=>me(al)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:st}),cl=De({node:{type:se(Object),required:!0}}),ot="node-click",ct="node-drop",rt="node-expand",it="node-collapse",dt="current-change",ut="check",ft="check-change",ht="node-contextmenu",rl={[ot]:(e,t,c)=>e&&t&&c,[ct]:(e,t,c)=>e&&t&&c,[rt]:(e,t)=>e&&t,[it]:(e,t)=>e&&t,[dt]:(e,t)=>e&&t,[ut]:(e,t)=>e&&t,[ft]:(e,t)=>e&&typeof t=="boolean",[ht]:(e,t,c)=>e&&t&&c},il={click:(e,t)=>!!(e&&t),drop:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function dl(e,t){const c=q(new Set),o=q(new Set),{emit:n}=Ie();ce([()=>t.value,()=>e.defaultCheckedKeys],()=>re(()=>{_(e.defaultCheckedKeys)}),{immediate:!0});const h=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:k,maxLevel:g}=t.value,M=c.value,E=new Set;for(let L=g-1;L>=1;--L){const A=k.get(L);A&&A.forEach(F=>{const P=F.children;if(P){let l=!0,w=!1;for(const K of P){const V=K.key;if(M.has(V))w=!0;else if(E.has(V)){l=!1,w=!0;break}else l=!1}l?M.add(F.key):w?(E.add(F.key),M.delete(F.key)):(M.delete(F.key),E.delete(F.key))}})}o.value=E},i=k=>c.value.has(k.key),v=k=>o.value.has(k.key),f=(k,g,M=!0)=>{const E=c.value,L=(A,F)=>{E[F?Me.ADD:Me.DELETE](A.key);const P=A.children;!e.checkStrictly&&P&&P.forEach(l=>{l.disabled||L(l,F)})};L(k,g),h(),M&&y(k,g)},y=(k,g)=>{const{checkedNodes:M,checkedKeys:E}=x(),{halfCheckedNodes:L,halfCheckedKeys:A}=T();n(ut,k.data,{checkedKeys:E,checkedNodes:M,halfCheckedKeys:A,halfCheckedNodes:L}),n(ft,k.data,g)};function d(k=!1){return x(k).checkedKeys}function S(k=!1){return x(k).checkedNodes}function s(){return T().halfCheckedKeys}function I(){return T().halfCheckedNodes}function x(k=!1){const g=[],M=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:E}=t.value;c.value.forEach(L=>{const A=E.get(L);A&&(!k||k&&A.isLeaf)&&(M.push(L),g.push(A.data))})}return{checkedKeys:M,checkedNodes:g}}function T(){const k=[],g=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:M}=t.value;o.value.forEach(E=>{const L=M.get(E);L&&(g.push(E),k.push(L.data))})}return{halfCheckedNodes:k,halfCheckedKeys:g}}function D(k){c.value.clear(),o.value.clear(),re(()=>{_(k)})}function N(k,g){if(t!=null&&t.value&&e.showCheckbox){const M=t.value.treeNodeMap.get(k);M&&f(M,g,!1)}}function _(k){if(t!=null&&t.value){const{treeNodeMap:g}=t.value;if(e.showCheckbox&&g&&k)for(const M of k){const E=g.get(M);E&&!i(E)&&f(E,!0,!1)}}}return{updateCheckedKeys:h,toggleCheckbox:f,isChecked:i,isIndeterminate:v,getCheckedKeys:d,getCheckedNodes:S,getHalfCheckedKeys:s,getHalfCheckedNodes:I,setChecked:N,setCheckedKeys:D}}function ul(e,t){const c=q(new Set([])),o=q(new Set([])),n=B(()=>Et(e.filterMethod));function h(v){var f;if(!n.value)return;const y=new Set,d=o.value,S=c.value,s=[],I=((f=t.value)==null?void 0:f.treeNodes)||[],x=e.filterMethod;S.clear();function T(D){D.forEach(N=>{s.push(N),x!=null&&x(v,N.data)?s.forEach(k=>{y.add(k.key)}):N.isLeaf&&S.add(N.key);const _=N.children;if(_&&T(_),!N.isLeaf){if(!y.has(N.key))S.add(N.key);else if(_){let k=!0;for(const g of _)if(!S.has(g.key)){k=!1;break}k?d.add(N.key):d.delete(N.key)}}s.pop()})}return T(I),y}function i(v){return o.value.has(v.key)}return{hiddenExpandIconKeySet:o,hiddenNodeKeySet:c,doFilter:h,isForceHiddenExpandIcon:i}}function fl(e,t){const c=q(new Set(e.defaultExpandedKeys)),o=q(),n=Tt(),h=q();ce(()=>e.currentNodeKey,a=>{o.value=a},{immediate:!0}),ce(()=>e.data,a=>{R(a)},{immediate:!0});const{isIndeterminate:i,isChecked:v,toggleCheckbox:f,getCheckedKeys:y,getCheckedNodes:d,getHalfCheckedKeys:S,getHalfCheckedNodes:s,setChecked:I,setCheckedKeys:x}=dl(e,n),{doFilter:T,hiddenNodeKeySet:D,isForceHiddenExpandIcon:N}=ul(e,n),_=B(()=>{var a;return((a=e.props)==null?void 0:a.value)||Ce.KEY}),k=B(()=>{var a;return((a=e.props)==null?void 0:a.children)||Ce.CHILDREN}),g=B(()=>{var a;return((a=e.props)==null?void 0:a.disabled)||Ce.DISABLED}),M=B(()=>{var a;return((a=e.props)==null?void 0:a.label)||Ce.LABEL}),E=B(()=>{var a;const C=c.value,G=D.value,J=[],Y=((a=n.value)==null?void 0:a.treeNodes)||[],fe=[];for(let Z=Y.length-1;Z>=0;--Z)fe.push(Y[Z]);for(;fe.length;){const Z=fe.pop();if(!G.has(Z.key)&&(J.push(Z),Z.children&&C.has(Z.key)))for(let Q=Z.children.length-1;Q>=0;--Q)fe.push(Z.children[Q])}return J}),L=B(()=>E.value.length>0);function A(a){const C=new Map,G=new Map;let J=1;function Y(Z,Q=1,gt=void 0){var Ve;const Be=[];for(const ke of Z){const Ae=l(ke),te={level:Q,key:Ae,data:ke};te.label=K(ke),te.parent=gt;const pe=P(ke);te.disabled=w(ke),te.isLeaf=!pe||pe.length===0,pe&&pe.length&&(te.children=Y(pe,Q+1,te)),Be.push(te),C.set(Ae,te),G.has(Q)||G.set(Q,[]),(Ve=G.get(Q))==null||Ve.push(te)}return Q>J&&(J=Q),Be}const fe=Y(a);return{treeNodeMap:C,levelTreeNodeMap:G,maxLevel:J,treeNodes:fe}}function F(a){const C=T(a);C&&(c.value=C)}function P(a){return a[k.value]}function l(a){return a?a[_.value]:""}function w(a){return a[g.value]}function K(a){return a[M.value]}function V(a){c.value.has(a.key)?z(a):U(a)}function $(a){const C=new Set,G=n.value.treeNodeMap;a.forEach(J=>{let Y=G.get(J);for(;Y&&!C.has(Y.key);)C.add(Y.key),Y=Y.parent}),c.value=C}function W(a,C){t(ot,a.data,a,C),X(a),e.expandOnClickNode&&V(a),e.showCheckbox&&e.checkOnClickNode&&!a.disabled&&f(a,!v(a),!0)}function j(a,C){t(ct,a.data,a,C)}function X(a){b(a)||(o.value=a.key,t(dt,a.data,a))}function ee(a,C){f(a,C)}function U(a){const C=c.value;if(n.value&&e.accordion){const{treeNodeMap:G}=n.value;C.forEach(J=>{const Y=G.get(J);a&&a.level===(Y==null?void 0:Y.level)&&C.delete(J)})}C.add(a.key),t(rt,a.data,a)}function z(a){c.value.delete(a.key),t(it,a.data,a)}function ie(a){return c.value.has(a.key)}function u(a){return!!a.disabled}function b(a){const C=o.value;return C!==void 0&&C===a.key}function p(){var a,C;if(o.value)return(C=(a=n.value)==null?void 0:a.treeNodeMap.get(o.value))==null?void 0:C.data}function O(){return o.value}function m(a){o.value=a}function R(a){re(()=>n.value=A(a))}function H(a){var C;const G=Ot(a)?l(a):a;return(C=n.value)==null?void 0:C.treeNodeMap.get(G)}function ne(a,C="auto"){const G=H(a);G&&h.value&&h.value.scrollToItem(E.value.indexOf(G),C)}function ae(a){var C;(C=h.value)==null||C.scrollTo(a)}return{tree:n,flattenTree:E,isNotEmpty:L,listRef:h,getKey:l,getChildren:P,toggleExpand:V,toggleCheckbox:f,isExpanded:ie,isChecked:v,isIndeterminate:i,isDisabled:u,isCurrent:b,isForceHiddenExpandIcon:N,handleNodeClick:W,handleNodeDrop:j,handleNodeCheck:ee,getCurrentNode:p,getCurrentKey:O,setCurrentKey:m,getCheckedKeys:y,getCheckedNodes:d,getHalfCheckedKeys:S,getHalfCheckedNodes:s,setChecked:I,setCheckedKeys:x,filter:F,setData:R,getNode:H,expandNode:U,collapseNode:z,setExpandedKeys:$,scrollToNode:ne,scrollTo:ae}}var hl=ue({name:"ElTreeNodeContent",props:cl,setup(e){const t=Qe(_e),c=Ne("tree");return()=>{const o=e.node,{data:n}=o;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:o,data:n}):ge("span",{class:c.be("node","label")},[o==null?void 0:o.label])}}});const vl=ue({name:"ElTreeNode"}),gl=ue({...vl,props:ol,emits:il,setup(e,{emit:t}){const c=e,o=Qe(_e),n=Ne("tree"),h=B(()=>{var s;return(s=o==null?void 0:o.props.indent)!=null?s:16}),i=B(()=>{var s;return(s=o==null?void 0:o.props.icon)!=null?s:wt}),v=s=>{t("click",c.node,s)},f=s=>{t("drop",c.node,s)},y=()=>{t("toggle",c.node)},d=s=>{t("check",c.node,s)},S=s=>{var I,x,T,D;(T=(x=(I=o==null?void 0:o.instance)==null?void 0:I.vnode)==null?void 0:x.props)!=null&&T.onNodeContextmenu&&(s.stopPropagation(),s.preventDefault()),o==null||o.ctx.emit(ht,s,(D=c.node)==null?void 0:D.data,c.node)};return(s,I)=>{var x,T,D;return le(),we("div",{ref:"node$",class:de([r(n).b("node"),r(n).is("expanded",s.expanded),r(n).is("current",s.current),r(n).is("focusable",!s.disabled),r(n).is("checked",!s.disabled&&s.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":s.expanded,"aria-disabled":s.disabled,"aria-checked":s.checked,"data-key":(x=s.node)==null?void 0:x.key,onClick:he(v,["stop"]),onContextmenu:S,onDragover:he(()=>{},["prevent"]),onDragenter:he(()=>{},["prevent"]),onDrop:he(f,["stop"])},[Re("div",{class:de(r(n).be("node","content")),style:tt({paddingLeft:`${(s.node.level-1)*r(h)}px`,height:s.itemSize+"px"})},[r(i)?(le(),ye(r(Kt),{key:0,class:de([r(n).is("leaf",!!((T=s.node)!=null&&T.isLeaf)),r(n).is("hidden",s.hiddenExpandIcon),{expanded:!((D=s.node)!=null&&D.isLeaf)&&s.expanded},r(n).be("node","expand-icon")]),onClick:he(y,["stop"])},{default:be(()=>[(le(),ye(Oe(r(i))))]),_:1},8,["class","onClick"])):ze("v-if",!0),s.showCheckbox?(le(),ye(r(xt),{key:1,"model-value":s.checked,indeterminate:s.indeterminate,disabled:s.disabled,onChange:d,onClick:he(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):ze("v-if",!0),et(r(hl),{node:s.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var yl=lt(gl,[["__file","tree-node.vue"]]);const kl=ue({name:"ElTreeV2"}),pl=ue({...kl,props:sl,emits:rl,setup(e,{expose:t,emit:c}){const o=e,n=Mt(),h=B(()=>o.itemSize);Pe(_e,{ctx:{emit:c,slots:n},props:o,instance:Ie()}),Pe(Lt,void 0);const{t:i}=It(),v=Ne("tree"),{flattenTree:f,isNotEmpty:y,listRef:d,toggleExpand:S,isExpanded:s,isIndeterminate:I,isChecked:x,isDisabled:T,isCurrent:D,isForceHiddenExpandIcon:N,handleNodeClick:_,handleNodeDrop:k,handleNodeCheck:g,toggleCheckbox:M,getCurrentNode:E,getCurrentKey:L,setCurrentKey:A,getCheckedKeys:F,getCheckedNodes:P,getHalfCheckedKeys:l,getHalfCheckedNodes:w,setChecked:K,setCheckedKeys:V,filter:$,setData:W,getNode:j,expandNode:X,collapseNode:ee,setExpandedKeys:U,scrollToNode:z,scrollTo:ie}=fl(o,c);return t({toggleCheckbox:M,getCurrentNode:E,getCurrentKey:L,setCurrentKey:A,getCheckedKeys:F,getCheckedNodes:P,getHalfCheckedKeys:l,getHalfCheckedNodes:w,setChecked:K,setCheckedKeys:V,filter:$,setData:W,getNode:j,expandNode:X,collapseNode:ee,setExpandedKeys:U,scrollToNode:z,scrollTo:ie}),(u,b)=>{var p;return le(),we("div",{class:de([r(v).b(),{[r(v).m("highlight-current")]:u.highlightCurrent}]),role:"tree"},[r(y)?(le(),ye(r(nl),{key:0,ref_key:"listRef",ref:d,"class-name":r(v).b("virtual-list"),data:r(f),total:r(f).length,height:u.height,"item-size":r(h),"perf-mode":u.perfMode},{default:be(({data:O,index:m,style:R})=>[(le(),ye(yl,{key:O[m].key,style:tt(R),node:O[m],expanded:r(s)(O[m]),"show-checkbox":u.showCheckbox,checked:r(x)(O[m]),indeterminate:r(I)(O[m]),"item-size":r(h),disabled:r(T)(O[m]),current:r(D)(O[m]),"hidden-expand-icon":r(N)(O[m]),onClick:r(_),onToggle:r(S),onCheck:r(g),onDrop:r(k)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(le(),we("div",{key:1,class:de(r(v).e("empty-block"))},[Re("span",{class:de(r(v).e("empty-text"))},nt((p=u.emptyText)!=null?p:r(i)("el.tree.emptyText")),3)],2))],2)}}});var ml=lt(pl,[["__file","tree.vue"]]);const Cl=Dt(ml);function bl(e,t,c){const o=[],n=[];return Rt(e,h=>{o.push(h[t]),n.push(h)},c),[o,n]}function Sl(e,t,c,o,n,h,i){const v=[];if(oe(t)||!t.length)return v;const f=h?h.map(s=>s[c]):[],y=i?i.map(s=>s[c]):[],[d,S]=bl(e,c,n);return t.forEach(s=>{const I=f.indexOf(s);let x=h&&I!==-1?h[I]:void 0;if(I===-1&&i){const T=y.indexOf(s);T!==-1&&(x=i[T])}if(!x&&e){const T=d.indexOf(s);T!==-1&&(x=S[T])}v.push({value:s,label:x?x[o]:String(s)})}),v}function Le(e,t,c,o,n,h,i){const v=[];return oe(t)||!t.length||e&&e.forEach(f=>{const y=f[c],d=f[n],S=t.includes(y);if(h)S&&v.push({value:y,label:f[o],hide:i}),Le(d,t,c,o,n,h,S?!0:i).forEach(s=>{v.push(s)});else{const s=!!(d&&d.length);S&&v.push({value:y,label:f[o],hide:s}),s&&Le(d,t,c,o,n,h).forEach(I=>{v.push(I)})}}),v}function Nl(e,t,c,o,n){const h=e.map(v=>v.value),i=n?n.map(v=>v[c]):[];return t.forEach(v=>{if(!h.includes(v)){const f=i.indexOf(v),y=n&&f!==-1?n[f]:void 0;e.push({value:v,label:y?y[o]:String(v)})}}),e}function vt(e,t,c,o,n){return!e||!e.length||!t||!t.length?!1:e.every(h=>h[n]||t.includes(h[c])?!0:h[o]&&h[o].length?vt(h[o],t,c,o,n):!1)}function ve(e,t,c){if(!c)return e;const o=[];return t.forEach(n=>{n.hide||o.push(n.value)}),o}const El={modelValue:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,cacheData:Array,treeProps:{type:Object,required:!0},showCheckedStrategy:String,checkedValueStrategy:Boolean,maxTagCount:Number,maxTagTextLength:Number,tagType:{type:String,default:"info"},automaticDropdown:Boolean,filterable:Boolean,teleported:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},placement:{type:String,default:"bottom-start"},transition:{type:String,default:"el-zoom-in-top"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectStyle:Object,inputStyle:Object,selectTagsStyle:Object},Tl={"update:modelValue":e=>!0,change:e=>!0,visibleChange:e=>!0,removeTag:e=>!0,clear:()=>!0,focus:e=>!0,blur:e=>!0},Ol=ue({name:"EleTreeSelect",components:{ElTreeV2:Cl,EleBasicSelect:zt},props:El,emits:Tl,setup(e,{emit:t}){const{validateChange:c}=_t(),o=q(null),n=q(null),h=q(!1),i=q([]),v=B(()=>{const l=i.value;return!e.multiple&&l.length?l[0].label:""}),f=B(()=>{const l=["ele-tree-select-popper"];return e.popperClass&&l.push(e.popperClass),l.join(" ")}),y=B(()=>{var l;return Object.assign({value:"id",label:"label",children:"children",disabled:"disabled"},(l=e.treeProps)==null?void 0:l.props)}),d=()=>{o.value&&o.value.updatePopper()},S=l=>{if(oe(l))return;const w=y.value.value;if(e.cacheData!=null){const K=e.cacheData.find(V=>V[w]===l);if(K!=null)return K}if(e.treeProps&&e.treeProps.data)return Ft(e.treeProps.data,K=>K[w]===l,y.value.children)},s=l=>{var w,K,V;const $=y.value.value,W=y.value.label;return(w=e.treeProps)!=null&&w.checkStrictly||e.showCheckedStrategy==="all"?Sl((K=e.treeProps)==null?void 0:K.data,l,$,W,y.value.children,e.cacheData,n.value?n.value.getCheckedNodes():void 0):Nl(Le((V=e.treeProps)==null?void 0:V.data,l,$,W,y.value.children,e.showCheckedStrategy!=="child"),l,$,W,e.cacheData)},I=l=>{if(!e.multiple){const K=i.value[0];if(oe(l)){if(!K)return;i.value=[],n.value&&n.value.setCurrentKey(null);return}if(K&&K.value===l)return;const V=S(l),$=y.value.label,W=V?V[$]:String(l);i.value=[{label:W,value:l}],n.value&&n.value.setCurrentKey(l);return}if(oe(l)||!l.length){if(!i.value.length)return;i.value=[],n.value&&n.value.setCheckedKeys([]);return}const w=i.value.map(K=>K.value);qe(l,w,!0)&&(n.value&&n.value.setCheckedKeys(l),i.value=s(l))},x=(l,w)=>{const K=w[y.value.label];return K!=null&&K.includes(l)},T=l=>{n.value&&n.value.filter(l)},D=()=>{o.value&&o.value.focusSearchInput()},N=l=>{qe(l,e.modelValue,e.multiple)&&(t("update:modelValue",l),c(),t("change",l))},_=l=>{l&&T(""),h.value!==l&&(h.value=l,t("visibleChange",l))},k=l=>{n.value&&n.value.setChecked(l.value,!1);const w=n.value&&n.value.getCheckedKeys()||[];i.value=s(w),N(ve(w,i.value,e.checkedValueStrategy)),t("removeTag",l.value)},g=()=>{N(e.multiple?[]:null),_(!1),t("clear")},M=l=>{t("focus",l)},E=l=>{t("blur",l)},L=(l,w,K)=>{var V,$,W;K.stopPropagation();const j=y.value.value,X=y.value.children,ee=y.value.disabled,U=l[ee];if(U){const p=K.target;if(p&&p.classList.contains("is-disabled")){const O=(V=p.parentNode)==null?void 0:V.parentNode;O&&O.blur()}}const z=l[j],ie=l[y.value.label],u=!(($=l[X])!=null&&$.length),b=((W=e.treeProps)==null?void 0:W.expandOnClickNode)!==!1;if(D(),!e.multiple){const p=i.value[0];if(p&&p.value===z){(!b||u)&&_(!1);return}if(!U&&(!b||u)){i.value=[{label:ie,value:z}],N(z),_(!1);return}re(()=>{const O=e.modelValue,m=oe(O)?null:O;n.value&&n.value.setCurrentKey(m)});return}if(!U&&(!b||u)){const p=e.modelValue,O=p&&p.includes(z);if(n.value)if(O)n.value.setChecked(z,!1);else if(u)n.value.setChecked(z,!O);else{const R=vt(l[X],p,j,X,ee);n.value.setChecked(z,!R)}const m=n.value&&n.value.getCheckedKeys()||[];i.value=s(m),N(ve(m,i.value,e.checkedValueStrategy))}},A=()=>{const l=n.value&&n.value.getCheckedKeys()||[];i.value=s(l),N(ve(l,i.value,e.checkedValueStrategy)),D()},F=()=>{D()},P=()=>{D()};return ce(()=>e.modelValue,l=>{if(!e.multiple||!e.checkedValueStrategy)I(l);else{const w=n.value&&n.value.getCheckedKeys()||[];I(w)}},{deep:!0}),ce([()=>e.cacheData,()=>{var l;return(l=e.treeProps)==null?void 0:l.data}],()=>{if(i.value.length){if(!e.multiple){const l=S(e.modelValue),w=e.modelValue,K=l?l[y.value.label]:String(w);i.value=[{label:K,value:w}];return}i.value=s(e.modelValue)}},{deep:!0}),ce([()=>e.showCheckedStrategy,()=>{var l;return(l=e.treeProps)==null?void 0:l.checkStrictly}],()=>{if(e.multiple&&!oe(e.modelValue)&&e.modelValue.length)if(e.checkedValueStrategy){const l=n.value&&n.value.getCheckedKeys()||[];i.value=s(l),N(ve(l,i.value,e.checkedValueStrategy))}else{const l=e.modelValue;i.value=s(l),N(ve(l,i.value,e.checkedValueStrategy))}}),ce(()=>e.checkedValueStrategy,()=>{if(!e.multiple)return;const l=n.value&&n.value.getCheckedKeys()||[];N(ve(l,i.value,e.checkedValueStrategy))}),ce(()=>e.disabled,l=>{l&&_(!1)}),Je(()=>{!oe(e.modelValue)&&!(e.multiple&&!e.modelValue.length)&&I(e.modelValue)}),{selectRef:o,treeRef:n,selectVisible:h,selectedItems:i,selectedLabel:v,selectPopperClass:f,treeOptions:y,updatePopover:d,treeFilter:x,updateVisible:_,handleSelectFilter:T,handleSelectRemove:k,handleSelectClear:g,handleSelectFocus:M,handleSelectBlur:E,handleTreeClick:L,handleTreeCheck:A,handleTreeExpand:F,handleTreeCollapse:P}}}),wl=(e,t)=>{const c=e.__vccOpts||e;for(const[o,n]of t)c[o]=n;return c},Kl=["title"];function xl(e,t,c,o,n,h){const i=He("ElTreeV2"),v=He("EleBasicSelect");return le(),ye(v,{ref:"selectRef",value:e.modelValue,multiple:e.multiple,disabled:e.disabled,size:e.size,clearable:e.clearable,placeholder:e.placeholder,maxTagCount:e.maxTagCount,maxTagTextLength:e.maxTagTextLength,tagType:e.tagType,automaticDropdown:e.automaticDropdown,filterable:e.filterable,teleported:e.teleported,persistent:e.persistent,placement:e.placement,transition:e.transition,popperWidth:e.popperWidth,popperOptions:e.popperOptions,popperClass:e.selectPopperClass,selectStyle:e.selectStyle,inputStyle:e.inputStyle,selectTagsStyle:e.selectTagsStyle,selectedLabel:e.selectedLabel,selected:e.selectedItems.filter(f=>!f.hide),visible:e.selectVisible,"onUpdate:visible":e.updateVisible,onFilterChange:e.handleSelectFilter,onRemoveTag:e.handleSelectRemove,onClear:e.handleSelectClear,onFocus:e.handleSelectFocus,onBlur:e.handleSelectBlur},Vt({default:be(()=>[et(i,Bt({itemSize:32,filterMethod:e.treeFilter},e.treeProps,{ref:"treeRef",props:e.treeOptions,highlightCurrent:!e.multiple,showCheckbox:!!e.multiple,checkOnClickNode:!1,defaultCheckedKeys:e.multiple?e.modelValue:void 0,onCheck:e.handleTreeCheck,onNodeClick:e.handleTreeClick,onNodeExpand:e.handleTreeExpand,onNodeCollapse:e.handleTreeCollapse}),{default:be(f=>[Re("span",{class:de(["el-tree-node__label",{"is-disabled":f.node.disabled}]),title:f.node.label},[$e(e.$slots,"default",We(je(f||{})),()=>[At(nt(f.node.label),1)])],10,Kl)]),_:3},16,["filterMethod","props","highlightCurrent","showCheckbox","defaultCheckedKeys","onCheck","onNodeClick","onNodeExpand","onNodeCollapse"])]),_:2},[e.$slots.maxTagPlaceholder?{name:"maxTagPlaceholder",fn:be(f=>[$e(e.$slots,"maxTagPlaceholder",We(je(f||{})))]),key:"0"}:void 0]),1032,["value","multiple","disabled","size","clearable","placeholder","maxTagCount","maxTagTextLength","tagType","automaticDropdown","filterable","teleported","persistent","placement","transition","popperWidth","popperOptions","popperClass","selectStyle","inputStyle","selectTagsStyle","selectedLabel","selected","visible","onUpdate:visible","onFilterChange","onRemoveTag","onClear","onFocus","onBlur"])}const Dl=wl(Ol,[["render",xl]]);export{Dl as i};
