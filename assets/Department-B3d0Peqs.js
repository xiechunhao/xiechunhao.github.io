var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{f as d,_ as u}from"./index-B2uLNVFs.js";import{_ as n}from"./ButtonTable-DJBrQd3H.js";/* empty css               */import{h as i,r as m,X as p,k as f,l as c,m as b,u as _,i as v,aU as g,a0 as y,j as h,H as w,z as x,p as V,ah as j,E as O,L as k,aN as C,K as P,aJ as U,aY as B,_ as T,ap as q,$ as D}from"./vendor-Bhb26uf3.js";const E={class:"page-content"},I={class:"dialog-footer"},S=u(i({__name:"Department",setup(e){const u=m("add"),i=m(!1),S=p({name:"",sort:"1",status:!0}),Y=p([{id:1,date:"2016-05-02",name:"人力资源部",status:1,sort:1},{id:2,date:"2016-05-04",name:"公关部",status:1,sort:2},{id:3,date:"2016-05-01",name:"市场部",status:1,sort:3,children:[{id:31,date:"2016-05-01",name:"王小虎",status:1,sort:1},{id:32,date:"2016-05-01",name:"王小虎",status:0,sort:2}]},{id:4,date:"2016-05-03",name:"财务部",status:1,sort:4},{id:5,date:"2016-05-03",name:"广告部",status:1,sort:5},{id:6,date:"2016-05-03",name:"营销部",status:1,sort:5},{id:7,date:"2016-05-03",name:"开发部",status:1,sort:5},{id:8,date:"2016-05-03",name:"测试部",status:1,sort:5},{id:9,date:"2016-05-03",name:"安全监察部",status:0,sort:5},{id:10,date:"2016-05-03",name:"设计部",status:1,sort:5},{id:11,date:"2016-05-03",name:"监事会",status:1,sort:5},{id:12,date:"2016-05-03",name:"董事会",status:1,sort:5}]),$=m(),z=p({name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}]}),H=()=>{S.name="",S.sort="1",S.status=!0},J=(e,t)=>{u.value=e,i.value=!0,"edit"===e&&t?(S.name=t.name,S.sort=t.sort.toString(),S.status=1===t.status):H()},K=()=>{j.confirm("确定要删除该部门吗？","删除部门",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{}))},L=()=>{return e=this,d=null,n=function*(){$.value&&(yield $.value.validate((e=>{var d,n;e&&(d=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&o(e,a,t[a]);return e})({},S),n={status:S.status?1:0},t(d,a(n)),O.success("add"===u.value?"添加成功":"修改成功"),i.value=!1)})))},new Promise(((t,a)=>{var s=e=>{try{r(n.next(e))}catch(t){a(t)}},l=e=>{try{r(n.throw(e))}catch(t){a(t)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);r((n=n.apply(e,d)).next())}));var e,d,n};return(e,t)=>{const a=k,s=C,l=P,r=g,o=U,m=B,p=n,j=d,O=T,N=q,R=D,X=y;return h(),f("div",E,[c(r,{gutter:12},{default:b((()=>[c(s,{xs:24,sm:12,lg:8},{default:b((()=>[c(a,{placeholder:"部门名称"})])),_:1}),c(s,{xs:24,sm:12,lg:8,class:"el-col2"},{default:b((()=>[c(l,null,{default:b((()=>t[6]||(t[6]=[w("搜索")]))),_:1}),c(l,{onClick:t[0]||(t[0]=e=>J("add"))},{default:b((()=>t[7]||(t[7]=[w("新增部门")]))),_:1})])),_:1})])),_:1}),c(j,{data:_(Y)},{default:b((()=>[c(o,{prop:"name",label:"名称"}),c(o,{prop:"sort",label:"排序",sortable:""}),c(o,{prop:"date",label:"日期"}),c(o,{label:"状态",prop:"status"},{default:b((e=>[c(m,{type:1===e.row.status?"primary":"info"},{default:b((()=>[w(x(1===e.row.status?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1}),c(o,{fixed:"right",label:"操作",width:"150px"},{default:b((e=>[c(p,{type:"edit",onClick:t=>J("edit",e.row)},null,8,["onClick"]),c(p,{type:"delete",onClick:K})])),_:1})])),_:1},8,["data"]),c(X,{modelValue:_(i),"onUpdate:modelValue":t[5]||(t[5]=e=>v(i)?i.value=e:null),title:"add"===_(u)?"添加部门":"编辑部门",width:"30%",onClosed:H},{footer:b((()=>[V("div",I,[c(l,{onClick:t[4]||(t[4]=e=>i.value=!1)},{default:b((()=>t[8]||(t[8]=[w("取消")]))),_:1}),c(l,{type:"primary",onClick:L},{default:b((()=>t[9]||(t[9]=[w("提交")]))),_:1})])])),default:b((()=>[c(R,{ref_key:"formRef",ref:$,model:_(S),rules:_(z),"label-width":"60px"},{default:b((()=>[c(O,{label:"名称",prop:"name"},{default:b((()=>[c(a,{modelValue:_(S).name,"onUpdate:modelValue":t[1]||(t[1]=e=>_(S).name=e)},null,8,["modelValue"])])),_:1}),c(O,{label:"排序",prop:"sort"},{default:b((()=>[c(a,{modelValue:_(S).sort,"onUpdate:modelValue":t[2]||(t[2]=e=>_(S).sort=e)},null,8,["modelValue"])])),_:1}),c(O,{label:"状态",prop:"status"},{default:b((()=>[c(N,{modelValue:_(S).status,"onUpdate:modelValue":t[3]||(t[3]=e=>_(S).status=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-9a5daee0"]]);export{S as default};
