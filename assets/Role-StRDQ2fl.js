import{x as e,f as a,_ as l}from"./index-AUd2T663.js";import{_ as t}from"./ButtonTable-BCd2qicg.js";import{h as s,j as d,t as u,m as o,ag as n,q as r,ah as i,F as m,C as p,N as c,M as f,z as _,ai as w,r as y,c as v,X as g,s as h,aN as k,G as b,J as x,aU as V,aJ as C,aY as j,u as U,Z as B,_ as Y,ap as q,i as M,Y as N,aZ as T,aj as z,E as F}from"./vendor-CC2XCvy_.js";/* empty css               */const J={class:"btn-more"},L=s({__name:"ButtonMore",props:{list:{}},emits:["click"],setup(e,{emit:a}){const l=a;return(e,a)=>{const s=t,y=w,v=i,g=n;return u(),d("div",J,[o(g,null,{dropdown:r((()=>[o(v,null,{default:r((()=>[(u(!0),d(m,null,p(e.list,(e=>(u(),c(y,{key:e.key,onClick:a=>(e=>{l("click",e)})(e)},{default:r((()=>[f(_(e.label),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:r((()=>[o(s,{type:"more"})])),_:1})])}}}),P={class:"page-content"},R={class:"dialog-footer"},Z={style:{maxHeight:"500px",overflowY:"scroll"}},D=l(s({__name:"Role",setup(l){const t=y(!1),s=y(!1),n=v((()=>e().getMenuList)),i=y(),m=g({name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],des:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),p=g({id:"",name:"",des:"",status:!0}),c=g([{name:"超级管理员",allow:"全部权限",des:"拥有系统全部权限",date:"2021-01-08 12:30:45",status:1},{name:"董事会部",allow:"自定义",des:"负责董事会部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"监事会部",allow:"自定义",des:"负责监事会部相关工作的管理者",date:"2021-01-08 12:30:45",status:0},{name:"市场部",allow:"自定义",des:"负责市场部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"人力资源部",allow:"自定义",des:"负责人力资源部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"财务部",allow:"自定义",des:"负责财务部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"公关部",allow:"自定义",des:"负责公关部相关工作的管理者",date:"2021-01-08 12:30:45",status:0},{name:"广告部",allow:"自定义",des:"负责广告部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"营销",allow:"自定义",des:"负责营销相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"设计部",allow:"自定义",des:"负责设计部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"开发部",allow:"自定义",des:"负责开发部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"测试部",allow:"自定义",des:"负责测试部相关工作的管理者",date:"2021-01-08 12:30:45",status:1},{name:"安保部",allow:"自定义",des:"负责安保部相关工作的管理者",date:"2021-01-08 12:30:45",status:1}]),w=y("add"),J=(e,a)=>{t.value=!0,w.value=e,"edit"===e&&a?(p.id=a.id,p.name=a.name,p.des=a.des,p.status=1===a.status):(p.id="",p.name="",p.des="",p.status=!0)},D=()=>{s.value=!0},E={children:"children",label:e=>{var a;return(null==(a=e.meta)?void 0:a.title)||""}},G=()=>{z.confirm("确定删除该角色吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{F.success("删除成功")}))},H=e=>{return a=this,l=null,s=function*(){e&&(yield e.validate((a=>{if(a){const a="add"===w.value?"新增成功":"修改成功";F.success(a),t.value=!1,e.resetFields()}})))},new Promise(((e,t)=>{var d=e=>{try{o(s.next(e))}catch(a){t(a)}},u=e=>{try{o(s.throw(e))}catch(a){t(a)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(d,u);o((s=s.apply(a,l)).next())}));var a,l,s};return(e,l)=>{const y=b,v=k,g=x,z=V,F=C,I=j,S=L,X=a,A=Y,K=q,O=B,Q=N,W=T;return u(),d("div",P,[o(z,null,{default:r((()=>[o(v,{xs:24,sm:12,lg:6},{default:r((()=>[o(y,{placeholder:"部门名称"})])),_:1}),l[10]||(l[10]=h("div",{style:{width:"12px"}},null,-1)),o(v,{xs:24,sm:12,lg:6,class:"el-col2"},{default:r((()=>[o(g,null,{default:r((()=>l[8]||(l[8]=[f("搜索")]))),_:1}),o(g,{onClick:l[0]||(l[0]=e=>J("add"))},{default:r((()=>l[9]||(l[9]=[f("新增角色")]))),_:1})])),_:1})])),_:1}),o(X,{data:U(c)},{default:r((()=>[o(F,{label:"角色名称",prop:"name"}),o(F,{label:"描述",prop:"des"}),o(F,{label:"状态",prop:"status"},{default:r((e=>[o(I,{type:1===e.row.status?"primary":"info"},{default:r((()=>[f(_(1===e.row.status?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1}),o(F,{label:"创建时间",prop:"date"},{default:r((e=>{return[f(_((a=e.row.date,new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-"))),1)];var a})),_:1}),o(F,{fixed:"right",label:"操作",width:"100px"},{default:r((e=>[o(z,null,{default:r((()=>[o(S,{list:[{key:"permission",label:"菜单权限"},{key:"edit",label:"编辑角色"},{key:"delete",label:"删除角色"}],onClick:a=>{return l=a,t=e.row,void("permission"===l.key?D():"edit"===l.key?J("edit",t):"delete"===l.key&&G());var l,t}},null,8,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"]),o(Q,{modelValue:U(t),"onUpdate:modelValue":l[6]||(l[6]=e=>M(t)?t.value=e:null),title:"add"===U(w)?"新增角色":"编辑角色",width:"30%"},{footer:r((()=>[h("div",R,[o(g,{onClick:l[4]||(l[4]=e=>t.value=!1)},{default:r((()=>l[11]||(l[11]=[f("取消")]))),_:1}),o(g,{type:"primary",onClick:l[5]||(l[5]=e=>H(U(i)))},{default:r((()=>l[12]||(l[12]=[f("提交")]))),_:1})])])),default:r((()=>[o(O,{ref_key:"formRef",ref:i,model:U(p),rules:U(m),"label-width":"120px"},{default:r((()=>[o(A,{label:"角色名称",prop:"name"},{default:r((()=>[o(y,{modelValue:U(p).name,"onUpdate:modelValue":l[1]||(l[1]=e=>U(p).name=e)},null,8,["modelValue"])])),_:1}),o(A,{label:"描述",prop:"des"},{default:r((()=>[o(y,{modelValue:U(p).des,"onUpdate:modelValue":l[2]||(l[2]=e=>U(p).des=e),type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),o(A,{label:"状态"},{default:r((()=>[o(K,{modelValue:U(p).status,"onUpdate:modelValue":l[3]||(l[3]=e=>U(p).status=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),o(Q,{modelValue:U(s),"onUpdate:modelValue":l[7]||(l[7]=e=>M(s)?s.value=e:null),title:"菜单权限",width:"30%"},{default:r((()=>[h("div",Z,[o(W,{data:U(n),"show-checkbox":"","node-key":"id","default-expanded-keys":[1,2,3,4,5,6,7,8],"default-checked-keys":[1,2,3],props:E},null,8,["data"])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-8012e667"]]);export{D as default};
