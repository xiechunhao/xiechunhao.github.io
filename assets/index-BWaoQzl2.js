import{i as M}from"./index-p1XoTQj1.js";import{r as C,o as I,c as k,w as i,b as a,d as V,e as x,E as y,aB as h,aN as Q,q as W,aV as $,b4 as D,a as w,u as p,aF as S,aH as E,aG as q,aK as R}from"./index-BF2fBoPb.js";import{i as J}from"./index-Cjr4ibGp.js";import"./image-viewer-NlVDGd40.js";import"./upload-CY9ZjjH3.js";import"./progress-C9ZnX_fS.js";import{i as j,_ as L,F as B}from"./index-C8P85qt1.js";import{u as F}from"./index-BoWW9VGZ.js";import"./throttle-B3l-8Wjp.js";import"./cloneDeep-Zuu3-0H5.js";import"./vuedraggable.umd-DLnsjw3h.js";const X={style:{display:"flex","align-items":"center"}},z={style:{flex:"1","padding-left":"12px"}},G={__name:"demo-basic",setup(O){const s=C([{key:1,name:"c184eef391ae48dba87e3057e70238fb.jpg",url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,name:"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,name:"f6bc05af944a4f738b54128717952107.jpg",url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),r=C(!1),b=()=>{console.log(JSON.parse(JSON.stringify(s.value))),y.success("数据已打印在控制台")},v=(m,g)=>{if(!m.file)return;if(!m.file.type.startsWith("image")){y.error("只能选择图片");return}if(m.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}g||s.value.push({...m});const d=s.value.find(t=>t.key===m.key);if(console.log(JSON.parse(JSON.stringify(d))),!d)return;d.status="uploading",d.progress==null&&(d.progress=20);const l=setInterval(()=>{if(Math.round(Math.random()*10)<3){d.status="exception",y.error("上传失败, 服务器繁忙"),clearInterval(l);return}d.progress==null?d.progress=20:d.progress+=20,d.progress===100&&(d.status="done",clearInterval(l))},1e3)},c=m=>{s.value.splice(s.value.indexOf(m),1)};return(m,g)=>{const d=j,l=h,t=Q,e=W,n=J;return I(),k(n,{header:"基础示例"},{default:i(()=>[a(d,{limit:8,drag:!0,modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=o=>s.value=o),readonly:r.value,onUpload:v,onRetry:g[1]||(g[1]=o=>v(o,!0)),onRemove:c},null,8,["modelValue","readonly"]),V("div",X,[a(l,{type:"primary",onClick:b},{default:i(()=>g[3]||(g[3]=[x("获取数据")])),_:1}),g[4]||(g[4]=V("div",{style:{"line-height":"22px","margin-left":"22px"}},"只读:",-1)),V("div",z,[a(e,{modelValue:r.value,"onUpdate:modelValue":g[2]||(g[2]=o=>r.value=o)},{default:i(()=>[a(t,{value:!1,label:"否"}),a(t,{value:!0,label:"是"})]),_:1},8,["modelValue"])])])]),_:1})}}},P={style:{display:"flex","align-items":"center"}},H={style:{flex:"1","padding-left":"12px"}},K={__name:"demo-advanced",setup(O){const s=C([{key:1,url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),r=C(!1),b=C(!1),v=t=>{if(t.file){if(t.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}s.value.push({...t})}},c=t=>{$.confirm("确定要删除吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{s.value.splice(s.value.indexOf(t),1)}).catch(()=>{})},m=()=>{if(d()){l();return}b.value=!0,s.value.forEach(t=>{(t.status==null||t.status==="exception")&&g(t)})},g=t=>{t.status="uploading",t.progress==null&&(t.progress=20);const e=setInterval(()=>{if(Math.round(Math.random()*10)<3){t.status="exception",y.error("上传失败, 服务器繁忙"),clearInterval(e);return}t.progress==null?t.progress=20:t.progress+=20,t.progress===100&&(t.status="done",clearInterval(e),d()&&l())},Math.round(Math.random()*2500)+500)},d=()=>!s.value.some(t=>t.status!=="done"),l=()=>{console.log(JSON.parse(JSON.stringify(s.value))),console.log(JSON.stringify(s.value)),b.value=!1};return(t,e)=>{const n=j,o=h,u=Q,f=W,U=J;return I(),k(U,{header:"手动上传"},{default:i(()=>[a(n,{drag:!0,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=N=>s.value=N),readonly:b.value,disabled:r.value,onUpload:v,onRetry:g,onRemove:c},null,8,["modelValue","readonly","disabled"]),V("div",P,[a(o,{type:"primary",loading:b.value,onClick:m},{default:i(()=>e[2]||(e[2]=[x(" 提交 ")])),_:1},8,["loading"]),e[3]||(e[3]=V("div",{style:{"line-height":"22px","margin-left":"22px"}},"禁用:",-1)),V("div",H,[a(f,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=N=>r.value=N)},{default:i(()=>[a(u,{value:!1,label:"否"}),a(u,{value:!0,label:"是"})]),_:1},8,["modelValue"])])]),e[4]||(e[4]=V("div",{style:{"margin-top":"20px"}}," 默认选择文件后就会调用请求后端上传的方法，也可以改为在点击提交按钮后才上传 ",-1))]),_:1})}}},T={__name:"demo-multiple",setup(O){const s=C([{key:1,name:"c184eef391ae48dba87e3057e70238fb.jpg",url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,name:"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,name:"f6bc05af944a4f738b54128717952107.jpg",url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),r=()=>{console.log(JSON.parse(JSON.stringify(s.value))),y.success("数据已打印在控制台")},b=c=>{if(!c.file)return;if(!c.file.type.startsWith("image")){y.error("只能选择图片");return}if(c.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}s.value.push({...c});const m=s.value.find(d=>d.key===c.key);if(console.log(JSON.stringify(m)),!m)return;m.status="uploading",m.progress=20;const g=setInterval(()=>{m.progress==null?m.progress=20:m.progress+=20,m.progress===100&&(m.status="done",clearInterval(g))},1e3)},v=c=>{s.value.splice(s.value.indexOf(c),1)};return(c,m)=>{const g=j,d=h,l=J;return I(),k(l,{header:"支持多选"},{default:i(()=>[a(g,{limit:8,drag:!0,multiple:!0,modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=t=>s.value=t),onUpload:b,onRemove:v},null,8,["modelValue"]),a(d,{type:"primary",onClick:r},{default:i(()=>m[1]||(m[1]=[x("获取数据")])),_:1})]),_:1})}}},A={__name:"demo-form1",setup(O){const s=C(null),[r,b,v]=D({id:void 0,realName:"",idCard:"",idCardImg1:[],idCardImg2:[]}),c=w({realName:[{required:!0,message:"请输入真实姓名",type:"string",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",type:"string",trigger:"blur"}],idCardImg1:[{required:!0,message:"请上传身份证正面",type:"array",trigger:"change"}],idCardImg2:[{required:!0,message:"请上传身份证反面",type:"array",trigger:"change"}]}),m=()=>{var t,e;(e=(t=s.value)==null?void 0:t.validate)==null||e.call(t,n=>{if(!n)return;const o={...r,idCardImg1:r.idCardImg1.map(u=>u.url).join(),idCardImg2:r.idCardImg2.map(u=>u.url).join()};console.log(JSON.parse(JSON.stringify(o))),y.success("数据已打印在控制台")})},g=(t,e)=>{if(!e.file)return;if(!e.file.type.startsWith("image")){y.error("只能选择图片");return}if(e.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}(t===1?r.idCardImg2:r.idCardImg1).push({...e});const n=(t===1?r.idCardImg2:r.idCardImg1).find(o=>o.key===e.key);n&&(n.status="uploading",F(e.file,{onUploadProgress:o=>{o.total!=null&&(n.progress=o.loaded/o.total*100)}}).then(o=>{var u,f;n.status="done",n.url=o.url,(f=(u=s.value)==null?void 0:u.clearValidate)==null||f.call(u,t===1?"idCardImg2":"idCardImg1")}).catch(o=>{n.status="exception",y.error(o.message)}))},d=(t,e)=>{const n=t===1?r.idCardImg2:r.idCardImg1;n.splice(n.indexOf(e),1)},l=()=>{var o,u;const t={id:1,realName:"张三",idCard:"420111200001013807",idCardImg1:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",idCardImg2:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"},e=[{key:1,url:t.idCardImg1,status:"done"}],n=[{key:1,url:t.idCardImg2,status:"done"}];v({...t,idCardImg1:e,idCardImg2:n}),(u=(o=s.value)==null?void 0:o.clearValidate)==null||u.call(o)};return(t,e)=>{const n=E,o=q,u=j,f=h,U=R,N=J;return I(),k(N,{header:"使用案例一"},{default:i(()=>[a(U,{ref_key:"formRef",ref:s,model:p(r),rules:c,"label-width":"100px",style:{"max-width":"380px"},onSubmit:e[8]||(e[8]=S(()=>{},["prevent"]))},{default:i(()=>[a(o,{label:"真实姓名",prop:"realName"},{default:i(()=>[a(n,{clearable:"",maxlength:20,modelValue:p(r).realName,"onUpdate:modelValue":e[0]||(e[0]=_=>p(r).realName=_),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),a(o,{label:"身份证号",prop:"idCard"},{default:i(()=>[a(n,{clearable:"",maxlength:20,modelValue:p(r).idCard,"onUpdate:modelValue":e[1]||(e[1]=_=>p(r).idCard=_),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),a(o,{label:"身份证正面",prop:"idCardImg1"},{default:i(()=>[a(u,{limit:1,drag:!0,sortable:!1,modelValue:p(r).idCardImg1,"onUpdate:modelValue":e[2]||(e[2]=_=>p(r).idCardImg1=_),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0},style:{"max-width":"100%"},onUpload:e[3]||(e[3]=_=>g(0,_)),onRemove:e[4]||(e[4]=_=>d(0,_))},null,8,["modelValue"])]),_:1}),a(o,{label:"身份证反面",prop:"idCardImg2"},{default:i(()=>[a(u,{limit:1,drag:!0,sortable:!1,modelValue:p(r).idCardImg2,"onUpdate:modelValue":e[5]||(e[5]=_=>p(r).idCardImg2=_),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0},onUpload:e[6]||(e[6]=_=>g(1,_)),onRemove:e[7]||(e[7]=_=>d(1,_))},null,8,["modelValue"])]),_:1}),a(o,null,{default:i(()=>[a(f,{type:"primary",onClick:m},{default:i(()=>e[9]||(e[9]=[x("提交")])),_:1}),a(f,{type:"primary",onClick:l},{default:i(()=>e[10]||(e[10]=[x("回显数据")])),_:1})]),_:1})]),_:1},8,["model","rules"]),e[11]||(e[11]=V("div",{style:{"padding-top":"8px"}}," 可以很方便的修改宽高等样式，单选的时候使用也非常的 nice ",-1))]),_:1})}}},Y={__name:"demo-form2",setup(O){const s=C(null),[r,b,v]=D({id:void 0,content:"",images:[]}),c=w({content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],images:[{required:!0,message:"请上传现场照片",type:"array",trigger:"change"}]}),m=()=>{var t,e;(e=(t=s.value)==null?void 0:t.validate)==null||e.call(t,n=>{if(!n)return;const o={...r,images:JSON.stringify(r.images.map(u=>u.url))};console.log(JSON.parse(JSON.stringify(o))),y.success("数据已打印在控制台")})},g=t=>{if(!t.file)return;if(!t.file.type.startsWith("image")){y.error("只能选择图片");return}if(t.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}r.images.push({...t});const e=r.images.find(n=>n.key===t.key);e&&(e.status="uploading",F(t.file,{onUploadProgress:n=>{n.total!=null&&(e.progress=n.loaded/n.total*100)}}).then(n=>{var o,u;e.status="done",e.url=n.url,(u=(o=s.value)==null?void 0:o.clearValidate)==null||u.call(o,"images")}).catch(n=>{e.status="exception",y.error(n.message)}))},d=t=>{r.images.splice(r.images.indexOf(t),1)},l=()=>{var n,o;const t={id:1,content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",images:'["https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"]'},e=JSON.parse(t.images).map((u,f)=>({key:f,url:u,status:"done"}));v({...t,images:e}),(o=(n=s.value)==null?void 0:n.clearValidate)==null||o.call(n)};return(t,e)=>{const n=E,o=q,u=j,f=h,U=R,N=J;return I(),k(N,{header:"使用案例二"},{default:i(()=>[a(U,{ref_key:"formRef",ref:s,model:p(r),rules:c,"label-width":"100px",style:{"max-width":"460px"},onSubmit:e[2]||(e[2]=S(()=>{},["prevent"]))},{default:i(()=>[a(o,{label:"投诉内容",prop:"content"},{default:i(()=>[a(n,{rows:4,type:"textarea",modelValue:p(r).content,"onUpdate:modelValue":e[0]||(e[0]=_=>p(r).content=_),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),a(o,{label:"现场照片",prop:"images"},{default:i(()=>[a(u,{limit:3,drag:!0,modelValue:p(r).images,"onUpdate:modelValue":e[1]||(e[1]=_=>p(r).images=_),onUpload:g,onRemove:d},null,8,["modelValue"])]),_:1}),a(o,null,{default:i(()=>[a(f,{type:"primary",onClick:m},{default:i(()=>e[3]||(e[3]=[x("提交")])),_:1}),a(f,{type:"primary",onClick:l},{default:i(()=>e[4]||(e[4]=[x("回显数据")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},Z={__name:"demo-customer",setup(O){const s=C(null),[r,b,v]=D({id:void 0,realName:"",idCardImg1:"",idCardImg2:"",content:"",images:""}),c=w({realName:[{required:!0,message:"请输入真实姓名",type:"string",trigger:"blur"}],idCardImg1:[{required:!0,message:"请上传身份证正面",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,t)=>{if(l&&l.startsWith("blob:"))return t(new Error("图片还未上传完毕"));t()}}],idCardImg2:[{required:!0,message:"请上传身份证反面",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,t)=>{if(l&&l.startsWith("blob:"))return t(new Error("图片还未上传完毕"));t()}}],content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],images:[{required:!0,message:"请上传现场照片",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,t)=>{if(l&&JSON.parse(l).some(e=>!e||e.startsWith("blob:")))return t(new Error("照片还未上传完毕"));t()}}]}),m=()=>{var d,l;(l=(d=s.value)==null?void 0:d.validate)==null||l.call(d,t=>{t&&(console.log(JSON.parse(JSON.stringify(r))),y.success("数据已打印在控制台"))})},g=()=>{var l,t;v({id:1,realName:"张三",idCardImg1:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",idCardImg2:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",images:'["https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"]'}),(t=(l=s.value)==null?void 0:l.clearValidate)==null||t.call(l)};return(d,l)=>{const t=E,e=q,n=h,o=R,u=J;return I(),k(u,{header:"二次封装简化使用"},{default:i(()=>[l[8]||(l[8]=V("div",{style:{"margin-bottom":"24px"}}," 二次封装后无需再处理上传事件及转换数据格式，使用起来就像一个普通输入框一样简单 ",-1)),a(o,{ref_key:"formRef",ref:s,model:p(r),rules:c,"label-width":"100px",style:{"max-width":"460px"},onSubmit:l[5]||(l[5]=S(()=>{},["prevent"]))},{default:i(()=>[a(e,{label:"真实姓名",prop:"realName"},{default:i(()=>[a(t,{clearable:"",maxlength:20,modelValue:p(r).realName,"onUpdate:modelValue":l[0]||(l[0]=f=>p(r).realName=f),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),a(e,{label:"身份证正面",prop:"idCardImg1"},{default:i(()=>[a(L,{limit:1,modelValue:p(r).idCardImg1,"onUpdate:modelValue":l[1]||(l[1]=f=>p(r).idCardImg1=f),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0}},null,8,["modelValue"])]),_:1}),a(e,{label:"身份证反面",prop:"idCardImg2"},{default:i(()=>[a(L,{limit:1,modelValue:p(r).idCardImg2,"onUpdate:modelValue":l[2]||(l[2]=f=>p(r).idCardImg2=f),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0}},null,8,["modelValue"])]),_:1}),a(e,{label:"投诉内容",prop:"content"},{default:i(()=>[a(t,{rows:4,type:"textarea",modelValue:p(r).content,"onUpdate:modelValue":l[3]||(l[3]=f=>p(r).content=f),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),a(e,{label:"现场照片",prop:"images"},{default:i(()=>[a(L,{limit:3,modelValue:p(r).images,"onUpdate:modelValue":l[4]||(l[4]=f=>p(r).images=f)},null,8,["modelValue"])]),_:1}),a(e,null,{default:i(()=>[a(n,{type:"primary",onClick:m},{default:i(()=>l[6]||(l[6]=[x("提交")])),_:1}),a(n,{type:"primary",onClick:g},{default:i(()=>l[7]||(l[7]=[x("回显数据")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},ee={__name:"demo-file",setup(O){const s=C(null),[r,b,v]=D({id:void 0,content:"",files:""}),c=w({content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],files:[{required:!0,message:"请上传现场附件",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,t)=>{if(l&&JSON.parse(l).some(e=>!e.url||e.url.startsWith("blob:")))return t(new Error("附件还未上传完毕"));t()}}]}),m=()=>{var d,l;(l=(d=s.value)==null?void 0:d.validate)==null||l.call(d,t=>{t&&(console.log(JSON.parse(JSON.stringify(r))),y.success("数据已打印在控制台"))})},g=()=>{var l,t;v({id:1,content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",files:'[{"url":"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","name":"c184eef391ae48dba87e3057e70238fb.jpg"},{"url":"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg","name":"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"},{"url":"https://cdn.eleadmin.com/20200610/20200708224450.pdf","name":"20200708224450.pdf"}]'}),(t=(l=s.value)==null?void 0:l.clearValidate)==null||t.call(l)};return(d,l)=>{const t=E,e=q,n=h,o=R,u=J;return I(),k(u,{header:"附件上传"},{default:i(()=>[l[5]||(l[5]=V("div",{style:{"margin-bottom":"24px"}}," 不仅仅能用于图片上传的场景, 还可用于文件上传的场景 ",-1)),a(o,{ref_key:"formRef",ref:s,model:p(r),rules:c,"label-width":"100px",style:{"max-width":"460px"},onSubmit:l[2]||(l[2]=S(()=>{},["prevent"]))},{default:i(()=>[a(e,{label:"投诉内容",prop:"content"},{default:i(()=>[a(t,{rows:4,type:"textarea",modelValue:p(r).content,"onUpdate:modelValue":l[0]||(l[0]=f=>p(r).content=f),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),a(e,{label:"附件",prop:"files"},{default:i(()=>[a(B,{limit:8,modelValue:p(r).files,"onUpdate:modelValue":l[1]||(l[1]=f=>p(r).files=f)},null,8,["modelValue"])]),_:1}),a(e,null,{default:i(()=>[a(n,{type:"primary",onClick:m},{default:i(()=>l[3]||(l[3]=[x("提交")])),_:1}),a(n,{type:"primary",onClick:g},{default:i(()=>l[4]||(l[4]=[x("回显数据")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},te={name:"ExtensionUpload"},ge=Object.assign(te,{setup(O){return(s,r)=>{const b=M;return I(),k(b,null,{default:i(()=>[a(G),a(K),a(T),a(A),a(Y),a(Z),a(ee)]),_:1})}}});export{ge as default};
