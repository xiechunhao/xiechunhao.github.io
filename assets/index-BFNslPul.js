import{J as M,aH as W,g as J,k as q,bi as G,bd as Q,i as X,a_ as Y,r as h,H as d,O,ai as u,o as t,c,w as i,a1 as y,a7 as C,d as Z,a4 as _,a5 as I,b as T,cM as P,aU as x,aF as ee,l as w,F as B,m as le,e as L,t as $}from"./index-BF2fBoPb.js";const ae={value:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,selectedLabel:String,selected:Array,maxTagCount:Number,maxTagTextLength:Number,tagType:String,automaticDropdown:Boolean,filterable:Boolean,visible:Boolean,teleported:Boolean,persistent:Boolean,placement:String,transition:{type:String,default:"el-fade-in-linear"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectClass:String,selectStyle:Object,inputStyle:Object,selectTagsStyle:Object},te={"update:visible":e=>!0,removeTag:e=>!0,clear:()=>!0,focus:e=>!0,blur:e=>!0,filterChange:e=>!0},ie=M({name:"EleBasicSelect",components:{ElInput:W,ElIcon:J,ElTag:q,CloseCircleFilled:G,ArrowDown:Q,EleTooltip:X,ReceiverView:Y},props:ae,emits:te,setup(e,{emit:a}){const o=h(null),b=h(null),f=h(null),m=h(e.multiple||!e.selectedLabel?"":e.selectedLabel),p=h(""),s=d(()=>e.multiple?!Array.isArray(e.value)||!e.value.length:e.value==null||e.value===""),z=d(()=>{const l=s.value&&e.placeholder?e.placeholder:"";return!e.filterable||!e.visible||e.multiple?l:e.selectedLabel||l}),r=d(()=>typeof e.maxTagCount=="number"&&e.selected!=null&&e.selected.length>e.maxTagCount),g=d(()=>!r.value||s.value||e.selected==null?e.selected||[]:e.selected.slice(0,e.maxTagCount)),V=d(()=>!r.value||s.value||e.selected==null?[]:e.selected.slice(e.maxTagCount)),k=d(()=>s.value||e.maxTagCount==null||e.maxTagCount<0?0:e.value.length-e.maxTagCount),n=()=>{o.value&&o.value.updatePopper()},S=l=>{if(e.filterable&&e.visible){if(l!=null&&l.target!=null){const N=l.target;if(N.nodeName&&N.nodeName.toLowerCase()==="input")return}const v=e.multiple?f.value:b.value;v&&v.focus()}},F=l=>{e.filterable&&e.visible&&e.multiple&&(p.value=l,a("filterChange",l))},A=l=>{e.filterable&&e.visible&&!e.multiple&&(m.value=l,a("filterChange",l))},E=l=>{(!e.disabled||!l)&&a("update:visible",l)},R=l=>{e.disabled||a("removeTag",l)},D=()=>{a("clear")},U=l=>{e.automaticDropdown&&e.visible&&l.stopPropagation()},K=l=>{e.automaticDropdown&&!e.visible&&E(!0),a("focus",l)},j=l=>{a("blur",l)},H=l=>{!e.disabled&&e.visible&&(l.stopPropagation(),l.preventDefault(),E(!1))};return O(()=>e.selectedLabel,l=>{(!e.filterable||!e.visible)&&(m.value=e.multiple||!l?"":l)}),O(()=>e.visible,l=>{if(e.filterable)if(e.multiple)p.value="",l&&S();else{const v=e.selectedLabel;m.value=l||!v?"":v}}),{tooltipRef:o,inputRef:b,searchRef:f,inputValue:m,searchValue:p,isEmpty:s,inputPlaceholder:z,isCollapse:r,currentTags:g,omittedTags:V,omittedSize:k,updatePopper:n,focusSearchInput:S,updateSearchValue:F,updateInputValue:A,updateVisible:E,handleTagClose:R,handleClear:D,handleInputClick:U,handleInputFocus:K,handleInputBlur:j,handleInputEsc:H}}}),ne=(e,a)=>{const o=e.__vccOpts||e;for(const[b,f]of a)o[b]=f;return o};function se(e,a,o,b,f,m){const p=u("CloseCircleFilled"),s=u("ElIcon"),z=u("ArrowDown"),r=u("ElInput"),g=u("ElTag"),V=u("ReceiverView"),k=u("EleTooltip");return t(),c(k,{ref:"tooltipRef",trigger:"click",visible:e.visible,disabled:e.disabled,placement:e.placement,teleported:e.teleported,width:e.popperWidth,popperClass:e.popperClass,popperOptions:e.popperOptions,transition:e.transition,gpuAcceleration:e.transition==="el-fade-in-linear",effect:"light",persistent:!0,isPopover:!0,triggerKeys:[],"onUpdate:visible":e.updateVisible},{body:i(()=>[e.persistent||e.visible?(t(),c(V,{key:0,class:"ele-popover-body",onClick:e.focusSearchInput},{default:i(()=>[y(e.$slots,"default")]),_:3},8,["onClick"])):C("",!0)]),default:i(()=>[Z("div",{class:_(["ele-select",e.selectClass,{"is-empty":e.isEmpty},{"is-multiple":e.multiple},{"is-disabled":e.disabled},{"is-filterable":e.filterable},{"is-small":e.size==="small"},{"is-large":e.size==="large"},{"is-opened":e.visible}]),style:I(e.selectStyle)},[T(r,{ref:"inputRef",size:e.size,disabled:e.disabled,validateEvent:!1,modelValue:e.inputValue,placeholder:e.filterable&&e.multiple&&e.visible?"":e.inputPlaceholder,readonly:!e.filterable||!e.visible||e.multiple,style:I(e.inputStyle),"onUpdate:modelValue":e.updateInputValue,onClick:e.handleInputClick,onFocus:e.handleInputFocus,onBlur:e.handleInputBlur,onKeydown:P(e.handleInputEsc,["esc"])},x({suffix:i(()=>[e.clearable&&!e.disabled&&!e.isEmpty?(t(),c(s,{key:0,class:"ele-select-clear el-input__icon",onClick:ee(e.handleClear,["stop"])},{default:i(()=>[y(e.$slots,"clearIcon",{},()=>[T(p)])]),_:3},8,["onClick"])):C("",!0),T(s,{class:"ele-select-arrow el-input__icon"},{default:i(()=>[y(e.$slots,"suffixIcon",{visible:e.visible},()=>[T(z)])]),_:3})]),_:2},[e.$slots.prefix?{name:"prefix",fn:i(()=>[y(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["size","disabled","modelValue","placeholder","readonly","style","onUpdate:modelValue","onClick","onFocus","onBlur","onKeydown"]),e.multiple?(t(),w("div",{key:0,class:"ele-select-tags",style:I(e.selectTagsStyle)},[(t(!0),w(B,null,le(e.currentTags,(n,S)=>(t(),c(g,{key:S+"-"+n.value,size:e.size,type:e.tagType,closable:!e.disabled,disableTransitions:!0,title:n.label,onClose:F=>e.handleTagClose(n)},{default:i(()=>[n.label&&e.maxTagTextLength&&n.label.length>e.maxTagTextLength?(t(),w(B,{key:0},[L($(n.label.slice(0,e.maxTagTextLength))+"... ",1)],64)):(t(),w(B,{key:1},[L($(n.label),1)],64))]),_:2},1032,["size","type","closable","title","onClose"]))),128)),e.isCollapse?(t(),c(g,{key:0,size:e.size,type:e.tagType,disableTransitions:!0},{default:i(()=>[y(e.$slots,"maxTagPlaceholder",{omittedValues:e.omittedTags,omittedSize:e.omittedSize},()=>[L(" +"+$(e.omittedSize),1)])]),_:3},8,["size","type"])):C("",!0),!e.disabled&&e.filterable?(t(),c(g,{key:1,size:e.size,disableTransitions:!0,class:"ele-select-search"},{default:i(()=>[T(r,{ref:"searchRef",size:e.size,validateEvent:!1,modelValue:e.searchValue,placeholder:e.inputPlaceholder,"onUpdate:modelValue":e.updateSearchValue,onKeydown:P(e.handleInputEsc,["esc"])},null,8,["size","modelValue","placeholder","onUpdate:modelValue","onKeydown"])]),_:1},8,["size"])):C("",!0)],4)):C("",!0)],6)]),_:3},8,["visible","disabled","placement","teleported","width","popperClass","popperOptions","transition","gpuAcceleration","onUpdate:visible"])}const ue=ne(ie,[["render",se]]);export{ue as i};
