import{O as q,i as U,y as w,m as G,j as K,d as V,r as h,A as J,D as B,P as Q,o as W,b as c,E as F,w as z,n as X,z as Z,u as ee,a as $,c as H,e as E,L as A,J as R,M as N,F as I,Q as te,K as ae,t as L,R as se}from"../js/index.60e0b4ed.js";import{o as M,d as ne,h as j,q as C,t as oe,L as O,v as ie,w as le,p as ce,_ as re,x as ue,b as de}from"./index.vue_vue_type_style_index_0_lang-dbf94954.js";const fe=Symbol(),he=()=>q(fe,null),[ge,p,ve]=U("list"),me={error:Boolean,offset:w(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:G("down"),loadingText:String,finishedText:String,immediateCheck:K};var _e=V({name:ge,props:me,emits:["load","update:error","update:loading"],setup(e,{emit:f,slots:o}){const n=h(e.loading),r=h(),T=h(),u=he(),a=M(r),m=J(()=>e.scroller||a.value),d=()=>{F(()=>{if(n.value||e.finished||e.disabled||e.error||(u==null?void 0:u.value)===!1)return;const{direction:s}=e,x=+e.offset,g=C(m);if(!g.height||oe(r))return;let y=!1;const v=C(T);s==="up"?y=g.top-v.top<=x:y=v.bottom-g.bottom<=x,y&&(n.value=!0,f("update:loading",!0),f("load"))})},S=()=>{if(e.finished){const s=o.finished?o.finished():e.finishedText;if(s)return c("div",{class:p("finished-text")},[s])}},b=()=>{f("update:error",!1),d()},_=()=>{if(e.error){const s=o.error?o.error():e.errorText;if(s)return c("div",{role:"button",class:p("error-text"),tabindex:0,onClick:b},[s])}},l=()=>{if(n.value&&!e.finished&&!e.disabled)return c("div",{class:p("loading")},[o.loading?o.loading():c(O,{class:p("loading-icon")},{default:()=>[e.loadingText||ve("loading")]})])};return B(()=>[e.loading,e.finished,e.error],d),u&&B(u,s=>{s&&d()}),Q(()=>{n.value=e.loading}),W(()=>{e.immediateCheck&&d()}),ne({check:d}),j("scroll",d,{target:m,passive:!0}),()=>{var s;const x=(s=o.default)==null?void 0:s.call(o),g=c("div",{ref:T,class:p("placeholder")},null);return c("div",{ref:r,role:"feed",class:p(),"aria-busy":n.value},[e.direction==="down"?x:g,l(),S(),_(),e.direction==="up"?x:g])}}});const Te=z(_e),[xe,P,Se]=U("pull-refresh"),Y=50,ye=["pulling","loosing","success"],Re={disabled:Boolean,modelValue:Boolean,headHeight:w(Y),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:X,successDuration:w(500),animationDuration:w(300)};var be=V({name:xe,props:Re,emits:["change","refresh","update:modelValue"],setup(e,{emit:f,slots:o}){let n;const r=h(),T=h(),u=M(r),a=Z({status:"normal",distance:0,duration:0}),m=ie(),d=()=>{if(e.headHeight!==Y)return{height:"".concat(e.headHeight,"px")}},S=()=>a.status!=="loading"&&a.status!=="success"&&!e.disabled,b=t=>{const i=+(e.pullDistance||e.headHeight);return t>i&&(t<i*2?t=i+(t-i)/2:t=i*1.5+(t-i*2)/4),Math.round(t)},_=(t,i)=>{const D=+(e.pullDistance||e.headHeight);a.distance=t,i?a.status="loading":t===0?a.status="normal":t<D?a.status="pulling":a.status="loosing",f("change",{status:a.status,distance:t})},l=()=>{const{status:t}=a;return t==="normal"?"":e["".concat(t,"Text")]||Se(t)},s=()=>{const{status:t,distance:i}=a;if(o[t])return o[t]({distance:i});const D=[];return ye.includes(t)&&D.push(c("div",{class:P("text")},[l()])),t==="loading"&&D.push(c(O,{class:P("loading")},{default:l})),D},x=()=>{a.status="success",setTimeout(()=>{_(0)},+e.successDuration)},g=t=>{n=le(u.value)===0,n&&(a.duration=0,m.start(t))},y=t=>{S()&&g(t)},v=t=>{if(S()){n||g(t);const{deltaY:i}=m;m.move(t),n&&i.value>=0&&m.isVertical()&&(ce(t),_(b(i.value)))}},k=()=>{n&&m.deltaY.value&&S()&&(a.duration=+e.animationDuration,a.status==="loosing"?(_(+e.headHeight,!0),f("update:modelValue",!0),F(()=>f("refresh"))):_(0))};return B(()=>e.modelValue,t=>{a.duration=+e.animationDuration,t?_(+e.headHeight,!0):o.success||e.successText?x():_(0,!1)}),j("touchmove",v,{target:T}),()=>{var t;const i={transitionDuration:"".concat(a.duration,"ms"),transform:a.distance?"translate3d(0,".concat(a.distance,"px, 0)"):""};return c("div",{ref:r,class:P()},[c("div",{ref:T,class:P("track"),style:i,onTouchstartPassive:y,onTouchend:k,onTouchcancel:k},[c("div",{class:P("head"),style:d()},[s()]),(t=o.default)==null?void 0:t.call(o)])])}}});const pe=z(be);const De={class:"main"},Ee={class:"content"},Pe={class:"title"},ke={class:"money"},we={class:"time"},$e=V({__name:"assetsRecord",setup(e){const{t:f}=ee(),o=te(),n=h([]),r=h(!1),T=h(!1),u=h(!1),a=h(o.query.type),m=h([{name:f("incomeReward"),type:"EARNINGS"},{name:f("incomeReward"),type:"NEWUSER"},{name:f("incomeReward"),type:"INVITE"},{name:f("incomeReward"),type:"CONTRIB"}]),d=h({page:0,size:20}),S=()=>{u.value&&(n.value=[],u.value=!1),b()},b=async()=>{try{let{list:l}=await ue({type:a.value,page:d.value.page,size:d.value.size});r.value=!1,l?(n.value=n.value.concat(l),d.value.page++):T.value=!0}catch(l){console.error(l)}finally{r.value=!1}},_=()=>{d.value.page=0,n.value=[],u.value=!1,T.value=!1,r.value=!0,b()};return(l,s)=>{const x=re,g=Te,y=pe;return $(),H(I,null,[c(x),E("div",De,[c(y,{modelValue:R(u),"onUpdate:modelValue":s[1]||(s[1]=v=>N(u)?u.value=v:null),onRefresh:_,"loosing-text":l.$t("loosingText"),"pulling-text":l.$t("pullingText")},{default:A(()=>[c(g,{loading:R(r),"onUpdate:loading":s[0]||(s[0]=v=>N(r)?r.value=v:null),finished:R(T),"finished-text":l.$t("finishedText"),"loading-text":l.$t("loadingText"),onLoad:S},{default:A(()=>[($(!0),H(I,null,ae(R(n),(v,k)=>($(),H("div",{key:k,class:"wallet"},[E("div",Ee,[E("div",Pe,L(R(m).find(t=>t.type==R(a)).name),1),E("div",ke,L(v.num),1),E("div",we,L(R(se)(v.createAt,"y-m-d h:i:s")),1)])]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["modelValue","loosing-text","pulling-text"])])],64)}}});const Be=de($e,[["__scopeId","data-v-39246739"]]);export{Be as default};
