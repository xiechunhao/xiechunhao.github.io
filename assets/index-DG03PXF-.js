import{d4 as mn,d5 as gn,d6 as ur,d7 as Mo,d8 as dr,d9 as cr,da as fr,db as hr,dc as mr,dd as gr,de as $o,df as vr,dg as pr,dh as jl,di as yr,dj as Cr,dk as br,dl as Gn,dm as wr,dn as Sr,dp as Rr,dq as xr,dr as kr,ds as Tr,J as Fe,a0 as lt,r as O,cg as it,H as F,u as E,bS as _l,R as wt,bZ as jt,N as Je,V as tt,dt as Er,a6 as Yn,T as he,c0 as Ul,F as Ne,du as _t,cK as vn,dv as Or,dw as Hr,cr as Lt,b as N,cG as No,c1 as Xn,dx as ql,ch as nl,O as ye,M as Fr,cB as Ir,bI as ol,U as Mr,a8 as pn,aO as gt,av as yn,g as St,cJ as $r,cI as Nr,cR as Dr,cx as Ml,ai as W,dy as Do,o as A,c as se,w as G,l as Y,d as we,a4 as Re,m as Le,e as Ct,t as Ve,bT as gl,a1 as Oe,dz as Cn,dA as Ar,dB as bn,L as vt,dC as xl,b$ as Pr,cN as el,dD as al,P as tl,dE as Gl,cE as Lr,cs as Kr,Y as Ao,I as wn,a5 as Xe,a7 as fe,bU as Jn,dF as zr,cU as Sn,dG as Wr,dH as Vr,a9 as Rn,aa as Br,K as Ft,cn as xn,dI as vl,b_ as zt,cQ as Zn,bP as He,cf as jr,a2 as Yt,dJ as _r,a$ as xe,dK as Ur,dL as qr,aC as kl,aE as kn,dM as Ae,dN as Gr,dO as Ke,dP as bt,dQ as Ut,bG as Po,bn as Lo,dR as Yr,Z as Ko,$ as zo,dS as Xr,aB as Tn,aP as Jr,i as En,aF as $l,b1 as Qe,aU as ct,bd as Wo,dT as Zr,a as rl,b2 as mt,dU as Qr,dV as es,dW as ts,aH as Vo,cd as ls,bA as ns,bz as os,bw as as,aK as Bo,aG as jo,aJ as _o,aI as Uo,aD as qo,dX as rs,bb as ss,dY as is,dZ as us,d_ as ds,d$ as cs,au as fs,b0 as hs,d1 as Al,e0 as ms,e1 as gs,e2 as vs,e3 as ps}from"./index-BF2fBoPb.js";import{i as ys}from"./index-B-b3I1wI.js";import{i as Cs}from"./index-BnIMXyIx.js";import{b as bs,i as ws}from"./isArrayLikeObject-j402kJv_.js";import{c as Ss,r as Go,v as Pt,I as Qn,S as eo,F as dl,u as Rs,B as to,g as cl,A as $t,R as xs,a as lo,b as ks,d as no,i as oo,e as ao,f as Ts,C as Vt,E as Yl,h as Xl,j as Yo,D as ro,k as Es,l as Os}from"./virtual-list-B6G0p9cv.js";import{T as Hs,i as Fs}from"./index-CcYpqHDV.js";import{V as Is}from"./vuedraggable.umd-DLnsjw3h.js";import{i as Ms}from"./index-BWYZqqjh.js";import{i as $s}from"./index-DuliLu7F.js";function Ns(e,t,l){if(!mn(l))return!1;var n=typeof t;return(n=="number"?gn(l)&&ur(t,l.length):n=="string"&&t in l)?Mo(l[t],e):!1}function Ds(e){return bs(function(t,l){var n=-1,o=l.length,r=o>1?l[o-1]:void 0,i=o>2?l[2]:void 0;for(r=e.length>3&&typeof r=="function"?(o--,r):void 0,i&&Ns(l[0],l[1],i)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=l[n];a&&e(t,a,n,r)}return t})}var As="[object Object]",Ps=Function.prototype,Ls=Object.prototype,Xo=Ps.toString,Ks=Ls.hasOwnProperty,zs=Xo.call(Object);function Ws(e){if(!dr(e)||cr(e)!=As)return!1;var t=fr(e);if(t===null)return!0;var l=Ks.call(t,"constructor")&&t.constructor;return typeof l=="function"&&l instanceof l&&Xo.call(l)==zs}function Vs(e){return function(t,l,n){for(var o=-1,r=Object(t),i=n(t),a=i.length;a--;){var s=i[++o];if(l(r[s],s,r)===!1)break}return t}}var Jo=Vs();function Bs(e,t){return e&&Jo(e,t,hr)}function js(e,t){return function(l,n){if(l==null)return l;if(!gn(l))return e(l,n);for(var o=l.length,r=-1,i=Object(l);++r<o&&n(i[r],r,i)!==!1;);return l}}var _s=js(Bs);function Jl(e,t,l){(l!==void 0&&!Mo(e[t],l)||l===void 0&&!(t in e))&&mr(e,t,l)}function Zl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Us(e){return gr(e,$o(e))}function qs(e,t,l,n,o,r,i){var a=Zl(e,l),s=Zl(t,l),u=i.get(s);if(u){Jl(e,l,u);return}var d=r?r(a,s,l+"",e,t,i):void 0,c=d===void 0;if(c){var h=jl(s),m=!h&&vr(s),g=!h&&!m&&pr(s);d=s,h||m||g?jl(a)?d=a:ws(a)?d=yr(a):m?(c=!1,d=Cr(s,!0)):g?(c=!1,d=br(s,!0)):d=[]:Ws(s)||Gn(s)?(d=a,Gn(a)?d=Us(a):(!mn(a)||wr(a))&&(d=Sr(s))):c=!1}c&&(i.set(s,d),o(d,s,n,r,i),i.delete(s)),Jl(e,l,d)}function Zo(e,t,l,n,o){e!==t&&Jo(t,function(r,i){if(o||(o=new Rr),mn(r))qs(e,t,i,l,Zo,n,o);else{var a=n?n(Zl(e,i),r,i+"",e,t,o):void 0;a===void 0&&(a=r),Jl(e,i,a)}},$o)}function Gs(e,t){var l=-1,n=gn(e)?Array(e.length):[];return _s(e,function(o,r,i){n[++l]=t(o,r,i)}),n}function Ys(e,t){var l=jl(e)?kr:Gs;return l(e,xr(t))}function Xs(e,t){return Tr(Ys(e,t),1)}var Js=Ds(function(e,t,l){Zo(e,t,l)}),so=!1,It,Ql,en,pl,yl,Qo,Cl,tn,ln,nn,ea,on,an,ta,la;function st(){if(!so){so=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),l=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(on=/\b(iPhone|iP[ao]d)/.exec(e),an=/\b(iP[ao]d)/.exec(e),nn=/Android/i.exec(e),ta=/FBAN\/\w+;/i.exec(e),la=/Mobile/i.exec(e),ea=!!/Win64/.exec(e),t){It=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,It&&document&&document.documentMode&&(It=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);Qo=n?parseFloat(n[1])+4:It,Ql=t[2]?parseFloat(t[2]):NaN,en=t[3]?parseFloat(t[3]):NaN,pl=t[4]?parseFloat(t[4]):NaN,pl?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),yl=t&&t[1]?parseFloat(t[1]):NaN):yl=NaN}else It=Ql=en=yl=pl=NaN;if(l){if(l[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Cl=o?parseFloat(o[1].replace("_",".")):!0}else Cl=!1;tn=!!l[2],ln=!!l[3]}else Cl=tn=ln=!1}}var rn={ie:function(){return st()||It},ieCompatibilityMode:function(){return st()||Qo>It},ie64:function(){return rn.ie()&&ea},firefox:function(){return st()||Ql},opera:function(){return st()||en},webkit:function(){return st()||pl},safari:function(){return rn.webkit()},chrome:function(){return st()||yl},windows:function(){return st()||tn},osx:function(){return st()||Cl},linux:function(){return st()||ln},iphone:function(){return st()||on},mobile:function(){return st()||on||an||nn||la},nativeApp:function(){return st()||ta},android:function(){return st()||nn},ipad:function(){return st()||an}},Zs=rn,fl=!!(typeof window<"u"&&window.document&&window.document.createElement),Qs={canUseDOM:fl,canUseWorkers:typeof Worker<"u",canUseEventListeners:fl&&!!(window.addEventListener||window.attachEvent),canUseViewport:fl&&!!window.screen,isInWorker:!fl},na=Qs,oa;na.canUseDOM&&(oa=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ei(e,t){if(!na.canUseDOM||t&&!("addEventListener"in document))return!1;var l="on"+e,n=l in document;if(!n){var o=document.createElement("div");o.setAttribute(l,"return;"),n=typeof o[l]=="function"}return!n&&oa&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var ti=ei,io=10,uo=40,co=800;function aa(e){var t=0,l=0,n=0,o=0;return"detail"in e&&(l=e.detail),"wheelDelta"in e&&(l=-e.wheelDelta/120),"wheelDeltaY"in e&&(l=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=l,l=0),n=t*io,o=l*io,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||o)&&e.deltaMode&&(e.deltaMode==1?(n*=uo,o*=uo):(n*=co,o*=co)),n&&!t&&(t=n<1?-1:1),o&&!l&&(l=o<1?-1:1),{spinX:t,spinY:l,pixelX:n,pixelY:o}}aa.getEventType=function(){return Zs.firefox()?"DOMMouseScroll":ti("wheel")?"wheel":"mousewheel"};var li=aa;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const ni=function(e,t){if(e&&e.addEventListener){const l=function(n){const o=li(n);t&&Reflect.apply(t,this,[n,o])};e.addEventListener("wheel",l,{passive:!0})}},oi={beforeMount(e,t){ni(e,t.value)}},ai=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:l,atYStartEdge:n},o)=>{let r=null,i=0,a=0;const s=(d,c)=>{const h=d<=0&&t.value||d>=0&&e.value,m=c<=0&&n.value||c>=0&&l.value;return h&&m};return{hasReachedEdge:s,onWheel:d=>{Ss(r);let c=d.deltaX,h=d.deltaY;Math.abs(c)>Math.abs(h)?h=0:c=0,d.shiftKey&&h!==0&&(c=h,h=0),!(s(i,a)&&s(i+c,a+h))&&(i+=c,a+=h,d.preventDefault(),r=Go(()=>{o(i,a),i=0,a=0}))}}},ra=({name:e,clearCache:t,getColumnPosition:l,getColumnStartIndexForOffset:n,getColumnStopIndexForStartIndex:o,getEstimatedTotalHeight:r,getEstimatedTotalWidth:i,getColumnOffset:a,getRowOffset:s,getRowPosition:u,getRowStartIndexForOffset:d,getRowStopIndexForStartIndex:c,initCache:h,injectToInstance:m,validateProps:g})=>Fe({name:e!=null?e:"ElVirtualList",props:Pt,emits:[Qn,eo],setup(f,{emit:p,expose:b,slots:w}){const y=lt("vl");g(f);const v=Je(),C=O(h(f,v));m==null||m(v,C);const x=O(),I=O(),$=O(),S=O(null),R=O({isScrolling:!1,scrollLeft:it(f.initScrollLeft)?f.initScrollLeft:0,scrollTop:it(f.initScrollTop)?f.initScrollTop:0,updateRequested:!1,xAxisScrollDir:dl,yAxisScrollDir:dl}),T=Rs(),D=F(()=>Number.parseInt(`${f.height}`,10)),P=F(()=>Number.parseInt(`${f.width}`,10)),V=F(()=>{const{totalColumn:Z,totalRow:X,columnCache:re}=f,{isScrolling:ve,xAxisScrollDir:pe,scrollLeft:M}=E(R);if(Z===0||X===0)return[0,0,0,0];const _=n(f,M,E(C)),ee=o(f,_,M,E(C)),be=!ve||pe===to?Math.max(1,re):1,$e=!ve||pe===dl?Math.max(1,re):1;return[Math.max(0,_-be),Math.max(0,Math.min(Z-1,ee+$e)),_,ee]}),j=F(()=>{const{totalColumn:Z,totalRow:X,rowCache:re}=f,{isScrolling:ve,yAxisScrollDir:pe,scrollTop:M}=E(R);if(Z===0||X===0)return[0,0,0,0];const _=d(f,M,E(C)),ee=c(f,_,M,E(C)),be=!ve||pe===to?Math.max(1,re):1,$e=!ve||pe===dl?Math.max(1,re):1;return[Math.max(0,_-be),Math.max(0,Math.min(X-1,ee+$e)),_,ee]}),B=F(()=>r(f,E(C))),le=F(()=>i(f,E(C))),ie=F(()=>{var Z;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:f.direction,height:it(f.height)?`${f.height}px`:f.height,width:it(f.width)?`${f.width}px`:f.width},(Z=f.style)!=null?Z:{}]}),L=F(()=>{const Z=`${E(le)}px`;return{height:`${E(B)}px`,pointerEvents:E(R).isScrolling?"none":void 0,width:Z}}),q=()=>{const{totalColumn:Z,totalRow:X}=f;if(Z>0&&X>0){const[ee,be,$e,je]=E(V),[Ie,Me,nt,pt]=E(j);p(Qn,{columnCacheStart:ee,columnCacheEnd:be,rowCacheStart:Ie,rowCacheEnd:Me,columnVisibleStart:$e,columnVisibleEnd:je,rowVisibleStart:nt,rowVisibleEnd:pt})}const{scrollLeft:re,scrollTop:ve,updateRequested:pe,xAxisScrollDir:M,yAxisScrollDir:_}=E(R);p(eo,{xAxisScrollDir:M,scrollLeft:re,yAxisScrollDir:_,scrollTop:ve,updateRequested:pe})},ne=Z=>{const{clientHeight:X,clientWidth:re,scrollHeight:ve,scrollLeft:pe,scrollTop:M,scrollWidth:_}=Z.currentTarget,ee=E(R);if(ee.scrollTop===M&&ee.scrollLeft===pe)return;let be=pe;if(oo(f.direction))switch(lo()){case no:be=-pe;break;case Ts:be=_-re-pe;break}R.value={...ee,isScrolling:!0,scrollLeft:be,scrollTop:Math.max(0,Math.min(M,ve-X)),updateRequested:!0,xAxisScrollDir:cl(ee.scrollLeft,be),yAxisScrollDir:cl(ee.scrollTop,M)},tt(()=>de()),Se(),q()},ce=(Z,X)=>{const re=E(D),ve=(B.value-re)/X*Z;Q({scrollTop:Math.min(B.value-re,ve)})},k=(Z,X)=>{const re=E(P),ve=(le.value-re)/X*Z;Q({scrollLeft:Math.min(le.value-re,ve)})},{onWheel:z}=ai({atXStartEdge:F(()=>R.value.scrollLeft<=0),atXEndEdge:F(()=>R.value.scrollLeft>=le.value-E(P)),atYStartEdge:F(()=>R.value.scrollTop<=0),atYEndEdge:F(()=>R.value.scrollTop>=B.value-E(D))},(Z,X)=>{var re,ve,pe,M;(ve=(re=I.value)==null?void 0:re.onMouseUp)==null||ve.call(re),(M=(pe=$.value)==null?void 0:pe.onMouseUp)==null||M.call(pe);const _=E(P),ee=E(D);Q({scrollLeft:Math.min(R.value.scrollLeft+Z,le.value-_),scrollTop:Math.min(R.value.scrollTop+X,B.value-ee)})});_l(x,"wheel",z,{passive:!1});const Q=({scrollLeft:Z=R.value.scrollLeft,scrollTop:X=R.value.scrollTop})=>{Z=Math.max(Z,0),X=Math.max(X,0);const re=E(R);X===re.scrollTop&&Z===re.scrollLeft||(R.value={...re,xAxisScrollDir:cl(re.scrollLeft,Z),yAxisScrollDir:cl(re.scrollTop,X),scrollLeft:Z,scrollTop:X,updateRequested:!0},tt(()=>de()),Se(),q())},ue=(Z=0,X=0,re=$t)=>{const ve=E(R);X=Math.max(0,Math.min(X,f.totalColumn-1)),Z=Math.max(0,Math.min(Z,f.totalRow-1));const pe=Er(y.namespace.value),M=E(C),_=r(f,M),ee=i(f,M);Q({scrollLeft:a(f,X,re,ve.scrollLeft,M,ee>f.width?pe:0),scrollTop:s(f,Z,re,ve.scrollTop,M,_>f.height?pe:0)})},Ee=(Z,X)=>{const{columnWidth:re,direction:ve,rowHeight:pe}=f,M=T.value(t&&re,t&&pe,t&&ve),_=`${Z},${X}`;if(_t(M,_))return M[_];{const[,ee]=l(f,X,E(C)),be=E(C),$e=oo(ve),[je,Ie]=u(f,Z,be),[Me]=l(f,X,be);return M[_]={position:"absolute",left:$e?void 0:`${ee}px`,right:$e?`${ee}px`:void 0,top:`${Ie}px`,height:`${je}px`,width:`${Me}px`},M[_]}},de=()=>{R.value.isScrolling=!1,tt(()=>{T.value(-1,null,null)})};wt(()=>{if(!jt)return;const{initScrollLeft:Z,initScrollTop:X}=f,re=E(x);re&&(it(Z)&&(re.scrollLeft=Z),it(X)&&(re.scrollTop=X)),q()});const Se=()=>{const{direction:Z}=f,{scrollLeft:X,scrollTop:re,updateRequested:ve}=E(R),pe=E(x);if(ve&&pe){if(Z===xs)switch(lo()){case no:{pe.scrollLeft=-X;break}case ks:{pe.scrollLeft=X;break}default:{const{clientWidth:M,scrollWidth:_}=pe;pe.scrollLeft=_-M-X;break}}else pe.scrollLeft=Math.max(0,X);pe.scrollTop=Math.max(0,re)}},{resetAfterColumnIndex:Pe,resetAfterRowIndex:qe,resetAfter:Be}=v.proxy;b({windowRef:x,innerRef:S,getItemStyleCache:T,scrollTo:Q,scrollToItem:ue,states:R,resetAfterColumnIndex:Pe,resetAfterRowIndex:qe,resetAfter:Be});const ze=()=>{const{scrollbarAlwaysOn:Z,scrollbarStartGap:X,scrollbarEndGap:re,totalColumn:ve,totalRow:pe}=f,M=E(P),_=E(D),ee=E(le),be=E(B),{scrollLeft:$e,scrollTop:je}=E(R),Ie=he(ao,{ref:I,alwaysOn:Z,startGap:X,endGap:re,class:y.e("horizontal"),clientSize:M,layout:"horizontal",onScroll:k,ratio:M*100/ee,scrollFrom:$e/(ee-M),total:pe,visible:!0}),Me=he(ao,{ref:$,alwaysOn:Z,startGap:X,endGap:re,class:y.e("vertical"),clientSize:_,layout:"vertical",onScroll:ce,ratio:_*100/be,scrollFrom:je/(be-_),total:ve,visible:!0});return{horizontalScrollbar:Ie,verticalScrollbar:Me}},We=()=>{var Z;const[X,re]=E(V),[ve,pe]=E(j),{data:M,totalColumn:_,totalRow:ee,useIsScrolling:be,itemKey:$e}=f,je=[];if(ee>0&&_>0)for(let Ie=ve;Ie<=pe;Ie++)for(let Me=X;Me<=re;Me++){const nt=$e({columnIndex:Me,data:M,rowIndex:Ie});je.push(he(Ne,{key:nt},(Z=w.default)==null?void 0:Z.call(w,{columnIndex:Me,data:M,isScrolling:be?E(R).isScrolling:void 0,style:Ee(Ie,Me),rowIndex:Ie})))}return je},De=()=>{const Z=Yn(f.innerElement),X=We();return[he(Z,{style:E(L),ref:S},Ul(Z)?X:{default:()=>X})]};return()=>{const Z=Yn(f.containerElement),{horizontalScrollbar:X,verticalScrollbar:re}=ze(),ve=De();return he("div",{key:0,class:y.e("wrapper"),role:f.role},[he(Z,{class:f.className,style:E(ie),onScroll:ne,ref:x},Ul(Z)?ve:{default:()=>ve}),X,re])}}}),ri=ra({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:l},n,o,r,i,a)=>{l=Number(l);const s=Math.max(0,e*t-l),u=Math.min(s,n*t),d=Math.max(0,n*t-l+a+t);switch(o==="smart"&&(r>=d-l&&r<=u+l?o=$t:o=Vt),o){case Xl:return u;case Yl:return d;case Vt:{const c=Math.round(d+(u-d)/2);return c<Math.ceil(l/2)?0:c>s+Math.floor(l/2)?s:c}case $t:default:return r>=d&&r<=u?r:d>u||r<d?d:u}},getRowOffset:({rowHeight:e,height:t,totalRow:l},n,o,r,i,a)=>{t=Number(t);const s=Math.max(0,l*e-t),u=Math.min(s,n*e),d=Math.max(0,n*e-t+a+e);switch(o===Yo&&(r>=d-t&&r<=u+t?o=$t:o=Vt),o){case Xl:return u;case Yl:return d;case Vt:{const c=Math.round(d+(u-d)/2);return c<Math.ceil(t/2)?0:c>s+Math.floor(t/2)?s:c}case $t:default:return r>=d&&r<=u?r:d>u||r<d?d:u}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:l},n,o)=>{const r=n*e,i=Math.ceil((l+o-r)/e);return Math.max(0,Math.min(t-1,n+i-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:l},n,o)=>{const r=n*e,i=Math.ceil((l+o-r)/e);return Math.max(0,Math.min(t-1,n+i-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),{max:Tl,min:sa,floor:ia}=Math,si={column:"columnWidth",row:"rowHeight"},sn={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},kt=(e,t,l,n)=>{const[o,r,i]=[l[n],e[si[n]],l[sn[n]]];if(t>i){let a=0;if(i>=0){const s=o[i];a=s.offset+s.size}for(let s=i+1;s<=t;s++){const u=r(s);o[s]={offset:a,size:u},a+=u}l[sn[n]]=t}return o[t]},ua=(e,t,l,n,o,r)=>{for(;l<=n;){const i=l+ia((n-l)/2),a=kt(e,i,t,r).offset;if(a===o)return i;a<o?l=i+1:n=i-1}return Tl(0,l-1)},ii=(e,t,l,n,o)=>{const r=o==="column"?e.totalColumn:e.totalRow;let i=1;for(;l<r&&kt(e,l,t,o).offset<n;)l+=i,i*=2;return ua(e,t,ia(l/2),sa(l,r-1),n,o)},fo=(e,t,l,n)=>{const[o,r]=[t[n],t[sn[n]]];return(r>0?o[r].offset:0)>=l?ua(e,t,0,r,l,n):ii(e,t,Tl(0,r),l,n)},da=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:l,row:n})=>{let o=0;if(l>=e&&(l=e-1),l>=0){const a=n[l];o=a.offset+a.size}const i=(e-l-1)*t;return o+i},ca=({totalColumn:e},{column:t,estimatedColumnWidth:l,lastVisitedColumnIndex:n})=>{let o=0;if(n>e&&(n=e-1),n>=0){const a=t[n];o=a.offset+a.size}const i=(e-n-1)*l;return o+i},ui={column:ca,row:da},ho=(e,t,l,n,o,r,i)=>{const[a,s]=[r==="row"?e.height:e.width,ui[r]],u=kt(e,t,o,r),d=s(e,o),c=Tl(0,sa(d-a,u.offset)),h=Tl(0,u.offset-a+i+u.size);switch(l===Yo&&(n>=h-a&&n<=c+a?l=$t:l=Vt),l){case Xl:return c;case Yl:return h;case Vt:return Math.round(h+(c-h)/2);case $t:default:return n>=h&&n<=c?n:h>c||n<h?h:c}},di=ra({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,l)=>{const n=kt(e,t,l,"column");return[n.size,n.offset]},getRowPosition:(e,t,l)=>{const n=kt(e,t,l,"row");return[n.size,n.offset]},getColumnOffset:(e,t,l,n,o,r)=>ho(e,t,l,n,o,"column",r),getRowOffset:(e,t,l,n,o,r)=>ho(e,t,l,n,o,"row",r),getColumnStartIndexForOffset:(e,t,l)=>fo(e,l,t,"column"),getColumnStopIndexForStartIndex:(e,t,l,n)=>{const o=kt(e,t,n,"column"),r=l+e.width;let i=o.offset+o.size,a=t;for(;a<e.totalColumn-1&&i<r;)a++,i+=kt(e,t,n,"column").size;return a},getEstimatedTotalHeight:da,getEstimatedTotalWidth:ca,getRowStartIndexForOffset:(e,t,l)=>fo(e,l,t,"row"),getRowStopIndexForStartIndex:(e,t,l,n)=>{const{totalRow:o,height:r}=e,i=kt(e,t,n,"row"),a=l+r;let s=i.size+i.offset,u=t;for(;u<o-1&&s<a;)u++,s+=kt(e,u,n,"row").size;return u},injectToInstance:(e,t)=>{const l=({columnIndex:r,rowIndex:i},a)=>{var s,u;a=vn(a)?!0:a,it(r)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,r-1)),it(i)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,i-1)),(s=e.exposed)==null||s.getItemStyleCache.value(-1,null,null),a&&((u=e.proxy)==null||u.$forceUpdate())},n=(r,i)=>{l({columnIndex:r},i)},o=(r,i)=>{l({rowIndex:r},i)};Object.assign(e.proxy,{resetAfterColumnIndex:n,resetAfterRowIndex:o,resetAfter:l})},initCache:({estimatedColumnWidth:e=ro,estimatedRowHeight:t=ro})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Pl=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},ci=function(e,t,l,n,o){if(!t&&!n&&(!o||Array.isArray(o)&&!o.length))return e;typeof l=="string"?l=l==="descending"?-1:1:l=l&&l<0?-1:1;const r=n?null:function(a,s){return o?(Array.isArray(o)||(o=[o]),o.map(u=>typeof u=="string"?ql(a,u):u(a,s,e))):(t!=="$key"&&nl(a)&&"$value"in a&&(a=a.$value),[nl(a)?ql(a,t):a])},i=function(a,s){if(n)return n(a.value,s.value);for(let u=0,d=a.key.length;u<d;u++){if(a.key[u]<s.key[u])return-1;if(a.key[u]>s.key[u])return 1}return 0};return e.map((a,s)=>({value:a,index:s,key:r?r(a,s):null})).sort((a,s)=>{let u=i(a,s);return u||(u=a.index-s.index),u*+l}).map(a=>a.value)},fa=function(e,t){let l=null;return e.columns.forEach(n=>{n.id===t&&(l=n)}),l},fi=function(e,t){let l=null;for(let n=0;n<e.columns.length;n++){const o=e.columns[n];if(o.columnKey===t){l=o;break}}return l||Or("ElTable",`No column matching with column-key: ${t}`),l},mo=function(e,t,l){const n=(t.className||"").match(new RegExp(`${l}-table_[^\\s]+`,"gm"));return n?fa(e,n[0]):null},et=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(!t.includes("."))return`${e[t]}`;const l=t.split(".");let n=e;for(const o of l)n=n[o];return`${n}`}else if(typeof t=="function")return t.call(null,e)},Nt=function(e,t){const l={};return(e||[]).forEach((n,o)=>{l[et(n,t)]={row:n,index:o}}),l};function hi(e,t){const l={};let n;for(n in e)l[n]=e[n];for(n in t)if(_t(t,n)){const o=t[n];typeof o<"u"&&(l[n]=o)}return l}function On(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function ha(e){return e===""||e!==void 0&&(e=On(e),Number.isNaN(e)&&(e=80)),e}function mi(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function gi(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,l)=>(...n)=>t(l(...n)))}function El(e,t,l,n,o,r){let i=r!=null?r:0,a=!1;const s=e.indexOf(t),u=s!==-1,d=o==null?void 0:o.call(null,t,r),c=m=>{m==="add"?e.push(t):e.splice(s,1),a=!0},h=m=>{let g=0;const f=(n==null?void 0:n.children)&&m[n.children];return f&&Lt(f)&&(g+=f.length,f.forEach(p=>{g+=h(p)})),g};return(!o||d)&&(Hr(l)?l&&!u?c("add"):!l&&u&&c("remove"):c(u?"remove":"add")),!(n!=null&&n.checkStrictly)&&(n!=null&&n.children)&&Lt(t[n.children])&&t[n.children].forEach(m=>{El(e,m,l!=null?l:!u,n,o,i+1),i+=h(m)+1}),a}function vi(e,t,l="children",n="hasChildren"){const o=i=>!(Array.isArray(i)&&i.length);function r(i,a,s){t(i,a,s),a.forEach(u=>{if(u[n]){t(u,null,s+1);return}const d=u[l];o(d)||r(u,d,s+1)})}e.forEach(i=>{if(i[n]){t(i,null,0);return}const a=i[l];o(a)||r(i,a,0)})}let ft=null;function pi(e,t,l,n){if((ft==null?void 0:ft.trigger)===l)return;ft==null||ft();const o=n==null?void 0:n.refs.tableWrapper,r=o==null?void 0:o.dataset.prefix,i={strategy:"fixed",...e.popperOptions},a=N(No,{content:t,virtualTriggering:!0,virtualRef:l,appendTo:o,placement:"top",transition:"none",offset:0,hideAfter:0,...e,popperOptions:i,onHide:()=>{ft==null||ft()}});a.appContext={...n.appContext,...n};const s=document.createElement("div");Xn(a,s),a.component.exposed.onOpen();const u=o==null?void 0:o.querySelector(`.${r}-scrollbar__wrap`);ft=()=>{Xn(null,s),u==null||u.removeEventListener("scroll",ft),ft=null},ft.trigger=l,u==null||u.addEventListener("scroll",ft)}function ma(e){return e.children?Xs(e.children,ma):[e]}function go(e,t){return e+t.colSpan}const ga=(e,t,l,n)=>{let o=0,r=e;const i=l.states.columns.value;if(n){const s=ma(n[e]);o=i.slice(0,i.indexOf(s[0])).reduce(go,0),r=o+s.reduce(go,0)-1}else o=e;let a;switch(t){case"left":r<l.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=i.length-l.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:r<l.states.fixedLeafColumnsLength.value?a="left":o>=i.length-l.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:r}:{}},Hn=(e,t,l,n,o,r=0)=>{const i=[],{direction:a,start:s,after:u}=ga(t,l,n,o);if(a){const d=a==="left";i.push(`${e}-fixed-column--${a}`),d&&u+r===n.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):!d&&s-r===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&i.push("is-first-column")}return i};function vo(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const Fn=(e,t,l,n)=>{const{direction:o,start:r=0,after:i=0}=ga(e,t,l,n);if(!o)return;const a={},s=o==="left",u=l.states.columns.value;return s?a.left=u.slice(0,r).reduce(vo,0):a.right=u.slice(i+1).reverse().reduce(vo,0),a},qt=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function yi(e){const t=Je(),l=O(!1),n=O([]);return{updateExpandRows:()=>{const s=e.data.value||[],u=e.rowKey.value;if(l.value)n.value=s.slice();else if(u){const d=Nt(n.value,u);n.value=s.reduce((c,h)=>{const m=et(h,u);return d[m]&&c.push(h),c},[])}else n.value=[]},toggleRowExpansion:(s,u)=>{El(n.value,s,u)&&t.emit("expand-change",s,n.value.slice())},setExpandRowKeys:s=>{t.store.assertRowKey();const u=e.data.value||[],d=e.rowKey.value,c=Nt(u,d);n.value=s.reduce((h,m)=>{const g=c[m];return g&&h.push(g.row),h},[])},isRowExpanded:s=>{const u=e.rowKey.value;return u?!!Nt(n.value,u)[et(s,u)]:n.value.includes(s)},states:{expandRows:n,defaultExpandAll:l}}}function Ci(e){const t=Je(),l=O(null),n=O(null),o=u=>{t.store.assertRowKey(),l.value=u,i(u)},r=()=>{l.value=null},i=u=>{const{data:d,rowKey:c}=e;let h=null;c.value&&(h=(E(d)||[]).find(m=>et(m,c.value)===u)),n.value=h,t.emit("current-change",n.value,null)};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:i,updateCurrentRow:u=>{const d=n.value;if(u&&u!==d){n.value=u,t.emit("current-change",n.value,d);return}!u&&d&&(n.value=null,t.emit("current-change",null,d))},updateCurrentRowData:()=>{const u=e.rowKey.value,d=e.data.value||[],c=n.value;if(!d.includes(c)&&c){if(u){const h=et(c,u);i(h)}else n.value=null;n.value===null&&t.emit("current-change",null,c)}else l.value&&(i(l.value),r())},states:{_currentRowKey:l,currentRow:n}}}function bi(e){const t=O([]),l=O({}),n=O(16),o=O(!1),r=O({}),i=O("hasChildren"),a=O("children"),s=O(!1),u=Je(),d=F(()=>{if(!e.rowKey.value)return{};const y=e.data.value||[];return h(y)}),c=F(()=>{const y=e.rowKey.value,v=Object.keys(r.value),C={};return v.length&&v.forEach(x=>{if(r.value[x].length){const I={children:[]};r.value[x].forEach($=>{const S=et($,y);I.children.push(S),$[i.value]&&!C[S]&&(C[S]={children:[]})}),C[x]=I}}),C}),h=y=>{const v=e.rowKey.value,C={};return vi(y,(x,I,$)=>{const S=et(x,v);Array.isArray(I)?C[S]={children:I.map(R=>et(R,v)),level:$}:o.value&&(C[S]={children:[],lazy:!0,level:$})},a.value,i.value),C},m=(y=!1,v=(C=>(C=u.store)==null?void 0:C.states.defaultExpandAll.value)())=>{var C;const x=d.value,I=c.value,$=Object.keys(x),S={};if($.length){const R=E(l),T=[],D=(V,j)=>{if(y)return t.value?v||t.value.includes(j):!!(v||V!=null&&V.expanded);{const B=v||t.value&&t.value.includes(j);return!!(V!=null&&V.expanded||B)}};$.forEach(V=>{const j=R[V],B={...x[V]};if(B.expanded=D(j,V),B.lazy){const{loaded:le=!1,loading:ie=!1}=j||{};B.loaded=!!le,B.loading=!!ie,T.push(V)}S[V]=B});const P=Object.keys(I);o.value&&P.length&&T.length&&P.forEach(V=>{const j=R[V],B=I[V].children;if(T.includes(V)){if(S[V].children.length!==0)throw new Error("[ElTable]children must be an empty array.");S[V].children=B}else{const{loaded:le=!1,loading:ie=!1}=j||{};S[V]={lazy:!0,loaded:!!le,loading:!!ie,expanded:D(j,V),children:B,level:""}}})}l.value=S,(C=u.store)==null||C.updateTableScrollY()};ye(()=>t.value,()=>{m(!0)}),ye(()=>d.value,()=>{m()}),ye(()=>c.value,()=>{m()});const g=y=>{t.value=y,m()},f=(y,v)=>{u.store.assertRowKey();const C=e.rowKey.value,x=et(y,C),I=x&&l.value[x];if(x&&I&&"expanded"in I){const $=I.expanded;v=typeof v>"u"?!I.expanded:v,l.value[x].expanded=v,$!==v&&u.emit("expand-change",y,v),u.store.updateTableScrollY()}},p=y=>{u.store.assertRowKey();const v=e.rowKey.value,C=et(y,v),x=l.value[C];o.value&&x&&"loaded"in x&&!x.loaded?b(y,C,x):f(y,void 0)},b=(y,v,C)=>{const{load:x}=u.props;x&&!l.value[v].loaded&&(l.value[v].loading=!0,x(y,C,I=>{if(!Array.isArray(I))throw new TypeError("[ElTable] data must be an array");l.value[v].loading=!1,l.value[v].loaded=!0,l.value[v].expanded=!0,I.length&&(r.value[v]=I),u.emit("expand-change",y,!0)}))};return{loadData:b,loadOrToggle:p,toggleTreeExpansion:f,updateTreeExpandKeys:g,updateTreeData:m,updateKeyChildren:(y,v)=>{const{lazy:C,rowKey:x}=u.props;if(C){if(!x)throw new Error("[Table] rowKey is required in updateKeyChild");r.value[y]&&(r.value[y]=v)}},normalize:h,states:{expandRowKeys:t,treeData:l,indent:n,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:i,childrenColumnName:a,checkStrictly:s}}}const wi=(e,t)=>{const l=t.sortingColumn;return!l||typeof l.sortable=="string"?e:ci(e,t.sortProp,t.sortOrder,l.sortMethod,l.sortBy)},bl=e=>{const t=[];return e.forEach(l=>{l.children&&l.children.length>0?t.push.apply(t,bl(l.children)):t.push(l)}),t};function Si(){var e;const t=Je(),{size:l}=Fr((e=t.proxy)==null?void 0:e.$props),n=O(null),o=O([]),r=O([]),i=O(!1),a=O([]),s=O([]),u=O([]),d=O([]),c=O([]),h=O([]),m=O([]),g=O([]),f=[],p=O(0),b=O(0),w=O(0),y=O(!1),v=O([]),C=O(!1),x=O(!1),I=O(null),$=O({}),S=O(null),R=O(null),T=O(null),D=O(null),P=O(null);ye(o,()=>t.state&&ie(!1),{deep:!0});const V=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},j=J=>{var oe;(oe=J.children)==null||oe.forEach(me=>{me.fixed=J.fixed,j(me)})};let B;const le=()=>{a.value.forEach(ke=>{j(ke)}),d.value=a.value.filter(ke=>ke.fixed===!0||ke.fixed==="left"),c.value=a.value.filter(ke=>ke.fixed==="right"),vn(B)&&a.value[0]&&a.value[0].type==="selection"&&(B=!!a.value[0].fixed),d.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&(a.value[0].fixed?d.value.some(Te=>Te.type!=="selection")?B=void 0:(a.value[0].fixed=B,B||d.value.shift()):(a.value[0].fixed=!0,d.value.unshift(a.value[0])));const J=a.value.filter(ke=>!ke.fixed);s.value=[].concat(d.value).concat(J).concat(c.value);const oe=bl(J),me=bl(d.value),ge=bl(c.value);p.value=oe.length,b.value=me.length,w.value=ge.length,u.value=[].concat(me).concat(oe).concat(ge),i.value=d.value.length>0||c.value.length>0},ie=(J,oe=!1)=>{J&&le(),oe?t.state.doLayout():t.state.debouncedUpdateLayout()},L=J=>v.value.some(oe=>Ir(oe,J)),q=()=>{y.value=!1;const J=v.value;v.value=[],J.length&&t.emit("selection-change",[])},ne=()=>{let J;if(n.value){J=[];const oe=Nt(v.value,n.value),me=Nt(o.value,n.value);for(const ge in oe)_t(oe,ge)&&!me[ge]&&J.push(oe[ge].row)}else J=v.value.filter(oe=>!o.value.includes(oe));if(J.length){const oe=v.value.filter(me=>!J.includes(me));v.value=oe,t.emit("selection-change",oe.slice())}},ce=()=>(v.value||[]).slice(),k=(J,oe,me=!0,ge=!1)=>{var ke,Te,Ye,_e;const rt={children:(Te=(ke=t==null?void 0:t.store)==null?void 0:ke.states)==null?void 0:Te.childrenColumnName.value,checkStrictly:(_e=(Ye=t==null?void 0:t.store)==null?void 0:Ye.states)==null?void 0:_e.checkStrictly.value};if(El(v.value,J,oe,rt,ge?void 0:I.value)){const ot=(v.value||[]).slice();me&&t.emit("select",ot,J),t.emit("selection-change",ot)}},z=()=>{var J,oe;const me=x.value?!y.value:!(y.value||v.value.length);y.value=me;let ge=!1,ke=0;const Te=(oe=(J=t==null?void 0:t.store)==null?void 0:J.states)==null?void 0:oe.rowKey.value,{childrenColumnName:Ye}=t.store.states,_e={children:Ye.value,checkStrictly:!1};o.value.forEach((rt,yt)=>{const ot=yt+ke;El(v.value,rt,me,_e,I.value,ot)&&(ge=!0),ke+=Ee(et(rt,Te))}),ge&&t.emit("selection-change",v.value?v.value.slice():[]),t.emit("select-all",(v.value||[]).slice())},Q=()=>{const J=Nt(v.value,n.value);o.value.forEach(oe=>{const me=et(oe,n.value),ge=J[me];ge&&(v.value[ge.index]=oe)})},ue=()=>{var J;if(((J=o.value)==null?void 0:J.length)===0){y.value=!1;return}const{childrenColumnName:oe}=t.store.states,me=n.value?Nt(v.value,n.value):void 0;let ge=0,ke=0;const Te=rt=>me?!!me[et(rt,n.value)]:v.value.includes(rt),Ye=rt=>{var yt;for(const ot of rt){const at=I.value&&I.value.call(null,ot,ge);if(Te(ot))ke++;else if(!I.value||at)return!1;if(ge++,(yt=ot[oe.value])!=null&&yt.length&&!Ye(ot[oe.value]))return!1}return!0},_e=Ye(o.value||[]);y.value=ke===0?!1:_e},Ee=J=>{var oe;if(!t||!t.store)return 0;const{treeData:me}=t.store.states;let ge=0;const ke=(oe=me.value[J])==null?void 0:oe.children;return ke&&(ge+=ke.length,ke.forEach(Te=>{ge+=Ee(Te)})),ge},de=(J,oe)=>{Array.isArray(J)||(J=[J]);const me={};return J.forEach(ge=>{$.value[ge.id]=oe,me[ge.columnKey||ge.id]=oe}),me},Se=(J,oe,me)=>{R.value&&R.value!==J&&(R.value.order=null),R.value=J,T.value=oe,D.value=me},Pe=()=>{let J=E(r);Object.keys($.value).forEach(oe=>{const me=$.value[oe];if(!me||me.length===0)return;const ge=fa({columns:u.value},oe);ge&&ge.filterMethod&&(J=J.filter(ke=>me.some(Te=>ge.filterMethod.call(null,Te,ke,ge))))}),S.value=J},qe=()=>{o.value=wi(S.value,{sortingColumn:R.value,sortProp:T.value,sortOrder:D.value})},Be=(J=void 0)=>{J&&J.filter||Pe(),qe()},ze=J=>{const{tableHeaderRef:oe}=t.refs;if(!oe)return;const me=Object.assign({},oe.filterPanels),ge=Object.keys(me);if(ge.length)if(typeof J=="string"&&(J=[J]),Array.isArray(J)){const ke=J.map(Te=>fi({columns:u.value},Te));ge.forEach(Te=>{const Ye=ke.find(_e=>_e.id===Te);Ye&&(Ye.filteredValue=[])}),t.store.commit("filterChange",{column:ke,values:[],silent:!0,multi:!0})}else ge.forEach(ke=>{const Te=u.value.find(Ye=>Ye.id===ke);Te&&(Te.filteredValue=[])}),$.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},We=()=>{R.value&&(Se(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:De,toggleRowExpansion:Ge,updateExpandRows:Z,states:X,isRowExpanded:re}=yi({data:o,rowKey:n}),{updateTreeExpandKeys:ve,toggleTreeExpansion:pe,updateTreeData:M,updateKeyChildren:_,loadOrToggle:ee,states:be}=bi({data:o,rowKey:n}),{updateCurrentRowData:$e,updateCurrentRow:je,setCurrentRowKey:Ie,states:Me}=Ci({data:o,rowKey:n});return{assertRowKey:V,updateColumns:le,scheduleLayout:ie,isSelected:L,clearSelection:q,cleanSelection:ne,getSelectionRows:ce,toggleRowSelection:k,_toggleAllSelection:z,toggleAllSelection:null,updateSelectionByRowKey:Q,updateAllSelected:ue,updateFilters:de,updateCurrentRow:je,updateSort:Se,execFilter:Pe,execSort:qe,execQuery:Be,clearFilter:ze,clearSort:We,toggleRowExpansion:Ge,setExpandRowKeysAdapter:J=>{De(J),ve(J)},setCurrentRowKey:Ie,toggleRowExpansionAdapter:(J,oe)=>{u.value.some(({type:ge})=>ge==="expand")?Ge(J,oe):pe(J,oe)},isRowExpanded:re,updateExpandRows:Z,updateCurrentRowData:$e,loadOrToggle:ee,updateTreeData:M,updateKeyChildren:_,states:{tableSize:l,rowKey:n,data:o,_data:r,isComplex:i,_columns:a,originColumns:s,columns:u,fixedColumns:d,rightFixedColumns:c,leafColumns:h,fixedLeafColumns:m,rightFixedLeafColumns:g,updateOrderFns:f,leafColumnsLength:p,fixedLeafColumnsLength:b,rightFixedLeafColumnsLength:w,isAllSelected:y,selection:v,reserveSelection:C,selectOnIndeterminate:x,selectable:I,filters:$,filteredData:S,sortingColumn:R,sortProp:T,sortOrder:D,hoverRow:P,...X,...be,...Me}}}function un(e,t){return e.map(l=>{var n;return l.id===t.id?t:((n=l.children)!=null&&n.length&&(l.children=un(l.children,t)),l)})}function dn(e){e.forEach(t=>{var l,n;t.no=(l=t.getColumnIndex)==null?void 0:l.call(t),(n=t.children)!=null&&n.length&&dn(t.children)}),e.sort((t,l)=>t.no-l.no)}function Ri(){const e=Je(),t=Si();return{ns:lt("table"),...t,mutations:{setData(i,a){const s=E(i._data)!==a;i.data.value=a,i._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),E(i.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):s?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(i,a,s,u){const d=E(i._columns);let c=[];s?(s&&!s.children&&(s.children=[]),s.children.push(a),c=un(d,s)):(d.push(a),c=d),dn(c),i._columns.value=c,i.updateOrderFns.push(u),a.type==="selection"&&(i.selectable.value=a.selectable,i.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(i,a){var s;((s=a.getColumnIndex)==null?void 0:s.call(a))!==a.no&&(dn(i._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(i,a,s,u){const d=E(i._columns)||[];if(s)s.children.splice(s.children.findIndex(h=>h.id===a.id),1),tt(()=>{var h;((h=s.children)==null?void 0:h.length)===0&&delete s.children}),i._columns.value=un(d,s);else{const h=d.indexOf(a);h>-1&&(d.splice(h,1),i._columns.value=d)}const c=i.updateOrderFns.indexOf(u);c>-1&&i.updateOrderFns.splice(c,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(i,a){const{prop:s,order:u,init:d}=a;if(s){const c=E(i.columns).find(h=>h.property===s);c&&(c.order=u,e.store.updateSort(c,s,u),e.store.commit("changeSortCondition",{init:d}))}},changeSortCondition(i,a){const{sortingColumn:s,sortProp:u,sortOrder:d}=i,c=E(s),h=E(u),m=E(d);m===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const g={filter:!0};e.store.execQuery(g),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:c,prop:h,order:m}),e.store.updateTableScrollY()},filterChange(i,a){const{column:s,values:u,silent:d}=a,c=e.store.updateFilters(s,u);e.store.execQuery(),d||e.emit("filter-change",c),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(i,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(i,a){i.hoverRow.value=a},setCurrentRow(i,a){e.store.updateCurrentRow(a)}},commit:function(i,...a){const s=e.store.mutations;if(s[i])s[i].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${i}`)},updateTableScrollY:function(){tt(()=>e.layout.updateScrollY.apply(e.layout))}}}const ll={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function xi(e,t){if(!e)throw new Error("Table is required.");const l=Ri();return l.toggleAllSelection=ol(l._toggleAllSelection,10),Object.keys(ll).forEach(n=>{va(pa(t,n),n,l)}),ki(l,t),l}function ki(e,t){Object.keys(ll).forEach(l=>{ye(()=>pa(t,l),n=>{va(n,l,e)})})}function va(e,t,l){let n=e,o=ll[t];typeof ll[t]=="object"&&(o=o.key,n=n||ll[t].default),l.states[o].value=n}function pa(e,t){if(t.includes(".")){const l=t.split(".");let n=e;return l.forEach(o=>{n=n[o]}),n}else return e[t]}class Ti{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=O(null),this.scrollX=O(!1),this.scrollY=O(!1),this.bodyWidth=O(null),this.fixedWidth=O(null),this.rightFixedWidth=O(null),this.gutterWidth=0;for(const l in t)_t(t,l)&&(Mr(this[l])?this[l].value=t[l]:this[l]=t[l]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const l=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(l!=null&&l.wrapRef)){let n=!0;const o=this.scrollY.value;return n=l.wrapRef.scrollHeight>l.wrapRef.clientHeight,this.scrollY.value=n,o!==n}return!1}setHeight(t,l="height"){if(!jt)return;const n=this.table.vnode.el;if(t=mi(t),this.height.value=Number(t),!n&&(t||t===0))return tt(()=>this.setHeight(t,l));typeof t=="number"?(n.style[l]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(n.style[l]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?t.push.apply(t,n.columns):t.push(n)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let l=t;for(;l.tagName!=="DIV";){if(getComputedStyle(l).display==="none")return!0;l=l.parentElement}return!1}updateColumnsWidth(){if(!jt)return;const t=this.fit,l=this.table.vnode.el.clientWidth;let n=0;const o=this.getFlattenColumns(),r=o.filter(s=>typeof s.width!="number");if(o.forEach(s=>{typeof s.width=="number"&&s.realWidth&&(s.realWidth=null)}),r.length>0&&t){if(o.forEach(s=>{n+=Number(s.width||s.minWidth||80)}),n<=l){this.scrollX.value=!1;const s=l-n;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+s;else{const u=r.reduce((h,m)=>h+Number(m.minWidth||80),0),d=s/u;let c=0;r.forEach((h,m)=>{if(m===0)return;const g=Math.floor(Number(h.minWidth||80)*d);c+=g,h.realWidth=Number(h.minWidth||80)+g}),r[0].realWidth=Number(r[0].minWidth||80)+s-c}}else this.scrollX.value=!0,r.forEach(s=>{s.realWidth=Number(s.minWidth)});this.bodyWidth.value=Math.max(n,l),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(s=>{!s.width&&!s.minWidth?s.realWidth=80:s.realWidth=Number(s.width||s.minWidth),n+=s.realWidth}),this.scrollX.value=n>l,this.bodyWidth.value=n;const i=this.store.states.fixedColumns.value;if(i.length>0){let s=0;i.forEach(u=>{s+=Number(u.realWidth||u.width)}),this.fixedWidth.value=s}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let s=0;a.forEach(u=>{s+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=s}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const l=this.observers.indexOf(t);l!==-1&&this.observers.splice(l,1)}notifyObservers(t){this.observers.forEach(n=>{var o,r;switch(t){case"columns":(o=n.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=n.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:Ei}=gt,Oi=Fe({name:"ElTableFilterPanel",components:{ElCheckbox:gt,ElCheckboxGroup:Ei,ElScrollbar:yn,ElTooltip:No,ElIcon:St,ArrowDown:$r,ArrowUp:Nr},directives:{ClickOutside:Dr},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(e){const t=Je(),{t:l}=Ml(),n=lt("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=O(!1),i=O(null),a=F(()=>e.column&&e.column.filters),s=F(()=>e.column.filterClassName?`${n.b()} ${e.column.filterClassName}`:n.b()),u=F({get:()=>{var C;return(((C=e.column)==null?void 0:C.filteredValue)||[])[0]},set:C=>{d.value&&(typeof C<"u"&&C!==null?d.value.splice(0,1,C):d.value.splice(0,1))}}),d=F({get(){return e.column?e.column.filteredValue||[]:[]},set(C){e.column&&e.upDataColumn("filteredValue",C)}}),c=F(()=>e.column?e.column.filterMultiple:!0),h=C=>C.value===u.value,m=()=>{r.value=!1},g=C=>{C.stopPropagation(),r.value=!r.value},f=()=>{r.value=!1},p=()=>{y(d.value),m()},b=()=>{d.value=[],y(d.value),m()},w=C=>{u.value=C,y(typeof C<"u"&&C!==null?d.value:[]),m()},y=C=>{e.store.commit("filterChange",{column:e.column,values:C}),e.store.updateAllSelected()};ye(r,C=>{e.column&&e.upDataColumn("filterOpened",C)},{immediate:!0});const v=F(()=>{var C,x;return(x=(C=i.value)==null?void 0:C.popperRef)==null?void 0:x.contentRef});return{tooltipVisible:r,multiple:c,filterClassName:s,filteredValue:d,filterValue:u,filters:a,handleConfirm:p,handleReset:b,handleSelect:w,isActive:h,t:l,ns:n,showFilterPanel:g,hideFilterPanel:f,popperPaneRef:v,tooltip:i}}});function Hi(e,t,l,n,o,r){const i=W("el-checkbox"),a=W("el-checkbox-group"),s=W("el-scrollbar"),u=W("arrow-up"),d=W("arrow-down"),c=W("el-icon"),h=W("el-tooltip"),m=Do("click-outside");return A(),se(h,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:"","append-to":e.appendTo},{content:G(()=>[e.multiple?(A(),Y("div",{key:0},[we("div",{class:Re(e.ns.e("content"))},[N(s,{"wrap-class":e.ns.e("wrap")},{default:G(()=>[N(a,{modelValue:e.filteredValue,"onUpdate:modelValue":g=>e.filteredValue=g,class:Re(e.ns.e("checkbox-group"))},{default:G(()=>[(A(!0),Y(Ne,null,Le(e.filters,g=>(A(),se(i,{key:g.value,value:g.value},{default:G(()=>[Ct(Ve(g.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),we("div",{class:Re(e.ns.e("bottom"))},[we("button",{class:Re({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},Ve(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),we("button",{type:"button",onClick:e.handleReset},Ve(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(A(),Y("ul",{key:1,class:Re(e.ns.e("list"))},[we("li",{class:Re([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:g=>e.handleSelect(null)},Ve(e.t("el.table.clearFilter")),11,["onClick"]),(A(!0),Y(Ne,null,Le(e.filters,g=>(A(),Y("li",{key:g.value,class:Re([e.ns.e("list-item"),e.ns.is("active",e.isActive(g))]),label:g.value,onClick:f=>e.handleSelect(g.value)},Ve(g.text),11,["label","onClick"]))),128))],2))]),default:G(()=>[gl((A(),Y("span",{class:Re([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[N(c,null,{default:G(()=>[Oe(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(A(),se(u,{key:0})):(A(),se(d,{key:1}))])]),_:3})],10,["onClick"])),[[m,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var Fi=pn(Oi,[["render",Hi],["__file","filter-panel.vue"]]);function ya(e){const t=Je();Cn(()=>{l.value.addObserver(t)}),wt(()=>{n(l.value),o(l.value)}),Ar(()=>{n(l.value),o(l.value)}),bn(()=>{l.value.removeObserver(t)});const l=F(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),n=r=>{var i;const a=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const s=r.getFlattenColumns(),u={};s.forEach(d=>{u[d.id]=d});for(let d=0,c=a.length;d<c;d++){const h=a[d],m=h.getAttribute("name"),g=u[m];g&&h.setAttribute("width",g.realWidth||g.width)}},o=r=>{var i,a;const s=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let d=0,c=s.length;d<c;d++)s[d].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let d=0,c=u.length;d<c;d++){const h=u[d];h.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",h.style.display=r.scrollY.value?"":"none"}};return{tableLayout:l.value,onColumnsChange:n,onScrollableChange:o}}const Rt=Symbol("ElTable");function Ii(e,t){const l=Je(),n=vt(Rt),o=f=>{f.stopPropagation()},r=(f,p)=>{!p.filters&&p.sortable?g(f,p,!1):p.filterable&&!p.sortable&&o(f),n==null||n.emit("header-click",p,f)},i=(f,p)=>{n==null||n.emit("header-contextmenu",p,f)},a=O(null),s=O(!1),u=O({}),d=(f,p)=>{if(jt&&!(p.children&&p.children.length>0)&&a.value&&e.border){s.value=!0;const b=n;t("set-drag-visible",!0);const y=(b==null?void 0:b.vnode.el).getBoundingClientRect().left,v=l.vnode.el.querySelector(`th.${p.id}`),C=v.getBoundingClientRect(),x=C.left-y+30;xl(v,"noclick"),u.value={startMouseLeft:f.clientX,startLeft:C.right-y,startColumnLeft:C.left-y,tableLeft:y};const I=b==null?void 0:b.refs.resizeProxy;I.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const $=R=>{const T=R.clientX-u.value.startMouseLeft,D=u.value.startLeft+T;I.style.left=`${Math.max(x,D)}px`},S=()=>{if(s.value){const{startColumnLeft:R,startLeft:T}=u.value,P=Number.parseInt(I.style.left,10)-R;p.width=p.realWidth=P,b==null||b.emit("header-dragend",p.width,T-R,p,f),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",s.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",S),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{al(v,"noclick")},0)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",S)}},c=(f,p)=>{var b;if(p.children&&p.children.length>0)return;const w=f.target;if(!Pr(w))return;const y=w==null?void 0:w.closest("th");if(!(!p||!p.resizable||!y)&&!s.value&&e.border){const v=y.getBoundingClientRect(),C=document.body.style,x=((b=y.parentNode)==null?void 0:b.lastElementChild)===y;v.width>12&&v.right-f.pageX<8&&!x?(C.cursor="col-resize",el(y,"is-sortable")&&(y.style.cursor="col-resize"),a.value=p):s.value||(C.cursor="",el(y,"is-sortable")&&(y.style.cursor="pointer"),a.value=null)}},h=()=>{jt&&(document.body.style.cursor="")},m=({order:f,sortOrders:p})=>{if(f==="")return p[0];const b=p.indexOf(f||null);return p[b>p.length-2?0:b+1]},g=(f,p,b)=>{var w;f.stopPropagation();const y=p.order===b?null:b||m(p),v=(w=f.target)==null?void 0:w.closest("th");if(v&&el(v,"noclick")){al(v,"noclick");return}if(!p.sortable)return;const C=f.currentTarget;if(["ascending","descending"].some(R=>el(C,R)&&!p.sortOrders.includes(R)))return;const x=e.store.states;let I=x.sortProp.value,$;const S=x.sortingColumn.value;(S!==p||S===p&&S.order===null)&&(S&&(S.order=null),x.sortingColumn.value=p,I=p.property),y?$=p.order=y:$=p.order=null,x.sortProp.value=I,x.sortOrder.value=$,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:i,handleMouseDown:d,handleMouseMove:c,handleMouseOut:h,handleSortClick:g,handleFilterClick:o}}function Mi(e){const t=vt(Rt),l=lt("table");return{getHeaderRowStyle:a=>{const s=t==null?void 0:t.props.headerRowStyle;return typeof s=="function"?s.call(null,{rowIndex:a}):s},getHeaderRowClass:a=>{const s=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?s.push(u):typeof u=="function"&&s.push(u.call(null,{rowIndex:a})),s.join(" ")},getHeaderCellStyle:(a,s,u,d)=>{var c;let h=(c=t==null?void 0:t.props.headerCellStyle)!=null?c:{};typeof h=="function"&&(h=h.call(null,{rowIndex:a,columnIndex:s,row:u,column:d}));const m=Fn(s,d.fixed,e.store,u);return qt(m,"left"),qt(m,"right"),Object.assign({},h,m)},getHeaderCellClass:(a,s,u,d)=>{const c=Hn(l.b(),s,d.fixed,e.store,u),h=[d.id,d.order,d.headerAlign,d.className,d.labelClassName,...c];d.children||h.push("is-leaf"),d.sortable&&h.push("is-sortable");const m=t==null?void 0:t.props.headerCellClassName;return typeof m=="string"?h.push(m):typeof m=="function"&&h.push(m.call(null,{rowIndex:a,columnIndex:s,row:u,column:d})),h.push(l.e("cell")),h.filter(g=>!!g).join(" ")}}}const Ca=e=>{const t=[];return e.forEach(l=>{l.children?(t.push(l),t.push.apply(t,Ca(l.children))):t.push(l)}),t},ba=e=>{let t=1;const l=(r,i)=>{if(i&&(r.level=i.level+1,t<r.level&&(t=r.level)),r.children){let a=0;r.children.forEach(s=>{l(s,r),a+=s.colSpan}),r.colSpan=a}else r.colSpan=1};e.forEach(r=>{r.level=1,l(r,void 0)});const n=[];for(let r=0;r<t;r++)n.push([]);return Ca(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(i=>i.isSubColumn=!0)):r.rowSpan=t-r.level+1,n[r.level-1].push(r)}),n};function $i(e){const t=vt(Rt),l=F(()=>ba(e.store.states.originColumns.value));return{isGroup:F(()=>{const r=l.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:l}}var Ni=Fe({name:"ElTableHeader",components:{ElCheckbox:gt},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(e,{emit:t}){const l=Je(),n=vt(Rt),o=lt("table"),r=O({}),{onColumnsChange:i,onScrollableChange:a}=ya(n);wt(async()=>{await tt(),await tt();const{prop:x,order:I}=e.defaultSort;n==null||n.store.commit("sort",{prop:x,order:I,init:!0})});const{handleHeaderClick:s,handleHeaderContextMenu:u,handleMouseDown:d,handleMouseMove:c,handleMouseOut:h,handleSortClick:m,handleFilterClick:g}=Ii(e,t),{getHeaderRowStyle:f,getHeaderRowClass:p,getHeaderCellStyle:b,getHeaderCellClass:w}=Mi(e),{isGroup:y,toggleAllSelection:v,columnRows:C}=$i(e);return l.state={onColumnsChange:i,onScrollableChange:a},l.filterPanels=r,{ns:o,filterPanels:r,onColumnsChange:i,onScrollableChange:a,columnRows:C,getHeaderRowClass:p,getHeaderRowStyle:f,getHeaderCellClass:w,getHeaderCellStyle:b,handleHeaderClick:s,handleHeaderContextMenu:u,handleMouseDown:d,handleMouseMove:c,handleMouseOut:h,handleSortClick:m,handleFilterClick:g,isGroup:y,toggleAllSelection:v}},render(){const{ns:e,isGroup:t,columnRows:l,getHeaderCellStyle:n,getHeaderCellClass:o,getHeaderRowClass:r,getHeaderRowStyle:i,handleHeaderClick:a,handleHeaderContextMenu:s,handleMouseDown:u,handleMouseMove:d,handleSortClick:c,handleMouseOut:h,store:m,$parent:g}=this;let f=1;return he("thead",{class:{[e.is("group")]:t}},l.map((p,b)=>he("tr",{class:r(b),key:b,style:i(b)},p.map((w,y)=>(w.rowSpan>f&&(f=w.rowSpan),he("th",{class:o(b,y,p,w),colspan:w.colSpan,key:`${w.id}-thead`,rowspan:w.rowSpan,style:n(b,y,p,w),onClick:v=>{v.currentTarget.classList.contains("noclick")||a(v,w)},onContextmenu:v=>s(v,w),onMousedown:v=>u(v,w),onMousemove:v=>d(v,w),onMouseout:h},[he("div",{class:["cell",w.filteredValue&&w.filteredValue.length>0?"highlight":""]},[w.renderHeader?w.renderHeader({column:w,$index:y,store:m,_self:g}):w.label,w.sortable&&he("span",{onClick:v=>c(v,w),class:"caret-wrapper"},[he("i",{onClick:v=>c(v,w,"ascending"),class:"sort-caret ascending"}),he("i",{onClick:v=>c(v,w,"descending"),class:"sort-caret descending"})]),w.filterable&&he(Fi,{store:m,placement:w.filterPlacement||"bottom-start",appendTo:g.appendFilterPanelTo,column:w,upDataColumn:(v,C)=>{w[v]=C}},{"filter-icon":()=>w.renderFilterIcon?w.renderFilterIcon({filterOpened:w.filterOpened}):null})])]))))))}});function Ll(e,t,l=.03){return e-t>l}function Di(e){const t=vt(Rt),l=O(""),n=O(he("div")),o=(g,f,p)=>{var b;const w=t,y=Pl(g);let v;const C=(b=w==null?void 0:w.vnode.el)==null?void 0:b.dataset.prefix;y&&(v=mo({columns:e.store.states.columns.value},y,C),v&&(w==null||w.emit(`cell-${p}`,f,v,y,g))),w==null||w.emit(`row-${p}`,f,v,g)},r=(g,f)=>{o(g,f,"dblclick")},i=(g,f)=>{e.store.commit("setCurrentRow",f),o(g,f,"click")},a=(g,f)=>{o(g,f,"contextmenu")},s=ol(g=>{e.store.commit("setHoverRow",g)},30),u=ol(()=>{e.store.commit("setHoverRow",null)},30),d=g=>{const f=window.getComputedStyle(g,null),p=Number.parseInt(f.paddingLeft,10)||0,b=Number.parseInt(f.paddingRight,10)||0,w=Number.parseInt(f.paddingTop,10)||0,y=Number.parseInt(f.paddingBottom,10)||0;return{left:p,right:b,top:w,bottom:y}},c=(g,f,p)=>{let b=f.target.parentNode;for(;g>1&&(b=b==null?void 0:b.nextSibling,!(!b||b.nodeName!=="TR"));)p(b,"hover-row hover-fixed-row"),g--};return{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:s,handleMouseLeave:u,handleCellMouseEnter:(g,f,p)=>{var b;const w=t,y=Pl(g),v=(b=w==null?void 0:w.vnode.el)==null?void 0:b.dataset.prefix;if(y){const le=mo({columns:e.store.states.columns.value},y,v);y.rowSpan>1&&c(y.rowSpan,g,xl);const ie=w.hoverState={cell:y,column:le,row:f};w==null||w.emit("cell-mouse-enter",ie.row,ie.column,ie.cell,g)}if(!p)return;const C=g.target.querySelector(".cell");if(!(el(C,`${v}-tooltip`)&&C.childNodes.length))return;const x=document.createRange();x.setStart(C,0),x.setEnd(C,C.childNodes.length);const{width:I,height:$}=x.getBoundingClientRect(),{width:S,height:R}=C.getBoundingClientRect(),{top:T,left:D,right:P,bottom:V}=d(C),j=D+P,B=T+V;(Ll(I+j,S)||Ll($+B,R)||Ll(C.scrollWidth,S))&&pi(p,y.innerText||y.textContent,y,w)},handleCellMouseLeave:g=>{const f=Pl(g);if(!f)return;f.rowSpan>1&&c(f.rowSpan,g,al);const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,g)},tooltipContent:l,tooltipTrigger:n}}function Ai(e){const t=vt(Rt),l=lt("table");return{getRowStyle:(u,d)=>{const c=t==null?void 0:t.props.rowStyle;return typeof c=="function"?c.call(null,{row:u,rowIndex:d}):c||null},getRowClass:(u,d)=>{const c=[l.e("row")];t!=null&&t.props.highlightCurrentRow&&u===e.store.states.currentRow.value&&c.push("current-row"),e.stripe&&d%2===1&&c.push(l.em("row","striped"));const h=t==null?void 0:t.props.rowClassName;return typeof h=="string"?c.push(h):typeof h=="function"&&c.push(h.call(null,{row:u,rowIndex:d})),c},getCellStyle:(u,d,c,h)=>{const m=t==null?void 0:t.props.cellStyle;let g=m!=null?m:{};typeof m=="function"&&(g=m.call(null,{rowIndex:u,columnIndex:d,row:c,column:h}));const f=Fn(d,e==null?void 0:e.fixed,e.store);return qt(f,"left"),qt(f,"right"),Object.assign({},g,f)},getCellClass:(u,d,c,h,m)=>{const g=Hn(l.b(),d,e==null?void 0:e.fixed,e.store,void 0,m),f=[h.id,h.align,h.className,...g],p=t==null?void 0:t.props.cellClassName;return typeof p=="string"?f.push(p):typeof p=="function"&&f.push(p.call(null,{rowIndex:u,columnIndex:d,row:c,column:h})),f.push(l.e("cell")),f.filter(b=>!!b).join(" ")},getSpan:(u,d,c,h)=>{let m=1,g=1;const f=t==null?void 0:t.props.spanMethod;if(typeof f=="function"){const p=f({row:u,column:d,rowIndex:c,columnIndex:h});Array.isArray(p)?(m=p[0],g=p[1]):typeof p=="object"&&(m=p.rowspan,g=p.colspan)}return{rowspan:m,colspan:g}},getColspanRealWidth:(u,d,c)=>{if(d<1)return u[c].realWidth;const h=u.map(({realWidth:m,width:g})=>m||g).slice(c,c+d);return Number(h.reduce((m,g)=>Number(m)+Number(g),-1))}}}const Pi=Fe({name:"TableTdWrapper"}),Li=Fe({...Pi,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(e){return(t,l)=>(A(),Y("td",{colspan:e.colspan,rowspan:e.rowspan},[Oe(t.$slots,"default")],8,["colspan","rowspan"]))}});var Ki=pn(Li,[["__file","td-wrapper.vue"]]);function zi(e){const t=vt(Rt),l=lt("table"),{handleDoubleClick:n,handleClick:o,handleContextMenu:r,handleMouseEnter:i,handleMouseLeave:a,handleCellMouseEnter:s,handleCellMouseLeave:u,tooltipContent:d,tooltipTrigger:c}=Di(e),{getRowStyle:h,getRowClass:m,getCellStyle:g,getCellClass:f,getSpan:p,getColspanRealWidth:b}=Ai(e),w=F(()=>e.store.states.columns.value.findIndex(({type:I})=>I==="default")),y=(I,$)=>{const S=t.props.rowKey;return S?et(I,S):$},v=(I,$,S,R=!1)=>{const{tooltipEffect:T,tooltipOptions:D,store:P}=e,{indent:V,columns:j}=P.states,B=m(I,$);let le=!0;return S&&(B.push(l.em("row",`level-${S.level}`)),le=S.display),he("tr",{style:[le?null:{display:"none"},h(I,$)],class:B,key:y(I,$),onDblclick:L=>n(L,I),onClick:L=>o(L,I),onContextmenu:L=>r(L,I),onMouseenter:()=>i($),onMouseleave:a},j.value.map((L,q)=>{const{rowspan:ne,colspan:ce}=p(I,L,$,q);if(!ne||!ce)return null;const k=Object.assign({},L);k.realWidth=b(j.value,ce,q);const z={store:e.store,_self:e.context||t,column:k,row:I,$index:$,cellIndex:q,expanded:R};q===w.value&&S&&(z.treeNode={indent:S.level*V.value,level:S.level},typeof S.expanded=="boolean"&&(z.treeNode.expanded=S.expanded,"loading"in S&&(z.treeNode.loading=S.loading),"noLazyChildren"in S&&(z.treeNode.noLazyChildren=S.noLazyChildren)));const Q=`${y(I,$)},${q}`,ue=k.columnKey||k.rawColumnKey||"",Ee=L.showOverflowTooltip&&Js({effect:T},D,L.showOverflowTooltip);return he(Ki,{style:g($,q,I,L),class:f($,q,I,L,ce-1),key:`${ue}${Q}`,rowspan:ne,colspan:ce,onMouseenter:de=>s(de,I,Ee),onMouseleave:u},{default:()=>C(q,L,z)})}))},C=(I,$,S)=>$.renderCell(S);return{wrappedRowRender:(I,$)=>{const S=e.store,{isRowExpanded:R,assertRowKey:T}=S,{treeData:D,lazyTreeNodeMap:P,childrenColumnName:V,rowKey:j}=S.states,B=S.states.columns.value;if(B.some(({type:ie})=>ie==="expand")){const ie=R(I),L=v(I,$,void 0,ie),q=t.renderExpanded;return ie?q?[[L,he("tr",{key:`expanded-row__${L.key}`},[he("td",{colspan:B.length,class:`${l.e("cell")} ${l.e("expanded-cell")}`},[q({row:I,$index:$,store:S,expanded:ie})])])]]:(console.error("[Element Error]renderExpanded is required."),L):[[L]]}else if(Object.keys(D.value).length){T();const ie=et(I,j.value);let L=D.value[ie],q=null;L&&(q={expanded:L.expanded,level:L.level,display:!0},typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(q.noLazyChildren=!(L.children&&L.children.length)),q.loading=L.loading));const ne=[v(I,$,q)];if(L){let ce=0;const k=(Q,ue)=>{Q&&Q.length&&ue&&Q.forEach(Ee=>{const de={display:ue.display&&ue.expanded,level:ue.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Se=et(Ee,j.value);if(Se==null)throw new Error("For nested data item, row-key is required.");if(L={...D.value[Se]},L&&(de.expanded=L.expanded,L.level=L.level||de.level,L.display=!!(L.expanded&&de.display),typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(de.noLazyChildren=!(L.children&&L.children.length)),de.loading=L.loading)),ce++,ne.push(v(Ee,$+ce,de)),L){const Pe=P.value[Se]||Ee[V.value];k(Pe,L)}})};L.display=!0;const z=P.value[ie]||I[V.value];k(z,L)}return ne}else return v(I,$,void 0)},tooltipContent:d,tooltipTrigger:c}}const Wi={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Vi=Fe({name:"ElTableBody",props:Wi,setup(e){const t=Je(),l=vt(Rt),n=lt("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}=zi(e),{onColumnsChange:a,onScrollableChange:s}=ya(l),u=[];return ye(e.store.states.hoverRow,(d,c)=>{var h;const m=t==null?void 0:t.vnode.el,g=Array.from((m==null?void 0:m.children)||[]).filter(b=>b==null?void 0:b.classList.contains(`${n.e("row")}`));let f=d;const p=(h=g[f])==null?void 0:h.childNodes;if(p!=null&&p.length){let b=0;Array.from(p).reduce((y,v,C)=>{var x,I;return((x=p[C])==null?void 0:x.colSpan)>1&&(b=(I=p[C])==null?void 0:I.colSpan),v.nodeName!=="TD"&&b===0&&y.push(C),b>0&&b--,y},[]).forEach(y=>{var v;for(f=d;f>0;){const C=(v=g[f-1])==null?void 0:v.childNodes;if(C[y]&&C[y].nodeName==="TD"&&C[y].rowSpan>1){xl(C[y],"hover-cell"),u.push(C[y]);break}f--}})}else u.forEach(b=>al(b,"hover-cell")),u.length=0;!e.store.states.isComplex.value||!jt||Go(()=>{const b=g[c],w=g[d];b&&!b.classList.contains("hover-fixed-row")&&al(b,"hover-row"),w&&xl(w,"hover-row")})}),bn(()=>{var d;(d=ft)==null||d()}),{ns:n,onColumnsChange:a,onScrollableChange:s,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}},render(){const{wrappedRowRender:e,store:t}=this,l=t.states.data.value||[];return he("tbody",{tabIndex:-1},[l.reduce((n,o)=>n.concat(e(o,n.length)),[])])}});function Bi(){const e=vt(Rt),t=e==null?void 0:e.store,l=F(()=>t.states.fixedLeafColumnsLength.value),n=F(()=>t.states.rightFixedColumns.value.length),o=F(()=>t.states.columns.value.length),r=F(()=>t.states.fixedColumns.value.length),i=F(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:l,rightFixedLeafCount:n,columnsCount:o,leftFixedCount:r,rightFixedCount:i,columns:t.states.columns}}function ji(e){const{columns:t}=Bi(),l=lt("table");return{getCellClasses:(r,i)=>{const a=r[i],s=[l.e("cell"),a.id,a.align,a.labelClassName,...Hn(l.b(),i,a.fixed,e.store)];return a.className&&s.push(a.className),a.children||s.push(l.is("leaf")),s},getCellStyles:(r,i)=>{const a=Fn(i,r.fixed,e.store);return qt(a,"left"),qt(a,"right"),a},columns:t}}var _i=Fe({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:l,columns:n}=ji(e);return{ns:lt("table"),getCellClasses:t,getCellStyles:l,columns:n}},render(){const{columns:e,getCellStyles:t,getCellClasses:l,summaryMethod:n,sumText:o}=this,r=this.store.states.data.value;let i=[];return n?i=n({columns:e,data:r}):e.forEach((a,s)=>{if(s===0){i[s]=o;return}const u=r.map(m=>Number(m[a.property])),d=[];let c=!0;u.forEach(m=>{if(!Number.isNaN(+m)){c=!1;const g=`${m}`.split(".")[1];d.push(g?g.length:0)}});const h=Math.max.apply(null,d);c?i[s]="":i[s]=u.reduce((m,g)=>{const f=Number(g);return Number.isNaN(+f)?m:Number.parseFloat((m+g).toFixed(Math.min(h,20)))},0)}),he(he("tfoot",[he("tr",{},[...e.map((a,s)=>he("td",{key:s,colspan:a.colSpan,rowspan:a.rowSpan,class:l(e,s),style:t(a,s)},[he("div",{class:["cell",a.labelClassName]},[i[s]])]))])]))}});function Ui(e){return{setCurrentRow:c=>{e.commit("setCurrentRow",c)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(c,h,m=!0)=>{e.toggleRowSelection(c,h,!1,m),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:c=>{e.clearFilter(c)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(c,h)=>{e.toggleRowExpansionAdapter(c,h)},clearSort:()=>{e.clearSort()},sort:(c,h)=>{e.commit("sort",{prop:c,order:h})},updateKeyChildren:(c,h)=>{e.updateKeyChildren(c,h)}}}function qi(e,t,l,n){const o=O(!1),r=O(null),i=O(!1),a=L=>{i.value=L},s=O({width:null,height:null,headerHeight:null}),u=O(!1),d={display:"inline-block",verticalAlign:"middle"},c=O(),h=O(0),m=O(0),g=O(0),f=O(0),p=O(0);tl(()=>{t.setHeight(e.height)}),tl(()=>{t.setMaxHeight(e.maxHeight)}),ye(()=>[e.currentRowKey,l.states.rowKey],([L,q])=>{!E(q)||!E(L)||l.setCurrentRowKey(`${L}`)},{immediate:!0}),ye(()=>e.data,L=>{n.store.commit("setData",L)},{immediate:!0,deep:!0}),tl(()=>{e.expandRowKeys&&l.setExpandRowKeysAdapter(e.expandRowKeys)});const b=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},w=(L,q)=>{const{pixelX:ne,pixelY:ce}=q;Math.abs(ne)>=Math.abs(ce)&&(n.refs.bodyWrapper.scrollLeft+=q.pixelX/5)},y=F(()=>e.height||e.maxHeight||l.states.fixedColumns.value.length>0||l.states.rightFixedColumns.value.length>0),v=F(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),C=()=>{y.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(S)};wt(async()=>{await tt(),l.updateColumns(),R(),requestAnimationFrame(C);const L=n.vnode.el,q=n.refs.headerWrapper;e.flexible&&L&&L.parentElement&&(L.parentElement.style.minWidth="0"),s.value={width:c.value=L.offsetWidth,height:L.offsetHeight,headerHeight:e.showHeader&&q?q.offsetHeight:null},l.states.columns.value.forEach(ne=>{ne.filteredValue&&ne.filteredValue.length&&n.store.commit("filterChange",{column:ne,values:ne.filteredValue,silent:!0})}),n.$ready=!0});const x=(L,q)=>{if(!L)return;const ne=Array.from(L.classList).filter(ce=>!ce.startsWith("is-scrolling-"));ne.push(t.scrollX.value?q:"is-scrolling-none"),L.className=ne.join(" ")},I=L=>{const{tableWrapper:q}=n.refs;x(q,L)},$=L=>{const{tableWrapper:q}=n.refs;return!!(q&&q.classList.contains(L))},S=function(){if(!n.refs.scrollBarRef)return;if(!t.scrollX.value){const ue="is-scrolling-none";$(ue)||I(ue);return}const L=n.refs.scrollBarRef.wrapRef;if(!L)return;const{scrollLeft:q,offsetWidth:ne,scrollWidth:ce}=L,{headerWrapper:k,footerWrapper:z}=n.refs;k&&(k.scrollLeft=q),z&&(z.scrollLeft=q);const Q=ce-ne-1;q>=Q?I("is-scrolling-right"):I(q===0?"is-scrolling-left":"is-scrolling-middle")},R=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&_l(n.refs.scrollBarRef.wrapRef,"scroll",S,{passive:!0}),e.fit?Gl(n.vnode.el,T):_l(window,"resize",T),Gl(n.refs.bodyWrapper,()=>{var L,q;T(),(q=(L=n.refs)==null?void 0:L.scrollBarRef)==null||q.update()}))},T=()=>{var L,q,ne,ce;const k=n.vnode.el;if(!n.$ready||!k)return;let z=!1;const{width:Q,height:ue,headerHeight:Ee}=s.value,de=c.value=k.offsetWidth;Q!==de&&(z=!0);const Se=k.offsetHeight;(e.height||y.value)&&ue!==Se&&(z=!0);const Pe=e.tableLayout==="fixed"?n.refs.headerWrapper:(L=n.refs.tableHeaderRef)==null?void 0:L.$el;e.showHeader&&(Pe==null?void 0:Pe.offsetHeight)!==Ee&&(z=!0),h.value=((q=n.refs.tableWrapper)==null?void 0:q.scrollHeight)||0,g.value=(Pe==null?void 0:Pe.scrollHeight)||0,f.value=((ne=n.refs.footerWrapper)==null?void 0:ne.offsetHeight)||0,p.value=((ce=n.refs.appendWrapper)==null?void 0:ce.offsetHeight)||0,m.value=h.value-g.value-f.value-p.value,z&&(s.value={width:de,height:Se,headerHeight:e.showHeader&&(Pe==null?void 0:Pe.offsetHeight)||0},C())},D=Lr(),P=F(()=>{const{bodyWidth:L,scrollY:q,gutterWidth:ne}=t;return L.value?`${L.value-(q.value?ne:0)}px`:""}),V=F(()=>e.maxHeight?"fixed":e.tableLayout),j=F(()=>{if(e.data&&e.data.length)return null;let L="100%";e.height&&m.value&&(L=`${m.value}px`);const q=c.value;return{width:q?`${q}px`:"",height:L}}),B=F(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),le=F(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${g.value+f.value}px)`}:{maxHeight:`${e.maxHeight-g.value-f.value}px`}:{});return{isHidden:o,renderExpanded:r,setDragVisible:a,isGroup:u,handleMouseLeave:b,handleHeaderFooterMousewheel:w,tableSize:D,emptyBlockStyle:j,handleFixedMousewheel:(L,q)=>{const ne=n.refs.bodyWrapper;if(Math.abs(q.spinY)>0){const ce=ne.scrollTop;q.pixelY<0&&ce!==0&&L.preventDefault(),q.pixelY>0&&ne.scrollHeight-ne.clientHeight>ce&&L.preventDefault(),ne.scrollTop+=Math.ceil(q.pixelY/5)}else ne.scrollLeft+=Math.ceil(q.pixelX/5)},resizeProxyVisible:i,bodyWidth:P,resizeState:s,doLayout:C,tableBodyStyles:v,tableLayout:V,scrollbarViewStyle:d,tableInnerStyle:B,scrollbarStyle:le}}function Gi(e){const t=O(),l=()=>{const o=e.vnode.el.querySelector(".hidden-columns"),r={childList:!0,subtree:!0},i=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{i.forEach(a=>a())}),t.value.observe(o,r)};wt(()=>{l()}),bn(()=>{var n;(n=t.value)==null||n.disconnect()})}var wa={data:{type:Array,default:()=>[]},size:Kr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function Sa(e){const t=e.tableLayout==="auto";let l=e.columns||[];t&&l.every(o=>o.width===void 0)&&(l=[]);const n=o=>{const r={key:`${e.tableLayout}_${o.id}`,style:{},name:void 0};return t?r.style={width:`${o.width}px`}:r.name=o.id,r};return he("colgroup",{},l.map(o=>he("col",n(o))))}Sa.props=["columns","tableLayout"];const Yi=()=>{const e=O(),t=(r,i)=>{const a=e.value;a&&a.scrollTo(r,i)},l=(r,i)=>{const a=e.value;a&&it(i)&&["Top","Left"].includes(r)&&a[`setScroll${r}`](i)};return{scrollBarRef:e,scrollTo:t,setScrollTop:r=>l("Top",r),setScrollLeft:r=>l("Left",r)}};let Xi=1;const Ji=Fe({name:"ElTable",directives:{Mousewheel:oi},components:{TableHeader:Ni,TableBody:Vi,TableFooter:_i,ElScrollbar:yn,hColgroup:Sa},props:wa,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=Ml(),l=lt("table"),n=Je();Ao(Rt,n);const o=xi(n,e);n.store=o;const r=new Ti({store:n.store,table:n,fit:e.fit,showHeader:e.showHeader});n.layout=r;const i=F(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:s,toggleRowSelection:u,clearSelection:d,clearFilter:c,toggleAllSelection:h,toggleRowExpansion:m,clearSort:g,sort:f,updateKeyChildren:p}=Ui(o),{isHidden:b,renderExpanded:w,setDragVisible:y,isGroup:v,handleMouseLeave:C,handleHeaderFooterMousewheel:x,tableSize:I,emptyBlockStyle:$,handleFixedMousewheel:S,resizeProxyVisible:R,bodyWidth:T,resizeState:D,doLayout:P,tableBodyStyles:V,tableLayout:j,scrollbarViewStyle:B,tableInnerStyle:le,scrollbarStyle:ie}=qi(e,r,o,n),{scrollBarRef:L,scrollTo:q,setScrollLeft:ne,setScrollTop:ce}=Yi(),k=ol(P,50),z=`${l.namespace.value}-table_${Xi++}`;n.tableId=z,n.state={isGroup:v,resizeState:D,doLayout:P,debouncedUpdateLayout:k};const Q=F(()=>{var de;return(de=e.sumText)!=null?de:t("el.table.sumText")}),ue=F(()=>{var de;return(de=e.emptyText)!=null?de:t("el.table.emptyText")}),Ee=F(()=>ba(o.states.originColumns.value)[0]);return Gi(n),wn(()=>{k.cancel()}),{ns:l,layout:r,store:o,columns:Ee,handleHeaderFooterMousewheel:x,handleMouseLeave:C,tableId:z,tableSize:I,isHidden:b,isEmpty:i,renderExpanded:w,resizeProxyVisible:R,resizeState:D,isGroup:v,bodyWidth:T,tableBodyStyles:V,emptyBlockStyle:$,debouncedUpdateLayout:k,handleFixedMousewheel:S,setCurrentRow:a,getSelectionRows:s,toggleRowSelection:u,clearSelection:d,clearFilter:c,toggleAllSelection:h,toggleRowExpansion:m,clearSort:g,doLayout:P,sort:f,updateKeyChildren:p,t,setDragVisible:y,context:n,computedSumText:Q,computedEmptyText:ue,tableLayout:j,scrollbarViewStyle:B,tableInnerStyle:le,scrollbarStyle:ie,scrollBarRef:L,scrollTo:q,setScrollLeft:ne,setScrollTop:ce}}});function Zi(e,t,l,n,o,r){const i=W("hColgroup"),a=W("table-header"),s=W("table-body"),u=W("table-footer"),d=W("el-scrollbar"),c=Do("mousewheel");return A(),Y("div",{ref:"tableWrapper",class:Re([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:Xe(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[we("div",{class:Re(e.ns.e("inner-wrapper")),style:Xe(e.tableInnerStyle)},[we("div",{ref:"hiddenColumns",class:"hidden-columns"},[Oe(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?gl((A(),Y("div",{key:0,ref:"headerWrapper",class:Re(e.ns.e("header-wrapper"))},[we("table",{ref:"tableHeader",class:Re(e.ns.e("header")),style:Xe(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[N(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),N(a,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[c,e.handleHeaderFooterMousewheel]]):fe("v-if",!0),we("div",{ref:"bodyWrapper",class:Re(e.ns.e("body-wrapper"))},[N(d,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn,tabindex:e.scrollbarTabindex},{default:G(()=>[we("table",{ref:"tableBody",class:Re(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Xe({width:e.bodyWidth,tableLayout:e.tableLayout})},[N(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(A(),se(a,{key:0,ref:"tableHeaderRef",class:Re(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):fe("v-if",!0),N(s,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(A(),se(u,{key:1,class:Re(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):fe("v-if",!0)],6),e.isEmpty?(A(),Y("div",{key:0,ref:"emptyBlock",style:Xe(e.emptyBlockStyle),class:Re(e.ns.e("empty-block"))},[we("span",{class:Re(e.ns.e("empty-text"))},[Oe(e.$slots,"empty",{},()=>[Ct(Ve(e.computedEmptyText),1)])],2)],6)):fe("v-if",!0),e.$slots.append?(A(),Y("div",{key:1,ref:"appendWrapper",class:Re(e.ns.e("append-wrapper"))},[Oe(e.$slots,"append")],2)):fe("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex"])],2),e.showSummary&&e.tableLayout==="fixed"?gl((A(),Y("div",{key:1,ref:"footerWrapper",class:Re(e.ns.e("footer-wrapper"))},[we("table",{class:Re(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Xe(e.tableBodyStyles)},[N(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),N(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Jn,!e.isEmpty],[c,e.handleHeaderFooterMousewheel]]):fe("v-if",!0),e.border||e.isGroup?(A(),Y("div",{key:2,class:Re(e.ns.e("border-left-patch"))},null,2)):fe("v-if",!0)],6),gl(we("div",{ref:"resizeProxy",class:Re(e.ns.e("column-resize-proxy"))},null,2),[[Jn,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Qi=pn(Ji,[["render",Zi],["__file","table.vue"]]);const eu={selection:"table-column--selection",expand:"table__expand-column"},tu={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},lu=e=>eu[e]||"",nu={selection:{renderHeader({store:e,column:t}){function l(){return e.states.data.value&&e.states.data.value.length===0}return he(gt,{disabled:l(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:l,$index:n}){return he(gt,{disabled:t.selectable?!t.selectable.call(null,e,n):!1,size:l.states.tableSize.value,onChange:()=>{l.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:l.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let l=t+1;const n=e.index;return typeof n=="number"?l=t+n:typeof n=="function"&&(l=n(t)),he("div",{},[l])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:l}){const{ns:n}=t,o=[n.e("expand-icon")];return l&&o.push(n.em("expand-icon","expanded")),he("div",{class:o,onClick:function(i){i.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[he(St,null,{default:()=>[he(Sn)]})]})},sortable:!1,resizable:!1}};function ou({row:e,column:t,$index:l}){var n;const o=t.property,r=o&&zr(e,o).value;return t&&t.formatter?t.formatter(e,t,r,l):((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||""}function au({row:e,treeNode:t,store:l},n=!1){const{ns:o}=l;if(!t)return n?[he("span",{class:o.e("placeholder")})]:null;const r=[],i=function(a){a.stopPropagation(),!t.loading&&l.loadOrToggle(e)};if(t.indent&&r.push(he("span",{class:o.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const a=[o.e("expand-icon"),t.expanded?o.em("expand-icon","expanded"):""];let s=Sn;t.loading&&(s=Wr),r.push(he("div",{class:a,onClick:i},{default:()=>[he(St,{class:{[o.is("loading")]:t.loading}},{default:()=>[he(s)]})]}))}else r.push(he("span",{class:o.e("placeholder")}));return r}function po(e,t){return e.reduce((l,n)=>(l[n]=n,l),t)}function ru(e,t){const l=Je();return{registerComplexWatchers:()=>{const r=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},a=po(r,i);Object.keys(a).forEach(s=>{const u=i[s];_t(t,u)&&ye(()=>t[u],d=>{let c=d;u==="width"&&s==="realWidth"&&(c=On(d)),u==="minWidth"&&s==="realMinWidth"&&(c=ha(d)),l.columnConfig.value[u]=c,l.columnConfig.value[s]=c;const h=u==="fixed";e.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=po(r,i);Object.keys(a).forEach(s=>{const u=i[s];_t(t,u)&&ye(()=>t[u],d=>{l.columnConfig.value[s]=d})})}}}function su(e,t,l){const n=Je(),o=O(""),r=O(!1),i=O(),a=O(),s=lt("table");tl(()=>{i.value=e.align?`is-${e.align}`:null,i.value}),tl(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:i.value,a.value});const u=F(()=>{let v=n.vnode.vParent||n.parent;for(;v&&!v.tableId&&!v.columnId;)v=v.vnode.vParent||v.parent;return v}),d=F(()=>{const{store:v}=n.parent;if(!v)return!1;const{treeData:C}=v.states,x=C.value;return x&&Object.keys(x).length>0}),c=O(On(e.width)),h=O(ha(e.minWidth)),m=v=>(c.value&&(v.width=c.value),h.value&&(v.minWidth=h.value),!c.value&&h.value&&(v.width=void 0),v.minWidth||(v.minWidth=80),v.realWidth=Number(v.width===void 0?v.minWidth:v.width),v),g=v=>{const C=v.type,x=nu[C]||{};Object.keys(x).forEach($=>{const S=x[$];$!=="className"&&S!==void 0&&(v[$]=S)});const I=lu(C);if(I){const $=`${E(s.namespace)}-${I}`;v.className=v.className?`${v.className} ${$}`:$}return v},f=v=>{Array.isArray(v)?v.forEach(x=>C(x)):C(v);function C(x){var I;((I=x==null?void 0:x.type)==null?void 0:I.name)==="ElTableColumn"&&(x.vParent=n)}};return{columnId:o,realAlign:i,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:m,setColumnForcedProps:g,setColumnRenders:v=>{e.renderHeader||v.type!=="selection"&&(v.renderHeader=x=>(n.columnConfig.value.label,Oe(t,"header",x,()=>[v.label]))),t["filter-icon"]&&(v.renderFilterIcon=x=>Oe(t,"filter-icon",x));let C=v.renderCell;return v.type==="expand"?(v.renderCell=x=>he("div",{class:"cell"},[C(x)]),l.value.renderExpanded=x=>t.default?t.default(x):t.default):(C=C||ou,v.renderCell=x=>{let I=null;if(t.default){const P=t.default(x);I=P.some(V=>V.type!==Vr)?P:C(x)}else I=C(x);const{columns:$}=l.value.store.states,S=$.value.findIndex(P=>P.type==="default"),R=d.value&&x.cellIndex===S,T=au(x,R),D={class:"cell",style:{}};return v.showOverflowTooltip&&(D.class=`${D.class} ${E(s.namespace)}-tooltip`,D.style={width:`${(x.column.realWidth||Number(x.column.width))-1}px`}),f(I),he("div",D,[T,I])}),v},getPropsData:(...v)=>v.reduce((C,x)=>(Array.isArray(x)&&x.forEach(I=>{C[I]=e[I]}),C),{}),getColumnElIndex:(v,C)=>Array.prototype.indexOf.call(v,C),updateColumnOrder:()=>{l.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var iu={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let uu=1;var Ra=Fe({name:"ElTableColumn",components:{ElCheckbox:gt},props:iu,setup(e,{slots:t}){const l=Je(),n=O({}),o=F(()=>{let y=l.parent;for(;y&&!y.tableId;)y=y.parent;return y}),{registerNormalWatchers:r,registerComplexWatchers:i}=ru(o,e),{columnId:a,isSubColumn:s,realHeaderAlign:u,columnOrTableParent:d,setColumnWidth:c,setColumnForcedProps:h,setColumnRenders:m,getPropsData:g,getColumnElIndex:f,realAlign:p,updateColumnOrder:b}=su(e,t,o),w=d.value;a.value=`${w.tableId||w.columnId}_column_${uu++}`,Cn(()=>{s.value=o.value!==w;const y=e.type||"default",v=e.sortable===""?!0:e.sortable,C=vn(e.showOverflowTooltip)?w.props.showOverflowTooltip:e.showOverflowTooltip,x={...tu[y],id:a.value,type:y,property:e.prop||e.property,align:p,headerAlign:u,showOverflowTooltip:C,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:v,index:e.index,rawColumnKey:l.vnode.key};let T=g(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);T=hi(x,T),T=gi(m,c,h)(T),n.value=T,r(),i()}),wt(()=>{var y;const v=d.value,C=s.value?v.vnode.el.children:(y=v.refs.hiddenColumns)==null?void 0:y.children,x=()=>f(C||[],l.vnode.el);n.value.getColumnIndex=x,x()>-1&&o.value.store.commit("insertColumn",n.value,s.value?v.columnConfig.value:null,b)}),wn(()=>{const y=n.value.getColumnIndex;(y?y():-1)>-1&&o.value.store.commit("removeColumn",n.value,s.value?w.columnConfig.value:null,b)}),l.columnId=a.value,l.columnConfig=n},render(){var e,t,l;try{const n=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(n))for(const i of n)((l=i.type)==null?void 0:l.name)==="ElTableColumn"||i.shapeFlag&2?o.push(i):i.type===Ne&&Array.isArray(i.children)&&i.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!Ul(a==null?void 0:a.children)&&o.push(a)});return he("div",o)}catch(n){return he("div",[])}}});const yo=Rn(Qi,{TableColumn:Ra}),du=Br(Ra);var ut=(e=>(e.ASC="asc",e.DESC="desc",e))(ut||{}),sl=(e=>(e.CENTER="center",e.RIGHT="right",e))(sl||{}),xa=(e=>(e.LEFT="left",e.RIGHT="right",e))(xa||{});const cn={asc:"desc",desc:"asc"},il=Symbol("placeholder"),cu=(e,t,l)=>{var n;const o={flexGrow:0,flexShrink:0,...l?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};l||(o.flexShrink=1);const r={...(n=e.style)!=null?n:{},...o,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(r.maxWidth=e.maxWidth),e.minWidth&&(r.minWidth=e.minWidth)),r};function fu(e,t,l){const n=F(()=>E(t).map((p,b)=>{var w,y;return{...p,key:(y=(w=p.key)!=null?w:p.dataKey)!=null?y:b}})),o=F(()=>E(n).filter(p=>!p.hidden)),r=F(()=>E(o).filter(p=>p.fixed==="left"||p.fixed===!0)),i=F(()=>E(o).filter(p=>p.fixed==="right")),a=F(()=>E(o).filter(p=>!p.fixed)),s=F(()=>{const p=[];return E(r).forEach(b=>{p.push({...b,placeholderSign:il})}),E(a).forEach(b=>{p.push(b)}),E(i).forEach(b=>{p.push({...b,placeholderSign:il})}),p}),u=F(()=>E(r).length||E(i).length),d=F(()=>E(n).reduce((p,b)=>(p[b.key]=cu(b,E(l),e.fixed),p),{})),c=F(()=>E(o).reduce((p,b)=>p+b.width,0)),h=p=>E(n).find(b=>b.key===p),m=p=>E(d)[p],g=(p,b)=>{p.width=b};function f(p){var b;const{key:w}=p.currentTarget.dataset;if(!w)return;const{sortState:y,sortBy:v}=e;let C=ut.ASC;nl(y)?C=cn[y[w]]:C=cn[v.order],(b=e.onColumnSort)==null||b.call(e,{column:h(w),key:w,order:C})}return{columns:n,columnsStyles:d,columnsTotalWidth:c,fixedColumnsOnLeft:r,fixedColumnsOnRight:i,hasFixedColumns:u,mainColumns:s,normalColumns:a,visibleColumns:o,getColumn:h,getColumnStyle:m,updateColumnWidth:g,onColumnSorted:f}}const hu=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:o})=>{const r=O({scrollLeft:0,scrollTop:0});function i(m){var g,f,p;const{scrollTop:b}=m;(g=t.value)==null||g.scrollTo(m),(f=l.value)==null||f.scrollToTop(b),(p=n.value)==null||p.scrollToTop(b)}function a(m){r.value=m,i(m)}function s(m){r.value.scrollTop=m,i(E(r))}function u(m){var g,f;r.value.scrollLeft=m,(f=(g=t.value)==null?void 0:g.scrollTo)==null||f.call(g,E(r))}function d(m){var g;a(m),(g=e.onScroll)==null||g.call(e,m)}function c({scrollTop:m}){const{scrollTop:g}=E(r);m!==g&&s(m)}function h(m,g="auto"){var f;(f=t.value)==null||f.scrollToRow(m,g)}return ye(()=>E(r).scrollTop,(m,g)=>{m>g&&o()}),{scrollPos:r,scrollTo:a,scrollToLeft:u,scrollToTop:s,scrollToRow:h,onScroll:d,onVerticalScroll:c}},mu=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:o,ns:r,isScrolling:i})=>{const a=Je(),{emit:s}=a,u=Ft(!1),d=O(e.defaultExpandedRowKeys||[]),c=O(-1),h=Ft(null),m=O({}),g=O({}),f=Ft({}),p=Ft({}),b=Ft({}),w=F(()=>it(e.estimatedRowHeight));function y(R){var T;(T=e.onRowsRendered)==null||T.call(e,R),R.rowCacheEnd>E(c)&&(c.value=R.rowCacheEnd)}function v({hovered:R,rowKey:T}){if(i.value)return;o.vnode.el.querySelectorAll(`[rowkey="${String(T)}"]`).forEach(V=>{R?V.classList.add(r.is("hovered")):V.classList.remove(r.is("hovered"))})}function C({expanded:R,rowData:T,rowIndex:D,rowKey:P}){var V,j;const B=[...E(d)],le=B.indexOf(P);R?le===-1&&B.push(P):le>-1&&B.splice(le,1),d.value=B,s("update:expandedRowKeys",B),(V=e.onRowExpand)==null||V.call(e,{expanded:R,rowData:T,rowIndex:D,rowKey:P}),(j=e.onExpandedRowsChange)==null||j.call(e,B)}const x=ol(()=>{var R,T,D,P;u.value=!0,m.value={...E(m),...E(g)},I(E(h),!1),g.value={},h.value=null,(R=t.value)==null||R.forceUpdate(),(T=l.value)==null||T.forceUpdate(),(D=n.value)==null||D.forceUpdate(),(P=a.proxy)==null||P.$forceUpdate(),u.value=!1},0);function I(R,T=!1){E(w)&&[t,l,n].forEach(D=>{const P=E(D);P&&P.resetAfterRowIndex(R,T)})}function $(R,T,D){const P=E(h);(P===null||P>D)&&(h.value=D),g.value[R]=T}function S({rowKey:R,height:T,rowIndex:D},P){P?P===xa.RIGHT?b.value[R]=T:f.value[R]=T:p.value[R]=T;const V=Math.max(...[f,b,p].map(j=>j.value[R]||0));E(m)[R]!==V&&($(R,V,D),x())}return{expandedRowKeys:d,lastRenderedRowIndex:c,isDynamic:w,isResetting:u,rowHeights:m,resetAfterIndex:I,onRowExpanded:C,onRowHovered:v,onRowsRendered:y,onRowHeightChange:S}},gu=(e,{expandedRowKeys:t,lastRenderedRowIndex:l,resetAfterIndex:n})=>{const o=O({}),r=F(()=>{const a={},{data:s,rowKey:u}=e,d=E(t);if(!d||!d.length)return s;const c=[],h=new Set;d.forEach(g=>h.add(g));let m=s.slice();for(m.forEach(g=>a[g[u]]=0);m.length>0;){const g=m.shift();c.push(g),h.has(g[u])&&Array.isArray(g.children)&&g.children.length>0&&(m=[...g.children,...m],g.children.forEach(f=>a[f[u]]=a[g[u]]+1))}return o.value=a,c}),i=F(()=>{const{data:a,expandColumnKey:s}=e;return s?E(r):a});return ye(i,(a,s)=>{a!==s&&(l.value=-1,n(0,!0))}),{data:i,depthMap:o}},vu=(e,t)=>e+t,wl=e=>Lt(e)?e.reduce(vu,0):e,Kt=(e,t,l={})=>xn(e)?e(t):e!=null?e:l,Et=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=vl(e[t])}),e),ka=e=>zt(e)?t=>he(e,t):e,pu=(e,{columnsTotalWidth:t,data:l,fixedColumnsOnLeft:n,fixedColumnsOnRight:o})=>{const r=F(()=>{const{fixed:y,width:v,vScrollbarSize:C}=e,x=v-C;return y?Math.max(Math.round(E(t)),x):x}),i=F(()=>E(r)+e.vScrollbarSize),a=F(()=>{const{height:y=0,maxHeight:v=0,footerHeight:C,hScrollbarSize:x}=e;if(v>0){const I=E(g),$=E(s),R=E(m)+I+$+x;return Math.min(R,v-C)}return y-C}),s=F(()=>{const{rowHeight:y,estimatedRowHeight:v}=e,C=E(l);return it(v)?C.length*v:C.length*y}),u=F(()=>{const{maxHeight:y}=e,v=E(a);if(it(y)&&y>0)return v;const C=E(s)+E(m)+E(g);return Math.min(v,C)}),d=y=>y.width,c=F(()=>wl(E(n).map(d))),h=F(()=>wl(E(o).map(d))),m=F(()=>wl(e.headerHeight)),g=F(()=>{var y;return(((y=e.fixedData)==null?void 0:y.length)||0)*e.rowHeight}),f=F(()=>E(a)-E(m)-E(g)),p=F(()=>{const{style:y={},height:v,width:C}=e;return Et({...y,height:v,width:C})}),b=F(()=>Et({height:e.footerHeight})),w=F(()=>({top:vl(E(m)),bottom:vl(e.footerHeight),width:vl(e.width)}));return{bodyWidth:r,fixedTableHeight:u,mainTableHeight:a,leftTableWidth:c,rightTableWidth:h,headerWidth:i,rowsHeight:s,windowHeight:f,footerHeight:b,emptyStyle:w,rootStyle:p,headerHeight:m}},yu=e=>{const t=O(),l=O(0),n=O(0);let o;return wt(()=>{o=Gl(t,([r])=>{const{width:i,height:a}=r.contentRect,{paddingLeft:s,paddingRight:u,paddingTop:d,paddingBottom:c}=getComputedStyle(r.target),h=Number.parseInt(s)||0,m=Number.parseInt(u)||0,g=Number.parseInt(d)||0,f=Number.parseInt(c)||0;l.value=i-h-m,n.value=a-g-f}).stop}),wn(()=>{o==null||o()}),ye([l,n],([r,i])=>{var a;(a=e.onResize)==null||a.call(e,{width:r,height:i})}),{sizer:t,width:l,height:n}};function Cu(e){const t=O(),l=O(),n=O(),{columns:o,columnsStyles:r,columnsTotalWidth:i,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,hasFixedColumns:u,mainColumns:d,onColumnSorted:c}=fu(e,Zn(e,"columns"),Zn(e,"fixed")),{scrollTo:h,scrollToLeft:m,scrollToTop:g,scrollToRow:f,onScroll:p,onVerticalScroll:b,scrollPos:w}=hu(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:ze}),y=lt("table-v2"),v=Je(),C=Ft(!1),{expandedRowKeys:x,lastRenderedRowIndex:I,isDynamic:$,isResetting:S,rowHeights:R,resetAfterIndex:T,onRowExpanded:D,onRowHeightChange:P,onRowHovered:V,onRowsRendered:j}=mu(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:v,ns:y,isScrolling:C}),{data:B,depthMap:le}=gu(e,{expandedRowKeys:x,lastRenderedRowIndex:I,resetAfterIndex:T}),{bodyWidth:ie,fixedTableHeight:L,mainTableHeight:q,leftTableWidth:ne,rightTableWidth:ce,headerWidth:k,rowsHeight:z,windowHeight:Q,footerHeight:ue,emptyStyle:Ee,rootStyle:de,headerHeight:Se}=pu(e,{columnsTotalWidth:i,data:B,fixedColumnsOnLeft:a,fixedColumnsOnRight:s}),Pe=O(),qe=F(()=>{const We=E(B).length===0;return Lt(e.fixedData)?e.fixedData.length===0&&We:We});function Be(We){const{estimatedRowHeight:De,rowHeight:Ge,rowKey:Z}=e;return De?E(R)[E(B)[We][Z]]||De:Ge}function ze(){const{onEndReached:We}=e;if(!We)return;const{scrollTop:De}=E(w),Ge=E(z),Z=E(Q),X=Ge-(De+Z)+e.hScrollbarSize;E(I)>=0&&Ge===De+E(q)-E(Se)&&We(X)}return ye(()=>e.expandedRowKeys,We=>x.value=We,{deep:!0}),{columns:o,containerRef:Pe,mainTableRef:t,leftTableRef:l,rightTableRef:n,isDynamic:$,isResetting:S,isScrolling:C,hasFixedColumns:u,columnsStyles:r,columnsTotalWidth:i,data:B,expandedRowKeys:x,depthMap:le,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,mainColumns:d,bodyWidth:ie,emptyStyle:Ee,rootStyle:de,headerWidth:k,footerHeight:ue,mainTableHeight:q,fixedTableHeight:L,leftTableWidth:ne,rightTableWidth:ce,showEmpty:qe,getRowHeight:Be,onColumnSorted:c,onRowHovered:V,onRowExpanded:D,onRowsRendered:j,onRowHeightChange:P,scrollTo:h,scrollToLeft:m,scrollToTop:g,scrollToRow:f,onScroll:p,onVerticalScroll:b}}const In=Symbol("tableV2"),Ta=String,ul={type:He(Array),required:!0},Mn={type:He(Array)},Ea={...Mn,required:!0},bu=String,Co={type:He(Array),default:()=>jr([])},Mt={type:Number,required:!0},Oa={type:He([String,Number,Symbol]),default:"id"},bo={type:He(Object)},Dt=Yt({class:String,columns:ul,columnsStyles:{type:He(Object),required:!0},depth:Number,expandColumnKey:bu,estimatedRowHeight:{...Pt.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:He(Function)},onRowHover:{type:He(Function)},onRowHeightChange:{type:He(Function)},rowData:{type:He(Object),required:!0},rowEventHandlers:{type:He(Object)},rowIndex:{type:Number,required:!0},rowKey:Oa,style:{type:He(Object)}}),Kl={type:Number,required:!0},$n=Yt({class:String,columns:ul,fixedHeaderData:{type:He(Array)},headerData:{type:He(Array),required:!0},headerHeight:{type:He([Number,Array]),default:50},rowWidth:Kl,rowHeight:{type:Number,default:50},height:Kl,width:Kl}),Sl=Yt({columns:ul,data:Ea,fixedData:Mn,estimatedRowHeight:Dt.estimatedRowHeight,width:Mt,height:Mt,headerWidth:Mt,headerHeight:$n.headerHeight,bodyWidth:Mt,rowHeight:Mt,cache:Es.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Pt.scrollbarAlwaysOn,scrollbarStartGap:Pt.scrollbarStartGap,scrollbarEndGap:Pt.scrollbarEndGap,class:Ta,style:bo,containerStyle:bo,getRowHeight:{type:He(Function),required:!0},rowKey:Dt.rowKey,onRowsRendered:{type:He(Function)},onScroll:{type:He(Function)}}),wu=Yt({cache:Sl.cache,estimatedRowHeight:Dt.estimatedRowHeight,rowKey:Oa,headerClass:{type:He([String,Function])},headerProps:{type:He([Object,Function])},headerCellProps:{type:He([Object,Function])},headerHeight:$n.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:He([String,Function])},rowProps:{type:He([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:He([Object,Function])},columns:ul,data:Ea,dataGetter:{type:He(Function)},fixedData:Mn,expandColumnKey:Dt.expandColumnKey,expandedRowKeys:Co,defaultExpandedRowKeys:Co,class:Ta,fixed:Boolean,style:{type:He(Object)},width:Mt,height:Mt,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Pt.hScrollbarSize,vScrollbarSize:Pt.vScrollbarSize,scrollbarAlwaysOn:Os.alwaysOn,sortBy:{type:He(Object),default:()=>({})},sortState:{type:He(Object),default:void 0},onColumnSort:{type:He(Function)},onExpandedRowsChange:{type:He(Function)},onEndReached:{type:He(Function)},onRowExpand:Dt.onRowExpand,onScroll:Sl.onScroll,onRowsRendered:Sl.onRowsRendered,rowEventHandlers:Dt.rowEventHandlers}),Nn=(e,{slots:t})=>{var l;const{cellData:n,style:o}=e,r=((l=n==null?void 0:n.toString)==null?void 0:l.call(n))||"",i=Oe(t,"default",e,()=>[r]);return N("div",{class:e.class,title:r,style:o},[i])};Nn.displayName="ElTableV2Cell";Nn.inheritAttrs=!1;const Dn=(e,{slots:t})=>Oe(t,"default",e,()=>{var l,n;return[N("div",{class:e.class,title:(l=e.column)==null?void 0:l.title},[(n=e.column)==null?void 0:n.title])]});Dn.displayName="ElTableV2HeaderCell";Dn.inheritAttrs=!1;const Su=Yt({class:String,columns:ul,columnsStyles:{type:He(Object),required:!0},headerIndex:Number,style:{type:He(Object)}}),Ru=Fe({name:"ElTableV2HeaderRow",props:Su,setup(e,{slots:t}){return()=>{const{columns:l,columnsStyles:n,headerIndex:o,style:r}=e;let i=l.map((a,s)=>t.cell({columns:l,column:a,columnIndex:s,headerIndex:o,style:n[a.key]}));return t.header&&(i=t.header({cells:i.map(a=>Lt(a)&&a.length===1?a[0]:a),columns:l,headerIndex:o})),N("div",{class:e.class,style:r,role:"row"},[i])}}}),xu="ElTableV2Header",ku=Fe({name:xu,props:$n,setup(e,{slots:t,expose:l}){const n=lt("table-v2"),o=O(),r=F(()=>Et({width:e.width,height:e.height})),i=F(()=>Et({width:e.rowWidth,height:e.height})),a=F(()=>_r(E(e.headerHeight))),s=c=>{const h=E(o);tt(()=>{h!=null&&h.scroll&&h.scroll({left:c})})},u=()=>{const c=n.e("fixed-header-row"),{columns:h,fixedHeaderData:m,rowHeight:g}=e;return m==null?void 0:m.map((f,p)=>{var b;const w=Et({height:g,width:"100%"});return(b=t.fixed)==null?void 0:b.call(t,{class:c,columns:h,rowData:f,rowIndex:-(p+1),style:w})})},d=()=>{const c=n.e("dynamic-header-row"),{columns:h}=e;return E(a).map((m,g)=>{var f;const p=Et({width:"100%",height:m});return(f=t.dynamic)==null?void 0:f.call(t,{class:c,columns:h,headerIndex:g,style:p})})};return l({scrollToLeft:s}),()=>{if(!(e.height<=0))return N("div",{ref:o,class:e.class,style:E(r),role:"rowgroup"},[N("div",{style:E(i),class:n.e("header")},[d(),u()])])}}}),Tu=e=>{const{isScrolling:t}=vt(In),l=O(!1),n=O(),o=F(()=>it(e.estimatedRowHeight)&&e.rowIndex>=0),r=(s=!1)=>{const u=E(n);if(!u)return;const{columns:d,onRowHeightChange:c,rowKey:h,rowIndex:m,style:g}=e,{height:f}=u.getBoundingClientRect();l.value=!0,tt(()=>{if(s||f!==Number.parseInt(g.height)){const p=d[0],b=(p==null?void 0:p.placeholderSign)===il;c==null||c({rowKey:h,height:f,rowIndex:m},p&&!b&&p.fixed)}})},i=F(()=>{const{rowData:s,rowIndex:u,rowKey:d,onRowHover:c}=e,h=e.rowEventHandlers||{},m={};return Object.entries(h).forEach(([g,f])=>{xn(f)&&(m[g]=p=>{f({event:p,rowData:s,rowIndex:u,rowKey:d})})}),c&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:g,hovered:f})=>{const p=m[g];m[g]=b=>{c({event:b,hovered:f,rowData:s,rowIndex:u,rowKey:d}),p==null||p(b)}}),m}),a=s=>{const{onRowExpand:u,rowData:d,rowIndex:c,rowKey:h}=e;u==null||u({expanded:s,rowData:d,rowIndex:c,rowKey:h})};return wt(()=>{E(o)&&r(!0)}),{isScrolling:t,measurable:o,measured:l,rowRef:n,eventHandlers:i,onExpand:a}},Eu="ElTableV2TableRow",Ou=Fe({name:Eu,props:Dt,setup(e,{expose:t,slots:l,attrs:n}){const{eventHandlers:o,isScrolling:r,measurable:i,measured:a,rowRef:s,onExpand:u}=Tu(e);return t({onExpand:u}),()=>{const{columns:d,columnsStyles:c,expandColumnKey:h,depth:m,rowData:g,rowIndex:f,style:p}=e;let b=d.map((w,y)=>{const v=Lt(g.children)&&g.children.length>0&&w.key===h;return l.cell({column:w,columns:d,columnIndex:y,depth:m,style:c[w.key],rowData:g,rowIndex:f,isScrolling:E(r),expandIconProps:v?{rowData:g,rowIndex:f,onExpand:u}:void 0})});if(l.row&&(b=l.row({cells:b.map(w=>Lt(w)&&w.length===1?w[0]:w),style:p,columns:d,depth:m,rowData:g,rowIndex:f,isScrolling:E(r)})),E(i)){const{height:w,...y}=p||{},v=E(a);return N("div",xe({ref:s,class:e.class,style:v?p:y,role:"row"},n,E(o)),[b])}return N("div",xe(n,{ref:s,class:e.class,style:p,role:"row"},E(o)),[b])}}}),Hu=e=>{const{sortOrder:t}=e;return N(St,{size:14,class:e.class},{default:()=>[t===ut.ASC?N(Ur,null,null):N(qr,null,null)]})},Fu=e=>{const{expanded:t,expandable:l,onExpand:n,style:o,size:r}=e,i={onClick:l?()=>n(!t):void 0,class:e.class};return N(St,xe(i,{size:r,style:o}),{default:()=>[N(Sn,null,null)]})},Iu="ElTableV2Grid",Mu=e=>{const t=O(),l=O(),n=F(()=>{const{data:f,rowHeight:p,estimatedRowHeight:b}=e;if(!b)return f.length*p}),o=F(()=>{const{fixedData:f,rowHeight:p}=e;return((f==null?void 0:f.length)||0)*p}),r=F(()=>wl(e.headerHeight)),i=F(()=>{const{height:f}=e;return Math.max(0,f-E(r)-E(o))}),a=F(()=>E(r)+E(o)>0),s=({data:f,rowIndex:p})=>f[p][e.rowKey];function u({rowCacheStart:f,rowCacheEnd:p,rowVisibleStart:b,rowVisibleEnd:w}){var y;(y=e.onRowsRendered)==null||y.call(e,{rowCacheStart:f,rowCacheEnd:p,rowVisibleStart:b,rowVisibleEnd:w})}function d(f,p){var b;(b=l.value)==null||b.resetAfterRowIndex(f,p)}function c(f,p){const b=E(t),w=E(l);nl(f)?(b==null||b.scrollToLeft(f.scrollLeft),w==null||w.scrollTo(f)):(b==null||b.scrollToLeft(f),w==null||w.scrollTo({scrollLeft:f,scrollTop:p}))}function h(f){var p;(p=E(l))==null||p.scrollTo({scrollTop:f})}function m(f,p){var b;(b=E(l))==null||b.scrollToItem(f,1,p)}function g(){var f,p;(f=E(l))==null||f.$forceUpdate(),(p=E(t))==null||p.$forceUpdate()}return{bodyRef:l,forceUpdate:g,fixedRowHeight:o,gridHeight:i,hasHeader:a,headerHeight:r,headerRef:t,totalHeight:n,itemKey:s,onItemRendered:u,resetAfterRowIndex:d,scrollTo:c,scrollToTop:h,scrollToRow:m}},An=Fe({name:Iu,props:Sl,setup(e,{slots:t,expose:l}){const{ns:n}=vt(In),{bodyRef:o,fixedRowHeight:r,gridHeight:i,hasHeader:a,headerRef:s,headerHeight:u,totalHeight:d,forceUpdate:c,itemKey:h,onItemRendered:m,resetAfterRowIndex:g,scrollTo:f,scrollToTop:p,scrollToRow:b}=Mu(e);l({forceUpdate:c,totalHeight:d,scrollTo:f,scrollToTop:p,scrollToRow:b,resetAfterRowIndex:g});const w=()=>e.bodyWidth;return()=>{const{cache:y,columns:v,data:C,fixedData:x,useIsScrolling:I,scrollbarAlwaysOn:$,scrollbarEndGap:S,scrollbarStartGap:R,style:T,rowHeight:D,bodyWidth:P,estimatedRowHeight:V,headerWidth:j,height:B,width:le,getRowHeight:ie,onScroll:L}=e,q=it(V),ne=q?di:ri,ce=E(u);return N("div",{role:"table",class:[n.e("table"),e.class],style:T},[N(ne,{ref:o,data:C,useIsScrolling:I,itemKey:h,columnCache:0,columnWidth:q?w:P,totalColumn:1,totalRow:C.length,rowCache:y,rowHeight:q?ie:D,width:le,height:E(i),class:n.e("body"),role:"rowgroup",scrollbarStartGap:R,scrollbarEndGap:S,scrollbarAlwaysOn:$,onScroll:L,onItemRendered:m,perfMode:!1},{default:k=>{var z;const Q=C[k.rowIndex];return(z=t.row)==null?void 0:z.call(t,{...k,columns:v,rowData:Q})}}),E(a)&&N(ku,{ref:s,class:n.e("header-wrapper"),columns:v,headerData:C,headerHeight:e.headerHeight,fixedHeaderData:x,rowWidth:j,rowHeight:D,width:le,height:Math.min(ce+E(r),B)},{dynamic:t.header,fixed:t.row})])}}});function $u(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Nu=(e,{slots:t})=>{const{mainTableRef:l,...n}=e;return N(An,xe({ref:l},n),$u(t)?t:{default:()=>[t]})};function Du(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Au=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:l,...n}=e;return N(An,xe({ref:l},n),Du(t)?t:{default:()=>[t]})};function Pu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Lu=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:l,...n}=e;return N(An,xe({ref:l},n),Pu(t)?t:{default:()=>[t]})};function Ku(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const zu=(e,{slots:t})=>{const{columns:l,columnsStyles:n,depthMap:o,expandColumnKey:r,expandedRowKeys:i,estimatedRowHeight:a,hasFixedColumns:s,rowData:u,rowIndex:d,style:c,isScrolling:h,rowProps:m,rowClass:g,rowKey:f,rowEventHandlers:p,ns:b,onRowHovered:w,onRowExpanded:y}=e,v=Kt(g,{columns:l,rowData:u,rowIndex:d},""),C=Kt(m,{columns:l,rowData:u,rowIndex:d}),x=u[f],I=o[x]||0,$=!!r,S=d<0,R=[b.e("row"),v,{[b.e(`row-depth-${I}`)]:$&&d>=0,[b.is("expanded")]:$&&i.includes(x),[b.is("fixed")]:!I&&S,[b.is("customized")]:!!t.row}],T=s?w:void 0,D={...C,columns:l,columnsStyles:n,class:R,depth:I,expandColumnKey:r,estimatedRowHeight:S?void 0:a,isScrolling:h,rowIndex:d,rowData:u,rowKey:x,rowEventHandlers:p,style:c};return N(Ou,xe(D,{onRowExpand:y,onMouseenter:j=>{T==null||T({hovered:!0,rowKey:x,event:j,rowData:u,rowIndex:d})},onMouseleave:j=>{T==null||T({hovered:!1,rowKey:x,event:j,rowData:u,rowIndex:d})},rowkey:x}),Ku(t)?t:{default:()=>[t]})},fn=({columns:e,column:t,columnIndex:l,depth:n,expandIconProps:o,isScrolling:r,rowData:i,rowIndex:a,style:s,expandedRowKeys:u,ns:d,cellProps:c,expandColumnKey:h,indentSize:m,iconSize:g,rowKey:f},{slots:p})=>{const b=Et(s);if(t.placeholderSign===il)return N("div",{class:d.em("row-cell","placeholder"),style:b},null);const{cellRenderer:w,dataKey:y,dataGetter:v}=t,C=xn(v)?v({columns:e,column:t,columnIndex:l,rowData:i,rowIndex:a}):ql(i,y!=null?y:""),x=Kt(c,{cellData:C,columns:e,column:t,columnIndex:l,rowIndex:a,rowData:i}),I={class:d.e("cell-text"),columns:e,column:t,columnIndex:l,cellData:C,isScrolling:r,rowData:i,rowIndex:a},$=ka(w),S=$?$(I):Oe(p,"default",I,()=>[N(Nn,I,null)]),R=[d.e("row-cell"),t.class,t.align===sl.CENTER&&d.is("align-center"),t.align===sl.RIGHT&&d.is("align-right")],T=a>=0&&h&&t.key===h,D=a>=0&&u.includes(i[f]);let P;const V=`margin-inline-start: ${n*m}px;`;return T&&(nl(o)?P=N(Fu,xe(o,{class:[d.e("expand-icon"),d.is("expanded",D)],size:g,expanded:D,style:V,expandable:!0}),null):P=N("div",{style:[V,`width: ${g}px; height: ${g}px;`].join(" ")},null)),N("div",xe({class:R,style:b},x,{role:"cell"}),[P,S])};fn.inheritAttrs=!1;function Wu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Vu=({columns:e,columnsStyles:t,headerIndex:l,style:n,headerClass:o,headerProps:r,ns:i},{slots:a})=>{const s={columns:e,headerIndex:l},u=[i.e("header-row"),Kt(o,s,""),{[i.is("customized")]:!!a.header}],d={...Kt(r,s),columnsStyles:t,class:u,columns:e,headerIndex:l,style:n};return N(Ru,d,Wu(a)?a:{default:()=>[a]})},wo=(e,{slots:t})=>{const{column:l,ns:n,style:o,onColumnSorted:r}=e,i=Et(o);if(l.placeholderSign===il)return N("div",{class:n.em("header-row-cell","placeholder"),style:i},null);const{headerCellRenderer:a,headerClass:s,sortable:u}=l,d={...e,class:n.e("header-cell-text")},c=ka(a),h=c?c(d):Oe(t,"default",d,()=>[N(Dn,d,null)]),{sortBy:m,sortState:g,headerCellProps:f}=e;let p,b;if(g){const v=g[l.key];p=!!cn[v],b=p?v:ut.ASC}else p=l.key===m.key,b=p?m.order:ut.ASC;const w=[n.e("header-cell"),Kt(s,e,""),l.align===sl.CENTER&&n.is("align-center"),l.align===sl.RIGHT&&n.is("align-right"),u&&n.is("sortable")],y={...Kt(f,e),onClick:l.sortable?r:void 0,class:w,style:i,"data-key":l.key};return N("div",xe(y,{role:"columnheader"}),[h,u&&N(Hu,{class:[n.e("sort-icon"),p&&n.is("sorting")],sortOrder:b},null)])},Ha=(e,{slots:t})=>{var l;return N("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Ha.displayName="ElTableV2Footer";const Fa=(e,{slots:t})=>{const l=Oe(t,"default",{},()=>[N(kl,null,null)]);return N("div",{class:e.class,style:e.style},[l])};Fa.displayName="ElTableV2Empty";const Ia=(e,{slots:t})=>{var l;return N("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Ia.displayName="ElTableV2Overlay";function Zt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Bu="ElTableV2",ju=Fe({name:Bu,props:wu,setup(e,{slots:t,expose:l}){const n=lt("table-v2"),{columnsStyles:o,fixedColumnsOnLeft:r,fixedColumnsOnRight:i,mainColumns:a,mainTableHeight:s,fixedTableHeight:u,leftTableWidth:d,rightTableWidth:c,data:h,depthMap:m,expandedRowKeys:g,hasFixedColumns:f,mainTableRef:p,leftTableRef:b,rightTableRef:w,isDynamic:y,isResetting:v,isScrolling:C,bodyWidth:x,emptyStyle:I,rootStyle:$,headerWidth:S,footerHeight:R,showEmpty:T,scrollTo:D,scrollToLeft:P,scrollToTop:V,scrollToRow:j,getRowHeight:B,onColumnSorted:le,onRowHeightChange:ie,onRowHovered:L,onRowExpanded:q,onRowsRendered:ne,onScroll:ce,onVerticalScroll:k}=Cu(e);return l({scrollTo:D,scrollToLeft:P,scrollToTop:V,scrollToRow:j}),Ao(In,{ns:n,isResetting:v,isScrolling:C}),()=>{const{cache:z,cellProps:Q,estimatedRowHeight:ue,expandColumnKey:Ee,fixedData:de,headerHeight:Se,headerClass:Pe,headerProps:qe,headerCellProps:Be,sortBy:ze,sortState:We,rowHeight:De,rowClass:Ge,rowEventHandlers:Z,rowKey:X,rowProps:re,scrollbarAlwaysOn:ve,indentSize:pe,iconSize:M,useIsScrolling:_,vScrollbarSize:ee,width:be}=e,$e=E(h),je={cache:z,class:n.e("main"),columns:E(a),data:$e,fixedData:de,estimatedRowHeight:ue,bodyWidth:E(x)+ee,headerHeight:Se,headerWidth:E(S),height:E(s),mainTableRef:p,rowKey:X,rowHeight:De,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,useIsScrolling:_,width:be,getRowHeight:B,onRowsRendered:ne,onScroll:ce},Ie=E(d),Me=E(u),nt={cache:z,class:n.e("left"),columns:E(r),data:$e,estimatedRowHeight:ue,leftTableRef:b,rowHeight:De,bodyWidth:Ie,headerWidth:Ie,headerHeight:Se,height:Me,rowKey:X,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,useIsScrolling:_,width:Ie,getRowHeight:B,onScroll:k},J=E(c)+ee,oe={cache:z,class:n.e("right"),columns:E(i),data:$e,estimatedRowHeight:ue,rightTableRef:w,rowHeight:De,bodyWidth:J,headerWidth:J,headerHeight:Se,height:Me,rowKey:X,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,width:J,style:`--${E(n.namespace)}-table-scrollbar-size: ${ee}px`,useIsScrolling:_,getRowHeight:B,onScroll:k},me=E(o),ge={ns:n,depthMap:E(m),columnsStyles:me,expandColumnKey:Ee,expandedRowKeys:E(g),estimatedRowHeight:ue,hasFixedColumns:E(f),rowProps:re,rowClass:Ge,rowKey:X,rowEventHandlers:Z,onRowHovered:L,onRowExpanded:q,onRowHeightChange:ie},ke={cellProps:Q,expandColumnKey:Ee,indentSize:pe,iconSize:M,rowKey:X,expandedRowKeys:E(g),ns:n},Te={ns:n,headerClass:Pe,headerProps:qe,columnsStyles:me},Ye={ns:n,sortBy:ze,sortState:We,headerCellProps:Be,onColumnSorted:le},_e={row:ot=>N(zu,xe(ot,ge),{row:t.row,cell:at=>{let xt;return t.cell?N(fn,xe(at,ke,{style:me[at.column.key]}),Zt(xt=t.cell(at))?xt:{default:()=>[xt]}):N(fn,xe(at,ke,{style:me[at.column.key]}),null)}}),header:ot=>N(Vu,xe(ot,Te),{header:t.header,cell:at=>{let xt;return t["header-cell"]?N(wo,xe(at,Ye,{style:me[at.column.key]}),Zt(xt=t["header-cell"](at))?xt:{default:()=>[xt]}):N(wo,xe(at,Ye,{style:me[at.column.key]}),null)}})},rt=[e.class,n.b(),n.e("root"),{[n.is("dynamic")]:E(y)}],yt={class:n.e("footer"),style:E(R)};return N("div",{class:rt,style:E($)},[N(Nu,je,Zt(_e)?_e:{default:()=>[_e]}),N(Au,nt,Zt(_e)?_e:{default:()=>[_e]}),N(Lu,oe,Zt(_e)?_e:{default:()=>[_e]}),t.footer&&N(Ha,yt,{default:t.footer}),E(T)&&N(Fa,{class:n.e("empty"),style:E(I)},{default:t.empty}),t.overlay&&N(Ia,{class:n.e("overlay")},{default:t.overlay})])}}}),_u=Yt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:He(Function)}}),Uu=Fe({name:"ElAutoResizer",props:_u,setup(e,{slots:t}){const l=lt("auto-resizer"),{height:n,width:o,sizer:r}=yu(e),i={width:"100%",height:"100%"};return()=>{var a;return N("div",{ref:r,class:l.b(),style:i},[(a=t.default)==null?void 0:a.call(t,{height:n.value,width:o.value})])}}}),qu=Rn(ju);Rn(Uu);function Ma(e,t){if(e!=null){if(typeof e=="function")return e(t);if(typeof e=="string"&&e)return e}}function Gu(e,t){const l=["ele-table-tr"],n=Ma(e,t);return n!=null&&l.push(n),l.join(" ")}function Yu(e,t,l){const n=["ele-table-head-tr"];l&&n.push("is-ellipsis");const o=Ma(e,t);return o!=null&&n.push(o),n.join(" ")}function $a(e,t,l){return e?{effect:t,...l||{},...e===!0?{}:e}:!1}function Na(e,t){return e===!1||e==null&&!t?!1:{...!t||t===!0?{}:t,...!e||e===!0?{}:e}}function Xu(e,t){const l=Na(e,t);if(!l)return!1;const n=["ele-popper","ele-tooltip","ele-table-tooltip"];return l.popperClass&&n.push(l.popperClass),l.popperClass=n.join(" "),l}function Ju(e,t,l){var n,o;if(e==null)return;const r=(n=E(e))==null?void 0:n.store,i=E((o=r==null?void 0:r.states)==null?void 0:o.selection);i.indexOf(t)!==-1||i.push(t),r.updateAllSelected()}function Zu(e){var t,l;const n=(l=(t=E(e))==null?void 0:t.store)==null?void 0:l.states,o=E(n==null?void 0:n.columns),r=E(n==null?void 0:n.filters);if(!r||!o)return;const i=Object.keys(r),a={};return o.forEach(s=>{i.includes(s.id)&&(a[s.columnKey||s.id]=r[s.id])}),a}function Qu(e,t,l){if(!t&&!l)return{cols:e};const n=l==null?[]:Object.keys(l),o=t!=null&&t.prop!=null&&t.prop!="";let r=!1;return{cols:kn(e,a=>{var c;o&&a.prop===t.prop&&(r=!0);const s=(c=a.columnKey)!=null?c:a.prop,d=(s?n.includes(s):!1)&&l?l[s]:void 0;return{...a,filteredValue:d!=null?d:a.filteredValue}}),sorter:o&&r?t:void 0}}function ed(e){const t=bt(e,l=>l.type==="selection");if(t!=null)return typeof t.selectable=="function"?t.selectable:null}function td(e,t,l){const n=ed(l);return typeof n>"u"?!0:!(n==null||n(e,t)===!0)}function hn(e){let t=!1;return Ae(e,l=>{if(l.type==="selection")return t=!!l.reserveSelection,!1}),t}function Ol(e){return e===!0||e==="left"?0:e==="right"?2:1}function ld(e){const t=[];return e.type==="index"&&t.push("is-index"),e.className&&t.push(e.className),t.length?t.join(" "):void 0}function nd(e){const t=["ele-table-filter-popper"];return e&&t.push(e),t.join(" ")}function At(e,t){const l=[];return e&&e.forEach(n=>{const o=Ke(n,t);o!=null&&l.push(o)}),l}function hl(e,t,l,n){return bt(t,o=>Ke(o,l)===e,n)}function So(e,t,l){const n=[],o=[];return Ae(e,r=>{n.push(Ke(r,t)),o.push(r)},l),[n,o]}function Hl(e,t){return!(e==null&&t==null||e===t)}function ht(e,t){const l=e==null||!e.length,n=t==null||!t.length;return l&&n?!1:l!==n||e.length!==t.length?!0:e.some(o=>!t.includes(o))}function Da(){const e=Gr(),t=F(()=>e.fixedHeader),l=F(()=>e.maximized&&e.maximized!=="expanded");return{isLayoutFixedHead:t,isLayoutMaximized:l}}function Aa(e){return{clearSelection:()=>{const l=e();l&&l.clearSelection()},getSelectionRows:()=>{const l=e();if(l)return l.getSelectionRows()},toggleRowSelection:(l,n)=>{const o=e();o&&o.toggleRowSelection(l,n)},toggleAllSelection:()=>{const l=e();l&&l.toggleAllSelection()},toggleRowExpansion:(l,n)=>{const o=e();o&&o.toggleRowExpansion(l,n)},setCurrentRow:l=>{const n=e();n&&n.setCurrentRow(l)},clearSort:()=>{const l=e();l&&l.clearSort()},clearFilter:l=>{const n=e();n&&n.clearFilter(l)},doLayout:()=>{const l=e();l&&l.doLayout()},sort:(l,n)=>{const o=e();o&&o.sort(l,n)},scrollTo:(l,n)=>{const o=e();o&&o.scrollTo(l,n)},setScrollTop:l=>{const n=e();n&&n.setScrollTop(l)},setScrollLeft:l=>{const n=e();n&&n.setScrollLeft(l)},setCurrentRowKey:l=>{const n=e();n&&n.setCurrentRowKey(l)},getCurrentRow:()=>{const l=e();if(l)return l.getCurrentRow()},setSelectedRows:l=>{const n=e();n&&n.setSelectedRows(l)},setSelectedRowKeys:(l,n)=>{const o=e();o&&o.setSelectedRowKeys(l,n)},toggleRowExpansionAll:l=>{const n=e();n&&n.toggleRowExpansionAll(l)},updateSelectedAndChecked:()=>{const l=e();l&&l.updateSelectedAndChecked()}}}function Pn(e){return{onSelect:(t,l)=>{e("select",t,l)},onSelectAll:t=>{e("selectAll",t)},onCellMouseEnter:(t,l,n,o)=>{e("cellMouseEnter",t,l,n,o)},onCellMouseLeave:(t,l,n,o)=>{e("cellMouseLeave",t,l,n,o)},onCellClick:(t,l,n,o)=>{e("cellClick",t,l,n,o)},onCellDblclick:(t,l,n,o)=>{e("cellDblclick",t,l,n,o)},onCellContextmenu:(t,l,n,o)=>{e("cellContextmenu",t,l,n,o)},onRowClick:(t,l,n)=>{e("rowClick",t,l,n)},onRowContextmenu:(t,l,n)=>{e("rowContextmenu",t,l,n)},onRowDblclick:(t,l,n)=>{e("rowDblclick",t,l,n)},onHeaderClick:(t,l)=>{e("headerClick",t,l)},onHeaderContextmenu:(t,l)=>{e("headerContextmenu",t,l)},onHeaderDragend:(t,l,n,o)=>{e("headerDragend",t,l,n,o)},onExpandChange:(t,l)=>{e("expandChange",t,l)},onSelectionChange:t=>{e("selectionChange",t)},onSortChange:t=>{e("sortChange",t)},onFilterChange:t=>{e("filterChange",t)},onCurrentChange:(t,l)=>{e("currentChange",t,l)},"onUpdate:currentRowKey":t=>{e("update:currentRowKey",t)},"onUpdate:selectedRowKeys":t=>{e("update:selectedRowKeys",t)}}}const Pa=Ut(wa,["style"]),Nl={...Pa,stripe:{type:Boolean,default:null},border:{type:Boolean,default:null},rowKey:{type:[String,Function],required:!0},columns:{type:Array,required:!0},pageIndex:Number,errorText:String,headerEllipsis:{type:Boolean,default:!0},slotNormalize:{type:Boolean,default:!0},sticky:Boolean,bottomLine:{type:Boolean,default:!0},emptyProps:{type:[Boolean,Object],default:()=>null},rowClickChecked:[Boolean,String],reserveCurrent:Boolean,selectedRowKeys:Array,cacheData:Array},Ln={select:(e,t)=>!0,selectAll:e=>!0,selectionChange:e=>!0,cellMouseEnter:(e,t,l,n)=>!0,cellMouseLeave:(e,t,l,n)=>!0,cellClick:(e,t,l,n)=>!0,cellDblclick:(e,t,l,n)=>!0,cellContextmenu:(e,t,l,n)=>!0,rowClick:(e,t,l)=>!0,rowContextmenu:(e,t,l)=>!0,rowDblclick:(e,t,l)=>!0,headerClick:(e,t)=>!0,headerContextmenu:(e,t)=>!0,sortChange:e=>!0,filterChange:e=>!0,currentChange:(e,t)=>!0,headerDragend:(e,t,l,n)=>!0,expandChange:(e,t)=>!0,"update:currentRowKey":e=>!0,"update:selectedRowKeys":e=>!0},od=Object.keys(Pa),ad=Object.keys(Nl),zl=["default","append","empty"],rd=Fe({name:"EleDataTable",components:{ElTable:yo,ElEmpty:kl},props:Nl,emits:Ln,setup(e,{emit:t,slots:l,expose:n}){var ce;const o=Pn(t),r=Aa(()=>u.value),{isLayoutFixedHead:i,isLayoutMaximized:a}=Da(),s={sorter:e.defaultSort,key:null,checkedKeys:[],checked:[],reserveChecked:hn(e.columns)},u=O(null),d=O((ce=e.columns)!=null?ce:[]),c=F(()=>$a(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions)),h=F(()=>{var k;return((k=e.treeProps)==null?void 0:k.children)||"children"}),m=F(()=>{const k=od.filter(z=>!["currentRowKey","showOverflowTooltip","tooltipOptions","tooltipEffect"].includes(z));return{...Po(e,k),...Ut(o,["onUpdate:currentRowKey","onUpdate:selectedRowKeys","onRowClick","onHeaderClick","onSortChange","onFilterChange","onCurrentChange","onSelect","onSelectAll","onSelectionChange"])}}),g=(k,z,Q)=>{if(e.rowClickChecked&&!td(k,e.data.indexOf(k),e.columns)){const ue=r.getSelectionRows();if(e.rowClickChecked==="smart"&&(!ue||!ue.length||ue.length===1)){const Ee=Ke(k,e.rowKey);B(Ee==null?[]:[Ee])}else $(k)}o.onRowClick(k,z,Q)},f=(k,z)=>{if(k.sortable&&k.filters){const Q=z.currentTarget;if(Q){const ue=Q.querySelector(".caret-wrapper");ue&&ue.dispatchEvent(new MouseEvent("click"))}}o.onHeaderClick(k,z)},p=k=>{const z=s.sorter;z&&k.prop===z.prop&&k.order===z.order||(s.sorter=k,o.onSortChange(k))},b=k=>{var z;s.filter=(z=Zu(u.value))!=null?z:k,o.onFilterChange(s.filter)},w=(k,z)=>{k!=null&&k!==z&&j(Ke(k,e.rowKey),k)},y=(k,z)=>{o.onSelect(k,z),B(At(k,e.rowKey),k)},v=k=>{B(At(k,e.rowKey),k),o.onSelectAll(k)},C=()=>{var k;const z=(k=u.value)==null?void 0:k.scrollBarRef;z&&typeof z.update=="function"&&z.update()},x=()=>{r.clearSort(),s.sorter={}},I=()=>{B([])},$=(k,z)=>{r.toggleRowSelection(k,z);const Q=r.getSelectionRows()||[];B(At(Q,e.rowKey),Q)},S=k=>{j(Ke(k,e.rowKey),k)},R=k=>{j(k)},T=()=>s.row,D=k=>{k&&B(At(k,e.rowKey),k,!!k.length)},P=k=>{k&&B(k)},V=k=>{Ae(e.data,z=>{var Q;(Q=z[h.value])!=null&&Q.length&&r.toggleRowExpansion(z,k)},h.value)},j=(k,z)=>{if(!Hl(s.key,k)){k!=null&&z!=null&&(s.row!==z&&(s.row=z,o.onCurrentChange(z,s.oldRow)),r.setCurrentRow(z));return}if(k!=null){const Q=hl(k,e.data,e.rowKey,h.value);if(Q!=null||e.reserveCurrent){s.oldRow=s.row,s.row=Q||z||void 0,s.row==null&&e.cacheData!=null&&(s.row=hl(k,e.cacheData,e.rowKey,h.value)),s.key=k,r.setCurrentRow(Q),ie(k),o.onCurrentChange(s.row,s.oldRow);return}}s.key!=null&&(s.oldRow=s.row,s.row=void 0,s.key=null,r.setCurrentRow(null),ie(),o.onCurrentChange(void 0,s.oldRow))},B=(k,z,Q)=>{if(!Q&&!ht(s.checkedKeys,k))return;const[ue,Ee]=So(e.data,e.rowKey,h.value),[de,Se]=So(e.cacheData,e.rowKey,h.value),Pe=z?z.map(De=>Ke(De,e.rowKey)):[],qe=s.checked.map(De=>Ke(De,e.rowKey)),Be=[],ze=[];k.forEach(De=>{const Ge=ue.indexOf(De);if(Ge!==-1)Be.push(De),ze.push(Ee[Ge]);else if(s.reserveChecked){if(Be.push(De),z!=null){const X=Pe.indexOf(De);if(X!==-1&&!z[X]._isMock){ze.push(z[X]);return}}if(e.cacheData!=null){const X=de.indexOf(De);if(X!==-1){ze.push(Se[X]);return}}const Z=qe.indexOf(De);if(Z!==-1){ze.push(s.checked[Z]);return}typeof e.rowKey=="string"&&ze.push({[e.rowKey]:De,_isMock:!0})}});const We=ht(s.checked,ze);s.checked=ze,s.checkedKeys=Be,(We||Q&&ht(r.getSelectionRows(),ze))&&(r.clearSelection(),ze.forEach(De=>{Ju(u.value,De)})),L(Be),We&&o.onSelectionChange(ze)},le=()=>{const k=s.key;if(k!=null){const z=hl(k,e.data,e.rowKey,h.value);if(z!=null)j(k,z);else if(!e.reserveCurrent)j(null);else if(e.cacheData!=null){const Q=hl(k,e.cacheData,e.rowKey,h.value);Q!=null&&j(k,Q)}}s.checkedKeys.length&&B(s.checkedKeys,void 0,!0)},ie=k=>{Hl(e.currentRowKey,k)&&o["onUpdate:currentRowKey"](k)},L=k=>{const z=e.selectedRowKeys||[];ht(z,k)&&o["onUpdate:selectedRowKeys"](k)};ye(()=>e.columns,k=>{if(s.reserveChecked=hn(k),!k)d.value=[];else{const{cols:z,sorter:Q}=Qu(k,s.sorter,s.filter);d.value=z,tt(()=>{r.doLayout(),C(),Q&&r.sort(Q.prop,Q.order||"ascending")})}},{deep:!0}),ye([()=>e.data,()=>e.cacheData],()=>{tt(()=>{le()})}),ye(()=>e.currentRowKey,k=>{j(k)}),ye(()=>e.selectedRowKeys,k=>{B(k||[])},{deep:!0}),wt(()=>{e.currentRowKey!=null&&j(e.currentRowKey),e.selectedRowKeys!=null&&e.selectedRowKeys.length&&B(e.selectedRowKeys)});const q={...r,clearSort:x,clearSelection:I,toggleRowSelection:$,setCurrentRow:S,setCurrentRowKey:R,getCurrentRow:T,setSelectedRows:D,setSelectedRowKeys:P,toggleRowExpansionAll:V,updateSelectedAndChecked:le,tableRef:u};n(q);const ne=k=>{var z,Q,ue,Ee;return N(du,xe(Ut(k,["showOverflowTooltip","filterClassName","columnKey","className","uid","slot","headerSlot","hideInTable","hideInSetting","hideInExport","hideInPrint","printSlot","children"]),{key:(Q=(z=k.uid)!=null?z:k.columnKey)!=null?Q:k.prop,index:(ue=k.index)!=null?ue:e.pageIndex,className:ld(k),columnKey:(Ee=k.columnKey)!=null?Ee:k.prop,filterClassName:nd(k.filterClassName),showOverflowTooltip:Xu(k.showOverflowTooltip,c.value)}),{header:de=>{var Se,Pe,qe;return k.headerSlot&&!zl.includes(k.headerSlot)&&l[k.headerSlot]?(Se=l[k.headerSlot])==null?void 0:Se.call(l,de):N("div",{class:"ele-cell-title",title:(Pe=de==null?void 0:de.column)==null?void 0:Pe.label},[(qe=de==null?void 0:de.column)==null?void 0:qe.label])},"filter-icon":de=>{var Se;return k.filterIcon?typeof k.filterIcon=="string"&&!zl.includes(k.filterIcon)&&l[k.filterIcon]?(Se=l[k.filterIcon])==null?void 0:Se.call(l,de):he(k.filterIcon):N(Lo,null,null)},default:de=>{var Se;return k.slot&&!zl.includes(k.slot)&&l[k.slot]&&(!e.slotNormalize||(de==null?void 0:de.$index)!=-1)?(Se=l[k.slot])==null?void 0:Se.call(l,de):k.children&&k.children.length?k.children.map(ne):void 0}})};return()=>N(yo,xe(m.value,{ref:u,emptyText:e.errorText||e.emptyText,rowClassName:k=>Gu(e.rowClassName,k),headerRowClassName:k=>Yu(e.headerRowClassName,k,e.headerEllipsis),class:["ele-data-table",{"is-sticky":e.sticky},{"is-layout-fixed-head":e.sticky&&i.value},{"is-layout-maximized":e.sticky&&a.value},{"is-sticky":e.sticky},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine}],onRowClick:g,onHeaderClick:f,onSortChange:p,onFilterChange:b,onCurrentChange:w,onSelect:y,onSelectAll:v}),{append:l.append?k=>{var z;return(z=l.append)==null?void 0:z.call(l,k)}:void 0,empty:l.empty?()=>{var k;return(k=l.empty)==null?void 0:k.call(l,{text:e.emptyText,error:e.errorText})}:e.emptyProps?()=>N(kl,xe({imageSize:68},!e.emptyProps||e.emptyProps===!0?{}:e.emptyProps,{description:e.errorText||e.emptyText,class:"ele-table-empty"}),null):void 0,default:()=>d.value.map(ne)})}});function sd(e,t){return t!=null&&t>0?t:e==="small"?34:e==="large"?50:42}function Ot(e){var t,l,n;return e&&(n=(l=(t=e.columnKey)!=null?t:e.property)!=null?l:e.prop)!=null?n:""}function Fl(e,t){if(typeof e=="number")return e<0?t:e;if(e==null||e===""||e==="auto"||e.endsWith("%"))return t;const l=Number.parseInt(e);return isNaN(l)?t:l}function id(e,t,l,n){const o=Fl(t),r=Fl(e);return r!=null?o==null||r<=o?r:o:Math.max(n,l)}function Ro(e){let t,l;e.forEach((n,o)=>{const r=n.originalCol;r&&(r.fixed==="left"||r.fixed===!0?t=o:l==null&&r.fixed==="right"&&(l=o))}),t!=null&&(e[t].isFixedLeftLast=!0),l!=null&&(e[l].isFixedRightFirst=!0)}function La(e,t,l,n,o){l[n]==null&&(l[n]=[]),e.forEach(r=>{var u;const i=Ot(r),a=Ut(r,["children"]);o!=null&&o.originalCol!=null&&(a.fixed=o.originalCol.fixed);const s={key:i,originalCol:a};if(r.children&&r.children.length)s.rowspan=1,s.colspan=r.children.length,La(r.children,t,l,n+1,s),o&&o.colspan!=null&&(o.colspan+=s.colspan-1);else{s.colspan=1;const d={width:Fl(r.width),minWidth:Fl(r.minWidth,80),key:i,dataKey:(u=r.property)!=null?u:r.prop,originalCol:a};t.push(d)}l[n].push(s)})}function Ka(e){const t=[],l=[];if(!e||!e.length)return{cols:t,rows:l};const n=[...e];n.sort((o,r)=>Ol(o.fixed)-Ol(r.fixed)),La(n,t,l,0),Ro(t),l.forEach((o,r)=>{o.forEach(i=>{i!=null&&i.rowspan==null&&(i.rowspan=l.length-r)})});for(let o=0;o<l.length;o++)for(let r=0;r<l[o].length;r++){const i=l[o][r];if(i.colspan!=null&&i.colspan>1)for(let a=1;a<i.colspan;a++)l[o].splice(r+a,0,{colspan:0,rowspan:1});if(i.rowspan!=null&&i.rowspan>1)for(let a=1;a<i.rowspan;a++)l[o+a].splice(r,0,{colspan:1,rowspan:0,originalCol:i.originalCol})}return l.forEach(o=>{Ro(o)}),{cols:t,rows:l}}function ud(e,t,l,n){if(e.width!=null)return e.width;if(e.minWidth==null)return 0;const o=t-l;return o<=n?e.minWidth:Math.floor(e.minWidth/n*o)}function xo(e,t){let l=0;e.forEach((o,r)=>{const i=o.originalCol;i&&(i.fixed==="left"||i.fixed===!0)&&(t[r].fixedLeft=l+"px",t[r].width&&(l+=t[r].width))});let n=0;for(let o=e.length-1;o>=0;o--){const r=e[o].originalCol;r&&r.fixed==="right"&&(t[o].fixedRight=n+"px",t[o].width&&(n+=t[o].width))}}function dd(e,t,l){let n=!0,o=0,r=0;e.forEach(d=>{if(d.width==null){n=!1,d.minWidth!=null&&(r+=d.minWidth);return}o+=d.width});const i=n?Math.min(l,o):l,a=[];let s=0;e.forEach((d,c)=>{const h=ud(d,i,o,r);s+=h,a[c]={width:h},c===e.length-1&&i>s&&(a[c].width=h+i-s,s=i)}),xo(e,a);const u=[];return t.forEach(d=>{const c=[];d.forEach((h,m)=>{if(!e[m]||!h.colspan){c[m]={width:0};return}let g=a[m].width||0;if(h.colspan>1){const f=m+h.colspan;for(let p=m+1;p<f;p++)a[p]&&a[p].width&&(g+=a[p].width)}c[m]={width:g}}),u.push(c),xo(d,c)}),{width:i,colSizes:a,rowSizes:u,sumWidth:s}}function cd(e,t){if(e.length!==t.length)return!0;for(let l=0;l<e.length;l++)if(e[l].width!==t[l].width)return!0;return!1}function fd(e,t){return e.map((n,o)=>({title:n.originalCol?n.originalCol.label:void 0,width:t[o].width,key:n.key,dataKey:n.dataKey})).filter(n=>!!n.width)}function ko(e,t,l,n,o,r){if(!e||!e.length)return[];if(t)return e.map((a,s)=>{var c;const u=(c=Ke(a,o))!=null?c:s,d={rowId:"_expand_"+u,rowIndex:s,rowData:a,isExpandRow:!0};return{rowId:u,rowIndex:s,rowData:a,isDisabled:!(r==null||r(a,i)===!0),children:[d]}});let i=-1;return kn(e,a=>{var s;return i++,{rowId:(s=Ke(a,o))!=null?s:i,rowIndex:i,rowData:a,isDisabled:!(r==null||r(a,i)===!0),hasChildren:a[n]===!0}},l)}function Qt(e,t,l,n){return l==null?bt(t,o=>o.rowId===e&&!o.isExpandRow):bt(t,o=>Ke(o,l)===e,n)}function ml(e,t,l){const n=[],o=[];return Ae(e,r=>{const i=t==null;(!i||!r.isExpandRow)&&(n.push(i?r.rowId:Ke(r,t)),o.push(r))},l),[n,o]}function hd(e,t,l){if(e)return!0;let n=!0;for(const o of t){const r=o.originalCol;if(r&&r.type!=="selection"&&r.type!=="expand"){if(r.showOverflowTooltip==null)n=!1;else if(r.showOverflowTooltip===!1)return!0}}return n?!1:l==null||l===!1}function Xt(e,t){var l,n;if(typeof e.render=="function"&&e.params!=null){const o=e.render(...e.params);if(o!=null)return Array.isArray(o)?o:[o]}return(n=(l=t.slots).default)==null?void 0:n.call(l)}function md(e,t){const l=Ot(t);if(e==null||e.order==null||e.key!==l)return{key:l,order:ut.ASC};if(e.order!==ut.DESC)return{key:l,order:ut.DESC}}function gd(e){if(e==="ascending")return ut.ASC;if(e==="descending")return ut.DESC}function za(e){if(e!=null){if(e===ut.ASC)return"ascending";if(e===ut.DESC)return"descending"}}function vd(e){if(!e)return;const{prop:t,order:l}=e;if(!(!t||!l||!["ascending","descending"].includes(l)))return{key:t,order:l==="ascending"?ut.ASC:ut.DESC}}function pd(e){const t={};return Ae(e,l=>{const n=Ot(l);n&&l.filteredValue!=null&&l.filteredValue.length&&(t[n]=l.filteredValue)}),t}function yd(e,t){var n;if(!e)return;if(!t)return e.filteredValue;const l=Ot(e);return l&&(n=t[l])!=null?n:e.filteredValue}function To(e){for(const t of e){const l=t.originalCol;if(l&&l.type==="selection")return typeof l.selectable=="function"?l.selectable:null}}function Cd(e){const{children:t,hasChildren:l}=e||{};return{childrenName:t||"children",hasChildrenName:l||"hasChildren"}}function Wa(e,t,l){return t==null?String((l!=null?l:1)+e):String(typeof t=="function"?t(e):t+e)}function Va(e,t){var l;const n={rowspan:1,colspan:1},o=(l=e.column)==null?void 0:l.type;if((!o||!["index","selection","expand"].includes(o))&&typeof t=="function"){const r=t(e);if(r!=null)if(Array.isArray(r)){const[i,a]=r;i!=null&&(n.rowspan=i),a!=null&&(n.colspan=a)}else r.rowspan!=null&&(n.rowspan=r.rowspan),r.colspan!=null&&(n.colspan=r.colspan)}return n}function Ba(e,t,l){if(typeof e!="function"||t==null||l==null)return;const n=t.map(o=>({...o.originalCol||{},property:o.dataKey}));return e({columns:n,data:l})}function ja(e,t,l,n){if(l===0)return n!=null?n:"Sum";if(!e||!t)return"";let o=0;for(const r of e){const i=Number(Ke(r,t));if(Number.isNaN(i))return"";o+=i}return String(o)}function bd(e,t,l){let n;return e!=null&&t!=null&&Ae(e,o=>{if(l!=null){if(o.property===l||o.prop===l)return n=o,!1}else if(Ot(o)===t)return n=o,!1}),n}function wd(e){const t=e.querySelector(".ele-table-cell");return Xr(t,"horizontal")}function Sd(e){const t=O(0),l=O(0),n=()=>{const a=e();if(a){const s=Math.floor(a.clientWidth);t.value!==s&&(t.value=s);const u=Math.floor(a.clientHeight);t.value!==u&&(l.value=u)}},o=new ResizeObserver(Yr(()=>{n()},400)),r=()=>{i();const a=e();a&&o.observe(a)},i=()=>{const a=e();a&&o.unobserve(a)};return wt(()=>{n(),r()}),Cn(()=>{o.disconnect()}),Ko(()=>{n(),r()}),zo(()=>{i()}),{wrapWidth:t,wrapHeight:l,updateWrapSize:n}}const Rd=Fe({name:"CellCheckbox",components:{ElCheckbox:gt},props:{checked:Boolean,indeterminate:Boolean,disabled:Boolean,size:String},emits:{change:e=>!0},setup(e,{emit:t}){return{handleUpdateModelValue:n=>{e.checked!==n&&t("change",n)}}}}),xd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function kd(e,t,l,n,o,r){const i=W("ElCheckbox");return A(),se(i,{modelValue:e.checked,indeterminate:e.indeterminate,disabled:e.disabled,size:e.size,"onUpdate:modelValue":e.handleUpdateModelValue},null,8,["modelValue","indeterminate","disabled","size","onUpdate:modelValue"])}const _a=xd(Rd,[["render",kd]]),Td=Fe({name:"CellFilter",components:{ElIcon:St,ElButton:Tn,ElScrollbar:yn,ElCheckboxGroup:Jr,ElCheckbox:gt,EleTooltip:En,FilterFilled:Lo},props:{filtered:Array,filterMultiple:Boolean,filters:Array,filterPlacement:{type:String,default:"bottom-start"}},emits:{change:e=>!0},setup(e,{emit:t}){const{t:l}=Ml(),n=O(null),o=O([]),r=F(()=>l("el.table.clearFilter")),i=F(()=>{if(!(!e.filtered||!e.filtered.length))return e.filtered[0]}),a=F(()=>l("el.table.confirmFilter")),s=F(()=>l("el.table.resetFilter")),u=()=>{n.value&&n.value.hide()},d=()=>{var f;o.value=(f=e.filtered)!=null?f:[]},c=f=>{h(f==null?[]:[f]),u()},h=f=>{t("change",f)};return{popperRef:n,checkedValue:o,clearFilterText:r,filteredValue:i,confirmText:a,resetText:s,handleItemClick:c,handleFilterChange:h,handleConfirm:()=>{h(o.value),u()},handleReset:()=>{o.value=[],h([]),u()},handleBeforeEnter:d}}}),Ed=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Od={class:"ele-table-filter-footer"},Hd={key:1,class:"ele-table-filter-list"},Fd=["onClick"];function Id(e,t,l,n,o,r){const i=W("FilterFilled"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("ElCheckboxGroup"),d=W("ElScrollbar"),c=W("ElButton"),h=W("EleTooltip");return A(),Y("div",{class:"ele-table-filter",onClick:t[2]||(t[2]=$l(()=>{},["stop"]))},[N(h,{ref:"popperRef",trigger:"click",showArrow:!1,placement:e.filterPlacement,popperClass:"ele-table-filter-popper",gpuAcceleration:!0,effect:"light",isPopover:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,4]}}]},onBeforeShow:e.handleBeforeEnter},{body:G(()=>[e.filterMultiple?(A(),Y(Ne,{key:0},[N(d,{class:"ele-table-filter-body"},{default:G(()=>[N(u,{modelValue:e.checkedValue,"onUpdate:modelValue":t[0]||(t[0]=m=>e.checkedValue=m)},{default:G(()=>[(A(!0),Y(Ne,null,Le(e.filters,m=>(A(),se(s,{key:m.value,value:m.value,label:m.text},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),we("div",Od,[N(c,{size:"small",text:!0,onClick:e.handleReset},{default:G(()=>[Ct(Ve(e.resetText),1)]),_:1},8,["onClick"]),N(c,{size:"small",type:"primary",disabled:!e.checkedValue.length,onClick:e.handleConfirm},{default:G(()=>[Ct(Ve(e.confirmText),1)]),_:1},8,["disabled","onClick"])])],64)):(A(),Y("div",Hd,[we("div",{class:Re(["ele-table-filter-item",{"is-active":e.filteredValue==null}]),onClick:t[1]||(t[1]=m=>e.handleItemClick())},Ve(e.clearFilterText),3),(A(!0),Y(Ne,null,Le(e.filters,m=>(A(),Y("div",{key:m.value,class:Re(["ele-table-filter-item",{"is-active":e.filteredValue===m.value}]),onClick:g=>e.handleItemClick(m.value)},Ve(m.text),11,Fd))),128))]))]),default:G(()=>[N(a,null,{default:G(()=>[N(i)]),_:1})]),_:1},8,["placement","onBeforeShow"])])}const Md=Ed(Td,[["render",Id]]),$d=Fe({name:"HeaderCell",components:{CellCheckbox:_a,CellFilter:Md,CellRender:Xt},props:{column:Object,columnIndex:Number,headerIndex:Number,colSize:Object,sortBy:Object,filterValue:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,click:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=F(()=>e.column?e.column.originalCol:void 0),o=F(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.headerIndex})),r=F(()=>{const f=["el-table-v2__header-cell","ele-table-td"];e.column&&(e.column.colspan?e.column.colspan>1&&f.push("is-multi-cell"):f.push("is-none"),e.column.rowspan?e.column.rowspan>1&&f.push("is-multi-row"):f.push("is-placeholder"));const p=n.value;if(p){const b=p.headerAlign||p.align;if(b&&f.push("is-align-"+b),(p.sortable===!0||p.sortable==="custom")&&f.push("is-sortable"),e.sortBy!=null&&Ot(p)===e.sortBy.key){const w=za(e.sortBy.order);w&&f.push("is-"+w)}if(p.filters&&p.filters.length&&e.filterValue&&e.filterValue.length&&f.push("is-filtered"),p.type==="selection"&&f.push("is-selection"),p.type==="expand"&&f.push("is-expand"),e.headerEllipsis&&f.push("is-ellipsis"),p.fixed==="right"?f.push("is-fixed-right"):(p.fixed==="left"||p.fixed===!0)&&f.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&f.push("is-fixed-left-last"),e.column.isFixedRightFirst&&f.push("is-fixed-right-first")),typeof e.headerCellClass=="function"){const w=e.headerCellClass(o.value);w&&f.push(w)}else e.headerCellClass&&f.push(e.headerCellClass);p.labelClassName&&f.push(p.labelClassName)}return f.join(" ")}),i=F(()=>{if(!(e.rowHeight==null||e.column==null||!e.column.rowspan||e.column.rowspan<=1))return e.column.rowspan*e.rowHeight+"px"}),a=F(()=>{if(!e.colSize)return;const{width:f,fixedLeft:p,fixedRight:b}=e.colSize,w=e.headerCellStyle,y=o.value;return[{width:f+"px",height:i.value,left:p,right:b},(typeof w=="function"?w(y):w)||{}]}),s=F(()=>n.value?n.value.label:void 0),u=F(()=>{const f=n.value;if(f){const p={column:f,$index:e.columnIndex};if(f.headerSlot){const b=l[f.headerSlot];if(typeof b=="function")return{render:b,params:[p]}}if(typeof f.renderHeader=="function")return{render:f.renderHeader,params:[p]}}return{}});return{originalCol:n,cellClass:r,cellStyle:a,cellTitle:s,renderOpt:u,handleCheckedChange:f=>{t("checkedChange",f)},handleFilterChange:f=>{t("filterChange",{column:n.value,value:f})},handleClick:f=>{t("click",n.value,f)},handleContextmenu:f=>{t("contextmenu",n.value,f)},handleMouseenter:f=>{t("mouseenter",n.value,f)}}}}),Nd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Dd={key:0,class:"ele-table-cell"},Ad=["title"],Pd={key:0,class:"ele-table-sorter"};function Ld(e,t,l,n,o,r){const i=W("CellCheckbox"),a=W("CellRender"),s=W("CellFilter");return A(),Y("div",{class:Re(e.cellClass),style:Xe(e.cellStyle),onClick:t[0]||(t[0]=(...u)=>e.handleClick&&e.handleClick(...u)),onContextmenu:t[1]||(t[1]=(...u)=>e.handleContextmenu&&e.handleContextmenu(...u)),onMouseenter:t[2]||(t[2]=(...u)=>e.handleMouseenter&&e.handleMouseenter(...u))},[e.originalCol?(A(),Y("div",Dd,[we("div",{class:"ele-cell-title",title:e.headerEllipsis?e.cellTitle:void 0},[e.originalCol.type==="selection"?(A(),se(i,{key:0,checked:e.isCheckAll,indeterminate:e.isIndeterminate,disabled:e.disabledCheckbox,size:e.tableSize,onChange:e.handleCheckedChange},null,8,["checked","indeterminate","disabled","size","onChange"])):(A(),se(a,Qe(xe({key:1},e.renderOpt)),{default:G(()=>[Ct(Ve(e.cellTitle),1)]),_:1},16))],8,Ad),e.originalCol.sortable?(A(),Y("div",Pd)):fe("",!0),e.originalCol.filters&&e.originalCol.filters.length?(A(),se(s,{key:1,filtered:e.filterValue,filterMultiple:e.originalCol.filterMultiple,filters:e.originalCol.filters,filterPlacement:e.originalCol.filterPlacement,onChange:e.handleFilterChange},null,8,["filtered","filterMultiple","filters","filterPlacement","onChange"])):fe("",!0)])):fe("",!0)],38)}const Kd=Nd($d,[["render",Ld]]),zd=Fe({name:"HeaderRow",components:{HeaderCell:Kd},props:{headerCols:Array,headerColSizes:Array,headerIndex:Number,sortBy:Object,filtered:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,cellClick:(e,t)=>!0,cellContextmenu:(e,t)=>!0,cellMouseenter:(e,t)=>!0},setup(e,{emit:t}){return{getKey:(u,d)=>{var c;return e.headerIndex+"-"+((c=u.key)!=null?c:d)},getFiltered:u=>yd(u.originalCol,e.filtered),handleCellCheckedChange:u=>{t("checkedChange",u)},handleCellFilterChange:u=>{t("filterChange",u)},handleCellClick:(u,d)=>{t("cellClick",u,d)},handleCellContextmenu:(u,d)=>{t("cellContextmenu",u,d)},handleCellMouseenter:(u,d)=>{t("cellMouseenter",u,d)}}}}),Wd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Vd(e,t,l,n,o,r){const i=W("HeaderCell");return A(!0),Y(Ne,null,Le(e.headerCols,(a,s)=>(A(),se(i,{key:e.getKey(a,s),column:a,columnIndex:s,headerIndex:e.headerIndex,colSize:e.headerColSizes?e.headerColSizes[s]:void 0,sortBy:e.sortBy,filterValue:e.getFiltered(a),isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:e.disabledCheckbox,tableSize:e.tableSize,headerCellClass:e.headerCellClass,headerCellStyle:e.headerCellStyle,headerEllipsis:e.headerEllipsis,rowHeight:e.rowHeight,onCheckedChange:e.handleCellCheckedChange,onFilterChange:e.handleCellFilterChange,onClick:e.handleCellClick,onContextmenu:e.handleCellContextmenu,onMouseenter:e.handleCellMouseenter},ct({_:2},[Le(Object.keys(e.$slots),u=>({name:u,fn:G(d=>[Oe(e.$slots,u,xe({ref_for:!0},d||{}))])}))]),1032,["column","columnIndex","headerIndex","colSize","sortBy","filterValue","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","headerEllipsis","rowHeight","onCheckedChange","onFilterChange","onClick","onContextmenu","onMouseenter"]))),128)}const Bd=Wd(zd,[["render",Vd]]),jd=Fe({name:"BodyCell",components:{ElIcon:St,ArrowDown:Wo,LoadingDotOutlined:Zr,CellCheckbox:_a,CellRender:Xt},props:{column:{type:Object,required:!0},columnIndex:{type:Number,required:!0},rowIndex:{type:Number,required:!0},rowData:{type:Object,required:!0},colSizes:{type:Array,required:!0},bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,isChecked:Boolean,isDisabled:Boolean,tableSize:String,expandColumnKey:String,hasChildren:Boolean,rowIndent:String,isCollapse:Boolean,loading:Boolean,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{checkedChange:e=>!0,expandChange:e=>!0,click:(e,t)=>!0,dblclick:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0,mouseleave:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=F(()=>e.column.originalCol),o=F(()=>{var S;return(S=n.value.type)!=null?S:""}),r=F(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.rowIndex,row:e.rowData})),i=F(()=>{const S=Va(r.value,e.spanMethod);return["indedx","selection","expand"].includes(o.value)&&(S.rowspan=1),S}),a=F(()=>{if(o.value==="selection"||o.value==="expand")return!0;const S=n.value;return S&&S.showOverflowTooltip!=null?S.showOverflowTooltip!==!1:!!e.tableTooltipProps}),s=F(()=>{const S=["el-table-v2__row-cell","ele-table-td"];i.value.colspan?i.value.colspan>1&&S.push("is-multi-cell"):S.push("is-none"),i.value.rowspan?i.value.rowspan>1&&S.push("is-multi-row"):S.push("is-placeholder"),o.value==="index"&&S.push("is-index"),o.value==="selection"&&S.push("is-selection"),o.value==="expand"&&S.push("is-expand");const R=n.value;if(R){if(R.align&&S.push("is-align-"+R.align),a.value&&S.push("is-ellipsis"),R.fixed==="right"?S.push("is-fixed-right"):(R.fixed==="left"||R.fixed===!0)&&S.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&S.push("is-fixed-left-last"),e.column.isFixedRightFirst&&S.push("is-fixed-right-first")),typeof e.bodyCellClass=="function"){const T=e.bodyCellClass(r.value);T&&S.push(T)}else e.bodyCellClass&&S.push(e.bodyCellClass);R.className&&S.push(R.className)}return S.join(" ")}),u=F(()=>{const S=i.value.colspan;if(S===0)return"0px";let R=e.colSizes[e.columnIndex].width||0;if(S&&S>1){const T=e.columnIndex+S;for(let D=e.columnIndex;D<T;D++)e.colSizes[D]&&e.colSizes[D].width!=null&&(R+=e.colSizes[D].width)}return R+"px"}),d=F(()=>{if(e.fixedCellHeight&&e.rowHeight!=null)return e.rowHeight+"px";const S=i.value.rowspan;if(!(e.rowHeight==null||S==null||S<=1))return S*e.rowHeight+"px"}),c=F(()=>{if(!(!e.autoRowHeight||!e.rowHeight))return e.rowHeight+"px"}),h=F(()=>{if(!(!e.colSizes||e.columnIndex==null))return e.colSizes[e.columnIndex]}),m=F(()=>{const S=e.bodyCellStyle,R=r.value;return[{width:u.value,height:d.value,minHeight:c.value,left:h.value?h.value.fixedLeft:void 0,right:h.value?h.value.fixedRight:void 0},(typeof S=="function"?S(R):S)||{}]}),g=F(()=>{const S=n.value;if(S&&S.type==="index")return typeof S.index=="function"?void 0:Wa(e.rowIndex,S.index,e.pageIndex);const R=e.column?e.column.dataKey:void 0,{rowspan:T,colspan:D}=i.value;if(!(T===0||D===0||R==null||!e.rowData))return Ke(e.rowData,R)}),f=F(()=>e.column!=null&&e.expandColumnKey!=null&&e.expandColumnKey===e.column.key),p=F(()=>{const S=n.value,{rowspan:R,colspan:T}=i.value;if(S&&R!==0&&T!==0){const{rowIndex:D,rowData:P}=e;if(S.type==="index")return typeof S.index=="function"?{render:S.index,params:[D]}:{};if(S.slot&&typeof l[S.slot]=="function")return{render:l[S.slot],params:[{row:P,column:S,$index:D}]};if(typeof S.formatter=="function")return{render:S.formatter,params:[P,S,g.value,D]}}return{}});return{colType:o,cellClass:s,cellStyle:m,cellText:g,isExpandCol:f,renderOpt:p,handleTextClick:S=>{o.value==="selection"&&S.stopPropagation()},handleCheckedChange:S=>{t("checkedChange",S)},handleExpandChange:()=>{e.loading||t("expandChange",e.isCollapse)},handleClick:S=>{t("click",n.value,S)},handleDblclick:S=>{t("dblclick",n.value,S)},handleContextmenu:S=>{t("contextmenu",n.value,S)},handleMouseenter:S=>{t("mouseenter",n.value,S)},handleMouseleave:S=>{t("mouseleave",n.value,S)}}}}),_d=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Ud={key:2,class:"ele-table-placeholder"};function qd(e,t,l,n,o,r){const i=W("LoadingDotOutlined"),a=W("ArrowDown"),s=W("ElIcon"),u=W("CellCheckbox"),d=W("CellRender");return A(),Y("div",{class:Re(e.cellClass),style:Xe(e.cellStyle),onClick:t[2]||(t[2]=(...c)=>e.handleClick&&e.handleClick(...c)),onDblclick:t[3]||(t[3]=(...c)=>e.handleDblclick&&e.handleDblclick(...c)),onContextmenu:t[4]||(t[4]=(...c)=>e.handleContextmenu&&e.handleContextmenu(...c)),onMouseenter:t[5]||(t[5]=(...c)=>e.handleMouseenter&&e.handleMouseenter(...c)),onMouseleave:t[6]||(t[6]=(...c)=>e.handleMouseleave&&e.handleMouseleave(...c))},[we("div",{class:"ele-table-cell",onClick:t[1]||(t[1]=(...c)=>e.handleTextClick&&e.handleTextClick(...c))},[e.isExpandCol?(A(),Y(Ne,{key:0},[e.rowIndent?(A(),Y("div",{key:0,class:"ele-table-indent",style:Xe({width:e.rowIndent})},null,4)):fe("",!0),e.hasChildren?(A(),Y("div",{key:1,class:Re(["ele-table-expand",{"is-collapse":e.isCollapse}]),onClick:t[0]||(t[0]=$l((...c)=>e.handleExpandChange&&e.handleExpandChange(...c),["stop"]))},[N(s,{class:Re({"is-loading":e.loading})},{default:G(()=>[e.loading?(A(),se(i,{key:0})):(A(),se(a,{key:1}))]),_:1},8,["class"])],2)):(A(),Y("div",Ud))],64)):fe("",!0),e.colType==="selection"?(A(),se(u,{key:1,checked:e.isChecked,disabled:e.isDisabled,size:e.tableSize,onChange:e.handleCheckedChange},null,8,["checked","disabled","size","onChange"])):e.colType!=="expand"?(A(),se(d,Qe(xe({key:2},e.renderOpt)),{default:G(()=>[Ct(Ve(e.cellText),1)]),_:1},16)):fe("",!0)])],38)}const Gd=_d(jd,[["render",qd]]),Yd=Fe({name:"BodyRow",components:{BodyCell:Gd},props:{bodyCols:{type:Array,required:!0},colSizes:{type:Array,required:!0},rowIndex:{type:Number,required:!0},rowItem:{type:Object,required:!0},rowId:[String,Number],checkedRowKeys:Set,bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,tableSize:String,expandColumnKey:String,expandedRowKeys:Array,lazy:Boolean,load:Function,level:Number,indent:Number,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{cellCheckedChange:(e,t)=>!0,cellExpandChange:(e,t,l)=>!0,cellClick:(e,t,l)=>!0,cellDblclick:(e,t,l)=>!0,cellContextmenu:(e,t,l)=>!0,cellMouseenter:(e,t,l)=>!0,cellMouseleave:(e,t,l)=>!0},setup(e,{emit:t}){const l=O(!1),n=F(()=>!e.checkedRowKeys||e.rowId==null?!1:e.checkedRowKeys.has(e.rowId)),o=F(()=>{if(e.rowItem){if(e.rowItem.children)return!!e.rowItem.children.length;if(e.lazy&&e.rowItem.hasChildren)return!0}return!1}),r=F(()=>{if(!(!e.level||!e.indent))return e.level*e.indent+"px"}),i=F(()=>!e.expandedRowKeys||e.rowId==null?!0:!e.expandedRowKeys.includes(e.rowId));return{loading:l,isChecked:n,hasChildren:o,rowIndent:r,isCollapse:i,handleCellCheckedChange:g=>{t("cellCheckedChange",e.rowItem,g)},handleCellExpandChange:g=>{if(g&&e.lazy&&!e.rowItem.children){e.load&&(l.value=!0,e.load(e.rowItem.rowData,null,f=>{l.value=!1,t("cellExpandChange",e.rowItem,g,f)}));return}t("cellExpandChange",e.rowItem,g)},handleCellClick:(g,f)=>{t("cellClick",e.rowItem,g,f)},handleCellDblclick:(g,f)=>{t("cellDblclick",e.rowItem,g,f)},handleCellContextmenu:(g,f)=>{t("cellContextmenu",e.rowItem,g,f)},handleCellMouseenter:(g,f)=>{t("cellMouseenter",e.rowItem,g,f)},handleCellMouseleave:(g,f)=>{t("cellMouseleave",e.rowItem,g,f)}}}}),Xd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Jd(e,t,l,n,o,r){const i=W("BodyCell");return A(!0),Y(Ne,null,Le(e.bodyCols,(a,s)=>{var u,d;return A(),se(i,{key:((u=e.rowId)!=null?u:e.rowIndex)+"-"+((d=a.key)!=null?d:s),column:a,columnIndex:s,rowIndex:e.rowIndex,rowData:e.rowItem.rowData,colSizes:e.colSizes,bodyCellClass:e.bodyCellClass,bodyCellStyle:e.bodyCellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.tableTooltipProps,pageIndex:e.pageIndex,rowHeight:e.rowHeight,isChecked:e.isChecked,isDisabled:e.rowItem.isDisabled,tableSize:e.tableSize,expandColumnKey:e.expandColumnKey,hasChildren:e.hasChildren,rowIndent:e.rowIndent,isCollapse:e.isCollapse,loading:e.loading,fixedCellHeight:e.fixedCellHeight,autoRowHeight:e.autoRowHeight,onCheckedChange:e.handleCellCheckedChange,onExpandChange:e.handleCellExpandChange,onClick:e.handleCellClick,onDblclick:e.handleCellDblclick,onContextmenu:e.handleCellContextmenu,onMouseenter:e.handleCellMouseenter,onMouseleave:e.handleCellMouseleave},ct({_:2},[Le(Object.keys(e.$slots),c=>({name:c,fn:G(h=>[Oe(e.$slots,c,xe({ref_for:!0},h||{}))])}))]),1032,["column","columnIndex","rowIndex","rowData","colSizes","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","isChecked","isDisabled","tableSize","expandColumnKey","hasChildren","rowIndent","isCollapse","loading","fixedCellHeight","autoRowHeight","onCheckedChange","onExpandChange","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave"])}),128)}const Zd=Xd(Yd,[["render",Jd]]),Qd=Fe({name:"ExpandRow",props:{column:Object,rowIndex:Number,rowData:Object}}),ec=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},tc={class:"el-table-v2__row-cell ele-table-td"};function lc(e,t,l,n,o,r){return A(),Y("div",tc,[e.column&&e.column.slot?Oe(e.$slots,e.column.slot,Qe(xe({key:0},{row:e.rowData,column:e.column,$index:e.rowIndex}))):fe("",!0)])}const nc=ec(Qd,[["render",lc]]),oc=Fe({name:"FooterRow",components:{CellRender:Xt},props:{bodyCols:{type:Array,required:!0},tableData:{type:Array,required:!0},colSizes:{type:Array,required:!0},sumWidth:Number,rowHeight:Number,sumText:String,summaryMethod:Function},emits:{mouseenter:e=>!0},setup(e,{emit:t}){const l=F(()=>e.tableData.map(i=>i.rowData)),n=F(()=>Ba(e.summaryMethod,e.bodyCols,l.value));return{sumCols:F(()=>{const i=n.value;return e.bodyCols.map((a,s)=>{const u=e.colSizes[s],d=ja(l.value,a.dataKey),c=a.originalCol;return{key:s+"-"+a.key,width:u&&u.width||0,fixedLeft:u?u.fixedLeft:void 0,fixedRight:u?u.fixedRight:void 0,text:i==null?s===0?e.sumText:d:i[s],align:c?c.align:void 0,fixed:c?c.fixed:void 0,isFixedLeftLast:a.isFixedLeftLast,isFixedRightFirst:a.isFixedRightFirst}})}),handleMouseenter:i=>{t("mouseenter",i)}}}}),ac=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},rc={class:"ele-table-cell"};function sc(e,t,l,n,o,r){const i=W("CellRender");return A(),Y("div",{class:"ele-table-foot-tr",style:Xe({width:(e.sumWidth||0)+"px",height:(e.rowHeight||0)+"px"})},[(A(!0),Y(Ne,null,Le(e.sumCols,a=>(A(),Y("div",{key:a.key,class:Re(["ele-table-td","is-ellipsis",{"is-align-left":a.align==="left"},{"is-align-center":a.align==="center"},{"is-align-right":a.align==="right"},{"is-fixed-left":a.fixed==="left"||a.fixed===!0},{"is-fixed-right":a.fixed==="right"},{"is-fixed-left-last":a.isFixedLeftLast},{"is-fixed-right-first":a.isFixedRightFirst}]),style:Xe({width:a.width+"px",left:a.fixedLeft,right:a.fixedRight}),onMouseenter:t[0]||(t[0]=(...s)=>e.handleMouseenter&&e.handleMouseenter(...s))},[we("div",rc,[N(i,{render:()=>a.text,params:[]},null,8,["render"])])],38))),128))],4)}const ic=ac(oc,[["render",sc]]),uc={...Nl,rowHeight:Number},dc={...Ln},cc=["default","empty","append"],fc=Fe({name:"EleVirtualTable",components:{ElTableV2:qu,ElEmpty:kl,EleTooltip:En,HeaderRow:Bd,BodyRow:Zd,ExpandRow:nc,FooterRow:ic},props:uc,emits:dc,setup(e,{emit:t}){var Un;const{t:l}=Ml(),n=Pn(t),{wrapWidth:o,wrapHeight:r,updateWrapSize:i}=Sd(()=>d.value),{isLayoutFixedHead:a,isLayoutMaximized:s}=Da(),u={checked:new Map,reserveChecked:!1,scrollTop:0},d=O(null),c=O(null),h=O(0),m=O([]),g=O([]),f=O([]),p=O([]),b=O(0),w=O(0),y=O(0),v=O([]),C=O([]),x=O(0),I=O((Un=e.currentRowKey)!=null?Un:null),$=O(new Set(e.selectedRowKeys||[])),S=O(!1),R=O([]),T=O(vd(e.defaultSort)),D=rl(pd(e.columns)),P=rl({placement:"top",trigger:"click",offset:0,hideAfter:0,content:"",virtualRef:void 0,virtualTriggering:!0,disabled:!0,visible:!1,teleported:!1,transition:"ele-transition-none"}),V=F(()=>Cd(e.treeProps)),j=F(()=>V.value.childrenName),B=F(()=>V.value.hasChildrenName),le=F(()=>v.value.some(H=>{var K;return((K=H.children)==null?void 0:K.length)||e.lazy&&H.hasChildren})),ie=F(()=>g.value.find(H=>!!(H&&H.originalCol&&H.originalCol.type==="expand"))),L=F(()=>!!ie.value),q=F(()=>{if(ie.value)return ie.value.key;if(!le.value)return;const H=g.value.find(K=>{if(!K||!K.key||!K.originalCol)return!1;const U=K.originalCol.type;return!U||!["selection","index"].includes(U)});return H?H.key:void 0}),ne=F(()=>sd(e.size,e.rowHeight)),ce=F(()=>hd(L.value,g.value,e.showOverflowTooltip)),k=F(()=>e.showHeader?m.value.length:0),z=F(()=>!!(e.showSummary&&v.value.length)),Q=F(()=>{const H=ne.value,K=new Array(k.value).fill(H);return{cache:2,estimatedRowHeight:ce.value?H:void 0,headerClass:te=>{const ae=e.headerRowClassName,Ce=["ele-table-head-tr"];if(typeof ae=="function"){const Ue=ae({rowIndex:te.headerIndex});Ue&&Ce.push(Ue)}else typeof ae=="string"&&ae&&Ce.push(ae);return Ce.join(" ")},headerProps:te=>{const ae={rowIndex:te.headerIndex},Ce=e.headerRowStyle;return{style:typeof Ce=="function"?Ce(ae):Ce}},headerHeight:k.value?K:0,footerHeight:z.value?H:void 0,rowClass:te=>{const ae=["ele-table-tr"],Ce=te.rowData,Ue=Ce.rowIndex;if(Ce&&Ce.isExpandRow===!0)ae.push("is-expand-row");else if(Ce){e.stripe&&(Ue+1)%2===0&&ae.push("is-even"),e.highlightCurrentRow&&I.value!=null&&I.value===Ce.rowId&&ae.push("is-current");const dt=e.rowClassName;if(typeof dt=="function"){const Ze=dt({row:Ce.rowData,rowIndex:Ue});Ze&&ae.push(Ze)}else typeof dt=="string"&&dt&&ae.push(dt)}return ae.join(" ")},rowKey:"rowId",rowProps:te=>{const ae=te.rowData,Ce={row:ae.rowData,rowIndex:ae.rowIndex},Ue=e.rowStyle;return{style:typeof Ue=="function"?Ue(Ce):Ue}},rowHeight:ce.value?void 0:H,columns:C.value,data:v.value,expandColumnKey:q.value,expandedRowKeys:R.value,defaultExpandedRowKeys:R.value,fixed:!0,width:w.value,height:y.value,hScrollbarSize:0,vScrollbarSize:0,scrollbarAlwaysOn:e.scrollbarAlwaysOn,sortBy:T.value}}),ue=F(()=>!!($.value.size&&!S.value)),Ee=F(()=>x.value>1),de=F(()=>{const H=b.value-w.value-1;return H>1&&x.value<H}),Se=F(()=>{var H;return(H=e.sumText)!=null?H:l("el.table.sumText")}),Pe=F(()=>e.errorText||e.emptyText||l("el.table.emptyText")),qe=(H,K)=>{const U=H.innerText,te=Na(K?K.showOverflowTooltip:void 0,$a(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions));if(U&&te&&wd(H)){P.content=U;const ae=["virtualRef","virtualTriggering","disabled","visible","teleported"];Object.keys(te).forEach(Ce=>{const Ue=te[Ce];!ae.includes(Ce)&&P[Ce]!==Ue&&(P[Ce]=Ue)}),P.virtualRef=H,P.disabled=!1,P.visible=!0}else Be()},Be=()=>{P.visible=!1,P.disabled=!0},ze=H=>{const K=Ot(H.column);K&&(D[K]=H.value,n.onFilterChange(D))},We=(H,K)=>{J(H.rowData,H.rowId,K);const U=Te();n.onSelect(U,H.rowData),n.onSelectionChange(U)},De=(H,K,U)=>{if(K&&U!=null){const te=ko(U,L.value,j.value,B.value,e.rowKey,To(g.value));let ae=-1;if(Ae(v.value,Ce=>{ae++,Ce.rowId===H.rowId&&(Ce.children=te,te.length||(Ce.hasChildren=!1)),Ce.rowIndex=ae}),!te.length)return}rt(H,K)},Ge=(H,K,U)=>{const te=U.currentTarget,ae=H.rowData,Ce=H.rowId;n.onCellClick(ae,K,te,U),e.highlightCurrentRow&&yt(ae),e.rowClickChecked&&!H.isDisabled&&(e.rowClickChecked==="smart"&&(!$.value.size||$.value.size===1)?Ce!=null&&!$.value.has(Ce)&&($.value=new Set([Ce]),u.checked.clear(),u.checked.set(Ce,ae),pt(),Tt([Ce]),n.onSelectionChange([ae])):(J(ae,Ce),n.onSelectionChange(Te()))),n.onRowClick(ae,K,U)},Z=(H,K,U)=>{const te=U.currentTarget;n.onCellDblclick(H.rowData,K,te,U),n.onRowDblclick(H.rowData,K,U)},X=(H,K,U)=>{const te=U.currentTarget;n.onCellContextmenu(H.rowData,K,te,U),n.onRowContextmenu(H.rowData,K,U)},re=(H,K,U)=>{const te=U.currentTarget;qe(te,K),n.onCellMouseEnter(H.rowData,K,te,U)},ve=(H,K,U)=>{const te=U.currentTarget;n.onCellMouseLeave(H.rowData,K,te,U)},pe=(H,K)=>{H&&(H.sortable===!0||H.sortable==="custom")&&(T.value=md(T.value,H),n.onSortChange({prop:H.property||H.prop,order:za(T.value?T.value.order:void 0),column:H})),n.onHeaderClick(H,K)},M=(H,K)=>{n.onHeaderContextmenu(H,K)},_=()=>{Be()},ee=H=>{qe(H.currentTarget,{showOverflowTooltip:!0})},be=()=>{Be()},$e=()=>{Be()},je=H=>{u.scrollTop=H.scrollTop;const K=H.scrollLeft;if(x.value!==K&&(x.value=K),z.value&&c.value&&c.value.$el){const U=Qr(c.value.$el,"el-table-v2__footer");U&&U.scrollLeft!=K&&(U.scrollLeft=K)}},Ie=()=>{v.value=ko(e.data,L.value,j.value,B.value,e.rowKey,To(g.value)),e.defaultExpandAll?ge(!0):e.expandRowKeys&&e.expandRowKeys.length?R.value=[...e.expandRowKeys]:ge(!1)},Me=(H,K)=>{if(!Hl(I.value,H)){H!=null&&K!=null&&u.row!==K&&(u.row=K,n.onCurrentChange(K,u.oldRow));return}if(H!=null){const U=Qt(H,v.value);if(U!=null||e.reserveCurrent){u.oldRow=u.row,u.row=(U==null?void 0:U.rowData)||K||void 0,u.row==null&&e.cacheData!=null&&(u.row=Qt(H,e.cacheData,e.rowKey,j.value)),I.value=H,_n(H),n.onCurrentChange(u.row,u.oldRow);return}}I.value!=null&&(u.oldRow=u.row,u.row=void 0,I.value=null,_n(),n.onCurrentChange(void 0,u.oldRow))},nt=()=>{const H=I.value;if(H!=null){const K=Qt(H,v.value);if(K!=null)Me(H,K.rowData);else if(!e.reserveCurrent)Me(null);else if(e.cacheData!=null){const U=Qt(H,e.cacheData,e.rowKey,j.value);U!=null&&Me(H,U)}}if($.value.size){const K=Te(),U=[],[te,ae]=ml(v.value),[Ce,Ue]=ml(e.cacheData,e.rowKey,j.value);$.value.forEach(Ze=>{const Jt=te.indexOf(Ze);if(Jt!==-1){const Wt=ae[Jt].rowData;u.checked.get(Ze)!==Wt&&u.checked.set(Ze,Wt)}else if(!u.reserveChecked)U.push(Ze);else if(e.cacheData!=null){const Wt=Ce.indexOf(Ze),qn=Wt!==-1?Ue[Wt]:void 0;Wt!==-1&&u.checked.get(Ze)!==qn&&u.checked.set(Ze,qn)}}),U.forEach(Ze=>{$.value.delete(Ze),u.checked.delete(Ze)}),pt(),U.length&&Tt(Array.from($.value));const dt=Te();ht(K,dt)&&n.onSelectionChange(dt)}},pt=()=>{if(!v.value.length||!$.value.size){S.value=!1;return}const H=bt(v.value,K=>!K.isExpandRow&&!K.isDisabled&&K.rowId!=null&&!$.value.has(K.rowId));S.value=H==null},J=(H,K,U)=>{const te=$.value.has(K),ae=U==null?!te:U;ae!==te&&(ae?($.value.add(K),u.checked.set(K,H)):($.value.delete(K),u.checked.delete(K)),pt(),Tt(Array.from($.value)))},oe=H=>{if(!(!H||!ht(Te(),H))){if(u.reserveChecked){const K=Te();$.value.clear(),u.checked.clear(),H.forEach(te=>{const ae=Ke(te,e.rowKey);ae!=null&&($.value.add(ae),u.checked.set(ae,te))}),pt(),Tt(Array.from($.value));const U=Te();ht(K,U)&&n.onSelectionChange(U);return}me(At(H,e.rowKey))}},me=H=>{if(!H||!ht(Array.from($.value),H))return;const K=Te();if(u.reserveChecked){const[te,ae]=ml(v.value),[Ce,Ue]=ml(e.cacheData,e.rowKey,j.value);$.value=new Set(H),u.checked.clear(),H.forEach(dt=>{const Ze=te.indexOf(dt);if(Ze!==-1)u.checked.set(dt,ae[Ze].rowData);else if(e.cacheData!=null){const Jt=Ce.indexOf(dt);Jt!==-1&&u.checked.set(dt,Ue[Jt])}})}else $.value.clear(),u.checked.clear(),H.length&&Ae(v.value,te=>{!te.isExpandRow&&te.rowId!=null&&H.includes(te.rowId)&&($.value.add(te.rowId),u.checked.set(te.rowId,te.rowData))});pt(),Tt(Array.from($.value));const U=Te();ht(K,U)&&n.onSelectionChange(U)},ge=H=>{if(!H){R.value.length&&(R.value=[],n.onExpandChange(void 0,[]));return}const K=[],U=[];Ae(v.value,te=>{te.children&&te.children.length&&te.rowId!=null&&(K.push(te.rowId),U.push(te.rowData))}),R.value=K,n.onExpandChange(void 0,U)},ke=()=>{if($.value.size){const H=!!u.checked.size;$.value.clear(),u.checked.clear(),S.value=!1,Tt([]),H&&n.onSelectionChange([])}},Te=()=>Array.from(u.checked.values()),Ye=(H,K)=>{const U=Ke(H,e.rowKey);if(U==null||!u.reserveChecked&&!Qt(U,v.value))return;const te=Te();J(H,U,K);const ae=Te();ht(te,ae)&&n.onSelectionChange(ae)},_e=()=>{if(!v.value.length)return;if(S.value||ue.value&&!e.selectOnIndeterminate){if($.value.size)if(u.reserveChecked){Ae(v.value,U=>{!U.isExpandRow&&U.rowId!=null&&($.value.delete(U.rowId),u.checked.delete(U.rowId))}),S.value=!1,Tt(Array.from($.value));const K=Te();n.onSelectionChange(K),n.onSelectAll(K)}else ke(),n.onSelectAll([]);return}Ae(v.value,K=>{!K.isExpandRow&&!K.isDisabled&&K.rowId!=null&&($.value.add(K.rowId),u.checked.set(K.rowId,K.rowData))}),S.value=!0,Tt(Array.from($.value));const H=Te();n.onSelectionChange(H),n.onSelectAll(H)},rt=(H,K)=>{const U=H.rowId,te=R.value.includes(U),ae=K==null?!te:K;if(ae!==te){if(ae)R.value.push(U);else{const Ce=R.value.findIndex(Ue=>Ue===U);R.value.splice(Ce,1)}n.onExpandChange(H.rowData,ae)}},yt=H=>{Me(Ke(H,e.rowKey),H)},ot=H=>{Me(H)},at=()=>u.row,xt=()=>{T.value!=null&&(T.value=void 0)},ar=H=>{(H==null?Object.keys(D):H).forEach(U=>{const te=D[U];(te==null||te.length)&&(D[U]=[])})},Dl=H=>{const{width:K,sumWidth:U,rowSizes:te,colSizes:ae}=dd(g.value,m.value,o.value);if(!K)return;const Ce=b.value&&b.value!==U,Ue=cd(p.value,ae);w.value=K,b.value=U,f.value=te,(H||Ue)&&(p.value=ae,C.value=fd(g.value,p.value)),Ce&&h.value++},rr=(H,K)=>{const U=bd(e.columns,void 0,H);T.value={key:Ot(U),order:gd(K)},n.onSortChange({prop:H,order:K,column:U})},Bn=(H,K)=>{if(!c.value)return;const U=typeof H=="number",te=U?H:H.left,ae=U?K:H.top;c.value.scrollTo({scrollTop:ae,scrollLeft:te})},sr=H=>{c.value&&c.value.scrollToTop(H)},jn=H=>{c.value&&c.value.scrollToLeft(H)},ir=(H,K)=>{c.value&&c.value.scrollToRow(H,K)},_n=H=>{Hl(e.currentRowKey,H)&&n["onUpdate:currentRowKey"](H)},Tt=H=>{const K=e.selectedRowKeys||[];ht(K,H)&&n["onUpdate:selectedRowKeys"](H)};return Ko(()=>{const H=u.scrollTop,K=x.value;(H||K)&&Bn(K?K-1:0,H?H-1:0)}),zo(()=>{Be()}),ye([()=>e.height,()=>e.maxHeight,ne,k,z,r],()=>{const H=k.value+(z.value?2:1),K=id(e.height,e.maxHeight,H*ne.value,r.value);K!==y.value&&(y.value=K)},{immediate:!0}),ye(()=>e.columns,H=>{u.reserveChecked=hn(H);const{cols:K,rows:U}=Ka(H);g.value=K,m.value=U,Dl(!0)},{deep:!0,immediate:!0}),ye(o,()=>{Dl()}),ye([()=>e.data,L,j],()=>{Ie()},{immediate:!0}),ye(()=>e.rowKey,()=>{yt(),ke(),ge(!1),Ie()}),ye([v,()=>e.cacheData],()=>{nt()}),ye(()=>e.currentRowKey,H=>{Me(H)}),ye(()=>e.selectedRowKeys,H=>{me(H||[])},{deep:!0}),ye(()=>e.expandRowKeys,H=>{H!=null&&(R.value=[...H])},{deep:!0}),ye(()=>e.showHeader,H=>{H&&tt(()=>{const K=x.value;K&&jn(K-1)})}),{ownSlots:cc,rootRef:d,tableRef:c,tableKey:h,wrapWidth:o,headerRows:m,bodyCols:g,headerRowSizes:f,bodyColSizes:p,colsSumWidth:b,tableWidth:w,tableData:v,isCheckAll:S,isIndeterminate:ue,checkedRowKeys:$,expandedRowKeys:R,sortBy:T,filtered:D,tableTooltipProps:P,tableExpandCol:ie,hasExpandCol:L,tableExpandColumnKey:q,tableRowHeight:ne,autoRowHeight:ce,hasFooter:z,tableProps:Q,isPingLeft:Ee,isPingRight:de,tableSumText:Se,tableEmptyText:Pe,isLayoutFixedHead:a,isLayoutMaximized:s,handleTableFilterChange:ze,handleCellCheckedChange:We,handleCellExpandChange:De,handleCellClick:Ge,handleCellDblclick:Z,handleCellContextmenu:X,handleCellMouseenter:re,handleCellMouseleave:ve,handleHeaderCellClick:pe,handleHeaderCellContextmenu:M,handleHeaderCellMouseenter:_,handleFooterCellMouseenter:ee,handleExpandCellMouseenter:be,handleTableMouseleave:$e,handleTableScroll:je,updateWrapSize:i,updateTableData:Ie,updateSelectedAndChecked:nt,setSelectedRows:oe,setSelectedRowKeys:me,toggleRowExpansionAll:ge,clearSelection:ke,getSelectionRows:Te,toggleRowSelection:Ye,toggleAllSelection:_e,toggleRowExpansion:rt,setCurrentRow:yt,setCurrentRowKey:ot,getCurrentRow:at,clearSort:xt,clearFilter:ar,doLayout:Dl,sort:rr,scrollTo:Bn,setScrollTop:sr,setScrollLeft:jn,scrollToRow:ir,hideTooltip:Be}}}),hc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},mc={key:0,class:"ele-table-empty-text"};function gc(e,t,l,n,o,r){const i=W("HeaderRow"),a=W("ExpandRow"),s=W("BodyRow"),u=W("FooterRow"),d=W("ElEmpty"),c=W("ElTableV2"),h=W("EleTooltip");return A(),Y("div",{ref:"rootRef",class:Re(["ele-virtual-table",{"is-border":e.border||e.headerRows.length>1},{"is-stripe":e.stripe},{"is-sticky":e.sticky},{"is-layout-fixed-head":e.sticky&&e.isLayoutFixedHead},{"is-layout-maximized":e.sticky&&e.isLayoutMaximized},{"has-footer":e.hasFooter},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine},{"is-ping-left":e.isPingLeft},{"is-ping-right":e.isPingRight},{"is-auto-width":e.wrapWidth===e.tableWidth},{"is-small":e.size==="small"},{"is-large":e.size==="large"}]),onMouseleave:t[1]||(t[1]=(...m)=>e.handleTableMouseleave&&e.handleTableMouseleave(...m))},[e.tableProps.width?(A(),se(c,xe({key:0},e.tableProps,{key:e.tableKey,ref:"tableRef",onScroll:e.handleTableScroll}),ct({header:G(m=>[m&&e.headerRows[m.headerIndex]?(A(),se(i,{key:0,headerCols:e.headerRows[m.headerIndex],headerColSizes:e.headerRowSizes[m.headerIndex],headerIndex:m.headerIndex,sortBy:e.sortBy,filtered:e.filtered,isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:!e.tableData.length,tableSize:e.size,headerCellClass:e.headerCellClassName,headerCellStyle:e.headerCellStyle,headerEllipsis:!0,rowHeight:e.tableRowHeight,onCheckedChange:t[0]||(t[0]=g=>e.toggleAllSelection()),onFilterChange:e.handleTableFilterChange,onCellClick:e.handleHeaderCellClick,onCellContextmenu:e.handleHeaderCellContextmenu,onCellMouseenter:e.handleHeaderCellMouseenter},ct({_:2},[Le(Object.keys(e.$slots).filter(g=>!e.ownSlots.includes(g)),g=>({name:g,fn:G(f=>[Oe(e.$slots,g,Qe(mt(f||{})))])}))]),1032,["headerCols","headerColSizes","headerIndex","sortBy","filtered","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","rowHeight","onFilterChange","onCellClick","onCellContextmenu","onCellMouseenter"])):fe("",!0)]),row:G(m=>{var g;return[m&&m.rowData&&m.rowData.isExpandRow?(A(),se(a,{key:0,column:(g=e.tableExpandCol)==null?void 0:g.originalCol,rowIndex:m.rowData.rowIndex,rowData:m.rowData.rowData,onMouseenter:e.handleExpandCellMouseenter},ct({_:2},[Le(Object.keys(e.$slots).filter(f=>!e.ownSlots.includes(f)),f=>({name:f,fn:G(p=>[Oe(e.$slots,f,Qe(mt(p||{})))])}))]),1032,["column","rowIndex","rowData","onMouseenter"])):m&&m.rowData&&m.rowData.rowData?(A(),se(s,{key:1,bodyCols:e.bodyCols,colSizes:e.bodyColSizes,rowIndex:m.rowData.rowIndex,rowItem:m.rowData,rowId:m.rowData.rowId,checkedRowKeys:e.checkedRowKeys,bodyCellClass:e.cellClassName,bodyCellStyle:e.cellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.showOverflowTooltip,pageIndex:e.pageIndex,rowHeight:e.tableRowHeight,tableSize:e.size,expandColumnKey:e.tableExpandColumnKey,expandedRowKeys:e.expandedRowKeys,lazy:e.lazy,load:e.load,level:m.depth,indent:e.indent,fixedCellHeight:e.hasExpandCol,autoRowHeight:e.autoRowHeight,onCellCheckedChange:e.handleCellCheckedChange,onCellExpandChange:e.handleCellExpandChange,onCellClick:e.handleCellClick,onCellDblclick:e.handleCellDblclick,onCellContextmenu:e.handleCellContextmenu,onCellMouseenter:e.handleCellMouseenter,onCellMouseleave:e.handleCellMouseleave},ct({_:2},[Le(Object.keys(e.$slots).filter(f=>!e.ownSlots.includes(f)),f=>({name:f,fn:G(p=>[Oe(e.$slots,f,Qe(mt(p||{})))])}))]),1032,["bodyCols","colSizes","rowIndex","rowItem","rowId","checkedRowKeys","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","tableSize","expandColumnKey","expandedRowKeys","lazy","load","level","indent","fixedCellHeight","autoRowHeight","onCellCheckedChange","onCellExpandChange","onCellClick","onCellDblclick","onCellContextmenu","onCellMouseenter","onCellMouseleave"])):fe("",!0)]}),empty:G(()=>[Oe(e.$slots,"empty",{text:e.emptyText,error:e.errorText},()=>[e.emptyProps===!1?(A(),Y("div",mc,Ve(e.tableEmptyText),1)):(A(),se(d,xe({key:1,imageSize:68},!e.emptyProps||e.emptyProps===!0?{}:e.emptyProps,{description:e.tableEmptyText,class:"ele-table-empty"}),null,16,["description"]))])]),_:2},[e.hasFooter?{name:"footer",fn:G(()=>[N(u,{bodyCols:e.bodyCols,colSizes:e.bodyColSizes,sumWidth:e.colsSumWidth,tableData:e.tableData,rowHeight:e.tableRowHeight,sumText:e.tableSumText,summaryMethod:e.summaryMethod,onMouseenter:e.handleFooterCellMouseenter},null,8,["bodyCols","colSizes","sumWidth","tableData","rowHeight","sumText","summaryMethod","onMouseenter"])]),key:"0"}:void 0]),1040,["onScroll"])):fe("",!0),N(h,Qe(mt(e.tableTooltipProps)),null,16)],34)}const vc=hc(fc,[["render",gc]]);function Il(e,t){return e==null?t!=null?t:!0:e?!t||typeof t!="object"?e:typeof e!="object"?t:{...t,...e}:!1}function Kn(e,t,l,n){const o=Il(t,l);if(o==null||o===!1)return null;const r={size:e!=="large"?"small":"default",pagerCount:5,layout:"total, prev, pager, next, sizes, jumper",pageSizes:[10,20,30,40,50,100],hideOnSinglePage:!1};return typeof o!="object"?Object.assign(r,n):Object.assign(r,Ut(o,["autoAmend"]),n)}function pc(e,t){var n;const l=Kn(void 0,e,t);return(n=l==null?void 0:l.currentPage)!=null?n:1}function yc(e,t){var n;const l=Kn(void 0,e,t);return(n=l==null?void 0:l.pageSize)!=null?n:10}function Cc(e,t){const l=Il(e,t);return l?typeof l=="object"?!!l.autoAmend:l===!0:!1}function Wl(e,t,l){var n,o,r;return(r=(o=(n=xc(e))!=null?n:t)!=null?o:l)!=null?r:"default"}function bc(e){const t={};return Ae(e,l=>{var o;const n=(o=l.columnKey)!=null?o:l.prop;typeof n=="string"&&n&&l.filteredValue&&(t[n]=l.filteredValue)}),t}function Ua(e,t){return Object.assign({pageName:"page",limitName:"limit",sortName:"sort",orderName:"order",ascValue:"asc",descValue:"desc"},e,t)}function qa(e,t){return Object.assign({dataName:"list",countName:"count"},e,t)}function Ga(e){var t,l;const n=[];if(!e||!e.order)return n;const o=e.order==="descending",r=(t=e.column)==null?void 0:t.sortMethod,i=(l=e.column)==null?void 0:l.sortBy;if(Array.isArray(i)&&i.length)i.forEach(a=>{typeof a=="string"&&a.length&&n.push({field:a,descend:o,sortMethod:r})});else{const a=typeof i=="string"&&i?i:e.prop;a&&n.push({field:a,descend:o,sortMethod:r})}return n}function Eo(e,t,l){const n={},{sortName:o,orderName:r,ascValue:i,descValue:a}=Ua(l,t);if(!o||!r)return n;const s=Ga(e);return s.length===1?(n[o]=s[0].field,n[r]=s[0].descend?a:i):s.length&&(n[o]=s.map(u=>[u.field,u.descend?a:i].join(" ")).join(",")),n}function Oo(e){const t={};return e&&Object.keys(e).forEach(l=>{const n=e[l];n!=null&&(typeof n=="string"?n&&(t[l]=n):Array.isArray(n)?n.length&&(t[l]=n.join(",")):t[l]=n)}),t}function Ho(e,t,l,n){const o={},{pageName:r,limitName:i}=Ua(n,l);return!r||!i||(o[r]=e,o[i]=t),o}function wc(e,t,l,n,o){var a;if(!e||Array.isArray(e))return{data:Fo(e,n,o)};const{dataName:r,countName:i}=qa(l,t);return r?{data:Fo(Ke(e,r),n,o),total:(a=i?Ke(e,i):void 0)!=null?a:0}:{}}function Fo(e,t,l){var o;if(!e||!t)return e||[];const n=(o=l==null?void 0:l.hasChildren)!=null?o:"hasChildren";return e.map(r=>{var a;const i={...r};return i[n]=(a=i[n])!=null?a:!0,i})}function Ya(e,t){if(!e||!e.length)return[];const l=[...e];return Ga(t).forEach(n=>{l.sort((o,r)=>{if(typeof n.sortMethod=="function"){const u=n.sortMethod(o,r);return n.descend?-u:u}const i=o[n.field],a=r[n.field];if(i==a)return 0;const s=i<a?-1:1;return n.descend?-s:s})}),l}function Sc(e,t,l,n){const o=Ya(e,t),r=o.length;if(!l||!n)return{page:1,data:o,total:r};const i=Math.ceil(r/n);i&&l>i&&(l=i);const a=(l-1)*n,s=a+n,u=o.slice(a,s>r?r:s);return{page:l,data:u,total:r}}function Bt(e){return e.columnKey==null||e.columnKey===""?e.prop:e.columnKey}function Xa(e,t){const l=[];return e.forEach(n=>{var r;var o;if(!n.hideInTable){const i=(r=Wn(t,n))!=null?r:n.width;if((o=n.children)!=null&&o.length){const a=Xa(n.children);a.length&&l.push({...n,width:i,children:a})}else l.push({...n,width:i})}}),l}function Rc(e,t,l){const n=Qa(Rl(t));return n?Ht(e,n,l,o=>o.hideInSetting,void 0,!1,Gt(t)):Xa(e,Gt(t))}function Ht(e,t,l,n,o,r,i){const a=[];return!e||!e.length||(e.forEach(s=>{var f,p;const u=Bt(s);if(o&&!o(s))return;const d=u==null?null:bt(t,b=>b.uid===u),c=d?!d.checked:s.hideInTable;if(!r&&c)return;const h=(f=Wn(i,s))!=null?f:s.width,m=(p=d==null?void 0:d.fixed)!=null?p:s.fixed,g=es(8);if(s.children&&s.children.length){const b=Ht(s.children,t,l,n,o,r,i);b.length&&a.push({...s,width:h,fixed:m,hideInTable:c,children:b,uid:g});return}a.push({...s,width:h,fixed:m,hideInTable:c,uid:g})}),!l||!a.length)||a.sort((s,u)=>{const d=Bt(s),c=Bt(u);let h=0,m,g;return Ae(t,f=>{f.uid===d&&(m=h),f.uid===c&&(g=h),h++}),m==null&&(n!=null&&n(s))&&s.fixed==="right"&&(m=h),m==null&&(m=-1),s.fixed===!0||s.fixed==="left"?m-=h:(s.fixed==="right"||n!=null&&n(s)&&!s.fixed)&&(m+=h),g==null&&(n!=null&&n(u))&&u.fixed==="right"&&(g=h),g==null&&(g=-1),u.fixed===!0||u.fixed==="left"?g-=h:(u.fixed==="right"||n!=null&&n(u)&&!u.fixed)&&(g+=h),m-g}),a}function zn(e,t,l,n,o,r,i){const a=e==null?[]:[...e];o&&a.sort((c,h)=>Ol(c.fixed)-Ol(h.fixed));const s=kn(a,(c,h,m)=>{var b,w,y;const g=Bt(c);if(g==null||l&&!l(c))return;const f=bt(n,v=>v.uid===g);return{uid:g,type:c.type,label:c.label||(c.type==="index"?t.columnIndex:c.type==="expand"?t.columnExpand:t.columnUntitled),checked:(b=f==null?void 0:f.checked)!=null?b:!c.hideInTable,fixed:r||m!=null?!1:(w=f==null?void 0:f.fixed)!=null?w:c.fixed,width:(y=Wn(i,c))!=null?y:c.width}});n&&n.length&&(s.sort((c,h)=>{const m=n.findIndex(b=>b.uid===c.uid),g=n.findIndex(b=>b.uid===h.uid),f=m===-1?s.indexOf(c):m,p=g===-1?s.indexOf(h):g;return f-p}),Ae(s,c=>{var h;if(c.children&&c.children.length){const m=(h=bt(n,g=>g.uid===c.uid))==null?void 0:h.children;m&&m.length&&c.children.sort((g,f)=>{const p=m.findIndex(v=>v.uid===g.uid),b=m.findIndex(v=>v.uid===f.uid),w=p===-1?s.indexOf(g):p,y=b===-1?s.indexOf(f):b;return w-y})}}));let u=!0,d=!1;return Ae(s,c=>{if(!c.checked&&u&&(u=!1),c.checked&&!d&&(d=!0),!u&&d)return!1}),{cols:s,checkAll:s.length>0&&u,indeterminate:!u&&d}}function Ja(e){return`${e}Size`}function Rl(e){return e?`${e}Cols`:void 0}function Za(e){return`${e}ColsWidth`}function Qa(e){if(e){const t=localStorage.getItem(e);if(t)try{const l=JSON.parse(t);return l&&Array.isArray(l)?l:void 0}catch(l){console.error(l)}}}function xc(e){if(e){const t=localStorage.getItem(Ja(e));if(t)return t}}function Gt(e){if(e){const t=localStorage.getItem(Za(e));if(t)try{const l=JSON.parse(t);return l&&Array.isArray(l)?l:void 0}catch(l){console.error(l)}}}function Wn(e,t){if(e==null||t==null)return;const l=Bt(t),n=bt(e,r=>r.uid===l);if(!n||n.width==null)return;if(n.width===""||typeof n.width=="string"&&!n.width.trim())return"";const o=Number(n.width);return isNaN(o)?n.width:o}function kc(e,t,l){if(l&&t){const n=Bt(t);if(n){const o=Gt(l)||[],r=o.find(i=>i.uid===n);r?r.width=e:o.push({uid:n,width:e}),localStorage.setItem(Za(l),JSON.stringify(o))}}}function Io(e){return e!=null?e:t=>JSON.stringify(t)}function Tc(e,t,l,n){if(!e)return"";if(e.type==="index")return Wa(l,e.index,n);const o=e.prop==null?void 0:Ke(t,e.prop);return typeof e.formatter=="function"?e.formatter(t,e,o,l):o==null?"":String(o)}function Ec(e,t){return e?typeof e.renderHeader=="function"?e.renderHeader({column:e,$index:t}):e.label==null?"":String(e.label):""}function er(e,t="children",l=0,n=[]){const o=[];let r=0;return e.forEach((i,a)=>{const s={row:i,index:a,level:l,childSize:0};o.push(s),n.forEach(d=>{d.childSize++});const u=i[t];if(u&&u.length){const{depth:d,nodes:c}=er(u,t,l+1,[...n,s]);r=Math.max(r,d),c.forEach(h=>{o.push(h)})}}),{depth:r+1,nodes:o}}function tr(e,t,l,n,o,r,i,a,s,u){const{nodes:d,depth:c}=er(e,a),{rows:h,cols:m}=Ka(t),g=m.some(y=>{var v;return((v=y.originalCol)==null?void 0:v.type)==="expand"})?s:!1;(c<=1||g)&&(s=!1);const f=s?void 0:m.findIndex(y=>{var v;return!((v=y.originalCol)!=null&&v.type)||!["index","expand","selection"].includes(y.originalCol.type)}),p=[];d.forEach((y,v)=>{const C=y.row,x=[],I=[];if(m.forEach(($,S)=>{const{key:R,originalCol:T}=$,D=`${v}-${S}-${R}`,{colspan:P,rowspan:V}=Va({column:T,columnIndex:S,row:C,rowIndex:v},l),B=P==0||V==0?"":Tc(T,C,v,n),le={key:D,row:C,index:v,column:T,text:B,colspan:P,rowspan:V,isTreeCell:c>1?S===f:!1,isTreeLeaf:!y.childSize,indent:y.level};if(T.type==="expand"){le.text=g?String(y.index+1):"",g&&!I.length&&(le.rowspan=2);const ie={key:"_expand_"+D,row:C,index:v,column:T,text:B,colspan:g?m.length-1:m.length,isExpandCell:!0};g?(I[0]={key:"_expand_0-"+D,row:C,index:v,rowspan:0,colspan:0,isExpandCell:!0},I[1]=ie):I[0]=ie}x.push(le)}),p.push(x),I.length&&p.push(I),s)for(let $=c-1;$>=0;$--){const S=$<y.level?0:1;x.unshift({key:`_index_${v}-${$}`,index:v,text:$===y.level?String(y.index+1):void 0,colspan:S,rowspan:$===y.level?y.childSize+1:S,isTreeIndex:!0,hideLeftBorder:$!==y.level,hideRightBorder:!!m.length})}});const b=[];u&&h.forEach((y,v)=>{const C=[];if(y.forEach(x=>{const{key:I,colspan:$,rowspan:S,originalCol:R}=x,D=$==0||S==0?"":Ec(R,v);C.push({key:I,index:v,column:R,text:D,colspan:$,rowspan:S})}),b.push(C),s)for(let x=c-1;x>=0;x--)C.unshift({key:`_index_th_${v}-${x}`,index:v,colspan:x===0&&v===0?c:0,rowspan:x===0&&v===0?h.length:0,isTreeIndex:!0})});const w=[];if(o&&e.length){const y=[],v=Ba(i,m,e);if(m.forEach((C,x)=>{const{key:I,dataKey:$,originalCol:S}=C,R=v==null?ja(e,$,x,r):v[x];y.push({key:I,column:S,text:R,index:0})}),w.push(y),s)for(let C=c-1;C>=0;C--)y.unshift({key:`_index_tf-${C}`,index:0,colspan:C===0?c:0,rowspan:C===0?h.length:0,isTreeIndex:!0})}if(s)for(let y=c-1;y>=0;y--)m.unshift({key:`_index_${y}`,width:26});return{headerData:b,bodyData:p,footerData:w,bodyCols:m}}function Oc(e,t,l,n){const o=[];[...t,...l,...n].forEach(a=>{const s=a.map(u=>{var m;const d=(m=u.text)!=null?m:"",c=typeof d=="string"?d.replace(/,/g,"，").replace(/\n/g,"    "):d;return!u.isTreeCell||!u.indent?c:Array.from({length:u.indent}).fill("  ").join("")+c});o.push(s.join(","))});const r=encodeURIComponent(o.join(`
`)),i=document.createElement("a");i.href="data:text/csv;charset=utf-8,"+r,i.download=e+".csv",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function Vl(e){return e.hideInExport?!1:!e.type||!["selection"].includes(e.type)}function Bl(e){return e.hideInPrint?!1:!e.type||!["selection"].includes(e.type)}function Hc(e){return e.hideInSetting?!1:!e.type||!["selection","index","expand"].includes(e.type)}const Fc={title:String,placement:{type:String,default:"top"},disabled:Boolean,clickHideTooltip:Boolean},Ic={click:e=>!0},Mc=Fe({name:"EleTool",props:Fc,emits:Ic,setup(e,{emit:t}){const l=vt(Hs,{}),[n,o]=ts(200),r=(u,d,c)=>{l.showTooltip&&l.showTooltip(u,d,c)},i=()=>{l.hideTooltip&&l.hideTooltip()},a=u=>{e.clickHideTooltip&&n(()=>{i()}),t("click",u)},s=u=>{e.title&&!e.disabled&&(o(),r(e.title,u.currentTarget,{placement:e.placement,offset:10}))};return ye([()=>e.disabled,()=>e.title],()=>{(!e.title||e.disabled)&&i()}),{handleClick:a,handleMouseover:s,showTooltip:r,hideTooltip:i}}}),$c=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Nc={class:"ele-tool-body"};function Dc(e,t,l,n,o,r){return A(),Y("div",{class:"ele-tool",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i)),onMouseover:t[1]||(t[1]=(...i)=>e.handleMouseover&&e.handleMouseover(...i))},[we("div",Nc,[Oe(e.$slots,"default")])],32)}const lr=$c(Mc,[["render",Dc]]),Ac=Fe({name:"ToolColumnList",components:{VueDraggable:Is,ElCheckbox:gt,ElIcon:St,ElInput:Vo,HolderOutlined:ls,VerticalRightOutlined:ns,VerticalLeftOutlined:os},props:{data:Array,parent:Object,sortable:Boolean,allowFixed:Boolean,allowWidth:Boolean,columnWidthPlaceholder:String},emits:{sortChange:(e,t)=>!0,checkedChange:(e,t)=>!0,fixedLeft:e=>!0,fixedRight:e=>!0,fixedLeftTooltip:e=>!0,fixedRightTooltip:e=>!0,colWidthChange:(e,t)=>!0},setup(e,{emit:t}){const l=h=>{s(h,e.parent)},n=(h,m)=>{t("checkedChange",h,m)},o=h=>{t("fixedLeft",h)},r=h=>{t("fixedRight",h)},i=h=>{u(h.currentTarget)},a=h=>{d(h.currentTarget)},s=(h,m)=>{t("sortChange",h,m)},u=h=>{t("fixedLeftTooltip",h)},d=h=>{t("fixedRightTooltip",h)};return{handleSortChange:l,handleCheckedChange:n,handleFixedLeft:o,handleFixedRight:r,handleFixedLeftTooltip:i,handleFixedRightTooltip:a,handleChildSortChange:s,handleChildFixedLeftTooltip:u,handleChildFixedRightTooltip:d,handleColWidthChange:(h,m)=>{t("colWidthChange",h,m)}}}}),Pc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Lc={class:"ele-tool-column-item"},Kc={class:"ele-tool-column-item-body"},zc={key:0,class:"ele-tool-column-handle"},Wc={class:"ele-tool-column-label"},Vc={key:1,class:"ele-tool-column-fixed"},Bc=["onClick"],jc=["onClick"],_c={key:2,class:"ele-tool-column-input"};function Uc(e,t,l,n,o,r){const i=W("HolderOutlined"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("VerticalRightOutlined"),d=W("VerticalLeftOutlined"),c=W("ElInput"),h=W("ToolColumnList",!0),m=W("VueDraggable");return A(),se(m,{itemKey:"uid",animation:300,modelValue:e.data,setData:()=>{},handle:".ele-tool-column-handle",componentData:{class:"ele-tool-column-list"},forceFallback:!0,"onUpdate:modelValue":e.handleSortChange},{item:G(({element:g})=>[we("div",Lc,[we("div",Kc,[e.sortable?(A(),Y("div",zc,[N(a,null,{default:G(()=>[N(i)]),_:1})])):fe("",!0),we("div",Wc,[N(s,{label:g.label,modelValue:g.checked,"onUpdate:modelValue":f=>e.handleCheckedChange(g,f)},null,8,["label","modelValue","onUpdate:modelValue"])]),e.allowFixed?(A(),Y("div",Vc,[we("div",{class:Re(["ele-tool-column-fixed-item",{"is-active":g.fixed===!0||g.fixed==="left"}]),onClick:f=>e.handleFixedLeft(g),onMouseover:t[0]||(t[0]=(...f)=>e.handleFixedLeftTooltip&&e.handleFixedLeftTooltip(...f))},[N(a,null,{default:G(()=>[N(u)]),_:1})],42,Bc),we("div",{class:Re(["ele-tool-column-fixed-item",{"is-active":g.fixed==="right"}]),onClick:f=>e.handleFixedRight(g),onMouseover:t[1]||(t[1]=(...f)=>e.handleFixedRightTooltip&&e.handleFixedRightTooltip(...f))},[N(a,null,{default:G(()=>[N(d)]),_:1})],42,jc)])):fe("",!0),e.allowWidth?(A(),Y("div",_c,[N(c,{size:"small",maxlength:12,modelValue:g.width,placeholder:e.columnWidthPlaceholder,"onUpdate:modelValue":f=>e.handleColWidthChange(g,f)},null,8,["modelValue","placeholder","onUpdate:modelValue"])])):fe("",!0)]),g.children&&g.children.length?(A(),se(h,{key:0,data:g.children,parent:g,sortable:e.sortable,allowWidth:e.allowWidth,columnWidthPlaceholder:e.columnWidthPlaceholder,onSortChange:e.handleChildSortChange,onCheckedChange:e.handleCheckedChange,onFixedLeft:e.handleFixedLeft,onFixedRight:e.handleFixedRight,onFixedLeftTooltip:e.handleChildFixedLeftTooltip,onFixedRightTooltip:e.handleChildFixedRightTooltip,onColWidthChange:e.handleColWidthChange},null,8,["data","parent","sortable","allowWidth","columnWidthPlaceholder","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip","onColWidthChange"])):fe("",!0)])]),_:1},8,["modelValue","onUpdate:modelValue"])}const Vn=Pc(Ac,[["render",Uc]]),qc=Fe({name:"ToolColumn",components:{ElCheckbox:gt,ElIcon:St,SettingOutlined:as,EleTooltip:En,EleTool:lr,ToolColumnList:Vn},props:{placement:String,locale:{type:Object,required:!0},columns:Array,sortable:Boolean,allowFixed:Boolean,cacheKey:String},emits:{"update:columns":(e,t,l)=>!0},setup(e,{emit:t}){const l=O(null),n=O([]),o=O(!1),r=O(!1),i=()=>{const{cols:w,checkAll:y,indeterminate:v}=zn(e.columns,e.locale,Hc,Qa(Rl(e.cacheKey)));n.value=w,o.value=y,r.value=v},a=w=>{const y=Gt(e.cacheKey),v=Ht(e.columns,n.value,e.sortable,x=>x.hideInSetting,void 0,!1,y),C=Ht(e.columns,n.value,e.sortable,x=>x.hideInSetting,void 0,!0,y);t("update:columns",v,C,!!w)},s=()=>{e.cacheKey&&localStorage.setItem(Rl(e.cacheKey),JSON.stringify(n.value))},u=()=>{e.cacheKey&&localStorage.removeItem(Rl(e.cacheKey))},d=(w,y)=>{let v=!0,C=!1;Ae(n.value,x=>{if(x.uid===w.uid&&(x.checked=y),!x.checked&&v&&(v=!1),x.checked&&!C&&(C=!0),x.uid===w.uid&&!v&&C)return!1}),o.value=n.value.length>0&&v,r.value=!v&&C,s(),a()},c=w=>{o.value=w,r.value=!1,Ae(n.value,y=>{y.checked!==w&&(y.checked=w)}),s(),a()},h=(w,y)=>{y?Ae(n.value,v=>{if(v.uid===y.uid)return v.children=w,!1}):n.value=w,s(),a()},m=w=>{Ae(n.value,y=>{if(y.uid===w.uid)return y.fixed=y.fixed===!0||y.fixed==="left"?!1:"left",!1}),s(),a()},g=w=>{Ae(n.value,y=>{if(y.uid===w.uid)return y.fixed=y.fixed==="right"?!1:"right",!1}),s(),a()},f=w=>{var y;l.value&&l.value.showTooltip((y=e.locale.columnFixedLeft)!=null?y:"",w)},p=w=>{var y;l.value&&l.value.showTooltip((y=e.locale.columnFixedRight)!=null?y:"",w)},b=()=>{u(),i(),a(!0)};return ye([()=>e.columns,()=>e.locale],()=>{i()},{immediate:!0,deep:!0}),{toolRef:l,colItems:n,isCheckAll:o,isIndeterminate:r,handleCheckedChange:d,handleCheckAllChange:c,handleReset:b,handleSortChange:h,handleFixedLeft:m,handleFixedRight:g,handleFixedLeftTooltip:f,handleFixedRightTooltip:p}}}),Gc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Yc={class:"ele-tool-column-header"},Xc={class:"ele-tool-column-label"};function Jc(e,t,l,n,o,r){const i=W("SettingOutlined"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("ToolColumnList"),d=W("EleTooltip"),c=W("EleTool");return A(),se(c,{ref:"toolRef",title:e.locale.columns,placement:e.placement,clickHideTooltip:!0},{default:G(()=>[N(d,{trigger:"click",placement:"bottom-end",popperClass:"ele-tool-column-popover",transition:"el-zoom-in-top",gpuAcceleration:!1,effect:"light",isPopover:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"offset",options:{offset:[20,10]}}]}},{body:G(()=>[we("div",{class:Re(["ele-popover-body","ele-tool-column",{"is-sortable":e.sortable}])},[we("div",Yc,[we("div",Xc,[N(s,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[0]||(t[0]=(...h)=>e.handleReset&&e.handleReset(...h))},Ve(e.locale.columnReset),1)]),e.colItems.length?(A(),se(u,{key:0,data:e.colItems,sortable:e.sortable,allowFixed:e.allowFixed,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onFixedLeft:e.handleFixedLeft,onFixedRight:e.handleFixedRight,onFixedLeftTooltip:e.handleFixedLeftTooltip,onFixedRightTooltip:e.handleFixedRightTooltip},null,8,["data","sortable","allowFixed","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip"])):fe("",!0)],2)]),default:G(()=>[N(a,null,{default:G(()=>[N(i)]),_:1})]),_:1})]),_:1},8,["title","placement"])}const Zc=Gc(qc,[["render",Jc]]),Qc=Fe({name:"ToolExport",components:{ElForm:Bo,ElFormItem:jo,ElInput:Vo,ElSelect:_o,ElOption:Uo,ElCheckbox:gt,ElButton:Tn,EleModal:qo,ToolColumnList:Vn},props:{locale:{type:Object,required:!0},cacheKey:String,modalProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,pageIndex:Number,treeProps:Object,fetch:Function,defaultFileName:{type:String,default:"list"},defaultDataType:{type:String,default:"pageData"},defaultShowFooter:{type:Boolean,default:!0},defaultShowTreeIndex:Boolean,beforeExport:Function},setup(e){const t=O(!1),l=O(!1),n=O(null),o=rl({fileName:e.defaultFileName}),r=rl({required:!0,message:e.locale.exportFileNamePlaceholder,type:"string",trigger:"blur"}),i=O(e.defaultDataType),a=O([]),s=O(!1),u=O(!1),d=O(!0),c=O(!1),h=O(!1),m=O(!0),g=()=>{l.value=!0},f=()=>{l.value=!1},p=()=>{t.value=!0},b=()=>{f(),t.value=!1},w=T=>{var Q,ue,Ee,de,Se;var D;g();const P=(Q=T==null?void 0:T.fileName)!=null?Q:o.fileName,V=(T==null?void 0:T.data)||[],j=(ue=T==null?void 0:T.showHeader)!=null?ue:d.value,B=(Ee=T==null?void 0:T.showFooter)!=null?Ee:c.value,le=(de=T==null?void 0:T.showTreeIndex)!=null?de:h.value,ie=(Se=T==null?void 0:T.dataType)!=null?Se:i.value,L=(T==null?void 0:T.columns)||Ht(e.columns,a.value,!0,void 0,Vl,!1,a.value),q=(T==null?void 0:T.columns)||Ht(e.columns,a.value,!0,void 0,Vl,!0,a.value),{headerData:ne,bodyData:ce,footerData:k,bodyCols:z}=tr(V,L,e.spanMethod,e.pageIndex,B,e.sumText,e.summaryMethod,(D=e.treeProps)==null?void 0:D.children,le,j);typeof e.beforeExport=="function"&&e.beforeExport({data:V,columns:L,headerData:ne,bodyData:ce,footerData:k,bodyCols:z,fileName:P,dataType:ie,hideLoading:f,closeModal:b,showHeader:j,showFooter:B,showTreeIndex:le,tableColumns:q})===!1||(Oc(P,ne,ce,k),f(),b())},y=()=>{var T,D;(D=(T=n.value)==null?void 0:T.validate)==null||D.call(T,P=>{if(P){if(i.value==="selections"){w({data:[...e.selections||[]]});return}if(i.value!=="data"){w({data:[...e.pageData||[]]});return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(g(),e.fetch(V=>{e.datasource(V).then(j=>{if(j==null){f(),b();return}w({data:j})}).catch(j=>{console.error(j),f()})}))}})},v=()=>{const T=Gt(e.cacheKey),{cols:D,checkAll:P,indeterminate:V}=zn(e.columns,e.locale,Vl,void 0,!0,!0,T);a.value=D,s.value=P,u.value=V},C=(T,D,P)=>{let V=!0,j=!1;Ae(a.value,B=>{const le=T==null?P===B.type:B.uid===T.uid;if(le&&(B.checked=D),!B.checked&&V&&(V=!1),B.checked&&!j&&(j=!0),le&&!V&&j)return!1}),s.value=a.value.length>0&&V,u.value=!V&&j},x=T=>{s.value=T,u.value=!1,Ae(a.value,D=>{D.checked!==T&&(D.checked=T)})},I=(T,D)=>{D?Ae(a.value,P=>{if(P.uid===D.uid)return P.children=T,!1}):a.value=T},$=(T,D)=>{Ae(a.value,P=>{if(P.uid===T.uid)return P.width=D,!1})},S=()=>{v()},R=T=>{T&&C(void 0,!1,"index")};return ye(t,T=>{var D,P;if(T){o.fileName=e.defaultFileName,i.value=e.defaultDataType,v(),d.value=!!e.tableHeader,c.value=e.showSummary?!!e.defaultShowFooter:!1,m.value=!(e.pageData&&e.pageData.some(V=>{var j,B,le;return((B=V[((j=e.treeProps)==null?void 0:j.children)||"children"])==null?void 0:B.length)||V[((le=e.treeProps)==null?void 0:le.hasChildren)||"hasChildren"]}))&&bt(a.value,V=>V.type==="expand")==null,h.value=m.value?!1:!!e.defaultShowTreeIndex;return}f(),(P=(D=n.value)==null?void 0:D.clearValidate)==null||P.call(D)}),ye(()=>e.locale.exportFileNamePlaceholder,T=>{r.message=T}),{visible:t,loading:l,formRef:n,form:o,fileNameRules:r,dataType:i,colItems:a,isCheckAll:s,isIndeterminate:u,showHeader:d,showFooter:c,showTreeIndex:h,treeIndexDisabled:m,openModal:p,closeModal:b,handleExport:y,handleCheckedChange:C,handleSortChange:I,handleColWidthChange:$,handleCheckAllChange:x,handleReset:S,handleTreeIndexChange:R,exportData:w}}}),ef=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},tf={class:"ele-tool-column is-sortable"},lf={class:"ele-tool-column-header"},nf={class:"ele-tool-column-label"},of={class:"ele-tool-form-options"};function af(e,t,l,n,o,r){const i=W("ElInput"),a=W("ElFormItem"),s=W("ElOption"),u=W("ElSelect"),d=W("ElCheckbox"),c=W("ToolColumnList"),h=W("ElForm"),m=W("ElButton"),g=W("EleModal");return A(),se(g,xe({form:!0,width:"460px",title:e.locale.export,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[7]||(t[7]=f=>e.visible=f)}),{footer:G(()=>[N(m,{onClick:e.closeModal},{default:G(()=>[Ct(Ve(e.locale.exportCancel),1)]),_:1},8,["onClick"]),N(m,{loading:e.loading,type:"primary",onClick:e.handleExport},{default:G(()=>[Ct(Ve(e.locale.exportOk),1)]),_:1},8,["loading","onClick"])]),default:G(()=>[N(h,{ref:"formRef",model:e.form,labelWidth:"80px",onSubmit:t[6]||(t[6]=$l(()=>{},["prevent"])),class:"ele-tool-export-form"},{default:G(()=>[N(a,{label:e.locale.exportFileName,prop:"fileName",rules:e.fileNameRules},{default:G(()=>[N(i,{maxlength:200,clearable:!0,modelValue:e.form.fileName,"onUpdate:modelValue":t[0]||(t[0]=f=>e.form.fileName=f),placeholder:e.locale.exportFileNamePlaceholder},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),N(a,{label:e.locale.exportSelectData},{default:G(()=>[N(u,{modelValue:e.dataType,"onUpdate:modelValue":t[1]||(t[1]=f=>e.dataType=f),placeholder:e.locale.exportSelectData},{default:G(()=>[e.pageData!=null?(A(),se(s,{key:0,value:"pageData",label:e.locale.exportDataTypePage},null,8,["label"])):fe("",!0),e.selections!=null?(A(),se(s,{key:1,value:"selections",label:e.locale.exportDataTypeSelected},null,8,["label"])):fe("",!0),e.datasource!=null?(A(),se(s,{key:2,value:"data",label:e.locale.exportDataTypeAll},null,8,["label"])):fe("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),N(a,{label:e.locale.exportSelectColumn},{default:G(()=>[we("div",tf,[we("div",lf,[we("div",nf,[N(d,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[2]||(t[2]=(...f)=>e.handleReset&&e.handleReset(...f))},Ve(e.locale.columnReset),1)]),N(c,{data:e.colItems,sortable:!0,allowWidth:!0,columnWidthPlaceholder:e.locale.columnWidth,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onColWidthChange:e.handleColWidthChange},null,8,["data","columnWidthPlaceholder","onSortChange","onCheckedChange","onColWidthChange"])])]),_:1},8,["label"]),N(a,{label:e.locale.exportOther},{default:G(()=>[we("div",of,[N(d,{label:e.locale.exportOtherHeader,modelValue:e.showHeader,"onUpdate:modelValue":t[3]||(t[3]=f=>e.showHeader=f)},null,8,["label","modelValue"]),N(d,{label:e.locale.exportOtherFooter,modelValue:e.showFooter,"onUpdate:modelValue":t[4]||(t[4]=f=>e.showFooter=f),disabled:!e.showSummary},null,8,["label","modelValue","disabled"]),N(d,{label:e.locale.exportOtherTreeIndex,modelValue:e.showTreeIndex,"onUpdate:modelValue":t[5]||(t[5]=f=>e.showTreeIndex=f),disabled:e.treeIndexDisabled,onChange:e.handleTreeIndexChange},null,8,["label","modelValue","disabled","onChange"])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},16,["title","modelValue"])}const rf=ef(Qc,[["render",af]]),sf=Fe({name:"ToolPrintBodyCell",components:{ElIcon:St,ArrowDown:Wo,CellRender:Xt},props:{col:{type:Object,required:!0},columnIndex:Number,bodyCellStyle:[Object,Function],bodyCellClass:[String,Function]},setup(e,{slots:t}){const l=F(()=>{const{text:i,row:a,column:s,index:u}=e.col,d=[{row:a,column:s,$index:u}],c=s?s.printSlot||s.slot:void 0;return s&&s.type!=="expand"&&c&&typeof t[c]=="function"?{render:t[c],params:d}:{render:()=>i,params:d}}),n=F(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index,row:e.col.row})),o=F(()=>typeof e.bodyCellStyle=="function"?n.value.column==null?void 0:e.bodyCellStyle(n.value):e.bodyCellStyle),r=F(()=>{const i=[],a=n.value.column;if(a){if(a.align&&i.push("is-align-"+a.align),typeof e.bodyCellClass=="function"){const s=e.bodyCellClass(n.value);s&&i.push(s)}else e.bodyCellClass&&i.push(e.bodyCellClass);a.className&&i.push(a.className)}return i.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:r}}}),uf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},df=["colspan","rowspan"];function cf(e,t,l,n,o,r){var i;const a=W("ArrowDown"),s=W("ElIcon"),u=W("CellRender");return A(),Y("td",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:Xe(e.cellStyle),class:Re(e.cellClass)},[((i=e.col.column)==null?void 0:i.type)==="expand"?(A(),Y(Ne,{key:0},[e.col.text?(A(),Y(Ne,{key:0},[Ct(Ve(e.col.text),1)],64)):(A(),se(s,{key:1,style:{"vertical-align":"middle"},class:"ele-print-expand-icon"},{default:G(()=>[N(a)]),_:1}))],64)):(A(),Y(Ne,{key:1},[e.col.isTreeCell?(A(),Y(Ne,{key:0},[e.col.indent?(A(),Y("span",{key:0,style:Xe({paddingLeft:`${e.col.indent*16}px`}),class:"ele-print-tree-indent"},null,4)):fe("",!0),N(s,{style:Xe({verticalAlign:"middle",marginRight:"2px",visibility:e.col.isTreeLeaf?"hidden":void 0}),class:"ele-print-tree-icon"},{default:G(()=>[N(a)]),_:1},8,["style"])],64)):fe("",!0),N(u,Qe(mt(e.renderOpt)),null,16)],64))],14,df)}const ff=uf(sf,[["render",cf]]),hf=Fe({name:"ToolPrintHeaderCell",components:{CellRender:Xt},props:{col:{type:Object,required:!0},columnIndex:Number,headerCellStyle:[Object,Function],headerCellClass:[String,Function]},setup(e,{slots:t}){const l=F(()=>{const{text:i,column:a}=e.col,s=[{column:a,$index:e.columnIndex}],u=a?a.printHeaderSlot||a.headerSlot:void 0;return a&&u&&typeof t[u]=="function"?{render:t[u],params:s}:{render:()=>i,params:s}}),n=F(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index})),o=F(()=>typeof e.headerCellStyle=="function"?n.value.column==null?void 0:e.headerCellStyle(n.value):e.headerCellStyle),r=F(()=>{const i=[],a=n.value.column;if(a){const s=a.headerAlign||a.align;if(s&&i.push("is-align-"+s),typeof e.headerCellClass=="function"){const u=e.headerCellClass(n.value);u&&i.push(u)}else e.headerCellClass&&i.push(e.headerCellClass);a.labelClassName&&i.push(a.labelClassName)}return i.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:r}}}),mf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},gf=["colspan","rowspan"];function vf(e,t,l,n,o,r){const i=W("CellRender");return A(),Y("th",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:Xe(e.cellStyle),class:Re(e.cellClass)},[N(i,Qe(mt(e.renderOpt)),null,16)],14,gf)}const pf=mf(hf,[["render",vf]]),yf=["printTop","printBottom"],Cf=Fe({name:"ToolPrint",components:{ElForm:Bo,ElFormItem:jo,ElSelect:_o,ElOption:Uo,ElCheckbox:gt,ElButton:Tn,EleModal:qo,ElePrinter:Ms,EleTable:$s,CellRender:Xt,ToolColumnList:Vn,ToolPrintBodyCell:ff,ToolPrintHeaderCell:pf},props:{locale:{type:Object,required:!0},cacheKey:String,modalProps:Object,printerProps:Object,tableProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,treeProps:Object,fetch:Function,defaultDataType:{type:String,default:"pageData"},defaultShowFooter:{type:Boolean,default:!0},defaultShowTreeIndex:Boolean,beforePrint:Function},setup(e){const t=O(!1),l=O(!1),n=O(e.defaultDataType),o=O([]),r=O(!1),i=O(!1),a=O(!0),s=O(!1),u=O(!1),d=O(!0),c=rl({printing:!1,headerData:[],bodyData:[],footerData:[],hasHeader:!1,hasFooter:!1,bodyCols:[],data:[]}),h=()=>{l.value=!0},m=()=>{l.value=!1},g=()=>{t.value=!0},f=()=>{m(),t.value=!1},p=()=>{m()},b=R=>{var k,z,Q,ue;var T;h();const D=(R==null?void 0:R.data)||[],P=(k=R==null?void 0:R.showHeader)!=null?k:a.value,V=(z=R==null?void 0:R.showFooter)!=null?z:s.value,j=(Q=R==null?void 0:R.showTreeIndex)!=null?Q:u.value,B=(ue=R==null?void 0:R.dataType)!=null?ue:n.value,le=(R==null?void 0:R.columns)||Ht(e.columns,o.value,!0,void 0,Bl,!1,o.value),ie=(R==null?void 0:R.columns)||Ht(e.columns,o.value,!0,void 0,Bl,!0,o.value),{headerData:L,bodyData:q,footerData:ne,bodyCols:ce}=tr(D,le,e.spanMethod,e.pageIndex,V,e.sumText,e.summaryMethod,(T=e.treeProps)==null?void 0:T.children,j,P);typeof e.beforePrint=="function"&&e.beforePrint({data:D,columns:le,headerData:L,bodyData:q,footerData:ne,bodyCols:ce,dataType:B,hideLoading:m,closeModal:f,showHeader:P,showFooter:V,showTreeIndex:j,tableColumns:ie})===!1||(c.data=D,c.headerData=L,c.bodyData=q,c.footerData=ne,c.hasHeader=!!c.headerData.length,c.hasFooter=!!c.footerData.length,c.bodyCols=ce,tt(()=>{c.printing=!0}))},w=()=>{if(n.value==="selections"){b({data:[...e.selections||[]]});return}if(n.value!=="data"){b({data:[...e.pageData||[]]});return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(h(),e.fetch(R=>{e.datasource(R).then(T=>{if(T==null){m(),f();return}b({data:T})}).catch(T=>{console.error(T),m()})}))},y=()=>{const R=Gt(e.cacheKey),{cols:T,checkAll:D,indeterminate:P}=zn(e.columns,e.locale,Bl,void 0,!0,!0,R);o.value=T,r.value=D,i.value=P},v=(R,T,D)=>{let P=!0,V=!1;Ae(o.value,j=>{const B=R==null?D===j.type:j.uid===R.uid;if(B&&(j.checked=T),!j.checked&&P&&(P=!1),j.checked&&!V&&(V=!0),B&&!P&&V)return!1}),r.value=o.value.length>0&&P,i.value=!P&&V},C=R=>{r.value=R,i.value=!1,Ae(o.value,T=>{T.checked!==R&&(T.checked=R)})},x=(R,T)=>{T?Ae(o.value,D=>{if(D.uid===T.uid)return D.children=R,!1}):o.value=R},I=(R,T)=>{Ae(o.value,D=>{if(D.uid===R.uid)return D.width=T,!1})},$=()=>{y()},S=R=>{R&&v(void 0,!1,"index")};return ye(t,R=>{if(R){n.value=e.defaultDataType,y(),a.value=!!e.tableHeader,s.value=e.showSummary?!!e.defaultShowFooter:!1,d.value=!(e.pageData&&e.pageData.some(T=>{var D,P,V;return((P=T[((D=e.treeProps)==null?void 0:D.children)||"children"])==null?void 0:P.length)||T[((V=e.treeProps)==null?void 0:V.hasChildren)||"hasChildren"]}))&&bt(o.value,T=>T.type==="expand")==null,u.value=d.value?!1:!!e.defaultShowTreeIndex;return}c.data=[],c.headerData=[],c.bodyData=[],c.footerData=[],c.bodyCols=[],c.hasHeader=!1,c.hasFooter=!1,c.printing=!1,m()}),{ownSlots:yf,visible:t,loading:l,dataType:n,colItems:o,isCheckAll:r,isIndeterminate:i,showHeader:a,showFooter:s,showTreeIndex:u,treeIndexDisabled:d,printOptions:c,openModal:g,closeModal:f,handlePrintDone:p,handlePrint:w,handleCheckedChange:v,handleSortChange:x,handleColWidthChange:I,handleCheckAllChange:C,handleReset:$,handleTreeIndexChange:S,printData:b}}}),bf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},wf={class:"ele-tool-column is-sortable"},Sf={class:"ele-tool-column-header"},Rf={class:"ele-tool-column-label"},xf={class:"ele-tool-form-options"},kf=["width"],Tf={key:0},Ef=["colspan","rowspan"],Of=["rowspan","colspan"],Hf=["colspan","rowspan"],Ff={key:1},If=["colspan","rowspan"];function Mf(e,t,l,n,o,r){const i=W("ElOption"),a=W("ElSelect"),s=W("ElFormItem"),u=W("ElCheckbox"),d=W("ToolColumnList"),c=W("ElForm"),h=W("ElButton"),m=W("EleModal"),g=W("ToolPrintHeaderCell"),f=W("ToolPrintBodyCell"),p=W("CellRender"),b=W("EleTable"),w=W("ElePrinter");return A(),Y(Ne,null,[N(m,xe({form:!0,width:"460px",title:e.locale.print,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=y=>e.visible=y)}),{footer:G(()=>[N(h,{onClick:e.closeModal},{default:G(()=>[Ct(Ve(e.locale.exportCancel),1)]),_:1},8,["onClick"]),N(h,{loading:e.loading,type:"primary",onClick:e.handlePrint},{default:G(()=>[Ct(Ve(e.locale.exportOk),1)]),_:1},8,["loading","onClick"])]),default:G(()=>[N(c,{labelWidth:"80px",onSubmit:t[5]||(t[5]=$l(()=>{},["prevent"])),class:"ele-tool-print-form"},{default:G(()=>[N(s,{label:e.locale.exportSelectData},{default:G(()=>[N(a,{modelValue:e.dataType,"onUpdate:modelValue":t[0]||(t[0]=y=>e.dataType=y),placeholder:e.locale.exportSelectData},{default:G(()=>[e.pageData!=null?(A(),se(i,{key:0,value:"pageData",label:e.locale.exportDataTypePage},null,8,["label"])):fe("",!0),e.selections!=null?(A(),se(i,{key:1,value:"selections",label:e.locale.exportDataTypeSelected},null,8,["label"])):fe("",!0),e.datasource!=null?(A(),se(i,{key:2,value:"data",label:e.locale.exportDataTypeAll},null,8,["label"])):fe("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),N(s,{label:e.locale.exportSelectColumn},{default:G(()=>[we("div",wf,[we("div",Sf,[we("div",Rf,[N(u,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[1]||(t[1]=(...y)=>e.handleReset&&e.handleReset(...y))},Ve(e.locale.columnReset),1)]),N(d,{data:e.colItems,sortable:!0,allowWidth:!0,columnWidthPlaceholder:e.locale.columnWidth,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onColWidthChange:e.handleColWidthChange},null,8,["data","columnWidthPlaceholder","onSortChange","onCheckedChange","onColWidthChange"])])]),_:1},8,["label"]),N(s,{label:e.locale.exportOther},{default:G(()=>[we("div",xf,[N(u,{label:e.locale.exportOtherHeader,modelValue:e.showHeader,"onUpdate:modelValue":t[2]||(t[2]=y=>e.showHeader=y)},null,8,["label","modelValue"]),N(u,{label:e.locale.exportOtherFooter,modelValue:e.showFooter,"onUpdate:modelValue":t[3]||(t[3]=y=>e.showFooter=y),disabled:!e.showSummary},null,8,["label","modelValue","disabled"]),N(u,{label:e.locale.exportOtherTreeIndex,modelValue:e.showTreeIndex,"onUpdate:modelValue":t[4]||(t[4]=y=>e.showTreeIndex=y),disabled:e.treeIndexDisabled,onChange:e.handleTreeIndexChange},null,8,["label","modelValue","disabled","onChange"])])]),_:1},8,["label"])]),_:1})]),_:1},16,["title","modelValue"]),N(w,xe({target:"_iframe"},e.printerProps||{},{modelValue:e.printOptions.printing,"onUpdate:modelValue":t[7]||(t[7]=y=>e.printOptions.printing=y),onDone:e.handlePrintDone}),{default:G(()=>[Oe(e.$slots,"printTop",{data:e.printOptions.data}),N(b,xe({border:!0,printSkin:!0,hasHeader:e.printOptions.hasHeader,hasFooter:e.printOptions.hasFooter},e.tableProps||{}),{default:G(()=>[we("colgroup",null,[(A(!0),Y(Ne,null,Le(e.printOptions.bodyCols,y=>(A(),Y("col",{key:y.key,width:y.width},null,8,kf))),128))]),e.printOptions.hasHeader?(A(),Y("thead",Tf,[(A(!0),Y(Ne,null,Le(e.printOptions.headerData,(y,v)=>(A(),Y("tr",{key:v},[(A(!0),Y(Ne,null,Le(y,(C,x)=>(A(),Y(Ne,{key:C.key},[C.isTreeIndex?(A(),Y(Ne,{key:0},[C.rowspan!==0&&C.colspan!==0?(A(),Y("th",{key:0,colspan:C.colspan,rowspan:C.rowspan,class:"ele-print-tree-index"},null,8,Ef)):fe("",!0)],64)):C.rowspan!==0&&C.colspan!==0?(A(),se(g,{key:1,col:C,columnIndex:x,headerCellStyle:e.headerCellStyle,headerCellClass:e.headerCellClassName},ct({_:2},[Le(Object.keys(e.$slots).filter(I=>!e.ownSlots.includes(I)),I=>({name:I,fn:G($=>[Oe(e.$slots,I,xe({ref_for:!0},$||{}))])}))]),1032,["col","columnIndex","headerCellStyle","headerCellClass"])):fe("",!0)],64))),128))]))),128))])):fe("",!0),we("tbody",null,[(A(!0),Y(Ne,null,Le(e.printOptions.bodyData,(y,v)=>(A(),Y("tr",{key:v},[(A(!0),Y(Ne,null,Le(y,(C,x)=>(A(),Y(Ne,{key:C.key},[C.isExpandCell?(A(),Y(Ne,{key:0},[C.rowspan!==0&&C.colspan!==0?(A(),Y("td",{key:0,rowspan:C.rowspan,colspan:C.colspan,style:{"padding-left":"0","padding-right":"0"},class:"ele-print-expand-td"},[C.column&&(C.column.printSlot||C.column.slot)&&!e.ownSlots.includes(C.column.printSlot||C.column.slot)?Oe(e.$slots,C.column.printSlot||C.column.slot,xe({key:0,ref_for:!0},{row:C.row,column:C.column,$index:C.index})):fe("",!0)],8,Of)):fe("",!0)],64)):C.isTreeIndex?(A(),Y(Ne,{key:1},[C.rowspan!==0&&C.colspan!==0?(A(),Y("td",{key:0,colspan:C.colspan,rowspan:C.rowspan,style:Xe({paddingLeft:0,paddingRight:0,textAlign:"center",verticalAlign:"top",borderLeftColor:C.hideLeftBorder?"transparent":void 0}),class:Re(["ele-print-tree-index",{"is-placeholder":!C.text}])},Ve(C.text),15,Hf)):fe("",!0)],64)):C.rowspan!==0&&C.colspan!==0?(A(),se(f,{key:2,col:C,columnIndex:x,bodyCellStyle:e.cellStyle,bodyCellClass:e.cellClassName},ct({_:2},[Le(Object.keys(e.$slots).filter(I=>!e.ownSlots.includes(I)),I=>({name:I,fn:G($=>[Oe(e.$slots,I,xe({ref_for:!0},$||{}))])}))]),1032,["col","columnIndex","bodyCellStyle","bodyCellClass"])):fe("",!0)],64))),128))]))),128))]),e.printOptions.hasFooter?(A(),Y("tfoot",Ff,[(A(!0),Y(Ne,null,Le(e.printOptions.footerData,(y,v)=>(A(),Y("tr",{key:v},[(A(!0),Y(Ne,null,Le(y,C=>(A(),Y(Ne,null,[C.rowspan!==0&&C.colspan!==0?(A(),Y("td",{key:C.key,colspan:C.colspan,rowspan:C.rowspan},[C.isExpandCell?fe("",!0):(A(),se(p,{key:0,render:()=>C.text,params:[]},null,8,["render"]))],8,If)):fe("",!0)],64))),256))]))),128))])):fe("",!0)]),_:3},16,["hasHeader","hasFooter"]),Oe(e.$slots,"printBottom",{data:e.printOptions.data})]),_:3},16,["modelValue","onDone"])],64)}const $f=bf(Cf,[["render",Mf]]),Nf=["default","printTop","printBottom"],Df=Fe({name:"TableTools",components:{ElIcon:St,ReloadOutlined:rs,DownloadOutlined:ss,PrinterOutlined:is,ColumnHeightOutlined:us,FullscreenOutlined:ds,FullscreenExitOutlined:cs,EleDropdown:fs,EleTool:lr,ToolColumn:Zc,ToolExport:rf,ToolPrint:$f},props:{tools:{type:Array,required:!0},size:String,columns:Array,columnSortable:Boolean,columnFixed:Boolean,maximized:Boolean,cacheKey:String,locale:Object,selections:Array,pageData:Array,spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,treeProps:Object,fetch:Function,exportConfig:{type:Object,required:!0},printConfig:{type:Object,required:!0}},emits:{reload:()=>!0,"update:size":e=>!0,"update:columns":(e,t,l)=>!0,"update:maximized":e=>!0},setup(e,{emit:t}){const{lang:l}=hs("table",e),n=O(null),o=O(null),r=F(()=>e.maximized?"bottom":"top"),i=F(()=>[{title:l.value.sizeLarge,command:"large",icon:Al(ms)},{title:l.value.sizeDefault,command:"default",icon:Al(gs)},{title:l.value.sizeSmall,command:"small",icon:Al(vs)}]);return{ownSlots:Nf,lang:l,toolExportRef:n,toolPrintRef:o,placement:r,sizeDropdownItems:i,reload:()=>{t("reload")},updateSize:f=>{e.cacheKey&&localStorage.setItem(Ja(e.cacheKey),f),t("update:size",f)},updateColumns:(f,p,b)=>{t("update:columns",f,p,b)},toggleMaximized:()=>{t("update:maximized",!e.maximized)},openExportModal:()=>{n.value&&n.value.openModal()},openPrintModal:()=>{o.value&&o.value.openModal()},printData:f=>{o.value&&o.value.printData(f)},exportData:f=>{n.value&&n.value.exportData(f)}}}}),Af=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Pf(e,t,l,n,o,r){var w,y;const i=W("ToolExport"),a=W("ToolPrint"),s=W("ReloadOutlined"),u=W("ElIcon"),d=W("EleTool"),c=W("DownloadOutlined"),h=W("PrinterOutlined"),m=W("ColumnHeightOutlined"),g=W("EleDropdown"),f=W("ToolColumn"),p=W("FullscreenExitOutlined"),b=W("FullscreenOutlined");return A(),Y(Ne,null,[N(i,{ref:"toolExportRef",locale:e.lang,cacheKey:e.cacheKey,modalProps:e.exportConfig.modalProps,columns:e.exportConfig.columns||e.columns,selections:e.selections,pageData:e.pageData,datasource:e.exportConfig.datasource,spanMethod:e.spanMethod,tableHeader:(w=e.exportConfig.showHeader)!=null?w:e.tableHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,pageIndex:e.pageIndex,treeProps:e.treeProps,fetch:e.fetch,defaultFileName:e.exportConfig.fileName,defaultDataType:e.exportConfig.dataType,defaultShowFooter:e.exportConfig.showFooter,defaultShowTreeIndex:e.exportConfig.showTreeIndex,beforeExport:e.exportConfig.beforeExport},null,8,["locale","cacheKey","modalProps","columns","selections","pageData","datasource","spanMethod","tableHeader","showSummary","sumText","summaryMethod","pageIndex","treeProps","fetch","defaultFileName","defaultDataType","defaultShowFooter","defaultShowTreeIndex","beforeExport"]),N(a,{ref:"toolPrintRef",locale:e.lang,cacheKey:e.cacheKey,modalProps:e.printConfig.modalProps,printerProps:e.printConfig.printerProps,tableProps:e.printConfig.tableProps,columns:e.printConfig.columns||e.columns,selections:e.selections,pageData:e.pageData,datasource:e.printConfig.datasource,spanMethod:e.spanMethod,tableHeader:(y=e.printConfig.showHeader)!=null?y:e.tableHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.pageIndex,treeProps:e.treeProps,fetch:e.fetch,defaultDataType:e.printConfig.dataType,defaultShowFooter:e.printConfig.showFooter,defaultShowTreeIndex:e.printConfig.showTreeIndex,beforePrint:e.printConfig.beforePrint},ct({_:2},[Le(Object.keys(e.$slots),v=>({name:v,fn:G(C=>[Oe(e.$slots,v,Qe(mt(C||{})))])}))]),1032,["locale","cacheKey","modalProps","printerProps","tableProps","columns","selections","pageData","datasource","spanMethod","tableHeader","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","treeProps","fetch","defaultDataType","defaultShowFooter","defaultShowTreeIndex","beforePrint"]),(A(!0),Y(Ne,null,Le(e.tools,(v,C)=>(A(),Y(Ne,null,[v==="reload"?(A(),se(d,{key:C+"-reload",placement:e.placement,title:e.lang.refresh,onClick:e.reload},{default:G(()=>[N(u,null,{default:G(()=>[N(s)]),_:1})]),_:2},1032,["placement","title","onClick"])):v==="export"?(A(),se(d,{key:C+"-export",title:e.lang.export,placement:e.placement,clickHideTooltip:!0,onClick:e.openExportModal},{default:G(()=>[N(u,{style:{transform:"scale(1.1)","transform-origin":"bottom"}},{default:G(()=>[N(c)]),_:1})]),_:2},1032,["title","placement","onClick"])):v==="print"?(A(),se(d,{key:C+"-print",title:e.lang.print,placement:e.placement,clickHideTooltip:!0,onClick:e.openPrintModal},{default:G(()=>[N(u,null,{default:G(()=>[N(h)]),_:1})]),_:2},1032,["title","placement","onClick"])):v==="size"?(A(),se(d,{key:C+"-size",placement:e.placement,title:e.lang.sizes},{default:G(()=>[N(g,{trigger:"click",placement:"bottom",popperClass:"ele-tool-size-popper",modelValue:e.size,items:e.sizeDropdownItems,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},onCommand:e.updateSize},{default:G(()=>[N(u,null,{default:G(()=>[N(m)]),_:1})]),_:1},8,["modelValue","items","onCommand"])]),_:2},1032,["placement","title"])):v==="columns"?(A(),se(f,{key:C+"-columns",placement:e.placement,locale:e.lang,columns:e.columns,sortable:e.columnSortable,allowFixed:e.columnFixed,cacheKey:e.cacheKey,"onUpdate:columns":e.updateColumns},null,8,["placement","locale","columns","sortable","allowFixed","cacheKey","onUpdate:columns"])):v==="maximized"?(A(),se(d,{key:C+"-maximized",placement:e.placement,title:e.lang.maximized,clickHideTooltip:!0,onClick:e.toggleMaximized},{default:G(()=>[N(u,null,{default:G(()=>[e.maximized?(A(),se(p,{key:0})):(A(),se(b,{key:1}))]),_:1})]),_:2},1032,["placement","title","onClick"])):v&&!e.ownSlots.includes(v)&&e.$slots[v]?Oe(e.$slots,v,{key:6,pageIndex:e.pageIndex,fetch:e.fetch}):fe("",!0)],64))),256))],64)}const Lf=Af(Df,[["render",Pf]]),Kf={...Ut(Nl,["data","pageIndex","errorText","cacheData"]),rowKey:{type:[String,Function],required:!1},loading:Boolean,datasource:{type:[Array,Function],required:!0},where:Object,request:Object,response:Object,parseData:Function,loadOnCreated:{type:Boolean,default:!0},loadOnChanged:{type:Boolean,default:!0},selections:Array,current:Object,toolbar:{type:[Boolean,Object],default:()=>null},tools:{type:[Boolean,Array],default:()=>null},columnSortable:{type:Boolean,default:!0},columnFixed:{type:Boolean,default:!0},maximizedIndex:Number,maximizedHeight:[String,Number],tableStyle:Object,footerStyle:Object,pagination:{type:[Boolean,Object],default:()=>null},loadingProps:Object,cacheKey:String,virtual:Boolean,rowHeight:Number,locale:Object,exportConfig:Object,printConfig:Object},zf={...Ln,done:(e,t)=>!0,"update:selections":e=>!0,"update:current":e=>!0,columnsChange:(e,t,l)=>!0,sizeChange:e=>!0,maximizedChange:e=>!0,refresh:()=>!0},nr=["default","toolbar","tools","footer"],or=[...nr,"empty","append"],Wf=[...nr,"printTop","printBottom"],Vf=[...or,"printTop","printBottom"],Bf=Fe({name:"EleProTable",components:{EleLoading:ys,ElePagination:Cs,EleDataTable:rd,EleVirtualTable:vc,EleToolbar:Fs,TableTools:Lf},props:Kf,emits:zf,setup(e,{emit:t}){var ve,pe;const l=Pn(t),n=Aa(()=>qe()),o=ps("table"),r={sorter:(ve=e.defaultSort)!=null?ve:{},filter:bc(e.columns),where:(pe=e.where)!=null?pe:{}},i=O(null),a=O(null),s=O([]),u=O(pc(e.pagination,o.value.pagination)),d=O(yc(e.pagination,o.value.pagination)),c=O(0),h=O(e.loading),m=O([]),g=O(Wl(e.cacheKey,e.size,o.value.size)),f=O(!1),p=O(""),b=O(),w=Ft(Io(e.rowKey)),y=F(()=>{var M,_;return(((M=u.value)!=null?M:1)-1)*((_=d.value)!=null?_:0)+1}),v=F(()=>Kn(g.value,e.pagination,o.value.pagination,{total:c.value,pageSize:d.value,currentPage:u.value,hasNext:s.value.length>=d.value})),C=F(()=>Il(e.emptyProps,o.value.emptyProps)),x=F(()=>typeof e.datasource=="function"),I=F(()=>{var _,ee,be,$e;const M=f.value&&e.maximizedHeight;return{...Po(e,ad),height:M?e.maximizedHeight:e.height,border:(ee=(_=e.border)!=null?_:o.value.border)!=null?ee:!1,stripe:($e=(be=e.stripe)!=null?be:o.value.stripe)!=null?$e:!1,load:j,size:g.value,data:s.value,columns:m.value,cacheData:b.value,errorText:p.value,pageIndex:y.value,emptyProps:C.value,rowHeight:e.virtual?e.rowHeight:void 0,rowKey:w.value,style:e.tableStyle,class:"ele-pro-table-view",...l,onSelectionChange:Ee,onSortChange:k,onFilterChange:z,onCurrentChange:ue,onHeaderDragend:Q}}),$=F(()=>{var _,ee;const M=(ee=(_=e.tools)!=null?_:o.value.tools)!=null?ee:!0;return M===!0?["reload","size","columns","maximized"]:M||[]}),S=F(()=>Il(e.toolbar,o.value.toolbar)),R=F(()=>{const M=o.value.exportConfig||{},_=e.exportConfig||{};return{...M,..._,modalProps:{...M.modalProps||{},..._.modalProps||{}}}}),T=F(()=>{const M=o.value.printConfig||{},_=e.printConfig||{};return{...M,..._,modalProps:{...M.modalProps||{},..._.modalProps||{}},printerProps:{...M.printerProps||{},..._.printerProps||{}},tableProps:{...M.tableProps||{},..._.tableProps||{}}}}),D=F(()=>{var _;const M=(_=e.maximizedIndex)!=null?_:o.value.maximizedIndex;return{...e.loadingProps||{},loading:h.value,class:["ele-pro-table",{"is-maximized":f.value},{"is-border":I.value.border}],style:f.value?{zIndex:M}:void 0}}),P=(M,_,ee)=>{M&&(M.page&&(u.value=M.page),M.limit&&(d.value=M.limit),M.where&&(r.where=M.where),M.sorter&&(r.sorter=M.sorter),M.filter&&(r.filter=M.filter)),p.value="";const be=r.sorter;if(!x.value){const{data:Ie,page:Me,total:nt}=Sc(e.datasource,be,v.value?u.value:void 0,d.value);b.value=e.datasource,s.value=Ie,u.value=Me,c.value=nt,B({data:Ie,page:Me,total:nt,response:e.datasource});return}_||(h.value=!0);const $e=r.filter,je=Eo(be,e.request,o.value.request);e.datasource({page:u.value,limit:d.value,pages:Ho(u.value,d.value,e.request,o.value.request),where:Object.assign({},r.where),orders:je,filters:Oo($e),sorter:be,filter:$e,parent:_}).then(Ie=>{var oe;const Me=(oe=e.parseData)!=null?oe:o.value.parseData,nt=Me?Me(Ie):Ie,{data:pt,total:J}=wc(nt,e.response,o.value.response,e.lazy,e.treeProps);V(pt,J,_,nt,ee)}).catch(Ie=>{V(Ie==null?void 0:Ie.message),ee&&console.error(Ie)})},V=(M,_,ee,be,$e)=>{var je;if(!Array.isArray(M)){if(s.value=[],h.value=!1,typeof M=="string"&&M){p.value=M;return}p.value="获取数据失败",console.error("返回的数据格式与配置的不一致, 返回的数据:",be,"需要的格式:",qa(o.value.response,e.response));return}if($e)ee!=null&&(ee[((je=e.treeProps)==null?void 0:je.children)||"children"]=M),$e(M);else{if(Cc(e.pagination,o.value.pagination)&&!M.length&&_&&_!=="*"&&u.value&&d.value){const Me=Math.ceil(_/d.value);if(Me&&u.value>Me){u.value=Me,P();return}}s.value=M,c.value=_||M.length}h.value=!1;const Ie={data:s.value,page:u.value,total:c.value,response:be};B(Ie,ee)},j=(M,_,ee)=>{if(e.load){e.load(M,_,ee);return}P(void 0,M,ee)},B=(M,_)=>{tt(()=>{e.current!=null&&n.setCurrentRowKey(Ke(e.current,w.value)),e.selections!=null&&e.selections.length&&n.setSelectedRowKeys(At(e.selections,w.value))}),t("done",M,_)},le=()=>{if(x.value){P();return}t("refresh")},ie=M=>{g.value=M,t("sizeChange",M)},L=(M,_,ee)=>{m.value=M,t("columnsChange",M,_,ee)},q=M=>{f.value=M,t("maximizedChange",M)},ne=M=>{if(d.value!==M){if(d.value=M,c.value!=="*"){const _=Math.ceil(c.value/M);_&&u.value>_&&(u.value=_)}P()}},ce=M=>{u.value!==M&&(u.value=M,P())},k=M=>{e.loadOnChanged&&(r.sorter=M,P()),l.onSortChange(M)},z=M=>{e.loadOnChanged&&(r.filter=M,P()),l.onFilterChange(M)},Q=(M,_,ee,be)=>{kc(M,ee,e.cacheKey),l.onHeaderDragend(M,_,ee,be)},ue=(M,_)=>{de(M),l.onCurrentChange(M,_)},Ee=M=>{Se(M),l.onSelectionChange(M)},de=M=>{M!==e.current&&t("update:current",M)},Se=M=>{ht(M,e.selections)&&t("update:selections",M)},Pe=()=>{n.doLayout()},qe=()=>a.value,Be=()=>s.value,ze=M=>{s.value=M},We=M=>{if(!v.value||d.value==null||x.value)return;const _=w.value,be=Ya(e.datasource,r.sorter).findIndex(je=>Ke(je,_)===M),$e=Math.floor(be/d.value)+1;u.value!==$e&&P({page:$e})},De=M=>{const{sorter:_,filter:ee}=r,be=Eo(_,e.request,o.value.request);M({page:u.value,limit:d.value,pages:Ho(u.value,d.value,e.request,o.value.request),where:Object.assign({},r.where),orders:be,filters:Oo(ee),sorter:_,filter:ee})},Ge=()=>{i.value&&i.value.openPrintModal()},Z=M=>{i.value&&i.value.printData(M)},X=()=>{i.value&&i.value.openExportModal()},re=M=>{i.value&&i.value.exportData(M)};return ye(()=>e.columns,M=>{M?m.value=Rc(M,e.cacheKey,e.columnSortable):m.value.length&&(m.value=[])},{immediate:!0,deep:!0}),ye(()=>e.datasource,()=>{P()},{deep:!0}),ye(()=>e.loading,M=>{h.value=M}),ye(()=>e.size,M=>{g.value=Wl(void 0,M,o.value.size)}),ye(()=>e.current,M=>{n.setCurrentRowKey(Ke(M,w.value))}),ye(()=>e.selections,M=>{n.setSelectedRowKeys(At(M,w.value))}),ye(()=>e.rowKey,()=>{w.value=Io(e.rowKey)}),ye(o,M=>{g.value=Wl(e.cacheKey,e.size,M.size)},{deep:!0}),wt(()=>{e.loadOnCreated&&P()}),{toolsSlotExcludes:or,tableSlotExcludes:Wf,pageSlotExcludes:Vf,...n,tableToolsRef:i,tableViewRef:a,tableData:s,tableSize:g,tableMaximized:f,tableIndex:y,paginationProps:v,tableProps:I,toolNames:$,tableToolbarProps:S,toolExportConfig:R,toolPrintConfig:T,loadingProps:D,handleRefresh:le,handleSizeChange:ie,handleColumnsChange:L,handleMaximizedChange:q,handlePageSizeChange:ne,handlePageCurrentChange:ce,reload:P,reloadTable:Pe,getTableRef:qe,getData:Be,setData:ze,goPageByRowKey:We,fetch:De,openPrintModal:Ge,printData:Z,openExportModal:X,exportData:re}}}),jf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function _f(e,t,l,n,o,r){const i=W("TableTools"),a=W("EleToolbar"),s=W("EleVirtualTable"),u=W("EleDataTable"),d=W("ElePagination"),c=W("EleLoading");return A(),se(c,Qe(mt(e.loadingProps)),{default:G(()=>[e.tableToolbarProps?(A(),se(a,Qe(xe({key:0},e.tableToolbarProps===!0?{}:e.tableToolbarProps)),{tools:G(()=>[Oe(e.$slots,"tools"),e.toolNames&&e.toolNames.length?(A(),se(i,{key:0,ref:"tableToolsRef",tools:e.toolNames,size:e.tableSize,columns:e.columns,columnSortable:e.columnSortable,columnFixed:e.columnFixed,maximized:e.tableMaximized,cacheKey:e.cacheKey,locale:e.locale,selections:e.selections,pageData:e.tableData,spanMethod:e.spanMethod,tableHeader:e.showHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.tableIndex,treeProps:e.treeProps,fetch:e.fetch,exportConfig:e.toolExportConfig,printConfig:e.toolPrintConfig,onReload:e.handleRefresh,"onUpdate:size":e.handleSizeChange,"onUpdate:columns":e.handleColumnsChange,"onUpdate:maximized":e.handleMaximizedChange},ct({_:2},[Le(Object.keys(e.$slots).filter(h=>!e.toolsSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,Qe(mt(m||{})))])}))]),1032,["tools","size","columns","columnSortable","columnFixed","maximized","cacheKey","locale","selections","pageData","spanMethod","tableHeader","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","treeProps","fetch","exportConfig","printConfig","onReload","onUpdate:size","onUpdate:columns","onUpdate:maximized"])):fe("",!0)]),default:G(()=>[Oe(e.$slots,"toolbar")]),_:3},16)):fe("",!0),Oe(e.$slots,"default"),e.virtual?(A(),se(s,xe({key:1},e.tableProps,{ref:"tableViewRef"}),ct({_:2},[Le(Object.keys(e.$slots).filter(h=>!e.tableSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,Qe(mt(m||{})))])}))]),1040)):(A(),se(u,xe({key:2},e.tableProps,{ref:"tableViewRef"}),ct({_:2},[Le(Object.keys(e.$slots).filter(h=>!e.tableSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,Qe(mt(m||{})))])}))]),1040)),e.paginationProps||e.$slots.footer?(A(),Y("div",{key:3,class:"ele-pro-table-footer",style:Xe(e.footerStyle)},[Oe(e.$slots,"footer"),e.paginationProps&&e.paginationProps.total?(A(),se(d,xe({key:0},e.paginationProps,{"onUpdate:currentPage":e.handlePageCurrentChange,"onUpdate:pageSize":e.handlePageSizeChange}),ct({_:2},[Le(Object.keys(e.$slots).filter(h=>!e.pageSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,Qe(mt(m||{})))])}))]),1040,["onUpdate:currentPage","onUpdate:pageSize"])):fe("",!0)],4)):fe("",!0)]),_:3},16)}const th=jf(Bf,[["render",_f]]);export{rd as a,td as b,th as i};
