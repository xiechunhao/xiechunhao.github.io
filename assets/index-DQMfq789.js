import{r as x,o as C,c as I,w as i,b as o,e as V,d as h,E as y,aC as N,aO as Q,x as W,aW as F,b5 as D,a as w,u as p,aG as S,aI as E,aH as q,aL as L}from"./index-C4BxmZrN.js";import{i as J}from"./index-CkGVv88Q.js";import"./image-viewer-DTf3QW2T.js";import"./upload-D6XcBL05.js";import"./progress-Bytq2m9M.js";import{i as j,_ as R,F as M}from"./index-D1RHU3gw.js";import{u as $}from"./index-Nq65WDmQ.js";import{i as X}from"./index-DSHqkOzX.js";import"./throttle-BbZ3x3xu.js";import"./cloneDeep-hApPH6eT.js";import"./vuedraggable.umd-BuphSp9t.js";const B={style:{display:"flex","align-items":"center"}},z=V("div",{style:{"line-height":"22px","margin-left":"22px"}},"只读:",-1),G={style:{flex:"1","padding-left":"12px"}},P={__name:"demo-basic",setup(k){const s=x([{key:1,name:"c184eef391ae48dba87e3057e70238fb.jpg",url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,name:"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,name:"f6bc05af944a4f738b54128717952107.jpg",url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),a=x(!1),b=()=>{console.log(JSON.parse(JSON.stringify(s.value))),y.success("数据已打印在控制台")},v=(m,c)=>{if(!m.file)return;if(!m.file.type.startsWith("image")){y.error("只能选择图片");return}if(m.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}c||s.value.push({...m});const d=s.value.find(e=>e.key===m.key);if(console.log(JSON.parse(JSON.stringify(d))),!d)return;d.status="uploading",d.progress==null&&(d.progress=20);const l=setInterval(()=>{if(Math.round(Math.random()*10)<3){d.status="exception",y.error("上传失败, 服务器繁忙"),clearInterval(l);return}d.progress==null?d.progress=20:d.progress+=20,d.progress===100&&(d.status="done",clearInterval(l))},1e3)},f=m=>{s.value.splice(s.value.indexOf(m),1)};return(m,c)=>{const d=j,l=N,e=Q,t=W,n=J;return C(),I(n,{header:"基础示例"},{default:i(()=>[o(d,{limit:8,drag:!0,modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=r=>s.value=r),readonly:a.value,onUpload:v,onRetry:c[1]||(c[1]=r=>v(r,!0)),onRemove:f},null,8,["modelValue","readonly"]),V("div",B,[o(l,{type:"primary",onClick:b},{default:i(()=>[h("获取数据")]),_:1}),z,V("div",G,[o(t,{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=r=>a.value=r)},{default:i(()=>[o(e,{value:!1,label:"否"}),o(e,{value:!0,label:"是"})]),_:1},8,["modelValue"])])])]),_:1})}}},H={style:{display:"flex","align-items":"center"}},T=V("div",{style:{"line-height":"22px","margin-left":"22px"}},"禁用:",-1),A={style:{flex:"1","padding-left":"12px"}},K=V("div",{style:{"margin-top":"20px"}}," 默认选择文件后就会调用请求后端上传的方法，也可以改为在点击提交按钮后才上传 ",-1),Y={__name:"demo-advanced",setup(k){const s=x([{key:1,url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),a=x(!1),b=x(!1),v=e=>{if(e.file){if(e.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}s.value.push({...e})}},f=e=>{F.confirm("确定要删除吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{s.value.splice(s.value.indexOf(e),1)}).catch(()=>{})},m=()=>{if(d()){l();return}b.value=!0,s.value.forEach(e=>{(e.status==null||e.status==="exception")&&c(e)})},c=e=>{e.status="uploading",e.progress==null&&(e.progress=20);const t=setInterval(()=>{if(Math.round(Math.random()*10)<3){e.status="exception",y.error("上传失败, 服务器繁忙"),clearInterval(t);return}e.progress==null?e.progress=20:e.progress+=20,e.progress===100&&(e.status="done",clearInterval(t),d()&&l())},Math.round(Math.random()*2500)+500)},d=()=>!s.value.some(e=>e.status!=="done"),l=()=>{console.log(JSON.parse(JSON.stringify(s.value))),console.log(JSON.stringify(s.value)),b.value=!1};return(e,t)=>{const n=j,r=N,u=Q,g=W,U=J;return C(),I(U,{header:"手动上传"},{default:i(()=>[o(n,{drag:!0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=O=>s.value=O),readonly:b.value,disabled:a.value,onUpload:v,onRetry:c,onRemove:f},null,8,["modelValue","readonly","disabled"]),V("div",H,[o(r,{type:"primary",loading:b.value,onClick:m},{default:i(()=>[h(" 提交 ")]),_:1},8,["loading"]),T,V("div",A,[o(g,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=O=>a.value=O)},{default:i(()=>[o(u,{value:!1,label:"否"}),o(u,{value:!0,label:"是"})]),_:1},8,["modelValue"])])]),K]),_:1})}}},Z={__name:"demo-multiple",setup(k){const s=x([{key:1,name:"c184eef391ae48dba87e3057e70238fb.jpg",url:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",status:"done"},{key:2,name:"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",url:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",status:"done"},{key:3,name:"f6bc05af944a4f738b54128717952107.jpg",url:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg",status:"done"}]),a=()=>{console.log(JSON.parse(JSON.stringify(s.value))),y.success("数据已打印在控制台")},b=f=>{if(!f.file)return;if(!f.file.type.startsWith("image")){y.error("只能选择图片");return}if(f.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}s.value.push({...f});const m=s.value.find(d=>d.key===f.key);if(console.log(JSON.stringify(m)),!m)return;m.status="uploading",m.progress=20;const c=setInterval(()=>{m.progress==null?m.progress=20:m.progress+=20,m.progress===100&&(m.status="done",clearInterval(c))},1e3)},v=f=>{s.value.splice(s.value.indexOf(f),1)};return(f,m)=>{const c=j,d=N,l=J;return C(),I(l,{header:"支持多选"},{default:i(()=>[o(c,{limit:8,drag:!0,multiple:!0,modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=e=>s.value=e),onUpload:b,onRemove:v},null,8,["modelValue"]),o(d,{type:"primary",onClick:a},{default:i(()=>[h("获取数据")]),_:1})]),_:1})}}},ee=V("div",{style:{"padding-top":"8px"}}," 可以很方便的修改宽高等样式，单选的时候使用也非常的 nice ",-1),te={__name:"demo-form1",setup(k){const s=x(null),[a,b,v]=D({id:void 0,realName:"",idCard:"",idCardImg1:[],idCardImg2:[]}),f=w({realName:[{required:!0,message:"请输入真实姓名",type:"string",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",type:"string",trigger:"blur"}],idCardImg1:[{required:!0,message:"请上传身份证正面",type:"array",trigger:"change"}],idCardImg2:[{required:!0,message:"请上传身份证反面",type:"array",trigger:"change"}]}),m=()=>{var e,t;(t=(e=s.value)==null?void 0:e.validate)==null||t.call(e,n=>{if(!n)return;const r={...a,idCardImg1:a.idCardImg1.map(u=>u.url).join(),idCardImg2:a.idCardImg2.map(u=>u.url).join()};console.log(JSON.parse(JSON.stringify(r))),y.success("数据已打印在控制台")})},c=(e,t)=>{if(!t.file)return;if(!t.file.type.startsWith("image")){y.error("只能选择图片");return}if(t.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}(e===1?a.idCardImg2:a.idCardImg1).push({...t});const n=(e===1?a.idCardImg2:a.idCardImg1).find(r=>r.key===t.key);n&&(n.status="uploading",$(t.file,{onUploadProgress:r=>{r.total!=null&&(n.progress=r.loaded/r.total*100)}}).then(r=>{var u,g;n.status="done",n.url=r.url,(g=(u=s.value)==null?void 0:u.clearValidate)==null||g.call(u,e===1?"idCardImg2":"idCardImg1")}).catch(r=>{n.status="exception",y.error(r.message)}))},d=(e,t)=>{const n=e===1?a.idCardImg2:a.idCardImg1;n.splice(n.indexOf(t),1)},l=()=>{var r,u;const e={id:1,realName:"张三",idCard:"420111200001013807",idCardImg1:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",idCardImg2:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"},t=[{key:1,url:e.idCardImg1,status:"done"}],n=[{key:1,url:e.idCardImg2,status:"done"}];v({...e,idCardImg1:t,idCardImg2:n}),(u=(r=s.value)==null?void 0:r.clearValidate)==null||u.call(r)};return(e,t)=>{const n=E,r=q,u=j,g=N,U=L,O=J;return C(),I(O,{header:"使用案例一"},{default:i(()=>[o(U,{ref_key:"formRef",ref:s,model:p(a),rules:f,"label-width":"100px",style:{"max-width":"380px"},onSubmit:t[8]||(t[8]=S(()=>{},["prevent"]))},{default:i(()=>[o(r,{label:"真实姓名",prop:"realName"},{default:i(()=>[o(n,{clearable:"",maxlength:20,modelValue:p(a).realName,"onUpdate:modelValue":t[0]||(t[0]=_=>p(a).realName=_),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),o(r,{label:"身份证号",prop:"idCard"},{default:i(()=>[o(n,{clearable:"",maxlength:20,modelValue:p(a).idCard,"onUpdate:modelValue":t[1]||(t[1]=_=>p(a).idCard=_),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),o(r,{label:"身份证正面",prop:"idCardImg1"},{default:i(()=>[o(u,{limit:1,drag:!0,sortable:!1,modelValue:p(a).idCardImg1,"onUpdate:modelValue":t[2]||(t[2]=_=>p(a).idCardImg1=_),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0},style:{"max-width":"100%"},onUpload:t[3]||(t[3]=_=>c(0,_)),onRemove:t[4]||(t[4]=_=>d(0,_))},null,8,["modelValue"])]),_:1}),o(r,{label:"身份证反面",prop:"idCardImg2"},{default:i(()=>[o(u,{limit:1,drag:!0,sortable:!1,modelValue:p(a).idCardImg2,"onUpdate:modelValue":t[5]||(t[5]=_=>p(a).idCardImg2=_),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0},onUpload:t[6]||(t[6]=_=>c(1,_)),onRemove:t[7]||(t[7]=_=>d(1,_))},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[o(g,{type:"primary",onClick:m},{default:i(()=>[h("提交")]),_:1}),o(g,{type:"primary",onClick:l},{default:i(()=>[h("回显数据")]),_:1})]),_:1})]),_:1},8,["model","rules"]),ee]),_:1})}}},ae={__name:"demo-form2",setup(k){const s=x(null),[a,b,v]=D({id:void 0,content:"",images:[]}),f=w({content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],images:[{required:!0,message:"请上传现场照片",type:"array",trigger:"change"}]}),m=()=>{var e,t;(t=(e=s.value)==null?void 0:e.validate)==null||t.call(e,n=>{if(!n)return;const r={...a,images:JSON.stringify(a.images.map(u=>u.url))};console.log(JSON.parse(JSON.stringify(r))),y.success("数据已打印在控制台")})},c=e=>{if(!e.file)return;if(!e.file.type.startsWith("image")){y.error("只能选择图片");return}if(e.file.size/1024/1024>2){y.error("大小不能超过 2MB");return}a.images.push({...e});const t=a.images.find(n=>n.key===e.key);t&&(t.status="uploading",$(e.file,{onUploadProgress:n=>{n.total!=null&&(t.progress=n.loaded/n.total*100)}}).then(n=>{var r,u;t.status="done",t.url=n.url,(u=(r=s.value)==null?void 0:r.clearValidate)==null||u.call(r,"images")}).catch(n=>{t.status="exception",y.error(n.message)}))},d=e=>{a.images.splice(a.images.indexOf(e),1)},l=()=>{var n,r;const e={id:1,content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",images:'["https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"]'},t=JSON.parse(e.images).map((u,g)=>({key:g,url:u,status:"done"}));v({...e,images:t}),(r=(n=s.value)==null?void 0:n.clearValidate)==null||r.call(n)};return(e,t)=>{const n=E,r=q,u=j,g=N,U=L,O=J;return C(),I(O,{header:"使用案例二"},{default:i(()=>[o(U,{ref_key:"formRef",ref:s,model:p(a),rules:f,"label-width":"100px",style:{"max-width":"460px"},onSubmit:t[2]||(t[2]=S(()=>{},["prevent"]))},{default:i(()=>[o(r,{label:"投诉内容",prop:"content"},{default:i(()=>[o(n,{rows:4,type:"textarea",modelValue:p(a).content,"onUpdate:modelValue":t[0]||(t[0]=_=>p(a).content=_),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),o(r,{label:"现场照片",prop:"images"},{default:i(()=>[o(u,{limit:3,drag:!0,modelValue:p(a).images,"onUpdate:modelValue":t[1]||(t[1]=_=>p(a).images=_),onUpload:c,onRemove:d},null,8,["modelValue"])]),_:1}),o(r,null,{default:i(()=>[o(g,{type:"primary",onClick:m},{default:i(()=>[h("提交")]),_:1}),o(g,{type:"primary",onClick:l},{default:i(()=>[h("回显数据")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},le=V("div",{style:{"margin-bottom":"24px"}}," 二次封装后无需再处理上传事件及转换数据格式，使用起来就像一个普通输入框一样简单 ",-1),oe={__name:"demo-customer",setup(k){const s=x(null),[a,b,v]=D({id:void 0,realName:"",idCardImg1:"",idCardImg2:"",content:"",images:""}),f=w({realName:[{required:!0,message:"请输入真实姓名",type:"string",trigger:"blur"}],idCardImg1:[{required:!0,message:"请上传身份证正面",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,e)=>{if(l&&l.startsWith("blob:"))return e(new Error("图片还未上传完毕"));e()}}],idCardImg2:[{required:!0,message:"请上传身份证反面",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,e)=>{if(l&&l.startsWith("blob:"))return e(new Error("图片还未上传完毕"));e()}}],content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],images:[{required:!0,message:"请上传现场照片",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,e)=>{if(l&&JSON.parse(l).some(t=>!t||t.startsWith("blob:")))return e(new Error("照片还未上传完毕"));e()}}]}),m=()=>{var d,l;(l=(d=s.value)==null?void 0:d.validate)==null||l.call(d,e=>{e&&(console.log(JSON.parse(JSON.stringify(a))),y.success("数据已打印在控制台"))})},c=()=>{var l,e;v({id:1,realName:"张三",idCardImg1:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg",idCardImg2:"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg",content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",images:'["https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"]'}),(e=(l=s.value)==null?void 0:l.clearValidate)==null||e.call(l)};return(d,l)=>{const e=E,t=q,n=N,r=L,u=J;return C(),I(u,{header:"二次封装简化使用"},{default:i(()=>[le,o(r,{ref_key:"formRef",ref:s,model:p(a),rules:f,"label-width":"100px",style:{"max-width":"460px"},onSubmit:l[5]||(l[5]=S(()=>{},["prevent"]))},{default:i(()=>[o(t,{label:"真实姓名",prop:"realName"},{default:i(()=>[o(e,{clearable:"",maxlength:20,modelValue:p(a).realName,"onUpdate:modelValue":l[0]||(l[0]=g=>p(a).realName=g),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),o(t,{label:"身份证正面",prop:"idCardImg1"},{default:i(()=>[o(R,{limit:1,modelValue:p(a).idCardImg1,"onUpdate:modelValue":l[1]||(l[1]=g=>p(a).idCardImg1=g),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0}},null,8,["modelValue"])]),_:1}),o(t,{label:"身份证反面",prop:"idCardImg2"},{default:i(()=>[o(R,{limit:1,modelValue:p(a).idCardImg2,"onUpdate:modelValue":l[2]||(l[2]=g=>p(a).idCardImg2=g),"item-style":{width:"260px",height:"160px",margin:0},"button-style":{width:"260px",height:"160px",margin:0}},null,8,["modelValue"])]),_:1}),o(t,{label:"投诉内容",prop:"content"},{default:i(()=>[o(e,{rows:4,type:"textarea",modelValue:p(a).content,"onUpdate:modelValue":l[3]||(l[3]=g=>p(a).content=g),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),o(t,{label:"现场照片",prop:"images"},{default:i(()=>[o(R,{limit:3,modelValue:p(a).images,"onUpdate:modelValue":l[4]||(l[4]=g=>p(a).images=g)},null,8,["modelValue"])]),_:1}),o(t,null,{default:i(()=>[o(n,{type:"primary",onClick:m},{default:i(()=>[h("提交")]),_:1}),o(n,{type:"primary",onClick:c},{default:i(()=>[h("回显数据")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},re=V("div",{style:{"margin-bottom":"24px"}}," 不仅仅能用于图片上传的场景, 还可用于文件上传的场景 ",-1),ne={__name:"demo-file",setup(k){const s=x(null),[a,b,v]=D({id:void 0,content:"",files:""}),f=w({content:[{required:!0,message:"请输入投诉内容",type:"string",trigger:"blur"}],files:[{required:!0,message:"请上传现场附件",type:"string",trigger:"change"},{type:"string",trigger:"change",validator:(d,l,e)=>{if(l&&JSON.parse(l).some(t=>!t.url||t.url.startsWith("blob:")))return e(new Error("附件还未上传完毕"));e()}}]}),m=()=>{var d,l;(l=(d=s.value)==null?void 0:d.validate)==null||l.call(d,e=>{e&&(console.log(JSON.parse(JSON.stringify(a))),y.success("数据已打印在控制台"))})},c=()=>{var l,e;v({id:1,content:"2栋楼下的路灯已经坏了几天了都没人来维修一下",files:'[{"url":"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg","name":"c184eef391ae48dba87e3057e70238fb.jpg"},{"url":"https://cdn.eleadmin.com/20200610/WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg","name":"WLXm7gp1EbLDtvVQgkeQeyq5OtDm00Jd.jpg"},{"url":"https://cdn.eleadmin.com/20200610/20200708224450.pdf","name":"20200708224450.pdf"}]'}),(e=(l=s.value)==null?void 0:l.clearValidate)==null||e.call(l)};return(d,l)=>{const e=E,t=q,n=N,r=L,u=J;return C(),I(u,{header:"附件上传"},{default:i(()=>[re,o(r,{ref_key:"formRef",ref:s,model:p(a),rules:f,"label-width":"100px",style:{"max-width":"460px"},onSubmit:l[2]||(l[2]=S(()=>{},["prevent"]))},{default:i(()=>[o(t,{label:"投诉内容",prop:"content"},{default:i(()=>[o(e,{rows:4,type:"textarea",modelValue:p(a).content,"onUpdate:modelValue":l[0]||(l[0]=g=>p(a).content=g),placeholder:"请输入投诉内容"},null,8,["modelValue"])]),_:1}),o(t,{label:"附件",prop:"files"},{default:i(()=>[o(M,{limit:8,modelValue:p(a).files,"onUpdate:modelValue":l[1]||(l[1]=g=>p(a).files=g)},null,8,["modelValue"])]),_:1}),o(t,null,{default:i(()=>[o(n,{type:"primary",onClick:m},{default:i(()=>[h("提交")]),_:1}),o(n,{type:"primary",onClick:c},{default:i(()=>[h("回显数据")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},se={name:"ExtensionUpload"},ve=Object.assign(se,{setup(k){return(s,a)=>{const b=X;return C(),I(b,null,{default:i(()=>[o(P),o(Y),o(Z),o(te),o(ae),o(oe),o(ne)]),_:1})}}});export{ve as default};
