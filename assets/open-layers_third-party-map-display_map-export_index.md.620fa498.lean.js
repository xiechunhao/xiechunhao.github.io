import{A as i,M as m}from"./chunks/index.47495de9.js";import{T as d}from"./chunks/TileImage.36abd4f0.js";import{X as u}from"./chunks/XYZ.eaf43adc.js";import{M as f,V as E}from"./chunks/reproj.50e0d4ab.js";import{d as h,p as g,a3 as _,D as x,o as y,c as D,z as o,G as C,B as q,F as v,a as A,M as b,N as B,_ as w,O as S}from"./chunks/framework.166469be.js";const T=(n,a="map.png")=>{n!==null&&(n.once("rendercomplete",function(){const p=document.createElement("canvas"),t=n.getSize()||[];p.width=t[0],p.height=t[1];const l=p.getContext("2d");if(l!==null)if(Array.prototype.forEach.call(n.getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer"),s=>{if(s.width>0&&s.parentElement!==null){const c=s.parentElement.style.opacity||s.style.opacity;l.globalAlpha=c===""?1:Number(c);const e=s.parentElement.style.backgroundColor;e&&(l.fillStyle=e,l.fillRect(0,0,s.width,s.height));let r;const F=s.style.transform;F?r=F.match(/^matrix\(([^(]*)\)$/)[1].split(",").map(Number):r=[parseFloat(s.style.width)/s.width,0,0,parseFloat(s.style.height)/s.height,0,0],CanvasRenderingContext2D.prototype.setTransform.apply(l,r),l.drawImage(s,0,0)}}),l.globalAlpha=1,navigator.msSaveBlob)navigator.msSaveBlob(p.msToBlob(),a);else{const s=document.createElement("a");s.href=p.toDataURL(),s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}),n.renderSync())},M=n=>(b("data-v-8c70ecd1"),n=n(),B(),n),k={id:"menu"},I=M(()=>o("div",{id:"map"},null,-1)),P=h({__name:"index",setup(n){let a=null;const p=new d({source:new u({attributions:i,url:m,maxZoom:20,crossOrigin:"anonymous"})}),t=()=>{a=new f({target:"map",layers:[p],view:new E({projection:"EPSG:4326",center:[0,0],zoom:5})})},l=()=>{T(a,"地图打印")};return g(()=>{t()}),_(()=>{a&&(a.dispose(),a=null)}),(s,c)=>{const e=x("el-button");return y(),D(v,null,[o("div",k,[C(e,{type:"primary",onClick:l},{default:q(()=>[A("导出地图")]),_:1})]),I],64)}}});const N=w(P,[["__scopeId","data-v-8c70ecd1"]]),R=o("h1",{id:"地图打印",tabindex:"-1"},[A("地图打印 "),o("a",{class:"header-anchor",href:"#地图打印","aria-label":'Permalink to "地图打印"'},"​")],-1),U=o("div",{class:"tip custom-block"},[o("p",{class:"custom-block-title"},"TIP"),o("p",null,"点击按钮打印地图。")],-1),V=S("",4),j=JSON.parse('{"title":"地图打印","description":"","frontmatter":{},"headers":[],"relativePath":"open-layers/third-party-map-display/map-export/index.md","filePath":"open-layers/third-party-map-display/map-export/index.md","lastUpdated":1687683239000}'),z={name:"open-layers/third-party-map-display/map-export/index.md"},X=Object.assign(z,{setup(n){return(a,p)=>(y(),D("div",null,[R,U,C(N),V]))}});export{j as __pageData,X as default};
