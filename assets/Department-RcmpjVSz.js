var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{m as d,_ as u}from"./index-D_qZw2oD.js";import{_ as n}from"./ButtonTable-53-Y9OGI.js";/* empty css               */import{d as i,r as m,Z as p,N as c,c as f,o as b,b as _,w as v,aO as g,C as y,H as w,L as h,I as x,M as V,aR as j,aK as O,b6 as C,x as P,u as k,$ as U,a0 as q,aq as B,e as I,m as T,_ as D,aj as R,P as S}from"./vendor-Dakx4FZ3.js";const $={class:"page-content"},E={class:"dialog-footer"},H=u(i({__name:"Department",setup(e){const u=m("add"),i=m(!1),H=p({name:"",sort:"1",status:!0}),K=p([{id:1,date:"2016-05-02",name:"人力资源部",status:1,sort:1},{id:2,date:"2016-05-04",name:"公关部",status:1,sort:2},{id:3,date:"2016-05-01",name:"市场部",status:1,sort:3,children:[{id:31,date:"2016-05-01",name:"王小虎",status:1,sort:1},{id:32,date:"2016-05-01",name:"王小虎",status:0,sort:2}]},{id:4,date:"2016-05-03",name:"财务部",status:1,sort:4},{id:5,date:"2016-05-03",name:"广告部",status:1,sort:5},{id:6,date:"2016-05-03",name:"营销部",status:1,sort:5},{id:7,date:"2016-05-03",name:"开发部",status:1,sort:5},{id:8,date:"2016-05-03",name:"测试部",status:1,sort:5},{id:9,date:"2016-05-03",name:"安全监察部",status:0,sort:5},{id:10,date:"2016-05-03",name:"设计部",status:1,sort:5},{id:11,date:"2016-05-03",name:"监事会",status:1,sort:5},{id:12,date:"2016-05-03",name:"董事会",status:1,sort:5}]),L=m(),M=p({name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}]}),N=()=>{H.name="",H.sort="1",H.status=!0},Z=(e,t)=>{u.value=e,i.value=!0,"edit"===e&&t?(H.name=t.name,H.sort=t.sort.toString(),H.status=1===t.status):N()},z=()=>{R.confirm("确定要删除该部门吗？","删除部门",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{}))},A=()=>{return e=this,d=null,n=function*(){L.value&&(yield L.value.validate((e=>{var d,n;e&&(d=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&o(e,a,t[a]);return e})({},H),n={status:H.status?1:0},t(d,a(n)),S.success("add"===u.value?"添加成功":"修改成功"),i.value=!1)})))},new Promise(((t,a)=>{var s=e=>{try{r(n.next(e))}catch(t){a(t)}},l=e=>{try{r(n.throw(e))}catch(t){a(t)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);r((n=n.apply(e,d)).next())}));var e,d,n};return(e,t)=>{const a=y,s=g,l=x,r=j,o=O,m=C,p=n,R=d,S=q,F=B,G=U,J=D,Q=c("ripple");return b(),f("div",$,[_(r,{gutter:12},{default:v((()=>[_(s,{xs:24,sm:12,lg:8},{default:v((()=>[_(a,{placeholder:"部门名称"})])),_:1}),_(s,{xs:24,sm:12,lg:8,class:"el-col2"},{default:v((()=>[w((b(),h(l,null,{default:v((()=>t[6]||(t[6]=[V("搜索")]))),_:1})),[[Q]]),w((b(),h(l,{onClick:t[0]||(t[0]=e=>Z("add"))},{default:v((()=>t[7]||(t[7]=[V("新增部门")]))),_:1})),[[Q]])])),_:1})])),_:1}),_(R,{data:k(K)},{default:v((()=>[_(o,{prop:"name",label:"名称"}),_(o,{prop:"sort",label:"排序",sortable:""}),_(o,{prop:"date",label:"日期"}),_(o,{label:"状态",prop:"status"},{default:v((e=>[_(m,{type:1===e.row.status?"primary":"info"},{default:v((()=>[V(P(1===e.row.status?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1}),_(o,{fixed:"right",label:"操作",width:"150px"},{default:v((e=>[_(p,{type:"edit",onClick:t=>Z("edit",e.row)},null,8,["onClick"]),_(p,{type:"delete",onClick:z})])),_:1})])),_:1},8,["data"]),_(J,{modelValue:k(i),"onUpdate:modelValue":t[5]||(t[5]=e=>T(i)?i.value=e:null),title:"add"===k(u)?"添加部门":"编辑部门",width:"30%",onClosed:N},{footer:v((()=>[I("div",E,[_(l,{onClick:t[4]||(t[4]=e=>i.value=!1)},{default:v((()=>t[8]||(t[8]=[V("取消")]))),_:1}),_(l,{type:"primary",onClick:A},{default:v((()=>t[9]||(t[9]=[V("提交")]))),_:1})])])),default:v((()=>[_(G,{ref_key:"formRef",ref:L,model:k(H),rules:k(M),"label-width":"60px"},{default:v((()=>[_(S,{label:"名称",prop:"name"},{default:v((()=>[_(a,{modelValue:k(H).name,"onUpdate:modelValue":t[1]||(t[1]=e=>k(H).name=e)},null,8,["modelValue"])])),_:1}),_(S,{label:"排序",prop:"sort"},{default:v((()=>[_(a,{modelValue:k(H).sort,"onUpdate:modelValue":t[2]||(t[2]=e=>k(H).sort=e)},null,8,["modelValue"])])),_:1}),_(S,{label:"状态",prop:"status"},{default:v((()=>[_(F,{modelValue:k(H).status,"onUpdate:modelValue":t[3]||(t[3]=e=>k(H).status=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-0fbe881d"]]);export{H as default};
