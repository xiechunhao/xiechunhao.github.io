import{$ as o,a0 as l,l as c,F as u}from"../js/index.dc884249.js";import{H as r}from"./request-6724ac56.js";import{b as d}from"./_baseExtremum-ce4725ad.js";function v(e,s){return e>s}function a(e){return e&&e.length?d(e,o,v):void 0}const g={attendance:{doneDays:0,days:[],startTime:0,endTime:0},userTaskList:[],anchorTaskList:[],dailyTaskList:[]},L=e=>e-6e4==1,b=e=>{switch(e){case 0:return"primary";case 1:return"success";case 2:return"default"}},A=(e,s,t)=>{let[i]=e.filter(n=>(n.value||n.id)===s);try{return i.value||i.id?i.text||i.name:t}catch(n){return t}},h=e=>r("/service-business-center/user/task/detail/".concat(e.uid),{},"get"),f=e=>r("/service-business-center/user/task/silver/".concat(e.uid),{},"get"),w=e=>r("/service-business-center/user/task/dailyAttendance/".concat(e.uid),{},"get"),x=e=>r("/service-business-center/user/task/clickTask",e,"post"),m=()=>r("/service-business-center/user/silver/silverEventType",{},"get"),y=e=>r("/service-business-center/user/silver/changeList",e,"post"),D=e=>r("/service-business-center/user/silver/silverToGold",e,"post"),T=e=>r("/service-business-center/user/silver/silverGoldConfig/".concat(e),{},"get"),$=()=>r("/service-business-center/user/silver/gold/rate",{},"get");let p={pageNum:1,pageSize:10};const N=l({id:"app-task",state:()=>({task:g,silverCoin:0,eventType:[],recordList:[],recordLoading:!1,silverConfig:[],isFirst:!1,isAnchor:0}),getters:{dailyTask(){let e=this.task.dailyTaskList,s=e.filter(t=>[8,9,10,11].includes(t.id));if(e=e.filter(t=>![8,9,10,11].includes(t.id)),s.length>0){let t=a(s.map(n=>n.reachCount||0)),i=a(s.map(n=>n.taskNum||0));e.unshift({taskName:"Xem live",taskContent:"Đã xem live ".concat(t," phút"),reachCount:t,taskNum:i,children:s})}return e},silverConfigList(){return this.silverConfig.length==0&&this.GetSilverConfig(c.get("uid")),this.silverConfig}},actions:{async GetTaskData(e){if(!e)return;const s=await h({uid:e});try{this.task=s}catch(t){}},async GetUserSilver(e,s){if(e&&(s||this.silverCoin==0)){const t=await f({uid:e});try{this.silverCoin=t.silverCoin,this.isFirst=t.firstSilverChange,this.isAnchor=t.isAnchor}catch(i){}}},async GetSilverType(){const e=await m();try{e.unshift({id:"",name:"tất cả"}),this.eventType=e}catch(s){}},async GetSilverList(e){this.recordLoading=!0;try{let s=k(e.time);const t=await y({uid:c.get("uid"),...s,...e,...p});this.recordList=t,this.recordLoading=!1}catch(s){this.recordLoading=!1}},async GetSilverConfig(e){try{const s=await T(e);this.silverConfig=s}catch(s){}}}}),k=e=>{let s=new Date().getTime()-864e5*a([0,Number(e)-1]);return{startTime:e?new Date(u(s)).getTime()-288e5:"",endTime:e?new Date().getTime():""}};export{w as A,b as G,g as I,L as a,x as b,A as c,D as d,$ as g,N as u};
