(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["supplier-applyForm","supplier-assessForm"],{"628f":function(e,r,a){"use strict";a("e9f3")},"6a12":function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("el-form",{ref:"form",staticClass:"learun-el-form-left",attrs:{model:e.formData,rules:e.isReadOnly?{}:e.rules,size:"mini",labelPosition:"left",labelWidth:"100px"}},[e.loading?e._e():a("el-row",{staticClass:"erp-supplier-assess"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货能力评估"))+" ")]),a("div",{staticClass:"form_block"},[e.isReadOnly?a("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},["0"==e.formData.case_erp_supplierrisk_f_CapacityLevel?a("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_CapacityLevel?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_CapacityLevel?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):a("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},[a("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_CapacityLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_CapacityLevel,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityLevel",r)},expression:"formData.case_erp_supplierrisk_f_CapacityLevel"}})],1),a("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_CapacityReason"}},[e.isReadOnly?a("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_CapacityReason)+" ")]):a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",showWordLimit:!1,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_CapacityReason,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityReason",r)},expression:"formData.case_erp_supplierrisk_f_CapacityReason"}})],1),a("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_CapacityFile"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"case_erp_supplierrisk_f_CapacityFile",labelWidth:"0"}},[a("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly},model:{value:e.formData.case_erp_supplierrisk_f_CapacityFile,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityFile",r)},expression:"formData.case_erp_supplierrisk_f_CapacityFile"}})],1)],1)],1)],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货质量评估"))+" ")]),a("div",{staticClass:"form_block"},[e.isReadOnly?a("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SupplierLevel?a("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SupplierLevel?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SupplierLevel?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):a("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},[a("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SupplierLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SupplierLevel,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierLevel",r)},expression:"formData.case_erp_supplierrisk_f_SupplierLevel"}})],1),a("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SupplierReason"}},[e.isReadOnly?a("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SupplierReason)+" ")]):a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierReason,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierReason",r)},expression:"formData.case_erp_supplierrisk_f_SupplierReason"}})],1),a("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SupplierFile"}},[a("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierFile,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierFile",r)},expression:"formData.case_erp_supplierrisk_f_SupplierFile"}})],1)],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("环境与安全评估"))+" ")]),a("div",{staticClass:"form_block"},[e.isReadOnly?a("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SafetyLevel?a("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SafetyLevel?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SafetyLevel?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):a("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},[a("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SafetyLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SafetyLevel,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyLevel",r)},expression:"formData.case_erp_supplierrisk_f_SafetyLevel"}})],1),a("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SafetyReason"}},[e.isReadOnly?a("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SafetyReason)+" ")]):a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyReason,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyReason",r)},expression:"formData.case_erp_supplierrisk_f_SafetyReason"}})],1),a("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SafetyFile"}},[a("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyFile,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyFile",r)},expression:"formData.case_erp_supplierrisk_f_SafetyFile"}})],1)],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("最终评估结果"))+" ")]),a("div",{staticClass:"form_block"},[e.isReadOnly?a("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_FinalState"}},["0"==e.formData.case_erp_supplierrisk_f_FinalState?a("el-tag",[a("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(e._s(e.$t("优秀"))+" ")]):"1"==e.formData.case_erp_supplierrisk_f_FinalState?a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("良好"))+" ")]):"2"==e.formData.case_erp_supplierrisk_f_FinalState?a("el-tag",{attrs:{type:"info"}},[a("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("及格"))+" ")]):a("el-tag",{attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("不及格"))+" ")])],1):a("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_FinalState"}},[a("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_FinalStateOptions},model:{value:e.formData.case_erp_supplierrisk_f_FinalState,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_FinalState",r)},expression:"formData.case_erp_supplierrisk_f_FinalState"}})],1),a("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_FinalReason"}},[e.isReadOnly?a("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_FinalReason)+" ")]):a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_FinalReason,callback:function(r){e.$set(e.formData,"case_erp_supplierrisk_f_FinalReason",r)},expression:"formData.case_erp_supplierrisk_f_FinalReason"}})],1)],1)])],1)],1)},s=[],i=(a("96cf"),a("1da1")),l=window.$api.erpcase.supplier,p={props:{isReadOnly:{type:Boolean,default:!1},id:{},type:{}},data:function(){return{moduleCode:"ERP_Suppliers",formData:{case_erp_supplierrisk_f_CapacityLevel:"",case_erp_supplierrisk_f_CapacityReason:"",case_erp_supplierrisk_f_CapacityFile:"",case_erp_supplierrisk_f_SupplierLevel:"",case_erp_supplierrisk_f_SupplierReason:"",case_erp_supplierrisk_f_SupplierFile:"",case_erp_supplierrisk_f_SafetyLevel:"",case_erp_supplierrisk_f_SafetyReason:"",case_erp_supplierrisk_f_SafetyFile:"",case_erp_supplierrisk_f_FinalState:"",case_erp_supplierrisk_f_FinalReason:""},rules:{case_erp_supplierrisk_f_CapacityLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_CapacityReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SupplierLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SupplierReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SafetyLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SafetyReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_FinalState:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_FinalReason:[{required:!0,message:"请输入："}]},loading:!0}},computed:{case_erp_supplierrisk_f_CapacityLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SupplierLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SafetyLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_FinalStateOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]}},created:function(){this.isReadOnly?this.loadFormData(this.id):this.loading=!1},methods:{resetForm:function(){this.$formClear(this.$refs.form)},validateForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(r.sent){r.next=4;break}return r.abrupt("return",!1);case 4:return r.abrupt("return",!0);case 5:case"end":return r.stop()}}),r)})))()},setForm:function(e){this.$setFormData(this.formData,e,"case_erp_supplierrisk")},getForm:function(){var e=this.$getFormData(this.formData,"case_erp_supplierrisk");return e.f_Type=this.type,e.f_SupplierId=this.id,e},loadFormData:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.loading=!0,a.next=3,r.$awaitWraper(l.getAssess(e,r.type));case 3:t=a.sent,t&&(r.setForm(t),r.loading=!1);case 5:case"end":return a.stop()}}),a)})))()}}},_=p,o=(a("628f"),a("2877")),n=Object(o["a"])(_,t,s,!1,null,"1c144dd3",null);r["default"]=n.exports},c591:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticStyle:{padding:"8px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini",labelPosition:"right",labelWidth:"80px"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[a("div",{staticClass:"border pd-16"},[a("div",{staticClass:"ptitle"},[e._v(" "+e._s(e.$t("供应商评估报告"))+" ")]),a("div",{staticClass:"mt-16"},[e.notAssess?a("div",{staticClass:"form_flex_center"},[a("div",{staticClass:"font_size_14 font_color"},[e._v(" "+e._s(e.$t("请先完成供应商评估才可进行转正申请！"))+" ")])]):a("div",[a("div",{staticClass:"learun-form-title"},[e._v(e._s(e.$t("基本信息")))]),a("div",{staticClass:"form_block flex flex-center flex-c-between"},[a("div",[e._v(" "+e._s(e.$t("供应商编号："+e.supplierInfo.f_Number))+" ")]),a("div",[e._v(" "+e._s(e.$t("供应商名称："+e.supplierInfo.f_Name))+" ")]),a("div",[e._v(" "+e._s(e.$t("供应商负责人："+e.supplierInfo.f_Person))+" ")]),a("div",[e._v(" "+e._s(e.$t("供应商类型："+e.supplierInfo.f_Type))+" ")]),a("div",[e._v(" "+e._s(e.$t("添加人："+e.supplierInfo.f_CreateUserName))+" ")]),a("div",[e._v(" "+e._s(e.$t("创建日期："+e.supplierInfo.f_CreateDate))+" ")]),a("div",[e._v(" "+e._s(e.$t("经营范围："+e.supplierInfo.f_Scope))+" ")]),a("div",[e._v(" "+e._s(e.$t("手机号："+e.supplierInfo.f_Phone))+" ")])]),e.supplier_form?a("assess-form",{attrs:{isReadOnly:!0,id:e.id,type:"0"}}):e._e(),a("div",{staticClass:"flex flex-c-center mt-16"},[a("el-button",{attrs:{plain:"",icon:e.supplier_form?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.showLookForm}},[e._v(e._s(e.$t(e.supplier_form?"收起报告":"展开报告")))])],1)],1)])]),e.lr_formLookAuth("f_Description")?[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("转正说明"))+" ")]),a("div",{staticClass:"form_block"},[a("el-form-item",{attrs:{label:e.$t("转正说明"),prop:"f_Description"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",disabled:!e.lr_formEditAuth("f_Description",e.notAssess||e.isReadOnly),placeholder:e.$t("请输入")},model:{value:e.formData.f_Description,callback:function(r){e.$set(e.formData,"f_Description",r)},expression:"formData.f_Description"}})],1)],1)]:e._e(),e.lr_formLookAuth("f_File")?[a("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("附件上传"))+" ")]),a("div",{staticClass:"form_block"},[a("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:!e.lr_formEditAuth("f_File",e.notAssess||e.isReadOnly)},model:{value:e.formData.f_File,callback:function(r){e.$set(e.formData,"f_File",r)},expression:"formData.f_File"}})],1)]:e._e()],2)])],1)],1)},s=[],i=(a("96cf"),a("1da1")),l=a("6a12"),p=window.$api.erpcase.supplier,_={props:{isReadOnly:{type:Boolean,default:!1}},components:{AssessForm:l["default"]},data:function(){return{moduleCode:"erpCase_supplierformal",supplierInfo:{f_Number:"",f_Name:"",f_Person:"",f_Phone:"",f_Scope:"",f_CreateDate:"",f_CreateUserName:"",f_Type:""},formData:{f_Description:"",f_File:""},rules:{f_Description:[{required:!0,message:"请输入"}]},supplier_form:!1,notAssess:!1,id:""}},computed:{},methods:{init:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=9;break}if(t=e.id,s=e.notAssess,t&&(r.id=t),!s){a.next=7;break}r.notAssess=s,a.next=9;break;case 7:return a.next=9,r.loadSupplierInfo(r.id);case 9:return a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()},loadSupplierInfo:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$awaitWraper(p.get(e));case 2:t=a.sent,t&&(t.f_CreateDate=r.$formatDate(t.f_CreateDate,"yyyy-MM-dd"),r.supplierInfo=t);case 4:case"end":return a.stop()}}),a)})))()},resetForm:function(){this.$formClear(this.$refs.form)},validateForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(r.sent){r.next=4;break}return r.abrupt("return",!1);case 4:return r.abrupt("return",!0);case 5:case"end":return r.stop()}}),r)})))()},setForm:function(e){this.formData=e},getForm:function(){var e=this.$deepClone(this.formData);return this.id&&(e.f_SupplierId=this.id),e},loadFormData:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.keyValue,a.next=3,r.$awaitWraper(p.getFormal(t));case 3:if(s=a.sent,!s){a.next=12;break}return r.id=s.f_SupplierId,a.next=8,r.loadSupplierInfo(s.f_SupplierId);case 8:return r.setForm(s),a.abrupt("return",!0);case 12:return a.abrupt("return",!1);case 13:case"end":return a.stop()}}),a)})))()},saveForm:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.keyValue,s=e.isEdit,i=r.getForm(),console.log(s),!s){a.next=9;break}return a.next=6,r.$awaitWraper(p.updateFormal(t,i));case 6:return a.abrupt("return",a.sent);case 9:return i.f_Id=t,a.next=12,r.$awaitWraper(p.addFormal(i));case 12:return a.abrupt("return",a.sent);case 13:case"end":return a.stop()}}),a)})))()},showLookForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.supplier_form=!e.supplier_form;case 1:case"end":return r.stop()}}),r)})))()}}},o=_,n=a("2877"),u=Object(n["a"])(o,t,s,!1,null,null,null);r["default"]=u.exports},e9f3:function(e,r,a){}}]);