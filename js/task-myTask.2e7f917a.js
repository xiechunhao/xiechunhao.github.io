(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task-myTask"],{4764:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-panel",{staticStyle:{padding:"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("l-query2",{attrs:{labelWidth:0,popoverWidth:240,items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"keyWord",fn:function(){return[a("el-input",{attrs:{placeholder:e.$t("请输入查询关键字")},model:{value:e.queryData.keyWord,callback:function(t){e.$set(e.queryData,"keyWord",t)},expression:"queryData.keyWord"}})]},proxy:!0},{key:"seachDate",fn:function(){return[a("l-date",{attrs:{format:"yyyy-MM-dd",dateType:"daterange",startPlaceholder:e.$t("开始时间"),endPlaceholder:e.$t("结束时间")},model:{value:e.queryData.seachDate,callback:function(t){e.$set(e.queryData,"seachDate",t)},expression:"queryData.seachDate"}})]},proxy:!0}])})]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{hasAdd:!1}})]},proxy:!0}])},[a("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_Title",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleLook(t.row)}}},[e._v(e._s(t.row.f_Title))])]}},{key:"f_IsFinished",fn:function(t){return[3==t.row.f_EnabledMark?a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(e.$t("作废")))]):1==t.row.f_IsFinished?a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v(e._s(e.$t("结束")))]):1==t.row.f_IsAgain?a("el-tag",{attrs:{size:"mini",type:"primary"}},[e._v(e._s(e.$t("重新提交")))]):a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("审批中")))])]}},{key:"f_CreateDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_CreateDate))+" ")]}}])},[a("l-table-btns",{attrs:{isAuth:!1,isFixed:!1,filterBtns:e.filterBtns,btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1),a("wf-look-form",{ref:"form",attrs:{type:"lookmy",params:{processId:e.processId},isLoadFormData:!0,title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}})],1)},r=[],l=(a("a434"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),s=window.$api.workflow.process,i={data:function(){return{queryItems:[{prop:"seachDate",span:24},{prop:"keyWord",span:24}],queryData:{keyWord:"",seachDate:""},tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"编号",prop:"f_LongId",width:160,align:"left"},{label:"标题",prop:"f_Title",minWidth:100,align:"left"},{label:"流程模版",prop:"f_SchemeName",minWidth:100,align:"left"},{label:"状态",prop:"f_IsFinished",width:120,align:"center"},{label:"提交人",prop:"f_UserId",width:250,align:"left",dataType:"fullUser",isNotAutoWrap:!0},{label:"提交时间",prop:"f_CreateDate",width:160,align:"left"}],tableBtns:[{prop:"Urge",label:"催办",width:100},{prop:"Revoke",label:"撤销",width:100}],visible:!1,title:"",processId:""}},computed:{},mounted:function(){this.init()},methods:{init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},loadTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,l,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(t.tableCurrentPage=1),t.tableLoading=!0,n=t.$deepClone(t.queryData),n.seachDate&&(r=n.seachDate.split(" - "),n.startDate=r[0],n.endDate=r[1],n.seachDate=null),l={rows:t.tablePageSize,page:t.tableCurrentPage,sidx:"F_CreateDate DESC"},a.next=7,t.$awaitWraper(s.getMyPage(l,n));case 7:i=a.sent,null!=i?(t.tableData=i.rows,t.tableTotal=i.records):t.tableData=[],t.tableLoading=!1;case 10:case"end":return a.stop()}}),a)})))()},filterBtns:function(e,t){return 1==e.f_IsFinished||1==e.f_IsAgain||3==e.f_EnabledMark?[]:0!=e.f_IsStart&&1!=e.f_IsCancel?[{prop:"Urge",label:"催办"}]:t},handleLook:function(e){this.title=e.f_Title,this.processId=e.f_Id,this.visible=!0},handleRevoke:function(e,t){var a=this;this.$confirm(this.$t("是否撤销流程?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){0==t.f_IsStart?s.revoke(t.f_Id).then((function(){a.tableData.splice(e,1),a.tableTotal--,a.$message({type:"success",message:a.$t("撤销成功!")})})):1==t.f_IsCancel&&(t.f_IsCancel=0,s.revokeAudit(t.f_Id).then((function(){a.$message({type:"success",message:a.$t("撤销成功!")})})))})).catch((function(){a.$message({type:"info",message:a.$t("已取消撤销")})}))},handleUrge:function(e,t){var a=this;s.urge(t.f_Id).then((function(){a.$message({type:"success",message:a.$t("催办成功!")})}))}}},o=i,c=a("2877"),u=Object(c["a"])(o,n,r,!1,null,null,null);t["default"]=u.exports}}]);