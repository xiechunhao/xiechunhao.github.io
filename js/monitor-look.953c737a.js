(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["monitor-look","monitor-lookOther","monitor-wfForm"],{"4de8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("l-drawer",{ref:"formDialog",attrs:{title:t.$t(t.isParent?"查看父流程":"查看子流程")+"【"+t.processTitle+"】",visible:t.midVisible,showOk:!1,showClose:!1,width:1024},on:{"update:visible":function(e){t.midVisible=e},closed:t.handleClosed,opened:t.handleOpened}},[i("l-layout",{staticClass:"l-tab-page",attrs:{right:400},scopedSlots:t._u([{key:"right",fn:function(){return[t.userLogs.length>0?i("l-panel",{staticStyle:{"padding-left":"0"},attrs:{title:t.$t("审批信息")}},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px"}},[i("l-wf-audit-info",{attrs:{data:t.userLogs}})],1)]):t._e()]},proxy:!0}])},[i("l-panel",{style:{"padding-right":t.userLogs.length>0?0:""}},[i("div",{staticClass:"l-auto-window",staticStyle:{padding:"0 8px"}},[i("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:t.$t("流程信息"),name:"wfinfo"}},[i("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{right:320},scopedSlots:t._u([{key:"right",fn:function(){return[t.nodeLogs.length>0?i("l-panel",{staticClass:"flow-panel",staticStyle:{padding:"0","padding-top":"0"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.$t("记录信息"))+" ")]},proxy:!0}],null,!1,1731458634)},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px",overflow:"hidden auto"}},[i("el-timeline",t._l(t.nodeLogs,(function(e,n){return i("el-timeline-item",{key:n,attrs:{type:e.type,timestamp:e.time,placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"content"},[3!=e.taskType?[t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})),t._v(" "+t._s(e.des)+" ")]:[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.OpenChildWf(e)}}},[t._v(t._s(t.$t("查看")))]),e.isShowUser?t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})):t._e(),t._v(" "+t._s(e.des)+" ")]],2)])],1)})),1)],1)]):t._e()]},proxy:!0}])},[i("l-panel",{staticClass:"flow-panel",staticStyle:{padding:"0","padding-top":"0"},scopedSlots:t._u([{key:"title",fn:function(){return[i("el-button-group",[i("el-tooltip",{attrs:{effect:"dark",content:t.$t("复原"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-aim"},on:{click:t.resetZoom}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("放大"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-zoom-in"},on:{click:function(e){return t.handlerZoom(.1)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("缩小"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-zoom-out"},on:{click:function(e){return t.handlerZoom(-.1)}}})],1)],1),i("div",{staticStyle:{float:"right"}},[i("el-tag",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",effect:"plain"}},[t._v(t._s(t.$t("正在审核")))]),i("el-tag",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",effect:"plain",type:"success"}},[t._v(t._s(t.$t("已审核")))])],1)]},proxy:!0}])},[i("b-wflow-viewer",{ref:"bflow",on:{elementClick:t.elementClick}})],1)],1)],1),i("el-tab-pane",{attrs:{label:t.$t("流转记录"),name:"wflogs"}},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px",overflow:"hidden auto"}},[i("el-timeline",t._l(t.logs,(function(e,n){return i("el-timeline-item",{key:n,attrs:{type:e.type,timestamp:e.time,placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"content"},[3!=e.taskType?[t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})),t._v(" "+t._s(e.des)+" ")]:[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.OpenChildWf(e)}}},[t._v(t._s(t.$t("查看")))]),e.isShowUser?t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})):t._e(),t._v(" "+t._s(e.des)+" ")],t.isFormById(e.unitId)?i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.lookForm(e)}}},[t._v(t._s(t.$t("查看表单")))]):t._e()],2)])],1)})),1)],1)])],1)],1)]),i("wf-form",{ref:"wfform"})],1)],1)},s=[],o=(i("7db0"),i("b0c0"),i("9421")),l=i("ae38"),r={mixins:[Object(o["a"])()],props:{isParent:Boolean},components:{WfForm:l["default"]},data:function(){return{midVisible:!1}},watch:{visible:{handler:function(t){this.midVisible=t}}},methods:{resetZoom:function(){this.$refs.bflow.reset()},handlerZoom:function(t){this.$refs.bflow.handlerZoom(t)},elementClick:function(t){this.nodeLogs=t&&this.nodeMap[t.id]||[]},lookForm:function(t){var e=this.wfData.find((function(e){return e.id==t.unitId}));if(e.isInherit){var i=this.wfData.find((function(t){return"startEvent"==t.type}));e.formType=i.formType,e.formVerison=i.formVerison,e.formRelationId=i.formRelationId,e.formUrl=i.formUrl,e.authFields=i.authFields}this.$refs.wfform.open(t.name,e,this.processId)}}},a=r,c=i("2877"),d=Object(c["a"])(a,n,s,!1,null,null,null);e["default"]=d.exports},9752:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("l-fullscreen-dialog",{ref:"formDialog",attrs:{title:t.$t("查看流程")+"【"+t.title+"】",visible:t.midVisible,showOk:!1},on:{"update:visible":function(e){t.midVisible=e},closed:t.handleClosed,opened:t.handleOpened},scopedSlots:t._u([t.isChildProcess?{key:"headerRight",fn:function(){return[t.isChildProcess?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleOpenParent}},[t._v(t._s(t.$t("父级流程")))]):t._e()]},proxy:!0}:null],null,!0)},[i("l-layout",{staticClass:"l-tab-page",attrs:{right:400},scopedSlots:t._u([{key:"right",fn:function(){return[t.userLogs.length>0?i("l-panel",{staticStyle:{"padding-left":"0"},attrs:{title:t.$t("审批信息")}},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px"}},[i("l-wf-audit-info",{attrs:{data:t.userLogs}})],1)]):t._e()]},proxy:!0}])},[i("l-panel",{style:{"padding-right":t.userLogs.length>0?0:""}},[i("div",{staticClass:"l-auto-window",staticStyle:{padding:"0 8px"}},[i("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:t.$t("流程信息"),name:"wfinfo"}},[i("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{right:320},scopedSlots:t._u([{key:"right",fn:function(){return[t.nodeLogs.length>0?i("l-panel",{staticClass:"flow-panel",staticStyle:{padding:"0","padding-top":"0"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.$t("记录信息"))+" ")]},proxy:!0}],null,!1,1731458634)},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px",overflow:"hidden auto"}},[i("el-timeline",t._l(t.nodeLogs,(function(e,n){return i("el-timeline-item",{key:n,attrs:{type:e.type,timestamp:e.time,placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"content"},[3!=e.taskType?[t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})),t._v(" "+t._s(e.des)+" ")]:[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.OpenChildWf(e)}}},[t._v(t._s(t.$t("查看")))]),e.isShowUser?t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})):t._e(),t._v(" "+t._s(e.des)+" ")]],2)])],1)})),1)],1)]):t._e()]},proxy:!0}])},[i("l-panel",{staticClass:"flow-panel",staticStyle:{padding:"0","padding-top":"0"},scopedSlots:t._u([{key:"title",fn:function(){return[i("el-button-group",[i("el-tooltip",{attrs:{effect:"dark",content:t.$t("复原"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-aim"},on:{click:t.resetZoom}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("放大"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-zoom-in"},on:{click:function(e){return t.handlerZoom(.1)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("缩小"),placement:"bottom"}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-zoom-out"},on:{click:function(e){return t.handlerZoom(-.1)}}})],1)],1),i("div",{staticStyle:{float:"right"}},[i("el-tag",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",effect:"plain"}},[t._v(t._s(t.$t("正在审核")))]),i("el-tag",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",effect:"plain",type:"success"}},[t._v(t._s(t.$t("已审核")))])],1)]},proxy:!0}])},[i("b-wflow-viewer",{ref:"bflow",on:{elementClick:t.elementClick}})],1)],1)],1),i("el-tab-pane",{attrs:{label:t.$t("流转记录"),name:"wflogs"}},[i("div",{staticClass:"l-rblock",staticStyle:{padding:"8px",overflow:"hidden auto"}},[i("el-timeline",t._l(t.logs,(function(e,n){return i("el-timeline-item",{key:n,attrs:{type:e.type,timestamp:e.time,placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"content"},[3!=e.taskType?[t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})),t._v(" "+t._s(e.des)+" ")]:[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.OpenChildWf(e)}}},[t._v(t._s(t.$t("查看")))]),e.isShowUser?t._l(e.userIds,(function(t,e){return i("l-user",{key:e,attrs:{value:t}})})):t._e(),t._v(" "+t._s(e.des)+" ")],t.isFormById(e.unitId)?i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return t.lookForm(e)}}},[t._v(t._s(t.$t("查看表单")))]):t._e()],2)])],1)})),1)],1)])],1)],1)]),i("wf-form",{ref:"wfform"}),i("look-other-form",{ref:"otherForm",attrs:{type:"lookmy",params:{processId:t.otherProcessId},isLoadFormData:!0,visible:t.otherVisible,isParent:t.isOtherParent},on:{"update:visible":function(e){t.otherVisible=e}}})],1)],1)},s=[],o=(i("7db0"),i("b0c0"),i("9421")),l=i("ae38"),r=i("4de8"),a={mixins:[Object(o["a"])()],components:{WfForm:l["default"],LookOtherForm:r["default"]},data:function(){return{midVisible:!1,otherProcessId:"",otherVisible:!1,isOtherParent:!1}},watch:{visible:{handler:function(t){this.midVisible=t}}},methods:{resetZoom:function(){this.$refs.bflow.reset()},handlerZoom:function(t){this.$refs.bflow.handlerZoom(t)},elementClick:function(t){this.nodeLogs=t&&this.nodeMap[t.id]||[]},lookForm:function(t){var e=this.wfData.find((function(e){return e.id==t.unitId}));if(e.isInherit){var i=this.wfData.find((function(t){return"startEvent"==t.type}));e.formType=i.formType,e.formVerison=i.formVerison,e.formRelationId=i.formRelationId,e.formUrl=i.formUrl,e.authFields=i.authFields}this.$refs.wfform.open(t.name,e,this.processId)},OpenChildWf:function(t){this.otherProcessId=t.childProcessId,this.isOtherParent=!1,this.otherVisible=!0},handleOpenParent:function(){this.otherProcessId=this.parentProcessId,this.isOtherParent=!0,this.otherVisible=!0}}},c=a,d=i("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},ae38:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("l-drawer",{ref:"formDialog",attrs:{title:t.$t("查看节点表单")+"【"+t.title+"】",visible:t.midVisible,showOk:!1,showClose:!1,size:"800px"},on:{"update:visible":function(e){t.midVisible=e},closed:t.handleClosed,opened:t.handleOpened}},[t.showForm?["1"==t.formType?i("l-form-viewer",{ref:"wfForm",attrs:{formInfo:t.formInfo,isWfForm:!0,authFieldsMap:t.formAuthFieldsMap}}):i(t.sysFormComponent,{ref:"wfForm",tag:"component",attrs:{requiredMap:t.formRequiredMap,authFieldsMap:t.formAuthFieldsMap,isWfForm:!0}})]:t._e()],2)},s=[],o=(i("96cf"),i("1da1")),l=i("94a0"),r={mixins:[Object(l["a"])()],data:function(){return{currentNode:{},processId:"",midVisible:!1,title:""}},methods:{open:function(t,e,i){this.title=t,this.currentNode=e,this.processId=i,this.midVisible=!0},close:function(){this.midVisible=!1},handleOpened:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t("加载表单信息..."),i.loadForm(i.currentNode,i.processId,{},!0,!0),e();case 3:case"end":return n.stop()}}),n)})))()},handleClosed:function(){this.resetWfForm&&this.resetWfForm()}}},a=r,c=i("2877"),d=Object(c["a"])(a,n,s,!1,null,null,null);e["default"]=d.exports}}]);