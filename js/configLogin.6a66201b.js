(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["configLogin"],{4693:function(t,e,i){},de4f:function(t,e,i){"use strict";i("4693")},f07d:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("l-layout",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"l-tab-page",attrs:{topMove:!1,bottomMove:!1,"element-loading-text":t.loadingtext},scopedSlots:t._u([{key:"bottom",fn:function(){return[i("l-panel",{staticStyle:{"padding-top":"0"}},[i("div",{staticClass:"leftbtns"},[i("el-button",{attrs:{size:"mini"},on:{click:t.handleRefresh}},[t._v(t._s(t.$t("刷新")))]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSave}},[t._v(t._s(t.$t("保存策略")))])],1)])]},proxy:!0}])},[i("l-panel",{staticStyle:{padding:"0","padding-left":"8px","padding-right":"8px","padding-top":"10px"}},[i("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"25px"}},[i("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"mini",labelPosition:"right",labelWidth:"118px"}},[i("div",{staticClass:"l-auto-window only-tabs"},[i("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:t.$t("主表信息"),name:"tab0"}},[i("el-row",{attrs:{gutter:0}},[i("div",{staticClass:"l-rblock"},[i("el-form-item",{attrs:{label:t.$t("登录方式"),prop:"lr_systemconfig_login_f_LoginType"}},[i("el-col",{attrs:{span:9}},[i("l-select",{attrs:{options:t.lr_systemconfig_login_f_LoginTypeOptions},model:{value:t.formData.lr_systemconfig_login_f_LoginType,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_LoginType",e)},expression:"formData.lr_systemconfig_login_f_LoginType"}})],1)],1),i("el-form-item",{attrs:{label:t.$t("登录时长(小时)"),prop:"lr_systemconfig_login_f_TokenTimeout"}},[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:1,precision:0,controlsPosition:"right",placeholder:t.$t("请输入")},model:{value:t.formData.lr_systemconfig_login_f_TokenTimeout,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_TokenTimeout",e)},expression:"formData.lr_systemconfig_login_f_TokenTimeout"}})],1)],1),i("el-form-item",{attrs:{label:t.$t("密码错误验证"),prop:"lr_systemconfig_login_f_IsPwdVerify"}},[i("el-col",{attrs:{span:9}},[i("el-switch",{attrs:{activeValue:0,inactiveValue:1},model:{value:t.formData.lr_systemconfig_login_f_IsPwdVerify,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_IsPwdVerify",e)},expression:"formData.lr_systemconfig_login_f_IsPwdVerify"}})],1)],1),0==t.formData.lr_systemconfig_login_f_IsPwdVerify?i("el-form-item",{attrs:{label:t.$t("密码错误次数"),prop:"lr_systemconfig_login_f_WrongPwdCount"}},[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:3,controlsPosition:"right",placeholder:t.$t("请输入")},model:{value:t.formData.lr_systemconfig_login_f_WrongPwdCount,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_WrongPwdCount",e)},expression:"formData.lr_systemconfig_login_f_WrongPwdCount"}})],1)],1):t._e(),0==t.formData.lr_systemconfig_login_f_IsPwdVerify?i("el-form-item",{attrs:{label:t.$t(""),prop:"lr_systemconfig_login_f_PwdType"}},[i("el-col",{attrs:{span:9}},[i("l-radio",{attrs:{options:t.lr_systemconfig_login_f_PwdTypeOptions},model:{value:t.formData.lr_systemconfig_login_f_PwdType,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_PwdType",e)},expression:"formData.lr_systemconfig_login_f_PwdType"}})],1)],1):t._e(),i("el-form-item",{attrs:{label:t.$t("限制登录时间"),prop:"lr_systemconfig_login_f_IsLoginTime"}},[i("el-col",{attrs:{span:9}},[i("el-switch",{attrs:{activeValue:0,inactiveValue:1},model:{value:t.formData.lr_systemconfig_login_f_IsLoginTime,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_IsLoginTime",e)},expression:"formData.lr_systemconfig_login_f_IsLoginTime"}})],1)],1),0==t.formData.lr_systemconfig_login_f_IsLoginTime?i("el-form-item",{attrs:{label:t.$t("登录时间"),prop:"lr_systemconfig_login_f_LoginTime"}},[i("el-col",{attrs:{span:9}},[i("div",[i("draggable",{attrs:{list:t.LoginTimeStrOptions,"ghost-class":"set-item-ghost",handle:".drag-item"}},t._l(t.LoginTimeStrOptions,(function(e,n){return i("div",{key:n,staticClass:"set-item",staticStyle:{padding:"4px"}},[i("i",{staticClass:"drag-item el-icon-rank"}),i("l-date",{staticStyle:{width:"42%","margin-right":"2%"},attrs:{format:"yyyy-MM-dd HH:mm:ss",dateType:"datetime",clearable:!0,placeholder:t.$t("请选择")},model:{value:e.startTime,callback:function(i){t.$set(e,"startTime",i)},expression:"item.startTime"}}),i("l-date",{staticStyle:{width:"42%"},attrs:{format:"yyyy-MM-dd HH:mm:ss",dateType:"datetime",clearable:!0,placeholder:t.$t("请选择")},on:{input:function(i){return t.input_endTime(e)}},model:{value:e.endTime,callback:function(i){t.$set(e,"endTime",i)},expression:"item.endTime"}}),i("el-button",{staticClass:"delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(e){return t.handleRemoveDatas(n)}}})],1)})),0),i("div",{staticStyle:{"padding-left":"22px"}},[i("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAddDatas}},[t._v(t._s(t.$t("添加可登录时间区间")))])],1)],1)])],1):t._e(),i("el-form-item",{attrs:{label:t.$t("限定IP"),prop:"lr_systemconfig_login_f_IsIpAuth"}},[i("el-col",{attrs:{span:9}},[i("el-switch",{attrs:{activeValue:0,inactiveValue:1},model:{value:t.formData.lr_systemconfig_login_f_IsIpAuth,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_IsIpAuth",e)},expression:"formData.lr_systemconfig_login_f_IsIpAuth"}})],1)],1),0==t.formData.lr_systemconfig_login_f_IsIpAuth?i("el-form-item",{attrs:{label:t.$t("限定类型"),prop:"lr_systemconfig_login_f_IpAuthType"}},[i("el-col",{attrs:{span:9}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.lr_systemconfig_login_f_IpAuthType,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_IpAuthType",e)},expression:"formData.lr_systemconfig_login_f_IpAuthType"}},[i("el-radio",{attrs:{label:1,border:""}},[t._v(t._s(t.$t("黑名单")))]),i("el-radio",{attrs:{label:0,border:""}},[t._v(t._s(t.$t("白名单")))])],1)],1)],1):t._e(),0==t.formData.lr_systemconfig_login_f_IsIpAuth?i("el-form-item",{attrs:{label:t.$t("限定IP"),prop:"lr_systemconfig_login_f_IpAuth"}},[i("el-col",{attrs:{span:9}},[i("el-input",{attrs:{type:"textarea",rows:6,placeholder:t.$t("多个IP设置，请用英文符号隔开，例如:192.168.0.1,192.168.0.2")},model:{value:t.formData.lr_systemconfig_login_f_IpAuth,callback:function(e){t.$set(t.formData,"lr_systemconfig_login_f_IpAuth",e)},expression:"formData.lr_systemconfig_login_f_IpAuth"}})],1)],1):t._e()],1)])],1)],1)],1)])],1)])],1)},o=[],a=(i("a434"),i("96cf"),i("1da1")),s=window.$api.systemconfig.configLogin,r={props:{isReadOnly:{type:Boolean,default:!1}},data:function(){return{moduleCode:"systemconfig_ConfigLogin",activeName:"tab0",formData:{lr_systemconfig_login_f_Id:"",lr_systemconfig_login_f_LoginType:"1",lr_systemconfig_login_f_TokenTimeout:"12",lr_systemconfig_login_f_IsPwdVerify:1,lr_systemconfig_login_f_WrongPwdCount:"3",lr_systemconfig_login_f_PwdType:1,lr_systemconfig_login_f_IsLoginTime:1,lr_systemconfig_login_f_LoginTime:"",lr_systemconfig_login_f_IsIpAuth:1,lr_systemconfig_login_f_IpAuthType:1,lr_systemconfig_login_f_IpAuth:""},rules:{lr_systemconfig_login_f_LoginType:[{required:!0,message:this.$t("请选择登录方式")}],lr_systemconfig_login_f_TokenTimeout:[{required:!0,message:this.$t("请输入登录时长(小时)")}],lr_systemconfig_login_f_WrongPwdCount:[{required:!0,message:this.$t("请输入密码错误次数")}],lr_systemconfig_login_f_PwdType:[{required:!0,message:this.$t("请选择")}]},loading:!1,loadingtext:"加载中....",LoginTimeStrOptions:[]}},computed:{lr_systemconfig_login_f_LoginTypeOptions:function(){return[{value:1,label:this.$t("单一登录")},{value:2,label:this.$t("同时登录")}]},lr_systemconfig_login_f_PwdTypeOptions:function(){return[{value:1,label:this.$t("账号锁定")},{value:2,label:this.$t("延时登录")}]}},mounted:function(){this.init()},methods:{init:function(){this.loadFormData()},validateForm:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$formValidateWraper(t.$refs.form);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})))()},setForm:function(t){this.LoginTimeStrOptions=JSON.parse(t.f_LoginTime),this.$setFormData(this.formData,t,"lr_systemconfig_login")},getForm:function(){return this.$getFormData(this.formData,"lr_systemconfig_login")},loadFormData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.loadingtext="加载数据中...",e.next=4,t.$awaitWraper(s.getconfiglogin());case 4:if(i=e.sent,!i){e.next=11;break}return t.setForm(i),t.loading=!1,e.abrupt("return",!0);case 11:return t.loading=!1,e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))()},saveForm:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.getForm(),t.LoginTimeStrOptions&&(i.f_LoginTime=JSON.stringify(t.LoginTimeStrOptions)),!t.formData.lr_systemconfig_login_f_Id){e.next=8;break}return e.next=5,t.$awaitWraper(s.update(t.formData.lr_systemconfig_login_f_Id,i));case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,t.$awaitWraper(s.add(i));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))()},handleRefresh:function(){this.loadFormData()},handleAddDatas:function(){var t=new Date;this.LoginTimeStrOptions.push({startTime:t,endTime:""})},input_endTime:function(t){if(this.lr_dateFormat(t.startTime)>this.lr_dateFormat(t.endTime))return this.$message({type:"warning",message:"".concat(this.$t("开始时间需要小于结束时间！"))}),t.endTime=""},handleRemoveDatas:function(t){var e=this.LoginTimeStrOptions,i=e.indexOf(this.LoginTimeStrOptions[t].value);-1!=i&&(e.splice(i,1),this.LoginTimeStrOptions=String(e)),this.LoginTimeStrOptions.splice(t,1)},handleSave:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.loadingtext=t.$t("保存数据中..."),e.next=4,t.validateForm();case 4:if(!e.sent){e.next=9;break}return e.next=7,t.saveForm();case 7:i=e.sent,i&&(t.$message({type:"success",message:t.$t("配置成功！")}),t.loadFormData());case 9:t.loading=!0;case 10:case"end":return e.stop()}}),e)})))()}}},l=r,_=(i("de4f"),i("2877")),m=Object(_["a"])(l,n,o,!1,null,null,null);e["default"]=m.exports}}]);