(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["file","file-auth","file-auth-form","file-fileForm","file-fileNameForm","file-folderForm","file-folderSelectForm"],{"03e6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"16px 16px 0 16px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini"}},[a("div",{staticClass:"l-rblock"},[a("el-form-item",{attrs:{prop:"f_Name"}},[a("el-input",{attrs:{placeholder:e.$t("请输入名称")},model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}},[a("template",{slot:"append"},[e._v(e._s(e.nameEx))])],2)],1)],1)])],1)},l=[],r=(a("99af"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),n=window.$api.system.file,s={data:function(){var e=this;return{moduleCode:"learun-file",formData:{f_Name:""},rules:{f_Name:[{required:!0,message:this.$t("请输入名称")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_Id},tableName:"lr_base_file",keyName:"f_Id",filedsJsonName:"fileNameForm_filedsJson",message:this.$t("文件名重复"),getValue:function(){return"".concat(e.formData.f_Name).concat(e.nameEx)},trigger:"null"}]},pid:"",nameEx:""}},computed:{fileNameForm_filedsJson:function(){return{f_FolderId:this.pid,f_DeleteMark:0}}},methods:{resetForm:function(){this.formData.f_Id="",this.formData.f_FolderId="",this.pid="",this.$formClear(this.$refs.form)},validateForm:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()},setForm:function(e){this.pid=e.f_FolderId;var t=this.$deepClone(e);this.nameEx=".".concat(this.lr_getFileEex(t.f_Name)),t.f_Name=t.f_Name.replace(this.nameEx,""),this.formData=t},getForm:function(){return this.$deepClone(this.formData)},saveForm:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.keyValue,l=t.getForm(),l.f_Name="".concat(l.f_Name).concat(t.nameEx),a.next=5,t.$awaitWraper(n.renameFile(i,l.f_Name));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))()}}},o=s,c=a("2877"),d=Object(c["a"])(o,i,l,!1,null,null,null);t["default"]=d.exports},"2ba8":function(e,t,a){},"4cdd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticClass:"l-tab-page learun-file-form-page",attrs:{rightMove:!1,right:284},scopedSlots:e._u([{key:"right",fn:function(){return[a("l-panel",{staticStyle:{padding:"0","border-radius":"0"}},[a("div",{staticClass:"l-auto-window"},[a("el-tabs",{attrs:{stretch:!0},model:{value:e.configActiveName,callback:function(t){e.configActiveName=t},expression:"configActiveName"}},[a("el-tab-pane",{attrs:{label:""+e.$t("文件属性"),name:"tab01"}},[a("div",{staticClass:"l-rblock",staticStyle:{padding:"16px 16px 0"}},[a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("文件类型")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_getFileEex(e.file.name))+" ")])]),a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("文件大小")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.$countFileSize(e.file.size))+" ")])]),a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("所在位置")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.file.level||e.level)+" ")])]),a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("创建者")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.file.createUserName)+" ")])]),a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("创建时间")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_dateFormat(e.file.createDate))+" ")])]),a("div",{staticClass:"learun-des-item"},[a("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("修改时间")))]),a("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_dateFormat(e.file.modifyDate))+" ")])])])]),a("el-tab-pane",{attrs:{label:e.$t("文件版本"),name:"tab02"}},[a("div",{staticClass:"l-rblock"},[a("div",{staticClass:"learun-list time"},e._l(e.historys,(function(t){return a("div",{key:t.f_Id,class:["learun-list-item",{active:t.f_Id==e.selectId}],staticStyle:{border:"0"},on:{click:function(a){return e.handleClick(t)}}},[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("div",{staticClass:"ver"},[e._v("V"+e._s(t.f_Ver))])]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[e._v(" "+e._s(t.f_Name)+" ")]),a("div",{staticClass:"learun-list-item-des"},[e._v(" "+e._s(t.f_CreateUserName)+" · "+e._s(e.lr_dateFormat(t.f_CreateDate))+" ")])]),e.isDown?a("div",[a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{item:t,type:"down"}}},[e._v(e._s(e.$t("下载文件")))])],1)],1)],1):e._e()])])})),0)])])],1)],1)])]},proxy:!0}])},[e.selectId?[["xls","xlsx","doc","docx","txt","csv","html","pdf"].includes(e.lr_getFileEex(e.selectFile.f_Name))?a("div",{staticClass:"l-rblock",staticStyle:{background:"#fff"}},[a("iframe",{ref:"iframe",staticClass:"l-iframe",attrs:{src:e.previewUrl,frameborder:"0"}})]):["jpg","gif","png","bmp","jpeg","svg"].includes(e.lr_getFileEex(e.selectFile.f_Name))?a("div",{staticClass:"l-rblock learun-img-preview"},[a("img",{staticClass:"learun-img-preview-img",attrs:{src:e.previewUrl,alt:""}})]):a("div",{staticClass:"l-rblock learun-not-preview"},[a("i",{staticClass:"icon",class:e.lr_getFileIcon(e.selectFile.f_Name).icon,style:{color:e.lr_getFileIcon(e.selectFile.f_Name).color}}),a("p",{staticClass:"text"},[e._v(" "+e._s(e.$t("很抱歉，无法在浏览器预览"))+" "+e._s(e.lr_getFileEex(e.selectFile.f_Name))+" "+e._s(e.$t("文件,请下载后查看"))+" ")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.downFile(e.selectFile)}}},[e._v(e._s(e.$t("下载文件")))])],1)]:e._e()],2)},l=[],r=(a("99af"),a("7db0"),a("96cf"),a("1da1")),n=window.$api.system.file,s={props:{file:{type:Object,default:function(){}},level:String},data:function(){return{configActiveName:"tab01",historys:[],selectId:""}},watch:{fileId:{handler:function(){this.selectId="",this.configActiveName="tab01",this.formData()},immediate:!0}},computed:{fileId:function(){return this.file?this.file.id:""},selectFile:function(){var e=this;return""==this.selectId?null:this.historys.find((function(t){return t.f_Id==e.selectId}))},previewUrl:function(){return""==this.selectId?"":"".concat(this.apiUrl,"system/annexesfile/preview/").concat(this.selectFile.f_FileId,"?token=").concat(this.token)},isDown:function(){return!(!this.lr_isSystem&&-1==this.file.authType.indexOf("3"))}},methods:{formData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fileId){t.next=5;break}return t.next=3,e.$awaitWraper(n.get(e.fileId));case 3:a=t.sent,a&&(i=a.historyList,i.length>0&&i[0].f_FileInfoId==e.fileId&&(e.historys=i,e.selectId=e.historys[0].f_Id));case 5:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.selectId=e.f_Id},handleCommand:function(e){"down"==e.type&&this.$downFile("".concat(this.apiUrl,"system/annexesfile/").concat(e.item.f_FileId,"?token=").concat(this.token))},downFile:function(e){this.$downFile("".concat(this.apiUrl,"system/annexesfile/").concat(e.f_FileId,"?token=").concat(this.token))}}},o=s,c=(a("cf61"),a("a3c7a"),a("2877")),d=Object(c["a"])(o,i,l,!1,null,"179d736c",null);t["default"]=d.exports},"567a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{scopedSlots:e._u([{key:"title",fn:function(){return[a("l-breadcrumb",{attrs:{levelList:e.levelList},on:{"update:levelList":function(t){e.levelList=t},"update:level-list":function(t){e.levelList=t},change:e.handleBreadcrumbChange}})]},proxy:!0}])},[a("div",e._l(e.tableData,(function(t,i){return a("div",{key:i,class:["learun-list-item folder-select-row",{"is-selected":t.id==e.selectedId}],on:{click:function(a){return a.stopPropagation(),e.handleRowClick(t)}}},[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("i",{staticClass:"el-icon-folder",staticStyle:{color:"#fbbc06"}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleOpenFolder(t)}}},[e._v(e._s(t.name))])],1)]),a("div",{staticClass:"learun-list-item-icon"},[a("i",{staticClass:"el-icon-check icon-right"})])])])})),0)])],1)},l=[],r=(a("4de4"),a("b0c0"),a("96cf"),a("1da1")),n=window.$api.system.file,s={data:function(){return{levelList:[{name:this.$t("全部文件"),id:"learun_folder_all"}],tableData:[],selectedId:"learun_folder_all",entity:{}}},computed:{},methods:{handleBreadcrumbChange:function(e){this.selectedId=e.id,this.$emit("select",e),this.loadTableData()},init:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.entity=e,t.selectedId="learun_folder_all",t.levelList=[{name:t.$t("全部文件"),id:"learun_folder_all"}],a.next=5,t.loadTableData();case 5:case"end":return a.stop()}}),a)})))()},loadTableData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pid:e.levelList[e.levelList.length-1].id,isLoadFile:0,order:"f_Name"},i=[],t.next=4,e.$awaitWraper(n.getList(a));case 4:i=t.sent,e.tableData=(i||[]).filter((function(t){return t.id!=e.entity.id}));case 6:case"end":return t.stop()}}),t)})))()},handleOpenFolder:function(e){this.selectedId=e.id,this.$emit("select",e),this.levelList.push({name:e.name,id:e.id}),this.loadTableData()},handleRowClick:function(e){this.selectedId=e.id,this.$emit("select",e)}}},o=s,c=(a("f06d"),a("2877")),d=Object(c["a"])(o,i,l,!1,null,null,null);t["default"]=d.exports},"668c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page",scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},attrs:{title:e.$t("文件分类")}},[a("div",{staticClass:"l-rblock",staticStyle:{overflow:"hidden auto"}},[a("l-side-list",{attrs:{list:e.sideList},on:{click:e.handleSideClick}})],1)])]},proxy:!0}],null,!1,1444795426)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"title",fn:function(){return[a("l-breadcrumb",{attrs:{levelList:e.levelList},on:{"update:levelList":function(t){e.levelList=t},"update:level-list":function(t){e.levelList=t},change:e.handleBreadcrumbChange}})]},proxy:!0},{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("搜索文件"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{hasAdd:!1}},["learun_folder_all"==e.levelList[0].id?[a("el-button-group",[e.isAddFolder?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleAddFolder()}}},[e._v(e._s(e.$t("新建文件夹")))]):e._e(),e.isAuthFolder?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleAddAuth()}}},[e._v(e._s(e.$t("授权")))]):e._e()],1),e.isUpLoadFile?a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleAddFile()}}},[e._v(e._s(e.$t("上传文件")))])],1):e._e()]:e._e()],2)]},proxy:!0}],null,!1,2294664750)},["learun_folder_audit"==e.levelList[0].id?a("div",{staticClass:"l-rblock",staticStyle:{padding:"8px 8px 0 8px"}},[a("div",{staticClass:"l-auto-window"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.wfTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("待审文件"),name:"tab0"}},[a("l-wf-audit-table",{ref:"tab0",attrs:{code:"wffile",loadFormDataList:e.loadFileListByWf,columns:e.wfcolumns1},scopedSlots:e._u([{key:"f_Name",fn:function(t){return[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("i",{class:e.lr_getFileIcon(t.row.f_Name).icon,style:{color:e.lr_getFileIcon(t.row.f_Name).color,"font-size":"32px"}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleOpenWFAudit(t.row)}}},[e._v(e._s(t.row.f_Name))])],1)])])]}}],null,!1,2371410410)})],1),a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("我的文件"),name:"tab1"}},[a("l-wf-audit-table",{ref:"tab1",attrs:{code:"wffile",type:"my",loadFormDataList:e.loadFileListByWf,columns:e.wfcolumns2},scopedSlots:e._u([{key:"f_Name",fn:function(t){return[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("i",{class:e.lr_getFileIcon(t.row.f_Name).icon,style:{color:e.lr_getFileIcon(t.row.f_Name).color,"font-size":"32px"}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleOpenWFAudit(t.row)}}},[e._v(e._s(t.row.f_Name||"异常文件"))])],1)])])]}}],null,!1,3876788481)})],1),a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("已审文件"),name:"tab2"}},[a("l-wf-audit-table",{ref:"tab2",attrs:{code:"wffile",type:"completed",loadFormDataList:e.loadFileListByWf,columns:e.wfcolumns3},scopedSlots:e._u([{key:"f_Name",fn:function(t){return[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("i",{class:e.lr_getFileIcon(t.row.f_Name).icon,style:{color:e.lr_getFileIcon(t.row.f_Name).color,"font-size":"32px"}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleOpenWFAudit(t.row)}}},[e._v(e._s((t.row.f_Name||this.$t("异常文件"))+"("+t.row.wf_f_UnitName+")"))])],1)])])]}}],null,!1,3097077711)})],1)],1)],1)]):a("div",{staticClass:"l-rblock"},[a("l-table",{attrs:{columns:e.columns,dataSource:e.tableData,loading:e.tableLoading},scopedSlots:e._u([{key:"name",fn:function(t){return[a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[1==t.row.type?a("i",{staticClass:"el-icon-folder",staticStyle:{color:"#fbbc06","font-size":"32px"}}):a("i",{class:e.lr_getFileIcon(t.row.name).icon,style:{color:e.lr_getFileIcon(t.row.name).color,"font-size":"32px"}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleOpenFolder(t.row)}}},[e._v(e._s(t.row.name))])],1),e.isSearchWord||"learun_folder_delete"==e.levelList[0].id?a("div",{staticClass:"learun-list-item-des"},[e._v(" "+e._s(t.row.level)+" ")]):e._e()])])]}},{key:"size",fn:function(t){return[e._v(" "+e._s(1==t.row.type?"":e.$countFileSize(t.row.size))+" ")]}}],null,!1,2805600375)},[a("l-table-btns",{attrs:{filterBtns:e.filterBtns,btns:e.tableBtns,isAuth:!1},on:{click:e.lr_handleTableBtnClick}})],1)],1)]),a("l-dialog",{attrs:{title:e.$t(e.folderTitle),visible:e.folderVisible,height:120,width:400},on:{"update:visible":function(t){e.folderVisible=t},ok:e.handleFolderSave,close:e.handleFolderCloseForm,opened:e.handleFolderOpenedForm}},[a("folder-form",{ref:"folderForm"})],1),a("l-dialog",{attrs:{title:e.$t(e.folderSelectTitle)+"到【"+e.folderSelect.name+"】",visible:e.folderSelectVisible,height:440,width:600},on:{"update:visible":function(t){e.folderSelectVisible=t},ok:e.handleFolderSelectSave,close:e.handleFolderSelectClose,opened:e.handleFolderSelectOpened}},[a("folder-select-form",{ref:"folderSelectForm",on:{select:e.handleSelectFolder}})],1),a("l-fullscreen-dialog",{attrs:{showOk:!1,visible:e.fileVisible},on:{"update:visible":function(t){e.fileVisible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",[e.fileData?a("div",{staticClass:"learun-list-item-wraper"},[a("div",{staticClass:"learun-list-item-icon"},[a("i",{class:e.lr_getFileIcon(e.fileData.name).icon,style:{color:e.lr_getFileIcon(e.fileData.name).color}})]),a("div",{staticClass:"learun-list-item-content"},[a("div",{staticClass:"learun-list-item-title",staticStyle:{color:"rgba(0, 0, 0, 0.85)"}},[e._v(" "+e._s(e.fileData.name)+" ")]),a("div",{staticClass:"learun-list-item-des"},[e._v(" "+e._s(e.fileData.level||e.levelName)+" ")])])]):e._e()])]},proxy:!0}],null,!1,869952111)},[a("file-form",{ref:"fileForm",attrs:{file:e.fileData,level:e.levelName}})],1),a("l-dialog",{attrs:{title:e.$t("重命名"),visible:e.fileNameVisible,height:120,width:400},on:{"update:visible":function(t){e.fileNameVisible=t},ok:e.handleFileNameSave,close:e.handleFileNameCloseForm,opened:e.handleFileNameOpenedForm}},[a("file-name-form",{ref:"fileNameForm"})],1),a("wf-create-form",{ref:"wffile",attrs:{code:"wffile",title:e.$t("上传文件"),visible:e.wfVisible,params:{folder:e.wfFolderId}},on:{"update:visible":function(t){e.wfVisible=t}}}),a("l-dialog",{attrs:{title:e.$t("文件授权")+"-"+e.authTitile,visible:e.authVisible,hasBtns:!1,height:480,width:800},on:{"update:visible":function(t){e.authVisible=t},opened:e.handleAuthOpened}},[a("auth-index",{ref:"authIndex",attrs:{fileInfoId:e.authFileId,isFolder:e.isFolder}})],1)],1)},l=[],r=(a("99af"),a("7db0"),a("c740"),a("d81d"),a("a434"),a("b0c0"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),n=a("9ec5"),s=a("567a"),o=a("4cdd"),c=a("03e6"),d=a("8679"),u=window.$api.system.file,f={components:{FolderForm:n["default"],FolderSelectForm:s["default"],FileForm:o["default"],FileNameForm:c["default"],AuthIndex:d["default"]},data:function(){return{sideList:[{icon:"el-icon-folder",label:this.$t("正式文件"),value:"all"},{icon:"learun-icon-signature",label:this.$t("审核文件"),value:"audit"},{icon:"el-icon-delete",label:this.$t("回收站"),value:"delete"}],levelList:[{name:this.$t("正式文件"),id:"learun_folder_all"}],columns:[{label:this.$t("文件名"),prop:"name",minWidth:200,isNotAutoWrap:!1},{label:this.$t("创建者"),prop:"createUserName",width:100},{label:this.$t("最后更新"),prop:"modifyDate",width:160,dataType:"datetime"},{label:this.$t("文件大小"),prop:"size",width:100}],tableLoading:!1,tableData:[],isSearchWord:!1,searchWord:"",formEditRow:null,folderTitle:"",folderVisible:!1,folderEdit:!1,folderSelectTitle:"",folderSelectVisible:!1,folderSelectType:"",folderSelect:{name:this.$t("根目录"),id:"learun_folder_all"},fileOption:[],fileUploadTimer:null,fileSelectVisible:!1,fileSameList:[],fileVisible:!1,fileData:null,fileNameVisible:!1,wfVisible:!1,activeName:"tab0",wfFolderId:"",wfcolumns1:[{label:this.$t("文件名"),prop:"f_Name",minWidth:200,isNotAutoWrap:!1},{label:this.$t("状态"),prop:"wf_f_IsUrge",width:60,align:"center"},{label:this.$t("提交人"),prop:"wf_f_ProcessUserName",width:100,align:"left"},{label:this.$t("时间"),prop:"wf_f_CreateDate",width:160,align:"left"}],wfcolumns2:[{label:this.$t("文件名"),prop:"f_Name",minWidth:200,isNotAutoWrap:!1},{label:this.$t("状态"),prop:"wf_f_IsFinished",width:60,align:"center"},{label:this.$t("提交人"),prop:"wf_f_CreateUserName",width:100,align:"left"},{label:this.$t("时间"),prop:"wf_f_CreateDate",width:160,align:"left"}],wfcolumns3:[{label:this.$t("文件名"),prop:"f_Name",minWidth:200,isNotAutoWrap:!1},{label:this.$t("状态"),prop:"wf_f_IsFinished",width:60,align:"center"},{label:this.$t("提交人"),prop:"wf_f_CreateUserName",width:100,align:"left"},{label:this.$t("时间"),prop:"wf_f_CreateDate",width:160,align:"left"}],authVisible:!1,authTitile:"",authFileId:"",isFolder:1,rootAuthType:""}},computed:{tableBtns:function(){return console.log("tableBtns"),"learun_folder_delete"==this.levelList[0].id?[{prop:"Recovery",label:this.$t("还原")},{prop:"Delete",label:this.$t("删除"),divided:!0}]:[{prop:"Upload",label:this.$t("上传")},{prop:"Auth",label:this.$t("授权")},{prop:"Down",label:this.$t("下载")},{prop:"Edit",label:this.$t("重命名")},{prop:"Move",label:this.$t("移动到...")},{prop:"VDelete",label:this.$t("删除"),divided:!0}]},levelName:function(){var e=this.levelList.map((function(e){return e.name})),t=String(e);return t.replace(/,/g,"/")},currentLevel:function(){return this.levelList[this.levelList.length-1]},currentAuthType:function(){var e=this.rootAuthType;return"learun_folder_all"!=this.currentLevel.id&&(e=this.currentLevel.authType),e},isAddFolder:function(){return!!this.lr_isSystem||this.currentAuthType.indexOf("10")>-1},isAuthFolder:function(){return!!this.lr_isSystem||this.currentAuthType.indexOf("13")>-1},isUpLoadFile:function(){return!!this.lr_isSystem||this.currentAuthType.indexOf("10")>-1}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$awaitWraper(u.getRootAuth());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:a=t.t0,e.rootAuthType=a.f_AuthType||"",e.loadTableData();case 8:case"end":return t.stop()}}),t)})))()},methods:{handleSideClick:function(e){var t=this,a=e.label,i=e.value;this.levelList=[{name:a,id:"learun_folder_".concat(i)}],this.searchWord="","audit"==i?this.$nextTick((function(){t.$refs[t.activeName]&&t.$refs[t.activeName].loadData()})):this.loadTableData()},filterBtns:function(e,t){if(1==e.type){var a=t.findIndex((function(e){return"Down"==e.prop}));if(a>-1&&t.splice(a,1),this.lr_isSystem)return t;if(!e.authType)return[];var i=t.find((function(e){return"Upload"==e.prop}));i&&-1==e.authType.indexOf("14")&&(i.disabled=!0);var l=t.find((function(e){return"Auth"==e.prop}));l&&-1==e.authType.indexOf("13")&&(l.disabled=!0);var r=t.find((function(e){return"Edit"==e.prop}));r&&-1==e.authType.indexOf("15")&&(r.disabled=!0);var n=t.find((function(e){return"Move"==e.prop}));n&&-1==e.authType.indexOf("12")&&(n.disabled=!0);var s=t.find((function(e){return"VDelete"==e.prop}));s&&-1==e.authType.indexOf("11")&&(s.disabled=!0)}else{if(this.lr_isSystem)return t;if(!e.authType)return[];var o=t.find((function(e){return"Upload"==e.prop}));o&&-1==e.authType.indexOf("02")&&(o.disabled=!0);var c=t.find((function(e){return"Down"==e.prop}));c&&-1==e.authType.indexOf("03")&&(c.disabled=!0);var d=t.find((function(e){return"Auth"==e.prop}));d&&-1==e.authType.indexOf("07")&&(d.disabled=!0);var u=t.find((function(e){return"Edit"==e.prop}));u&&-1==e.authType.indexOf("08")&&(u.disabled=!0);var f=t.find((function(e){return"Move"==e.prop}));f&&-1==e.authType.indexOf("04")&&(f.disabled=!0);var m=t.find((function(e){return"VDelete"==e.prop}));m&&-1==e.authType.indexOf("05")&&(m.disabled=!0);var h=t.find((function(e){return"Recovery"==e.prop}));h&&-1==e.authType.indexOf("06")&&(h.disabled=!0);var p=t.find((function(e){return"Delete"==e.prop}));p&&-1==e.authType.indexOf("09")&&(p.disabled=!0)}return t},hanleSearch:function(){"learun_folder_audit"==this.levelList[0].id?this.$refs[this.activeName]&&this.$refs[this.activeName].loadData({formKeyword:this.searchWord}):this.loadTableData()},loadTableData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableLoading=!0,a={keyword:e.searchWord,pid:e.levelList[e.levelList.length-1].id,order:"f_Name"},i=[],"learun_folder_delete"!=a.pid){t.next=9;break}return t.next=6,e.$awaitWraper(u.getRecycles(a));case 6:i=t.sent,t.next=12;break;case 9:return t.next=11,e.$awaitWraper(u.getList(a));case 11:i=t.sent;case 12:e.tableData=i||[],e.isSearchWord=!!e.searchWord,e.tableLoading=!1;case 15:case"end":return t.stop()}}),t)})))()},handleAddFile:function(){this.wfFolderId=this.currentLevel.id,this.wfVisible=!0},handleUpload:function(e,t){1==t.type?(this.wfFolderId=t.id,this.wfVisible=!0):this.wfVisible=!0},handleFileNameSave:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e("保存数据中..."),i.next=3,a.$refs.fileNameForm.validateForm();case 3:if(!i.sent){i.next=8;break}return i.next=6,a.$refs.fileNameForm.saveForm({keyValue:a.formEditRow.id});case 6:l=i.sent,l&&(r=a.$t("重命名成功!"),a.$message({type:"success",message:a.$t(r)}),a.loadTableData(),a.fileNameVisible=!1);case 8:t();case 9:case"end":return i.stop()}}),i)})))()},handleFileNameCloseForm:function(){this.$refs.fileNameForm.resetForm()},handleFileNameOpenedForm:function(){this.$refs.fileNameForm.setForm({f_Name:this.formEditRow.name,f_Id:this.formEditRow.id,f_FolderId:this.formEditRow.pid})},handleDown:function(e,t){this.$downFile("".concat(this.apiUrl,"system/annexesfile/").concat(t.fileId,"?token=").concat(this.token))},handleAddFolder:function(){this.folderEdit=!1,this.showFolderForm("新增文件夹")},handleEdit:function(e,t){this.formEditRow=t,1==t.type?(this.folderEdit=!0,this.showFolderForm("".concat(this.$t("重命名"),"【").concat(t.name,"】"))):this.fileNameVisible=!0},showFolderForm:function(e){this.folderTitle=e,this.folderVisible=!0},handleFolderSave:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e("保存数据中..."),i.next=3,a.$refs.folderForm.validateForm(a.folderEdit?a.formEditRow.pid:a.levelList[a.levelList.length-1].id);case 3:if(!i.sent){i.next=8;break}return i.next=6,a.$refs.folderForm.saveForm({keyValue:a.folderEdit?a.formEditRow.id:"",pid:a.levelList[a.levelList.length-1].id,levelId:String(a.levelList.map((function(e){return e.id}))).replace(/,/g,"/"),isEdit:a.folderEdit});case 6:l=i.sent,l&&(r=a.formEdit?a.$t("重命名成功!"):a.$t("新增成功!"),a.$message({type:"success",message:a.$t(r)}),a.loadTableData(),a.folderVisible=!1);case 8:t();case 9:case"end":return i.stop()}}),i)})))()},handleFolderOpenedForm:function(){this.folderEdit&&this.$refs.folderForm.setForm({f_Name:this.formEditRow.name,f_Id:this.formEditRow.id,f_PId:this.formEditRow.pid})},handleFolderCloseForm:function(){this.$refs.folderForm.resetForm()},handleMove:function(e,t){this.formEditRow=t,this.showFolderSelectForm("".concat(this.$t("移动"),"【").concat(t.name,"】"))},handleOpenFolder:function(e){if(1==e.type){var t=this.levelList;if(e.level){t=[];var a=e.level.split("/"),i=e.levelId.split("/");a.forEach((function(e,a){t.push({name:e,id:i[a]})}))}t.push({name:e.name,id:e.id,authType:e.authType}),this.levelList=t,this.searchWord="",this.loadTableData()}else(this.lr_isSystem||-1!=e.authType.indexOf("1"))&&(this.fileData=e,this.fileVisible=!0)},handleBreadcrumbChange:function(){this.searchWord="",this.loadTableData()},handleFolderSelectSave:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e("提交中..."),l="",r=null,l=a.$t("移动成功"),1!=a.formEditRow.type){i.next=10;break}return i.next=7,a.$awaitWraper(u.moveFolder(a.formEditRow.id,a.folderSelect.id));case 7:r=i.sent,i.next=13;break;case 10:return i.next=12,a.$awaitWraper(u.moveFile(a.formEditRow.id,a.folderSelect.id));case 12:r=i.sent;case 13:r&&a.$message({type:"success",message:a.$t(l)}),a.folderSelectVisible=!1,t(),a.loadTableData();case 17:case"end":return i.stop()}}),i)})))()},handleFolderSelectClose:function(){this.folderSelect={name:this.$t("根目录"),id:"learun_folder_all"}},handleFolderSelectOpened:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e("加载文件列表"),i.next=3,a.$refs.folderSelectForm.init(a.formEditRow);case 3:t();case 4:case"end":return i.stop()}}),i)})))()},showFolderSelectForm:function(e){this.folderSelectTitle=e,this.folderSelectVisible=!0},handleSelectFolder:function(e){"learun_folder_all"==e.id?this.folderSelect={name:this.$t("根目录"),id:"learun_folder_all"}:this.folderSelect=e},handleVDelete:function(e,t){var a=this;this.$confirm("".concat(this.$t("是否删除")).concat(1==t.type?this.$t("文件夹"):this.$t("文件"),"【").concat(t.name,"】?"),"提示",{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.type){e.next=6;break}return e.next=3,a.$awaitWraper(u.deleteFolder(t.id));case 3:i=e.sent,e.next=9;break;case 6:return e.next=8,a.$awaitWraper(u.vdeleteFile(t.id,t.level||a.levelName));case 8:i=e.sent;case 9:i&&(a.loadTableData(),a.$message({type:"success",message:a.$t("删除成功!")}));case 10:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}))},handleDelete:function(e,t){var a=this;this.$confirm("".concat(this.$t("是否永久删除文件"),"【").concat(t.name,"】?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$awaitWraper(u.deleteFile(t.id));case 2:i=e.sent,i&&(a.loadTableData(),a.$message({type:"success",message:a.$t("删除成功!")}));case 4:case"end":return e.stop()}}),e)})))).catch((function(){}))},handleRecovery:function(e,t){var a=this;this.$confirm("".concat(this.$t("是否还原文件"),"【").concat(t.name,"】?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$awaitWraper(u.restoreFile(t.id));case 2:a.loadTableData(),a.$message({type:"success",message:a.$t("还原成功!")});case 4:case"end":return e.stop()}}),e)})))).catch((function(){}))},wfTabClick:function(){var e=this;this.$nextTick((function(){e.$refs[e.activeName]&&e.$refs[e.activeName].loadData()}))},handleOpenWFAudit:function(e){e.f_Name?this.$refs[this.activeName].handleOpen(e):this.$message({type:"warning",message:this.$t("文件异常,无法找到上传文件!")})},loadFileListByWf:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$awaitWraper(u.getListByWF(e));case 2:return i=a.sent,l={},i&&i.forEach((function(e){e.f_ProcessTitle=e.f_Name,l[e.f_Id]=e})),a.abrupt("return",l);case 6:case"end":return a.stop()}}),a)})))()},handleAddAuth:function(){this.authTitile=this.levelName,this.authFileId=this.currentLevel.id,this.isFolder=1,this.authVisible=!0},handleAuth:function(e,t){this.authTitile=this.levelName,this.authFileId=t.id,this.isFolder=t.type,this.authVisible=!0},handleAuthOpened:function(){this.$refs.authIndex.init()}}},m=f,h=a("2877"),p=Object(h["a"])(m,i,l,!1,null,null,null);t["default"]=p.exports},8679:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{scopedSlots:e._u([{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{refreshClick:e.init},on:{click:function(t){return e.handleAdd()}}})]},proxy:!0}],null,!1,3766932066)},[a("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData}},[a("l-table-btns",{attrs:{isAuth:!1,btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{title:e.$t(e.formTitle),visible:e.formVisible,height:400,width:600},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form",attrs:{fileInfoId:e.fileInfoId,isFolder:e.isFolder}})],1)],1)},l=[],r=(a("a434"),a("a9e3"),a("96cf"),a("1da1")),n=a("d685"),s=window.$api.system.file,o={components:{MyForm:n["default"]},props:{fileInfoId:String,isFolder:Number},data:function(){return{tableLoading:!1,tableData:[],columns:[{label:"授权角色",prop:"f_ObjId",width:120,align:"left",dataType:"role"},{label:"到期日期",prop:"f_Time",width:120,align:"center",dataType:"datetime",format:"yyyy-MM-dd"},{label:"授权类型",prop:"f_AuthType",minWidth:120,align:"left",dataType:"mydata",options:[{label:"查看",value:"01"},{label:"上传",value:"02"},{label:"下载",value:"03"},{label:"移动",value:"04"},{label:"删除",value:"05"},{label:"还原",value:"06"},{label:"授权",value:"07"},{label:"重命名",value:"08"},{label:"彻底删除",value:"09"},{label:"文件夹新增",value:"10"},{label:"文件夹删除",value:"11"},{label:"文件夹移动",value:"12"},{label:"文件夹授权",value:"13"},{label:"文件夹上传",value:"14"},{label:"文件夹重命名",value:"15"}]}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:100},{prop:"Delete",label:this.$t("删除"),width:100}],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1}},methods:{init:function(){this.loadTableData()},hanleSearch:function(){},loadTableData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,e.$awaitWraper(s.getAuthList(e.fileInfoId));case 3:a=t.sent,e.tableData=a||[],e.tableLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleAdd:function(){this.formEdit=!1,this.handleShowForm("新增")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,this.handleShowForm("编辑")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.tableData.splice(e,1),i.next=3,s.deleteAuth(t.f_Id);case 3:a.$message({type:"success",message:a.$t("删除成功!")});case 4:case"end":return i.stop()}}),i)})))).catch((function(){a.$message({type:"info",message:a.$t("已取消删除!")})}))},handleSave:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e("保存数据中..."),i.next=3,a.$refs.form.validateForm();case 3:if(!i.sent){i.next=8;break}return i.next=6,a.$refs.form.saveForm({keyValue:a.formEdit?a.formEditRow.f_Id:"",isEdit:a.formEdit});case 6:l=i.sent,l&&(r=a.formEdit?a.$t("更新成功!"):a.$t("新增成功!"),a.$message({type:"success",message:a.$t(r)}),a.loadTableData(),a.formVisible=!1);case 8:t();case 9:case"end":return i.stop()}}),i)})))()},handleShowForm:function(e){this.formTitle=e,this.formVisible=!0},handleOpenedForm:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.formEdit&&e.$refs.form.setForm(e.formEditRow);case 1:case"end":return t.stop()}}),t)})))()},handleCloseForm:function(){this.$refs.form.resetForm()}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,l,!1,null,null,null);t["default"]=u.exports},"87d6":function(e,t,a){},"9ec5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"16px 16px 0 16px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini"}},[a("div",{staticClass:"l-rblock"},[a("el-form-item",{attrs:{prop:"f_Name"}},[a("el-input",{attrs:{placeholder:e.$t("请输入名称")},model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1)])],1)},l=[],r=(a("96cf"),a("1da1")),n=window.$api.system.file,s={data:function(){var e=this;return{moduleCode:"learun-file",formData:{f_Name:""},rules:{f_Name:[{required:!0,message:this.$t("请输入名称")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_Id},tableName:"lr_base_folder",keyName:"f_Id",filedsJsonName:"fileFolderForm_filedsJson",message:this.$t("文件夹名重复"),trigger:"null"}]},pid:""}},computed:{fileFolderForm_filedsJson:function(){return{f_PId:this.pid,f_DeleteMark:0}}},methods:{resetForm:function(){this.formData.f_Id="",this.formData.f_PId="",this.pid="",this.$formClear(this.$refs.form)},validateForm:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pid=e,a.next=3,t.$formValidateWraper(t.$refs.form);case 3:if(a.sent){a.next=5;break}return a.abrupt("return",!1);case 5:return a.abrupt("return",!0);case 6:case"end":return a.stop()}}),a)})))()},setForm:function(e){this.formData=e},getForm:function(){return this.$deepClone(this.formData)},saveForm:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,l,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.keyValue,l=e.pid,r=e.levelId,s=e.isEdit,o=t.getForm(),!s){a.next=8;break}return a.next=5,t.$awaitWraper(n.reNameFolder(i,o.f_Name));case 5:return a.abrupt("return",a.sent);case 8:return o.f_PId=l,o.f_LevelId=r,o.f_Id=i,a.next=13,t.$awaitWraper(n.addFolder(o));case 13:return a.abrupt("return",a.sent);case 14:case"end":return a.stop()}}),a)})))()}}},o=s,c=a("2877"),d=Object(c["a"])(o,i,l,!1,null,null,null);t["default"]=d.exports},a3c7a:function(e,t,a){"use strict";a("2ba8")},cf61:function(e,t,a){"use strict";a("ebdb")},d685:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"8px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini",labelPosition:"right",labelWidth:"80px"}},[a("div",{staticClass:"l-auto-window only-tabs"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("主表信息"),name:"tab0"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("授权角色"),prop:"lr_base_file_auth_f_ObjId"}},[a("l-role-select",{model:{value:e.formData.lr_base_file_auth_f_ObjId,callback:function(t){e.$set(e.formData,"lr_base_file_auth_f_ObjId",t)},expression:"formData.lr_base_file_auth_f_ObjId"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("授权类型"),prop:"lr_base_file_auth_f_AuthType"}},[a("l-select",{attrs:{multiple:!0,options:e.lr_base_file_auth_f_AuthTypeOptions},model:{value:e.formData.lr_base_file_auth_f_AuthType,callback:function(t){e.$set(e.formData,"lr_base_file_auth_f_AuthType",t)},expression:"formData.lr_base_file_auth_f_AuthType"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("到期日期"),prop:"lr_base_file_auth_f_Time"}},[a("l-date",{attrs:{readonly:!1,format:"yyyy-MM-dd",dateType:"date",clearable:!0,placeholder:e.$t("请选择")},model:{value:e.formData.lr_base_file_auth_f_Time,callback:function(t){e.$set(e.formData,"lr_base_file_auth_f_Time",t)},expression:"formData.lr_base_file_auth_f_Time"}})],1)],1),1==e.isFolder?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{labelWidth:"96px",label:e.$t("作用子文件夹"),prop:"lr_base_file_auth_f_IsChild"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.lr_base_file_auth_f_IsChild,callback:function(t){e.$set(e.formData,"lr_base_file_auth_f_IsChild",t)},expression:"formData.lr_base_file_auth_f_IsChild"}})],1)],1):e._e()],1)])],1)],1)],1)])],1)},l=[],r=(a("a9e3"),a("96cf"),a("1da1")),n=window.$api.system.file,s={props:{isReadOnly:{type:Boolean,default:!1},fileInfoId:String,isFolder:Number},data:function(){return{moduleCode:"demo_xx",activeName:"tab0",formData:{lr_base_file_auth_f_ObjId:"",lr_base_file_auth_f_AuthType:"",lr_base_file_auth_f_Time:"",lr_base_file_auth_f_IsChild:1},rules:{lr_base_file_auth_f_ObjId:[{required:!0,message:this.$t("请选择")}],lr_base_file_auth_f_AuthType:[{required:!0,message:this.$t("请选择")}]}}},computed:{lr_base_file_auth_f_AuthTypeOptions:function(){var e=[{label:this.$t("查看"),value:"01"},{label:this.$t("上传"),value:"02"},{label:this.$t("下载"),value:"03"},{label:this.$t("移动"),value:"04"},{label:this.$t("删除"),value:"05"},{label:this.$t("还原"),value:"06"},{label:this.$t("授权"),value:"07"},{label:this.$t("重命名"),value:"08"},{label:this.$t("彻底删除"),value:"09"}];return 1==this.isFolder&&e.push.apply(e,[{label:this.$t("文件夹新增"),value:"10"},{label:this.$t("文件夹删除"),value:"11"},{label:this.$t("文件夹移动"),value:"12"},{label:this.$t("文件夹授权"),value:"13"},{label:this.$t("文件夹上传"),value:"14"},{label:this.$t("文件夹重命名"),value:"15"}]),e}},methods:{resetForm:function(){this.$formClear(this.$refs.form),this.activeName="tab0"},validateForm:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()},setForm:function(e){this.$setFormData(this.formData,e,"lr_base_file_auth")},getForm:function(){return this.$getFormData(this.formData,"lr_base_file_auth")},saveForm:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,l,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.keyValue,l=e.isEdit,r=t.getForm(),r.f_FileInfoId=t.fileInfoId,r.f_IsFolder=t.isFolder,r.f_ObjType=2,!l){a.next=11;break}return a.next=8,t.$awaitWraper(n.updateAuth(i,r));case 8:return a.abrupt("return",a.sent);case 11:return a.next=13,t.$awaitWraper(n.addAuth(r));case 13:return a.abrupt("return",a.sent);case 14:case"end":return a.stop()}}),a)})))()}}},o=s,c=a("2877"),d=Object(c["a"])(o,i,l,!1,null,null,null);t["default"]=d.exports},ebdb:function(e,t,a){},f06d:function(e,t,a){"use strict";a("87d6")}}]);