(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["supplier","supplier-assessForm","supplier-form","supplier-lookForm"],{"628f":function(e,a,t){"use strict";t("e9f3")},"6a12":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-form",{ref:"form",staticClass:"learun-el-form-left",attrs:{model:e.formData,rules:e.isReadOnly?{}:e.rules,size:"mini",labelPosition:"left",labelWidth:"100px"}},[e.loading?e._e():t("el-row",{staticClass:"erp-supplier-assess"},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货能力评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},["0"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_CapacityLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_CapacityLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityLevel",a)},expression:"formData.case_erp_supplierrisk_f_CapacityLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_CapacityReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_CapacityReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",showWordLimit:!1,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_CapacityReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityReason",a)},expression:"formData.case_erp_supplierrisk_f_CapacityReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_CapacityFile"}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"case_erp_supplierrisk_f_CapacityFile",labelWidth:"0"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly},model:{value:e.formData.case_erp_supplierrisk_f_CapacityFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityFile",a)},expression:"formData.case_erp_supplierrisk_f_CapacityFile"}})],1)],1)],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货质量评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SupplierLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SupplierLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierLevel",a)},expression:"formData.case_erp_supplierrisk_f_SupplierLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SupplierReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SupplierReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierReason",a)},expression:"formData.case_erp_supplierrisk_f_SupplierReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SupplierFile"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierFile",a)},expression:"formData.case_erp_supplierrisk_f_SupplierFile"}})],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("环境与安全评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SafetyLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SafetyLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyLevel",a)},expression:"formData.case_erp_supplierrisk_f_SafetyLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SafetyReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SafetyReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyReason",a)},expression:"formData.case_erp_supplierrisk_f_SafetyReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SafetyFile"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyFile",a)},expression:"formData.case_erp_supplierrisk_f_SafetyFile"}})],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("最终评估结果"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_FinalState"}},["0"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(e._s(e.$t("优秀"))+" ")]):"1"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",{attrs:{type:"success"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("良好"))+" ")]):"2"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",{attrs:{type:"info"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("及格"))+" ")]):t("el-tag",{attrs:{type:"danger"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("不及格"))+" ")])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_FinalState"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_FinalStateOptions},model:{value:e.formData.case_erp_supplierrisk_f_FinalState,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_FinalState",a)},expression:"formData.case_erp_supplierrisk_f_FinalState"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_FinalReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_FinalReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_FinalReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_FinalReason",a)},expression:"formData.case_erp_supplierrisk_f_FinalReason"}})],1)],1)])],1)],1)},s=[],l=(t("96cf"),t("1da1")),i=window.$api.erpcase.supplier,p={props:{isReadOnly:{type:Boolean,default:!1},id:{},type:{}},data:function(){return{moduleCode:"ERP_Suppliers",formData:{case_erp_supplierrisk_f_CapacityLevel:"",case_erp_supplierrisk_f_CapacityReason:"",case_erp_supplierrisk_f_CapacityFile:"",case_erp_supplierrisk_f_SupplierLevel:"",case_erp_supplierrisk_f_SupplierReason:"",case_erp_supplierrisk_f_SupplierFile:"",case_erp_supplierrisk_f_SafetyLevel:"",case_erp_supplierrisk_f_SafetyReason:"",case_erp_supplierrisk_f_SafetyFile:"",case_erp_supplierrisk_f_FinalState:"",case_erp_supplierrisk_f_FinalReason:""},rules:{case_erp_supplierrisk_f_CapacityLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_CapacityReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SupplierLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SupplierReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SafetyLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SafetyReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_FinalState:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_FinalReason:[{required:!0,message:"请输入："}]},loading:!0}},computed:{case_erp_supplierrisk_f_CapacityLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SupplierLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SafetyLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_FinalStateOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]}},created:function(){this.isReadOnly?this.loadFormData(this.id):this.loading=!1},methods:{resetForm:function(){this.$formClear(this.$refs.form)},validateForm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(a.sent){a.next=4;break}return a.abrupt("return",!1);case 4:return a.abrupt("return",!0);case 5:case"end":return a.stop()}}),a)})))()},setForm:function(e){this.$setFormData(this.formData,e,"case_erp_supplierrisk")},getForm:function(){var e=this.$getFormData(this.formData,"case_erp_supplierrisk");return e.f_Type=this.type,e.f_SupplierId=this.id,e},loadFormData:function(e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.loading=!0,t.next=3,a.$awaitWraper(i.getAssess(e,a.type));case 3:r=t.sent,r&&(a.setForm(r),a.loading=!1);case 5:case"end":return t.stop()}}),t)})))()}}},o=p,n=(t("628f"),t("2877")),_=Object(n["a"])(o,r,s,!1,null,"1c144dd3",null);a["default"]=_.exports},9029:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.lr_loadPage?e._e():t("l-layout",{staticClass:"l-tab-page erpCase"},[e.lookFormVisible?e._e():t("l-panel",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[e._v(e._s(e.$t("潜在供应商")))]),t("div",{staticStyle:{width:"560px"}},[t("div",{staticClass:"ml-8",staticStyle:{float:"right"}},[t("l-tool-btns",{attrs:{hasTableSetting:!0},on:{setting:e.lr_handleSettingTable,click:function(a){return e.handleAdd()}}},[t("l-excel-btns")],1)],1)])]},proxy:!0},{key:"toolLeft",fn:function(){return[t("l-query2",{attrs:{items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"f_AssessState",fn:function(){return[t("l-select",{attrs:{options:e.case_erp_supplier_f_AssessStateOptions},model:{value:e.queryData.f_AssessState,callback:function(a){e.$set(e.queryData,"f_AssessState",a)},expression:"queryData.f_AssessState"}})]},proxy:!0},{key:"f_CreateDate",fn:function(){return[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryData.f_CreateDate,callback:function(a){e.$set(e.queryData,"f_CreateDate",a)},expression:"queryData.f_CreateDate"}})]},proxy:!0},{key:"f_LatentState",fn:function(){return[t("l-select",{attrs:{options:e.case_erp_supplier_f_FormalStateOptions},model:{value:e.queryData.f_LatentState,callback:function(a){e.$set(e.queryData,"f_LatentState",a)},expression:"queryData.f_LatentState"}})]},proxy:!0},{key:"f_Type",fn:function(){return[t("l-select",{attrs:{options:e.case_erp_supplier_f_TypeStateOptions},model:{value:e.queryData.f_Type,callback:function(a){e.$set(e.queryData,"f_Type",a)},expression:"queryData.f_Type"}})]},proxy:!0}],null,!1,359580293)})]},proxy:!0}],null,!1,3585562159)},[t("l-table",{key:Math.random(),ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(a){e.tableCurrentPage=a},"update:table-page":function(a){e.tableCurrentPage=a},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_TypeList",fn:function(a){return[t("div",{staticClass:"form_information form_wrap"},e._l(a.row.f_TypeList,(function(a,r){return t("div",{key:r},[t("el-tag",{staticClass:"margin_5",attrs:{size:"mini",type:e.tagType[a]}},[e._v(e._s(a))])],1)})),0)]}}],null,!1,2229489340)},[t("l-table-btns",{attrs:{btns:e.tableBtns,filterBtns:e.filterBtns,isAuth:!1,btnNum:5},on:{click:e.lr_handleTableBtnClick}})],1)],1),t("transition",{attrs:{name:"el-zoom-in-center"}},[e.lookFormVisible?t("l-panel",{scopedSlots:e._u([{key:"title",fn:function(){return[t("el-page-header",{attrs:{content:e.$t(e.show_name)},on:{back:e.outBtn}})]},proxy:!0}],null,!1,1704973620)},[["风险评估","评估查看"].includes(e.show_name)?t("look-form",{ref:"lookForm",attrs:{isReadOnly:!e.lookFormEdit,id:e.lookFormEditRow.f_Id,type:"0"},on:{submit:e.assessSubmit}}):e._e(),["转正申请"].includes(e.show_name)?t("wf-create-form",{ref:"wfcreate",attrs:{code:"erp-supplier",wraperType:"page",wfSubmitText:"提交转正申请",params:{id:e.supplierId,notAssess:e.notAssess},wfNotShowWf:e.notAssess},on:{refresh:e.assessSubmit}}):e._e()],1):e._e()],1),t("l-dialog",{attrs:{title:e.$t(e.formTitle),visible:e.formVisible,height:426,width:487},on:{"update:visible":function(a){e.formVisible=a},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[t("my-form",{ref:"form"})],1),t("wf-audit-form",{ref:"form",attrs:{type:"auditAndlook",params:{loadProcessId:e.loadProcessId},isLoadFormData:!0,title:"审核查看",visible:e.wfvisible},on:{"update:visible":function(a){e.wfvisible=a},refresh:function(a){return e.assessSubmit(!0)}}})],1)},s=[],l=(t("a15b"),t("d81d"),t("a434"),t("ac1f"),t("1276"),t("96cf"),t("1da1")),i=t("9580"),p=t("f2d4"),o=window.$api.erpcase.supplier,n={components:{MyForm:i["default"],LookForm:p["default"]},data:function(){return{lr_isPage:!0,moduleCode:"ERP_Suppliers",tagType:{"成品":"danger","半成品":"success","其他":"info","原料":""},queryData:{f_AssessState:"",f_CreateDate:"",f_LatentState:"",f_Type:""},tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,queryItems:[{label:"风险评估",prop:"f_AssessState"},{label:"添加时间",prop:"f_CreateDate"},{label:"状态",prop:"f_LatentState"},{label:"供应商类型",prop:"f_Type"}],columns:[{label:"供应商编号",prop:"f_Number",align:"left",dataType:"guid",minWidth:160,isNotAutoWrap:!0},{label:"供应商名称",prop:"f_Name",align:"left",minWidth:200,isNotAutoWrap:!0},{label:"供应商负责人",prop:"f_Person",align:"left",width:100},{label:"手机号",prop:"f_Phone",align:"left",width:120},{label:"风险评估",prop:"f_AssessState",align:"left",dataType:"mydata",options:[{value:0,label:"优秀"},{value:"1",label:"良好"},{label:"及格",value:"2"},{label:"不及格",value:"3"},{label:"未评估",value:"4"}]},{label:"经营范围",prop:"f_Scope",align:"left"},{label:"添加时间",prop:"f_CreateDate",align:"left",dataType:"datetime",format:"yyyy-MM-dd",width:100},{label:"状态",prop:"f_LatentState",align:"left",dataType:"mydata",options:[{value:0,label:"潜在"},{value:1,label:"审批中"},{label:"不通过",value:2}]},{label:"供应商类型",prop:"f_TypeList",align:"left",dataType:"dataItem",dataCode:"供应商类型",minWidth:250}],tableBtns:[{prop:"Edit",label:"编辑",width:64},{prop:"Assess",label:"风险评估"},{prop:"AssessLook",label:"评估查看"},{prop:"Apply",label:"转正申请"},{prop:"Delete",label:"删除"}],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1,lookFormVisible:!1,lookFormTitle:"",lookFormEditRow:null,lookFormEdit:!1,lookFormDetails:!1,show_name:"",notAssess:!1,wfvisible:!1}},computed:{case_erp_supplier_f_TypeStateOptions:function(){return[{label:"全部",value:""},{value:"原料",label:"原料"},{value:"半成品",label:"半成品"},{label:"成品",value:"成品"},{label:"其他",value:"其他"}]},case_erp_supplier_f_AssessStateOptions:function(){return[{label:"全部",value:""},{value:"0",label:"优秀"},{value:"1",label:"良好"},{label:"及格",value:"2"},{label:"不及格",value:"3"},{label:"未评估",value:"4"}]},case_erp_supplier_f_FormalStateOptions:function(){return[{label:"全部",value:""},{value:"0",label:"潜在"},{value:"1",label:"审批中"},{value:"2",label:"不通过"}]},supplierId:function(){return this.formEditRow?this.formEditRow.f_Id:""}},mounted:function(){this.init()},methods:{filterBtns:function(e,a){return 4!=e.f_AssessState?a.splice(1,1):a.splice(2,1),1!=e.f_LatentState&&2!=e.f_LatentState||(a[0].disabled=!0,a[2].label="转正查看",a[3].disabled=!0),a},outBtn:function(){this.lookFormVisible=!1},init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var a=e.rows;this.tablePageSize=a,this.loadTableData(!0)},loadTableData:function(e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,l,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(a.tableCurrentPage=1),a.tableLoading=!0,r=a.$deepClone(a.queryData),r.f_CreateDate&&r.f_CreateDate.length&&(s=[],r.f_CreateDate.map((function(e){s.push(a.newDate(e))})),a.$set(r,"f_CreateDateQRange",s.join(" - "))),r.rows=a.tablePageSize,r.page=a.tableCurrentPage,r.sidx="F_CreateDate DESC",r.f_State=0,t.next=10,a.$awaitWraper(o.getPage(r));case 10:if(l=t.sent,null!=l){for(i in l.rows)l.rows[i].f_Type?l.rows[i].f_TypeList=l.rows[i].f_Type.split(","):l.rows[i].f_TypeList=[];a.tableData=l.rows,a.tableTotal=l.records}else a.tableData=[];a.tableLoading=!1;case 13:case"end":return t.stop()}}),t)})))()},newDate:function(e){var a=new Date(e),t=a.getFullYear(),r=a.getMonth()+1;r=r<10?"0"+r:r;var s=a.getDate();return s=s<10?"0"+s:s,t+"-"+r+"-"+s},handleAssess:function(e,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.lookFormEdit=!0,t.lookFormEditRow=a,t.lookFormVisible=!0,t.show_name="风险评估";case 4:case"end":return e.stop()}}),e)})))()},assessSubmit:function(){this.lookFormVisible=!1,this.loadTableData()},handleAssessLook:function(e,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.show_name="评估查看",t.lookFormEditRow=a,t.lookFormEdit=!1,t.lookFormVisible=!0;case 4:case"end":return e.stop()}}),e)})))()},handleApply:function(e,a){1==a.f_LatentState||2==a.f_LatentState?(this.notAssess=4==a.f_AssessState,this.formEditRow=a,this.wfvisible=!0):(this.show_name="转正申请",this.notAssess=4==a.f_AssessState,this.formEditRow=a,this.lookFormVisible=!0)},handleAdd:function(){this.formEdit=!1,this.handleShowForm("新增")},handleEdit:function(e,a){this.formEdit=!0,this.formEditRow=a,this.handleShowForm("编辑")},handleDelete:function(e,a){var t=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.tableData.splice(e,1),t.tableTotal--,r.next=4,o.remove(a.f_Id);case 4:t.$message({type:"success",message:t.$t("删除成功!")});case 5:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:t.$t("已取消删除!")})}))},handleSave:function(e,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e("保存数据中..."),r.next=3,t.$refs.form.validateForm();case 3:if(!r.sent){r.next=8;break}return r.next=6,t.$refs.form.saveForm({keyValue:t.formEdit?t.formEditRow.f_Id:"",isEdit:t.formEdit});case 6:s=r.sent,s&&(l=t.formEdit?"更新成功!":"新增成功!",t.$message({type:"success",message:t.$t(l)}),t.loadTableData(),t.formVisible=!1);case 8:a();case 9:case"end":return r.stop()}}),r)})))()},handleShowForm:function(e){this.formTitle=e,this.formVisible=!0},handleOpenedForm:function(e,a){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.formEdit){r.next=5;break}return e("加载数据中..."),r.next=4,t.$refs.form.loadFormData({keyValue:t.formEditRow.f_Id});case 4:a();case 5:case"end":return r.stop()}}),r)})))()},handleCloseForm:function(){this.$refs.form.resetForm()},loadProcessId:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$awaitWraper(o.getFormalBySupplier(e.supplierId));case 2:if(t=a.sent,!t){a.next=5;break}return a.abrupt("return",t.f_Id);case 5:return a.abrupt("return","");case 6:case"end":return a.stop()}}),a)})))()}}},_=n,u=t("2877"),c=Object(u["a"])(_,r,s,!1,null,null,null);a["default"]=c.exports},9580:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"l-rblock l-form-viewer learun-el-form-left",staticStyle:{padding:"8px"}},[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini",labelPosition:"left",labelWidth:"100px"}},[t("div",{staticClass:"l-auto-window only-tabs"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("主表信息"),name:"tab0"}},[t("el-row",{attrs:{gutter:16}},[t("div",{staticClass:"l-rblock"},[t("el-col",{attrs:{span:18}},[t("el-form-item",{attrs:{label:e.$t("供应商编号"),prop:"case_erp_supplier_f_Number"}},["0"==e.formData.case_erp_supplier_f_IsSysNum?t("l-code",{attrs:{code:"erp_supplier_num",size:"mini"},model:{value:e.formData.case_erp_supplier_f_Number,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Number",a)},expression:"formData.case_erp_supplier_f_Number"}}):t("el-input",{attrs:{size:"mini",maxlength:"15",disabled:e.isEdit,placeholder:e.$t("请输入16位数字编码")},model:{value:e.formData.case_erp_supplier_f_Number,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Number",a)},expression:"formData.case_erp_supplier_f_Number"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{prop:"case_erp_supplier_f_IsSysNum",labelWidth:"10px"}},[t("l-checkbox",{attrs:{options:e.case_erp_supplier_f_IsSysNumOptions,disabled:e.isEdit},on:{change:e.checkChange},model:{value:e.formData.case_erp_supplier_f_IsSysNum,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_IsSysNum",a)},expression:"formData.case_erp_supplier_f_IsSysNum"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("供应商名称"),prop:"case_erp_supplier_f_Name"}},[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplier_f_Name,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Name",a)},expression:"formData.case_erp_supplier_f_Name"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("负责人"),prop:"case_erp_supplier_f_Person"}},[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplier_f_Person,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Person",a)},expression:"formData.case_erp_supplier_f_Person"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("手机号"),prop:"case_erp_supplier_f_Phone"}},[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplier_f_Phone,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Phone",a)},expression:"formData.case_erp_supplier_f_Phone"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("经营范围"),prop:"case_erp_supplier_f_Scope"}},[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplier_f_Scope,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Scope",a)},expression:"formData.case_erp_supplier_f_Scope"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("供应商类型"),prop:"case_erp_supplier_f_Type"}},[t("l-select",{attrs:{multiple:!0,options:e.case_erp_supplier_f_TypeOptions},model:{value:e.formData.case_erp_supplier_f_Type,callback:function(a){e.$set(e.formData,"case_erp_supplier_f_Type",a)},expression:"formData.case_erp_supplier_f_Type"}})],1)],1)],1)])],1)],1)],1)])],1)},s=[],l=(t("96cf"),t("1da1")),i=window.$api.erpcase.supplier,p={data:function(){var e=this;return{moduleCode:"ERP_Suppliers",activeName:"tab0",formData:{case_erp_supplier_f_State:0,case_erp_supplier_f_Number:"",case_erp_supplier_f_IsSysNum:"0",case_erp_supplier_f_Name:"",case_erp_supplier_f_Person:"",case_erp_supplier_f_Phone:"",case_erp_supplier_f_Scope:"",case_erp_supplier_f_Type:""},rules:{case_erp_supplier_f_Number:[{required:!0,message:"请输入供应商编号"}],case_erp_supplier_f_Name:[{required:!0,message:"请输入供应商名称"},{validator:this.lr_existDbFiled,fieldName:"f_Name",keyValue:function(){return e.formData.case_erp_supplier_f_Id},tableName:"case_erp_supplier",keyName:"f_Id"}],case_erp_supplier_f_Phone:[{pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"请输入电话/手机号"}],case_erp_supplier_f_Scope:[{required:!0,message:"请输入经营范围"}],case_erp_supplier_f_Type:[{required:!0,message:"请选择供应商类型"}]},isEdit:!1}},computed:{case_erp_supplier_f_IsSysNumOptions:function(){return[{value:"0",label:"用系统编码"}]},case_erp_supplier_f_TypeOptions:function(){return[{value:"其他",label:"其他"},{value:"半成品",label:"半成品"},{label:"成品",value:"成品"},{label:"原料",value:"原料"}]}},methods:{checkChange:function(){var e=this;this.formData.case_erp_supplier_f_Number="",0!=parseInt(this.formData.case_erp_supplier_f_IsSysNum)&&this.rules.case_erp_supplier_f_Number.push({validator:this.lr_existDbFiled,fieldName:"f_Number",keyValue:function(){return e.formData.case_erp_supplier_f_Id},tableName:"case_erp_supplier",keyName:"f_Id"})},resetForm:function(){this.$formClear(this.$refs.form),this.activeName="tab0",this.isEdit=!1},validateForm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(a.sent){a.next=4;break}return a.abrupt("return",!1);case 4:return a.abrupt("return",!0);case 5:case"end":return a.stop()}}),a)})))()},setForm:function(e){this.$setFormData(this.formData,e,"case_erp_supplier"),this.isEdit=!0},getForm:function(){return this.$getFormData(this.formData,"case_erp_supplier")},loadFormData:function(e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.keyValue,t.next=3,a.$awaitWraper(i.get(r));case 3:if(s=t.sent,!s){t.next=9;break}return a.setForm(s),t.abrupt("return",!0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})))()},saveForm:function(e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.keyValue,s=e.isEdit,l=a.getForm(),!s){t.next=8;break}return t.next=5,a.$awaitWraper(i.update(r,l));case 5:return t.abrupt("return",t.sent);case 8:return l.f_Id=r,t.next=11,a.$awaitWraper(i.add(l));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))()}}},o=p,n=t("2877"),_=Object(n["a"])(o,r,s,!1,null,null,null);a["default"]=_.exports},e9f3:function(e,a,t){},f2d4:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"8px"}},[t("el-row",{attrs:{gutter:16}},[t("div",{staticClass:"l-rblock"},[t("el-col",{attrs:{span:24}},[0!=e.type?t("div",{staticClass:"font_size_24 form_flex_center"},[e._v(" "+e._s(e.$t("供应商年审"))+" ")]):e._e(),0==e.type?t("div",{staticClass:"font_size_24 form_flex_center"},[e._v(" "+e._s(e.$t("供应商评估报告"))+" ")]):e._e(),t("div",{staticClass:"form_name"},[e._v(e._s(e.$t("基本信息")))]),t("div",{staticClass:"form_back form_flex mt-16"},[t("div",[e._v(" "+e._s(e.$t("供应商编号："+e.formData.case_erp_supplier_f_Number))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商名称："+e.formData.case_erp_supplier_f_Name))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商负责人："+e.formData.case_erp_supplier_f_Person))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商类型："+e.formData.case_erp_supplier_f_Type))+" ")]),t("div",[e._v(" "+e._s(e.$t("添加人："+e.formData.case_erp_supplier_f_CreateUserName))+" ")]),t("div",[e._v(" "+e._s(e.$t("创建日期："+e.formData.case_erp_supplier_f_CreateDate))+" ")]),t("div",[e._v(" "+e._s(e.$t("经营范围："+e.formData.case_erp_supplier_f_Scope))+" ")]),t("div",[e._v(" "+e._s(e.$t("手机号："+e.formData.case_erp_supplier_f_Phone))+" ")])])]),t("div",{staticStyle:{padding:"0 8px"}},[t("assess-form",{ref:"assessForm",staticClass:"mb-8",attrs:{isReadOnly:e.isReadOnly,id:e.id,type:e.type}}),t("el-col",{attrs:{span:24}},[e.isReadOnly?e._e():t("div",{staticClass:"mt-8 mb-8 text-center"},[t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btn_width200_height40",attrs:{size:"mini",type:"primary"},on:{click:e.saveForm}},[e._v(e._s(e.$t("保存提交")))])],1)])],1)],1)])],1)},s=[],l=(t("96cf"),t("1da1")),i=t("6a12"),p=window.$api.erpcase.supplier,o={components:{AssessForm:i["default"]},props:{isReadOnly:{type:Boolean,default:!1},id:{},type:{}},data:function(){return{fullscreenLoading:!1,moduleCode:"ERP_Suppliers",formData:{case_erp_supplier_f_Number:"",case_erp_supplier_f_Name:"",case_erp_supplier_f_Person:"",case_erp_supplier_f_Type:"",case_erp_supplier_f_CreateUserName:"",case_erp_supplier_f_CreateDate:"",case_erp_supplier_f_Scope:"",case_erp_supplier_f_Phone:""}}},computed:{},created:function(){this.loadFormData({keyValue:this.id})},methods:{resetForm:function(){this.$refs.assessForm.resetForm&&this.$refs.assessForm.resetForm()},validateForm:function(){return this.$refs.assessForm.validateForm()},setForm:function(e){this.$setFormData(this.formData,e,"case_erp_supplier"),this.formData.case_erp_supplier_f_CreateDate=this.$formatDate(this.formData.case_erp_supplier_f_CreateDate,"yyyy-MM-dd")},loadFormData:function(e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.keyValue,t.next=3,a.$awaitWraper(p.get(r));case 3:s=t.sent,s&&a.setForm(s);case 5:case"end":return t.stop()}}),t)})))()},saveForm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.fullscreenLoading=!0,a.next=3,e.validateForm();case 3:if(!a.sent){a.next=9;break}return t=e.$refs.assessForm.getForm(),a.next=7,e.$awaitWraper(p.addAssess(t));case 7:r=a.sent,r&&(e.$message({type:"success",message:e.$t("评估成功!")}),e.$emit("submit"));case 9:e.fullscreenLoading=!1;case 10:case"end":return a.stop()}}),a)})))()}}},n=o,_=t("2877"),u=Object(_["a"])(n,r,s,!1,null,null,null);a["default"]=u.exports}}]);