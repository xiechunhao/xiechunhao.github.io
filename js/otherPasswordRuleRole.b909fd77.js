(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherPasswordRuleRole","otherPasswordRuleRole-form"],{"7f6c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("l-layout",{directives:[{name:"show",rawName:"v-show",value:!e.lr_loadPage,expression:"!lr_loadPage"}],staticClass:"l-tab-page"},[r("l-panel",{scopedSlots:e._u([{key:"toolLeft",fn:function(){return[r("l-query2",{attrs:{items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"f_RoleId",fn:function(){return[r("l-select",{attrs:{options:e.lr_roleOptions(e.lr_roles)},model:{value:e.queryData.f_RoleId,callback:function(t){e.$set(e.queryData,"f_RoleId",t)},expression:"queryData.f_RoleId"}})]},proxy:!0}])})]},proxy:!0},{key:"toolRight",fn:function(){return[r("l-tool-btns",{attrs:{hasTableSetting:!0},on:{setting:e.lr_handleSettingTable,click:function(t){return e.handleAdd()}}})]},proxy:!0}])},[r("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([e._l(e.lr_tableColumnsByToLabel(e.lr_getPageColumns(e.columns)),(function(e,t){return{key:e.prop,fn:function(a){return[r("l-value-to-label",{key:t,attrs:{value:a.row[e.prop],type:e.dataType,code:e.dataCode,valueKey:e.valueKey,labelKey:e.labelKey,options:e.options,format:e.format,setting:e.setting}})]}}}))],null,!0)},[r("l-table-btns",{attrs:{btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),r("l-dialog",{attrs:{title:e.$t(e.formTitle),visible:e.formVisible,height:420,width:500},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[r("my-form",{ref:"form",attrs:{isReadOnly:e.formDetails}})],1)],1)},l=[],o=(r("a434"),r("96cf"),r("1da1")),s=r("f872"),n=window.$api.systemconfig.otherPasswordRule,i={components:{MyForm:s["default"]},data:function(){var e=this;return{lr_isPage:!0,moduleCode:"PasswordRuleManage",queryData:{f_SecretLevel:"",f_Complexity:""},queryItems:[{label:this.$t("角色"),prop:"f_RoleId"}],tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"角色",prop:"f_RoleId",minWidth:160,align:"left",formatter:function(t){var r=t.cellValue;return e.lr_loadRole(r),(e.lr_role[r]||{})["f_FullName"]||""}},{label:"复杂度",prop:"f_Complexity",minWidth:160,align:"left",dataType:"mydata",options:[{value:"1",label:"大写字母 "},{value:"2",label:"小写字母"},{value:"3",label:"数字"},{value:"4",label:"特殊字符"}]},{label:"更换周期/天",prop:"f_Day",width:100,align:"center",dataType:"number"},{label:"密码长度",prop:"f_Length",width:100,align:"center",dataType:"number"},{label:"最后修改人员",prop:"f_ModifyUserId",width:100,align:"left",dataType:"user"},{label:"最后修改时间",prop:"f_ModifyDate",width:160,align:"left",dataType:"datetime"}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:40},{prop:"Delete",label:this.$t("删除"),width:40},{prop:"Details",label:this.$t("详情"),width:40}],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1,formDetails:!1}},computed:{f_ComplexityOptions:function(){return[{value:"1",label:this.$t("大写字母")},{value:"2",label:this.$t("小写字母")},{value:"3",label:this.$t("数字")},{label:this.$t("特殊字符"),value:"4"}]}},created:function(){this.lr_loadRoles()},mounted:function(){this.init()},methods:{init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},loadTableData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e||(t.tableCurrentPage=1),t.tableLoading=!0,a=t.$deepClone(t.queryData),a.rows=t.tablePageSize,a.page=t.tableCurrentPage,a.sidx="f_SecretLevel",a.f_Type=1,r.next=9,t.$awaitWraper(n.getPage(a));case 9:l=r.sent,null!=l?(t.tableData=l.rows,t.tableTotal=l.records):t.tableData=[],t.tableLoading=!1;case 12:case"end":return r.stop()}}),r)})))()},handleAdd:function(){this.formEdit=!1,this.formDetails=!1,this.handleShowForm("新增")},handleEdit:function(e,t){this.formEdit=!0,this.formDetails=!1,this.formEditRow=t,this.handleShowForm("编辑")},handleDelete:function(e,t){var r=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.tableData.splice(e,1),r.tableTotal--,a.next=4,n.remove(t.f_Id);case 4:r.$message({type:"success",message:r.$t("删除成功!")});case 5:case"end":return a.stop()}}),a)})))).catch((function(){r.$message({type:"info",message:r.$t("已取消删除!")})}))},handleDetails:function(e,t){this.formEdit=!0,this.formDetails=!0,this.formEditRow=t,this.handleShowForm("详情")},handleSave:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e("保存数据中..."),a.next=3,r.$refs.form.validateForm();case 3:if(!a.sent){a.next=8;break}return a.next=6,r.$refs.form.saveForm({keyValue:r.formEdit?r.formEditRow.f_Id:"",isEdit:r.formEdit});case 6:l=a.sent,l&&(o=r.formEdit?r.$t("更新成功!"):r.$t("新增成功!"),r.$message({type:"success",message:r.$t(o)}),r.loadTableData(),r.formVisible=!1);case 8:t();case 9:case"end":return a.stop()}}),a)})))()},handleShowForm:function(e){this.formTitle=e,this.formVisible=!0},handleOpenedForm:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.formEdit){a.next=5;break}return e("加载数据中..."),a.next=4,r.$refs.form.loadFormData({keyValue:r.formEditRow.f_Id});case 4:t();case 5:case"end":return a.stop()}}),a)})))()},handleCloseForm:function(){this.$refs.form.resetForm()}}},u=i,d=r("2877"),f=Object(d["a"])(u,a,l,!1,null,null,null);t["default"]=f.exports},f872:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"8px"}},[r("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini",labelPosition:"right",labelWidth:"100px"}},[r("div",{staticClass:"l-auto-window only-tabs"},[r("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("密码规则"),name:"tab0"}},[r("el-row",{attrs:{gutter:0}},[r("div",{staticClass:"l-rblock"},[e.lr_formLookAuth("lr_other_passwordrule_f_RoleId")?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("角色"),prop:"lr_other_passwordrule_f_RoleId"}},[r("l-select",{attrs:{disabled:!e.lr_formEditAuth("lr_other_passwordrule_f_RoleId",e.isReadOnly),options:e.lr_roleOptions(e.lr_roles)},model:{value:e.formData.lr_other_passwordrule_f_RoleId,callback:function(t){e.$set(e.formData,"lr_other_passwordrule_f_RoleId",t)},expression:"formData.lr_other_passwordrule_f_RoleId"}})],1)],1):e._e(),e.lr_formLookAuth("lr_other_passwordrule_f_Day")?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("更换周期/天"),prop:"lr_other_passwordrule_f_Day"}},[r("el-input-number",{attrs:{disabled:!e.lr_formEditAuth("lr_other_passwordrule_f_Day",e.isReadOnly),min:1,controlsPosition:"default",placeholder:e.$t("请输入")},model:{value:e.formData.lr_other_passwordrule_f_Day,callback:function(t){e.$set(e.formData,"lr_other_passwordrule_f_Day",t)},expression:"formData.lr_other_passwordrule_f_Day"}})],1)],1):e._e(),e.lr_formLookAuth("lr_other_passwordrule_f_Length")?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("密码长度"),prop:"lr_other_passwordrule_f_Length"}},[r("el-input-number",{attrs:{disabled:!e.lr_formEditAuth("lr_other_passwordrule_f_Length",e.isReadOnly),min:6,controlsPosition:"default",placeholder:e.$t("请输入")},model:{value:e.formData.lr_other_passwordrule_f_Length,callback:function(t){e.$set(e.formData,"lr_other_passwordrule_f_Length",t)},expression:"formData.lr_other_passwordrule_f_Length"}})],1)],1):e._e(),e.lr_formLookAuth("lr_other_passwordrule_f_Complexity")?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("复杂度"),prop:"lr_other_passwordrule_f_Complexity"}},[r("l-select",{attrs:{disabled:!e.lr_formEditAuth("lr_other_passwordrule_f_Complexity",e.isReadOnly),multiple:!0,options:e.lr_other_passwordrule_f_ComplexityOptions},model:{value:e.formData.lr_other_passwordrule_f_Complexity,callback:function(t){e.$set(e.formData,"lr_other_passwordrule_f_Complexity",t)},expression:"formData.lr_other_passwordrule_f_Complexity"}})],1)],1):e._e(),e.lr_formLookAuth("lr_other_passwordrule_f_Description")?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("备注"),prop:"lr_other_passwordrule_f_Description"}},[r("el-input",{attrs:{type:"textarea",disabled:!e.lr_formEditAuth("lr_other_passwordrule_f_Description",e.isReadOnly),rows:5,placeholder:e.$t("请输入")},model:{value:e.formData.lr_other_passwordrule_f_Description,callback:function(t){e.$set(e.formData,"lr_other_passwordrule_f_Description",t)},expression:"formData.lr_other_passwordrule_f_Description"}})],1)],1):e._e()],1)])],1)],1)],1)])],1)},l=[],o=(r("96cf"),r("1da1")),s=window.$api.systemconfig.otherPasswordRule,n={props:{isReadOnly:{type:Boolean,default:!1}},data:function(){return{moduleCode:"systemconfig_otherPasswordRule",activeName:"tab0",formData:{lr_other_passwordrule_f_RoleId:"",lr_other_passwordrule_f_Day:"1",lr_other_passwordrule_f_Length:"6",lr_other_passwordrule_f_Complexity:"",lr_other_passwordrule_f_Description:"",lr_other_passwordrule_f_Type:1},rules:{lr_other_passwordrule_f_RoleId:[{required:!0,message:this.$t("请选择角色")}],lr_other_passwordrule_f_Day:[{required:!0,message:this.$t("请输入更换周期/天")}],lr_other_passwordrule_f_Length:[{required:!0,message:this.$t("请输入密码长度")}],lr_other_passwordrule_f_Complexity:[{required:!0,message:this.$t("请选择复杂度")}]}}},computed:{lr_other_passwordrule_f_ComplexityOptions:function(){return[{value:"1",label:this.$t("大写字母")},{value:"2",label:this.$t("小写字母")},{value:"3",label:this.$t("数字")},{label:this.$t("特殊字符"),value:"4"}]}},created:function(){this.lr_loadRoles()},methods:{resetForm:function(){this.$formClear(this.$refs.form),this.activeName="tab0"},validateForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()},setForm:function(e){this.$setFormData(this.formData,e,"lr_other_passwordrule")},getForm:function(){return this.$getFormData(this.formData,"lr_other_passwordrule")},loadFormData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.keyValue,r.next=3,t.$awaitWraper(s.get(a));case 3:if(l=r.sent,!l){r.next=9;break}return t.setForm(l),r.abrupt("return",!0);case 9:return r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r)})))()},saveForm:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,l,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.keyValue,l=e.isEdit,o=t.getForm(),!l){r.next=8;break}return r.next=5,t.$awaitWraper(s.update(a,o));case 5:return r.abrupt("return",r.sent);case 8:return o.f_Id=a,r.next=11,t.$awaitWraper(s.add(o));case 11:return r.abrupt("return",r.sent);case 12:case"end":return r.stop()}}),r)})))()}}},i=n,u=r("2877"),d=Object(u["a"])(i,a,l,!1,null,null,null);t["default"]=d.exports}}]);