(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views-build-index~views-preview-index"],{"3fad":function(e,t,n){},"5ace":function(e,t,n){"use strict";n("3fad")},"7c6c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"container",style:e.canvasStyle,attrs:{id:"container"},on:{mousedown:e.handleMouseDown}},[e.gradeFlag||e.contain.config.gradeShow?n("div",{staticClass:"grade",style:e.gradeLenStyle}):e._e(),n("unit",{ref:"unit",attrs:{nav:e.list}})],1)},i=[],_=(n("99af"),n("a9e3"),n("b680"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.nav,(function(t){return n("div",{key:t.index,on:{contextmenu:function(n){return n.preventDefault(),e.handleContextMenu(n,t)}}},[t.children?e._e():n("l-draggable",e._b({directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!item.display"}],ref:e.common.DEAFNAME+t.index,refInFor:!0,attrs:{scale:1/e.container.scale,step:1/e.container.scale,disabled:!e.container.menuFlag,width:t.component.width,height:t.component.height,id:e.common.DEAFNAME+t.index,"active-flag":e.contain.active.includes(t.index)},on:{over:e.handleOver,focus:e.handleFocus,blur:e.handleBlur}},"l-draggable",t,!1),[n(e.common.COMPNAME+t.component.name,e._b({ref:e.common.NAME+t.index,refInFor:!0,tag:"component",attrs:{id:e.common.NAME+t.index,"data-formatter":e.getFunction(t.dataFormatter),"click-formatter":e.getFunction(t.clickFormatter),"echart-formatter":e.getFunction(t.echartFormatter),"label-formatter":e.getFunction(t.labelFormatter),formatter:e.getFunction(t.formatter),width:t.component.width,"data-query":e.getJson(t.dataQuery),height:t.component.height,animation:!e.contain.menuFlag,theme:(t.option||{}).theme,disabled:!e.contain.menuFlag,scale:e.container.stepScale,option:t.option,"home-url":e.contain.config.url,dataSourceCode:t.dataSourceCode,title:"",click:e.handleClick}},"component",t,!1))],1),n("subgroup",{attrs:{nav:t.children}})],1)})),0)}),o=[],r=n("8f9f"),c=r["a"],s=(n("5ace"),n("2877")),l=Object(s["a"])(c,_,o,!1,null,"00099d4a",null),u=l.exports,d=n("c7cf"),h={name:"contents",inject:["contain"],props:{props:{type:Object,default:function(){return{}}},scale:Number,menuFlag:{type:Boolean,default:!1}},provide:function(){return{container:this}},components:{unit:u},data:function(){return{selectCount:{},gradeFlag:!1}},computed:{canvasStyle:function(){var e=this;return Object.assign({transform:"scale(".concat(this.scale,", ").concat(this.scale,")"),width:this.$getPx(this.contain.config.width),height:this.$getPx(this.contain.config.height),backgroundColor:this.contain.config.backgroundColor},function(){if(e.contain.config.backgroundImage)return{background:"url(".concat(e.apiUrl,"system/annexesfile/").concat(e.contain.config.backgroundImage,"?token=").concat(e.token,") 0% 0% / 100% 100% rgb(3, 12, 59)")}}())},gradeLenStyle:function(){return{backgroundSize:"".concat(this.$getPx(this.contain.config.gradeLen)," ").concat(this.$getPx(this.contain.config.gradeLen),",").concat(this.$getPx(this.contain.config.gradeLen)," ").concat(this.$getPx(this.contain.config.gradeLen))}},list:function(){var e=[],t=function t(n){n.children?n.children.forEach((function(e){t(e)})):e.push(n)};this.contain.nav.forEach((function(e){t(e)}));var n=e.length-1;return e.forEach((function(e,t){e.zIndex=n-t})),e}},mounted:function(){this.initFun()},methods:{initFun:function(){var e=this;["handleRefresh"].forEach((function(t){e[t]=e.$refs.unit[t]}))},handlePostionSelect:function(e){this.handleCalcPostionSelect();var t=this.selectCount.maxx1,n=this.selectCount.maxx2,a=this.selectCount.maxy1,i=this.selectCount.maxy2;"left"===e?this.handleMoveSelectList(t,void 0,!0,e):"center"===e?this.handleMoveSelectList(t+(n-t)/2,void 0,!0,e):"right"===e?this.handleMoveSelectList(n,void 0,!0,e):"top"===e?this.handleMoveSelectList(void 0,a,!0,e):"middle"===e?this.handleMoveSelectList(void 0,a+(i-a)/2,!0,e):"bottom"===e&&this.handleMoveSelectList(void 0,i,!0,e)},handleMoveSelectList:function(e,t,n,a){var i=this;this.active.forEach((function(_){_=i.findlist(_);var o=_.component;if(e){var r=Number(n?e:(_.left+e).toFixed(2));if("right"===a)r-=o.width;else if("center"===a){var c=_.left+o.width/2;r=_.left+(e-c)}i.$set(_,"left",r),i.$refs.unit.$refs[d["a"].DEAFNAME+_.index][0].setLeft(r)}if(t){var s=Number(n?t:(_.top+t).toFixed(2));if("bottom"===a)s-=o.height;else if("middle"===a){var l=_.top+o.height/2;s=_.top+(t-l)}i.$set(_,"top",s),i.$refs.unit.$ref[d["a"].DEAFNAME+_.index][0].setTop(s)}}))},handleCalcPostionSelect:function(){var e=this;this.selectCount.maxx1=99999,this.selectCount.maxy1=99999,this.active.forEach((function(t){t=e.findlist(t);var n=t.left,a=t.top,i=t.component.width,_=t.component.height;e.selectCount.maxx1>n&&(e.selectCount.maxx1=n),e.selectCount.maxx2<n+i&&(e.selectCount.maxx2=n+i),e.selectCount.maxy1>a&&(e.selectCount.maxy1=a),e.selectCount.maxy2<a+_&&(e.selectCount.maxy2=a+_)}))},handleMouseDown:function(){this.contain.handleInitActive()}}},f=h,m=Object(s["a"])(f,a,i,!1,null,null,null);t["a"]=m.exports},"8b40":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return _}));var a={width:1920,height:1080,scale:1,mark:{show:!1,text:"learun数据大屏水印",fontSize:20,textStyle:"rgba(100,100,100,0.2)",degree:-20},backgroundImage:"",query:{}},i={menuWidth:150,refreshBtn:!1,columnBtn:!1,labelWidth:100,column:[{label:"名称",prop:"label"},{label:"key值",prop:"prop"},{label:"宽度",prop:"width"}]},_={line:[{label:"线条",value:"line"},{label:"圆环",value:"circle"}],fontWeight:[{label:"normal",value:"normal"},{label:"bold",value:"bold"}],border:[{label:"无边框",value:""},{label:"内置图片",value:"img"},{label:"内置边框",value:"border"}],textAlign:[{label:"居中",value:"center"},{label:"左对齐",value:"left"},{label:"右对齐",value:"right"}],dataType:[{label:"静态",value:0},{label:"接口",value:1},{label:"数据源",value:2}],orientList:[{label:"竖排",value:"vertical"},{label:"横排",value:"horizontal"}],dataMethod:[{label:"POST",value:"post"},{label:"GET",value:"get"}],eventList:["tabs"],dataList:["text","wordcloud","tabs","pie","pictorialbar","swiper","flop","bar","line","progress","table","gauge","funnel","scatter","radar","colorblock","scrollrank","pond","flyline","common"],themeList:[{label:"默认配色",value:"avue"},{label:"紫色主题",value:"macarons"},{label:"绿色主题",value:"wonderland"}],barList:["bar","line"],titleList:["bar","pie","line","radar","funnel"],labelList:["bar","line","pie","radar","scatter","funnel"],legendList:["bar","pie","line","radar","funnel"],colorList:["bar","pie","line","gauge","funnel","scatter","radar"],tipList:["bar","pie","line","gauge","funnel","scatter","radar"],postionList:["bar","line","pictorialbar"],formatterList:["bar","map","line","pie","gauge","funnel","scatter","radar","border","decoration","scrollrank","pond","flyline","time","common","test","pictorialbar","text","datetime","img","imgborder","swiper","iframe","video","flop","colorblock","progress","wordcloud","table","tabs","vue"],tipFormatterList:["bar","map","line","pie","gauge","funnel","scatter","radar"],clickFormatterList:["map","border","decoration","scrollrank","pond","flyline","time","bar","common","test","line","pie","pictorialbar","radar","scatter","funnel","text","datetime","img","imgborder","swiper","iframe","video","flop","colorblock","progress","wordcloud","table","tabs","gauge","vue"],labelFormatterList:["bar","line","pie","radar","scatter","funnel","map"],tabsTypeList:[{label:"选项卡",value:"tabs"},{label:"选择框",value:"select"}],mapType:[{label:"原生",value:0}],target:[{label:"本窗口",value:"_self"},{label:"新窗口",value:"_blank"}],swiperType:[{label:"普通",value:""},{label:"立体",value:"card"}],swiperIndicator:[{label:"外部",value:"indicator"},{label:"不显示",value:"none"}],format:[{label:"日期",value:"yyyy-MM-dd"},{label:"日期+时分",value:"yyyy-MM-dd hh:mm"},{label:"日期+时分秒",value:"yyyy-MM-dd hh:mm:ss"},{label:"日期(无年)",value:"MM-dd"},{label:"时分",value:"hh:mm"},{label:"时分秒",value:"hh:mm:ss"},{label:"星期",value:"day"}]}},"8f9f":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__),_subgroup_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cad6"),_config__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("c7cf");__webpack_exports__["a"]={name:"unit",inject:["contain","container"],props:{nav:{type:Array,default:function(){return[]}}},components:{subgroup:_subgroup_vue__WEBPACK_IMPORTED_MODULE_9__["a"]},data:function(){return{common:_config__WEBPACK_IMPORTED_MODULE_10__["a"]}},methods:{getFunction:function getFunction(fun){if(!this.$validatenull(fun))try{return eval(fun)}catch(_unused){return function(){}}},getJson:function(e){if(this.$validatenull(e))return{};if("string"==typeof e)try{return JSON.parse(e)}catch(t){return{}}return e},handleClick:function(e){var t=this,n=e.type,a=e.child,i=e.value;if("tabs"===n){if(!a.index)return;var _=[];"string"==typeof a.index&&(_=a.index.split(",")),_.forEach((function(e){var n=a.paramName,_=t.nav.find((function(t){return t.index==e}));if(_.url||2==_.dataType){var o={};o=_.dataQuery?t.getJson(_.dataQuery):{},o[n]=i,_.dataQuery=JSON.stringify(o),t.$refs[t.common.NAME+e].forEach((function(e){e.updateData(o)}))}}))}},handleRefresh:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs[this.common.NAME+this.contain.activeObj.index][0].updateData(),e&&this.$message.success("刷新成功")},handleGetObj:function(e){return this.$refs["".concat(this.common.DEAFNAME).concat(e)]},handleOver:function(e){var t=e.index;this.contain.overactive=t},handleFocus:function(e){var t=e.index;this.container.gradeFlag=!0,this.contain.keys.ctrl?(Array.isArray(this.contain.active)||this.contain.handleInitActive(),this.contain.active.includes(t)||this.contain.active.push(t)):this.contain.active.includes(t)||(this.contain.active=[t])},handleBlur:function(e){var t=e.left,n=e.top,a=e.width,i=e.height;Array.isArray(this.contain.activeObj)||(this.container.gradeFlag=!1,this.$set(this.contain.activeObj.component,"width",a),this.$set(this.contain.activeObj.component,"height",i),this.$set(this.contain.activeObj,"left",t),this.$set(this.contain.activeObj,"top",n))},handleContextMenu:function(e,t){this.contain&&this.contain.handleContextMenu&&this.contain.handleContextMenu(e,t)}}}},c7cf:function(e,t,n){"use strict";t["a"]={COMPNAME:"l-echart-",NAME:"list",DEAFNAME:"item"}},cad6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.nav,(function(t){return n("div",{key:t.index,on:{contextmenu:function(n){return n.preventDefault(),e.contain.handleContextMenu(n,t)}}},[t.children?e._e():n("avue-draggable",e._b({directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!item.display"}],ref:e.common.DEAFNAME+t.index,refInFor:!0,attrs:{scale:e.container.stepScale,disabled:!e.contain.menuFlag,step:e.container.stepScale,width:t.component.width,height:t.component.height,id:e.common.DEAFNAME+t.index,"active-flag":e.contain.active.includes(t.index)},on:{over:e.handleOver,focus:e.handleFocus,blur:e.handleBlur}},"avue-draggable",t,!1),[n(e.common.COMPNAME+t.component.name,e._b({ref:e.common.NAME+t.index,refInFor:!0,tag:"component",attrs:{id:e.common.NAME+t.index,"data-formatter":e.getFunction(t.dataFormatter),"click-formatter":e.getFunction(t.clickFormatter),"echart-formatter":e.getFunction(t.echartFormatter),"label-formatter":e.getFunction(t.labelFormatter),formatter:e.getFunction(t.formatter),width:t.component.width,"data-query":e.getJson(t.dataQuery),height:t.component.height,animation:!e.contain.menuFlag,theme:(t.option||{}).theme,disabled:!e.contain.menuFlag,scale:e.container.stepScale,option:t.option,"home-url":e.contain.config.url,title:"",click:e.handleClick}},"component",t,!1))],1),n("subgroup",{attrs:{nav:t.children}})],1)})),0)},i=[],_=n("da72"),o=_["a"],r=n("2877"),c=Object(r["a"])(o,a,i,!1,null,null,null);t["a"]=c.exports},da72:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__),_config__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c7cf");__webpack_exports__["a"]={name:"subgroup",inject:["contain","container"],provide:function(){return{contain:this.contain,container:this.container}},props:{nav:{type:Array,default:function(){return[]}}},data:function(){return{common:_config__WEBPACK_IMPORTED_MODULE_6__["a"]}},methods:{getFunction:function getFunction(fun){if(!this.validatenull(fun))try{return eval(fun)}catch(_unused){return function(){}}},getJson:function(e){if(this.validatenull(e))return{};if("string"==typeof e)try{return JSON.parse(e)}catch(t){return{}}return e},handleClick:function(e){var t=this,n=e.type,a=e.child,i=e.value;if("tabs"===n){var _=a.index;_.forEach((function(e){var n=a.paramName,_=t.contain.findlist(e);if(_.url){var o={};o=_.dataQuery?t.getJson(_.dataQuery):{},o[n]=i,_.dataQuery=JSON.stringify(o),t.$refs[t.common.NAME+e].forEach((function(e){e.updateData()}))}}))}},handleRefresh:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs[this.common.NAME+this.contain.activeObj.index][0].updateData(),e&&this.$message.success("刷新成功")},handleGetObj:function(e){return this.$refs["".concat(this.common.DEAFNAME).concat(e)]},handleOver:function(e){var t=e.index;this.contain.overactive=t},handleFocus:function(e){var t=e.index;this.container.gradeFlag=!0,this.contain.keys.ctrl?(Array.isArray(this.contain.active)||this.contain.handleInitActive(),this.contain.active.push(t)):this.contain.active.includes(t)||(this.contain.active=[t])},handleBlur:function(e){var t=e.left,n=e.top,a=e.width,i=e.height;Array.isArray(this.contain.activeObj)||(this.container.gradeFlag=!1,this.$set(this.contain.activeObj.component,"width",a),this.$set(this.contain.activeObj.component,"height",i),this.$set(this.contain.activeObj,"left",t),this.$set(this.contain.activeObj,"top",n))}}}},dd65:function(e,t,n){"use strict";n("d81d"),n("a434"),n("b0c0"),n("159b");var a=n("8b40"),i=n("8237"),_=n.n(i),o=window.$api.vdata.visual,r=window.$api.data.map;t["a"]={components:{},provide:function(){return{contain:this}},data:function(){return{id:"",obj:{},visual:{},config:a["a"],nav:[],active:[],overactive:"",scale:1,historyCache:[],currentHistoryIndex:-1,copyNav:"",DIC:{MAP:[]},dbOptions:[]}},watch:{nav:{handler:function(e,t){this.recordMain(e,t)},deep:!0}},computed:{list:function(){var e=[],t=function t(n){n.children?n.children.forEach((function(e){t(e)})):e.push(n)};this.nav.forEach((function(e){t(e)}));var n=e.length-1;return e.forEach((function(e,t){e.zIndex=n-t})),e},activeObj:function(){var e,t=this;return this.$validatenull(this.active)?{}:(this.active.forEach((function(n){var a=t.findnav(n,!0);t.active.length>1?(e||(e=[]),e.push(a.obj)):e=a.obj})),e)},canUndo:function(){return this.currentHistoryIndex>0},canRedo:function(){return this.historyCache.length>this.currentHistoryIndex+1}},created:function(){this.initMap()},mounted:function(){this.initData()},methods:{initData:function(){var e=this,t=this.$route?this.$route.query.id:this.props.id;this.id=t;var n=this.$route?"设计大屏"===this.$route.name:this.props.name,a=this.$loading({lock:!0,text:"正在加载中，请稍后",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});o.getObj(t).then((function(t){var i=t.data.data;e.obj=i;var o=i.lrDatavVisualconfigList[0];e.visual=i.lrDatavVisualEntity;var r=function(){e.config=JSON.parse(o.f_Detail)||{},e.nav=JSON.parse(o.f_Component)||[],e.calcData(),e.initScale()};if(n)r();else{var c=e.visual.f_Password;e.$validatenull(c)?r():e.$prompt("请输入密码","提示",{confirmButtonText:"确定",showCancelButton:!1,showClose:!1,closeOnClickModal:!1,inputValidator:function(e){return _()(e)==c||"密码不正确"},inputErrorMessage:"密码不正确，请重新输入"}).then((function(){r()}))}a.close()})).catch((function(){a.close()}))},calcData:function(){this.config.mark||(this.config.mark={}),this.config.query||(this.config.query={})},initMap:function(){var e=this,t=this.$route?"设计大屏"===this.$route.name:this.props.name;t&&r.getAllMap().then((function(t){var n=t.data.data;e.DIC.MAP=n.map((function(e){return{label:e.f_Name,value:e.f_Id}}))}))},findnav:function(e,t){var n=this,a=void 0,i=0,_=void 0,o=0,r=0,c=function n(c,s,l){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;c.children&&!t||e===c.index&&(a=c,r=Array.isArray(s)?s.length-1:s.children.length-1,_=s,o=u,i=l),c.children&&c.children.forEach((function(e,t){n(e,c,t,u+1)}))};return this.nav.forEach((function(e,t){c(e,n.nav,t)})),{obj:a,count:i,len:r,pcount:o,parent:_}},handleInitActive:function(){this.active=[]},recordMain:function(e){var t=JSON.stringify(e);t!=this.copyNav&&(this.copyNav=t,this.addHistoryCache(e))},addHistoryCache:function(e){this.currentHistoryIndex+1<this.historyCache.length&&this.historyCache.splice(this.currentHistoryIndex+1),this.historyCache.push({nav:this.$deepClone(e)}),this.historyCache.splice(100),this.currentHistoryIndex++},editorUndo:function(){this.canUndo&&(this.currentHistoryIndex--,this.relapceEditorState())},editorRedo:function(){this.canRedo&&(this.currentHistoryIndex++,this.relapceEditorState())},relapceEditorState:function(){var e=this.historyCache[this.currentHistoryIndex];this.nav=this.$deepClone(e.nav),this.copyNav=JSON.stringify(e.nav)}}}}}]);