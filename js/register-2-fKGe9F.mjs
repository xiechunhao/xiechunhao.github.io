var T=(p,r,n)=>new Promise((l,a)=>{var i=o=>{try{c(n.next(o))}catch(t){a(t)}},u=o=>{try{c(n.throw(o))}catch(t){a(t)}},c=o=>o.done?l(o.value):Promise.resolve(o.value).then(i,u);c((n=n.apply(p,r)).next())});import{c as _,u as x,$ as e,T as B,e as V,s as h,g as $}from"./bootstrap-DfVw4T_L.mjs";import{a3 as y,W as k,J as C,ae as S,al as N,n as g,ag as b,ad as w,ap as f,aw as m,a9 as s,b0 as A,ao as v,P as F,af as R,h as P}from"../jse/index-index-Bp6V3Ewt.mjs";const I={class:"mt-4 text-center text-sm"},L=y({name:"RegisterForm",__name:"register",props:{formSchema:{default:()=>[]},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(p,{emit:r}){const n=p,l=r,[a,{validate:i}]=_(k({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:C(()=>n.formSchema),showDefaultActions:!1})),u=x();function c(){return T(this,null,function*(){const{valid:t,values:d}=yield i();t&&l("submit",d)})}function o(){u.push(n.loginPath)}return(t,d)=>(S(),N("div",null,[g(B,null,{desc:b(()=>[w(t.$slots,"subTitle",{},()=>[f(m(t.subTitle||s(e)("authentication.signUpSubtitle")),1)])]),default:b(()=>[w(t.$slots,"title",{},()=>[f(m(t.title||s(e)("authentication.createAnAccount"))+" ðŸš€ ",1)])]),_:3}),g(s(a)),g(s(V),{class:A([{"cursor-wait":t.loading},"mt-2 w-full"]),loading:t.loading,"aria-label":"register",onClick:c},{default:b(()=>[w(t.$slots,"submitButtonText",{},()=>[f(m(t.submitButtonText||s(e)("authentication.signUp")),1)])]),_:3},8,["class","loading"]),v("div",I,[f(m(s(e)("authentication.alreadyHaveAccount"))+" ",1),v("span",{class:"text-primary hover:text-primary-hover cursor-pointer text-sm font-normal",onClick:d[0]||(d[0]=D=>o())},m(s(e)("authentication.goToLogin")),1)])]))}}),E=y({name:"Register",__name:"register",setup(p){const r=F(!1),n=C(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.usernameTip")},fieldName:"username",label:e("authentication.username"),rules:h().min(1,{message:e("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:e("authentication.password")},fieldName:"password",label:e("authentication.password"),renderComponentContent(){return{strengthText:()=>e("authentication.passwordStrength")}},rules:h().min(1,{message:e("authentication.passwordTip")})},{component:"VbenInputPassword",componentProps:{placeholder:e("authentication.confirmPassword")},dependencies:{rules(a){const{password:i}=a;return h().min(1,{message:e("authentication.passwordTip")}).refine(u=>u===i,{message:e("authentication.confirmPasswordTip")})},triggerFields:["password"]},fieldName:"confirmPassword",label:e("authentication.confirmPassword"),rules:h().min(1,{message:e("authentication.passwordTip")})},{component:"VbenCheckbox",fieldName:"agreePolicy",renderComponentContent:()=>({default:()=>P("span",[e("authentication.agree"),P("a",{class:"cursor-pointer text-primary ml-1 hover:text-primary-hover",href:""},[e("authentication.privacyPolicy"),"&",e("authentication.terms")])])}),rules:$().refine(a=>!!a,{message:e("authentication.agreeTip")})}]);function l(a){console.log("register submit:",a)}return(a,i)=>(S(),R(s(L),{"form-schema":n.value,loading:r.value,onSubmit:l},null,8,["form-schema","loading"]))}});export{E as default};
