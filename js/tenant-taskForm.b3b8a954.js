(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tenant-taskForm","tenant-imLogForm"],{"0b6e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.ready?a("div",{staticClass:"l-rblock"},[a("l-code-mirror",{attrs:{isScrollToBottom:"",readOnly:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},r=[],l=(a("99af"),a("ac1f"),a("5319"),{data:function(){return{value:"",ready:!1,eventId:null}},created:function(){},mounted:function(){this.eventId=this.lr_OnEvent("learun-im-system-ex-message",this.setText)},beforeDestroy:function(){null!=this.eventId&&this.lr_OffEvent("learun-im-system-ex-message",this.eventId)},methods:{init:function(){var e=this;setTimeout((function(){e.ready=!0}),100)},resetForm:function(){this.ready=!1},setText:function(e){var t=e.msg,a=e.dateTime,n=e.id;console.log(t),t=t.replace("【99】",this.$t("空任务")),t=t.replace("【1】",this.$t("同步表结构")),t=t.replace("【2】",this.$t("同步数据")),t=t.replace("【3】",this.$t("创建账号")),t=t.replace("【4】",this.$t("同步菜单")),t=t.replace("【20】",this.$t("批量更新")),t=t.replace("【21】",this.$t("批量删除")),this.value+="".concat(a,"-").concat(t,"-").concat(n,"\r\n")}}}),o=l,i=a("2877"),s=Object(i["a"])(o,n,r,!1,null,null,null);t["default"]=s.exports},"683f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.ready?a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{staticStyle:{padding:"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("l-query2",{attrs:{items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"f_Code",fn:function(){return[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.queryData.f_Code,callback:function(t){e.$set(e.queryData,"f_Code",t)},expression:"queryData.f_Code"}})]},proxy:!0},{key:"f_State",fn:function(){return[a("l-select",{attrs:{options:e.optionsState},model:{value:e.queryData.f_State,callback:function(t){e.$set(e.queryData,"f_State",t)},expression:"queryData.f_State"}})]},proxy:!0}],null,!1,746482934)})]},proxy:!0},{key:"toolRight",fn:function(){return[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh-left"},on:{click:e.handleSearch}})],1),a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:e.handleLogForm}},[e._v(e._s(e.$t("实时日志")))])],1)]},proxy:!0}],null,!1,817737277)},[a("div",{staticClass:"l-rblock"},[a("l-table",{attrs:{columns:e.columns,dataSource:e.tableData,loading:e.tableLoading,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage}})],1)]),a("l-dialog",{attrs:{title:e.$t("查看实时日志"),visible:e.formVisible,height:600,width:800},on:{"update:visible":function(t){e.formVisible=t},close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("im-log-form",{ref:"form"})],1)],1):e._e()},r=[],l=(a("96cf"),a("1da1")),o=a("0b6e"),i=window.$api.sass.tenantTask,s={components:{ImLogForm:o["default"]},data:function(){return{tableLoading:!1,tableData:[],tableTotal:0,tablePageSize:50,tableCurrentPage:1,columns:[{label:"租户",prop:"f_Code",width:120,align:"left",formatter:function(e){var t=e.cellValue,a=e.row;return t||a.f_TenantId}},{label:"任务类型",prop:"f_TaskType",width:120,align:"left",formatter:function(e){var t=e.cellValue;switch(t){case 99:return"空任务";case 1:return"同步表结构";case 2:return"同步数据";case 3:return"创建账号";case 4:return"同步菜单";case 20:return"批量更新";case 21:return"批量删除"}}},{label:"时间",prop:"f_Time",width:160,align:"left",dataType:"datetime"},{label:"状态",prop:"f_State",width:120,align:"left",formatter:function(e){var t=e.cellValue;switch(t){case 0:return"等待";case 2:return"异常";case 1:return"正在执行"}}},{label:"创建人",prop:"f_UserName",minWidth:120,align:"left"}],queryData:{f_Code:"",f_State:null},queryItems:[{label:this.$t("租户"),prop:"f_Code"},{label:this.$t("状态"),prop:"f_State"}],optionsState:[{value:0,label:this.$t("等待")},{value:1,label:this.$t("执行")},{value:2,label:this.$t("异常")}],ready:!1,formVisible:!1}},created:function(){},mounted:function(){},methods:{init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.ready=!1,e.tableLoading=!0,t.next=4,e.loadTableData();case 4:e.ready=!0;case 5:case"end":return t.stop()}}),t)})))()},loadTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(t.tableCurrentPage=1),t.tableLoading=!0,n=t.$deepClone(t.queryData),n.rows=t.tablePageSize,n.page=t.tableCurrentPage,n.sidx="f_Time,F_TaskType",a.next=8,t.$awaitWraper(i.getPage(n));case 8:r=a.sent,t.tableData=r.rows,t.tableTotal=r.records,t.tableLoading=!1;case 12:case"end":return a.stop()}}),a)})))()},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},handleSearch:function(){this.loadTableData()},resetForm:function(){this.tableCurrentPage=1,this.columns=[],this.tableData=[],this.tableTotal=0},handleLogForm:function(){this.formVisible=!0},handleOpenedForm:function(){this.$refs.form.init()},handleCloseForm:function(){this.$refs.form.resetForm()}}},u=s,c=a("2877"),f=Object(c["a"])(u,n,r,!1,null,null,null);t["default"]=f.exports}}]);