(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["delegate"],{c572:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入被委托人"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.hanleSearch.apply(null,arguments)}},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{on:{click:function(t){return e.handleAdd()}}},[a("l-excel-btns")],1)]},proxy:!0}],null,!1,1418986273)},[a("l-table",{attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,"row-key":"f_Id",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_BeginDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_BeginDate,"yyyy-MM-dd"))+" ")]}},{key:"f_EndDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_EndDate,"yyyy-MM-dd"))+" ")]}},{key:"f_CreateDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_CreateDate,"yyyy-MM-dd hh:mm"))+" ")]}},{key:"f_Type",fn:function(t){return[1==t.row.f_Type?a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v(e._s(e.$t("发起")))]):a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("审核")))])]}},{key:"f_EnabledMark",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleEnableChange(t.row)}},model:{value:t.row.f_EnabledMark,callback:function(a){e.$set(t.row,"f_EnabledMark",a)},expression:"scope.row.f_EnabledMark"}})]}}],null,!1,25421203)},[a("l-table-btns",{attrs:{btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{title:e.$t(e.formTitle),visible:e.formVisible,height:480,width:880},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form"})],1)],1)},r=[],o=(a("a434"),a("96cf"),a("1da1")),l=a("2784"),i=window.$api.workflow.delegate,s={components:{MyForm:l["default"]},data:function(){return{lr_isPage:!0,classifysVisible:!1,treeLoading:!0,treeCategory:"",searchWord:"",columns:[{label:"被委托人",prop:"f_ToUserName",width:"100"},{label:"开始时间",prop:"f_BeginDate",width:"100"},{label:"结束时间",prop:"f_EndDate",width:"100"},{label:"类型",prop:"f_Type",width:"64",align:"center"},{label:"状态",prop:"f_EnabledMark",width:"64",align:"center"},{label:"创建人",prop:"f_CreateUserName",width:"100"},{label:"创建时间",prop:"f_CreateDate",width:"140"},{label:"委托说明",prop:"f_Description",minWidth:"100"}],tableBtns:[{prop:"Edit",label:"编辑",width:40},{prop:"Delete",label:"删除",width:40}],tableLoading:!1,tableTotal:0,tablePageSize:50,tableCurrentPage:1,tableData:[],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1}},computed:{},mounted:function(){this.loadTablePage()},methods:{loadTablePage:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:this.searchWord};i.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTablePage(!0)},hanleSearch:function(){this.loadTablePage()},handleNodeClick:function(e){this.treeCategory=e.id,this.tableCurrentPage=1,this.loadTablePage()},handleSettingClick:function(){this.classifysVisible=!0},handleCloseClassifys:function(){var e=this;this.treeLoading=!0,this.$nextTick((function(){e.treeLoading=!1}))},handleAdd:function(){this.formEdit=!1,this.handleShowForm("新增委托")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,this.handleShowForm("编辑委托")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.tableData.splice(e,1),a.tableTotal--,n.next=4,i.remove(t.f_Id);case 4:a.$message({type:"success",message:a.$t("删除成功!")});case 5:case"end":return n.stop()}}),n)})))).catch((function(){a.$message({type:"info",message:a.$t("已取消删除!")})}))},handleEnableChange:function(e){var t=this;i.updateState(e.f_Id,e.f_EnabledMark).then((function(){t.$message({type:"success",message:t.$t("更新成功!")})}))},handleSave:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.form.validateForm();case 2:if(!n.sent){n.next=19;break}return e(),n.next=6,a.$refs.form.getForm();case 6:if(r=n.sent,o="",!a.formEdit){n.next=14;break}return n.next=11,a.$awaitWraper(i.update(a.formEditRow.f_Id,r));case 11:o=n.sent,n.next=17;break;case 14:return n.next=16,a.$awaitWraper(i.add(r));case 16:o=n.sent;case 17:o&&(a.$message({type:"success",message:a.$t("保存成功!")}),a.loadTablePage(),a.formVisible=!1),t();case 19:case"end":return n.stop()}}),n)})))()},handleShowForm:function(e){this.formTitle=e,this.formVisible=!0},handleOpenedForm:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a.formEdit){n.next=9;break}return e("加载数据中..."),n.next=4,a.$awaitWraper(i.get(a.formEditRow.f_Id));case 4:r=n.sent,r&&a.$refs.form.setForm(r),t(),n.next=10;break;case 9:a.$refs.form.openedForm();case 10:case"end":return n.stop()}}),n)})))()},handleCloseForm:function(){this.$refs.form.resetForm()}}},c=s,d=a("2877"),u=Object(d["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports}}]);