(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views-data-index"],{"6a23":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入名称/编号"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{btnText:e.$t("通用数据权限")},on:{click:function(t){return e.handleAdd()}}},[e.lr_hasPageAuth("addDataSource","buttons")?a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDAdd()}}},[e._v(e._s(e.$t("数据源数据权限")))])],1):e._e(),e.lr_hasPageAuth("addForm","buttons")?a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCAdd()}}},[e._v(e._s(e.$t("自定义功能数据权限")))])],1):e._e(),a("l-excel-btns")],1)]},proxy:!0}])},[a("l-table",{attrs:{columns:e.columns,dataSource:e.tableData,loading:e.tableLoading,"row-key":"f_Id",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_Code",fn:function(t){return[e._v(" "+e._s(1==t.row.f_Type?t.row.f_Code:(e.myModules.find((function(e){return e.value==t.row.f_Code}))||{}).label||"")+" "+e._s(3==t.row.f_Type&&(e.datasource.find((function(e){return e.value==t.row.f_Code}))||{}).label||"")+" ")]}},{key:"f_ObjectType",fn:function(t){return[1==t.row.f_ObjectType?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("角色")))]):a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.$t("人员")))])]}},{key:"f_Type",fn:function(t){return[1==t.row.f_Type?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("开发功能")))]):3==t.row.f_Type?a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v(e._s(e.$t("数据源")))]):a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.$t("自定义功能")))])]}},{key:"f_CreateDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_CreateDate))+" ")]}}])},[a("l-table-btns",{attrs:{btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-drawer",{attrs:{title:e.formTitle,visible:e.formVisible,width:800},on:{"update:visible":function(t){e.formVisible=t},close:e.handleCloseForm,opened:e.handleOpenedForm,ok:e.handleSave}},[a("my-form",{ref:"form"})],1),a("l-drawer",{attrs:{title:e.cformTitle,visible:e.cformVisible,width:800},on:{"update:visible":function(t){e.cformVisible=t},close:e.handleCloseCForm,opened:e.handleOpenedCForm,ok:e.handleSave}},[a("c-form",{ref:"cform"})],1),a("l-drawer",{attrs:{title:e.dformTitle,visible:e.dformVisible,width:800},on:{"update:visible":function(t){e.dformVisible=t},close:e.handleCloseDForm,opened:e.handleOpenedDForm,ok:e.handleSave}},[a("d-form",{ref:"dform"})],1)],1)},i=[],r=(a("4de4"),a("d81d"),a("2909")),s=a("5530"),n=(a("96cf"),a("1da1")),o=a("5880"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,size:"mini",rules:e.rules,"label-width":"88px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("编码"),prop:"f_Code"}},[a("el-input",{model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_Name"}},[a("el-input",{model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("对象类型"),prop:"f_ObjectType"}},[a("l-radio",{attrs:{options:[{value:1,label:"角色"},{value:2,label:"用户"}]},model:{value:e.formData.f_ObjectType,callback:function(t){e.$set(e.formData,"f_ObjectType",t)},expression:"formData.f_ObjectType"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("授权对象"),prop:"f_ObjectId"}},[1==e.formData.f_ObjectType?a("l-select",{attrs:{options:e.lr_roleOptions(e.lr_roles)},model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}}):a("l-user-select",{model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}})],1)],1),a("el-col",{staticStyle:{"padding-left":"34px"},attrs:{span:24}},[a("draggable",{attrs:{list:e.conditions,group:{name:"dic"},"ghost-class":"set-item-ghost",handle:".l-drag-item"}},e._l(e.conditions,(function(t,l){return a("div",{key:l,staticClass:"l-set-item l-set-item__Num"},[a("i",{staticClass:"l-drag-item el-icon-rank"}),a("el-tag",{attrs:{type:"info",size:"medium",effect:"plain"}},[e._v(e._s(l+1))]),a("el-input",{staticStyle:{width:"26%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("字段")},model:{value:t.f_FieldId,callback:function(a){e.$set(t,"f_FieldId",a)},expression:"item.f_FieldId"}}),a("l-select",{staticStyle:{width:"19%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("比较符"),options:e.symbolOptions,clearable:!1},model:{value:t.f_Symbol,callback:function(a){e.$set(t,"f_Symbol",a)},expression:"item.f_Symbol"}}),a("l-select",{staticStyle:{width:"26%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("字段值类型"),options:e.vTypeOptions,clearable:!1},on:{change:function(a){return e.handleChangeVType(t)}},model:{value:t.f_FiledValueType,callback:function(a){e.$set(t,"f_FiledValueType",a)},expression:"item.f_FiledValueType"}}),a("el-input",{staticStyle:{width:"26%"},attrs:{readonly:1!=t.f_FiledValueType&&10!=t.f_FiledValueType,size:"mini",placeholder:e.$t("字段值")},model:{value:t.f_FiledValue,callback:function(a){e.$set(t,"f_FiledValue",a)},expression:"item.f_FiledValue"}}),a("el-button",{staticClass:"l-delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.handleRemoveConditions(l)}}})],1)})),0),a("div",{staticStyle:{"padding-left":"22px"}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddConditions}},[e._v(e._s(e.$t("添加过滤条件")))])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公式",prop:"f_Formula"}},[a("el-input",{attrs:{placeholder:e.$t("请输入公式,默认为 1 and 2 and 3 这种且方式")},model:{value:e.formData.f_Formula,callback:function(t){e.$set(e.formData,"f_Formula",t)},expression:"formData.f_Formula"}},[a("el-popover",{attrs:{slot:"append",placement:"bottom",width:"240",trigger:"hover"},slot:"append"},[a("div",{staticClass:"info-message"},[a("p",[e._v(e._s(e.$t("请按如下规则编辑条件组合")))]),a("p",{staticClass:"ok"},[e._v("(1 and 2) or (3 and 4) "),a("i",{staticClass:"fa fa-check"})]),a("p",[e._v(e._s(e.$t("1.有and和or必须加括号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 or 3 and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("2.一个括号里不能同时出现and和or")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 or 3 )and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("3.不允许出现不存在的编号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 and 3 and 4 and 5 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("4.括号都是成对出现的")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 and 3 and 4 "),a("i",{staticClass:"fa fa-close"})])]),a("el-button",{attrs:{slot:"reference",icon:"el-icon-question"},slot:"reference"})],1)],1)],1)],1)],1)],1)},d=[],f=(a("7db0"),a("a434"),{data:function(){return{formData:{f_Code:"",f_Name:"",f_Formula:"",f_Type:1,f_ObjectType:1,f_ObjectId:""},rules:{f_Code:[{required:!0,message:this.$t("请输入编码")}],f_Name:[{required:!0,message:this.$t("请输入名称")}],f_ObjectId:[{required:!0,message:this.$t("请选择授权对象")}]},symbolOptions:[{value:1,label:this.$t("等于")},{value:2,label:this.$t("大于")},{value:3,label:this.$t("大于等于")},{value:4,label:this.$t("小于")},{value:5,label:this.$t("小于等于")},{value:6,label:this.$t("包含")},{value:7,label:this.$t("包含于")},{value:8,label:this.$t("不等于")},{value:9,label:this.$t("不包含")},{value:10,label:this.$t("不包含于")}],vTypeOptions:[{value:1,label:this.$t("文本(String)")},{value:10,label:this.$t("文本(Int)")},{value:2,label:this.$t("登录者ID")},{value:3,label:this.$t("登录者账号")},{value:4,label:this.$t("登录者公司")},{value:41,label:this.$t("登录者公司及下属公司")},{value:5,label:this.$t("登录者部门")},{value:51,label:this.$t("登录者部门及下属部门")},{value:6,label:this.$t("登录者岗位")},{value:7,label:this.$t("登录者角色")}],conditions:[]}},created:function(){this.lr_loadRoles()},computed:{},methods:{resetForm:function(){this.formData.f_Id="",this.conditions=[],this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,l,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:a=t.sent,l=0,i=e.conditions.length;case 4:if(!(l<i)){t.next=25;break}if(r=e.conditions[l],!e.$validatenull(r.f_FieldId)){t.next=10;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段!")}),a=!1,t.abrupt("break",25);case 10:if(!e.$validatenull(r.f_Symbol)){t.next=14;break}return e.$message({type:"error",message:e.$t("请选择过滤条件比较符!")}),a=!1,t.abrupt("break",25);case 14:if(!e.$validatenull(r.f_FiledValueType)){t.next=18;break}return e.$message({type:"error",message:e.$t("请选择过滤条件字段值类型!")}),a=!1,t.abrupt("break",25);case 18:if(!e.$validatenull(r.f_FiledValue)){t.next=22;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段值!")}),a=!1,t.abrupt("break",25);case 22:l++,t.next=4;break;case 25:return t.abrupt("return",a);case 26:case"end":return t.stop()}}),t)})))()},setForm:function(e){var t=e,a=JSON.parse(t.f_Formula);t.f_Formula=a.formula,this.conditions=a.conditions,this.formData=t},getForm:function(){var e=this.$deepClone(this.formData),t={formula:e.f_Formula,conditions:this.conditions};return e.f_Formula=JSON.stringify(t),e},handleAddConditions:function(){this.conditions.push({f_FieldId:"",f_Symbol:1,f_FiledValueType:1,f_FiledValue:""})},handleRemoveConditions:function(e){this.conditions.splice(e,1)},handleChangeVType:function(e){1==e.f_FiledValueType||10==e.f_FiledValueType?e.f_FiledValue="":e.f_FiledValue=this.vTypeOptions.find((function(t){return t.value==e.f_FiledValueType})).label}}}),u=f,m=a("2877"),p=Object(m["a"])(u,c,d,!1,null,null,null),h=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,size:"mini",rules:e.rules,"label-width":"88px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("功能"),prop:"f_Code"}},[a("l-tree-select",{attrs:{options:e.myModules},on:{change:e.handleModuleChange},model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_Name"}},[a("el-input",{model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("对象类型"),prop:"f_ObjectType"}},[a("l-radio",{attrs:{options:[{value:1,label:"角色"},{value:2,label:"用户"}]},model:{value:e.formData.f_ObjectType,callback:function(t){e.$set(e.formData,"f_ObjectType",t)},expression:"formData.f_ObjectType"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("授权对象"),prop:"f_ObjectId"}},[1==e.formData.f_ObjectType?a("l-select",{attrs:{options:e.lr_roleOptions(e.lr_roles)},model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}}):a("l-user-select",{model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}})],1)],1),a("el-col",{staticStyle:{"padding-left":"34px"},attrs:{span:24}},[a("draggable",{attrs:{list:e.conditions,group:{name:"dic"},"ghost-class":"set-item-ghost",handle:".l-drag-item"}},e._l(e.conditions,(function(t,l){return a("div",{key:l,staticClass:"l-set-item l-set-item__Num"},[a("i",{staticClass:"l-drag-item el-icon-rank"}),a("el-tag",{attrs:{type:"info",size:"medium",effect:"plain"}},[e._v(e._s(l+1))]),a("l-select",{staticStyle:{width:"26%","margin-right":"1%"},attrs:{size:"mini",options:e.columns,placeholder:"字段",clearable:!1},on:{change:e.handleChangeField},model:{value:t.f_FieldId,callback:function(a){e.$set(t,"f_FieldId",a)},expression:"item.f_FieldId"}}),a("l-select",{staticStyle:{width:"14%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("比较符"),options:e.symbolOptions,clearable:!1},model:{value:t.f_Symbol,callback:function(a){e.$set(t,"f_Symbol",a)},expression:"item.f_Symbol"}}),a("l-select",{staticStyle:{width:"21%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("字段值类型"),options:e.vTypeOptions,clearable:!1},on:{change:function(a){return e.handleChangeVType(t)}},model:{value:t.f_FiledValueType,callback:function(a){e.$set(t,"f_FiledValueType",a)},expression:"item.f_FiledValueType"}}),a("el-input",{staticStyle:{width:"25%","margin-right":"1%"},attrs:{readonly:1!=t.f_FiledValueType&&10!=t.f_FiledValueType,size:"mini",placeholder:e.$t("字段值")},model:{value:t.f_FiledValue,callback:function(a){e.$set(t,"f_FiledValue",a)},expression:"item.f_FiledValue"}}),a("l-select",{staticStyle:{width:"10%"},attrs:{size:"mini",placeholder:e.$t("分组"),options:e.groupOptions,clearable:!1},on:{change:function(a){return e.handleChangeGroup(t)}},model:{value:t.group,callback:function(a){e.$set(t,"group",a)},expression:"item.group"}}),a("el-button",{staticClass:"l-delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.handleRemoveConditions(l)}}})],1)})),0),a("div",{staticStyle:{"padding-left":"22px"}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddConditions}},[e._v("添加过滤条件")])],1)],1),a("el-col",{staticStyle:{"padding-left":"34px"},attrs:{span:24}},[a("draggable",{attrs:{list:e.formulas,group:{name:"dic"},"ghost-class":"set-item-ghost",handle:".l-drag-item"}},e._l(e.formulas,(function(t,l){return a("div",{key:l,staticClass:"l-set-item l-set-item__Num"},[a("i",{staticClass:"l-drag-item el-icon-rank"}),a("el-tag",{attrs:{type:"info",size:"medium",effect:"plain"}},[e._v(e._s(e.numIndex[l]))]),a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:e.$t("请输入分组公式")},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[a("el-popover",{attrs:{slot:"append",placement:"bottom",width:"240",trigger:"hover"},slot:"append"},[a("div",{staticClass:"l-info-message"},[a("p",[e._v(e._s(e.$t("请按如下规则编辑条件组合")))]),a("p",{staticClass:"ok"},[e._v("(1 and 2) or (3 and 4) "),a("i",{staticClass:"fa fa-check"})]),a("p",[e._v(e._s(e.$t("1.有and和or必须加括号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 or 3 and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("2.一个括号里不能同时出现and和or")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 or 3 )and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("3.不允许出现不存在的编号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 and 3 and 4 and 5 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("4.括号都是成对出现的")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 and 3 and 4 "),a("i",{staticClass:"fa fa-close"})])]),a("el-button",{attrs:{slot:"reference",icon:"el-icon-question"},slot:"reference"})],1)],1),a("el-button",{staticClass:"l-delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.handleRemoveFormulas(l)}}})],1)})),0),a("div",{staticStyle:{"padding-left":"22px"}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddFormulas}},[e._v(e._s(e.$t("添加分组公式")))])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公式",prop:"f_Formula"}},[a("el-input",{attrs:{placeholder:e.$t("请输入公式,默认为 1 and 2 and 3 and A and B 这种且方式")},model:{value:e.formData.f_Formula,callback:function(t){e.$set(e.formData,"f_Formula",t)},expression:"formData.f_Formula"}},[a("el-popover",{attrs:{slot:"append",placement:"bottom",width:"240",trigger:"hover"},slot:"append"},[a("div",{staticClass:"l-info-message"},[a("p",[e._v(e._s(e.$t("请按如下规则编辑条件组合")))]),a("p",{staticClass:"ok"},[e._v("(1 and 2) or (3 and 4) "),a("i",{staticClass:"fa fa-check"})]),a("p",[e._v(e._s(e.$t("1.有and和or必须加括号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 or 3 and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("2.一个括号里不能同时出现and和or")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 or 3 )and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("3.不允许出现不存在的编号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 and 3 and 4 and 5 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("4.括号都是成对出现的")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 and 3 and 4 "),a("i",{staticClass:"fa fa-close"})])]),a("el-button",{attrs:{slot:"reference",icon:"el-icon-question"},slot:"reference"})],1)],1)],1)],1)],1)],1)},_=[],v=(a("99af"),a("c740"),a("caad"),a("b0c0"),a("159b"),window.$api.custmerForm.module),$=window.$api.custmerForm.scheme,g=window.$api.mapp.module,y={data:function(){return{formData:{f_Code:"",f_Name:"",f_Formula:"",f_Type:2,f_ObjectType:1,f_ObjectId:""},rules:{f_Code:[{required:!0,message:this.$t("请选择功能")}],f_Name:[{required:!0,message:this.$t("请输入名称")}],f_ObjectId:[{required:!0,message:this.$t("请选择授权对象")}]},symbolOptions:[{value:1,label:this.$t("等于")},{value:2,label:this.$t("大于")},{value:3,label:this.$t("大于等于")},{value:4,label:this.$t("小于")},{value:5,label:this.$t("小于等于")},{value:6,label:this.$t("包含")},{value:7,label:this.$t("包含于")},{value:8,label:this.$t("不等于")},{value:9,label:this.$t("不包含")},{value:10,label:this.$t("不包含于")}],vTypeOptions:[{value:1,label:this.$t("文本(String)")},{value:10,label:this.$t("文本(Int)")},{value:2,label:this.$t("登录者ID")},{value:3,label:this.$t("登录者账号")},{value:4,label:this.$t("登录者公司")},{value:41,label:this.$t("登录者公司及下属公司")},{value:5,label:this.$t("登录者部门")},{value:51,label:this.$t("登录者部门及下属部门")},{value:6,label:this.$t("登录者岗位")},{value:7,label:this.$t("登录者角色")}],conditions:[],formulas:[],numIndex:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],appList:[]}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.lr_loadRoles(),t.next=3,e.$awaitWraper(g.getList());case 3:a=t.sent,a&&(e.appList=a.filter((function(e){return 2==e.f_IsSystem})));case 5:case"end":return t.stop()}}),t)})))()},asyncComputed:{columns:{get:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,l,i,n,o,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.formData.f_Code){t.next=19;break}if(a=e.modules.find((function(t){return t.f_ModuleId==e.formData.f_Code})),!a){t.next=9;break}return t.next=5,e.$awaitWraper(v.getScheme(a.f_UrlAddress));case 5:l=t.sent,i=JSON.parse(l.formScheme.f_Scheme),t.next=14;break;case 9:return n=e.appList.find((function(t){return t.f_Id==e.formData.f_Code})),t.next=12,e.$awaitWraper($.getHistory(n.f_FormVerison));case 12:l=t.sent,i=JSON.parse(l.f_Scheme);case 14:return o=[],i&&(i.formInfo.tabList.forEach((function(e){var t;(t=o).push.apply(t,Object(r["a"])(e.components.filter((function(e){return!["gridtable","divider","password"].includes(e.type)}))))})),1==i.formType?(o=o.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:"".concat(e.field)})})),c=i.rdb||[],c.forEach((function(e){o.push({type:"glbd",value:"".concat(e.id,"_").concat(e.cfield),label:e.fname,table:e.name,cfield:e.cfield,field:e.field,relationField:"".concat(e.relationField)})}))):(o=o.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:"".concat(e.field).concat(i.db.findIndex((function(t){return t.name==e.table})))})})),d=i.rdb||[],d.forEach((function(e){o.push({type:"glbd",value:"".concat(e.id,"_").concat(e.cfield),label:e.fname,table:e.name,cfield:e.cfield,field:e.field,relationField:"".concat(e.relationField).concat(i.db.findIndex((function(t){return t.name==e.relationName})))})})))),t.abrupt("return",o);case 19:return t.abrupt("return",[]);case 20:case"end":return t.stop()}}),t)})))()}}},computed:Object(s["a"])(Object(s["a"])({},Object(o["mapGetters"])(["modules"])),{},{myModules:function(){var e=[],t=this.modules.filter((function(e){return 1==e.f_EnabledMark&&"custmerForm"==e.f_Target}));return t.length>0&&e.push({label:this.$t("pc端功能"),value:"1",disabled:!0,children:t.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:e.f_ModuleId,label:e.f_FullName})}))}),this.appList&&this.appList.length>0&&e.push({label:this.$t("移动端功能"),value:"2",disabled:!0,children:this.appList.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:e.f_Id,label:e.f_Name})}))}),e},groupOptions:function(){var e=this,t=[];return this.formulas.forEach((function(a,l){t.push({value:e.numIndex[l],label:e.numIndex[l]})})),t}}),methods:{resetForm:function(){this.formData.f_Id="",this.conditions=[],this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,l,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:a=t.sent,l=0,i=e.conditions.length;case 4:if(!(l<i)){t.next=25;break}if(r=e.conditions[l],!e.$validatenull(r.f_FieldId)){t.next=10;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段!")}),a=!1,t.abrupt("break",25);case 10:if(!e.$validatenull(r.f_Symbol)){t.next=14;break}return e.$message({type:"error",message:e.$t("请选择过滤条件比较符!")}),a=!1,t.abrupt("break",25);case 14:if(!e.$validatenull(r.f_FiledValueType)){t.next=18;break}return e.$message({type:"error",message:e.$t("请选择过滤条件字段值类型!")}),a=!1,t.abrupt("break",25);case 18:if(!e.$validatenull(r.f_FiledValue)){t.next=22;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段值!")}),a=!1,t.abrupt("break",25);case 22:l++,t.next=4;break;case 25:return t.abrupt("return",a);case 26:case"end":return t.stop()}}),t)})))()},setForm:function(e){var t=e,a=JSON.parse(t.f_Formula);t.f_Formula=a.formula,this.conditions=a.conditions||[],this.formulas=a.formulas||[],this.formData=t},getForm:function(){var e=this.$deepClone(this.formData),t={formula:e.f_Formula,conditions:this.$deepClone(this.conditions),formulas:this.$deepClone(this.formulas)};return e.f_Formula=JSON.stringify(t),e},handleAddConditions:function(){this.conditions.push({f_FieldId:"",f_Symbol:1,f_FiledValueType:1,f_FiledValue:"",group:""})},handleRemoveConditions:function(e){this.conditions.splice(e,1)},handleChangeVType:function(e){1==e.f_FiledValueType||10==e.f_FiledValueType?e.f_FiledValue="":e.f_FiledValue=this.vTypeOptions.find((function(t){return t.value==e.f_FiledValueType})).label},handleModuleChange:function(){this.conditions=[],this.formulas=[]},handleChangeField:function(e){if(e){var t=this.conditions.find((function(t){return t.f_FieldId==e.value}));"glbd"==e.type?(t.type="glbd",t.table=e.table,t.cfield=e.cfield,t.field=e.field,t.relationField=e.relationField):(t.type="",t.table="",t.cfield="",t.field="",t.relationField="")}},handleAddFormulas:function(){this.formulas.push({value:""})},handleRemoveFormulas:function(e){this.formulas.splice(e,1)},handleChangeGroup:function(e){if("glbd"!=e.type)this.$message({type:"error",message:this.$t("需要表单关联字段!")}),e.group="";else{var t=this.conditions.filter((function(t){return t.group==e.group&&e.f_FieldId!=t.f_FieldId})),a=t.filter((function(t){return t.field==e.field&&t.relationField==e.relationField&&t.table==e.table}));t.length>0&&0==a.length&&(this.$message({type:"error",message:this.$t("需要关联同表同字段!")}),e.group="")}}}},F=y,C=Object(m["a"])(F,b,_,!1,null,null,null),k=C.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,size:"mini",rules:e.rules,"label-width":"88px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("数据源"),prop:"f_Code"}},[a("l-select",{attrs:{placeholder:"请选择数据源",size:"mini",options:e.lr_dataSource,labelKey:"f_Name",valueKey:"f_Id",filterable:""},model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_Name"}},[a("el-input",{model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("对象类型"),prop:"f_ObjectType"}},[a("l-radio",{attrs:{options:[{value:1,label:"角色"},{value:2,label:"用户"}]},model:{value:e.formData.f_ObjectType,callback:function(t){e.$set(e.formData,"f_ObjectType",t)},expression:"formData.f_ObjectType"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("授权对象"),prop:"f_ObjectId"}},[1==e.formData.f_ObjectType?a("l-select",{attrs:{options:e.lr_roleOptions(e.lr_roles)},model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}}):a("l-user-select",{model:{value:e.formData.f_ObjectId,callback:function(t){e.$set(e.formData,"f_ObjectId",t)},expression:"formData.f_ObjectId"}})],1)],1),a("el-col",{staticStyle:{"padding-left":"34px"},attrs:{span:24}},[a("draggable",{attrs:{list:e.conditions,group:{name:"dic"},"ghost-class":"set-item-ghost",handle:".l-drag-item"}},e._l(e.conditions,(function(t,l){return a("div",{key:l,staticClass:"l-set-item l-set-item__Num"},[a("i",{staticClass:"l-drag-item el-icon-rank"}),a("el-tag",{attrs:{type:"info",size:"medium",effect:"plain"}},[e._v(e._s(l+1))]),a("el-input",{staticStyle:{width:"26%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("字段")},model:{value:t.f_FieldId,callback:function(a){e.$set(t,"f_FieldId",a)},expression:"item.f_FieldId"}}),a("l-select",{staticStyle:{width:"19%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("比较符"),options:e.symbolOptions,clearable:!1},model:{value:t.f_Symbol,callback:function(a){e.$set(t,"f_Symbol",a)},expression:"item.f_Symbol"}}),a("l-select",{staticStyle:{width:"26%","margin-right":"1%"},attrs:{size:"mini",placeholder:e.$t("字段值类型"),options:e.vTypeOptions,clearable:!1},on:{change:function(a){return e.handleChangeVType(t)}},model:{value:t.f_FiledValueType,callback:function(a){e.$set(t,"f_FiledValueType",a)},expression:"item.f_FiledValueType"}}),a("el-input",{staticStyle:{width:"26%"},attrs:{readonly:1!=t.f_FiledValueType&&10!=t.f_FiledValueType,size:"mini",placeholder:e.$t("字段值")},model:{value:t.f_FiledValue,callback:function(a){e.$set(t,"f_FiledValue",a)},expression:"item.f_FiledValue"}}),a("el-button",{staticClass:"l-delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.handleRemoveConditions(l)}}})],1)})),0),a("div",{staticStyle:{"padding-left":"22px"}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddConditions}},[e._v(e._s(e.$t("添加过滤条件")))])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("公式"),prop:"f_Formula"}},[a("el-input",{attrs:{placeholder:e.$t("请输入公式,默认为 1 and 2 and 3 and A and B 这种且方式")},model:{value:e.formData.f_Formula,callback:function(t){e.$set(e.formData,"f_Formula",t)},expression:"formData.f_Formula"}},[a("el-popover",{attrs:{slot:"append",placement:"bottom",width:"240",trigger:"hover"},slot:"append"},[a("div",{staticClass:"l-info-message"},[a("p",[e._v(e._s(e.$t("请按如下规则编辑条件组合")))]),a("p",{staticClass:"ok"},[e._v("(1 and 2) or (3 and 4) "),a("i",{staticClass:"fa fa-check"})]),a("p",[e._v(e._s(e.$t("1.有and和or必须加括号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 or 3 and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("2.一个括号里不能同时出现and和or")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 or 3 )and 4 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("3.不允许出现不存在的编号")))]),a("p",{staticClass:"error"},[e._v("1 and 2 and 3 and 4 and 5 "),a("i",{staticClass:"fa fa-close"})]),a("p",[e._v(e._s(e.$t("4.括号都是成对出现的")))]),a("p",{staticClass:"error"},[e._v("(1 and 2 and 3 and 4 "),a("i",{staticClass:"fa fa-close"})])]),a("el-button",{attrs:{slot:"reference",icon:"el-icon-question"},slot:"reference"})],1)],1)],1)],1)],1)],1)},O=[],w={data:function(){return{formData:{f_Code:"",f_Name:"",f_Formula:"",f_Type:3,f_ObjectType:1,f_ObjectId:""},rules:{f_Code:[{required:!0,message:this.$t("请选择数据源")}],f_Name:[{required:!0,message:this.$t("请输入名称")}],f_ObjectId:[{required:!0,message:this.$t("请选择授权对象")}]},symbolOptions:[{value:1,label:this.$t("等于")},{value:2,label:this.$t("大于")},{value:3,label:this.$t("大于等于")},{value:4,label:this.$t("小于")},{value:5,label:this.$t("小于等于")},{value:6,label:this.$t("包含")},{value:7,label:this.$t("包含于")},{value:8,label:this.$t("不等于")},{value:9,label:this.$t("不包含")},{value:10,label:this.$t("不包含于")}],vTypeOptions:[{value:1,label:this.$t("文本(String)")},{value:10,label:this.$t("文本(Int)")},{value:2,label:this.$t("登录者ID")},{value:3,label:this.$t("登录者账号")},{value:4,label:this.$t("登录者公司")},{value:41,label:this.$t("登录者公司及下属公司")},{value:5,label:this.$t("登录者部门")},{value:51,label:this.$t("登录者部门及下属部门")},{value:6,label:this.$t("登录者岗位")},{value:7,label:this.$t("登录者角色")}],conditions:[],formulas:[],numIndex:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],appList:[]}},created:function(){this.lr_loadRoles(),this.lr_loadDataSourceList&&this.lr_loadDataSourceList()},computed:{groupOptions:function(){var e=this,t=[];return this.formulas.forEach((function(a,l){t.push({value:e.numIndex[l],label:e.numIndex[l]})})),t}},methods:{resetForm:function(){this.formData.f_Id="",this.conditions=[],this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,l,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:a=t.sent,l=0,i=e.conditions.length;case 4:if(!(l<i)){t.next=25;break}if(r=e.conditions[l],!e.$validatenull(r.f_FieldId)){t.next=10;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段!")}),a=!1,t.abrupt("break",25);case 10:if(!e.$validatenull(r.f_Symbol)){t.next=14;break}return e.$message({type:"error",message:e.$t("请选择过滤条件比较符!")}),a=!1,t.abrupt("break",25);case 14:if(!e.$validatenull(r.f_FiledValueType)){t.next=18;break}return e.$message({type:"error",message:e.$t("请选择过滤条件字段值类型!")}),a=!1,t.abrupt("break",25);case 18:if(!e.$validatenull(r.f_FiledValue)){t.next=22;break}return e.$message({type:"error",message:e.$t("请填写过滤条件字段值!")}),a=!1,t.abrupt("break",25);case 22:l++,t.next=4;break;case 25:return t.abrupt("return",a);case 26:case"end":return t.stop()}}),t)})))()},setForm:function(e){var t=e,a=JSON.parse(t.f_Formula);t.f_Formula=a.formula,this.conditions=a.conditions||[],this.formulas=a.formulas||[],this.formData=t},getForm:function(){var e=this.$deepClone(this.formData),t={formula:e.f_Formula,conditions:this.$deepClone(this.conditions),formulas:this.$deepClone(this.formulas)};return e.f_Formula=JSON.stringify(t),e},handleAddConditions:function(){this.conditions.push({f_FieldId:"",f_Symbol:1,f_FiledValueType:1,f_FiledValue:"",group:""})},handleRemoveConditions:function(e){this.conditions.splice(e,1)},handleChangeVType:function(e){1==e.f_FiledValueType||10==e.f_FiledValueType?e.f_FiledValue="":e.f_FiledValue=this.vTypeOptions.find((function(t){return t.value==e.f_FiledValueType})).label},handleChangeField:function(e){if(e){var t=this.conditions.find((function(t){return t.f_FieldId==e.value}));"glbd"==e.type?(t.type="glbd",t.table=e.table,t.cfield=e.cfield,t.field=e.field,t.relationField=e.relationField):(t.type="",t.table="",t.cfield="",t.field="",t.relationField="")}},handleAddFormulas:function(){this.formulas.push({value:""})},handleRemoveFormulas:function(e){this.formulas.splice(e,1)},handleChangeGroup:function(e){if("glbd"!=e.type)this.$message({type:"error",message:this.$t("需要表单关联字段!")}),e.group="";else{var t=this.conditions.filter((function(t){return t.group==e.group&&e.f_FieldId!=t.f_FieldId})),a=t.filter((function(t){return t.field==e.field&&t.relationField==e.relationField&&t.table==e.table}));t.length>0&&0==a.length&&(this.$message({type:"error",message:this.$t("需要关联同表同字段!")}),e.group="")}}}},D=w,T=Object(m["a"])(D,x,O,!1,null,null,null),j=T.exports,S=window.$api.permission.data,I=window.$api.mapp.module,V={components:{MyForm:h,CForm:k,DForm:j},data:function(){var e=this;return{searchWord:"",columns:[{label:"编码",prop:"f_Code",minWidth:"120"},{label:"名称",prop:"f_Name",minWidth:"160"},{label:"授权类型",prop:"f_ObjectType",width:"80",align:"center"},{label:"授权对象",prop:"f_ObjectId",width:"120",align:"center",formatter:function(t){var a=t.row,l=t.cellValue;return 1==a.f_ObjectType?(e.lr_loadRole(l),(e.lr_role[l]||{})["f_FullName"]||""):(e.lr_loadUsers(l),e.lr_userName(l))}},{label:"类型",prop:"f_Type",width:"100",align:"center"},{label:"创建人",prop:"f_CreateUserName",width:"100"},{label:"创建时间",prop:"f_CreateDate",width:"160"}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:40},{prop:"Delete",label:this.$t("删除"),width:40}],tableLoading:!1,tableData:[],tableTotal:0,tablePageSize:50,tableCurrentPage:1,formTitle:"",formVisible:!1,formEdit:!1,formEditRow:null,cformTitle:"",cformVisible:!1,dformTitle:"",dformVisible:!1,appList:[]}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$awaitWraper(I.getList());case 2:a=t.sent,a&&(e.appList=a.filter((function(e){return 2==e.f_IsSystem})));case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.loadTableData(),this.lr_loadDataSourceList()},computed:Object(s["a"])(Object(s["a"])({},Object(o["mapGetters"])(["modules"])),{},{myModules:function(){var e=[],t=this.modules.filter((function(e){return 1==e.f_EnabledMark&&"custmerForm"==e.f_Target}));return e.push.apply(e,Object(r["a"])(t.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:e.f_ModuleId,label:e.f_FullName})})))),e.push.apply(e,Object(r["a"])(this.appList.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:e.f_Id,label:e.f_Name})})))),e},datasource:function(){var e=[],t=this.lr_dataSource;return e.push.apply(e,Object(r["a"])(t.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{value:e.f_Id,label:e.f_Name})})))),e}}),methods:{loadTableData:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:this.searchWord};S.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},hanleSearch:function(){this.loadTableData()},handleAdd:function(){this.formEdit=!1,this.showForm("新增数据权限条件")},handleCAdd:function(){this.formEdit=!1,this.showCForm("新增自定义功能数据权限条件")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,1==t.f_Type?this.showForm("编辑数据权限条件"):3==t.f_Type?this.showDForm("编辑数据源数据权限条件"):this.showCForm("自定义功能数据权限条件")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){S.remove(t.f_Id).then((function(){a.$message({type:"success",message:a.$t("删除成功!")}),a.loadTableData()}))})).catch((function(){a.$message({type:"info",message:a.$t("已取消删除")})}))},handleSave:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){while(1)switch(l.prev=l.next){case 0:if(e("加载数据中..."),!a.cformVisible){l.next=6;break}return l.next=4,a.handleSaveCForm();case 4:l.next=13;break;case 6:if(!a.dformVisible){l.next=11;break}return l.next=9,a.handleSaveDForm();case 9:l.next=13;break;case 11:return l.next=13,a.handleSaveForm();case 13:t();case 14:case"end":return l.stop()}}),l)})))()},handleSaveForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validateForm();case 2:if(!t.sent){t.next=15;break}if(a=e.$refs.form.getForm(),!e.formEdit){t.next=10;break}return t.next=7,S.update(e.formEditRow.f_Id,a);case 7:e.$message({type:"success",message:e.$t("更新成功!")}),t.next=13;break;case 10:return t.next=12,S.add(a);case 12:e.$message({type:"success",message:e.$t("新增成功!")});case 13:e.formVisible=!1,e.loadTableData();case 15:case"end":return t.stop()}}),t)})))()},handleCloseForm:function(){this.$refs.form.resetForm()},handleOpenedForm:function(){this.formEdit&&this.$refs.form.setForm(this.$deepClone(this.formEditRow))},showForm:function(e){this.formTitle=e,this.formVisible=!0},showCForm:function(e){this.cformTitle=e,this.cformVisible=!0},handleCloseCForm:function(){this.$refs.cform.resetForm()},handleOpenedCForm:function(){this.formEdit&&this.$refs.cform.setForm(this.$deepClone(this.formEditRow))},handleSaveCForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.cform.validateForm();case 2:if(!t.sent){t.next=15;break}if(a=e.$refs.cform.getForm(),!e.formEdit){t.next=10;break}return t.next=7,S.update(e.formEditRow.f_Id,a);case 7:e.$message({type:"success",message:e.$t("更新成功!")}),t.next=13;break;case 10:return t.next=12,S.add(a);case 12:e.$message({type:"success",message:e.$t("新增成功!")});case 13:e.cformVisible=!1,e.loadTableData();case 15:case"end":return t.stop()}}),t)})))()},handleDAdd:function(){this.formEdit=!1,this.showDForm("新增数据源数据权限条件")},showDForm:function(e){this.dformTitle=e,this.dformVisible=!0},handleCloseDForm:function(){this.$refs.dform.resetForm()},handleOpenedDForm:function(){this.formEdit&&this.$refs.dform.setForm(this.$deepClone(this.formEditRow))},handleSaveDForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.dform.validateForm();case 2:if(!t.sent){t.next=15;break}if(a=e.$refs.dform.getForm(),!e.formEdit){t.next=10;break}return t.next=7,S.update(e.formEditRow.f_Id,a);case 7:e.$message({type:"success",message:e.$t("更新成功!")}),t.next=13;break;case 10:return t.next=12,S.add(a);case 12:e.$message({type:"success",message:e.$t("新增成功!")});case 13:e.dformVisible=!1,e.loadTableData();case 15:case"end":return t.stop()}}),t)})))()}}},R=V,N=Object(m["a"])(R,l,i,!1,null,null,null);t["default"]=N.exports}}]);