(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["module-form"],{"083f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-auto-window",staticStyle:{padding:"8px","padding-bottom":"0"}},[a("el-tabs",{attrs:{type:"card","before-leave":e.handleTabBeforeLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("基础信息"),name:"base"}},[a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"60px"}},[e.lr_hasPageAuth("f_EnCode")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("编号"),prop:"f_EnCode"}},[a("el-input",{model:{value:e.formData.f_EnCode,callback:function(t){e.$set(e.formData,"f_EnCode",t)},expression:"formData.f_EnCode"}})],1)],1):e._e(),e.lr_hasPageAuth("f_FullName")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_FullName"}},[a("el-input",{model:{value:e.formData.f_FullName,callback:function(t){e.$set(e.formData,"f_FullName",t)},expression:"formData.f_FullName"}})],1)],1):e._e(),e.lr_hasPageAuth("f_ParentId")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("上级"),prop:"f_ParentId"}},[a("l-tree-select",{attrs:{options:e.modulesExpandTree},model:{value:e.formData.f_ParentId,callback:function(t){e.$set(e.formData,"f_ParentId",t)},expression:"formData.f_ParentId"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Icon")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("图标"),prop:"f_Icon"}},[a("l-input-icon",{attrs:{iconList:e.lr_icons},model:{value:e.formData.f_Icon,callback:function(t){e.$set(e.formData,"f_Icon",t)},expression:"formData.f_Icon"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Target")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("目标"),prop:"f_Target"}},[a("el-select",{attrs:{placeholder:e.$t("请选择")},model:{value:e.formData.f_Target,callback:function(t){e.$set(e.formData,"f_Target",t)},expression:"formData.f_Target"}},e._l(e.f_TargetOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),e.lr_hasPageAuth("f_SortCode")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("排序"),prop:"f_SortCode"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.formData.f_SortCode,callback:function(t){e.$set(e.formData,"f_SortCode",t)},expression:"formData.f_SortCode"}})],1)],1):e._e(),e.lr_hasPageAuth("f_UrlAddress")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("地址"),prop:"f_UrlAddress"}},[a("el-input",{model:{value:e.formData.f_UrlAddress,callback:function(t){e.$set(e.formData,"f_UrlAddress",t)},expression:"formData.f_UrlAddress"}})],1)],1):e._e(),e.lr_hasPageAuth("f_IsMenu")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("菜单"),prop:"f_IsMenu"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_IsMenu,callback:function(t){e.$set(e.formData,"f_IsMenu",t)},expression:"formData.f_IsMenu"}})],1)],1):e._e(),e.lr_hasPageAuth("f_EnabledMark")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("状态"),prop:"f_EnabledMark"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_EnabledMark,callback:function(t){e.$set(e.formData,"f_EnabledMark",t)},expression:"formData.f_EnabledMark"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Description")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("描述"),prop:"f_Description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1):e._e()],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("按钮信息"),name:"btninfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加按钮"),dataSource:e.formButtons},on:{addRow:e.handleAddButton,deleteRow:e.handleDeleteButton}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("列表信息"),name:"colinfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加列表字段"),dataSource:e.formColumns},on:{addRow:e.handleAddColumns,deleteRow:e.handleDeleteColumns}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("表单信息"),name:"forminfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加表单字段"),dataSource:e.formForms},on:{addRow:e.handleAddForms,deleteRow:e.handleDeleteForms}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)])],1)],1)},o=[],r=(a("a434"),a("d3b7"),a("159b"),a("5530")),n=a("5880"),s={props:{f_ParentId:String},watch:{f_ParentId:function(e){this.formData.f_ParentId=e}},created:function(){this.formData.f_ParentId=this.f_ParentId},data:function(){var e=this;return{activeName:"base",f_TargetOptions:[{value:"expand",label:this.$t("菜单目录")},{value:"view",label:this.$t("功能页面")},{value:"groupView",label:this.$t("集合页面")},{value:"blankView",label:this.$t("独立页面")}],formData:{f_EnCode:"",f_FullName:"",f_ParentId:"",f_Icon:"learun-icon-star",f_Target:"",f_IsMenu:1,f_EnabledMark:1,f_SortCode:"",f_UrlAddress:"",f_Description:""},rules:{f_EnCode:[{required:!0,message:this.$t("请输入编号")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_ModuleId},tableName:"lr_base_module",keyName:"f_ModuleId",trigger:"null"}],f_FullName:[{required:!0,message:this.$t("请输入名称")}],f_Target:[{required:!0,message:this.$t("请选择目标")}]},formButtons:[],formColumns:[],formForms:[]}},computed:Object(r["a"])({},Object(n["mapGetters"])(["modulesExpandTree"])),methods:{resetForm:function(){this.activeName="base",this.$refs.form&&this.$refs.form.resetFields(),this.formButtons=[],this.formColumns=[],this.formForms=[]},validateForm:function(e){var t=this;this.$refs.form.validate((function(a){a?"view"==t.formData.f_Target&&t.$validatenull(t.formData.f_UrlAddress)?(t.$message({message:t.$t("请填写地址信息！"),type:"error"}),e(!1)):e(!0):e(!1)}))},setForm:function(e){this.formData=e.baseInfo,this.formButtons=e.buttons,this.formColumns=e.columns,this.formForms=e.forms},getForm:function(){var e=[];this.formButtons.forEach((function(t){t.f_EnCode&&t.f_FullName&&e.push(t)}));var t=[];this.formColumns.forEach((function(e){e.f_EnCode&&e.f_FullName&&t.push(e)}));var a=[];this.formForms.forEach((function(e){e.f_EnCode&&e.f_FullName&&a.push(e)}));var l={baseInfo:this.$deepClone(this.formData),buttons:e,columns:t,forms:a};return l},handleTabBeforeLeave:function(e,t){var a=this;return new Promise((function(e,l){"base"==t?a.$refs.form.validate((function(t){t?"view"!=a.formData.f_Target?(a.$message({message:a.$t("只有功能页面能添加按钮/列表/表单信息！"),type:"warning"}),l()):e():(a.$message({message:a.$t("请先填写完整信息！"),type:"warning"}),l())})):e()}))},handleAddButton:function(){this.formButtons.push({f_FullName:"",f_EnCode:""})},handleDeleteButton:function(e){this.formButtons.splice(e.index,1)},handleAddColumns:function(){this.formColumns.push({f_FullName:"",f_EnCode:""})},handleDeleteColumns:function(e){this.formColumns.splice(e.index,1)},handleAddForms:function(){this.formForms.push({f_FullName:"",f_EnCode:""})},handleDeleteForms:function(e){this.formForms.splice(e.index,1)}}},f=s,i=a("2877"),u=Object(i["a"])(f,l,o,!1,null,null,null);t["default"]=u.exports}}]);