(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stampInfo"],{"80be":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page",scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.$t("签章分类"))+" "),a("div",{staticClass:"tree-setting-btn"},[a("el-tooltip",{attrs:{effect:"dark",content:e.$t("分类管理"),placement:"top"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-setting"},on:{click:e.handleSettingClick}})],1)],1)]},proxy:!0}],null,!1,1901200533)},[a("el-tree",{ref:"tree",staticClass:"learun-tree",attrs:{"node-key":"id","highlight-current":!0,data:e.treeData},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return a("span",{staticClass:"lr-tree-node"},[a("i",{staticClass:"el-icon-notebook-2"}),e._v(" "+e._s(n.label)+" ")])}}],null,!1,1970407520)})],1)]},proxy:!0}],null,!1,467553227)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入模版名称"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.hanleSearch.apply(null,arguments)}},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{on:{click:function(t){return e.handleAdd()}}},[a("l-excel-btns")],1)]},proxy:!0}],null,!1,4241449672)},[a("l-table",{attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,"row-key":"f_Id",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage,pageSizes:[50,100,200]},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_ImgFile",fn:function(t){return[a("el-image",{staticStyle:{width:"100px","margin-top":"8px"},attrs:{src:e.apiUrl+"system/annexesfile/"+t.row.f_ImgFile+"?token="+e.token,fit:"contain","preview-src-list":[e.apiUrl+"system/annexesfile/"+t.row.f_ImgFile+"?token="+e.token],lazy:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" "+e._s(e.$t("加载中"))),a("span",{staticClass:"dot"},[e._v("...")])])])]}},{key:"f_EnabledMark",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleEnableChange(t.row)}},model:{value:t.row.f_EnabledMark,callback:function(a){e.$set(t.row,"f_EnabledMark",a)},expression:"scope.row.f_EnabledMark"}})]}}],null,!1,2451251052)},[a("l-table-btns",{attrs:{btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-drawer",{attrs:{title:e.$t("分类管理"),visible:e.classifysVisible,showOk:!1,showClose:!1,size:"800px"},on:{"update:visible":function(t){e.classifysVisible=t}}},[a("l-dataitem-index",{attrs:{classifyCode:"StampType"}})],1),a("l-dialog",{attrs:{title:e.$t(e.formTitle),visible:e.formVisible,height:472,width:600},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form"})],1)],1)},l=[],i=(a("a434"),a("96cf"),a("1da1")),r=a("deca"),o=window.$api.workflow.stamp,s={components:{MyForm:r["default"]},data:function(){return{lr_isPage:!0,classifysVisible:!1,treeCategory:"",searchWord:"",columns:[{label:"名称",prop:"f_StampName",width:"150"},{label:"分类",prop:"f_StampType",width:"120",align:"center",dataType:"dataItem",dataCode:"StampType"},{label:"状态",prop:"f_EnabledMark",width:"64",align:"center"},{label:"签章",prop:"f_ImgFile",width:"124",align:"center",isNotAutoWrap:!1},{label:"属于人",prop:"f_UserIds",minWidth:"100",dataType:"user"}],tableBtns:[{prop:"Edit",label:"编辑",width:40},{prop:"Delete",label:"删除",width:40}],tableLoading:!1,tableTotal:0,tablePageSize:50,tableCurrentPage:1,tableData:[],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1}},computed:{treeData:function(){return this.lr_dataItemTree(this.lr_dataItem["StampType"])}},mounted:function(){this.lr_loadDataItem("StampType"),this.loadTablePage()},methods:{loadTablePage:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_CreateDate DESC",f_StampName:this.searchWord,f_StampType:this.treeCategory};o.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTablePage(!0)},hanleSearch:function(){this.loadTablePage()},handleNodeClick:function(e){this.treeCategory=e.value,this.tableCurrentPage=1,this.loadTablePage()},handleSettingClick:function(){this.classifysVisible=!0},handleAdd:function(){this.formEdit=!1,this.handleShowForm("新增签章")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,this.handleShowForm("编辑签章")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.tableData.splice(e,1),a.tableTotal--,n.next=4,o.remove(t.f_StampId);case 4:a.$message({type:"success",message:a.$t("删除成功!")});case 5:case"end":return n.stop()}}),n)})))).catch((function(){a.$message({type:"info",message:a.$t("已取消删除!")})}))},handleEnableChange:function(e){var t=this;o.updateState(e.f_StampId,e.f_EnabledMark).then((function(){t.$message({type:"success",message:"更新成功!"})}))},handleSave:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var l,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.form.validateForm();case 2:if(!n.sent){n.next=17;break}if(e(),l=a.$refs.form.getForm(),i="",!a.formEdit){n.next=12;break}return n.next=9,a.$awaitWraper(o.update(a.formEditRow.f_StampId,l));case 9:i=n.sent,n.next=15;break;case 12:return n.next=14,a.$awaitWraper(o.add(l));case 14:i=n.sent;case 15:i&&(a.$message({type:"success",message:a.$t("保存成功!")}),a.loadTablePage(),a.formVisible=!1),t();case 17:case"end":return n.stop()}}),n)})))()},handleShowForm:function(e){this.formTitle=e,this.formVisible=!0},handleOpenedForm:function(){this.formEdit&&this.$refs.form.setForm(this.formEditRow)},handleCloseForm:function(){this.$refs.form.resetForm()}}},c=s,d=a("2877"),u=Object(d["a"])(c,n,l,!1,null,null,null);t["default"]=u.exports}}]);