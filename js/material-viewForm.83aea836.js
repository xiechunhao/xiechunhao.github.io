(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["material-viewForm","material-basicInfo","material-deliveryRecords","material-operationRecords","material-purchasingRecords","material-warehousingRecords"],{7790:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("l-panel",{staticStyle:{padding:"0px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[t("l-query2",{attrs:{items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"f_Theme",fn:function(){return[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.queryData.f_Theme,callback:function(a){e.$set(e.queryData,"f_Theme",a)},expression:"queryData.f_Theme"}})]},proxy:!0},{key:"f_DateQRange",fn:function(){return[t("l-date",{attrs:{format:"yyyy-MM-dd",dateType:"daterange",placeholder:e.$t("请选择")},model:{value:e.queryData.f_DateQRange,callback:function(a){e.$set(e.queryData,"f_DateQRange",a)},expression:"queryData.f_DateQRange"}})]},proxy:!0},{key:"f_Store",fn:function(){return[t("l-select",{attrs:{options:e.storeOptions,placeholder:e.$t("请选择")},model:{value:e.queryData.f_Store,callback:function(a){e.$set(e.queryData,"f_Store",a)},expression:"queryData.f_Store"}})]},proxy:!0}])})]},proxy:!0}])},[t("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(a){e.tableCurrentPage=a},"update:table-page":function(a){e.tableCurrentPage=a},loadPageData:e.turnTablePage}})],1)},l=[],n=(t("96cf"),t("1da1")),o=window.$api.erpcase.outstorelog,i={props:{materialId:String},data:function(){return{queryData:{f_Theme:"",f_DateQRange:"",f_Store:""},queryItems:[{label:"主题",prop:"f_Theme"},{label:"仓库",prop:"f_Store"},{label:"日期",prop:"f_DateQRange"}],tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"出库单号",prop:"f_Number",minWidth:120,align:"left"},{label:"出库主题",prop:"f_Theme",minWidth:120,align:"left",dataType:"input"},{label:"出库日期",prop:"f_Date",width:120,align:"left",dataType:"datetime",format:"yyyy-MM-dd"},{label:"数量",prop:"f_Count",width:100,align:"left"},{label:"出库人员",prop:"f_Person",width:120,align:"left",dataType:"user"},{label:"出库仓库",prop:"f_Store",width:120,align:"left",dataType:"dataSource",dataCode:"ERP_WareHouses",valueKey:"f_id",labelKey:"f_name",isNotAutoWrap:!0}]}},computed:{storeOptions:function(){var e=this.lr_DataSource("ERP_WareHouses");return this.lr_DataSourceOptions(e,"f_id","f_name")}},watch:{materialId:{handler:function(){this.init()},immediate:!0}},methods:{init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var a=e.rows;this.tablePageSize=a,this.loadTableData(!0)},loadTableData:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(a.tableCurrentPage=1),a.tableLoading=!0,r=a.$deepClone(a.queryData),r.f_MaterialId=a.materialId,r.rows=a.tablePageSize,r.page=a.tableCurrentPage,r.sidx="f_Date DESC",t.next=9,a.$awaitWraper(o.getPage(r));case 9:l=t.sent,null!=l?(a.tableData=l.rows,a.tableTotal=l.records):a.tableData=[],a.tableLoading=!1;case 12:case"end":return t.stop()}}),t)})))()}}},s=i,u=t("2877"),d=Object(u["a"])(s,r,l,!1,null,null,null);a["default"]=d.exports},a0c8:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("l-panel",{staticStyle:{padding:"0px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[t("l-query2",{attrs:{items:e.queryItems,formData:e.queryData,loading:e.tableLoading},on:{search:e.handleSearch},scopedSlots:e._u([{key:"f_Theme",fn:function(){return[t("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.queryData.f_Theme,callback:function(a){e.$set(e.queryData,"f_Theme",a)},expression:"queryData.f_Theme"}})]},proxy:!0},{key:"f_DateQRange",fn:function(){return[t("l-date",{attrs:{format:"yyyy-MM-dd",dateType:"daterange",placeholder:e.$t("请选择")},model:{value:e.queryData.f_DateQRange,callback:function(a){e.$set(e.queryData,"f_DateQRange",a)},expression:"queryData.f_DateQRange"}})]},proxy:!0},{key:"f_Store",fn:function(){return[t("l-select",{attrs:{options:e.storeOptions,placeholder:e.$t("请选择")},model:{value:e.queryData.f_Store,callback:function(a){e.$set(e.queryData,"f_Store",a)},expression:"queryData.f_Store"}})]},proxy:!0}])})]},proxy:!0}])},[t("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(a){e.tableCurrentPage=a},"update:table-page":function(a){e.tableCurrentPage=a},loadPageData:e.turnTablePage}})],1)},l=[],n=(t("96cf"),t("1da1")),o=window.$api.erpcase.instorelogs,i={props:{materialId:String},data:function(){return{queryData:{f_Theme:"",f_DateQRange:"",f_Store:""},queryItems:[{label:"主题",prop:"f_Theme"},{label:"仓库",prop:"f_Store"},{label:"日期",prop:"f_DateQRange"}],tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"入库单号",prop:"f_Number",minWidth:120,align:"left"},{label:"入库主题",prop:"f_Theme",minWidth:120,align:"left",dataType:"input"},{label:"入库日期",prop:"f_Date",width:120,align:"left",dataType:"datetime",format:"yyyy-MM-dd"},{label:"数量",prop:"f_Count",align:"left",width:100},{label:"入库人员",prop:"f_Person",align:"left",dataType:"user",width:120},{label:"入库仓库",prop:"f_Store",width:120,align:"left",dataType:"dataSource",dataCode:"ERP_WareHouses",valueKey:"f_id",labelKey:"f_name",isNotAutoWrap:!0}]}},computed:{storeOptions:function(){var e=this.lr_DataSource("ERP_WareHouses");return this.lr_DataSourceOptions(e,"f_id","f_name")}},watch:{materialId:{handler:function(){this.init()},immediate:!0}},methods:{init:function(){this.queryData={},this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var a=e.rows;this.tablePageSize=a,this.loadTableData(!0)},loadTableData:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(a.tableCurrentPage=1),a.tableLoading=!0,r=a.$deepClone(a.queryData),r.f_MaterialId=a.materialId,r.rows=a.tablePageSize,r.page=a.tableCurrentPage,r.sidx="f_Date DESC",t.next=9,a.$awaitWraper(o.getPage(r));case 9:l=t.sent,null!=l?(a.tableData=l.rows,a.tableTotal=l.records):a.tableData=[],a.tableLoading=!1;case 12:case"end":return t.stop()}}),t)})))()}}},s=i,u=t("2877"),d=Object(u["a"])(s,r,l,!1,null,null,null);a["default"]=d.exports},c313:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("l-layout",{attrs:{top:149,topMove:!1},scopedSlots:e._u([{key:"top",fn:function(){return[t("div",{staticStyle:{padding:"16px"}},[t("el-descriptions",{staticClass:"learun-description",attrs:{title:e.row.f_Name,column:4}},[t("el-descriptions-item",{attrs:{label:"创建人"}},[e._v(e._s(e.lr_userName(e.row.f_CreateUserId)))]),t("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.lr_dateFormat(e.row.f_CreateDate)))]),t("el-descriptions-item",{attrs:{label:"最后修改人"}},[e._v(e._s(e.lr_userName(e.row.f_ModifyUserId)))]),t("el-descriptions-item",{attrs:{label:"最后修改时间"}},[e._v(e._s(e.lr_dateFormat(e.row.f_ModifyDate)))])],1)],1)]},proxy:!0}])},[t("div",{staticClass:"l-auto-window h48",staticStyle:{"padding-left":"16px","padding-right":"16px"}},[t("el-tabs",{model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"物料信息",name:"first"}},[t("basicInfo",{attrs:{row:e.row,storeInfo:e.storeInfo}})],1),t("el-tab-pane",{attrs:{label:"采购记录",name:"second"}},[t("purchasingRecords",{attrs:{materialNumber:e.row.f_Number}})],1),t("el-tab-pane",{attrs:{label:"入库记录",name:"third"}},[t("warehousingRecords",{attrs:{materialId:e.row.f_Id}})],1),t("el-tab-pane",{attrs:{label:"出库记录",name:"fourth"}},[t("deliveryRecords",{attrs:{materialId:e.row.f_Id}})],1),t("el-tab-pane",{attrs:{label:"操作记录",name:"fifth"}},[t("operationRecords",{attrs:{materialId:e.row.f_Id}})],1)],1)],1)])},l=[],n=(t("159b"),t("96cf"),t("1da1")),o=t("dea4"),i=t("e46f"),s=t("a0c8"),u=t("7790"),d=t("fece"),c=window.$api.erpcase.instorelogs,f={props:["row"],components:{basicInfo:o["default"],purchasingRecords:i["default"],warehousingRecords:s["default"],deliveryRecords:u["default"],operationRecords:d["default"]},data:function(){return{activeName:"first",storeInfo:{}}},watch:{row:{handler:function(){this.load()},immediate:!0}},mounted:function(){},methods:{load:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r,l,n,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.lr_loadDataSourceData("ERP_WareHouses",!1);case 2:return t=e.lr_dataSourceData["ERP_WareHouses"]||[],a.next=5,e.$awaitWraper(c.getList({f_MaterialId:e.row.f_Id}));case 5:r=a.sent,l={columns:[],list:[]},n={},t.forEach((function(e){n[e.f_id]=e.f_name})),o={},i=0,r.forEach((function(e){o[e.f_Store]?o[e.f_Store]+=e.f_Count:(l.columns.push({label:n[e.f_Store],prop:e.f_Store,minWidth:120,align:"left"}),o[e.f_Store]=e.f_Count),i+=e.f_Count})),o["total"]=i,l.columns.push({label:"总库存",prop:"total",minWidth:120,align:"left"}),l.list.push(o),e.storeInfo=l;case 16:case"end":return a.stop()}}),a)})))()}}},p=f,b=t("2877"),m=Object(b["a"])(p,r,l,!1,null,null,null);a["default"]=m.exports},dea4:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{"padding-top":"32px"}},[t("el-descriptions",{attrs:{title:"基础信息",column:7}},[t("el-descriptions-item",{attrs:{label:"物料编码"}},[e._v(e._s(e.row.f_Number))]),t("el-descriptions-item",{attrs:{label:"物料名称"}},[e._v(e._s(e.row.f_Name))]),t("el-descriptions-item",{attrs:{label:"规格型号"}},[e._v(e._s(e.row.f_Model))]),t("el-descriptions-item",{attrs:{label:"单位"}},[e._v(e._s(e.lr_dataSourceName2("ERP_Unit",e.row.f_Unit,"f_id","f_name")))]),t("el-descriptions-item",{attrs:{label:"物料类别"}},[e._v(e._s(e.lr_dataSourceName2("ERP_MaterialClasses",e.row.f_Type,"f_id","f_type")))]),t("el-descriptions-item",{attrs:{label:"物料属性"}},[e._v(e._s(e.lr_dataSourceName2("ERP_MaterialProp",e.row.f_Property,"f_id","f_type")))]),t("el-descriptions-item",{attrs:{label:"状态"}},[0==e.row.f_State?t("p",[e._v("启用")]):e._e(),1==e.row.f_State?t("p",[e._v("未用")]):e._e()]),e.row.f_File?t("el-descriptions-item",{attrs:{labelStyle:"align-items: center;",label:"图片资料"}},[t("l-upload",{attrs:{disabled:"",value:e.row.f_File,listType:"picture-card"}})],1):e._e()],1),t("l-table",{ref:"mainTable",attrs:{columns:e.columns,dataSource:e.tableData}})],1)},l=[],n={props:{row:{type:Object,default:function(){return{}}},storeInfo:{type:Object,default:function(){return{}}}},computed:{tableData:function(){return this.storeInfo.list||[]},columns:function(){return this.storeInfo.columns||[]}},mounted:function(){},methods:{}},o=n,i=t("2877"),s=Object(i["a"])(o,r,l,!1,null,null,null);a["default"]=s.exports},e46f:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("l-panel",{staticStyle:{padding:"0px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[t("div",{staticClass:"l-panel--item"},[t("el-input",{attrs:{placeholder:"输入内容",size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(a){e.searchWord=a},expression:"searchWord"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1)]},proxy:!0}])},[t("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(a){e.tableCurrentPage=a},"update:table-page":function(a){e.tableCurrentPage=a},loadPageData:e.turnTablePage}})],1)},l=[],n=(t("96cf"),t("1da1")),o=window.$api.erpcase.purchase,i={props:{materialNumber:String},data:function(){return{searchWord:"",tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"采购单号",prop:"f_Number",minWidth:120,align:"left"},{label:"采购主题",prop:"f_Theme",minWidth:120,align:"left"},{label:"采购日期",prop:"f_PurchaseDate",width:120,align:"left",dataType:"datetime",format:"yyyy-MM-dd"},{label:"采购人员",prop:"f_PurchasePerson",width:100,align:"left",dataType:"user"},{label:"采购部门",prop:"f_PurchaseDep",align:"left",dataType:"department"},{label:"供应商",prop:"f_SupplierName",align:"left",dataType:"dataSource",dataCode:"ERP_Suppliers",valueKey:"f_id",labelKey:"f_name"},{label:"采购数量",prop:"f_CountSum",width:100,align:"left"},{label:"采购金额",prop:"f_AmountSum",width:100,align:"left"}]}},mounted:function(){this.init()},methods:{init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var a=e.rows;this.tablePageSize=a,this.loadTableData(!0)},loadTableData:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(a.tableCurrentPage=1),a.tableLoading=!0,r={},r.keyword=a.searchWord,r.rows=a.tablePageSize,r.page=a.tableCurrentPage,r.sidx="f_PurchaseDate DESC",t.next=9,a.$awaitWraper(o.logs(a.materialNumber,r));case 9:l=t.sent,null!=l?(a.tableData=l.rows,a.tableTotal=l.records):a.tableData=[],a.tableLoading=!1;case 12:case"end":return t.stop()}}),t)})))()}}},s=i,u=t("2877"),d=Object(u["a"])(s,r,l,!1,null,null,null);a["default"]=d.exports},fece:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("l-panel",{staticStyle:{padding:"0px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[t("div",{staticClass:"l-panel--item"},[t("el-input",{attrs:{placeholder:e.$t("请输入关键字"),size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(a){e.searchWord=a},expression:"searchWord"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1)]},proxy:!0}])},[t("l-table",{ref:"mainTable",attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableData,isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(a){e.tableCurrentPage=a},"update:table-page":function(a){e.tableCurrentPage=a},loadPageData:e.turnTablePage}})],1)},l=[],n=(t("96cf"),t("1da1")),o=window.$api.erpcase.log,i={props:{materialId:String},data:function(){return{searchWord:"",tableLoading:!1,tableData:[],tableTotal:0,tableCurrentPage:1,tablePageSize:50,columns:[{label:"操作人",prop:"f_OperateUserId",width:120,align:"left",dataType:"user"},{label:"操作时间",prop:"f_OperateTime",width:160,dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss"},{label:"操作内容",prop:"f_Description",minWidth:200}]}},watch:{materialId:{handler:function(){this.init()},immediate:!0}},methods:{init:function(){this.loadTableData()},handleSearch:function(){this.loadTableData()},turnTablePage:function(e){var a=e.rows;this.tablePageSize=a,this.loadTableData(!0)},loadTableData:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||(a.tableCurrentPage=1),a.tableLoading=!0,r={},r.f_Description=a.searchWord,r.f_KeyId=a.materialId,r.rows=a.tablePageSize,r.page=a.tableCurrentPage,r.sidx="f_OperateTime DESC",t.next=10,a.$awaitWraper(o.getPage(r));case 10:l=t.sent,null!=l?(a.tableData=l.rows,a.tableTotal=l.records):a.tableData=[],a.tableLoading=!1;case 13:case"end":return t.stop()}}),t)})))()}}},s=i,u=t("2877"),d=Object(u["a"])(s,r,l,!1,null,null,null);a["default"]=d.exports}}]);