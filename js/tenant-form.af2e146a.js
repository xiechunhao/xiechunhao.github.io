(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tenant-form"],{c66c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"8px"}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"mini",labelPosition:"top"}},[a("div",{staticClass:"l-auto-window only-tabs"},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:t.$t("主表信息"),name:"tab0"}},[a("el-row",{attrs:{gutter:80}},[a("div",{staticClass:"l-rblock"},[t.lr_formLookAuth("lr_sass_tenant_f_Code")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("编码"),prop:"lr_sass_tenant_f_Code"}},[a("el-input",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_Code"),placeholder:t.$t("请输入")},model:{value:t.formData.lr_sass_tenant_f_Code,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_Code",e)},expression:"formData.lr_sass_tenant_f_Code"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_Name")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("名称"),prop:"lr_sass_tenant_f_Name"}},[a("el-input",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_Name"),placeholder:t.$t("请输入")},model:{value:t.formData.lr_sass_tenant_f_Name,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_Name",e)},expression:"formData.lr_sass_tenant_f_Name"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_Company")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("公司"),prop:"lr_sass_tenant_f_Company"}},[a("el-input",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_Company"),placeholder:t.$t("请输入")},model:{value:t.formData.lr_sass_tenant_f_Company,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_Company",e)},expression:"formData.lr_sass_tenant_f_Company"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_TenantGroupId")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("租户组"),prop:"lr_sass_tenant_f_TenantGroupId"}},[a("l-select",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_TenantGroupId"),options:t.lr_sass_tenant_f_TenantGroupIdOptions},model:{value:t.formData.lr_sass_tenant_f_TenantGroupId,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_TenantGroupId",e)},expression:"formData.lr_sass_tenant_f_TenantGroupId"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_Mail")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("邮箱"),prop:"lr_sass_tenant_f_Mail"}},[a("el-input",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_Mail"),placeholder:t.$t("请输入")},model:{value:t.formData.lr_sass_tenant_f_Mail,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_Mail",e)},expression:"formData.lr_sass_tenant_f_Mail"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_ExpireTime")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("过期时间"),prop:"lr_sass_tenant_f_ExpireTime"}},[a("l-date",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_ExpireTime"),format:"yyyy-MM-dd",dateType:"date",clearable:!0,placeholder:t.$t("请选择")},model:{value:t.formData.lr_sass_tenant_f_ExpireTime,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_ExpireTime",e)},expression:"formData.lr_sass_tenant_f_ExpireTime"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_EnabledMark")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("有效"),prop:"lr_sass_tenant_f_EnabledMark"}},[a("el-switch",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_EnabledMark"),activeValue:1,inactiveValue:0},model:{value:t.formData.lr_sass_tenant_f_EnabledMark,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_EnabledMark",e)},expression:"formData.lr_sass_tenant_f_EnabledMark"}})],1)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_DbCode")?a("el-col",{staticStyle:{"margin-bottom":"18px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("主库"),prop:"lr_sass_tenant_f_DbCode"}},[a("el-select",{attrs:{disabled:!t.lr_formEditAuth("lr_sass_tenant_f_DbCode"),placeholder:t.$t("请选择")},model:{value:t.formData.lr_sass_tenant_f_DbCode,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_DbCode",e)},expression:"formData.lr_sass_tenant_f_DbCode"}},t._l(t.lr_dblinkTreeNoSystem,(function(e){return a("el-option-group",{key:e.id,attrs:{label:e.label}},t._l(e.children,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)})),1)],1),a("div",[t._l(t.cDbCodes,(function(e,s){return a("div",{key:s,staticClass:"l-set-item",staticStyle:{"padding-left":"0"}},[a("el-select",{staticStyle:{width:"49%","margin-right":"1%"},attrs:{size:"mini",placeholder:t.$t("请选择目标库")},model:{value:e.from,callback:function(a){t.$set(e,"from",a)},expression:"item.from"}},t._l(t.lr_dblinkTreeNoSystem,(function(e){return a("el-option-group",{key:e.id,attrs:{label:e.label}},t._l(e.children,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)})),1),a("el-select",{staticStyle:{width:"49%","margin-right":"1%"},attrs:{size:"mini",placeholder:t.$t("请选择映射库")},model:{value:e.to,callback:function(a){t.$set(e,"to",a)},expression:"item.to"}},t._l(t.lr_dblinkTreeNoSystem,(function(e){return a("el-option-group",{key:e.id,attrs:{label:e.label}},t._l(e.children,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)})),1),a("el-button",{staticClass:"l-delete-item",staticStyle:{padding:"4px"},attrs:{circle:"",plain:"",type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(e){return t.handleRemoveCDbCodes(s)}}})],1)})),a("div",{staticClass:"mt-8 learun-form-btn",on:{click:t.handleAddCDbCodes}},[a("el-button",{attrs:{size:"mini",type:"text"}},[t._v(t._s(t.$t("添加子库映射")))])],1)],2)],1):t._e(),t.lr_formLookAuth("lr_sass_tenant_f_Description")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("备注"),prop:"lr_sass_tenant_f_Description"}},[a("el-input",{attrs:{type:"textarea",disabled:!t.lr_formEditAuth("lr_sass_tenant_f_Description"),rows:2,placeholder:t.$t("请输入")},model:{value:t.formData.lr_sass_tenant_f_Description,callback:function(e){t.$set(t.formData,"lr_sass_tenant_f_Description",e)},expression:"formData.lr_sass_tenant_f_Description"}})],1)],1):t._e()],1)])],1)],1)],1)])],1)},r=[],n=(a("c740"),a("a434"),a("96cf"),a("1da1")),l=window.$api.sass.tenant,_={data:function(){var t=this;return{moduleCode:"sass_tenant",activeName:"tab0",formData:{lr_sass_tenant_f_Code:"",lr_sass_tenant_f_Name:"",lr_sass_tenant_f_Company:"",lr_sass_tenant_f_TenantGroupId:"",lr_sass_tenant_f_Mail:"",lr_sass_tenant_f_ExpireTime:"",lr_sass_tenant_f_DbCode:"",lr_sass_tenant_f_Description:"",lr_sass_tenant_f_EnabledMark:1},rules:{lr_sass_tenant_f_Code:[{required:!0,message:this.$t("请输入编码")},{validator:this.lr_existDbFiled,fieldName:"f_Code",keyValue:function(){return t.formData.lr_sass_tenant_f_Id},tableName:"lr_sass_tenant",keyName:"f_Id",trigger:"null"}],lr_sass_tenant_f_Name:[{required:!0,message:this.$t("请输入名称")}],lr_sass_tenant_f_Company:[{required:!0,message:this.$t("请输入公司")}],lr_sass_tenant_f_TenantGroupId:[{required:!0,message:this.$t("请选择租户组")}],lr_sass_tenant_f_DbCode:[{required:!0,message:this.$t("请选择数据库")}],lr_sass_tenant_f_Mail:[{pattern:/^[a-zA-Z0-9-_.]+@[a-zA-Z0-9-_]+.[a-zA-Z0-9]+$/,message:this.$t("请输入邮箱")}]},cDbCodes:[]}},computed:{lr_sass_tenant_f_TenantGroupIdOptions:function(){var t=this.lr_DataSource("tenantGroup");return this.lr_DataSourceOptions(t,"f_id","f_name")}},created:function(){this.lr_loadDblink()},methods:{resetForm:function(){this.$formClear(this.$refs.form),this.activeName="tab0",this.cDbCodes=[]},validateForm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$formValidateWraper(t.$refs.form);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:if(!(t.cDbCodes.length>0&&t.cDbCodes.findIndex((function(t){return!t.from||!t.to}))>-1)){e.next=7;break}return t.$message({type:"warning",message:t.$t("请设置子库映射!")}),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))()},setForm:function(t){if(this.$setFormData(this.formData,t,"lr_sass_tenant"),this.formData.lr_sass_tenant_f_CDbCode){var e=JSON.parse(this.formData.lr_sass_tenant_f_CDbCode);this.cDbCodes=e}delete this.formData.lr_sass_tenant_f_CDbCode},getForm:function(){var t=this.$getFormData(this.formData,"lr_sass_tenant");return t.f_CDbCode=JSON.stringify(this.cDbCodes),t},loadFormData:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.keyValue,a.next=3,e.$awaitWraper(l.get(s));case 3:if(r=a.sent,!r){a.next=9;break}return e.setForm(r),a.abrupt("return",!0);case 9:return a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()},saveForm:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.keyValue,r=t.isEdit,n=e.getForm(),!r){a.next=8;break}return a.next=5,e.$awaitWraper(l.update(s,n));case 5:return a.abrupt("return",a.sent);case 8:return n.f_Id=s,a.next=11,e.$awaitWraper(l.add(n));case 11:return a.abrupt("return",a.sent);case 12:case"end":return a.stop()}}),a)})))()},handleRemoveCDbCodes:function(t){this.cDbCodes.splice(t,1)},handleAddCDbCodes:function(){this.cDbCodes.push({from:"",to:""})}}},o=_,i=a("2877"),f=Object(i["a"])(o,s,r,!1,null,null,null);e["default"]=f.exports}}]);