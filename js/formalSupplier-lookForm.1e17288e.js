(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["formalSupplier-lookForm","supplier-assessForm"],{"48cb":function(e,a,t){},"508e":function(e,a,t){"use strict";t("48cb")},"56ff":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{padding:"8px"}},[t("el-row",{attrs:{gutter:0}},[t("div",{staticClass:"l-rblock"},[t("div",{staticClass:"border pd-16"},[t("div",{staticClass:"ptitle"},[e._v(" "+e._s(e.$t("供应商评估报告"))+" ")]),t("div",{staticClass:"mt-16"},[t("div",[t("div",{staticClass:"learun-form-title"},[e._v(e._s(e.$t("基本信息")))]),t("div",{staticClass:"form_block flex flex-center flex-c-between"},[t("div",[e._v(" "+e._s(e.$t("供应商编号："+e.supplierInfo.f_Number))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商名称："+e.supplierInfo.f_Name))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商负责人："+e.supplierInfo.f_Person))+" ")]),t("div",[e._v(" "+e._s(e.$t("供应商类型："+e.supplierInfo.f_Type))+" ")]),t("div",[e._v(" "+e._s(e.$t("添加人："+e.supplierInfo.f_CreateUserName))+" ")]),t("div",[e._v(" "+e._s(e.$t("创建日期："+e.supplierInfo.f_CreateDate))+" ")]),t("div",[e._v(" "+e._s(e.$t("经营范围："+e.supplierInfo.f_Scope))+" ")]),t("div",[e._v(" "+e._s(e.$t("手机号："+e.supplierInfo.f_Phone))+" ")])]),e.supplier_form?t("assess-form",{attrs:{isReadOnly:!0,id:e.id,type:"0"}}):e._e(),t("div",{staticClass:"flex flex-c-center mt-16"},[t("el-button",{attrs:{plain:"",icon:e.supplier_form?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.showLookForm}},[e._v(e._s(e.$t(e.supplier_form?"收起报告":"展开报告")))])],1)],1)])]),t("div",{staticClass:"border pd-16 mt-8"},[t("div",{staticClass:"ptitle"},[e._v(" "+e._s(e.$t("供应商转正资料"))+" ")]),t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("转正说明"))+" ")]),t("div",{staticClass:"form_block"},[e._v(" "+e._s(e.formData.f_Description)+" ")]),t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("附件上传"))+" ")]),t("div",{staticClass:"form_block"},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:""},model:{value:e.formData.f_File,callback:function(a){e.$set(e.formData,"f_File",a)},expression:"formData.f_File"}})],1),t("div",{staticClass:"learun-form-title mt-16 mb-16"},[e._v(" "+e._s(e.$t("流程审批"))+" ")]),e.loading?e._e():t("l-wf-audit-timeline",{attrs:{isLoadData:"",processId:e.formData.f_Id}})],1),t("div",{staticClass:"border pd-16 mt-8"},[t("div",{staticClass:"ptitle"},[e._v(" "+e._s(e.$t("供应商时间轴"))+" ")]),t("div",{staticClass:"erp-supplier-timeline"},[t("el-timeline",e._l(e.timeList,(function(a){return t("el-timeline-item",{key:a.f_Id,attrs:{type:"primary",timestamp:e.lr_dateFormat(a.f_CreateDate)}},[t("div",{staticClass:"title"},[e._v(" "+e._s(a.f_Title)+" ")]),t("div",{staticClass:"user"},[e._v(" "+e._s(a.f_ContentUser)+" ")]),a.f_ContentReason.indexOf("delete")>-1?[t("div",{staticClass:"user"},[e._v(" "+e._s(e.$t("淘汰原因"))+"："+e._s(e.outMap[a.f_ContentReason.replace("delete","")])+" ")]),t("div",{staticClass:"user"},[e._v(" "+e._s(e.$t("淘汰说明"))+"："+e._s(a.f_ContentExplain)+" ")])]:a.f_ContentReason.indexOf("recover")>-1?[t("div",{staticClass:"user"},[e._v(" "+e._s(e.$t("恢复说明"))+"："+e._s(a.f_ContentExplain)+" ")]),""!=a.f_ContentReason.replace("recover","")?t("l-upload",{staticClass:"mt-8",attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:"",value:a.f_ContentReason.replace("recover","")}}):e._e()]:e._e(),"yearAssess"==a.f_ContentExplain?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.lookYear(a.f_ContentReason)}}},[e._v(" "+e._s(e.$t("查看年审报告"))+" ")]):e._e()],2)})),1)],1)])])]),t("wf-audit-form",{ref:"form",attrs:{type:"auditAndlook",params:{processId:e.yearId},isLoadFormData:!0,title:"供应商年审报告",visible:e.wfvisible},on:{"update:visible":function(a){e.wfvisible=a}}})],1)},r=[],i=(t("96cf"),t("1da1")),l=t("6a12"),p=window.$api.erpcase.supplier,_={props:{id:String},components:{AssessForm:l["default"]},data:function(){return{supplierInfo:{f_Number:"",f_Name:"",f_Person:"",f_Phone:"",f_Scope:"",f_CreateDate:"",f_CreateUserName:"",f_Type:""},supplier_form:!1,formData:{f_Description:"",f_File:""},loading:!0,timeList:[],yearId:"",wfvisible:!1,outMap:{1:"年审不合格",2:"其他"}}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.loadSupplierInfo(e.id);case 2:case"end":return a.stop()}}),a)})))()},loadSupplierInfo:function(e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.loading=!0,t.next=3,a.$awaitWraper(p.get(e));case 3:return s=t.sent,s&&(s.f_CreateDate=a.$formatDate(s.f_CreateDate,"yyyy-MM-dd"),a.supplierInfo=s),t.next=7,a.$awaitWraper(p.getFormalBySupplier(e));case 7:return a.formData=t.sent,t.next=10,a.$awaitWraper(p.getTimeList(e));case 10:a.timeList=t.sent,a.loading=!1,console.log(a.timeList,"timeList");case 13:case"end":return t.stop()}}),t)})))()},lookYear:function(e){this.yearId=e,this.wfvisible=!0},resetForm:function(){this.$formClear(this.$refs.form)},showLookForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.supplier_form=!e.supplier_form;case 1:case"end":return a.stop()}}),a)})))()}}},o=_,n=(t("508e"),t("2877")),f=Object(n["a"])(o,s,r,!1,null,"327faae2",null);a["default"]=f.exports},"628f":function(e,a,t){"use strict";t("e9f3")},"6a12":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-form",{ref:"form",staticClass:"learun-el-form-left",attrs:{model:e.formData,rules:e.isReadOnly?{}:e.rules,size:"mini",labelPosition:"left",labelWidth:"100px"}},[e.loading?e._e():t("el-row",{staticClass:"erp-supplier-assess"},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货能力评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},["0"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_CapacityLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_CapacityLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_CapacityLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_CapacityLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityLevel",a)},expression:"formData.case_erp_supplierrisk_f_CapacityLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_CapacityReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_CapacityReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",showWordLimit:!1,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_CapacityReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityReason",a)},expression:"formData.case_erp_supplierrisk_f_CapacityReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_CapacityFile"}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"case_erp_supplierrisk_f_CapacityFile",labelWidth:"0"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly},model:{value:e.formData.case_erp_supplierrisk_f_CapacityFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_CapacityFile",a)},expression:"formData.case_erp_supplierrisk_f_CapacityFile"}})],1)],1)],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("供货质量评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SupplierLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SupplierLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SupplierLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SupplierLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierLevel",a)},expression:"formData.case_erp_supplierrisk_f_SupplierLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SupplierReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SupplierReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierReason",a)},expression:"formData.case_erp_supplierrisk_f_SupplierReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SupplierFile"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SupplierFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SupplierFile",a)},expression:"formData.case_erp_supplierrisk_f_SupplierFile"}})],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("环境与安全评估"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},["0"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",[e._v(e._s(e.$t("优秀")))]):"1"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("良好")))]):"2"==e.formData.case_erp_supplierrisk_f_SafetyLevel?t("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("及格")))]):t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("不及格")))])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_SafetyLevel"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_SafetyLevelOptions},model:{value:e.formData.case_erp_supplierrisk_f_SafetyLevel,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyLevel",a)},expression:"formData.case_erp_supplierrisk_f_SafetyLevel"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_SafetyReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_SafetyReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyReason",a)},expression:"formData.case_erp_supplierrisk_f_SafetyReason"}})],1),t("el-form-item",{attrs:{label:e.$t("附件上传："),prop:"case_erp_supplierrisk_f_SafetyFile"}},[t("l-upload",{attrs:{drag:"",maxSize:"10",sizeType:"MB",limit:3,showFileList:"uploadTheme1",disabled:e.isReadOnly,placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_SafetyFile,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_SafetyFile",a)},expression:"formData.case_erp_supplierrisk_f_SafetyFile"}})],1)],1)]),t("el-col",{attrs:{span:24}},[t("div",{staticClass:"learun-form-title mt-16"},[e._v(" "+e._s(e.$t("最终评估结果"))+" ")]),t("div",{staticClass:"form_block"},[e.isReadOnly?t("el-form-item",{attrs:{label:e.$t("等级："),prop:"case_erp_supplierrisk_f_FinalState"}},["0"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(e._s(e.$t("优秀"))+" ")]):"1"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",{attrs:{type:"success"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("良好"))+" ")]):"2"==e.formData.case_erp_supplierrisk_f_FinalState?t("el-tag",{attrs:{type:"info"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("及格"))+" ")]):t("el-tag",{attrs:{type:"danger"}},[t("i",{staticClass:"el-icon-s-check margin_right_3"}),e._v(" "+e._s(e.$t("不及格"))+" ")])],1):t("el-form-item",{attrs:{label:e.$t("等级选择："),prop:"case_erp_supplierrisk_f_FinalState"}},[t("l-radio",{attrs:{options:e.case_erp_supplierrisk_f_FinalStateOptions},model:{value:e.formData.case_erp_supplierrisk_f_FinalState,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_FinalState",a)},expression:"formData.case_erp_supplierrisk_f_FinalState"}})],1),t("el-form-item",{attrs:{label:e.$t("评估理由："),prop:"case_erp_supplierrisk_f_FinalReason"}},[e.isReadOnly?t("div",[e._v(" "+e._s(e.formData.case_erp_supplierrisk_f_FinalReason)+" ")]):t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_supplierrisk_f_FinalReason,callback:function(a){e.$set(e.formData,"case_erp_supplierrisk_f_FinalReason",a)},expression:"formData.case_erp_supplierrisk_f_FinalReason"}})],1)],1)])],1)],1)},r=[],i=(t("96cf"),t("1da1")),l=window.$api.erpcase.supplier,p={props:{isReadOnly:{type:Boolean,default:!1},id:{},type:{}},data:function(){return{moduleCode:"ERP_Suppliers",formData:{case_erp_supplierrisk_f_CapacityLevel:"",case_erp_supplierrisk_f_CapacityReason:"",case_erp_supplierrisk_f_CapacityFile:"",case_erp_supplierrisk_f_SupplierLevel:"",case_erp_supplierrisk_f_SupplierReason:"",case_erp_supplierrisk_f_SupplierFile:"",case_erp_supplierrisk_f_SafetyLevel:"",case_erp_supplierrisk_f_SafetyReason:"",case_erp_supplierrisk_f_SafetyFile:"",case_erp_supplierrisk_f_FinalState:"",case_erp_supplierrisk_f_FinalReason:""},rules:{case_erp_supplierrisk_f_CapacityLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_CapacityReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SupplierLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SupplierReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_SafetyLevel:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_SafetyReason:[{required:!0,message:"请输入："}],case_erp_supplierrisk_f_FinalState:[{required:!0,message:"请选择："}],case_erp_supplierrisk_f_FinalReason:[{required:!0,message:"请输入："}]},loading:!0}},computed:{case_erp_supplierrisk_f_CapacityLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SupplierLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_SafetyLevelOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]},case_erp_supplierrisk_f_FinalStateOptions:function(){return[{label:"优秀",value:"0"},{value:"1",label:"良好"},{value:"2",label:"及格"},{value:"3",label:"不及格"}]}},created:function(){this.isReadOnly?this.loadFormData(this.id):this.loading=!1},methods:{resetForm:function(){this.$formClear(this.$refs.form)},validateForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(a.sent){a.next=4;break}return a.abrupt("return",!1);case 4:return a.abrupt("return",!0);case 5:case"end":return a.stop()}}),a)})))()},setForm:function(e){this.$setFormData(this.formData,e,"case_erp_supplierrisk")},getForm:function(){var e=this.$getFormData(this.formData,"case_erp_supplierrisk");return e.f_Type=this.type,e.f_SupplierId=this.id,e},loadFormData:function(e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.loading=!0,t.next=3,a.$awaitWraper(l.getAssess(e,a.type));case 3:s=t.sent,s&&(a.setForm(s),a.loading=!1);case 5:case"end":return t.stop()}}),t)})))()}}},_=p,o=(t("628f"),t("2877")),n=Object(o["a"])(_,s,r,!1,null,"1c144dd3",null);a["default"]=n.exports},e9f3:function(e,a,t){}}]);