"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[573],{65419:function(a){(function(e,n){a.exports=n()})(0,(function(){function a(a){var o=[];return a.AMapUI&&o.push(e(a.AMapUI)),a.Loca&&o.push(n(a.Loca)),Promise.all(o)}function e(a){return new Promise((function(e,n){var s=[];if(a.plugins)for(var p=0;p<a.plugins.length;p+=1)-1==i.AMapUI.plugins.indexOf(a.plugins[p])&&s.push(a.plugins[p]);if(t.AMapUI===o.failed)n("前次请求 AMapUI 失败");else if(t.AMapUI===o.notload){t.AMapUI=o.loading,i.AMapUI.version=a.version||i.AMapUI.version,p=i.AMapUI.version;var l=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+p+"/main.js",c.onerror=function(a){t.AMapUI=o.failed,n("请求 AMapUI 失败")},c.onload=function(){if(t.AMapUI=o.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var a=0,n=s.length;a<n;a++){var o=s[a].split("/").slice(-1)[0];window.AMapUI[o]=arguments[a]}for(e();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(e();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},l.appendChild(c)}else t.AMapUI===o.loaded?a.version&&a.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var a=0,n=s.length;a<n;a++){var o=s[a].split("/").slice(-1)[0];window.AMapUI[o]=arguments[a]}e()})):e():a.version&&a.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(a){a?n(a):s.length?window.AMapUI.loadUI(s,(function(){for(var a=0,n=s.length;a<n;a++){var o=s[a].split("/").slice(-1)[0];window.AMapUI[o]=arguments[a]}e()})):e()}))}))}function n(a){return new Promise((function(e,n){if(t.Loca===o.failed)n("前次请求 Loca 失败");else if(t.Loca===o.notload){t.Loca=o.loading,i.Loca.version=a.version||i.Loca.version;var s=i.Loca.version,p=i.AMap.version.startsWith("2"),l=s.startsWith("2");if(p&&!l||!p&&l)n("JSAPI 与 Loca 版本不对应！！");else{p=i.key,l=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+s+"&key="+p,c.onerror=function(a){t.Loca=o.failed,n("请求 AMapUI 失败")},c.onload=function(){for(t.Loca=o.loaded,e();r.Loca.length;)r.Loca.splice(0,1)[0]()},l.appendChild(c)}}else t.Loca===o.loaded?a.version&&a.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):e():a.version&&a.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):r.Loca.push((function(a){a?n(a):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(a){a.notload="notload",a.loading="loading",a.loaded="loaded",a.failed="failed"})(o||(o={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},r={AMap:[],AMapUI:[],Loca:[]},s=[],p=function(a){"function"==typeof a&&(t.AMap===o.loaded?a(window.AMap):s.push(a))};return{load:function(e){return new Promise((function(n,r){if(t.AMap==o.failed)r("");else if(t.AMap==o.notload){var l=e.key,c=e.version,d=e.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&r("禁止多种API加载方式混用"),i.key=l,i.AMap.version=c||i.AMap.version,i.AMap.plugins=d||i.AMap.plugins,t.AMap=o.loading,c=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)t.AMap=o.failed,r(i);else for(t.AMap=o.loaded,a(e).then((function(){n(window.AMap)}))["catch"](r);s.length;)s.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+l+"&plugin="+i.AMap.plugins.join(","),d.onerror=function(a){t.AMap=o.failed,r(a)},c.appendChild(d)):r("请填写key")}else if(t.AMap==o.loaded)if(e.key&&e.key!==i.key)r("多个不一致的 key");else if(e.version&&e.version!==i.AMap.version)r("不允许多个版本 JSAPI 混用");else{if(l=[],e.plugins)for(c=0;c<e.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(e.plugins[c])&&l.push(e.plugins[c]);l.length?window.AMap.plugin(l,(function(){a(e).then((function(){n(window.AMap)}))["catch"](r)})):a(e).then((function(){n(window.AMap)}))["catch"](r)}else if(e.key&&e.key!==i.key)r("多个不一致的 key");else if(e.version&&e.version!==i.AMap.version)r("不允许多个版本 JSAPI 混用");else{var u=[];if(e.plugins)for(c=0;c<e.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(e.plugins[c])&&u.push(e.plugins[c]);p((function(){u.length?window.AMap.plugin(u,(function(){a(e).then((function(){n(window.AMap)}))["catch"](r)})):a(e).then((function(){n(window.AMap)}))["catch"](r)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}))},30573:function(a,e,n){n.r(e),n.d(e,{default:function(){return u}});var o=function(){var a=this,e=a._self._c;return e("el-card",{attrs:{shadow:"never",header:"轨迹回放"}},[e("div",{ref:"trackMap",staticStyle:{"max-width":"800px",height:"300px"}}),e("div",{staticStyle:{"margin-top":"15px"}},[e("el-button",{attrs:{size:"small"},on:{click:a.startTrackAnim}},[a._v("开始移动")]),e("el-button",{attrs:{size:"small"},on:{click:a.pauseTrackAnim}},[a._v("暂停移动")]),e("el-button",{attrs:{size:"small"},on:{click:a.resumeTrackAnim}},[a._v("继续移动")])],1)])},i=[],t=n(65419),r=n.n(t),s=n(84496),p={name:"DemoTrack",data(){return{mapInsTrack:null,carMarker:null,lineData:[[116.478935,39.997761],[116.478939,39.997825],[116.478912,39.998549],[116.478912,39.998549],[116.478998,39.998555],[116.478998,39.998555],[116.479282,39.99856],[116.479658,39.998528],[116.480151,39.998453],[116.480784,39.998302],[116.480784,39.998302],[116.481149,39.998184],[116.481573,39.997997],[116.481863,39.997846],[116.482072,39.997718],[116.482362,39.997718],[116.483633,39.998935],[116.48367,39.998968],[116.484648,39.999861]]}},computed:{darkMode(){var a;return null===(a=this.$store)||void 0===a||null===(a=a.state)||void 0===a||null===(a=a.theme)||void 0===a?void 0:a.darkMode}},mounted(){this.renderTrackMap()},methods:{renderTrackMap(){r().load({key:s.NQ,version:"2.0",plugins:["AMap.MoveAnimation","AMap.Marker","AMap.Polyline"]}).then((a=>{const e={zoom:17,center:[116.478935,39.997761]};this.darkMode&&(e.mapStyle="amap://styles/dark"),this.mapInsTrack=new a.Map(this.$refs.trackMap,e),this.carMarker=new a.Marker({map:this.mapInsTrack,position:[116.478935,39.997761],icon:"https://a.amap.com/jsapi_demos/static/demo-center-v2/car.png",offset:new a.Pixel(-13,-26)}),new a.Polyline({map:this.mapInsTrack,path:this.lineData,showDir:!0,strokeColor:"#28F",strokeOpacity:1,strokeWeight:6});const n=new a.Polyline({map:this.mapInsTrack,showDir:!0,strokeColor:"#4B5",strokeOpacity:1,strokeWeight:6});this.carMarker.on("moving",(function(a){n.setPath(a.passedPath)})),this.mapInsTrack.setFitView()})).catch((a=>{console.error(a)}))},startTrackAnim(){this.carMarker&&(this.carMarker.stopMove(),this.carMarker.moveAlong(this.lineData,{duration:200,autoRotation:!0}))},pauseTrackAnim(){this.carMarker&&this.carMarker.pauseMove()},resumeTrackAnim(){this.carMarker&&this.carMarker.resumeMove()}},watch:{darkMode(a){this.mapInsTrack&&(a?this.mapInsTrack.setMapStyle("amap://styles/dark"):this.mapInsTrack.setMapStyle("amap://styles/normal"))}},unmounted(){this.mapInsTrack&&this.mapInsTrack.destroy(),this.carMarker=null}},l=p,c=n(64008),d=(0,c.A)(l,o,i,!1,null,null,null),u=d.exports}}]);