(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views-components-index"],{"29a1":function(t,e,a){},a7f2:function(t,e,a){"use strict";a("29a1")},d288:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.lr_loadPage?t._e():a("l-layout",{staticClass:"l-tab-page",scopedSlots:t._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.$t("分类"))+" "),a("div",{staticClass:"tree-setting-btn"},[a("el-tooltip",{attrs:{effect:"dark",content:t.$t("设置"),placement:"top"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-setting"},on:{click:t.handleSettingClick}})],1)],1)]},proxy:!0}],null,!1,1993193793)},[a("div",{staticClass:"l-rblock",staticStyle:{"padding-bottom":"32px"}},[a("div",{staticClass:"l-rblock",staticStyle:{overflow:"hidden auto"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{data:t.treeShowData,"expand-on-click-node":!1},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return a("span",{staticClass:"lr-tree-node"},[a("i",{staticClass:"el-icon-notebook-2"}),t._v(" "+t._s(n.label)+" ")])}}],null,!1,1970407520)})],1),a("div",{staticClass:"l-bottom"},[a("el-input",{attrs:{placeholder:t.$t("请输入名称"),size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hanleSearchCategory.apply(null,arguments)}},model:{value:t.searchCategoryWord,callback:function(e){t.searchCategoryWord=e},expression:"searchCategoryWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.hanleSearchCategory},slot:"append"})],1)],1)])])]},proxy:!0}],null,!1,1765622914)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:t._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:t.$t("请输入名称"),size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hanleSearch.apply(null,arguments)}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{btnText:t.$t("新增")},on:{click:function(e){return t.handleAdd()}}})]},proxy:!0}],null,!1,2116855928)},[a("l-table",{attrs:{loading:t.tableLoading,columns:t.columns,dataSource:t.tableData,"row-key":"F_Id",isPage:!0,pageTotal:t.tableTotal,tablePage:t.tableCurrentPage},on:{"update:tablePage":function(e){t.tableCurrentPage=e},"update:table-page":function(e){t.tableCurrentPage=e},loadPageData:t.turnTablePage}},[a("l-table-btns",{attrs:{btns:t.tableBtns},on:{click:t.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{width:900,height:750,visible:t.formVisible,title:t.formTitle},on:{"update:visible":function(e){t.formVisible=e},ok:t.handleSave,close:t.handleCloseForm,opened:t.handleOpenedForm}},[a("visual-form",{ref:"form",attrs:{categoryData:t.treeData}})],1),a("l-dialog",{attrs:{width:780,height:500,visible:t.componentVisible,title:t.$t("预览组件"),hasBtns:!1},on:{"update:visible":function(e){t.componentVisible=e}}},[a("div",{staticStyle:{overflow:"hidden auto",height:"100%",padding:"20px","box-sizing":"border-box"}},[a("avue-echart-vue",{attrs:{option:t.vueOption,width:"100%",height:"100%"}})],1)]),a("l-drawer",{attrs:{title:t.$t("分类管理"),visible:t.categoryVisible,showOk:!1,showClose:!1,size:"800px"},on:{"update:visible":function(e){t.categoryVisible=e}}},[a("l-dataitem-index",{attrs:{classifyCode:"ComponentType"}})],1)],1)},o=[],r=(a("4de4"),a("159b"),a("96cf"),a("1da1")),i=a("3c3c"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"mini","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("组件编码"),prop:"lr_datav_component_f_Code"}},[a("el-input",{model:{value:t.formData.lr_datav_component_f_Code,callback:function(e){t.$set(t.formData,"lr_datav_component_f_Code",e)},expression:"formData.lr_datav_component_f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("组件分类"),prop:"lr_datav_component_f_Type"}},[a("l-tree-select",{attrs:{options:t.categoryData},model:{value:t.formData.lr_datav_component_f_Type,callback:function(e){t.$set(t.formData,"lr_datav_component_f_Type",e)},expression:"formData.lr_datav_component_f_Type"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("组件名称"),prop:"lr_datav_component_f_Name"}},[a("el-input",{model:{value:t.formData.lr_datav_component_f_Name,callback:function(e){t.$set(t.formData,"lr_datav_component_f_Name",e)},expression:"formData.lr_datav_component_f_Name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("组件数据"),prop:"lr_datav_componentdetail_f_Component"}},[a("l-code-mirror",{staticStyle:{height:"360px"},model:{value:t.formData.lr_datav_componentdetail_f_Component,callback:function(e){t.$set(t.formData,"lr_datav_componentdetail_f_Component",e)},expression:"formData.lr_datav_componentdetail_f_Component"}})],1)],1),a("el-col",[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check"},on:{click:t.handleOption}},[t._v(t._s(t.$t("运行")))])],1)],1),a("el-col",[a("el-form-item",{attrs:{label:t.$t("组件预览"),prop:"f_View"}},[a("avue-echart-vue",{attrs:{option:t.vueOption,width:"100%",height:"100%"}})],1)],1)],1)],1)},s=[],c=window.$api.vdata.component,d={components:{AvueEchartVue:i["default"]},props:{categoryData:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{rules:{lr_datav_component_f_Code:[{required:!0,message:this.$t("请输入编号"),trigger:"blur"},{validator:this.lr_existDbFiled,keyValue:function(){return t.formData.lr_datav_component_f_Id},tableName:"lr_datav_coment",fieldName:"f_Code",keyName:"f_Id",trigger:"null"}],lr_datav_component_f_Name:[{required:!0,message:this.$t("请输入组件名称")}],lr_datav_component_f_Type:[{required:!0,message:this.$t("请选择分组"),trigger:"blur"}]},formData:{lr_datav_component_f_Id:"",lr_datav_component_f_Code:"",lr_datav_component_f_Name:"",lr_datav_component_f_Type:"",lr_datav_componentdetail_f_Component:""},vueOption:{}}},created:function(){},methods:{resetForm:function(){this.formData.lr_datav_component_f_Id="",this.formData.lr_datav_componentdetail_f_ComponentId="",this.formData.lr_datav_componentdetail_f_Id="",this.vueOption={},this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$formValidateWraper(t.$refs.form);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})))()},setForm:function(t){this.$setFormData(this.formData,t.lrDatavComponentEntity,"lr_datav_component"),this.$setFormData(this.formData,t.lrDatavComponentdetailEntity,"lr_datav_componentdetail")},getForm:function(){var t={};return t.lrDatavComponentEntity=this.$getFormData(this.formData,"lr_datav_component"),t.lrDatavComponentdetailEntity=this.$getFormData(this.formData,"lr_datav_componentdetail"),t},handleOption:function(){this.$set(this.vueOption,"f_Content",this.formData.lr_datav_componentdetail_f_Component)},loadFormData:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.keyValue,a.next=3,e.$awaitWraper(c.get(n));case 3:if(o=a.sent,!o){a.next=9;break}return e.setForm(o),a.abrupt("return",!0);case 9:return a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()},saveForm:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.keyValue,o=t.isEdit,r=e.getForm(),!o){a.next=8;break}return a.next=5,e.$awaitWraper(c.update(n,r));case 5:return a.abrupt("return",a.sent);case 8:return r.lrDatavComponentEntity.f_Id=n,a.next=11,e.$awaitWraper(c.add(r));case 11:return a.abrupt("return",a.sent);case 12:case"end":return a.stop()}}),a)})))()}}},u=d,p=a("2877"),m=Object(p["a"])(u,l,s,!1,null,null,null),f=m.exports,h=window.$api.vdata.component,_={components:{visualForm:f,AvueEchartVue:i["default"]},props:{menu:{type:Boolean,default:!0}},data:function(){return{treeLoading:!1,treeData:[],treeShowData:[],vueOption:{},tableData:[],formEdit:!1,formEditRow:null,keyWord:"",tableLoading:!1,tableTotal:0,tableCurrentPage:1,columns:[{label:"组件编码",prop:"f_Code",minWidth:"150"},{label:"组件名称",prop:"f_Name",minWidth:"150"}],tableBtns:[{prop:"Edit",label:"编辑",width:60},{prop:"Delete",label:"删除",width:60},{prop:"ShowDrawer",label:"预览",width:60}],option:{tip:!1,header:!0,menu:!0,selection:!0,dialogWidth:"70%",labelWidth:100,index:!0,align:"center",headerAlign:"center",column:[{label:"组件名称",prop:"name",row:!0,rules:[{required:!0,message:"请输入组件名称",trigger:"blur"}]},{label:"组件数据",prop:"content",span:24,hide:!0},{label:"组件预览",prop:"view",span:24,hide:!0}]},preVisible:!1,categoryVisible:!1,categoryId:"",searchCategoryWord:"",formVisible:!1,formTitle:"",tablePageSize:50,componentVisible:!1}},created:function(){this.loadTablePageData()},mounted:function(){this.lr_loadDataItem("ComponentType")},watch:{dataItemTree_Function:{handler:function(t){this.treeData=t,this.treeShowData=t},immediate:!0,deep:!0}},computed:{dataItemTree_Function:function(){return this.lr_dataItemTree(this.lr_dataItem["ComponentType"])}},methods:{refreshCategory:function(t){var e=this;this.searchCategoryWord="",this.treeData=[],t.forEach((function(t){e.treeData.push({value:t.value,label:t.label})})),this.treeShowData=this.treeData},hanleSearch:function(){this.loadTablePageData()},loadTablePageData:function(t){var e=this;t||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,f_Type:this.categoryId,keyword:this.keyWord};h.getPage(a).then((function(t){var a=e.$deepClone(t.data.data);e.tableData=a.rows,e.tableTotal=a.records,e.tableLoading=!1})).catch((function(){e.tableData=[],e.tableLoading=!1}))},handleAdd:function(){this.formEdit=!1,this.showForm("新增")},turnTablePage:function(t){var e=t.rows;this.tablePageSize=e,this.loadTablePageData(!0)},handleEdit:function(t,e){this.formEdit=!0,this.formEditRow=e,this.showForm("编辑")},handleDelete:function(t,e){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){h.delObj(e.f_Id).then((function(){a.$message({type:"success",message:a.$t("删除成功!")}),a.loadTablePageData()})).catch((function(){}))}))},handleSettingClick:function(){this.categoryVisible=!0},handleNodeClick:function(t){this.categoryId=t.value,this.loadTablePageData()},hanleSearchCategory:function(){var t=this;this.searchCategoryWord?this.treeShowData=this.treeData.filter((function(e){return e.label.indexOf(t.searchCategoryWord)>-1})):this.treeShowData=this.treeData},showForm:function(t){this.loadCategory(),this.formTitle=t,this.formVisible=!0},loadCategory:function(){var t=this;this.treeData=[],this.lr_dataItemTree(this.lr_dataItem["ComponentType"]).forEach((function(e){t.treeData.push({value:e.value,label:e.label})}))},handleSave:function(t,e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t("保存数据中..."),n.next=3,a.$refs.form.validateForm();case 3:if(!n.sent){n.next=8;break}return n.next=6,a.$refs.form.saveForm({keyValue:a.formEdit?a.formEditRow.f_Id:"",isEdit:a.formEdit});case 6:o=n.sent,o&&(r=a.formEdit?a.$t("更新成功!"):a.$t("新增成功!"),a.$message({type:"success",message:a.$t(r)}),a.loadTablePageData(),a.formVisible=!1);case 8:e();case 9:case"end":return n.stop()}}),n)})))()},handleCloseForm:function(){this.$refs.form.resetForm()},handleOpenedForm:function(t,e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a.formEdit){n.next=5;break}return t("加载数据中..."),n.next=4,a.$refs.form.loadFormData({keyValue:a.formEditRow.f_Id});case 4:e();case 5:case"end":return n.stop()}}),n)})))()},handleShowDrawer:function(t,e){this.$set(this.vueOption,"f_Content",e.lrDatavComponentdetail_F_Component),this.componentVisible=!0}}},b=_,v=(a("a7f2"),Object(p["a"])(b,n,o,!1,null,"0cd011ac",null));e["default"]=v.exports}}]);