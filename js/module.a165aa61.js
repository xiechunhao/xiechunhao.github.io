(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["module","module-form"],{"083f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-auto-window",staticStyle:{padding:"8px","padding-bottom":"0"}},[a("el-tabs",{attrs:{type:"card","before-leave":e.handleTabBeforeLeave},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("基础信息"),name:"base"}},[a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"60px"}},[e.lr_hasPageAuth("f_EnCode")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("编号"),prop:"f_EnCode"}},[a("el-input",{model:{value:e.formData.f_EnCode,callback:function(t){e.$set(e.formData,"f_EnCode",t)},expression:"formData.f_EnCode"}})],1)],1):e._e(),e.lr_hasPageAuth("f_FullName")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_FullName"}},[a("el-input",{model:{value:e.formData.f_FullName,callback:function(t){e.$set(e.formData,"f_FullName",t)},expression:"formData.f_FullName"}})],1)],1):e._e(),e.lr_hasPageAuth("f_ParentId")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("上级"),prop:"f_ParentId"}},[a("l-tree-select",{attrs:{options:e.modulesExpandTree},model:{value:e.formData.f_ParentId,callback:function(t){e.$set(e.formData,"f_ParentId",t)},expression:"formData.f_ParentId"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Icon")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("图标"),prop:"f_Icon"}},[a("l-input-icon",{attrs:{iconList:e.lr_icons},model:{value:e.formData.f_Icon,callback:function(t){e.$set(e.formData,"f_Icon",t)},expression:"formData.f_Icon"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Target")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("目标"),prop:"f_Target"}},[a("el-select",{attrs:{placeholder:e.$t("请选择")},model:{value:e.formData.f_Target,callback:function(t){e.$set(e.formData,"f_Target",t)},expression:"formData.f_Target"}},e._l(e.f_TargetOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),e.lr_hasPageAuth("f_SortCode")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("排序"),prop:"f_SortCode"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.formData.f_SortCode,callback:function(t){e.$set(e.formData,"f_SortCode",t)},expression:"formData.f_SortCode"}})],1)],1):e._e(),e.lr_hasPageAuth("f_UrlAddress")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("地址"),prop:"f_UrlAddress"}},[a("el-input",{model:{value:e.formData.f_UrlAddress,callback:function(t){e.$set(e.formData,"f_UrlAddress",t)},expression:"formData.f_UrlAddress"}})],1)],1):e._e(),e.lr_hasPageAuth("f_IsMenu")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("菜单"),prop:"f_IsMenu"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_IsMenu,callback:function(t){e.$set(e.formData,"f_IsMenu",t)},expression:"formData.f_IsMenu"}})],1)],1):e._e(),e.lr_hasPageAuth("f_EnabledMark")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("状态"),prop:"f_EnabledMark"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_EnabledMark,callback:function(t){e.$set(e.formData,"f_EnabledMark",t)},expression:"formData.f_EnabledMark"}})],1)],1):e._e(),e.lr_hasPageAuth("f_Description")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("描述"),prop:"f_Description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1):e._e()],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("按钮信息"),name:"btninfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加按钮"),dataSource:e.formButtons},on:{addRow:e.handleAddButton,deleteRow:e.handleDeleteButton}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("列表信息"),name:"colinfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加列表字段"),dataSource:e.formColumns},on:{addRow:e.handleAddColumns,deleteRow:e.handleDeleteColumns}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:e.$t("表单信息"),name:"forminfo"}},[a("div",{staticClass:"l-from-table-body"},[a("l-edit-table",{attrs:{addBtnText:e.$t("添加表单字段"),dataSource:e.formForms},on:{addRow:e.handleAddForms,deleteRow:e.handleDeleteForms}},[a("el-table-column",{attrs:{prop:"f_FullName",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_FullName,callback:function(a){e.$set(t.row,"f_FullName",a)},expression:"scope.row.f_FullName"}})]}}])}),a("el-table-column",{attrs:{prop:"f_EnCode",label:e.$t("编号"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("请输入")},model:{value:t.row.f_EnCode,callback:function(a){e.$set(t.row,"f_EnCode",a)},expression:"scope.row.f_EnCode"}})]}}])})],1)],1)])],1)],1)},n=[],l=(a("a434"),a("d3b7"),a("159b"),a("5530")),r=a("5880"),i={props:{f_ParentId:String},watch:{f_ParentId:function(e){this.formData.f_ParentId=e}},created:function(){this.formData.f_ParentId=this.f_ParentId},data:function(){var e=this;return{activeName:"base",f_TargetOptions:[{value:"expand",label:this.$t("菜单目录")},{value:"view",label:this.$t("功能页面")},{value:"groupView",label:this.$t("集合页面")},{value:"blankView",label:this.$t("独立页面")}],formData:{f_EnCode:"",f_FullName:"",f_ParentId:"",f_Icon:"learun-icon-star",f_Target:"",f_IsMenu:1,f_EnabledMark:1,f_SortCode:"",f_UrlAddress:"",f_Description:""},rules:{f_EnCode:[{required:!0,message:this.$t("请输入编号")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_ModuleId},tableName:"lr_base_module",keyName:"f_ModuleId",trigger:"null"}],f_FullName:[{required:!0,message:this.$t("请输入名称")}],f_Target:[{required:!0,message:this.$t("请选择目标")}]},formButtons:[],formColumns:[],formForms:[]}},computed:Object(l["a"])({},Object(r["mapGetters"])(["modulesExpandTree"])),methods:{resetForm:function(){this.activeName="base",this.$refs.form&&this.$refs.form.resetFields(),this.formButtons=[],this.formColumns=[],this.formForms=[]},validateForm:function(e){var t=this;this.$refs.form.validate((function(a){a?"view"==t.formData.f_Target&&t.$validatenull(t.formData.f_UrlAddress)?(t.$message({message:t.$t("请填写地址信息！"),type:"error"}),e(!1)):e(!0):e(!1)}))},setForm:function(e){this.formData=e.baseInfo,this.formButtons=e.buttons,this.formColumns=e.columns,this.formForms=e.forms},getForm:function(){var e=[];this.formButtons.forEach((function(t){t.f_EnCode&&t.f_FullName&&e.push(t)}));var t=[];this.formColumns.forEach((function(e){e.f_EnCode&&e.f_FullName&&t.push(e)}));var a=[];this.formForms.forEach((function(e){e.f_EnCode&&e.f_FullName&&a.push(e)}));var o={baseInfo:this.$deepClone(this.formData),buttons:e,columns:t,forms:a};return o},handleTabBeforeLeave:function(e,t){var a=this;return new Promise((function(e,o){"base"==t?a.$refs.form.validate((function(t){t?"view"!=a.formData.f_Target?(a.$message({message:a.$t("只有功能页面能添加按钮/列表/表单信息！"),type:"warning"}),o()):e():(a.$message({message:a.$t("请先填写完整信息！"),type:"warning"}),o())})):e()}))},handleAddButton:function(){this.formButtons.push({f_FullName:"",f_EnCode:""})},handleDeleteButton:function(e){this.formButtons.splice(e.index,1)},handleAddColumns:function(){this.formColumns.push({f_FullName:"",f_EnCode:""})},handleDeleteColumns:function(e){this.formColumns.splice(e.index,1)},handleAddForms:function(){this.formForms.push({f_FullName:"",f_EnCode:""})},handleDeleteForms:function(e){this.formForms.splice(e.index,1)}}},s=i,c=a("2877"),f=Object(c["a"])(s,o,n,!1,null,null,null);t["default"]=f.exports},"26f1a":function(e,t,a){"use strict";a("53c0")},"39e5":function(e,t,a){"use strict";a("c09d")},"53c0":function(e,t,a){},7065:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-desktop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.steps(0),expression:"steps(0)"}],staticClass:"l-rblock",staticStyle:{padding:"24px"}},[a("div",{staticClass:"l-page-panel"},[a("el-form",{ref:"baseInfo",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"86px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("编号"),prop:"f_Code"}},[a("el-input",{model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_Title"}},[a("el-input",{model:{value:e.formData.f_Title,callback:function(t){e.$set(e.formData,"f_Title",t)},expression:"formData.f_Title"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("图标"),prop:"f_Icon"}},[a("l-input-icon",{attrs:{iconList:e.lr_icons},model:{value:e.formData.f_Icon,callback:function(t){e.$set(e.formData,"f_Icon",t)},expression:"formData.f_Icon"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("上级"),prop:"f_PModuleId"}},[a("l-tree-select",{attrs:{options:e.modulesExpandTree},model:{value:e.formData.f_PModuleId,callback:function(t){e.$set(e.formData,"f_PModuleId",t)},expression:"formData.f_PModuleId"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("排序"),prop:"f_SortCode"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.formData.f_SortCode,callback:function(t){e.$set(e.formData,"f_SortCode",t)},expression:"formData.f_SortCode"}})],1)],1),a("el-col",{attrs:{span:24}},[1==e.type?a("el-form-item",{attrs:{label:e.$t("轮播时间(s)"),prop:"f_Interval"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.formData.f_Interval,callback:function(t){e.$set(e.formData,"f_Interval",t)},expression:"formData.f_Interval"}})],1):e._e()],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("菜单"),prop:"f_IsMenu"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_IsMenu,callback:function(t){e.$set(e.formData,"f_IsMenu",t)},expression:"formData.f_IsMenu"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("状态"),prop:"f_Status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_Status,callback:function(t){e.$set(e.formData,"f_Status",t)},expression:"formData.f_Status"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("描述"),prop:"f_Description"}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.steps(1),expression:"steps(1)"}],staticClass:"l-rblock"},[0==e.type?a("iframe",{attrs:{src:e.rootUrl+"vdata/preview?id="+e.formData.f_Id,frameborder:"0",width:"100%",height:"100%"}}):a("div",{staticClass:"swiperPre"},[a("el-carousel",{attrs:{height:"100%",interval:1e3*e.formData.f_Interval||0,"indicator-position":"none",autoplay:!!e.formData.f_Interval}},e._l(e.ids,(function(t){return a("el-carousel-item",{key:t},[a("iframe",{attrs:{src:e.rootUrl+"vdata/preview?id="+t,frameborder:"0",width:"100%",height:"100%"}})])})),1)],1)])])},n=[],l=(a("99af"),a("a9e3"),a("d3b7"),a("5530")),r=a("5880"),i={props:{stepActive:{type:Number,default:0},type:{type:Number,default:0},ids:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{formData:{f_Type:1,f_Code:"",f_Title:"",f_Icon:"learun-icon-computer",f_PModuleId:"",f_ModuleId:"",f_SortCode:"",f_Interval:1,f_IsMenu:1,f_Status:1,f_IsFirst:1,f_Description:"",f_Id:"",lrDatavVisualconfigList:[]},rules:{f_Code:[{required:!0,message:this.$t("请输入编号"),trigger:"blur"},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_ModuleId},tableName:"lr_datav_visual",fieldName:"f_Code",keyName:"f_ModuleId",trigger:"null"}],f_Title:[{required:!0,message:this.$t("请输入名称"),trigger:"blur"}],f_Icon:[{required:!0,message:this.$t("请选择图标"),trigger:"blur"}],f_PModuleId:[{required:!0,message:this.$t("请输入上级"),trigger:"blur"}]},layout:[]}},computed:Object(l["a"])({},Object(r["mapGetters"])(["modulesExpandTree"])),mounted:function(){},methods:{resetForm:function(){this.formData={f_Type:1,f_Code:"",f_Title:"",f_Icon:"learun-icon-computer",f_PModuleId:"",f_ModuleId:"",f_SortCode:"",f_Interval:1,f_IsMenu:1,f_Status:1,f_IsFirst:1,f_Description:"",f_Id:"",lrDatavVisualconfigList:[]}},steps:function(e){return this.stepActive==e},getForm:function(){var e={};if(0===this.type)e={lrDatavVisualEntity:this.$deepClone(this.formData),lrDatavVisualconfigList:this.lrDatavVisualconfigList},e.moduleEntity={f_EnCode:e.lrDatavVisualEntity.f_Code,f_FullName:e.lrDatavVisualEntity.f_Title,f_ParentId:e.lrDatavVisualEntity.f_PModuleId,f_Icon:e.lrDatavVisualEntity.f_Icon,f_Target:"datavView",f_IsMenu:e.lrDatavVisualEntity.f_IsMenu||0,f_DeleteMark:0,f_UrlAddress:"".concat(this.rootUrl,"vdata/preview?id=").concat(this.formData.f_Id),f_EnabledMark:e.lrDatavVisualEntity.f_Status,f_SortCode:e.lrDatavVisualEntity.f_SortCode,f_Description:e.lrDatavVisualEntity.f_Description};else{var t=this.$deepClone(this.formData);e={baseInfo:{f_ParentId:t.f_PModuleId,f_EnCode:t.f_Code,f_FullName:t.f_Title,f_Icon:t.f_Icon,f_UrlAddress:"".concat(this.rootUrl,"vdata/swiperPreview?ids=").concat(JSON.stringify(this.ids),"&interval=").concat(this.formData.f_Interval),f_Target:"datavSwiperView",f_IsMenu:t.f_IsMenu||0,f_AllowExpand:0,f_IsPublic:0,f_AllowEdit:0,f_AllowDelete:0,f_SortCode:t.f_SortCode,f_DeleteMark:0,f_EnabledMark:t.f_Status,f_Description:t.f_Description}}}return e},setForm:function(e,t){1==t?this.formData=Object(l["a"])(Object(l["a"])({},e),{},{f_Code:e.f_EnCode,f_Title:e.f_FullName,f_PModuleId:e.f_ParentId,f_Status:e.f_EnabledMark,f_Interval:e.f_Interval}):(this.lrDatavVisualconfigList=e.lrDatavVisualconfigList,this.formData=e.lrDatavVisualEntity,this.formData.f_IsMenu=null==this.formData.f_IsMenu?1:this.formData.f_IsMenu,null===e.lrDatavVisualEntity.f_Icon&&(this.formData.f_Icon="learun-icon-computer"))},validateBaseInfo:function(){var e=this;return new Promise((function(t){e.$refs.baseInfo.validate((function(e){t(!!e)}))}))},validateSteps:function(){var e=this;return new Promise((function(t){e.validateBaseInfo().then((function(e){t(e)}))}))}}},s=i,c=(a("26f1a"),a("2877")),f=Object(c["a"])(s,o,n,!1,null,null,null);t["a"]=f.exports},"7d1c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page",scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticClass:"l-panel-overflow",staticStyle:{"padding-right":"0"},attrs:{title:e.$t("功能目录")}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"learun-tree",attrs:{data:e.modulesExpandTree,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,n=t.data;return a("span",{staticClass:"lr-tree-node"},[a("i",{class:n.icon}),e._v(" "+e._s(e.$t(o.label))+" ")])}}],null,!1,3179785476)})],1)]},proxy:!0}],null,!1,3027224936)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入编码/名称"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{on:{click:function(t){return e.handleAdd()}}},[a("l-excel-btns")],1)]},proxy:!0}],null,!1,3991047251)},[a("l-table",{attrs:{columns:e.lr_getPageColumns(e.columns),dataSource:e.searchTableData||e.tableData,loading:e.loading},scopedSlots:e._u([{key:"f_EnabledMark",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleEnableChange(t.row)}},model:{value:t.row.f_EnabledMark,callback:function(a){e.$set(t.row,"f_EnabledMark",a)},expression:"scope.row.f_EnabledMark"}})]}}],null,!1,2974089236)},[a("l-table-btns",{attrs:{filterBtns:e.filterBtns,btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,height:440},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form",attrs:{f_ParentId:e.currentModuleId}})],1),a("l-fullscreen-dialog",{attrs:{title:""+e.$t("功能设计"),headerMidWidth:320,visible:e.custmerFormVisible,isStep:!0,steps:[e.$t("基本配置"),e.$t("页面设计")],stepActive:e.stepActive,validateSteps:e.handleValidateSteps},on:{"update:visible":function(t){e.custmerFormVisible=t},"update:stepActive":function(t){e.stepActive=t},"update:step-active":function(t){e.stepActive=t},ok:e.handleCustmerFormSave,closed:e.handleCustmerFormClosed,opened:e.handleCustmerFormOpened}},[a("custmer-form",{ref:"custmerForm",attrs:{stepActive:e.stepActive}})],1),a("l-fullscreen-dialog",{attrs:{title:e.$t(e.formTitle),headerMidWidth:320,visible:e.deskVisible,isStep:!0,steps:[e.$t("基本配置"),e.$t("桌面设计")],stepActive:e.deskStepActive,validateSteps:e.handleDeskValidateSteps},on:{"update:visible":function(t){e.deskVisible=t},"update:stepActive":function(t){e.deskStepActive=t},"update:step-active":function(t){e.deskStepActive=t},ok:e.handleDeskSave,closed:e.handleDeskCloseForm,opened:e.handleDeskOpenedForm}},[a("desk-form",{ref:"deskform",attrs:{stepActive:e.deskStepActive}})],1),a("l-fullscreen-dialog",{attrs:{title:""+e.$t("预览配置"),headerMidWidth:320,visible:e.BIVisible,isStep:!0,steps:[e.$t("基本配置"),e.$t("大屏预览")],stepActive:e.BIStepActive,validateSteps:e.handleBIValidateSteps},on:{"update:visible":function(t){e.BIVisible=t},"update:stepActive":function(t){e.BIStepActive=t},"update:step-active":function(t){e.BIStepActive=t},ok:e.handleBISave,closed:e.handleBICloseForm,opened:e.handleBIOpenedForm}},[a("preview-form",{ref:"preForm",attrs:{stepActive:e.BIStepActive}})],1),a("l-fullscreen-dialog",{attrs:{title:""+e.$t("预览配置"),headerMidWidth:320,visible:e.swiperVisible,isStep:!0,steps:[e.$t("基本配置"),e.$t("大屏预览")],stepActive:e.swiperStepActive,validateSteps:e.handleSwiperValidateSteps},on:{"update:visible":function(t){e.swiperVisible=t},"update:stepActive":function(t){e.swiperStepActive=t},"update:step-active":function(t){e.swiperStepActive=t},ok:e.handleSwiperSave,closed:e.handleSwiperCloseForm,opened:e.handleSwiperOpenedForm}},[a("preview-form",{ref:"preForm",attrs:{stepActive:e.swiperStepActive,ids:e.checkArr,type:1}})],1)],1)},n=[],l=(a("99af"),a("4de4"),a("a434"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),r=a("5530"),i=a("5880"),s=a("f5b0"),c=a("5e02"),f=a("7065"),d=a("083f"),u=window.$api.custmerForm.module,p=window.$api.desktop.setting,m=window.$api.vdata.visual,h={inject:["admin"],components:{MyForm:d["default"],CustmerForm:s["a"],DeskForm:c["a"],PreviewForm:f["a"]},data:function(){return{lr_isPage:!0,searchWord:"",searchTableData:null,loading:!1,columns:[{label:"编号",prop:"f_EnCode",width:"160",isNotAutoWrap:!0},{label:"名称",prop:"f_FullName",width:"140"},{label:"地址",prop:"f_UrlAddress",minWidth:"160",isNotAutoWrap:!0},{label:"目标",prop:"f_Target",width:"100",align:"center",formatter:function(e){var t=e.cellValue;switch(t){case"expand":return"菜单目录";case"view":return"功能页面";case"groupView":return"集合页面";case"custmerForm":return"自定义功能";case"desktop1":case"desktop0":return"桌面设计";case"datavView":return"BI大屏";case"datavSwiperView":return"轮播大屏";default:return t}}},{label:"排序",prop:"f_SortCode",width:"64",align:"center"},{label:"状态",prop:"f_EnabledMark",width:"64",align:"center"}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:40},{prop:"Delete",label:this.$t("删除"),width:40}],currentModuleId:"0",formVisible:!1,formTitle:"",formEditRow:null,isEdit:!1,custmerFormVisible:!1,stepActive:0,deskVisible:!1,deskStepActive:0,deskId:"",BIVisible:!1,BIStepActive:0,swiperVisible:!1,swiperStepActive:0,checkArr:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(i["mapGetters"])(["modulesExpandTree","modulesGroup"])),{},{tableData:function(){var e=this.modulesGroup[this.currentModuleId]||[];return e}}),mounted:function(){this.updateModules()},methods:{updateModules:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("system/module/getList");case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},hanleSearch:function(){var e=this;this.searchWord?this.searchTableData=this.tableData.filter((function(t){return t.f_FullName.indexOf(e.searchWord)>-1||t.f_EnCode.indexOf(e.searchWord)>-1})):this.searchTableData=null},handleNodeClick:function(e){this.currentModuleId=e.id},removeTableData:function(e){if(this.searchTableData){if(!this.$validatenull(this.modulesGroup[this.searchTableData[e].f_ModuleId]))return this.$message({type:"warning",message:this.$t("有子菜单无法删除!")}),!1;this.searchTableData.splice(e,1)}else{if(!this.$validatenull(this.modulesGroup[this.modulesGroup[this.currentModuleId][e].f_ModuleId]))return this.$message({type:"warning",message:this.$t("有子菜单无法删除!")}),!1;this.modulesGroup[this.currentModuleId].splice(e,1)}return!0},handleEnableChange:function(e){var t=this;"custmerForm"==e.f_Target?u.updateState2(e.f_ModuleId,e.f_EnabledMark).then((function(){t.$message({type:"success",message:t.$t("更新成功!")}),t.updateModules()})):-1!=e.f_Target.indexOf("desktop")?p.updateStateByModuleId(e.f_ModuleId,e.f_EnabledMark).then((function(){t.$message({type:"success",message:t.$t("更新成功!")}),t.updateModules()})):"datavView"==e.f_Target?m.updateStateByModuleId(e.f_ModuleId,e.f_EnabledMark).then((function(){t.$message({type:"success",message:t.$t("更新成功!")}),t.updateModules()})):this.$store.dispatch("system/module/updateState",{id:e.f_ModuleId,state:e.f_EnabledMark}).then((function(){t.$message({type:"success",message:t.$t("更新成功!")})}))},handleAdd:function(){this.isEdit=!1,this.showForm("新增功能")},handleEdit:function(e,t){this.formEditRow=t,"custmerForm"==t.f_Target?this.custmerFormVisible=!0:-1!=t.f_Target.indexOf("desktop")?(this.formTitle="".concat(this.$t("编辑移动桌面"),"-").concat(t.f_FullName),this.deskVisible=!0):"datavView"==t.f_Target?this.BIVisible=!0:"datavSwiperView"==t.f_Target?this.swiperVisible=!0:(this.isEdit=!0,this.showForm("编辑功能"))},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){"custmerForm"==t.f_Target?u.removeByModuleId(t.f_ModuleId).then((function(){a.$message({type:"success",message:a.$t("删除成功!")}),a.updateModules()})):-1!=t.f_Target.indexOf("desktop")?p.removeByModuleId(t.f_ModuleId).then((function(){a.$message({type:"success",message:a.$t("删除成功!")}),a.updateModules()})):a.removeTableData(e)&&a.$store.dispatch("system/module/remove",t.f_ModuleId).then((function(){a.$message({type:"success",message:a.$t("删除成功!")})}))})).catch((function(){a.$message({type:"info",message:a.$t("已取消删除")})}))},handleSave:function(e,t){var a=this;e(),this.$refs.form.validateForm((function(e){if(e){var o=a.$refs.form.getForm();a.isEdit?a.$store.dispatch("system/module/update",{id:a.formEditRow.f_ModuleId,formData:o}).then((function(){t(),a.formVisible=!1,a.$message({type:"success",message:a.$t("更新成功!")})})).catch((function(){t()})):a.$store.dispatch("system/module/add",o).then((function(){t(),a.formVisible=!1,a.$message({type:"success",message:a.$t("添加成功!")})})).catch((function(){t()}))}else t()}))},handleOpenedForm:function(e,t){var a=this;this.isEdit&&(e("加载数据中..."),this.$store.dispatch("system/module/get",this.formEditRow.f_ModuleId).then((function(e){a.$refs.form.setForm(e),t()})).catch((function(){a.$message({type:"warning",message:a.$t("获取编辑数据失败!")}),t(),a.formVisible=!1})))},handleCloseForm:function(){this.$refs.form.resetForm()},showForm:function(e){this.formTitle=e,this.formVisible=!0},handleValidateSteps:function(){return this.$refs.custmerForm.validateSteps()},handleCustmerFormSave:function(e,t){var a=this;e("保存数据中...");var o=this.$refs.custmerForm.getForm();u.update(this.formEditRow.f_Id,o).then((function(){a.updateModules(),a.$message({type:"success",message:a.$t("更新成功!")}),a.custmerFormVisible=!1,t()})).catch((function(){t()}))},handleCustmerFormOpened:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e("加载数据中..."),o.next=3,a.$awaitWraper(u.getByModuleId(a.formEditRow.f_ModuleId));case 3:n=o.sent,a.formEditRow=n,a.$refs.custmerForm.setForm(n),t();case 7:case"end":return o.stop()}}),o)})))()},handleCustmerFormClosed:function(){this.$refs.custmerForm.resetForm()},handleDeskValidateSteps:function(){return this.$refs.deskform.validateSteps()},handleDeskSave:function(){var e=this,t=this.$loading({lock:!0,text:this.$t("正在保存配置，请稍后"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"});this.$nextTick(Object(l["a"])(regeneratorRuntime.mark((function a(){var o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$refs.deskform.getForm();case 2:return o=a.sent,a.next=5,e.$awaitWraper(p.update(e.deskId,o));case 5:n=a.sent,n&&(e.$message({type:"success",message:e.$t("编辑成功!")}),e.deskVisible=!1,e.updateModules()),t.close();case 8:case"end":return a.stop()}}),a)}))))},handleDeskCloseForm:function(){this.$refs.deskform.resetForm()},handleDeskOpenedForm:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e("加载数据中..."),o.next=3,a.$awaitWraper(p.getByModuleId(a.formEditRow.f_ModuleId));case 3:n=o.sent,a.deskId=n.lr_desktop_infoEntity.f_Id,a.$refs.deskform.setForm(n),t();case 7:case"end":return o.stop()}}),o)})))()},handleBIValidateSteps:function(){return this.$refs.preForm.validateSteps()},handleBISave:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=!0,t.next=3,e.$refs.preForm.validateBaseInfo().then((function(e){a=e}));case 3:if(a){t.next=5;break}return t.abrupt("return");case 5:o=e.$loading({lock:!0,text:e.$t("正在保存配置，请稍后"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.$nextTick(Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.preForm.getForm();case 2:return a=t.sent,n=null,t.next=6,m.setmodule(a);case 6:n=t.sent,n&&(e.$message({type:"success",message:e.$t("设置成功!")}),e.BIVisible=!1,e.updateModules()),o.close();case 9:case"end":return t.stop()}}),t)}))));case 7:case"end":return t.stop()}}),t)})))()},handleBICloseForm:function(){},handleBIOpenedForm:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e("加载数据中..."),o.next=3,a.$awaitWraper(m.getByModuleId(a.formEditRow.f_ModuleId));case 3:n=o.sent,a.formEditRow=n,a.$refs.preForm.setForm(n),t();case 7:case"end":return o.stop()}}),o)})))()},handleSwiperValidateSteps:function(){return this.$refs.preForm.validateSteps()},handleSwiperSave:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=!0,t.next=3,e.$refs.preForm.validateBaseInfo().then((function(e){a=e}));case 3:if(a){t.next=5;break}return t.abrupt("return");case 5:o=e.$loading({lock:!0,text:e.$t("正在保存配置，请稍后"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.$nextTick(Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.preForm.getForm();case 2:return a=t.sent,n=null,t.next=6,m.setSwiperModule(e.formEditRow.f_ModuleId,a);case 6:n=t.sent,n&&(e.$message({type:"success",message:e.$t("设置成功!")}),e.swiperVisible=!1,e.updateModules()),o.close();case 9:case"end":return t.stop()}}),t)}))));case 7:case"end":return t.stop()}}),t)})))()},handleSwiperCloseForm:function(){this.checkArr=[]},handleSwiperOpenedForm:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e("加载数据中..."),o.next=3,a.$awaitWraper(m.getSwiperModule(a.formEditRow.f_ModuleId));case 3:n=o.sent,a.checkArr=JSON.parse(n.baseInfo.f_UrlAddress.split("&")[0].split("=")[1]),n.baseInfo.f_Interval=n.baseInfo.f_UrlAddress.split("&")[1].split("=")[1],a.$refs.preForm.setForm(n.baseInfo,1),t();case 8:case"end":return o.stop()}}),o)})))()},filterBtns:function(e,t){return t}}},b=h,_=a("2877"),g=Object(_["a"])(b,o,n,!1,null,null,null);t["default"]=g.exports},adab:function(e,t,a){},c09d:function(e,t,a){},cbaa:function(e,t,a){"use strict";a("adab")},f4e1:function(e,t,a){},f5b0:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.steps(0),expression:"steps(0)"}],staticClass:"l-rblock",staticStyle:{padding:"24px"}},[a("div",{staticClass:"l-page-panel"},[a("el-form",{ref:"baseInfo",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("编号"),prop:"f_Code"}},[a("el-input",{model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("名称"),prop:"f_Name"}},[a("el-input",{model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("图标"),prop:"f_Icon"}},[a("l-input-icon",{attrs:{iconList:e.lr_icons},model:{value:e.formData.f_Icon,callback:function(t){e.$set(e.formData,"f_Icon",t)},expression:"formData.f_Icon"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("表单选择"),prop:"f_FormCode"}},[a("l-custmerform-select",{attrs:{placeholder:e.$t("请选择")},on:{change:e.custmerformChange},model:{value:e.formData.f_FormCode,callback:function(t){e.$set(e.formData,"f_FormCode",t)},expression:"formData.f_FormCode"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("表单版本"),prop:"f_FormVerison"}},[a("l-select",{attrs:{options:e.formVerisons,placeholder:e.$t("请选择")},model:{value:e.formData.f_FormVerison,callback:function(t){e.$set(e.formData,"f_FormVerison",t)},expression:"formData.f_FormVerison"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("上级"),prop:"f_PModuleId"}},[a("l-tree-select",{attrs:{options:e.modulesExpandTree},model:{value:e.formData.f_PModuleId,callback:function(t){e.$set(e.formData,"f_PModuleId",t)},expression:"formData.f_PModuleId"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("排序"),prop:"f_SortCode"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.formData.f_SortCode,callback:function(t){e.$set(e.formData,"f_SortCode",t)},expression:"formData.f_SortCode"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("状态")}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.f_EnabledMark,callback:function(t){e.$set(e.formData,"f_EnabledMark",t)},expression:"formData.f_EnabledMark"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("描述"),prop:"f_Description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.steps(1),expression:"steps(1)"}],staticClass:"l-rblock"},[a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",[a("div",{staticClass:"l-auto-window"},[a("el-tabs",{attrs:{stretch:!0},model:{value:e.pageActiveName,callback:function(t){e.pageActiveName=t},expression:"pageActiveName"}},[a("el-tab-pane",{attrs:{label:e.$t("布局设置"),name:"tab01"}},[a("webcode-layout")],1),2==e.config.layoutType?a("el-tab-pane",{attrs:{label:e.$t("左侧树形设置"),name:"tab05"}},[a("webcode-lefttree",{attrs:{colslist:e.colslist}})],1):e._e(),a("el-tab-pane",{attrs:{label:e.$t("列表设置"),name:"tab02"}},[a("webcode-columns",{ref:"columnsOp",attrs:{columnsTree:e.columnsTree}})],1),a("el-tab-pane",{attrs:{label:e.$t("查询设置"),name:"tab03"}},[a("webcode-query",{ref:"queryOp",attrs:{queryTree:e.queryTree}})],1),a("el-tab-pane",{attrs:{label:e.$t("按钮设置"),name:"tab04"}},[a("webcode-btns",{ref:"btnOp",attrs:{formType:e.formScheme&&1==e.formScheme.formType?1:0,columnsTree:e.columnsTree}})],1)],1)],1)])],1)],1)])},n=[],l=(a("99af"),a("4de4"),a("c740"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("159b"),a("2909")),r=a("5530"),i=(a("96cf"),a("1da1")),s=a("5880"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-type-list"},e._l(e.layoutList,(function(t,o){return a("div",{key:o,class:["layout-type-list--item",{checked:e.config.layoutType==t.value}],on:{click:function(a){return e.handleChangeLayoutType(t.value)}}},[a("div",{staticClass:"layout-type-list--imgdiv"},[a("img",{staticClass:"layout-type-list--img",attrs:{src:t.img}}),e.config.layoutType==t.value?a("div",{staticClass:"layout-type-list--checked"},[a("i",{staticClass:"el-icon-check"})]):e._e()]),a("p",{staticClass:"layout-type-list--label"},[e._v(e._s(e.$t(t.label)))])])})),0)},f=[],d={name:"webcode-layout",inject:["formConfig"],components:{},computed:{config:function(){return this.formConfig}},data:function(){return{layoutList:[{img:"".concat(this.rootUrl,"img/form/layout.png"),value:1,label:"普通列表"},{img:"".concat(this.rootUrl,"img/form/layout-left.png"),value:2,label:"左侧树形+普通列表"}]}},created:function(){},methods:{handleChangeLayoutType:function(e){this.config.layoutType=e}}},u=d,p=(a("fe63"),a("2877")),m=Object(p["a"])(u,c,f,!1,null,"19139c89",null),h=m.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{padding:"8px 0 0 0"},attrs:{title:"列表关联字段"}},[a("l-radio",{staticClass:"block-radio",attrs:{options:e.colslist},model:{value:e.config.left.colField,callback:function(t){e.$set(e.config.left,"colField",t)},expression:"config.left.colField"}})],1)]},proxy:!0}])},[a("l-panel",{staticStyle:{padding:"8px 0 0 4px"},attrs:{title:"设置"}},[a("el-form",{ref:"form",staticStyle:{padding:"16px",maxWidth:"400px"},attrs:{size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:"树形标题"}},[a("el-input",{model:{value:e.config.left.title,callback:function(t){e.$set(e.config.left,"title",t)},expression:"config.left.title"}})],1),a("div",{staticStyle:{"text-align":"center","margin-bottom":"16px"}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.handleDataTypeChange},model:{value:e.config.left.dataType,callback:function(t){e.$set(e.config.left,"dataType",t)},expression:"config.left.dataType"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"3"}},[e._v("数据源")])],1)],1),1==e.config.left.dataType?a("div",[a("el-tree",{ref:"tree",attrs:{data:e.config.left.options,"default-expand-all":"",draggable:"","node-key":"value","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(o.label))]),a("span",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.handleNodeAdd(n)}}}),a("el-button",{staticClass:"danger",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.handleNodeRemove(o,n)}}})],1)])}}],null,!1,2832353477)}),a("div",{staticStyle:{"margin-left":"22px"}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleParentNodeAdd}},[e._v("添加父级")])],1)],1):2==e.config.left.dataType?a("div",[a("l-tree-select",{attrs:{options:e.lr_dataItemClassifysTree,placeholder:"请选择数据字典",size:"mini"},model:{value:e.config.left.dataCode,callback:function(t){e.$set(e.config.left,"dataCode",t)},expression:"config.left.dataCode"}})],1):a("div",[a("el-form-item",{attrs:{label:"数据源"}},[a("l-select",{attrs:{placeholder:"请选择数据源",size:"mini",options:e.lr_dataSource,labelKey:"f_Name",valueKey:"f_Code"},on:{change:e.handleDataSourceChange},model:{value:e.config.left.dataCode,callback:function(t){e.$set(e.config.left,"dataCode",t)},expression:"config.left.dataCode"}})],1),a("el-form-item",{attrs:{label:"关联字段"}},[a("l-select",{attrs:{placeholder:"请选择选项关联字段",size:"mini",options:e.myColNameList},model:{value:e.config.left.dataValueKey,callback:function(t){e.$set(e.config.left,"dataValueKey",t)},expression:"config.left.dataValueKey"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("l-select",{attrs:{placeholder:"请选择选项显示字段",size:"mini",options:e.myColNameList},model:{value:e.config.left.dataLabelKey,callback:function(t){e.$set(e.config.left,"dataLabelKey",t)},expression:"config.left.dataLabelKey"}})],1),a("el-form-item",{attrs:{label:"id字段"}},[a("l-select",{attrs:{placeholder:"请选择选项id字段",size:"mini",options:e.myColNameList},model:{value:e.config.left.dataIdKey,callback:function(t){e.$set(e.config.left,"dataIdKey",t)},expression:"config.left.dataIdKey"}})],1),a("el-form-item",{attrs:{label:"pid字段"}},[a("l-select",{attrs:{placeholder:"请选择选项父级id字段",size:"mini",options:e.myColNameList},model:{value:e.config.left.dataPIdKey,callback:function(t){e.$set(e.config.left,"dataPIdKey",t)},expression:"config.left.dataPIdKey"}})],1)],1)],1)],1),a("l-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,height:200},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog,ok:e.handleDialogAdd}},[a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,size:"mini",rules:e.dialogRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选项名",prop:"label"}},[a("el-input",{model:{value:e.dialogForm.label,callback:function(t){e.$set(e.dialogForm,"label",t)},expression:"dialogForm.label"}})],1),a("el-form-item",{attrs:{label:"选项值",prop:"value"}},[a("el-input",{model:{value:e.dialogForm.value,callback:function(t){e.$set(e.dialogForm,"value",t)},expression:"dialogForm.value"}})],1)],1)],1)])],1)},_=[],g=(a("a434"),{name:"webcode-lefttree",inject:["formConfig"],props:{colslist:{type:Array,default:function(){return[]}}},components:{},computed:{config:function(){return this.formConfig},myColNameList:function(){if(this.config.left.dataCode){var e=this.lr_dataSourceCol[this.config.left.dataCode]||[];return e.map((function(e){return{value:e,label:e}}))}return[]}},data:function(){return{dialogTitle:"添加选项",dialogVisible:!1,dialogForm:{label:"",value:""},dialogRules:{label:{required:!0,message:"请输入选项名",trigger:"null"},value:{required:!0,message:"请输入选项值",trigger:"null"}},pData:void 0}},created:function(){this.lr_loadDataItemClassifys(),this.lr_loadDataSourceList(),3==this.config.left.dataType&&this.lr_loadDataSourceColNames(this.config.left.dataCode)},methods:{handleDataTypeChange:function(){this.config.left.dataIdKey="",this.config.left.dataPIdKey="",this.config.left.dataCode="",this.config.left.dataValueKey="",this.config.left.dataLabelKey=""},handleParentNodeAdd:function(){this.pData=void 0,this.dialogTitle="添加父级选项",this.dialogVisible=!0},handleNodeAdd:function(e){this.pData=e,this.dialogTitle="添加【".concat(e.label,"】的子选项"),this.dialogVisible=!0},handleNodeRemove:function(e,t){var a=e.parent,o=a.data.children||a.data,n=o.findIndex((function(e){return e.id===t.id}));o.splice(n,1)},handleDialogAdd:function(){var e=this;this.$refs.dialogForm.validate((function(t){if(t){var a=e.dialogForm,o=a.label,n=a.value,l=e.$refs.tree.getNode(n);if(l)e.$message.error("选项值重复");else{var r=e.pData,i={label:o,value:"number"==e.dialogInputType?Number(n):n};r?(r.children||e.$set(r,"children",[]),r.children.push(i)):e.$set(e.config.left.options,e.config.left.options.length,i),e.dialogVisible=!1}}}))},closeDialog:function(){this.$refs.dialogForm.clearValidate(),this.dialogForm={}},handleDataSourceChange:function(){this.config.left.dataValueKey="",this.config.left.dataLabelKey="",this.config.left.dataIdKey="",this.config.left.dataPIdKey="",!this.$validatenull(this.config.left.dataCode)&&this.lr_loadDataSourceColNames&&this.lr_loadDataSourceColNames(this.config.left.dataCode)}}}),v=g,y=(a("39e5"),a("cbaa"),Object(p["a"])(v,b,_,!1,null,"edc58ee0",null)),w=y.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{padding:"8px 0 0 0"},attrs:{title:"列字段"}},[a("el-tree",{ref:"maintree",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id","highlight-current":!0,data:e.columnsTree},on:{check:e.handleColumnsCheck},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return a("span",{staticClass:"lr-tree-node"},[e._v(" "+e._s(o.label)+" ")])}}])})],1)]},proxy:!0}])},[a("l-panel",{staticStyle:{padding:"8px 0 0 4px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item",staticStyle:{"margin-right":"16px"},attrs:{size:"mini"}},[a("span",{staticStyle:{"margin-right":"8px"}},[e._v(e._s(e.$t("是否分页")))]),a("el-switch",{model:{value:e.config.table.isPage,callback:function(t){e.$set(e.config.table,"isPage",t)},expression:"config.table.isPage"}})],1),a("div",{staticClass:"l-panel--item",staticStyle:{"margin-right":"16px"},attrs:{size:"mini"}},[a("span",{staticStyle:{width:"80px"}},[e._v(e._s(e.$t("排序字段")))]),a("l-select",{attrs:{size:"mini",valueKey:"prop",options:e.columnsTree[0].children},model:{value:e.config.table.sidx,callback:function(t){e.$set(e.config.table,"sidx",t)},expression:"config.table.sidx"}})],1),a("div",{staticClass:"l-panel--item",attrs:{size:"mini"}},[a("span",{staticStyle:{width:"80px"}},[e._v(e._s(e.$t("是否倒序")))]),a("el-switch",{model:{value:e.config.table.isDESC,callback:function(t){e.$set(e.config.table,"isDESC",t)},expression:"config.table.isDESC"}})],1),a("div",{staticClass:"l-panel--item",attrs:{size:"mini"}},[a("span",{staticStyle:{width:"80px"}},[e._v(e._s(e.$t("批量删除")))]),a("el-switch",{attrs:{disabled:e.config.moreDeleteType},model:{value:e.config.table.isDeleteMore,callback:function(t){e.$set(e.config.table,"isDeleteMore",t)},expression:"config.table.isDeleteMore"}})],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("div",{staticClass:"l-panel--item",attrs:{size:"mini"}},[a("span",{staticStyle:{width:"100px"}},[e._v(e._s(e.$t("全选自适应宽度")))]),a("el-switch",{on:{change:e.handleAllWidth},model:{value:e.isAllWidth,callback:function(t){e.isAllWidth=t},expression:"isAllWidth"}})],1)]},proxy:!0}])},[a("l-table",{attrs:{dataSource:e.config.table.columns,columns:e.columns,isSortable:!0,rowKey:"id",isShowNum:!1},scopedSlots:e._u([{key:"width",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}},{key:"isMinWidth",fn:function(t){return[a("el-switch",{attrs:{size:"mini"},on:{change:e.init},model:{value:t.row.isMinWidth,callback:function(a){e.$set(t.row,"isMinWidth",a)},expression:"scope.row.isMinWidth"}})]}},{key:"align",fn:function(t){return[a("el-select",{attrs:{size:"mini"},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l([{value:"left",label:"左"},{value:"center",label:"中"},{value:"right",label:"右"}],(function(t){return a("el-option",{key:t.value,attrs:{label:e.$t(t.label),value:t.value}})})),1)]}}])})],1)],1)},k=[],C={name:"webcode-columns",inject:["formConfig"],props:["columnsTree"],components:{},computed:{config:function(){for(var e in this.formConfig.btns){if("Delete"==this.formConfig.btns[e].id){this.formConfig.moreDeleteType=!1;break}this.formConfig.moreDeleteType=!0}return this.formConfig}},data:function(){return{columns:[{label:"列名",prop:"label",minWidth:"150"},{label:"宽度",prop:"width",width:"120",align:"center"},{label:"自适应宽度",prop:"isMinWidth",width:"100",align:"center"},{label:"对齐",prop:"align",width:"100",align:"center"}],isAllWidth:!1}},created:function(){},methods:{init:function(){this.config.table.columns.length>0&&-1==this.config.table.columns.findIndex((function(e){return!e.isMinWidth}))?this.isAllWidth=!0:this.isAllWidth=!1},handleColumnsCheck:function(e,t){var a,o=this,n=t.checkedNodes.filter((function(e){return void 0!=e.prop&&-1==o.config.table.columns.findIndex((function(t){return t.prop==e.prop}))})),r=this.config.table.columns.filter((function(e){return-1==t.checkedNodes.findIndex((function(t){return t.prop==e.prop}))}));(r.length>0&&(this.config.table.columns=this.config.table.columns.filter((function(e){return-1==r.findIndex((function(t){return t.prop==e.prop}))}))),n.length>0)&&(a=this.config.table.columns).push.apply(a,Object(l["a"])(n))},setCheckedKeys:function(e){this.$refs.maintree.setCheckedKeys(e)},handleAllWidth:function(){var e=this;this.config.table.columns.forEach((function(t){t.isMinWidth=e.isAllWidth}))}}},D=C,x=Object(p["a"])(D,$,k,!1,null,null,null),I=x.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{padding:"8px 0 0 0"},attrs:{title:"查询字段"}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id","highlight-current":!0,data:e.queryTree},on:{check:e.handleQueryCheck},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return a("span",{staticClass:"lr-tree-node"},[e._v(" "+e._s(o.label)+" ")])}}])})],1)]},proxy:!0}])},[a("l-panel",{staticStyle:{padding:"8px 0 0 4px"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item",attrs:{size:"mini"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.config.queryType,callback:function(t){e.$set(e.config,"queryType",t)},expression:"config.queryType"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("风格一")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("风格二")])],1)],1)]},proxy:!0}])},[a("l-layout",{attrs:{left:320},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-table",{attrs:{dataSource:e.config.table.querys,columns:e.columns,isSortable:!0,rowKey:"id",isShowNum:!1},scopedSlots:e._u([{key:"width",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}},{key:"isMinWidth",fn:function(t){return[a("el-switch",{attrs:{size:"mini"},model:{value:t.row.isMinWidth,callback:function(a){e.$set(t.row,"isMinWidth",a)},expression:"scope.row.isMinWidth"}})]}},{key:"align",fn:function(t){return[a("el-select",{attrs:{size:"mini"},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l([{value:"left",label:"左"},{value:"center",label:"中"},{value:"right",label:"右"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])})]},proxy:!0}])},[a("div",{staticClass:"l-rblock"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.rootUrl+"img/admin/query"+e.config.queryType+".jpg"}})])])],1)],1)},F=[],E={name:"webcode-query",inject:["formConfig"],props:["queryTree"],components:{},computed:{config:function(){return this.formConfig}},data:function(){return{columns:[{label:"查询字段名",prop:"label",minWidth:"150"}]}},methods:{handleQueryCheck:function(e,t){var a,o=this,n=t.checkedNodes.filter((function(e){return void 0!=e.prop&&-1==o.config.table.querys.findIndex((function(t){return t.prop==e.prop}))})),r=this.config.table.querys.filter((function(e){return-1==t.checkedNodes.findIndex((function(t){return t.prop==e.prop}))}));(r.length>0&&(this.config.table.querys=this.config.table.querys.filter((function(e){return-1==r.findIndex((function(t){return t.prop==e.prop}))}))),n.length>0)&&(a=this.config.table.querys).push.apply(a,Object(l["a"])(n))},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)}}},T=E,M=Object(p["a"])(T,S,F,!1,null,null,null),A=M.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("l-layout",{staticStyle:{background:"#f1f2f5"},attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{padding:"8px 0 0 0"},attrs:{title:"常用按钮"}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id","highlight-current":!0,data:e.myTreeData},on:{check:e.handleCheck},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return a("span",{staticClass:"lr-tree-node"},[e._v(" "+e._s(o.label)+" ")])}}])})],1)]},proxy:!0}])},[a("l-panel",{staticStyle:{padding:"8px 0 0 4px"}},[a("l-table",{attrs:{dataSource:e.config.btns,columns:e.columns,isSortable:!0,rowKey:"id",isShowNum:!1},scopedSlots:e._u([{key:"label",fn:function(t){return[["Add","Import","Export","Edit","Delete","Details"].includes(t.row.id)?e._e():a("el-input",{attrs:{size:"mini"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}},{key:"prop",fn:function(t){return[["Add","Import","Export","Edit","Delete","Details","Print","Wordprint","SelectionProcess"].includes(t.row.id)?e._e():a("el-input",{attrs:{size:"mini"},model:{value:t.row.prop,callback:function(a){e.$set(t.row,"prop",a)},expression:"scope.row.prop"}})]}},{key:"isRowBtn",fn:function(t){return[a("el-switch",{attrs:{size:"mini",disabled:["Add","Import","Export","Edit","Delete","Details","Print","Wordprint","SelectionProcess"].includes(t.row.id)},model:{value:t.row.isRowBtn,callback:function(a){e.$set(t.row,"isRowBtn",a)},expression:"scope.row.isRowBtn"}})]}},{key:"isWFlow",fn:function(t){return[["Add"].includes(t.row.id)?a("el-switch",{attrs:{size:"mini"},model:{value:t.row.isWFlow,callback:function(a){e.$set(t.row,"isWFlow",a)},expression:"scope.row.isWFlow"}}):e._e()]}},{key:"wFlowCode",fn:function(t){return[["Add","SelectionProcess"].includes(t.row.id)?a("div",{staticClass:"flex"},[a("l-select",{attrs:{size:"mini",options:e.wflist},model:{value:t.row.wFlowCode,callback:function(a){e.$set(t.row,"wFlowCode",a)},expression:"scope.row.wFlowCode"}}),["SelectionProcess"].includes(t.row.id)?a("l-select",{staticClass:"ml-8",attrs:{size:"mini",valueKey:"prop",options:e.columnsTree[0].children},model:{value:t.row.tableColumnCode,callback:function(a){e.$set(t.row,"tableColumnCode",a)},expression:"scope.row.tableColumnCode"}}):e._e()],1):["Wordprint"].includes(t.row.id)?a("l-wordprint-select",{attrs:{size:"mini"},model:{value:t.row.printCode,callback:function(a){e.$set(t.row,"printCode",a)},expression:"scope.row.printCode"}}):["Print"].includes(t.row.id)?a("l-print-select",{attrs:{size:"mini"},model:{value:t.row.printCode,callback:function(a){e.$set(t.row,"printCode",a)},expression:"scope.row.printCode"}}):e._e()]}},{key:"icon",fn:function(t){return[t.row.isRowBtn?e._e():a("l-input-icon",{attrs:{size:"mini",iconList:e.lr_icons},model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}})]}}])})],1)],1)},V=[],B=window.$api.workflow.scheme,R={name:"webcode-btns",inject:["formConfig"],components:{},props:{formType:Number,columnsTree:Array},computed:{config:function(){return this.formConfig},myTreeData:function(){return 1==this.formType?this.treeData.filter((function(e){return["Import","Export","Details"].includes(e.id)})):this.treeData}},data:function(){return{columns:[{label:"名称",prop:"label",minWidth:"150"},{label:"ID",prop:"prop",minWidth:"120"},{label:"行按钮",prop:"isRowBtn",width:"80",align:"center"},{label:"创建流程",prop:"isWFlow",width:"80",align:"center"},{label:"模版",prop:"wFlowCode",width:"240"},{label:"图标",prop:"icon",width:"240"}],treeData:[{label:"新增",id:"Add",prop:"Add",icon:"el-icon-plus",isRowBtn:!1},{label:"导入",id:"Import",prop:"Import",icon:"el-icon-upload2",isRowBtn:!1},{label:"导出",id:"Export",prop:"Export",icon:"el-icon-download",isRowBtn:!1},{label:"编辑",id:"Edit",prop:"Edit",isRowBtn:!0},{label:"删除",id:"Delete",prop:"Delete",isRowBtn:!0},{label:"详情",id:"Details",prop:"Details",isRowBtn:!0},{label:"打印",id:"Print",prop:"Print",isRowBtn:!0},{label:"WORD打印",id:"Wordprint",prop:"Wordprint",isRowBtn:!0},{label:"发起流程",id:"SelectionProcess",prop:"SelectionProcess",isRowBtn:!0}]}},asyncComputed:{wflist:{get:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$awaitWraper(B.getList());case 2:return a=t.sent,o=a||[],t.abrupt("return",o.map((function(e){return{label:e.f_Name,value:e.f_Code}})));case 5:case"end":return t.stop()}}),t)})))()}}},created:function(){},methods:{handleAddBtn:function(){this.config.btns.push({id:this.$uuid(),label:"",prop:"",icon:"",isRowBtn:!1,notHtml:!1})},handleRemove:function(e){this.config.btns.splice(e,1)},handleCheck:function(e,t){var a,o=this,n=t.checkedNodes.filter((function(e){return-1==o.config.btns.findIndex((function(t){return t.id==e.id}))})),r=this.config.btns.filter((function(e){return-1==t.checkedNodes.findIndex((function(t){return t.id==e.id}))}));(r.length>0&&(this.config.btns=this.config.btns.filter((function(e){return-1==r.findIndex((function(t){return t.id==e.id}))}))),n.length>0)&&(a=this.config.btns).push.apply(a,Object(l["a"])(n))},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)}}},P=R,O=Object(p["a"])(P,N,V,!1,null,null,null),W=O.exports,z=window.$api.custmerForm.scheme,j={provide:function(){return{formConfig:this.config}},props:{stepActive:{type:Number,default:0}},components:{webcodeLayout:h,webcodeLefttree:w,webcodeColumns:I,webcodeQuery:A,webcodeBtns:W},data:function(){var e=this;return{pageActiveName:"tab01",columnsTree:[{label:"全选",children:[]}],queryTree:[{label:"全选",children:[]}],colslist:[],config:{layoutType:1,queryType:"1",btns:[{label:"新增",id:"Add",prop:"Add",icon:"el-icon-plus",isRowBtn:!1},{label:"导入",id:"Import",prop:"Import",icon:"el-icon-upload2",isRowBtn:!1},{label:"导出",id:"Export",prop:"Export",icon:"el-icon-download",isRowBtn:!1},{label:"编辑",id:"Edit",prop:"Edit",isRowBtn:!0},{label:"删除",id:"Delete",prop:"Delete",isRowBtn:!0},{label:"详情",id:"Details",prop:"Details",isRowBtn:!0}],left:{title:"左侧树形",colField:"",dataType:"1",dataIdKey:"",dataPIdKey:"",dataValueKey:"",dataLabelKey:"",colNames:[],options:[],dataCode:""},table:{isPage:!0,columns:[],querys:[],sidx:"",isDESC:!1,isDeleteMore:!1}},formData:{f_Type:1,f_Code:"",f_Name:"",f_Icon:"learun-icon-star",f_FormCode:"",f_FormVerison:"",f_PModuleId:"",f_ModuleId:"",f_SortCode:"",f_EnabledMark:1,f_Description:""},rules:{f_Code:[{required:!0,message:"请输入编号",trigger:"blur"},{pattern:/^[A-Za-z][A-Za-z0-9_]*$/,message:this.$t("请以字母开头填写字母、数字或下划线"),trigger:["blur","change"]},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_ModuleId},tableName:"lr_base_module",fieldName:"f_EnCode",keyName:"f_ModuleId",trigger:"null"}],f_Name:[{required:!0,message:"请输入名称",trigger:"blur"}],f_Icon:[{required:!0,message:"请选择图标",trigger:"blur"}],f_FormCode:[{required:!0,message:"请选择表单",trigger:"blur"}],f_FormVerison:[{required:!0,message:"请选择表单版本"}]},moreDeleteType:!1,formScheme:null}},asyncComputed:{formVerisons:{get:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],e.$validatenull(e.formData.f_FormCode)){t.next=5;break}return t.next=4,e.$awaitWraper(z.getHistoryList(e.formData.f_FormCode));case 4:a=t.sent;case 5:return t.abrupt("return",(a||[]).map((function(t){return{label:e.lr_dateFormat(t.f_CreateDate),value:t.f_Id}})));case 6:case"end":return t.stop()}}),t)})))()}}},computed:Object(r["a"])({},Object(s["mapGetters"])(["modulesExpandTree"])),methods:{steps:function(e){return this.stepActive==e},handleChangeLayoutType:function(e){this.config.layoutType=e},custmerformChange:function(e){this.formData.f_FormVerison=null==e?"":e.f_SchemeId},validateSteps:function(){var e=this;return new Promise((function(t){e.$refs.baseInfo.validate(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(o){var n,r,i,s,c,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o){a.next=25;break}return a.next=3,e.$awaitWraper(z.getHistory(e.formData.f_FormVerison));case 3:if(a.t0=a.sent,a.t0){a.next=6;break}a.t0={};case 6:n=a.t0,r=n.f_Scheme,e.formScheme=JSON.parse(r),1==e.formScheme.formType&&(e.config.btns=e.config.btns.filter((function(e){return["Import","Export","Details"].includes(e.id)}))),i=[],e.formScheme.formInfo.tabList.forEach((function(e){i.push.apply(i,Object(l["a"])(e.components.filter((function(e){return!["gridtable","divider","password","viewtable","card","tab","collapse","tableLayout","btn","qrcode","barcode"].includes(e.type)}))))})),s={},i.forEach((function(e){s[e.prop]=e})),e.columnsTree[0].children=i.map((function(e){return{id:e.prop,prop:e.prop,label:e.label,width:120,align:"left",isMinWidth:!1}})),c=e.config.table.columns.filter((function(t){return-1!=e.columnsTree[0].children.findIndex((function(e){return e.prop==t.prop}))})),c.forEach((function(e){e.label=s[e.prop].label})),e.config.table.columns=c,e.queryTree[0].children=i.filter((function(e){return!["upload","uploadimg","password","timerange","datetimerange","count"].includes(e.type)})).map((function(e){return{id:e.prop,prop:e.prop,label:e.label}})),f=e.config.table.querys.filter((function(t){return-1!=e.queryTree[0].children.findIndex((function(e){return e.prop==t.prop}))})),f.forEach((function(e){e.label=s[e.prop].label})),e.config.table.querys=f,e.colslist=i.map((function(e){return{value:e.prop,label:e.label}})),-1==e.colslist.findIndex((function(t){return t.value==e.config.left.colField}))&&(e.config.left.colField=""),e.$nextTick((function(){e.$refs.columnsOp.setCheckedKeys(c.map((function(e){return e.prop}))),e.$refs.queryOp.setCheckedKeys(f.map((function(e){return e.prop}))),e.$refs.btnOp.setCheckedKeys(e.config.btns.map((function(e){return e.id}))),e.$refs.columnsOp.init()}));case 25:t(o);case 26:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))},resetForm:function(){this.formData.f_ModuleId="",this.pageActiveName="tab01",this.$refs.baseInfo&&this.$refs.baseInfo.resetFields(),this.config.layoutType=1,this.config.queryType="1",this.config.btns=[{label:"新增",id:"Add",prop:"Add",icon:"el-icon-plus",isRowBtn:!1},{label:"导入",id:"Import",prop:"Import",icon:"el-icon-upload2",isRowBtn:!1},{label:"导出",id:"Export",prop:"Export",icon:"el-icon-download",isRowBtn:!1},{label:"编辑",id:"Edit",prop:"Edit",isRowBtn:!0},{label:"删除",id:"Delete",prop:"Delete",isRowBtn:!0},{label:"详情",id:"Details",prop:"Details",isRowBtn:!0},{label:"发起流程",id:"SelectionProcess",prop:"SelectionProcess",isRowBtn:!0}],this.config.left={title:"左侧树形",colField:"",dataType:"1",dataIdKey:"",dataPIdKey:"",dataValueKey:"",dataLabelKey:"",colNames:[],options:[],dataCode:""},this.config.table={isPage:!0,columns:[],querys:[],sidx:"",isDESC:!1}},setForm:function(e){this.formData=e;var t=JSON.parse(e.f_Scheme);this.config.layoutType=t.layoutType,this.config.queryType=t.queryType,this.config.btns=t.btns,this.config.left=t.left,this.config.table=t.table},getForm:function(){var e=this,t={},a=this.$deepClone(this.formData);a.f_Scheme=JSON.stringify(this.$deepClone(this.config)),t.entity=a,t.moduleEntity={f_EnCode:a.f_Code,f_FullName:a.f_Name,f_ParentId:a.f_PModuleId,f_Icon:a.f_Icon,f_Target:"custmerForm",f_IsMenu:1,f_DeleteMark:0,f_UrlAddress:"".concat(a.f_Code),f_EnabledMark:a.f_EnabledMark,f_SortCode:a.f_SortCode},t.moduleButtonEntitys=[],this.config.btns.forEach((function(e){t.moduleButtonEntitys.push({f_EnCode:e.prop,f_FullName:e.label})})),2==this.config.layoutType&&"2"==this.config.left.dataType&&t.moduleButtonEntitys.push({f_EnCode:"classifysSetting",f_FullName:"分类管理"});var o={};return t.moduleFormEntitys=[],this.formScheme.formInfo.tabList.forEach((function(a){a.components.forEach((function(a){if(o[a.prop]=a,!["gridtable","divider","card","tab","collapse","tableLayout"].includes(a.type)&&a.display)t.moduleFormEntitys.push({f_EnCode:a.prop,f_FullName:a.label});else if(["gridtable"].includes(a.type)){var n;(n=t.moduleFormEntitys).push.apply(n,Object(l["a"])(a.children.map((function(t){return{f_EnCode:"".concat(a.prop,"|").concat(t.prop),f_FullName:"".concat(a.label||e.$t("表格"),"-").concat(t.label)}})))),t.moduleFormEntitys.push({f_EnCode:"".concat(a.prop,"_add"),f_FullName:"".concat(a.label||e.$t("表格"),"-").concat(e.$t("添加按钮"))}),t.moduleFormEntitys.push({f_EnCode:"".concat(a.prop,"_remove"),f_FullName:"".concat(a.label||e.$t("表格"),"-").concat(e.$t("删除按钮"))})}else["divider"].includes(a.type)&&t.moduleFormEntitys.push({f_EnCode:a.prop,f_FullName:"".concat(a.label,"-").concat(a.html)})}))})),t.moduleColumnEntitys=[],this.config.table.columns.forEach((function(a){var n=o[a.prop],l="".concat(n.field).concat(1==e.formScheme.formType?"":e.formScheme.db.findIndex((function(e){return e.name==n.table})));t.moduleColumnEntitys.push({f_EnCode:l,f_FullName:a.label})})),t}}},q=j,K=Object(p["a"])(q,o,n,!1,null,null,null);t["a"]=K.exports},fe63:function(e,t,a){"use strict";a("f4e1")}}]);