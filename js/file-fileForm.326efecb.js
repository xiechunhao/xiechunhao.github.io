(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["file-fileForm"],{"2ba8":function(e,t,s){},"4cdd":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("l-layout",{staticClass:"l-tab-page learun-file-form-page",attrs:{rightMove:!1,right:284},scopedSlots:e._u([{key:"right",fn:function(){return[s("l-panel",{staticStyle:{padding:"0","border-radius":"0"}},[s("div",{staticClass:"l-auto-window"},[s("el-tabs",{attrs:{stretch:!0},model:{value:e.configActiveName,callback:function(t){e.configActiveName=t},expression:"configActiveName"}},[s("el-tab-pane",{attrs:{label:""+e.$t("文件属性"),name:"tab01"}},[s("div",{staticClass:"l-rblock",staticStyle:{padding:"16px 16px 0"}},[s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("文件类型")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_getFileEex(e.file.name))+" ")])]),s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("文件大小")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.$countFileSize(e.file.size))+" ")])]),s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("所在位置")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.file.level||e.level)+" ")])]),s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("创建者")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.file.createUserName)+" ")])]),s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("创建时间")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_dateFormat(e.file.createDate))+" ")])]),s("div",{staticClass:"learun-des-item"},[s("div",{staticClass:"learun-des-item-label"},[e._v(e._s(e.$t("修改时间")))]),s("div",{staticClass:"learun-des-item-content"},[e._v(" "+e._s(e.lr_dateFormat(e.file.modifyDate))+" ")])])])]),s("el-tab-pane",{attrs:{label:e.$t("文件版本"),name:"tab02"}},[s("div",{staticClass:"l-rblock"},[s("div",{staticClass:"learun-list time"},e._l(e.historys,(function(t){return s("div",{key:t.f_Id,class:["learun-list-item",{active:t.f_Id==e.selectId}],staticStyle:{border:"0"},on:{click:function(s){return e.handleClick(t)}}},[s("div",{staticClass:"learun-list-item-wraper"},[s("div",{staticClass:"learun-list-item-icon"},[s("div",{staticClass:"ver"},[e._v("V"+e._s(t.f_Ver))])]),s("div",{staticClass:"learun-list-item-content"},[s("div",{staticClass:"learun-list-item-title"},[e._v(" "+e._s(t.f_Name)+" ")]),s("div",{staticClass:"learun-list-item-des"},[e._v(" "+e._s(t.f_CreateUserName)+" · "+e._s(e.lr_dateFormat(t.f_CreateDate))+" ")])]),e.isDown?s("div",[s("el-dropdown",{on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-more"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{item:t,type:"down"}}},[e._v(e._s(e.$t("下载文件")))])],1)],1)],1):e._e()])])})),0)])])],1)],1)])]},proxy:!0}])},[e.selectId?[["xls","xlsx","doc","docx","txt","csv","html","pdf"].includes(e.lr_getFileEex(e.selectFile.f_Name))?s("div",{staticClass:"l-rblock",staticStyle:{background:"#fff"}},[s("iframe",{ref:"iframe",staticClass:"l-iframe",attrs:{src:e.previewUrl,frameborder:"0"}})]):["jpg","gif","png","bmp","jpeg","svg"].includes(e.lr_getFileEex(e.selectFile.f_Name))?s("div",{staticClass:"l-rblock learun-img-preview"},[s("img",{staticClass:"learun-img-preview-img",attrs:{src:e.previewUrl,alt:""}})]):s("div",{staticClass:"l-rblock learun-not-preview"},[s("i",{staticClass:"icon",class:e.lr_getFileIcon(e.selectFile.f_Name).icon,style:{color:e.lr_getFileIcon(e.selectFile.f_Name).color}}),s("p",{staticClass:"text"},[e._v(" "+e._s(e.$t("很抱歉，无法在浏览器预览"))+" "+e._s(e.lr_getFileEex(e.selectFile.f_Name))+" "+e._s(e.$t("文件,请下载后查看"))+" ")]),s("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.downFile(e.selectFile)}}},[e._v(e._s(e.$t("下载文件")))])],1)]:e._e()],2)},a=[],l=(s("99af"),s("7db0"),s("96cf"),s("1da1")),n=window.$api.system.file,c={props:{file:{type:Object,default:function(){}},level:String},data:function(){return{configActiveName:"tab01",historys:[],selectId:""}},watch:{fileId:{handler:function(){this.selectId="",this.configActiveName="tab01",this.formData()},immediate:!0}},computed:{fileId:function(){return this.file?this.file.id:""},selectFile:function(){var e=this;return""==this.selectId?null:this.historys.find((function(t){return t.f_Id==e.selectId}))},previewUrl:function(){return""==this.selectId?"":"".concat(this.apiUrl,"system/annexesfile/preview/").concat(this.selectFile.f_FileId,"?token=").concat(this.token)},isDown:function(){return!(!this.lr_isSystem&&-1==this.file.authType.indexOf("3"))}},methods:{formData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fileId){t.next=5;break}return t.next=3,e.$awaitWraper(n.get(e.fileId));case 3:s=t.sent,s&&(i=s.historyList,i.length>0&&i[0].f_FileInfoId==e.fileId&&(e.historys=i,e.selectId=e.historys[0].f_Id));case 5:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.selectId=e.f_Id},handleCommand:function(e){"down"==e.type&&this.$downFile("".concat(this.apiUrl,"system/annexesfile/").concat(e.item.f_FileId,"?token=").concat(this.token))},downFile:function(e){this.$downFile("".concat(this.apiUrl,"system/annexesfile/").concat(e.f_FileId,"?token=").concat(this.token))}}},r=c,d=(s("cf61"),s("a3c7a"),s("2877")),o=Object(d["a"])(r,i,a,!1,null,"179d736c",null);t["default"]=o.exports},a3c7a:function(e,t,s){"use strict";s("2ba8")},cf61:function(e,t,s){"use strict";s("ebdb")},ebdb:function(e,t,s){}}]);