(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customer-form"],{4656:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-form-viewer erpCase",staticStyle:{padding:"8px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini",labelPosition:"right",labelWidth:"80px"}},[a("div",{staticClass:"l-auto-window only-tabs"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("主表信息"),name:"tab0"}},[a("el-row",{attrs:{gutter:16}},[e.setBlock?a("div",{staticClass:"right_right header_name"},[e._v(" "+e._s(e.$t("基本信息"))+" ")]):e._e(),a("div",{staticClass:"l-rblock"},[e.setBlock?a("div",{staticClass:"form_top_upload"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("客户名称"),prop:"case_erp_customer_f_Name"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_customer_f_Name,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Name",t)},expression:"formData.case_erp_customer_f_Name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("客户类型"),prop:"case_erp_customer_f_Type"}},[a("l-select",{attrs:{options:e.case_erp_customer_f_TypeOptions},model:{value:e.formData.case_erp_customer_f_Type,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Type",t)},expression:"formData.case_erp_customer_f_Type"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("所在行业"),prop:"case_erp_customer_f_Industry"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_customer_f_Industry,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Industry",t)},expression:"formData.case_erp_customer_f_Industry"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("来源"),prop:"case_erp_customer_f_Source"}},[a("l-select",{attrs:{options:e.case_erp_customer_f_SourceOptions},model:{value:e.formData.case_erp_customer_f_Source,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Source",t)},expression:"formData.case_erp_customer_f_Source"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("规模"),prop:"case_erp_customer_f_Scale"}},[a("l-select",{attrs:{options:e.case_erp_customer_f_ScaleOptions},model:{value:e.formData.case_erp_customer_f_Scale,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Scale",t)},expression:"formData.case_erp_customer_f_Scale"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("公司性质"),prop:"case_erp_customer_f_ComNature"}},[a("l-select",{attrs:{options:e.case_erp_customer_f_ComNatureOptions},model:{value:e.formData.case_erp_customer_f_ComNature,callback:function(t){e.$set(e.formData,"case_erp_customer_f_ComNature",t)},expression:"formData.case_erp_customer_f_ComNature"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("地址"),prop:"case_erp_customer_f_Address"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_customer_f_Address,callback:function(t){e.$set(e.formData,"case_erp_customer_f_Address",t)},expression:"formData.case_erp_customer_f_Address"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("图片上传"),prop:"case_erp_customer_f_File"}},[a("l-upload",{attrs:{maxSize:"2",sizeType:"MB",limit:9,listType:"picture-card",placeholder:e.$t("请输入")},model:{value:e.formData.case_erp_customer_f_File,callback:function(t){e.$set(e.formData,"case_erp_customer_f_File",t)},expression:"formData.case_erp_customer_f_File"}})],1)],1)],1):e._e(),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"form_flex"},[a("div",{staticClass:"l-title form_name"},[e._v(e._s(e.$t("联系人")))]),a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.handleCase_erp_customercontactsAddRow}},[e._v(e._s(e.$t("增加")))])],1),e._l(e.case_erp_customercontacts_data,(function(t,r){return a("div",{key:r},[a("div",{staticClass:"form_flex",staticStyle:{"padding-left":"8px"}},[a("div",{staticClass:"form_subtitle"},[e._v(" "+e._s(e.$t("联系人"+(r+1)))+" ")]),a("el-radio",{attrs:{label:r},model:{value:e.index_f_IsDefault,callback:function(t){e.index_f_IsDefault=t},expression:"index_f_IsDefault"}},[e._v(" "+e._s(e.$t("默认"))+" ")])],1),a("div",{staticClass:"mt-16"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("姓名"),labelWidth:"60px",rules:{required:!0,message:"姓名不能为空"}}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:t.f_Name,callback:function(a){e.$set(t,"f_Name",a)},expression:"item.f_Name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("电话"),labelWidth:"60px"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:t.f_Phone,callback:function(a){e.$set(t,"f_Phone",a)},expression:"item.f_Phone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("职业"),labelWidth:"60px"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:t.f_Post,callback:function(a){e.$set(t,"f_Post",a)},expression:"item.f_Post"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("部门"),labelWidth:"60px"}},[a("el-input",{attrs:{placeholder:e.$t("请输入")},model:{value:t.f_Dep,callback:function(a){e.$set(t,"f_Dep",a)},expression:"item.f_Dep"}})],1)],1)],1)])}))],2)],1)])],1)],1)],1)])],1)},s=[],c=(a("a434"),a("96cf"),a("1da1")),_=window.$api.erpcase.customer,o={props:{setBlock:{type:Boolean,default:!0},f_State:{}},data:function(){return{index_f_IsDefault:0,moduleCode:"ERP_Customers",activeName:"tab0",formData:{case_erp_customer_f_Name:"",case_erp_customer_f_Type:"",case_erp_customer_f_Industry:"",case_erp_customer_f_Source:"",case_erp_customer_f_Scale:"",case_erp_customer_f_ComNature:"",case_erp_customer_f_Address:"",case_erp_customer_f_File:"",case_erp_customer_f_DefaultName:"",case_erp_customer_f_DefaultPhone:"",case_erp_customer_f_DefaultPost:"",case_erp_customer_f_DefaultDep:""},rules:{case_erp_customer_f_Name:[{required:!0,message:"请输入客户名称"}],case_erp_customer_f_Type:[{required:!0,message:"请选择客户类型"}],case_erp_customer_f_Industry:[{required:!0,message:"请输入客户所在行业"}],case_erp_customer_f_Source:[{required:!0,message:"请选择来源"}]},case_erp_customercontacts_columns:[{id:"case_erp_customercontacts_F_Name",prop:"f_Name",label:"姓名",required:!0},{id:"case_erp_customercontacts_F_Phone",prop:"f_Phone",label:"电话",patterns:[{msg:"请输入电话号",reg:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/}]},{id:"case_erp_customercontacts_F_Post",prop:"f_Post",label:"职位"},{id:"case_erp_customercontacts_F_Dep",prop:"f_Dep",label:"部门"},{id:"case_erp_customercontacts_F_IsDefault",prop:"f_IsDefault",label:""}],case_erp_customercontacts_data:[]}},computed:{case_erp_customer_f_TypeOptions:function(){return[{value:" 普通客户",label:" 普通客户"},{value:"重要客户",label:"重要客户"},{value:"SVIP客户",label:"SVIP客户"}]},case_erp_customer_f_SourceOptions:function(){return[{value:"电话销售",label:"电话销售"},{value:"主动来电 ",label:"主动来电"},{value:"客户介绍",label:"客户介绍"},{label:"访问官网",value:"访问官网"},{label:"其他途径",value:"其他途径"}]},case_erp_customer_f_ScaleOptions:function(){return[{value:"20人以下",label:"20人以下"},{value:"20~50人",label:"20~50人"},{value:"50~100人",label:"50~100人"},{label:"100~500人",value:"100~500人"},{label:"500人以上",value:"500人以上"}]},case_erp_customer_f_ComNatureOptions:function(){return this.lr_loadDataItem("CompanyNature"),this.lr_dataItemOptions(this.lr_dataItem["CompanyNature"])}},methods:{defaults:function(){this.formData.case_erp_customer_f_DefaultName=this.case_erp_customercontacts_data[this.index_f_IsDefault].f_Name,this.formData.case_erp_customer_f_DefaultPhone=this.case_erp_customercontacts_data[this.index_f_IsDefault].f_Phone,this.formData.case_erp_customer_f_DefaultPost=this.case_erp_customercontacts_data[this.index_f_IsDefault].f_Post,this.formData.case_erp_customer_f_DefaultDep=this.case_erp_customercontacts_data[this.index_f_IsDefault].f_Dep;var e=0;for(e in this.case_erp_customercontacts_data)e==this.index_f_IsDefault?this.case_erp_customercontacts_data[e].f_IsDefault="0":this.case_erp_customercontacts_data[e].f_IsDefault="1"},handleCase_erp_customercontactsAddRow:function(){var e={f_Name:"",f_Phone:"",f_Post:"",f_Dep:"",f_IsDefault:""};this.case_erp_customercontacts_data.push(e)},handleCase_erp_customercontactsDeleteRow:function(e){this.case_erp_customercontacts_data.splice(e.index,1)},resetForm:function(){this.$formClear(this.$refs.form),this.activeName="tab0",this.case_erp_customercontacts_data=[]},validateForm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$formValidateWraper(e.$refs.form);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()},setForm:function(e){if(this.$setFormData(this.formData,e.caseErpCustomerEntity,"case_erp_customer"),this.case_erp_customercontacts_data=e.caseErpCustomercontactsList,e.caseErpCustomercontactsList.length>0)for(var t in e.caseErpCustomercontactsList)"0"==e.caseErpCustomercontactsList[t].f_IsDefault&&(this.index_f_IsDefault=t-0)},getForm:function(){var e={};return e.caseErpCustomerEntity=this.$getFormData(this.formData,"case_erp_customer"),e.caseErpCustomercontactsList=this.case_erp_customercontacts_data,e},loadFormData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.keyValue,a.next=3,t.$awaitWraper(_.get(r));case 3:if(s=a.sent,!s){a.next=9;break}return t.setForm(s),a.abrupt("return",!0);case 9:return a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()},saveForm:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.keyValue,s=e.isEdit,t.case_erp_customercontacts_data.length>0&&t.defaults(),c=t.getForm(),c.caseErpCustomerEntity.f_State=t.f_State,!s){a.next=10;break}return a.next=7,t.$awaitWraper(_.update(r,c));case 7:return a.abrupt("return",a.sent);case 10:return c.caseErpCustomerEntity.f_Id=r,a.next=13,t.$awaitWraper(_.add(c));case 13:return a.abrupt("return",a.sent);case 14:case"end":return a.stop()}}),a)})))()}}},l=o,u=a("2877"),n=Object(u["a"])(l,r,s,!1,null,null,null);t["default"]=n.exports}}]);