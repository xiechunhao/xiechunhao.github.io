(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views-user-index"],{"62cd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page",attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},attrs:{title:e.$t("公司信息")}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"learun-tree",attrs:{data:e.lr_companyTree,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("span",{staticClass:"lr-tree-node"},[a("i",{staticClass:"learun-icon-co"}),e._v(" "+e._s(e.$t(r.label))+" ")])}}],null,!1,348893107)})],1)]},proxy:!0}],null,!1,1654027089)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("l-tree-select",{attrs:{placeholder:e.$t("请选择部门"),options:e.lr_departmentTree(e.lr_departments[e.companyId]),size:"mini"},on:{change:e.handleChangeDept},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1),a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入姓名/账号/电话"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{btnText:e.$t("同步")},on:{click:function(t){return e.handleAdd()}}},[a("l-excel-btns")],1)]},proxy:!0}],null,!1,3126601382)},[a("l-table",{attrs:{columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,loading:e.tableLoading,"row-key":"f_UserId",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_Gender",fn:function(t){return[1==t.row.f_Gender?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("男")))]):a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(e.$t("女")))])]}},{key:"f_CompanyId",fn:function(t){return[e._v(" "+e._s((e.lr_companyList.find((function(e){return e.f_CompanyId==t.row.f_CompanyId}))||{}).f_FullName||"")+" ")]}},{key:"f_DepartmentId",fn:function(t){return[e._v(" "+e._s(e.lr_departmentName(e.lr_departments[t.row.f_CompanyId]||[],t.row.f_DepartmentId))+" ")]}}],null,!1,2235767684)})],1)],1)},l=[],n=(a("159b"),a("96cf"),a("1da1")),o=window.$api.wechat.user,s={data:function(){return{lr_isPage:!0,treeLoading:!1,searchWord:"",searchTableData:null,tableLoading:!1,columns:[{label:"姓名",prop:"f_RealName",minWidth:"110"},{label:"账号",prop:"f_Account",width:"110"},{label:"手机",prop:"f_Mobile",width:"108"},{label:"公司",prop:"f_CompanyId",width:"120"},{label:"部门",prop:"f_DepartmentId",width:"88"},{label:"性别",prop:"f_Gender",width:"80",align:"center"}],tableData:[],tableTotal:0,tablePageSize:50,tableCurrentPage:1,companyId:"",departmentId:"",departmentLoading:!1}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadTableData(),e.treeLoading=!0,t.next=4,e.lr_loadCompanys();case 4:e.treeLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadTableData:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:this.searchWord,companyId:this.companyId,departmentId:this.departmentId,code:"xxx"};o.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);a.rows.forEach((function(e){t.lr_loadDepartments(e.f_CompanyId)})),t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},handleNodeClick:function(e){this.companyId=e.value,this.departmentId="",this.lr_loadDepartments(this.companyId),this.loadTableData()},handleChangeDept:function(){this.loadTableData()},hanleSearch:function(){this.loadTableData()},handleAdd:function(){}}},i=s,d=a("2877"),f=Object(d["a"])(i,r,l,!1,null,null,null);t["default"]=f.exports},"7c0a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{directives:[{name:"loading",rawName:"v-loading",value:e.syncLoading,expression:"syncLoading"}],staticClass:"l-tab-page",attrs:{left:240,"element-loading-text":"拼命同步中..."},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},attrs:{title:e.$t("公司信息")}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"learun-tree",attrs:{data:e.lr_companyTree,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("span",{staticClass:"lr-tree-node"},[a("i",{staticClass:"learun-icon-co"}),e._v(" "+e._s(e.$t(r.label))+" ")])}}],null,!1,348893107)})],1)]},proxy:!0}],null,!1,1654027089)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("l-tree-select",{attrs:{placeholder:e.$t("请选择部门"),options:e.lr_departmentTree(e.lr_departments[e.companyId]),size:"mini"},on:{change:e.handleChangeDept},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1),a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入姓名/账号/电话"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{on:{click:function(t){return e.handleAdd()}}},[e.lr_hasPageAuth("Sync","buttons")?a("el-button-group"):e._e(),a("l-excel-btns"),e.lr_hasPageAuth("ExportExcel","buttons")?a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-download"},on:{click:e.handleDownLoad}},[e._v(e._s(e.$t("导出")))])],1):e._e()],1)]},proxy:!0}],null,!1,2570126079)},[a("l-table",{attrs:{columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,loading:e.tableLoading,"row-key":"f_UserId",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_Gender",fn:function(t){return[1==t.row.f_Gender?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("男")))]):a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(e.$t("女")))])]}},{key:"f_CompanyId",fn:function(t){return[e._v(" "+e._s((e.lr_companyList.find((function(e){return e.f_CompanyId==t.row.f_CompanyId}))||{}).f_FullName||"")+" ")]}},{key:"f_DepartmentId",fn:function(t){return[e._v(" "+e._s(e.lr_departmentName(e.lr_departments[t.row.f_CompanyId]||[],t.row.f_DepartmentId))+" ")]}},{key:"f_EnabledMark",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleEnableChange(t.row)}},model:{value:t.row.f_EnabledMark,callback:function(a){e.$set(t.row,"f_EnabledMark",a)},expression:"scope.row.f_EnabledMark"}})]}}],null,!1,4182437145)},[a("l-table-btns",{attrs:{btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,height:600,width:720},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form"})],1),a("l-dialog",{attrs:{title:e.$t(e.syncTitle),visible:e.syncVisible,height:150,width:400},on:{"update:visible":function(t){e.syncVisible=t},ok:e.handleSync}},[a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"syncForm",attrs:{size:"small","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("截止时间"),prop:"startTime"}},[a("l-date",{attrs:{format:"yyyy-MM-dd HH:mm:ss",dateType:"datetime",clearable:!0,placeholder:e.$t("请选择")},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)],1)],1)],1)])],1)},l=[],n=(a("99af"),a("159b"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-rblock l-form-viewer",staticStyle:{padding:"8px"}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"80px"}},[a("div",{staticClass:"l-auto-window "},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.lr_hasPageAuth("tab0")?a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("基础信息"),name:"tab0"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[e.lr_formLookAuth("f_Account")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("账号"),prop:"f_Account"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Account",e.isReadOnly),readonly:e.readonlyAccount},model:{value:e.formData.f_Account,callback:function(t){e.$set(e.formData,"f_Account",t)},expression:"formData.f_Account"}})],1)],1):e._e(),e.lr_formLookAuth("f_RealName")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("姓名"),prop:"f_RealName"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_RealName",e.isReadOnly)},model:{value:e.formData.f_RealName,callback:function(t){e.$set(e.formData,"f_RealName",t)},expression:"formData.f_RealName"}})],1)],1):e._e(),e.lr_formLookAuth("f_CompanyId")&&this.isPtUser?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("公司"),prop:"f_CompanyId"}},[a("l-tree-select",{attrs:{disabled:!e.lr_formEditAuth("f_CompanyId",e.isReadOnly),placeholder:e.$t("请选择公司"),options:e.lr_companyTree},on:{change:e.handleChangeCompany},model:{value:e.formData.f_CompanyId,callback:function(t){e.$set(e.formData,"f_CompanyId",t)},expression:"formData.f_CompanyId"}})],1)],1):e._e(),e.lr_formLookAuth("f_DepartmentId")&&this.isPtUser?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("部门"),prop:"f_DepartmentId"}},[a("l-tree-select",{attrs:{disabled:!e.lr_formEditAuth("f_DepartmentId",e.isReadOnly),placeholder:e.$t("请选择部门"),options:e.lr_departmentTree(e.lr_departments[e.formData.f_CompanyId]||[])},model:{value:e.formData.f_DepartmentId,callback:function(t){e.$set(e.formData,"f_DepartmentId",t)},expression:"formData.f_DepartmentId"}})],1)],1):e._e(),e.lr_formLookAuth("f_Password")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("密码"),prop:"f_Password"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Password",e.isReadOnly),type:e.passwordType,readonly:e.readonlyPassword},model:{value:e.formData.f_Password,callback:function(t){e.$set(e.formData,"f_Password",t)},expression:"formData.f_Password"}},[a("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"})])],1)],1):e._e(),e.lr_formLookAuth("f_Birthday")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("生日"),prop:"f_Birthday"}},[a("l-date",{attrs:{disabled:!e.lr_formEditAuth("f_Birthday",e.isReadOnly),dateType:"date"},model:{value:e.formData.f_Birthday,callback:function(t){e.$set(e.formData,"f_Birthday",t)},expression:"formData.f_Birthday"}})],1)],1):e._e(),e.lr_formLookAuth("f_Email")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("邮箱"),prop:"f_Email"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Email",e.isReadOnly)},model:{value:e.formData.f_Email,callback:function(t){e.$set(e.formData,"f_Email",t)},expression:"formData.f_Email"}})],1)],1):e._e(),e.lr_formLookAuth("f_Mobile")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("手机"),prop:"f_Mobile"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Mobile",e.isReadOnly)},model:{value:e.formData.f_Mobile,callback:function(t){e.$set(e.formData,"f_Mobile",t)},expression:"formData.f_Mobile"}})],1)],1):e._e(),e.lr_formLookAuth("f_Telephone")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("电话"),prop:"f_Telephone"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Telephone",e.isReadOnly)},model:{value:e.formData.f_Telephone,callback:function(t){e.$set(e.formData,"f_Telephone",t)},expression:"formData.f_Telephone"}})],1)],1):e._e(),e.lr_formLookAuth("f_OICQ")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"QQ",prop:"f_OICQ"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_OICQ",e.isReadOnly)},model:{value:e.formData.f_OICQ,callback:function(t){e.$set(e.formData,"f_OICQ",t)},expression:"formData.f_OICQ"}})],1)],1):e._e(),e.lr_formLookAuth("f_WeChat")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("微信"),prop:"f_WeChat"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_WeChat",e.isReadOnly)},model:{value:e.formData.f_WeChat,callback:function(t){e.$set(e.formData,"f_WeChat",t)},expression:"formData.f_WeChat"}})],1)],1):e._e(),e.lr_formLookAuth("f_BindIp")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("绑定IP"),prop:"f_BindIp"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_BindIp",e.isReadOnly)},model:{value:e.formData.f_BindIp,callback:function(t){e.$set(e.formData,"f_BindIp",t)},expression:"formData.f_BindIp"}})],1)],1):e._e(),e.lr_formLookAuth("f_IsCheckPassword")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("密码验证"),prop:"f_IsCheckPassword"}},[a("el-switch",{attrs:{disabled:!e.lr_formEditAuth("f_IsCheckPassword",e.isReadOnly),"active-value":0,"inactive-value":1},model:{value:e.formData.f_IsCheckPassword,callback:function(t){e.$set(e.formData,"f_IsCheckPassword",t)},expression:"formData.f_IsCheckPassword"}})],1)],1):e._e(),e.lr_formLookAuth("f_EnabledMark")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("状态"),prop:"f_EnabledMark"}},[a("el-switch",{attrs:{disabled:!e.lr_formEditAuth("f_EnabledMark",e.isReadOnly),"active-value":1,"inactive-value":0},model:{value:e.formData.f_EnabledMark,callback:function(t){e.$set(e.formData,"f_EnabledMark",t)},expression:"formData.f_EnabledMark"}})],1)],1):e._e(),e.lr_formLookAuth("f_SortCode")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("排序"),prop:"f_SortCode"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_SortCode",e.isReadOnly)},model:{value:e.formData.f_SortCode,callback:function(t){e.$set(e.formData,"f_SortCode",t)},expression:"formData.f_SortCode"}})],1)],1):e._e(),e.lr_formLookAuth("f_Description")?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("描述"),prop:"f_Description"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_Description",e.isReadOnly),type:"textarea"},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1):e._e()],1)])],1):e._e(),this.isPtUser&&e.lr_hasPageAuth("tab1")?a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("身份信息"),name:"tab1"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[e.lr_formLookAuth("f_IdCard")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("身份证号"),prop:"f_IdCard"}},[a("el-input",{attrs:{disabled:!e.lr_formEditAuth("f_IdCard",e.isReadOnly)},model:{value:e.formData.f_IdCard,callback:function(t){e.$set(e.formData,"f_IdCard",t)},expression:"formData.f_IdCard"}})],1)],1):e._e(),e.lr_formLookAuth("f_Party")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("政治面貌"),prop:"f_Party"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Party",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["PartyManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Party,callback:function(t){e.$set(e.formData,"f_Party",t)},expression:"formData.f_Party"}})],1)],1):e._e(),e.lr_formLookAuth("f_Job")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("行政职务"),prop:"f_Job"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Job",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["JobManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Job,callback:function(t){e.$set(e.formData,"f_Job",t)},expression:"formData.f_Job"}})],1)],1):e._e(),e.lr_formLookAuth("f_Level")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("行政职级"),prop:"f_Level"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Level",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["LevelManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Level,callback:function(t){e.$set(e.formData,"f_Level",t)},expression:"formData.f_Level"}})],1)],1):e._e(),e.lr_formLookAuth("f_SecretLevel")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("用户密级"),prop:"f_SecretLevel"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_SecretLevel",e.isReadOnly),options:e.f_SecretLevelOptions},model:{value:e.formData.f_SecretLevel,callback:function(t){e.$set(e.formData,"f_SecretLevel",t)},expression:"formData.f_SecretLevel"}})],1)],1):e._e(),e.lr_formLookAuth("f_Title")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("职称等级"),prop:"f_Title"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Title",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["TitleManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Title,callback:function(t){e.$set(e.formData,"f_Title",t)},expression:"formData.f_Title"}})],1)],1):e._e(),e.lr_formLookAuth("f_Role")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("技术职务"),prop:"f_Role"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Role",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["RoleManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Role,callback:function(t){e.$set(e.formData,"f_Role",t)},expression:"formData.f_Role"}})],1)],1):e._e(),e.lr_formLookAuth("f_Post")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("管理职务"),prop:"f_Post"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_Post",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["PostManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_Post,callback:function(t){e.$set(e.formData,"f_Post",t)},expression:"formData.f_Post"}})],1)],1):e._e(),e.lr_formLookAuth("f_WorkerDegree")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("职业技能"),prop:"f_WorkerDegree"}},[a("l-select",{attrs:{disabled:!e.lr_formEditAuth("f_WorkerDegree",e.isReadOnly),options:e.lr_dataItemOptions(e.lr_dataItem["WorkerDegreeManage"]),labelKey:"f_ItemName",valueKey:"f_ItemValue"},model:{value:e.formData.f_WorkerDegree,callback:function(t){e.$set(e.formData,"f_WorkerDegree",t)},expression:"formData.f_WorkerDegree"}})],1)],1):e._e(),e.lr_formLookAuth("f_Gender")?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("性别"),prop:"f_Gender"}},[a("l-radio",{attrs:{disabled:!e.lr_formEditAuth("f_Gender",e.isReadOnly),options:e.optionsGender},model:{value:e.formData.f_Gender,callback:function(t){e.$set(e.formData,"f_Gender",t)},expression:"formData.f_Gender"}})],1)],1):e._e()],1)])],1):e._e(),this.isPtUser&&e.lr_hasPageAuth("tab2")?a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("角色信息"),name:"tab2"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[a("l-edit-table",{attrs:{addBtnText:"添加角色",dataSource:e.formRoles},on:{addRow:e.handleAddRole,deleteRow:e.handleDeleteRole}},[a("el-table-column",{attrs:{label:e.$t("编号"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getRoleCode(t.row.f_ObjectId))+" ")]}}],null,!1,780275570)}),a("el-table-column",{attrs:{prop:"f_ObjectId",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getRoleName(t.row.f_ObjectId))+" ")]}}],null,!1,4088519864)})],1)],1)])],1):e._e(),this.isPtUser&&e.lr_hasPageAuth("tab3")?a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("岗位信息"),name:"tab3"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[a("l-edit-table",{attrs:{addBtnText:"添加岗位",dataSource:e.formPosts},on:{addRow:e.handleAddPost,deleteRow:e.handleDeletePost}},[a("el-table-column",{attrs:{label:e.$t("编号"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPostCode(t.row.f_ObjectId))+" ")]}}],null,!1,2943094238)}),a("el-table-column",{attrs:{prop:"f_ObjectId",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPostName(t.row.f_ObjectId))+" ")]}}],null,!1,231675668)})],1)],1)])],1):e._e(),this.isPtUser&&e.lr_hasPageAuth("tab4")?a("el-tab-pane",{staticClass:"l-tabs-container",attrs:{label:e.$t("负责部门"),name:"tab4"}},[a("el-row",{attrs:{gutter:0}},[a("div",{staticClass:"l-rblock"},[a("l-edit-table",{attrs:{addBtnText:"添加部门",dataSource:e.formDepartments},on:{addRow:e.handleAddDepartment,deleteRow:e.handleDeleteDepartment}},[a("el-table-column",{attrs:{label:e.$t("编号"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getDepartmentCode(t.row.f_ObjectId))+" ")]}}],null,!1,2446176322)}),a("el-table-column",{attrs:{prop:"f_ObjectId",label:e.$t("名称"),minWidth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getDepartmentName(t.row.f_ObjectId))+" ")]}}],null,!1,452427528)})],1)],1)])],1):e._e()],1)],1)]),a("l-dialog",{attrs:{title:e.$t("添加角色"),visible:e.selectRoleVisible,height:480,width:"800px"},on:{"update:visible":function(t){e.selectRoleVisible=t},ok:e.handleRoleSelectOk,closed:e.handleRoleSelectClosed}},[a("l-role-select-panel",{ref:"roleSelectPanel"})],1),a("l-dialog",{attrs:{title:e.$t("添加岗位"),visible:e.selectPostVisible,height:480,width:"1024px"},on:{"update:visible":function(t){e.selectPostVisible=t},ok:e.handlePostSelectOk,closed:e.handlePostSelectClosed}},[a("l-post-select-panel",{ref:"postSelectPanel"})],1),a("l-dialog",{attrs:{title:e.$t("添加部门"),visible:e.selectDepartmentVisible,height:480,width:"800px"},on:{"update:visible":function(t){e.selectDepartmentVisible=t},ok:e.handleDepartmentSelectOk,closed:e.handleDepartmentSelectClosed,opened:e.handleDepartmentSelectOpened}},[a("l-department-select-panel",{ref:"departmentSelectPanel"})],1)],1)},s=[],i=(a("4de4"),a("c740"),a("d81d"),a("a434"),a("2909")),d={props:{isReadOnly:{type:Boolean,default:!1}},data:function(){var e=this;return{passwordType:"password",readonlyAccount:!1,readonlyPassword:!1,departmentLoad:!1,optionsGender:[{label:this.$t("男"),value:1},{label:this.$t("女"),value:0}],formData:{f_SecurityLevel:"",f_Account:"",f_Password:"",f_RealName:"",f_HeadIcon:"",f_Gender:1,f_Birthday:null,f_Mobile:"",f_Telephone:"",f_Email:"",f_OICQ:"",f_WeChat:"",f_CompanyId:"",f_DepartmentId:"",f_EnabledMark:1,f_Description:"",f_IsCheckPassword:1,f_BindIp:"",f_DomainName:"",f_DomainOnly:1,f_IdCard:"",f_Party:"",f_Job:"",f_Level:"",f_SecretLevel:"",f_Title:"",f_Role:"",f_Post:"",f_WorkerDegree:"",f_SortCode:99},rules:{f_Account:[{required:!0,message:this.$t("请输入账号")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_UserId},tableName:"lr_base_user",keyName:"f_UserId",trigger:"null"}],f_RealName:[{required:!0,message:this.$t("请输入姓名")}],f_CompanyId:[{required:!0,message:this.$t("请输入公司"),trigger:"blur"}],f_DepartmentId:[{required:!0,message:this.$t("请输入部门"),trigger:"blur"}],f_Password:[{required:!0,message:this.$t("请输入密码")}],f_DomainName:[{validator:this.lr_existDbFiled,fieldName:"f_DomainName",keyValue:function(){return e.formData.f_UserId},tableName:"lr_base_user",keyName:"f_UserId",trigger:"null"}]},formRoles:[],selectRoleVisible:!1,formPosts:[],selectPostVisible:!1,formDepartments:[],selectDepartmentVisible:!1,isPtUser:!0}},created:function(){this.lr_loadDataItem("PartyManage"),this.lr_loadDataItem("JobManage"),this.lr_loadDataItem("LevelManage"),this.lr_loadDataItem("TitleManage"),this.lr_loadDataItem("RoleManage"),this.lr_loadDataItem("PostManage"),this.lr_loadDataItem("WorkerDegreeManage")},computed:{f_SecretLevelOptions:function(){return[{value:1,label:this.$t("非密")},{value:2,label:this.$t("一般")},{value:3,label:this.$t("重要")},{label:this.$t("核心"),value:4}]},activeName:{get:function(){return"tab0"},set:function(){var e=this,t=["tab0","tab1","tab2","tab3","tab4"].filter((function(t){return e.lr_hasPageAuth(t)}));return t.length>0?t[0].value:""}}},methods:{handleChangeCompany:function(){this.formData.f_DepartmentId=""},resetForm:function(){this.passwordType="password",this.readonlyPassword=!1,this.readonlyAccount=!1,this.formData.f_UserId="",this.activeName="tab0",this.formRoles=[],this.formPosts=[],this.formDepartments=[],this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){return this.$formValidateWraper(this.$refs.form)},setForm:function(e){e=this.$deepClone(e),e.user.f_SecurityLevel?this.isPtUser=!1:(this.readonlyPassword=!0,this.isPtUser=!0),this.readonlyAccount=!0,this.formData=e.user,this.formData.f_Password=this.$t("密码明文不展示"),this.formRoles=e.roles,this.formPosts=e.posts,this.formDepartments=e.departments},getForm:function(){var e={user:this.$deepClone(this.formData)};return this.appConfig.online&&(e.user.f_Password="123456"),e.roles=this.$deepClone(this.formRoles),e.posts=this.$deepClone(this.formPosts),e.departments=this.$deepClone(this.formDepartments),e},handleAddRole:function(){this.selectRoleVisible=!0},handleRoleSelectClosed:function(){this.$refs.roleSelectPanel.resetForm()},handleRoleSelectOk:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.roleSelectPanel.getForm();case 2:r=t.sent,l=r.map((function(e){return{f_Category:1,f_ObjectId:e.f_RoleId}})),n=l.filter((function(t){return-1==e.formRoles.findIndex((function(e){return e.f_ObjectId==t.f_ObjectId}))})),(a=e.formRoles).push.apply(a,Object(i["a"])(n)),e.selectRoleVisible=!1;case 7:case"end":return t.stop()}}),t)})))()},handleDeleteRole:function(e){this.formRoles.splice(e.index,1)},handleAddPost:function(){this.selectPostVisible=!0},handlePostSelectClosed:function(){this.$refs.postSelectPanel.resetForm()},handlePostSelectOk:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.postSelectPanel.getForm();case 2:r=t.sent,l=r.map((function(e){return{f_Category:2,f_ObjectId:e.f_PostId}})),n=l.filter((function(t){return-1==e.formPosts.findIndex((function(e){return e.f_ObjectId==t.f_ObjectId}))})),(a=e.formPosts).push.apply(a,Object(i["a"])(n)),e.selectPostVisible=!1;case 7:case"end":return t.stop()}}),t)})))()},handleDeletePost:function(e){this.formPosts.splice(e.index,1)},handleAddDepartment:function(){this.selectDepartmentVisible=!0},handleDepartmentSelectClosed:function(){this.$refs.departmentSelectPanel.resetForm()},handleDepartmentSelectOpened:function(){this.$refs.departmentSelectPanel.loadData()},handleDepartmentSelectOk:function(){var e,t=this,a=this.$refs.departmentSelectPanel.getForm(),r=a.map((function(e){return{f_Category:3,f_ObjectId:e.f_DepartmentId}})),l=r.filter((function(e){return-1==t.formDepartments.findIndex((function(t){return t.f_ObjectId==e.f_ObjectId}))}));(e=this.formDepartments).push.apply(e,Object(i["a"])(l)),this.selectDepartmentVisible=!1},handleDeleteDepartment:function(e){this.formDepartments.splice(e.index,1)},getDepartmentName:function(e){return this.lr_departmentNameByOne(e)},getDepartmentCode:function(e){return this.lr_departmentNameByOne(e,"f_EnCode")},getRoleName:function(e){return this.lr_loadRole(e),(this.lr_role[e]||{}).f_FullName||""},getRoleCode:function(e){return this.lr_loadRole(e),(this.lr_role[e]||{}).f_EnCode||""},getPostName:function(e){return this.lr_loadPost(e),(this.lr_post[e]||{}).f_Name||""},getPostCode:function(e){return this.lr_loadPost(e),(this.lr_post[e]||{}).f_EnCode||""},showPassword:function(){this.readonlyPassword||(""==this.passwordType?this.passwordType="password":this.passwordType="")}}},f=d,c=a("2877"),m=Object(c["a"])(f,o,s,!1,null,null,null),u=m.exports,p=window.$api.organization.user,_={components:{MyForm:u},data:function(){return{lr_isPage:!0,treeLoading:!1,searchWord:"",searchTableData:null,tableLoading:!1,columns:[{label:"姓名",prop:"f_RealName",minWidth:"110"},{label:"账号",prop:"f_Account",width:"110"},{label:"手机",prop:"f_Mobile",width:"108"},{label:"公司",prop:"f_CompanyId",width:"120"},{label:"部门",prop:"f_DepartmentId",width:"140"},{label:"性别",prop:"f_Gender",width:"80",align:"center"},{label:"状态",prop:"f_EnabledMark",width:"64",align:"center"}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:40},{prop:"Delete",label:this.$t("删除"),width:40},{prop:"ResetPassword",label:this.$t("重置密码"),width:60}],tableData:[],tableTotal:0,tablePageSize:50,tableCurrentPage:1,companyId:"",departmentId:"",departmentLoading:!1,formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1,syncLoading:!1,syncVisible:!1,syncTitle:this.$t("指定更新截止时间"),startTime:""}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadTableData(),e.treeLoading=!0,t.next=4,e.lr_loadCompanys();case 4:e.treeLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadTableData:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_SortCode ASC,F_CreateDate DESC",keyword:this.searchWord,companyId:this.companyId,departmentId:this.departmentId};p.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);a.rows.forEach((function(e){e.f_CompanyId&&t.lr_loadDepartments(e.f_CompanyId)})),t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},handleNodeClick:function(e){this.companyId=e.value,this.departmentId="",this.lr_loadDepartments(this.companyId),this.loadTableData()},handleChangeDept:function(){this.loadTableData()},hanleSearch:function(){this.loadTableData()},handleEnableChange:function(e){var t=this;p.updateState(e.f_UserId,e.f_EnabledMark).then((function(){t.$message({type:"success",message:t.$t("更新成功!")})}))},handleDownLoad:function(){this.lr_downFile("organization/users/export","用户导出")},handleAdd:function(){this.formEdit=!1,this.showForm("新增用户")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,this.showForm("编辑用户")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){p.remove(t.f_UserId).then((function(){a.$message({type:"success",message:a.$t("删除成功!")}),a.loadTableData()}))})).catch((function(){a.$message({type:"info",message:a.$t("已取消删除")})}))},handleSave:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e("保存数据"),r.next=3,a.$refs.form.validateForm();case 3:if(!r.sent){r.next=17;break}if(l=a.$refs.form.getForm(),!a.formEdit){r.next=11;break}return r.next=8,p.update(a.formEditRow.f_UserId,l);case 8:a.$message({type:"success",message:a.$t("更新成功!")}),r.next=15;break;case 11:return l.user.f_Password=a.$md5(l.user.f_Password),r.next=14,p.add(l);case 14:a.$message({type:"success",message:a.$t("添加成功!")});case 15:a.formVisible=!1,a.loadTableData();case 17:t();case 18:case"end":return r.stop()}}),r)})))()},handleOpenedForm:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.formEdit){r.next=7;break}return e("加载数据中..."),r.next=4,a.$awaitWraper(p.get(a.formEditRow.f_UserId));case 4:l=r.sent,a.$refs.form.setForm(l),t();case 7:case"end":return r.stop()}}),r)})))()},handleCloseForm:function(){this.$refs.form.resetForm()},showForm:function(e){this.formTitle=e,this.formVisible=!0},handleResetPassword:function(e,t){var a=this;this.$confirm("".concat(this.$t("是否重置用户"),"【").concat(t.f_RealName,"】").concat(this.$t("密码?")),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){p.resetPassword(t.f_UserId).then((function(){a.$message({type:"success",message:a.$t("重置成功!")})}))})).catch((function(){a.$message({type:"info",message:a.$t("已取消重置")})}))},openFrom:function(){this.syncVisible=!0},handleSync:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm(e.$t("此操作将开始同步用户信息, 是否继续?"),e.$t("提示"),{confirmButtonText:e.$t("确定"),cancelButtonText:e.$t("取消"),type:"warning"}).then((function(){e.syncVisible=!1,e.syncLoading=!0,p.syncData(e.startTime).then((function(){e.$message({type:"success",message:e.$t("同步成功!")}),e.loadTableData(),e.syncLoading=!1})).catch((function(){}))})).catch((function(){e.$message({type:"info",message:e.$t("已取消同步")})}));case 1:case"end":return t.stop()}}),t)})))()}}},h=_,b=Object(c["a"])(h,r,l,!1,null,null,null);t["default"]=b.exports},bfbd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page"},[a("l-panel",{scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入关键字查询"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{on:{click:function(t){return e.handleAdd()}}},[a("l-excel-btns")],1)]},proxy:!0}],null,!1,831781051)},[a("l-table",{attrs:{loading:e.tableLoading,columns:e.columns,dataSource:e.tableShowData,"row-key":"f_Id"},scopedSlots:e._u([{key:"f_CreateDate",fn:function(t){return[e._v(" "+e._s(e.lr_dateFormat(t.row.f_CreateDate))+" ")]}},{key:"f_Icon",fn:function(e){return[a("i",{class:e.row.f_Icon})]}}],null,!1,1614965905)},[a("l-table-btns",{attrs:{filterBtns:e.filterBtns,btns:e.tableBtns},on:{click:e.lr_handleTableBtnClick}})],1)],1),a("l-dialog",{attrs:{title:e.formTitle,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},ok:e.handleSave,close:e.handleCloseForm,opened:e.handleOpenedForm}},[a("my-form",{ref:"form"})],1)],1)},l=[],n=(a("4de4"),a("a434"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-from-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"mini","label-width":"88px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("用户编码"),prop:"f_Code"}},[a("el-input",{model:{value:e.formData.f_Code,callback:function(t){e.$set(e.formData,"f_Code",t)},expression:"formData.f_Code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("用户名称"),prop:"f_Name"}},[a("el-input",{model:{value:e.formData.f_Name,callback:function(t){e.$set(e.formData,"f_Name",t)},expression:"formData.f_Name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("图标"),prop:"f_Icon"}},[a("l-input-icon",{attrs:{iconList:e.lr_icons},model:{value:e.formData.f_Icon,callback:function(t){e.$set(e.formData,"f_Icon",t)},expression:"formData.f_Icon"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("颜色"),prop:"f_Colour"}},[a("l-input-color",{attrs:{placeholder:"请输入"},model:{value:e.formData.f_Colour,callback:function(t){e.$set(e.formData,"f_Colour",t)},expression:"formData.f_Colour"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("pc链接"),prop:"f_Url"}},[a("el-input",{model:{value:e.formData.f_Url,callback:function(t){e.$set(e.formData,"f_Url",t)},expression:"formData.f_Url"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("移动连接"),prop:"f_AppUrl"}},[a("el-input",{model:{value:e.formData.f_AppUrl,callback:function(t){e.$set(e.formData,"f_AppUrl",t)},expression:"formData.f_AppUrl"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$t("说明"),prop:"f_Description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.f_Description,callback:function(t){e.$set(e.formData,"f_Description",t)},expression:"formData.f_Description"}})],1)],1)],1)],1)},s=[],i={data:function(){var e=this;return{formData:{f_Code:"",f_Name:"",f_Icon:"",f_Colour:"#409eff",f_Url:"",f_AppUrl:"",f_Description:""},rules:{f_Code:[{required:!0,message:this.$t("请输入编码")},{validator:this.lr_existDbFiled,keyValue:function(){return e.formData.f_Id},tableName:"lr_im_sysuser",keyName:"f_Id",trigger:"null"}],f_Name:[{required:!0,message:this.$t("请输入名称")}],f_Icon:[{required:!0,message:this.$t("请选择图标")}],f_Colour:[{required:!0,message:this.$t("请选择颜色")}]}}},computed:{},created:function(){},methods:{resetForm:function(){this.formData.f_Id="",this.$refs.form&&this.$refs.form.resetFields()},validateForm:function(){return this.$formValidateWraper(this.$refs.form)},setForm:function(e){this.formData=this.$deepClone(e)},getForm:function(){var e=this.$deepClone(this.formData);return e}}},d=i,f=a("2877"),c=Object(f["a"])(d,o,s,!1,null,null,null),m=c.exports,u=window.$api.message.user,p={components:{MyForm:m},data:function(){return{lr_isPage:!0,columns:[{label:"用户名称",prop:"f_Name",minWidth:"120"},{label:"用户编码",prop:"f_Code",minWidth:"120"},{label:"图标",prop:"f_Icon",width:"60",align:"center"},{label:"创建人",prop:"f_CreateUserName",width:"100",align:"center"},{label:"创建时间",prop:"f_CreateDate",width:"160"},{label:"备注",prop:"f_Description",width:"200"}],tableBtns:[{prop:"Edit",label:this.$t("编辑"),width:40},{prop:"Delete",label:this.$t("删除"),width:40}],tableLoading:!1,searchWord:"",tableShowData:[],tableData:[],formVisible:!1,formTitle:"",formEditRow:null,formEdit:!1}},mounted:function(){var e=this;this.$nextTick((function(){e.loadTable()}))},computed:{},methods:{hanleSearch:function(){var e=this;this.searchWord?this.tableShowData=this.tableData.filter((function(t){return t.f_Name.indexOf(e.searchWord)>-1||t.f_Code.indexOf(e.searchWord)>-1})):this.tableShowData=this.tableData},loadTable:function(){var e=this;this.searchWord="",this.tableLoading=!0,u.getList().then((function(t){e.tableData=e.$deepClone(t.data.data),e.tableShowData=e.tableData,e.tableLoading=!1})).catch((function(){e.tableLoading=!1}))},handleAdd:function(){this.formEdit=!1,this.showForm("新增消息用户")},handleEdit:function(e,t){this.formEdit=!0,this.formEditRow=t,this.showForm("编辑消息用户")},handleDelete:function(e,t){var a=this;this.$confirm(this.$t("此操作将永久删除该数据, 是否继续?"),this.$t("提示"),{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){a.tableShowData.splice(e,1),u.remove(t.f_Id).then((function(){a.$message({type:"success",message:a.$t("删除成功!")})}))})).catch((function(){a.$message({type:"info",message:a.$t("已取消删除")})}))},handleSave:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e(),r.next=3,a.$refs.form.validateForm();case 3:if(r.sent){r.next=6;break}return t(),r.abrupt("return");case 6:l=a.$refs.form.getForm(),a.formEdit?u.update(l.f_Id,l).then((function(){t(),a.formVisible=!1,a.$message({type:"success",message:a.$t("更新成功!")}),a.loadTable()})).catch((function(){t()})):u.add(l).then((function(){t(),a.formVisible=!1,a.$message({type:"success",message:a.$t("添加成功!")}),a.loadTable()})).catch((function(){t()}));case 8:case"end":return r.stop()}}),r)})))()},handleOpenedForm:function(){this.formEdit&&this.$refs.form.setForm(this.formEditRow)},handleCloseForm:function(){this.$refs.form.resetForm()},showForm:function(e){this.formTitle=e,this.formVisible=!0},filterBtns:function(e,t){return t}}},_=p,h=Object(f["a"])(_,r,l,!1,null,null,null);t["default"]=h.exports},cc5d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.lr_loadPage?e._e():a("l-layout",{staticClass:"l-tab-page",attrs:{left:240},scopedSlots:e._u([{key:"left",fn:function(){return[a("l-panel",{staticStyle:{"padding-right":"0"},attrs:{title:e.$t("公司信息")}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"learun-tree",attrs:{data:e.lr_companyTree,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("span",{staticClass:"lr-tree-node"},[a("i",{staticClass:"learun-icon-co"}),e._v(" "+e._s(e.$t(r.label))+" ")])}}],null,!1,348893107)})],1)]},proxy:!0}],null,!1,1654027089)},[a("l-panel",{staticStyle:{"padding-left":"0"},scopedSlots:e._u([{key:"toolLeft",fn:function(){return[a("div",{staticClass:"l-panel--item"},[a("l-tree-select",{attrs:{placeholder:e.$t("请选择部门"),options:e.lr_departmentTree(e.lr_departments[e.companyId]),size:"mini"},on:{change:e.handleChangeDept},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1),a("div",{staticClass:"l-panel--item"},[a("el-input",{attrs:{placeholder:e.$t("请输入姓名/账号/电话"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hanleSearch.apply(null,arguments)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.hanleSearch},slot:"append"})],1)],1)]},proxy:!0},{key:"toolRight",fn:function(){return[a("l-tool-btns",{attrs:{hasAdd:!1}},[a("l-excel-btns"),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.handleSync()}}},[e._v(e._s(e.$t("同步至钉钉")))]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.handleSyncSystem()}}},[e._v(e._s(e.$t("同步至系统")))])],1)]},proxy:!0}],null,!1,2113048308)},[a("l-table",{attrs:{columns:e.lr_getPageColumns(e.columns),dataSource:e.tableData,loading:e.tableLoading,"row-key":"f_UserId",isPage:!0,pageTotal:e.tableTotal,tablePage:e.tableCurrentPage},on:{"update:tablePage":function(t){e.tableCurrentPage=t},"update:table-page":function(t){e.tableCurrentPage=t},loadPageData:e.turnTablePage},scopedSlots:e._u([{key:"f_Gender",fn:function(t){return[1==t.row.f_Gender?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("男")))]):a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(e.$t("女")))])]}},{key:"f_CompanyId",fn:function(t){return[e._v(" "+e._s((e.lr_companyList.find((function(e){return e.f_CompanyId==t.row.f_CompanyId}))||{}).f_FullName||"")+" ")]}},{key:"f_DepartmentId",fn:function(t){return[e._v(" "+e._s(e.lr_departmentName(e.lr_departments[t.row.f_CompanyId]||[],t.row.f_DepartmentId))+" ")]}},{key:"isSyn",fn:function(t){return[1==t.row.isSyn?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("已同步")))]):a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(e.$t("未同步")))])]}}],null,!1,3023625579)})],1)],1)},l=[],n=(a("159b"),a("96cf"),a("1da1")),o=window.$api.ding.user,s={data:function(){return{lr_isPage:!0,treeLoading:!1,searchWord:"",searchTableData:null,tableLoading:!1,columns:[{label:"姓名",prop:"f_RealName",minWidth:"110"},{label:"账号",prop:"f_Account",minWidth:"110"},{label:"手机",prop:"f_Mobile",minWidth:"108"},{label:"钉钉用户Id",prop:"f_DingUserId",minWidth:"108"},{label:"公司",prop:"f_CompanyId",minWidth:"120"},{label:"部门",prop:"f_DepartmentId",minWidth:"88"},{label:"性别",prop:"f_Gender",minWidth:"56",align:"center"}],tableData:[],tableTotal:0,tablePageSize:50,tableCurrentPage:1,companyId:"",departmentId:"",departmentLoading:!1}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadTableData(),e.treeLoading=!0,t.next=4,e.lr_loadCompanys();case 4:e.treeLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadTableData:function(e){var t=this;e||(this.tableCurrentPage=1),this.tableLoading=!0;var a={rows:this.tablePageSize,page:this.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:this.searchWord,companyId:this.companyId,departmentId:this.departmentId,code:"xxx"};o.getPage(a).then((function(e){var a=t.$deepClone(e.data.data);a.rows.forEach((function(e){t.lr_loadDepartments(e.f_CompanyId)})),t.tableData=a.rows,t.tableTotal=a.records,t.tableLoading=!1})).catch((function(){t.tableData=[],t.tableLoading=!1}))},turnTablePage:function(e){var t=e.rows;this.tablePageSize=t,this.loadTableData(!0)},handleNodeClick:function(e){this.companyId=e.value,this.departmentId="",this.lr_loadDepartments(this.companyId),this.loadTableData()},handleChangeDept:function(){this.loadTableData()},hanleSearch:function(){this.loadTableData()},handleSync:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.departmentId){t.next=5;break}return e.$message({type:"warning",message:e.$t("请选择部门!")}),t.abrupt("return");case 5:return e.loading=!0,a={rows:e.tablePageSize,page:e.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:e.searchWord,companyId:e.companyId,departmentId:e.departmentId,code:"xxx"},t.next=9,e.$awaitWraper(o.syncData(a));case 9:r=t.sent,r&&e.$message({type:"success",message:e.$t("同步成功!")}),e.loadTableData(),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},handleSyncSystem:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.departmentId){t.next=5;break}return e.$message({type:"warning",message:e.$t("请选择部门!")}),t.abrupt("return");case 5:return e.loading=!0,a={rows:e.tablePageSize,page:e.tableCurrentPage,sidx:"F_CreateDate DESC",keyword:e.searchWord,companyId:e.companyId,departmentId:e.departmentId,code:"xxx"},t.next=9,e.$awaitWraper(o.syncDataSystem(a));case 9:r=t.sent,r&&e.$message({type:"success",message:e.$t("同步成功!")}),e.loadTableData(),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()}}},i=s,d=a("2877"),f=Object(d["a"])(i,r,l,!1,null,null,null);t["default"]=f.exports}}]);