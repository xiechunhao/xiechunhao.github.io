"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[5153],{55153:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});a(43027);var o=function(){var e=this,t=e._self._c;return t("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[t("el-form",{ref:"form",staticClass:"login-form ele-bg-white",attrs:{size:"large",model:e.form,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[t("h4",[e._v(e._s(e.$t("login.title")))]),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-user",placeholder:e.$t("login.username")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:e.$t("login.password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{prop:"code"}},[t("div",{staticClass:"login-input-group"},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-_vercode",placeholder:e.$t("login.code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),e.captcha?t("img",{staticClass:"login-captcha",attrs:{alt:"",src:e.captcha},on:{click:e.changeCaptcha}}):e._e()],1)]),t("div",{staticClass:"el-form-item"},[t("el-checkbox",{model:{value:e.form.remember,callback:function(t){e.$set(e.form,"remember",t)},expression:"form.remember"}},[e._v(" "+e._s(e.$t("login.remember"))+" ")]),t("el-link",{staticClass:"ele-pull-right",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.$router.push("/forget")}}},[e._v(" 忘记密码 ")])],1),t("div",{staticClass:"el-form-item"},[t("el-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" "+e._s(e.loading?e.$t("login.loading"):e.$t("login.login"))+" ")])],1),t("div",{staticClass:"ele-text-center",staticStyle:{"margin-bottom":"10px"}},[t("i",{staticClass:"login-oauth-icon el-icon-_qq",staticStyle:{background:"#3492ed"}}),t("i",{staticClass:"login-oauth-icon el-icon-_wechat",staticStyle:{background:"#4daf29"}}),t("i",{staticClass:"login-oauth-icon el-icon-_weibo",staticStyle:{background:"#cf1900"}})])],1),t("div",{staticClass:"login-copyright"},[e._v(" copyright © 2022 eleadmin.com all rights reserved. ")]),t("div",{staticStyle:{position:"absolute",right:"30px",top:"20px"}},[t("el-dropdown",{attrs:{placement:"bottom-end"},on:{command:e.changeLanguage}},[t("i",{staticClass:"el-icon-_language",staticStyle:{"font-size":"22px",color:"#fff",cursor:"pointer"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"en"}},[t("span",{class:{"ele-text-primary":"en"===e.language}},[e._v(" English ")])]),t("el-dropdown-item",{attrs:{command:"zh_CN"}},[t("span",{class:{"ele-text-primary":"zh_CN"===e.language}},[e._v(" 简体中文 ")])]),t("el-dropdown-item",{attrs:{command:"zh_TW"}},[t("span",{class:{"ele-text-primary":"zh_TW"===e.language}},[e._v(" 繁體中文 ")])])],1)],1)],1),t("div",{staticClass:"hidden-xs-only",staticStyle:{position:"absolute",right:"30px",bottom:"20px","z-index":"9"}},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.direction,callback:function(t){e.direction=t},expression:"direction"}},[t("el-radio-button",{attrs:{label:"2"}},[e._v("居左")]),t("el-radio-button",{attrs:{label:"0"}},[e._v("居中")]),t("el-radio-button",{attrs:{label:"1"}},[e._v("居右")])],1)],1)],1)},r=[],s=a(24495),i=(a(88919),a(80462));async function l(e){e.tenantId=1;const t=await i.A.post("/login",e);return 0===t.data.code?((0,s.WG)(t.data.data.access_token,e.remember),t.data.message):Promise.reject(new Error(t.data.message))}async function n(){const e=await i.A.get("/captcha");return 0===e.data.code?e.data.data:Promise.reject(new Error(e.data.message))}var c={name:"Login",data(){return{direction:0,loading:!1,form:{username:"admin",password:"admin",remember:!0,code:""},captcha:"",text:""}},computed:{rules(){return{username:[{required:!0,message:this.$t("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:this.$t("login.password"),type:"string",trigger:"blur"}]}},language(){return this.$i18n.locale}},created(){(0,s.gf)()?this.goHome():this.changeCaptcha()},methods:{submit(){this.$refs.form.validate((e=>{if(!e)return!1;this.form.code.toLowerCase()===this.text?(this.loading=!0,l(this.form).then((e=>{this.loading=!1,this.$message.success(e),this.goHome()})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))):this.$message.error("验证码错误")}))},goHome(){var e,t;this.$router.push(null!==(e=null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.from)&&void 0!==e?e:"/").catch((()=>{}))},changeCaptcha(){n().then((e=>{var t;this.captcha=e.base64,this.text=e.text,this.form.code=this.text,null===(t=this.$refs)||void 0===t||null===(t=t.form)||void 0===t||t.clearValidate()})).catch((e=>{this.$message.error(e.message)}))},changeLanguage(e){this.$i18n.locale=e,localStorage.setItem("i18n-lang",e)}}},d=c,m=a(64008),u=(0,m.A)(d,o,r,!1,null,"1e578212",null),g=u.exports}}]);