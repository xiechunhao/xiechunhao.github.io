"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[1431,4121],{71431:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var o=function(){var e=this,t=e._self._c;return t("div",[t("ele-pro-table",{ref:"table",attrs:{columns:e.columns,datasource:e.datasource,height:"calc(100vh - 265px)","full-height":"calc(100vh - 116px)","tool-class":"ele-toolbar-form"},scopedSlots:e._u([{key:"roles",fn:function({row:r}){return e._l(r.roles,(function(r){return t("el-tag",{key:r.roleId,attrs:{type:"primary",size:"mini","disable-transitions":!0}},[e._v(" "+e._s(r.roleName)+" ")])}))}},{key:"status",fn:function({row:r}){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.editStatus(r)}},model:{value:r.status,callback:function(t){e.$set(r,"status",t)},expression:"row.status"}})]}},{key:"action",fn:function({row:r}){return[t("el-link",{attrs:{type:"primary",underline:!1,icon:"el-icon-edit"},on:{click:function(t){return e.openEdit(r)}}},[e._v(" 修改 ")]),t("el-popconfirm",{staticClass:"ele-action",attrs:{title:"确定要删除此用户吗？"},on:{confirm:function(t){return e.remove(r)}}},[t("el-link",{attrs:{slot:"reference",type:"danger",underline:!1,icon:"el-icon-delete"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])},[t("template",{slot:"toolbar"},[t("org-user-search",{on:{search:e.reload}},[t("el-button",{staticClass:"ele-btn-icon",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openEdit()}}},[e._v(" 添加 ")])],1)],1)],2),t("org-user-edit",{attrs:{data:e.current,visible:e.showEdit,"organization-list":e.organizationList,"organization-id":e.organizationId},on:{"update:visible":function(t){e.showEdit=t},done:e.reload}})],1)},s=[],l=r(94121),a=r(58948),n=r(40968),i={name:"OrgUserList",components:{OrgUserSearch:l["default"],OrgUserEdit:a["default"]},props:{organizationId:Number,organizationList:Array},data(){return{columns:[{columnKey:"index",type:"index",width:45,align:"center",showOverflowTooltip:!0,fixed:"left"},{prop:"username",label:"用户账号",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"nickname",label:"用户名",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"sexName",label:"性别",sortable:"custom",showOverflowTooltip:!0,minWidth:80},{prop:"phone",label:"手机号",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{columnKey:"roles",label:"角色",showOverflowTooltip:!0,minWidth:110,slot:"roles"},{prop:"createTime",label:"创建时间",sortable:"custom",showOverflowTooltip:!0,minWidth:110,formatter:(e,t,r)=>this.$util.toDateString(r)},{prop:"status",label:"状态",align:"center",sortable:"custom",width:80,resizable:!1,slot:"status"},{columnKey:"action",label:"操作",width:130,align:"center",resizable:!1,slot:"action",hideInSetting:!0,showOverflowTooltip:!0}],current:null,showEdit:!1}},methods:{datasource({page:e,limit:t,where:r,order:o}){return(0,n.SL)({...r,...o,page:e,limit:t,organizationId:this.organizationId})},reload(e){this.$refs.table.reload({page:1,where:e})},openEdit(e){this.current=e,this.showEdit=!0},remove(e){const t=this.$loading({lock:!0});(0,n.a1)(e.userId).then((e=>{t.close(),this.$message.success(e),this.reload()})).catch((e=>{t.close(),this.$message.error(e.message)}))},editStatus(e){const t=this.$loading({lock:!0});(0,n.pU)(e.userId,e.status).then((e=>{t.close(),this.$message.success(e)})).catch((r=>{t.close(),e.status=e.status?0:1,this.$message.error(r.message)}))}},watch:{organizationId(){this.reload()}}},c=i,u=r(64008),h=(0,u.A)(c,o,s,!1,null,null,null),m=h.exports},94121:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});r(80772);var o=function(){var e=this,t=e._self._c;return t("el-form",{staticClass:"ele-form-search",attrs:{size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},submit:function(e){e.preventDefault()}}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{md:8}},[t("el-form-item",[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入用户账号"},model:{value:e.where.username,callback:function(t){e.$set(e.where,"username",t)},expression:"where.username"}})],1)],1),t("el-col",{attrs:{md:8}},[t("el-form-item",[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入用户名"},model:{value:e.where.nickname,callback:function(t){e.$set(e.where,"nickname",t)},expression:"where.nickname"}})],1)],1),t("el-col",{attrs:{md:8}},[t("el-form-item",[t("el-button",{staticClass:"ele-btn-icon",attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v(" 查询 ")]),e._t("default")],2)],1)],1)],1)},s=[];const l={username:"",nickname:""};var a={name:"DictDataSearch",data(){return{where:{...l}}},methods:{search(){this.$emit("search",this.where)},reset(){this.where={...l},this.search()}}},n=a,i=r(64008),c=(0,i.A)(n,o,s,!1,null,null,null),u=c.exports}}]);