/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-08 15:10:48 
 */
import{a as M}from"./table-BrLNtHVK.js";import{d as R,A as _,U as u,u as t,F as q,B as n,o as f,K as a,b as D,a2 as N,H as j,Z as A}from"./vsv-element-plus-D84I6Pnf.js";import"./index-BL5slC2T.js";import"./vsv-icon-DZABqXig.js";import"./vsv-nprogress-0btfRK0G.js";const G=R({name:"DefaultTableEdit",__name:"DefaultTableEdit",emits:["fetch-data"],setup(H,{expose:b,emit:V}){const v=V,i=ref(),p=ref(""),d=ref(!1),o=reactive({title:"",author:"",rate:0,datetime:"",status:"",switch:!1,count:0}),g=reactive({title:[{required:!0,trigger:"blur",message:"请输入标题"}],author:[{required:!0,trigger:"blur",message:"请输入作者"}]}),w=ref([{value:"published",label:"published"},{value:"draft",label:"draft"},{value:"deleted",label:"deleted"}]);b({showEdit:r=>{d.value=!0,nextTick(()=>{r?(p.value="编辑",Object.assign(o,r)):p.value="添加"})}});const c=()=>{var r,e;(r=i.value)==null||r.clearValidate(),(e=i.value)==null||e.resetFields(),v("fetch-data")},k=()=>{var r;(r=i.value)==null||r.validate(async e=>{if(e){const{msg:m}=await M(o);await $baseMessage(m,"success","hey"),await c(),d.value=!1}})};return(r,e)=>{const m=n("el-input"),s=n("el-form-item"),U=n("el-date-picker"),x=n("el-option"),y=n("el-select"),E=n("el-input-number"),h=n("el-rate"),C=n("el-switch"),B=n("el-form"),F=n("el-button"),T=n("vab-dialog");return f(),_(T,{modelValue:t(d),"onUpdate:modelValue":e[7]||(e[7]=l=>q(d)?d.value=l:null),"append-to-body":"",title:t(p),width:"500px",onClose:c},{footer:u(()=>[a(F,{type:"primary",onClick:k},{default:u(()=>e[8]||(e[8]=[A("保存")])),_:1})]),default:u(()=>[a(B,{ref_key:"formRef",ref:i,"label-width":"80px",model:t(o),rules:t(g)},{default:u(()=>[a(s,{label:"标题",prop:"title"},{default:u(()=>[a(m,{modelValue:t(o).title,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).title=l),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),a(s,{label:"作者",prop:"author"},{default:u(()=>[a(m,{modelValue:t(o).author,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).author=l),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),a(s,{label:"时间",prop:"datetime"},{default:u(()=>[a(U,{modelValue:t(o).datetime,"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).datetime=l),placeholder:"选择日期时间",type:"datetime"},null,8,["modelValue"])]),_:1}),a(s,{label:"状态",prop:"status"},{default:u(()=>[a(y,{modelValue:t(o).status,"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).status=l),clearable:""},{default:u(()=>[(f(!0),D(j,null,N(t(w),l=>(f(),_(x,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"数量",prop:"count"},{default:u(()=>[a(E,{modelValue:t(o).count,"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).count=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"评级",prop:"rate"},{default:u(()=>[a(h,{modelValue:t(o).rate,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).rate=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"开关",prop:"switch"},{default:u(()=>[a(C,{modelValue:t(o).switch,"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).switch=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{G as default};
