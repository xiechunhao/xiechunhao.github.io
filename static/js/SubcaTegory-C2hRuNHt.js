/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{d as N,b as U,Q as $,X as L,u as p,C as M,V as o,D as s,o as g,L as t,a3 as q,_ as d,Z as z}from"./vsv-element-plus-DQNbQgVr.js";import{S as E}from"./sortable.esm-JNWusfcT.js";import{g as I,d as H}from"./trade-DgEmw_aG.js";import"./index-DXRDwnmL.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";const J=N({name:"Trade",__name:"SubcaTegory",setup(P){const b=ref(null);ref(!0),ref(!0);const c=ref([]),u=ref(!0),y=ref(0);ref([]);const v=reactive({pageNo:1,pageSize:20}),h=ref(!1),w=ref("add"),m=async()=>{u.value=!0;const{data:l}=await I(v);c.value=l.list,y.value=l.total,u.value=!1},k=()=>{const l=document.querySelector(".elTable2 .el-table__body-wrapper tbody");E.create(l,{group:"shared",animation:150,ghostClass:"sortable-ghost",easing:"cubic-bezier(1, 0, 0, 1)",onStart:e=>{console.log(e)},onEnd:e=>{console.log(e),x(e.oldIndex,e.newIndex)}})},x=(l,e)=>{const r=c.value;console.log(r);const n=r.splice(l,1)[0];r.splice(e,0,n),c.value=[],nextTick(async()=>{c.value=r})};onMounted(()=>{k()});const C=(l,e)=>{h.value=!0,w.value=l},S=l=>{l.id&&$baseConfirm("你确定要删除当前商品吗，被删除商品将进入回收站，如需彻底删除请在回收站操作！",null,async()=>{const{msg:e}=await H({ids:l.id});$baseMessage(e,"success","hey"),await m()})};return onBeforeMount(()=>{m()}),(l,e)=>{const r=s("el-icon"),n=s("el-table-column"),V=s("el-input"),_=s("el-image"),T=s("el-popover"),F=s("el-switch"),f=s("el-button"),D=s("el-empty"),R=s("el-table"),B=L("loading");return g(),U("div",null,[$((g(),M(R,{ref_key:"tableRef",ref:b,class:"elTable2",data:p(c),style:{height:"auto",padding:"0"},"header-cell-style":{background:"#FCF6F5",lineHeight:"60px",display:"none"},"cell-style":{background:"#FCF6F5"}},{empty:o(()=>[t(D,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(n,{align:"center",width:"38",prop:"image"},{default:o(({row:a})=>[t(r,null,{default:o(()=>[t(p(q))]),_:1})]),_:1}),t(n,{width:"38"},{default:o(({row:a})=>e[0]||(e[0]=[d("└")])),_:1}),t(n,{type:"selection",width:"38"}),t(n,{align:"left",label:"分类名称",prop:"transactionTime"},{default:o(({row:a})=>[t(V,{modelValue:a.transactionTime,"onUpdate:modelValue":i=>a.transactionTime=i,style:{"max-width":"600px"},placeholder:"Please input"},{prepend:o(()=>[d(z(a.id),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{align:"center",label:"分类图片",prop:"image"},{default:o(({row:a})=>[t(T,{placement:"top-start"},{reference:o(()=>[t(_,{src:a.image},null,8,["src"])]),default:o(()=>[t(_,{src:a.image},null,8,["src"])]),_:2},1024)]),_:1}),t(n,{align:"center",label:"状态",prop:"image"},{default:o(({row:a})=>[t(F,{modelValue:a.value1,"onUpdate:modelValue":i=>a.value1=i},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"操作",width:"150"},{default:o(({row:a})=>[t(f,{text:"",type:"primary",onClick:i=>C("edit",a)},{default:o(()=>e[1]||(e[1]=[d("编辑")])),_:2},1032,["onClick"]),t(f,{text:"",type:"primary",onClick:i=>S(a)},{default:o(()=>e[2]||(e[2]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,p(u)]])])}}});export{J as default};
