/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{d as M,r as Y,B,a as y,o as R,b as u,Y as m,aC as v,u as S,S as g,a6 as _,a7 as T}from"./vsv-element-plus-CcCXTk6v.js";import{f as X,_ as U}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const L=""+new URL("../png/cat-Cj_eEYnY.png",import.meta.url).href,x={class:"signature-container"},D={class:"signature-canvas-box"},N=["src"],V=M({name:"Signature",__name:"index",setup(I){const s=Y();let i,r=!1;const d=e=>{let t;if(e.offsetX){const{offsetX:n,offsetY:a}=e;t=[n,a]}else{const{top:n,left:a}=s.value.getBoundingClientRect(),o=e.touches[0].clientX-a,b=e.touches[0].clientY-n;t=[o,b]}return t};let l=0,c=0;const f=e=>{[l,c]=d(e),r=!0},h=e=>{if(r){const[t,n]=d(e);C(l,c,t,n,i),l=t,c=n}},p=()=>{r&&(r=!1)};B(()=>{i=s.value.getContext("2d")});const w=()=>{i.clearRect(0,0,s.value.width,s.value.height)},E=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.toDataURL()==t.toDataURL()},k=()=>{if(E(s.value)){X("当前签名文件为空","warning","hey");return}const e=document.createElement("a");e.href=s.value.toDataURL(),e.download="签名";const t=new MouseEvent("click");e.dispatchEvent(t)},C=(e,t,n,a,o)=>{o.beginPath(),o.globalAlpha=1,o.lineWidth=2,o.strokeStyle="#000",o.moveTo(e,t),o.lineTo(n,a),o.closePath(),o.stroke()};return(e,t)=>{const n=T;return R(),y("div",x,[u("div",D,[u("canvas",{ref_key:"canvas",ref:s,height:"200",width:"500",onMousedown:f,onMousemove:v(h,["stop","prevent"]),onMouseup:p,onTouchend:p,onTouchmove:v(h,["stop","prevent"]),onTouchstart:f},null,544),u("img",{alt:"",src:S(L)},null,8,N)]),m(n,{type:"primary",onClick:k},{default:g(()=>t[0]||(t[0]=[_("存为图片")])),_:1}),m(n,{type:"danger",onClick:w},{default:g(()=>t[1]||(t[1]=[_("清空签名")])),_:1})])}}}),W=U(V,[["__scopeId","data-v-9753867b"]]);export{W as default};
