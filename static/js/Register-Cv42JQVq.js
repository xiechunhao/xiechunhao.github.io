/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 16:08:17 
 */
import W from"./LoginContainer-C9VypWzd.js";import{d as Z,r as f,p as C,a4 as j,o as y,S as x,T as s,e as _,u as e,W as r,a1 as u,Z as R,a8 as g,aA as z,$ as S,aO as H,aq as J,a9 as K,au as Q,aL as U}from"./vsv-element-plus-DDEqdpLt.js";import{a as X,b as Y,c as ee,s as te,t as o,i as oe,d as E,r as re,$ as se}from"./index-BMViVQGz.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const ae=""+new URL("../png/left_img_5-C6A-Mdq3.png",import.meta.url).href,le={class:"login-form"},ne=["src"],ie={class:"title-tips"},_e=Z({name:"Register",__name:"Register",setup(de){const k=X(),q=Y(),I=ee(),{title:M}=te(I),{setToken:P}=q,p=f(!1),v=f(),h=f(!1);let b;const w=f(o("获取验证码")),l=C({username:"",password:"",phone:"",verificationCode:"",phoneCode:""}),$=(n,t,a)=>{t===""?a(new Error(o("用户名不能为空"))):a()},B=(n,t,a)=>{oe(t)?a():a(new Error(o("密码不能少于6位")))},T=(n,t,a)=>{E(t)?a():a(new Error(o("请输入正确的手机号")))},D=C({username:[{required:!0,trigger:"blur",message:o("请输入用户名")},{validator:$,trigger:"blur"}],phone:[{required:!0,trigger:"blur",message:o("请输入手机号")},{validator:T,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:o("请输入密码")},{validator:B,trigger:"blur"}],phoneCode:[{required:!0,trigger:"blur",message:o("请输入手机验证码")}]}),F=()=>{var t;if(!E(l.phone)){(t=v.value)==null||t.validateField("phone");return}h.value=!0;let n=60;b=setInterval(()=>{n>0?(n--,w.value=`${o("获取验证码 ")+n}s`):(clearInterval(b),w.value=o("获取验证码"),h.value=!1)},1e3)},N=()=>{var n;(n=v.value)==null||n.validate(async t=>{if(t){p.value=!0;const{msg:a,data:{token:d}}=await re(l).catch(()=>{p.value=!1});se(`${a}，点击确定模拟进入拥有【admin】角色的首页`,null,async()=>{p.value=!1,P(d),await k.push("/index")})}})};return j(()=>{clearInterval(b)}),(n,t)=>{const a=S("vab-icon"),d=H,m=J,c=K,V=S("router-link"),A=Q,L=W,G=U("focus"),O=U("throttle");return y(),x(L,null,{default:s(()=>[_("div",le,[_("img",{alt:"",class:"left-img",src:e(ae)},null,8,ne),r(A,{ref_key:"formRef",ref:v,"label-position":"left",model:e(l),rules:e(D),onSubmit:t[4]||(t[4]=z(()=>{},["prevent"]))},{default:s(()=>[t[5]||(t[5]=_("div",{class:"title"},"hello !",-1)),_("div",ie,u(e(M))+" "+u(e(o)("账号注册")),1),r(m,{prop:"username"},{default:s(()=>[R((y(),x(d,{modelValue:e(l).username,"onUpdate:modelValue":t[0]||(t[0]=i=>e(l).username=i),modelModifiers:{trim:!0},"auto-complete":"off",clearable:"",placeholder:e(o)("请输入用户名"),type:"text"},{prefix:s(()=>[r(a,{icon:"user-line"})]),_:1},8,["modelValue","placeholder"])),[[G]])]),_:1}),r(m,{prop:"phone"},{default:s(()=>[r(d,{modelValue:e(l).phone,"onUpdate:modelValue":t[1]||(t[1]=i=>e(l).phone=i),modelModifiers:{trim:!0},clearable:"",maxlength:"11",placeholder:e(o)("请输入手机号"),"show-word-limit":"",type:"text"},{prefix:s(()=>[r(a,{icon:"smartphone-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(m,{prop:"phoneCode",style:{position:"relative"}},{default:s(()=>[r(d,{modelValue:e(l).phoneCode,"onUpdate:modelValue":t[2]||(t[2]=i=>e(l).phoneCode=i),modelModifiers:{trim:!0},placeholder:e(o)("请输入手机验证码"),type:"text"},{prefix:s(()=>[r(a,{icon:"barcode-box-line"})]),_:1},8,["modelValue","placeholder"]),r(c,{class:"phone-code",disabled:e(h),type:"primary",onClick:F},{default:s(()=>[g(u(e(o)(e(w))),1)]),_:1},8,["disabled"])]),_:1}),r(m,{prop:"password"},{default:s(()=>[r(d,{modelValue:e(l).password,"onUpdate:modelValue":t[3]||(t[3]=i=>e(l).password=i),modelModifiers:{trim:!0},clearable:"",placeholder:e(o)("请输入密码"),type:"password"},{prefix:s(()=>[r(a,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),R((y(),x(c,{class:"login-btn",loading:e(p),"native-type":"submit",type:"primary"},{default:s(()=>[g(u(e(o)("注册")),1)]),_:1},8,["loading"])),[[O,N]]),r(V,{to:"/login"},{default:s(()=>[r(c,{style:{"margin-top":"20px","margin-left":"-10px"},type:"primary"},{default:s(()=>[g(u(e(o)("登录")),1)]),_:1})]),_:1}),r(V,{to:"/password"},{default:s(()=>[r(c,{style:{"margin-top":"20px"},text:"",type:"primary"},{default:s(()=>[g(u(e(o)("忘记密码")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})}}});export{_e as default};
