/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-12 16:08:16 
 */
import{_ as qe}from"./DefaultTableEdit.vue_vue_type_script_setup_true_lang-DV6kl7St.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-DG6MVEkW.js";import{_ as Fe}from"./index-CoUS0v3n.js";import{_ as $e}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-Bdp4gqKq.js";import{_ as We}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DGp934Nh.js";import{_ as Ne}from"./VabQueryFormTopPanel-uDOZZvf8.js";import{d as Be,r as i,h as Le,a as Me,w as Ie,P as Ye,a6 as Ae,R as He,b,o as r,Z as e,U as q,T as t,ao as Pe,aB as Ge,u as o,ap as Oe,aL as je,ad as B,bo as Qe,as as Xe,at as Ze,a8 as Je,aR as Ke,a7 as d,n as Q,bp as el,bq as ll,e as tl,bk as al,i as g,aH as ol,aq as nl,ar as sl,bw as ul,a2 as X,ai as Z,S as z,Y as L,W as il,aO as dl,X as rl,br as cl,be as pl,aI as ml,aQ as _l}from"./vsv-element-plus-B-S50adB.js";import{l as fl}from"./vue-draggable-plus-DaZMNWtc.js";import{g as bl,d as J}from"./table-D8AGiyiG.js";import{b as vl,w as gl,s as hl,x as yl,A as kl,$ as K,f as C,y as Vl,z as Cl,_ as xl}from"./index-BiEcGzGC.js";import"./vsv-icon-DcXMIZgh.js";import"./vsv-nprogress-Bmiy9T8n.js";const wl={key:0},El={key:1},Rl={class:"custom-table-right-tools"},Sl={key:0},Dl={key:2},Tl=Be({name:"CustomTable",__name:"customTable",setup(Ul){const M=vl(),ee=gl(),{getAllRoutes:le}=hl(ee),te=yl(),{changeTabsMeta:ae,addVisitedRoute:oe}=te,I=i(),m=i(!0),F=i(null),x=i(!0),w=i(!1),E=i("default"),_=i(!1),Y=i([]),R=i(!0),A=i(0),p=i([]),v=i([{label:"id",prop:"id",sortable:!0,checked:!0,minWidth:200},{label:"标题",prop:"title",sortable:!0,disableCheck:!0,checked:!0,minWidth:200},{label:"图片",prop:"title",checked:!0,minWidth:100},{label:"作者",prop:"author",sortable:!0,checked:!0,minWidth:100},{label:"评级",prop:"rate",sortable:!0,checked:!0,minWidth:200},{label:"数量",prop:"count",sortable:!0,checked:!0,minWidth:100},{label:"时间",prop:"datetime",sortable:!0,checked:!0,minWidth:160},{label:"描述",prop:"description",sortable:!0,checked:!0,minWidth:400}]),h=i([]),s=Le({pageNo:1,pageSize:20,title:""}),S=i("right"),{exit:ne,enter:se,isFullscreen:H}=kl(),ue=Me(()=>v.value.filter(n=>h.value.includes(n.label))),f=async()=>{R.value=!0;const{data:n}=await bl(s);Y.value=n.list,A.value=n.total,R.value=!1},ie=n=>{s.pageNo=1,s.pageSize=n,f()},de=n=>{s.pageNo=n,f()},P=()=>{s.pageNo=1,f()},re=()=>{_.value=!_.value,_.value?se():ne()},ce=n=>{p.value=n},pe=()=>{m.value=!m.value},me=()=>{F.value.showEdit()},_e=n=>{F.value.showEdit(n)},G=n=>{if(n.id)K("您确定要删除当前项吗",null,async()=>{const{msg:l}=await J({ids:n.id});C(l,"success","vab-hey-message-success"),await f()});else if(p.value.length>0){const l=p.value.map(c=>c.id).join(",");K("您确定要删除选中项吗",null,async()=>{const{msg:c}=await J({ids:l});C(c,"success","vab-hey-message-success"),await f()})}else C("您未选中任何行","warning","hey")},fe=async()=>{if(p.value.length>0)for(let n=0;n<p.value.length;n++){const l=Vl(le.value,"/vab/table/defaultTableDetail"),c=Cl({...l.at(-1),query:p.value[n]});c&&(await oe(c),await ae({title:"详情页",meta:{title:`${c.query.title} 详情页`}}))}else C("请至少选择一行进行详情页跳转","warning","hey")},O=n=>{n.id?M.push({path:"/vab/table/defaultTableDetail",query:{...n,timestamp:Date.now()}}):p.value.length===1?M.push({path:"/vab/table/defaultTableDetail",query:{...p.value[0],timestamp:Date.now()}}):C("请选择一行进行详情页跳转","warning","hey")};return Ie(H,()=>{H.value?_.value=!0:_.value=!1},{immediate:!0}),Ye(()=>{var n;(n=I.value)==null||n.doLayout()}),Ae(()=>{v.value.forEach(n=>{n.checked&&h.value.push(n.label)}),f()}),(n,l)=>{const c=je,y=Oe,be=Qe,$=Ze,ve=Xe,u=Je,k=He("vab-icon"),ge=Pe,he=Ne,ye=We,D=al,W=sl,ke=nl,N=ol,Ve=ul,Ce=$e,xe=Fe,T=dl,we=cl,j=pl,Ee=ml,Re=_l,Se=ze,De=qe,Te=il;return r(),b("div",{class:Q(["custom-table-container auto-height-container",{"fullscreen-container":o(_)}])},[e(xe,null,{default:t(()=>[e(he,null,{default:t(()=>[e(ge,{inline:"",model:o(s),onSubmit:l[4]||(l[4]=Ge(()=>{},["prevent"]))},{default:t(()=>[e(y,{label:"标题"},{default:t(()=>[e(c,{modelValue:o(s).title,"onUpdate:modelValue":l[0]||(l[0]=a=>o(s).title=a),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),q(e(y,{label:"作者"},{default:t(()=>[e(c,{modelValue:o(s).author,"onUpdate:modelValue":l[1]||(l[1]=a=>o(s).author=a),clearable:"",placeholder:"请输入作者"},null,8,["modelValue"])]),_:1},512),[[B,!o(m)]]),q(e(y,{label:"时间"},{default:t(()=>[e(be,{modelValue:o(s).datetime,"onUpdate:modelValue":l[2]||(l[2]=a=>o(s).datetime=a),format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择时间",type:"datetime"},null,8,["modelValue"])]),_:1},512),[[B,!o(m)]]),q(e(y,{label:"状态"},{default:t(()=>[e(ve,{modelValue:o(s).status,"onUpdate:modelValue":l[3]||(l[3]=a=>o(s).status=a),placeholder:"请选择状态"},{default:t(()=>[e($,{label:"success",value:"published"}),e($,{label:"primary",value:"draft"}),e($,{label:"danger",value:"deleted"})]),_:1},8,["modelValue"])]),_:1},512),[[B,!o(m)]]),e(y,null,{default:t(()=>[e(u,{icon:o(Ke),loading:o(R),"native-type":"submit",type:"primary",onClick:P},{default:t(()=>l[11]||(l[11]=[d("查询")])),_:1},8,["icon","loading"]),e(u,{class:"hidden-xs-only",text:"",type:"primary",onClick:pe},{default:t(()=>[o(m)?(r(),b("span",wl,"展开")):(r(),b("span",El,"合并")),e(k,{class:Q(["vab-dropdown",{"vab-dropdown-active":o(m)}]),icon:"arrow-up-s-line"},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(ye,null,{default:t(()=>[e(u,{icon:o(el),type:"primary",onClick:me},{default:t(()=>l[12]||(l[12]=[d("添加")])),_:1},8,["icon"]),e(u,{icon:o(ll),type:"danger",onClick:G},{default:t(()=>l[13]||(l[13]=[d("删除")])),_:1},8,["icon"]),e(u,{type:"primary",onClick:O},{default:t(()=>l[14]||(l[14]=[d("详情")])),_:1}),e(u,{class:"hidden-xs-only",type:"primary",onClick:fe},{default:t(()=>l[15]||(l[15]=[d("后台打开详情")])),_:1})]),_:1}),e(Ce,null,{default:t(()=>[tl("div",Rl,[e(u,{class:"hidden-xs-only"},{default:t(()=>[e(D,{modelValue:o(w),"onUpdate:modelValue":l[5]||(l[5]=a=>g(w)?w.value=a:null),label:"斑马纹"},null,8,["modelValue"])]),_:1}),e(u,{class:"hidden-xs-only"},{default:t(()=>[e(D,{modelValue:o(x),"onUpdate:modelValue":l[6]||(l[6]=a=>g(x)?x.value=a:null),label:"边框"},null,8,["modelValue"])]),_:1}),e(u,{onClick:P},{default:t(()=>[e(k,{icon:"refresh-line"})]),_:1}),e(u,{onClick:re},{default:t(()=>[e(k,{icon:o(_)?"fullscreen-exit-fill":"fullscreen-fill"},null,8,["icon"])]),_:1}),e(N,{width:165},{reference:t(()=>[e(u,null,{default:t(()=>[e(k,{icon:"line-height"})]),_:1})]),default:t(()=>[e(ke,{modelValue:o(E),"onUpdate:modelValue":l[7]||(l[7]=a=>g(E)?E.value=a:null)},{default:t(()=>[e(W,{label:"large",value:"large"},{default:t(()=>l[16]||(l[16]=[d("大")])),_:1}),e(W,{label:"default",value:"default"},{default:t(()=>l[17]||(l[17]=[d("中")])),_:1}),e(W,{label:"small",value:"small"},{default:t(()=>l[18]||(l[18]=[d("小")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(N,{"popper-class":"custom-table-checkbox"},{reference:t(()=>[e(u,null,{default:t(()=>[e(k,{icon:"settings-line"})]),_:1})]),default:t(()=>[e(o(fl),{modelValue:o(v),"onUpdate:modelValue":l[9]||(l[9]=a=>g(v)?v.value=a:null),animation:600,target:".el-checkbox-group"},{default:t(()=>[e(Ve,{modelValue:o(h),"onUpdate:modelValue":l[8]||(l[8]=a=>g(h)?h.value=a:null)},{default:t(()=>[(r(!0),b(X,null,Z(o(v),a=>(r(),z(D,{key:a.label,disabled:a.disableCheck,label:a.label,value:a.label},{default:t(()=>[d(L(a.label),1)]),_:2},1032,["disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1}),q((r(),z(Re,{ref_key:"tableRef",ref:I,border:o(x),data:o(Y),size:o(E),stripe:o(w),onSelectionChange:ce},{empty:t(()=>[e(Ee,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(T,{type:"selection",width:"38"}),e(T,{align:"center",label:"序号",width:"55"},{default:t(({$index:a})=>[d(L(a+1),1)]),_:1}),(r(!0),b(X,null,Z(o(ue),(a,U)=>(r(),z(T,{key:U,align:"center",fixed:a.fixed,label:a.label,"min-width":a.minWidth||100,prop:a.prop,"show-overflow-tooltip":"",sortable:a.sortable},{default:t(({row:V})=>[a.label==="评级"?(r(),b("span",Sl,[e(we,{modelValue:V.rate,"onUpdate:modelValue":Ue=>V.rate=Ue,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])):rl("",!0),a.label==="图片"?(r(),z(N,{key:1,placement:"top-start"},{reference:t(()=>[e(j,{src:V.image},null,8,["src"])]),default:t(()=>[e(j,{src:V.image},null,8,["src"])]),_:2},1024)):(r(),b("span",Dl,L(V[a.prop]),1))]),_:2},1032,["fixed","label","min-width","prop","sortable"]))),128)),e(T,{align:"center",fixed:o(S),label:"操作",width:"215"},{header:t(()=>[e(D,{modelValue:o(S),"onUpdate:modelValue":l[10]||(l[10]=a=>g(S)?S.value=a:null),label:"固定操作列","true-value":"right"},null,8,["modelValue"])]),default:t(({row:a})=>[e(u,{text:"",type:"primary",onClick:U=>O(a)},{default:t(()=>l[19]||(l[19]=[d("详情")])),_:2},1032,["onClick"]),e(u,{text:"",type:"primary",onClick:U=>_e(a)},{default:t(()=>l[20]||(l[20]=[d("编辑")])),_:2},1032,["onClick"]),e(u,{text:"",type:"danger",onClick:U=>G(a)},{default:t(()=>l[21]||(l[21]=[d("删除")])),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["border","data","size","stripe"])),[[Te,o(R)]]),e(Se,{"current-page":o(s).pageNo,"page-size":o(s).pageSize,total:o(A),onCurrentChange:de,onSizeChange:ie},null,8,["current-page","page-size","total"]),e(De,{ref_key:"editRef",ref:F,onFetchData:f},null,512)],2)}}}),Hl=xl(Tl,[["__scopeId","data-v-cdfa0919"]]);export{Hl as default};
