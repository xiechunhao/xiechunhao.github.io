/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-08 14:17:33 
 */
import{d as V,N as n,a2 as A,o as p,b as j,T as e,$ as o,u as r,aj as F,a4 as _,Y as G,M as g,_ as P}from"./vsv-element-plus-CxGOTlXz.js";import{g as Y,d as z}from"./menuManagement-QefzgQD3.js";import{G as H}from"./index-vqJMV2wg.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const I={class:"menu-management-container no-background-container auto-height-container"},W=V({name:"MenuManagement",__name:"index",setup(J){const u=ref(),i=ref(null),f=ref([]),y=reactive({children:"children",label:"label"}),h=ref([]),d=ref(!0),w=()=>{i.value.showEdit()},k=(t={})=>{i.value.showEdit(t)},C=(t={})=>{t.path&&$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:a}=await z({paths:t.path});$baseMessage(a,"success","hey"),await c()})},c=async(t={})=>{d.value=!0;const{data:a}=await H({role:t});h.value=a.list,d.value=!1},x=({role:t})=>{c(t)};return onActivated(()=>{var t;(t=u.value)==null||t.doLayout()}),onBeforeMount(()=>{Y().then(({data:t})=>{f.value=t.list}),c()}),(t,a)=>{const D=n("el-tree"),v=n("vab-card"),b=n("el-col"),m=n("el-button"),N=n("vab-query-form-top-panel"),M=n("vab-query-form"),l=n("el-table-column"),$=n("vab-icon"),q=n("el-empty"),B=n("el-table"),E=n("el-row"),L=n("menu-management-edit"),R=A("loading");return p(),j("div",I,[e(E,{gutter:20},{default:o(()=>[e(b,{lg:4,md:8,sm:24,xl:4,xs:24},{default:o(()=>[e(v,{class:"auto-height-card"},{default:o(()=>[e(D,{data:r(f),"default-expanded-keys":["root"],"node-key":"id",props:r(y),onNodeClick:x},null,8,["data","props"])]),_:1})]),_:1}),e(b,{lg:20,md:16,sm:24,xl:20,xs:24},{default:o(()=>[e(v,{class:"auto-height-card"},{default:o(()=>[e(M,null,{default:o(()=>[e(N,{span:12},{default:o(()=>[e(m,{icon:r(F),type:"primary",onClick:w},{default:o(()=>a[0]||(a[0]=[_("添加")])),_:1},8,["icon"])]),_:1})]),_:1}),G((p(),g(B,{ref_key:"tableRef",ref:u,border:"",data:r(h),"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{empty:o(()=>[e(q,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(l,{align:"center",label:"标题","min-width":"140",prop:"meta.title","show-overflow-tooltip":""}),e(l,{align:"center",label:"name","min-width":"120",prop:"name","show-overflow-tooltip":""}),e(l,{align:"center",label:"路径","min-width":"140",prop:"path","show-overflow-tooltip":""}),e(l,{align:"center",label:"vue文件路径","min-width":"120",prop:"component","show-overflow-tooltip":""}),e(l,{align:"center",label:"图标"},{default:o(({row:s})=>[s.meta.icon?(p(),g($,{key:0,icon:s.meta.icon},null,8,["icon"])):P("",!0)]),_:1}),e(l,{align:"center",label:"操作",width:"150"},{default:o(({row:s})=>[e(m,{text:"",type:"primary",onClick:T=>k(s)},{default:o(()=>a[1]||(a[1]=[_("编辑")])),_:2},1032,["onClick"]),e(m,{text:"",type:"danger",onClick:T=>C(s)},{default:o(()=>a[2]||(a[2]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,r(d)]])]),_:1})]),_:1})]),_:1}),e(L,{ref_key:"editRef",ref:i,onFetchData:c},null,512)])}}});export{W as default};
