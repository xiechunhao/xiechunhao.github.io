/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{d as h,b as ee,L as t,C as L,S as te,V as l,D as a,u as o,G as R,Y as q,a0 as le,_ as i,e as y,Q as oe,a4 as ne,X as ae,o as V}from"./vsv-element-plus-DQNbQgVr.js";import{g as de,d as re}from"./trade-DgEmw_aG.js";import"./index-DXRDwnmL.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";const ie={class:"trade-container auto-height-container"},ue={style:{"margin-bottom":"20px"}},se={class:"dialog-footer"},pe={class:"dialog-footer"},be=h({name:"Trade",__name:"cardstockPage",setup(me){const s=ref(1),c=ref();ref(!0);const x=ref([]),g=ref(!0),S=ref(0),U=ref([]),r=reactive({pageNo:1,pageSize:20}),m=ref(!1),b=ref(!1),f=ref(!1),$=ref("add");ref([{title:"空格"},{title:"虚拟商品"}]);const v=async()=>{g.value=!0;const{data:d}=await de(r);x.value=d.list,S.value=d.total,g.value=!1},B=d=>{b.value=!0},I=d=>{r.pageNo=1,r.pageSize=d,v()},N=(d,e)=>{m.value=!0,$.value=d},F=d=>{r.pageNo=d,v()},O=()=>{r.pageNo=1,v()},T=d=>{U.value=d},M=d=>{d.id&&$baseConfirm("你确定要删除当前商品吗，被删除商品将进入回收站，如需彻底删除请在回收站操作！",null,async()=>{const{msg:e}=await re({ids:d.id});$baseMessage(e,"success","hey"),await v()})};return onActivated(()=>{var d;(d=c.value)==null||d.doLayout()}),onBeforeMount(()=>{v()}),(d,e)=>{const k=a("el-input"),_=a("el-form-item"),u=a("el-button"),z=a("el-form"),K=a("vab-query-form-top-panel"),A=a("vab-query-form"),E=a("el-icon"),w=a("el-dropdown-item"),G=a("el-dropdown-menu"),P=a("el-dropdown"),p=a("el-table-column"),Q=a("el-empty"),X=a("el-table"),Y=a("el-card"),D=a("vab-dialog"),j=a("el-button-group"),H=a("el-checkbox"),J=a("vab-pagination"),W=a("KamiList"),Z=ae("loading");return V(),ee("div",ie,[t(A,null,{default:l(()=>[t(K,null,{default:l(()=>[t(z,{inline:"",model:o(r),onSubmit:e[1]||(e[1]=q(()=>{},["prevent"]))},{default:l(()=>[t(_,{label:"卡密商品名称"},{default:l(()=>[t(k,{modelValue:o(r).merchantOrderId,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).merchantOrderId=n),clearable:"",placeholder:"请输入卡密商品名称"},null,8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[t(u,{icon:o(le),loading:o(g),"native-type":"submit",type:"primary",onClick:O},{default:l(()=>e[16]||(e[16]=[i("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),t(Y,{shadow:"never"},{default:l(()=>[y("div",ue,[y("div",null,[t(u,{style:{"margin-right":"10px",background:"#1890ff"},type:"primary",onClick:e[2]||(e[2]=n=>N("add",null))},{default:l(()=>e[17]||(e[17]=[i("添加")])),_:1}),t(P,null,{dropdown:l(()=>[t(G,null,{default:l(()=>[t(w,null,{default:l(()=>e[19]||(e[19]=[i("改为上架中")])),_:1}),t(w,null,{default:l(()=>e[20]||(e[20]=[i("改为已下架")])),_:1}),t(w,null,{default:l(()=>e[21]||(e[21]=[i("删除选中")])),_:1})]),_:1})]),default:l(()=>[t(u,{type:"primary"},{default:l(()=>[e[18]||(e[18]=i(" 批量操作 ")),t(E,{class:"el-icon--right"},{default:l(()=>[t(o(ne))]),_:1})]),_:1})]),_:1})])]),oe((V(),L(X,{ref_key:"tableRef",ref:c,border:"",data:o(x),onSelectionChange:T,style:{height:"500px"}},{empty:l(()=>[t(Q,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[t(p,{type:"selection",width:"38"}),t(p,{align:"center",label:"ID",prop:"id"}),t(p,{align:"center",label:"卡密商品名称",prop:"activeName"}),t(p,{align:"center",label:"库存数量",prop:"number"}),t(p,{align:"center",label:"创建时间",prop:"transactionTime"}),t(p,{align:"center",label:"操作",width:"300"},{default:l(({row:n})=>[t(u,{text:"",type:"primary",onClick:e[3]||(e[3]=C=>f.value=!0)},{default:l(()=>e[22]||(e[22]=[i("导卡")])),_:1}),t(u,{text:"",type:"primary",onClick:C=>B(n)},{default:l(()=>e[23]||(e[23]=[i("查卡")])),_:2},1032,["onClick"]),t(u,{text:"",type:"primary",onClick:C=>N("edit",n)},{default:l(()=>e[24]||(e[24]=[i("编辑")])),_:2},1032,["onClick"]),t(u,{text:"",type:"primary",onClick:C=>M(n)},{default:l(()=>e[25]||(e[25]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,o(g)]])]),_:1}),t(D,{modelValue:o(m),"onUpdate:modelValue":e[6]||(e[6]=n=>R(m)?m.value=n:null),"append-to-body":"",title:o($)=="add"?"添加":"编辑",width:"500px"},{footer:l(()=>[y("div",se,[t(u,{onClick:e[5]||(e[5]=n=>m.value=!1)},{default:l(()=>e[26]||(e[26]=[i("取消")])),_:1}),t(u,{type:"primary"},{default:l(()=>e[27]||(e[27]=[i("保存")])),_:1})])]),default:l(()=>[e[28]||(e[28]=y("div",{style:{"margin-bottom":"15px"}},"卡密商品名称",-1)),t(k,{modelValue:o(r).merchantOrderId,"onUpdate:modelValue":e[4]||(e[4]=n=>o(r).merchantOrderId=n),clearable:"",placeholder:"请输入卡密商品名称"},null,8,["modelValue"])]),_:1},8,["modelValue","title"]),t(D,{modelValue:o(f),"onUpdate:modelValue":e[14]||(e[14]=n=>R(f)?f.value=n:null),"append-to-body":"",title:"导入卡密",width:"500px"},{footer:l(()=>[y("div",pe,[t(u,{onClick:e[13]||(e[13]=n=>f.value=!1)},{default:l(()=>e[32]||(e[32]=[i("取消")])),_:1}),t(u,{type:"primary"},{default:l(()=>e[33]||(e[33]=[i("保存")])),_:1})])]),default:l(()=>[t(z,{model:o(r),onSubmit:e[12]||(e[12]=q(()=>{},["prevent"]))},{default:l(()=>[t(_,{label:"导入卡密"},{default:l(()=>[t(k,{modelValue:o(r).textarea,"onUpdate:modelValue":e[7]||(e[7]=n=>o(r).textarea=n),style:{width:"100%"},rows:10,type:"textarea",placeholder:"一行一张卡"},null,8,["modelValue"])]),_:1}),t(_,{label:"分隔符号"},{default:l(()=>[t(j,{class:"ml-4"},{default:l(()=>[t(u,{type:o(s)==1?"primary":"",onClick:e[8]||(e[8]=n=>s.value=1)},{default:l(()=>e[29]||(e[29]=[i("空格")])),_:1},8,["type"]),t(u,{type:o(s)==2?"primary":"",onClick:e[9]||(e[9]=n=>s.value=2)},{default:l(()=>e[30]||(e[30]=[i("逗号")])),_:1},8,["type"]),t(u,{type:o(s)==3?"primary":"",onClick:e[10]||(e[10]=n=>s.value=3)},{default:l(()=>e[31]||(e[31]=[i("竖线")])),_:1},8,["type"])]),_:1})]),_:1}),t(_,{label:"导入选项"},{default:l(()=>[t(H,{modelValue:o(r).checked1,"onUpdate:modelValue":e[11]||(e[11]=n=>o(r).checked1=n),label:"判断卡密重复"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(J,{"current-page":o(r).pageNo,"page-size":o(r).pageSize,total:o(S),onCurrentChange:F,onSizeChange:I},null,8,["current-page","page-size","total"]),o(b)?(V(),L(W,{key:0,dialogVisible:o(b),onDialogVisibleF:e[15]||(e[15]=n=>b.value=n)},null,8,["dialogVisible"])):te("",!0)])}}});export{be as default};
