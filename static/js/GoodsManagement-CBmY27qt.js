/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-10-15 13:32:11 
 */
import{_ as J}from"./GoodsManagementEdit.vue_vue_type_script_setup_true_lang-G8iOW1Ti.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-BwKkUDxi.js";import{_ as Q}from"./index-DzQ5upS1.js";import{_ as U}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BfuTFmT5.js";import{_ as W}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-sfirE_Gx.js";import{d as Z,r as m,p as K,Q as X,a7 as Y,o as C,b as ee,W as e,T as t,u as s,bp as te,a8 as p,bq as ae,aA as ne,aS as oe,Z as le,S as se,a1 as E,a9 as ie,aO as re,aq as ce,au as pe,aP as me,bd as _e,aI as de,aH as ue,aJ as fe,aR as ge,a0 as be}from"./vsv-element-plus-OoOmiKKG.js";import{g as ye,d as k}from"./goodsManagement-BL1aNZnt.js";import{$ as S,f}from"./index-B-0YFqa2.js";import"./workOrder-gGqjr0LF.js";import"./vsv-icon-Beiog8Do.js";import"./vsv-nprogress-CNnfF26O.js";const ve={class:"goods-management-container auto-height-container"},xe=Z({name:"GoodsManagement",__name:"GoodsManagement",setup(he){const d=m(null),g=m(),b=m([]),_=m(!0),y=m(0),u=m([]),i=K({pageNo:1,pageSize:20});X(()=>{var n;(n=g.value)==null||n.doLayout()});const c=async()=>{_.value=!0;const{data:n}=await ye(i);b.value=n.list,y.value=n.total,_.value=!1},$=n=>{i.pageNo=1,i.pageSize=n,c()},D=n=>{i.pageNo=n,c()},q=()=>{i.pageNo=1,c()},z=n=>{u.value=n},N=()=>{d.value.showEdit()},R=(n={})=>{d.value.showEdit(n)},v=n=>{if(n.id)S("您确定要删除当前项吗",null,async()=>{const{msg:a}=await k({ids:n.id});f(a,"success","hey"),await c()});else if(u.value.length>0){const a=u.value.map(r=>r.id).join(",");S("您确定要删除选中项吗",null,async()=>{const{msg:r}=await k({ids:a});f(r,"success","hey"),await c()})}else f("您未选中任何行","warning","hey")};return Y(()=>{c()}),(n,a)=>{const r=ie,x=W,B=re,h=ce,I=pe,M=U,T=Q,l=me,w=_e,V=de,F=ue,L=fe,A=ge,G=O,P=J,j=be;return C(),ee("div",ve,[e(T,null,{default:t(()=>[e(x,null,{default:t(()=>[e(r,{icon:s(te),type:"primary",onClick:N},{default:t(()=>a[2]||(a[2]=[p("添加")])),_:1},8,["icon"]),e(r,{icon:s(ae),type:"danger",onClick:v},{default:t(()=>a[3]||(a[3]=[p("删除")])),_:1},8,["icon"])]),_:1}),e(M,null,{default:t(()=>[e(I,{inline:"",model:s(i),onSubmit:a[1]||(a[1]=ne(()=>{},["prevent"]))},{default:t(()=>[e(h,null,{default:t(()=>[e(B,{modelValue:s(i).name,"onUpdate:modelValue":a[0]||(a[0]=o=>s(i).name=o),clearable:"",placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(r,{icon:s(oe),loading:s(_),"native-type":"submit",type:"primary",onClick:q},{default:t(()=>a[4]||(a[4]=[p("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),le((C(),se(A,{ref_key:"tableRef",ref:g,border:"",data:s(b),onSelectionChange:z},{empty:t(()=>[e(L,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(l,{type:"selection",width:"38"}),e(l,{align:"center",label:"序号",width:"55"},{default:t(({$index:o})=>[p(E(o+1),1)]),_:1}),e(l,{align:"center",label:"商品ID","min-width":"180",prop:"id","show-overflow-tooltip":""}),e(l,{align:"center",label:"商品名称","min-width":"120",prop:"name"}),e(l,{align:"center",label:"商品图",prop:"image"},{default:t(({row:o})=>[e(V,{placement:"top-start"},{reference:t(()=>[e(w,{src:o.image},null,8,["src"])]),default:t(()=>[e(w,{src:o.image},null,8,["src"])]),_:2},1024)]),_:1}),e(l,{align:"center",label:"商品类型","min-width":"120",prop:"type",sortable:""}),e(l,{align:"center",label:"商品售价","min-width":"120",prop:"price",sortable:""}),e(l,{align:"center",label:"销量",prop:"sales",sortable:""}),e(l,{align:"center",label:"库存",prop:"stock",sortable:""}),e(l,{align:"center",label:"状态","min-width":"100",prop:"status",sortable:""},{default:t(({row:o})=>[e(F,{effect:"dark",type:o.status=="已上架"?"success":o.status=="待上架"?"warning":"info"},{default:t(()=>[p(E(o.status),1)]),_:2},1032,["type"])]),_:1}),e(l,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(l,{align:"center",label:"操作",width:"150"},{default:t(({row:o})=>[e(r,{text:"",type:"primary",onClick:H=>R(o)},{default:t(()=>a[5]||(a[5]=[p("编辑")])),_:2},1032,["onClick"]),e(r,{text:"",type:"danger",onClick:H=>v(o)},{default:t(()=>a[6]||(a[6]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,s(_)]]),e(G,{"current-page":s(i).pageNo,"page-size":s(i).pageSize,total:s(y),onCurrentChange:D,onSizeChange:$},null,8,["current-page","page-size","total"]),e(P,{ref_key:"editRef",ref:d,onFetchData:c},null,512)])}}});export{xe as default};
