/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 15:53:45 
 */
import{k as _,f as C,C as h,_ as q}from"./index-CQIU_Sxf.js";import{d as B,r as m,p as V,a7 as F,o as O,S,T as s,W as o,a8 as U,u as a,h as j,x as I,aT as R,aq as L,aO as N,au as $,a9 as z}from"./vsv-element-plus-DDEqdpLt.js";function P(r){return _({url:"/departmentManagement/getList",method:"get",params:r})}const W=r=>_({url:"/departmentManagement/doEdit",method:"post",data:r}),Q=r=>_({url:"/departmentManagement/doDelete",method:"post",data:r}),A=B({name:"DepartmentManagementEdit",__name:"DepartmentManagementEdit",emits:["fetch-data"],setup(r,{expose:v,emit:E}){const x=E,d=m(),f=m([]),l=V({parentValue:""}),y=V({parentValue:[{required:!0,trigger:"blur",message:"请选择父节点"}],label:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]}),i=m(""),u=m(!1),M=async()=>{const{data:t}=await P();f.value=t.list};v({showEdit:t=>{u.value=!0,I(()=>{t?(delete t.value,i.value="编辑",Object.assign(l,t)):i.value="添加"})}});const g=()=>{var t,e;(t=d.value)==null||t.clearValidate(),(e=d.value)==null||e.resetFields(),x("fetch-data")},D=()=>{var t;(t=d.value)==null||t.validate(async e=>{if(e){const{msg:p}=await W(l);await C(p,"success","hey"),await g(),u.value=!1}})};return F(()=>{M()}),(t,e)=>{const p=R,c=L,b=N,w=$,k=z,T=h;return O(),S(T,{modelValue:a(u),"onUpdate:modelValue":e[3]||(e[3]=n=>j(u)?u.value=n:null),"append-to-body":"",title:a(i),width:"500px",onClose:g},{footer:s(()=>[o(k,{type:"primary",onClick:D},{default:s(()=>e[4]||(e[4]=[U("保存")])),_:1})]),default:s(()=>[o(w,{ref_key:"formRef",ref:d,"label-width":"80px",model:a(l),rules:a(y)},{default:s(()=>[o(c,{label:"父节点",prop:"parentValue"},{default:s(()=>[o(p,{modelValue:a(l).parentValue,"onUpdate:modelValue":e[0]||(e[0]=n=>a(l).parentValue=n),data:a(f)},null,8,["modelValue","data"])]),_:1}),o(c,{label:"名称",prop:"label"},{default:s(()=>[o(b,{modelValue:a(l).label,"onUpdate:modelValue":e[1]||(e[1]=n=>a(l).label=n),clearable:""},null,8,["modelValue"])]),_:1}),o(c,{label:"排序",prop:"order"},{default:s(()=>[o(b,{modelValue:a(l).order,"onUpdate:modelValue":e[2]||(e[2]=n=>a(l).order=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),G=q(A,[["__scopeId","data-v-70c178fd"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{X as D,G as _,Q as d,P as g};
