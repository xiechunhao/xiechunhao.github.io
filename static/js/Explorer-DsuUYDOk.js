/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-11-12 17:58:14 
 */
import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-CsTYoAB6.js";import{_ as K}from"./index-f_TyTld6.js";import{_ as Q}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DxKnGS_H.js";import{_ as ee}from"./VabQueryFormTopPanel-Dp-DSFcd.js";import{_ as ae}from"./index-CNDUKRL3.js";import{d as le,r as d,p as te,w as oe,a7 as ne,o as u,b as S,W as a,T as l,u as o,h as se,bv as ie,cX as re,e as de,a1 as ce,aA as ue,aS as pe,a8 as y,bU as _e,bq as me,Z as fe,S as x,a3 as ge,aj as be,Y as he,aO as ve,_ as ye,b7 as xe,aq as Ce,a9 as we,au as Ee,c1 as ke,bm as Ve,bd as Ne,aJ as Se,b8 as qe,a0 as ze}from"./vsv-element-plus-DDEqdpLt.js";import{g as Be,d as q}from"./table-B7OwQfBZ.js";import{$ as z,f as C,_ as De}from"./index-CJ7U9r9H.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const Ie={class:"explorer-container no-background-container auto-height-container"},Ue={style:{"margin-left":"3px"}},Fe=le({name:"Explorer",__name:"Explorer",setup(Le){const g=d([]),p=d(!0),w=d(0),c=d([]),s=te({pageNo:1,pageSize:20}),_=d(""),E=d(),k=d([]);oe(_,t=>{var e;(e=E.value)==null||e.filter(t)});const B=(t,e)=>t?e.label.includes(t):!0,D=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],I=()=>{i()},U={children:"children",label:"label"},i=async()=>{c.value=[],p.value=!0;const{data:t}=await Be(s);g.value=t.list,w.value=t.total,k.value=t.list.map(e=>e.image),p.value=!1},F=t=>{s.pageNo=1,s.pageSize=t,i()},L=t=>{s.pageNo=t,i()},R=()=>{s.pageNo=1,i()},$=(t,e)=>{if(t)c.value.push(e.id);else{const r=c.value.findIndex(m=>m===m.id);c.value.splice(r,1)}},T=t=>{if(t.id)z("您确定要删除当前项吗",null,async()=>{const{msg:e}=await q({ids:t.id});C(e,"success","hey"),await i()});else if(c.value.length>0){const e=c.value.map(r=>r.id).join(",");z("您确定要删除选中项吗",null,async()=>{const{msg:r}=await q({ids:e});C(r,"success","hey"),await i()})}else C("您未选中任何行","warning","hey")};return ne(()=>{i()}),(t,e)=>{const r=ve,m=ye,b=ae,f=xe,V=Ce,h=we,j=Ee,M=ee,A=ke,J=Q,O=K,P=Ve,W=Ne,X=Se,N=qe,Y=H,Z=ze;return u(),S("div",Ie,[a(N,{gutter:20},{default:l(()=>[a(f,{lg:4,md:24,sm:24,xl:4,xs:24},{default:l(()=>[a(b,{class:"auto-height-card"},{default:l(()=>[a(r,{modelValue:o(_),"onUpdate:modelValue":e[0]||(e[0]=n=>se(_)?_.value=n:null),placeholder:"请输入查询条件",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),a(o(ie),{ref_key:"treeRef",ref:E,data:D,"default-expand-all":"","filter-node-method":B,props:U,onNodeClick:I},{default:l(({node:n})=>[a(m,null,{default:l(()=>[a(o(re))]),_:1}),de("span",Ue,ce(n.label),1)]),_:1},512)]),_:1})]),_:1}),a(f,{lg:20,md:24,sm:24,xl:20,xs:24},{default:l(()=>[a(b,{class:"auto-height-card"},{default:l(()=>[a(O,null,{default:l(()=>[a(M,null,{default:l(()=>[a(j,{inline:"",model:o(s),onSubmit:e[2]||(e[2]=ue(()=>{},["prevent"]))},{default:l(()=>[a(V,{label:"标题"},{default:l(()=>[a(r,{modelValue:o(s).title,"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).title=n),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),a(V,null,{default:l(()=>[a(h,{icon:o(pe),loading:o(p),"native-type":"submit",type:"primary",onClick:R},{default:l(()=>e[3]||(e[3]=[y("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1}),a(J,{span:24},{default:l(()=>[a(A,{accept:"image/png,image/jpeg",action:"/uploadFile",multiple:"","on-error":i,"on-success":i,"show-file-list":!1,style:{margin:"0 10px 10px 0"}},{default:l(()=>[a(h,{icon:o(_e),type:"primary"},{default:l(()=>e[4]||(e[4]=[y("本地上传")])),_:1},8,["icon"])]),_:1}),a(h,{icon:o(me),type:"danger",onClick:T},{default:l(()=>e[5]||(e[5]=[y("删除")])),_:1},8,["icon"])]),_:1})]),_:1}),fe((u(),x(N,{class:"explorer-image-box",gutter:20},{default:l(()=>[(u(!0),S(ge,null,be(o(g),(n,G)=>(u(),x(f,{key:G,lg:6,md:8,sm:12,xl:6,xs:12},{default:l(()=>[a(b,{"body-style":{padding:"0",position:"relative"}},{default:l(()=>[a(P,{modelValue:n.id,"onUpdate:modelValue":v=>n.id=v,label:n.title,onChange:v=>$(v,n)},null,8,["modelValue","onUpdate:modelValue","label","onChange"]),a(W,{"preview-src-list":o(k),"preview-teleported":"",src:n.image},null,8,["preview-src-list","src"])]),_:2},1024)]),_:2},1024))),128)),o(g).length===0?(u(),x(f,{key:0,span:24},{default:l(()=>[a(X,{class:"vab-data-empty",description:"暂无数据"})]),_:1})):he("",!0)]),_:1})),[[Z,o(p)]]),a(Y,{"current-page":o(s).pageNo,"page-size":o(s).pageSize,total:o(w),onCurrentChange:L,onSizeChange:F},null,8,["current-page","page-size","total"])]),_:1})]),_:1})]),_:1})])}}}),Xe=De(Fe,[["__scopeId","data-v-04c850e0"]]);export{Xe as default};
