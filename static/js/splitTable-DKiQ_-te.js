/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 21:23:19 
 */
import{d as be,b as D,K as e,S as a,B as s,W as ge,o as y,u as o,I as he,ae as ye,Z as ve,P as v,Q as S,a9 as we,Y as r,n as Ce,ab as ke,ac as Ve,A as De,X as x}from"./vsv-element-plus-CleF0dO9.js";import{g as Se,d as z}from"./table-rNzIqkgx.js";import{e as xe,f as Re,h as Te,g as Me,_ as qe}from"./index-wMoNB7-P.js";import"./vsv-icon-DrZkBOPN.js";import"./vsv-nprogress-D5kd6v05.js";const $e={class:"split-table-container no-background-container auto-height-container"},Ne={key:0},Ue={key:1},ze=be({name:"SplitTable",__name:"splitTable",setup(Be){const R=useRouter(),B=xe(),{getAllRoutes:E}=storeToRefs(B),Y=Re(),{changeTabsMeta:A,addVisitedRoute:F}=Y,w=ref(null),T=ref(),f=ref(!0),M=ref([]),g=ref(!0),q=ref(0),p=ref([]),i=reactive({pageNo:1,pageSize:20}),h=ref(""),$=ref();watch(h,l=>{var t;(t=$.value)==null||t.filter(l)});const L=(l,t)=>l?t.label.includes(l):!0,H=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],I=()=>{m()},P={children:"children",label:"label"},m=async()=>{g.value=!0;const{data:l}=await Se(i);M.value=l.list,q.value=l.total,g.value=!1},j=l=>{i.pageNo=1,i.pageSize=l,m()},K=l=>{i.pageNo=l,m()},Q=()=>{i.pageNo=1,m()},W=l=>({published:"success",draft:"primary",deleted:"danger"})[l],X=()=>{f.value=!f.value},Z=l=>{p.value=l},G=()=>{w.value.showEdit()},J=(l={})=>{w.value.showEdit(l)},N=l=>{if(l.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:t}=await z({ids:l.id});$baseMessage(t,"success","hey"),await m()});else if(p.value.length>0){const t=p.value.map(u=>u.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:u}=await z({ids:t});$baseMessage(u,"success","hey"),await m()})}else $baseMessage("您未选中任何行","warning","hey")},O=async()=>{if(p.value.length>0)for(let l=0;l<p.value.length;l++){const t=Te(E.value,"/vab/table/defaultTableDetail"),u=Me({...t.at(-1),query:p.value[l]});u&&(await F(u),await A({title:"详情页",meta:{title:`${u.query.title} 详情页`}}))}else $baseMessage("请至少选择一行进行详情页跳转","warning","hey")},U=l=>{l.id?R.push({path:"/vab/table/defaultTableDetail",query:{...l,timestamp:Date.now()}}):p.value.length===1?R.push({path:"/vab/table/defaultTableDetail",query:{...p.value[0],timestamp:Date.now()}}):$baseMessage("请选择一行进行详情页跳转","warning","hey")};return onActivated(()=>{var l;(l=T.value)==null||l.doLayout()}),onBeforeMount(()=>{m()}),(l,t)=>{const u=s("vab-alert"),C=s("vab-card"),k=s("el-input"),b=s("el-form-item"),ee=s("el-date-picker"),V=s("el-option"),te=s("el-select"),c=s("el-button"),ae=s("vab-icon"),le=s("el-form"),ne=s("vab-query-form-top-panel"),oe=s("vab-query-form-left-panel"),se=s("vab-query-form"),d=s("el-table-column"),ie=s("el-rate"),de=s("el-switch"),re=s("el-tag"),ue=s("el-empty"),ce=s("el-table"),pe=s("vab-pagination"),me=s("vab-pane-split"),fe=s("default-table-edit"),_e=ge("loading");return y(),D("div",$e,[e(C,{class:"auto-height-card hidden-sm-and-up"},{default:a(()=>[e(u,{title:"手机端不支持分割表格演示",type:"warning"})]),_:1}),e(me,{class:"hidden-xs-only",ratio:"4/20"},{one:a(()=>[e(C,{class:"auto-height-card"},{default:a(()=>[e(k,{modelValue:o(h),"onUpdate:modelValue":t[0]||(t[0]=n=>he(h)?h.value=n:null),placeholder:"请输入查询条件",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),e(o(ye),{ref_key:"treeRef",ref:$,data:H,"default-expand-all":"","filter-node-method":L,props:P,onNodeClick:I},null,512)]),_:1})]),two:a(()=>[e(C,{class:"auto-height-card"},{default:a(()=>[e(u,{title:"长按竖线左右拖拽可重新分割面板大小"}),e(se,null,{default:a(()=>[e(ne,null,{default:a(()=>[e(le,{inline:"",model:o(i),onSubmit:t[5]||(t[5]=ve(()=>{},["prevent"]))},{default:a(()=>[e(b,{label:"标题"},{default:a(()=>[e(k,{modelValue:o(i).title,"onUpdate:modelValue":t[1]||(t[1]=n=>o(i).title=n),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),v(e(b,{label:"作者"},{default:a(()=>[e(k,{modelValue:o(i).author,"onUpdate:modelValue":t[2]||(t[2]=n=>o(i).author=n),clearable:"",placeholder:"请输入作者"},null,8,["modelValue"])]),_:1},512),[[S,!o(f)]]),v(e(b,{label:"时间"},{default:a(()=>[e(ee,{modelValue:o(i).datetime,"onUpdate:modelValue":t[3]||(t[3]=n=>o(i).datetime=n),format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择时间",type:"datetime"},null,8,["modelValue"])]),_:1},512),[[S,!o(f)]]),v(e(b,{label:"状态"},{default:a(()=>[e(te,{modelValue:o(i).status,"onUpdate:modelValue":t[4]||(t[4]=n=>o(i).status=n),placeholder:"请选择状态"},{default:a(()=>[e(V,{label:"success",value:"published"}),e(V,{label:"primary",value:"draft"}),e(V,{label:"danger",value:"deleted"})]),_:1},8,["modelValue"])]),_:1},512),[[S,!o(f)]]),e(b,null,{default:a(()=>[e(c,{icon:o(we),loading:o(g),"native-type":"submit",type:"primary",onClick:Q},{default:a(()=>t[6]||(t[6]=[r("查询")])),_:1},8,["icon","loading"]),e(c,{class:"hidden-xs-only",text:"",type:"primary",onClick:X},{default:a(()=>[o(f)?(y(),D("span",Ne,"展开")):(y(),D("span",Ue,"合并")),e(ae,{class:Ce(["vab-dropdown",{"vab-dropdown-active":o(f)}]),icon:"arrow-up-s-line"},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(oe,{span:24},{default:a(()=>[e(c,{icon:o(ke),type:"primary",onClick:G},{default:a(()=>t[7]||(t[7]=[r("添加")])),_:1},8,["icon"]),e(c,{icon:o(Ve),type:"danger",onClick:N},{default:a(()=>t[8]||(t[8]=[r("删除")])),_:1},8,["icon"]),e(c,{type:"primary",onClick:U},{default:a(()=>t[9]||(t[9]=[r("详情")])),_:1}),e(c,{class:"hidden-xs-only",type:"primary",onClick:O},{default:a(()=>t[10]||(t[10]=[r("后台打开详情")])),_:1})]),_:1})]),_:1}),v((y(),De(ce,{ref_key:"tableRef",ref:T,border:"",data:o(M),onSelectionChange:Z},{empty:a(()=>[e(ue,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(d,{type:"selection",width:"38"}),e(d,{align:"center",label:"序号",width:"55"},{default:a(({$index:n})=>[r(x(n+1),1)]),_:1}),e(d,{align:"center",label:"序号",width:"55"},{default:a(({$index:n})=>[r(x(n+1),1)]),_:1}),e(d,{align:"center",label:"标题","min-width":"200",prop:"title"}),e(d,{align:"center",label:"作者",prop:"author"}),e(d,{align:"center",label:"评级","min-width":"200"},{default:a(({row:n})=>[e(ie,{modelValue:n.rate,"onUpdate:modelValue":_=>n.rate=_,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{align:"center",label:"数量","min-width":"100",prop:"count",sortable:""}),e(d,{align:"center",label:"开关",prop:"switch"},{default:a(({row:n})=>[e(de,{modelValue:n.switch,"onUpdate:modelValue":_=>n.switch=_},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{align:"center",label:"状态","min-width":"100"},{default:a(({row:n})=>[e(re,{effect:"dark",type:W(n.status)},{default:a(()=>[r(x(n.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(d,{align:"center",label:"操作",width:"215"},{default:a(({row:n})=>[e(c,{text:"",type:"primary",onClick:_=>U(n)},{default:a(()=>t[11]||(t[11]=[r("详情")])),_:2},1032,["onClick"]),e(c,{text:"",type:"primary",onClick:_=>J(n)},{default:a(()=>t[12]||(t[12]=[r("编辑")])),_:2},1032,["onClick"]),e(c,{text:"",type:"danger",onClick:_=>N(n)},{default:a(()=>t[13]||(t[13]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[_e,o(g)]]),e(pe,{"current-page":o(i).pageNo,"page-size":o(i).pageSize,total:o(q),onCurrentChange:K,onSizeChange:j},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(fe,{ref_key:"editRef",ref:w,onFetchData:m},null,512)])}}}),He=qe(ze,[["__scopeId","data-v-c0ae2183"]]);export{He as default};
