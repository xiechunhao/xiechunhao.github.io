/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:46:00 
 */
import{d as S,N as o,a2 as U,o as g,b as R,T as a,$ as n,u as l,aj as V,a4 as m,k as Y,e as z,a3 as G,_ as H,Y as J,M as O}from"./vsv-element-plus-CxGOTlXz.js";import{g as Q,d as W,a as X}from"./dictionaryManagement-BzDCxnxV.js";import{_ as Z}from"./index-BxCyh4rX.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const ee={class:"dictionary-management-container no-background-container auto-height-container"},te=["onClick"],ae=S({name:"DictionaryManagement",__name:"index",setup(ne){const h=ref(),x=ref(null),y=ref(null),d=ref([]),$=reactive({children:"children",label:"label"}),C=ref([]),v=ref(!0),b=ref(!0),w=ref(""),i=ref(""),B=()=>{y.value.showEdit()},D=e=>{y.value.showEdit(e)},q=e=>{e.id&&$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:t}=await W({paths:e.id});$baseMessage(t,"success","hey"),await c()})},c=async(e={key:"root"})=>{e.key==="root"?b.value=!0:b.value=!1,w.value=e.key,v.value=!0;const t=await X(e);C.value=t.data.list,v.value=!1},E=e=>{c(e)},L=(e,t)=>e?t.label.includes(e):!0;Q().then(({data:e})=>{const{list:t}=e;d.value=t});const M=(e,t)=>{const r=e.parent,u=r.data.children||r.data,k=u.findIndex(p=>p.id===t.id);u.splice(k,1),d.value=[...d.value]};return watch(i,e=>{x.value.filter(e)}),onActivated(()=>{var e;(e=h.value)==null||e.doLayout()}),onBeforeMount(()=>{c()}),(e,t)=>{const r=o("el-button"),u=o("el-input"),k=o("el-tree"),p=o("vab-card"),N=o("el-col"),T=o("vab-query-form-top-panel"),A=o("vab-query-form"),_=o("el-table-column"),I=o("el-empty"),K=o("el-table"),j=o("el-row"),F=o("dictionary-management-edit"),P=U("loading");return g(),R("div",ee,[a(j,{gutter:20},{default:n(()=>[a(N,{lg:4,md:8,sm:24,xl:4,xs:24},{default:n(()=>[a(p,{class:"auto-height-card"},{default:n(()=>[a(r,{class:"tree-button",icon:l(V),type:"primary",onClick:B},{default:n(()=>t[2]||(t[2]=[m("添加字典分类")])),_:1},8,["icon"]),a(u,{modelValue:l(i),"onUpdate:modelValue":t[0]||(t[0]=s=>Y(i)?i.value=s:null),clearable:"",placeholder:"请输入字典名称"},null,8,["modelValue"]),a(k,{ref_key:"treeRef",ref:x,data:l(d),"default-expand-all":"","default-expanded-keys":["root"],"filter-node-method":L,"node-key":"id",props:l($),onNodeClick:E},{default:n(({node:s,data:f})=>[z("span",null,G(s.label),1),f.children?H("",!0):(g(),R("a",{key:0,onClick:oe=>M(s,f)},"删除",8,te))]),_:1},8,["data","props"])]),_:1})]),_:1}),a(N,{lg:20,md:16,sm:24,xl:20,xs:24},{default:n(()=>[a(p,{class:"auto-height-card"},{default:n(()=>[a(A,null,{default:n(()=>[a(T,{span:12},{default:n(()=>[a(r,{disabled:l(b),icon:l(V),type:"primary",onClick:t[1]||(t[1]=s=>D({parentKey:l(w)}))},{default:n(()=>t[3]||(t[3]=[m("添加")])),_:1},8,["disabled","icon"])]),_:1})]),_:1}),J((g(),O(K,{ref_key:"tableRef",ref:h,border:"",data:l(C)},{empty:n(()=>[a(I,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[a(_,{label:"id","min-width":"180",prop:"id"}),a(_,{label:"key值",prop:"key"}),a(_,{label:"字典值",prop:"value"}),a(_,{label:"操作",width:"150"},{default:n(({row:s})=>[a(r,{text:"",type:"primary",onClick:f=>D(s)},{default:n(()=>t[4]||(t[4]=[m("编辑")])),_:2},1032,["onClick"]),a(r,{text:"",type:"danger",onClick:f=>q(s)},{default:n(()=>t[5]||(t[5]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,l(v)]])]),_:1})]),_:1})]),_:1}),a(F,{ref_key:"editRef",ref:y,onFetchData:c},null,512)])}}}),ce=Z(ae,[["__scopeId","data-v-4da36fdd"]]);export{ce as default};
