/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2025-03-05 10:50:28
 */
(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[954],{6556:function(t,e,n){"use strict";n.d(e,{FD:function(){return i},Y:function(){return i}});var o=n(16901);var r=0;Array.isArray;function i(t,e,n,i,a,s){e||(e={});var l,u,c=e;if("ref"in c)for(u in c={},e)"ref"==u?l=e[u]:c[u]=e[u];var d={type:t,props:c,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--r,__i:-1,__u:0,__source:a,__self:s};if("function"==typeof t&&(l=t.defaultProps))for(u in l)void 0===c[u]&&(c[u]=l[u]);return o.fF.vnode&&o.fF.vnode(d),d}},13105:function(t,e,n){var o;
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(t){"use strict";if("Element"in t){var e="classList",n="prototype",o=t.Element[n],r=Object,i=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},u=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,r=n.length;o<r;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",-1!==l(this,t)},c.add=function(){var t,e=arguments,n=0,o=e.length,r=!1;do{t=e[n]+"",-1===l(this,t)&&(this.push(t),r=!0)}while(++n<o);r&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,o=0,r=n.length,i=!1;do{t=n[o]+"",e=l(this,t);while(-1!==e)this.splice(e,1),i=!0,e=l(this,t)}while(++o<r);i&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),o=n?!0!==e&&"remove":!1!==e&&"add";return o&&this[o](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(o,e,h)}catch(p){-2146823252===p.number&&(h.enumerable=!1,r.defineProperty(o,e,h))}}else r[n].__defineGetter__&&o.__defineGetter__(e,d)}}(self)
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */,function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(o){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},o=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},r=n.prototype,i=o.prototype,a=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=t.URL||t.webkitURL||t,d=c.createObjectURL,h=c.revokeObjectURL,p=c,f=t.btoa,v=t.atob,g=t.ArrayBuffer,y=t.Uint8Array,m=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;o.fake=i.fake=!0;while(u--)s.prototype[l[u]]=u+1;return c.createObjectURL||(p=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(m),n.origin=e&&e[1])),n}),p.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof o?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):d?d.call(c,t):void 0},p.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&h&&h.call(c,t)},r.append=function(t){var n=this.data;if(y&&(t instanceof g||t instanceof y)){for(var r="",i=new y(t),l=0,u=i.length;l<u;l++)r+=String.fromCharCode(i[l]);n.push(r)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&v?n.push(v(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!==typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},r.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},r.toString=function(){return"[object BlobBuilder]"},i.slice=function(t,e,n){var r=arguments.length;return r<3&&(n=null),new o(this.data.slice(t,r>1?e:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var o=n&&n.type||"",r=new e;if(t)for(var i=0,a=t.length;i<a;i++)Uint8Array&&t[i]instanceof Uint8Array?r.append(t[i].buffer):r.append(t[i]);var s=r.getBlob(o);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this),function(r,i){"use strict";var a="undefined"!==typeof process&&process&&process.versions&&process.versions.electron;a?(o=function(){return i}.call(e,n,e,t),void 0===o||(t.exports=o)):t.exports=i}(0,function(){"use strict";function t(t,e){return this.init(t,e)}return t.extensions={},function(e){function n(t,e){var n,o=Array.prototype.slice.call(arguments,2);e=e||{};for(var r=0;r<o.length;r++){var i=o[r];if(i)for(n in i)i.hasOwnProperty(n)&&"undefined"!==typeof i[n]&&(t||!1===e.hasOwnProperty(n))&&(e[n]=i[n])}return e}var o=!1;try{var r=document.createElement("div"),i=document.createTextNode(" ");r.appendChild(i),o=r.contains(i)}catch(s){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(a.isMac&&t.metaKey||!a.isMac&&t.ctrlKey)},isKey:function(t,e){var n=a.getKeyCode(t);return!1===Array.isArray(e)?n===e:-1!==e.indexOf(n)},getKeyCode:function(t){var e=t.which;return null===e&&(e=null!==t.charCode?t.charCode:t.keyCode),e},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},createLink:function(t,e,n,o){var r=t.createElement("a");return a.moveTextRangeIntoElement(e[0],e[e.length-1],r),r.setAttribute("href",n),o&&("_blank"===o&&r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target",o)),r},findOrCreateMatchingTextNodes:function(t,e,n){var o=t.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=[],i=0,s=!1,l=null,u=null;while(null!==(l=o.nextNode()))if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&n.start<i+l.nodeValue.length&&(s=!0,u=a.splitStartNodeIfNeeded(l,n.start,i)),s&&a.splitEndNodeIfNeeded(l,u,n.end,i),s&&i===n.end)break;if(s&&i>n.end+1)throw new Error("PerformLinking overshot the target!");s&&r.push(u||l),i+=l.nodeValue.length,null!==u&&(i+=u.nodeValue.length,o.nextNode()),u=null}else"img"===l.tagName.toLowerCase()&&(!s&&n.start<=i&&(s=!0),s&&r.push(l));return r},splitStartNodeIfNeeded:function(t,e,n){return e!==n?t.splitText(e-n):null},splitEndNodeIfNeeded:function(t,e,n,o){var r,i;r=o+t.nodeValue.length+(e?e.nodeValue.length:0)-1,i=n-o-(e?t.nodeValue.length:0),r>=n&&o!==r&&0!==i&&(e||t).splitText(i)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var n=[],o=t.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(o).length)return[e];for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(3===i.nodeType)n.push(i);else if(1===i.nodeType){var a=i.querySelectorAll(o);0===a.length?n.push(i):n=n.concat(t.util.splitByBlockElements(i))}}return n},findAdjacentTextNodeWithContent:function(t,e,n){var o,r=!1,i=n.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);o=i.nextNode();while(o){if(o===e)r=!0;else if(r&&3===o.nodeType&&o.nodeValue&&o.nodeValue.trim().length>0)break;o=i.nextNode()}return o},findPreviousSibling:function(t){if(!t||a.isMediumEditorElement(t))return!1;var e=t.previousSibling;while(!e&&!a.isMediumEditorElement(t.parentNode))t=t.parentNode,e=t.previousSibling;return e},isDescendant:function(t,e,n){if(!t||!e)return!1;if(t===e)return!!n;if(1!==t.nodeType)return!1;if(o||3!==e.nodeType)return t.contains(e);var r=e.parentNode;while(null!==r){if(r===t)return!0;r=r.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,e){var n,o,r,i=50,a=null,s=0,l=function(){s=Date.now(),a=null,r=t.apply(n,o),a||(n=o=null)};return e||0===e||(e=i),function(){var i=Date.now(),u=e-(i-s);return n=this,o=arguments,u<=0||u>e?(a&&(clearTimeout(a),a=null),s=i,r=t.apply(n,o),a||(n=o=null)):a||(a=setTimeout(l,u)),r}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(a.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,n){var o,r,i,s,l,u,c,d=!1,h=["insertHTML",!1,n];if(!t.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,h)}catch(p){}if(o=e.getSelection(),o.rangeCount){if(r=o.getRangeAt(0),c=r.commonAncestorContainer,a.isMediumEditorElement(c)&&!c.firstChild)r.selectNode(c.appendChild(e.createTextNode("")));else if(3===c.nodeType&&0===r.startOffset&&r.endOffset===c.nodeValue.length||3!==c.nodeType&&c.innerHTML===r.toString()){while(!a.isMediumEditorElement(c)&&c.parentNode&&1===c.parentNode.childNodes.length&&!a.isMediumEditorElement(c.parentNode))c=c.parentNode;r.selectNode(c)}r.deleteContents(),i=e.createElement("div"),i.innerHTML=n,s=e.createDocumentFragment();while(i.firstChild)l=i.firstChild,u=s.appendChild(l);r.insertNode(s),u&&(r=r.cloneRange(),r.setStartAfter(u),r.collapse(!0),t.selection.selectRange(e,r)),d=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(h,d),d},execFormatBlock:function(e,n){var o,r=a.getTopBlockContainer(t.selection.getSelectionStart(e));if("blockquote"===n){if(r&&(o=Array.prototype.slice.call(r.childNodes),o.some((function(t){return a.isBlockContainer(t)}))))return e.execCommand("outdent",!1,null);if(a.isIE)return e.execCommand("indent",!1,n)}if(r&&n===r.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),r&&"blockquote"===r.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return e.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return o=Array.prototype.slice.call(r.childNodes),o.some((function(t){return!a.isBlockContainer(t)}))&&e.execCommand("formatBlock",!1,n),e.execCommand("outdent",!1,n)}return e.execCommand("formatBlock",!1,n)},setTargetBlank:function(t,e){var n,o=e||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank",t.rel="noopener noreferrer";else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)!1!==o&&o!==t[n].attributes.href.value||(t[n].target="_blank",t[n].rel="noopener noreferrer")},removeTargetBlank:function(t,e){var n;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target"),t.removeAttribute("rel");else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)e===t[n].attributes.href.value&&(t[n].removeAttribute("target"),t[n].removeAttribute("rel"))},addClassToAnchors:function(t,e){var n,o,r=e.split(" ");if("a"===t.nodeName.toLowerCase())for(o=0;o<r.length;o+=1)t.classList.add(r[o]);else{var i=t.getElementsByTagName("a");if(0===i.length){var s=a.getClosestTag(t,"a");t=s?[s]:[]}else t=i;for(n=0;n<t.length;n+=1)for(o=0;o<r.length;o+=1)t[n].classList.add(r[o])}},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;var e=t.parentNode,n=e.nodeName.toLowerCase();while("li"===n||!a.isBlockContainer(e)&&"div"!==n){if("li"===n)return!0;if(e=e.parentNode,!e)return!1;n=e.nodeName.toLowerCase()}return!1},cleanListDOM:function(e,n){if("li"===n.nodeName.toLowerCase()){var o=n.parentElement;"p"===o.parentElement.nodeName.toLowerCase()&&(a.unwrap(o.parentElement,e),t.selection.moveCursor(e,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(t,e,n){var o=e,r=null,i=!n;while(o!==t){var a,s=o.parentNode,l=s.cloneNode(!1),u=i?o:s.firstChild;r&&(i?l.appendChild(r):a=r),r=l;while(u){var c=u.nextSibling;u===o?(u.hasChildNodes()?u=u.cloneNode(!1):u.parentNode.removeChild(u),u.textContent&&r.appendChild(u),u=i?c:null):(u.parentNode.removeChild(u),(u.hasChildNodes()||u.textContent)&&r.appendChild(u),u=c)}a&&r.appendChild(a),o=s}return r},moveTextRangeIntoElement:function(t,e,n){if(!t||!e)return!1;var o=a.findCommonRoot(t,e);if(!o)return!1;if(e===t){var r=t.parentNode,i=t.nextSibling;return r.removeChild(t),n.appendChild(t),i?r.insertBefore(n,i):r.appendChild(n),n.hasChildNodes()}for(var s,l,u,c=[],d=0;d<o.childNodes.length;d++)if(u=o.childNodes[d],s){if(a.isDescendant(u,e,!0)){l=u;break}c.push(u)}else a.isDescendant(u,t,!0)&&(s=u);var h=l.nextSibling,p=o.ownerDocument.createDocumentFragment();return s===t?(s.parentNode.removeChild(s),p.appendChild(s)):p.appendChild(a.splitOffDOMTree(s,t)),c.forEach((function(t){t.parentNode.removeChild(t),p.appendChild(t)})),l===e?(l.parentNode.removeChild(l),p.appendChild(l)):p.appendChild(a.splitOffDOMTree(l,e,!0)),n.appendChild(p),l.parentNode===o?o.insertBefore(n,l):h?o.insertBefore(n,h):o.appendChild(n),n.hasChildNodes()},depthOfNode:function(t){var e=0,n=t;while(null!==n.parentNode)n=n.parentNode,e++;return e},findCommonRoot:function(t,e){var n=a.depthOfNode(t),o=a.depthOfNode(e),r=t,i=e;while(n!==o)n>o?(r=r.parentNode,n-=1):(i=i.parentNode,o-=1);while(r!==i)r=r.parentNode,i=i.parentNode;return r},isElementAtBeginningOfBlock:function(t){var e,n;while(!a.isBlockContainer(t)&&!a.isMediumEditorElement(t)){n=t;while(n=n.previousSibling)if(e=3===n.nodeType?n.nodeValue:n.textContent,e.length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return a.traverseUp(t,(function(t){return a.isMediumEditorElement(t)}))},isBlockContainer:function(t){return t&&3!==t.nodeType&&-1!==a.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())},getClosestBlockContainer:function(t){return a.traverseUp(t,(function(t){return a.isBlockContainer(t)||a.isMediumEditorElement(t)}))},getTopBlockContainer:function(t){var e=!!a.isBlockContainer(t)&&t;return a.traverseUp(t,(function(t){return a.isBlockContainer(t)&&(e=t),!(e||!a.isMediumEditorElement(t))&&(e=t,!0)})),e},getFirstSelectableLeafNode:function(t){while(t&&t.firstChild)t=t.firstChild;if(t=a.traverseUp(t,(function(t){return-1===a.emptyElementNames.indexOf(t.nodeName.toLowerCase())})),"table"===t.nodeName.toLowerCase()){var e=t.querySelector("th, td");e&&(t=e)}return t},getFirstTextNode:function(t){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var e=0;e<t.childNodes.length;e++){var n=a._getFirstTextNode(t.childNodes[e]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==e.console&&"function"===typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(t,e,n){var o=t+" is deprecated, please use "+e+" instead.";n&&(o+=" Will be removed in "+n),a.warn(o)},deprecatedMethod:function(t,e,n,o){a.deprecated(t,e,o),"function"===typeof this[e]&&this[e].apply(this,n)},cleanupAttrs:function(t,e){e.forEach((function(e){t.removeAttribute(e)}))},cleanupTags:function(t,e){-1!==e.indexOf(t.nodeName.toLowerCase())&&t.parentNode.removeChild(t)},unwrapTags:function(e,n){-1!==n.indexOf(e.nodeName.toLowerCase())&&t.util.unwrap(e,document)},getClosestTag:function(t,e){return a.traverseUp(t,(function(t){return t.nodeName.toLowerCase()===e.toLowerCase()}))},unwrap:function(t,e){for(var n=e.createDocumentFragment(),o=Array.prototype.slice.call(t.childNodes),r=0;r<o.length;r++)n.appendChild(o[r]);n.childNodes.length?t.parentNode.replaceChild(n,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};t.util=a}(window),function(){var e=function(e){t.util.extend(this,e)};e.extend=function(e){var n,o=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return o.apply(this,arguments)},t.util.extend(n,o);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,e&&t.util.extend(n.prototype,e),n},e.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(t){return this.base.options[t]}},["execAction","on","off","subscribe","trigger"].forEach((function(t){e.prototype[t]=function(){return this.base[t].apply(this.base,arguments)}})),t.Extension=e}(),function(){function e(e){return t.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(e,n){var o,r,i=n.getSelection();return 0!==i.rangeCount&&(o=i.getRangeAt(0),r=o.commonAncestorContainer,t.util.traverseUp(r,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent((function(e){return t.util.isMediumEditorElement(e)}),e)},exportSelection:function(t,e){if(!t)return null;var n=null,o=e.getSelection();if(o.rangeCount>0){var r,i=o.getRangeAt(0),a=i.cloneRange();a.selectNodeContents(t),a.setEnd(i.startContainer,i.startOffset),r=a.toString().length,n={start:r,end:r+i.toString().length},this.doesRangeStartWithImages(i,e)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(t,n,i.endContainer,i.endOffset);if(s&&(n.trailingImageCount=s),0!==r){var l=this.getIndexRelativeToAdjacentEmptyBlocks(e,t,i.startContainer,i.startOffset);-1!==l&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(t,e,n,o){if(t&&e){var r=n.createRange();r.setStart(e,0),r.collapse(!0);var i,a=e,s=[],l=0,u=!1,c=!1,d=0,h=!1,p=!1,f=null;(o||t.startsWithImage||"undefined"!==typeof t.emptyBlocksIndex)&&(p=!0);while(!h&&a)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if(t.trailingImageCount&&c&&("img"===a.nodeName.toLowerCase()&&d++,d===t.trailingImageCount)){var v=0;while(a.parentNode.childNodes[v]!==a)v++;r.setEnd(a.parentNode,v+1),h=!0}if(!h&&1===a.nodeType){var g=a.childNodes.length-1;while(g>=0)s.push(a.childNodes[g]),g-=1}}else i=l+a.length,!u&&t.start>=l&&t.start<=i&&(p||t.start<i?(r.setStart(a,t.start-l),u=!0):f=a),u&&t.end>=l&&t.end<=i&&(t.trailingImageCount?c=!0:(r.setEnd(a,t.end-l),h=!0)),l=i;h||(a=s.pop())}!u&&f&&(r.setStart(f,f.length),r.setEnd(f,f.length)),"undefined"!==typeof t.emptyBlocksIndex&&(r=this.importSelectionMoveCursorPastBlocks(n,e,t.emptyBlocksIndex,r)),o&&(r=this.importSelectionMoveCursorPastAnchor(t,r)),this.selectRange(n,r)}},importSelectionMoveCursorPastAnchor:function(e,n){var o=function(t){return"a"===t.nodeName.toLowerCase()};if(e.start===e.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&t.util.traverseUp(n.startContainer,o)){var r=n.startContainer,i=n.startContainer.parentNode;while(null!==i&&"a"!==i.nodeName.toLowerCase())i.childNodes[i.childNodes.length-1]!==r?i=null:(r=i,i=i.parentNode);if(null!==i&&"a"===i.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<i.parentNode.childNodes.length;s++)i.parentNode.childNodes[s]===i&&(a=s);n.setStart(i.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,o,r,i){var a,s,l=n.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,e,!1),u=i.startContainer,c=0;r=r||1,a=3===u.nodeType&&t.util.isBlockContainer(u.previousSibling)?u.previousSibling:t.util.getClosestBlockContainer(u);while(l.nextNode())if(s){if(s=l.currentNode,c++,c===r)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),i.setStart(t.util.getFirstSelectableLeafNode(s),0),i},getIndexRelativeToAdjacentEmptyBlocks:function(n,o,r,i){if(r.textContent.length>0&&i>0)return-1;var a=r;if(3!==a.nodeType&&(a=r.childNodes[i]),a){if(!t.util.isElementAtBeginningOfBlock(a))return-1;var s=t.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}var l=t.util.getClosestBlockContainer(r),u=n.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,e,!1),c=0;while(u.nextNode()){var d=""===u.currentNode.textContent;if((d||c>0)&&(c+=1),u.currentNode===l)return c;d||(c=0)}return c},doesRangeStartWithImages:function(t,e){if(0!==t.startOffset||1!==t.startContainer.nodeType)return!1;if("img"===t.startContainer.nodeName.toLowerCase())return!0;var n=t.startContainer.querySelector("img");if(!n)return!1;var o=e.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);while(o.nextNode()){var r=o.currentNode;if(r===n)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(t,e,n,o){if(0===o||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;var r=n.childNodes[o-1];while(r.hasChildNodes())r=r.lastChild;var i,a=t,s=[],l=0,u=!1,c=!1,d=!1,h=0;while(!d&&a)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if("img"===a.nodeName.toLowerCase()&&h++,a===r)d=!0;else if(1===a.nodeType){var p=a.childNodes.length-1;while(p>=0)s.push(a.childNodes[p]),p-=1}}else h=0,i=l+a.length,!u&&e.start>=l&&e.start<=i&&(u=!0),u&&e.end>=l&&e.end<=i&&(c=!0),l=i;d||(a=s.pop())}return h},selectionContainsContent:function(t){var e=t.getSelection();if(!e||e.isCollapsed||!e.rangeCount)return!1;if(""!==e.toString().trim())return!0;var n=this.getSelectedParentElement(e.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(t){var e,n=this.findMatchingSelectionParent((function(t){var n=t&&t.getAttribute("contenteditable");return"true"===n&&(e=!0),"#text"!==t.nodeName&&"false"===n}),t);return!e&&n},getSelectionHtml:function(t){var e,n,o,r="",i=t.getSelection();if(i.rangeCount){for(o=t.createElement("div"),e=0,n=i.rangeCount;e<n;e+=1)o.appendChild(i.getRangeAt(e).cloneContents());r=o.innerHTML}return r},getCaretOffsets:function(t,e){var n,o;return e||(e=window.getSelection().getRangeAt(0)),n=e.cloneRange(),o=e.cloneRange(),n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),o.selectNodeContents(t),o.setStart(e.endContainer,e.endOffset),{left:n.toString().length,right:o.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var e,n,o,r=t.getSelection();if(!r.rangeCount||r.isCollapsed||!r.getRangeAt(0).commonAncestorContainer)return[];if(e=r.getRangeAt(0),3===e.commonAncestorContainer.nodeType){n=[],o=e.commonAncestorContainer;while(o.parentNode&&1===o.parentNode.childNodes.length)n.push(o.parentNode),o=o.parentNode;return n}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),(function(t){return"function"!==typeof r.containsNode||r.containsNode(t,!0)}))},selectNode:function(t,e){var n=e.createRange();n.selectNodeContents(t),this.selectRange(e,n)},select:function(t,e,n,o,r){var i=t.createRange();return i.setStart(e,n),o?i.setEnd(o,r):i.collapse(!0),this.selectRange(t,i),i},clearSelection:function(t,e){e?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,e,n){this.select(t,e,n)},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(t,e){var n=t.getSelection();n.removeAllRanges(),n.addRange(e)},getSelectionStart:function(t){var e=t.getSelection().anchorNode,n=e&&3===e.nodeType?e.parentNode:e;return n}};t.selection=n}(),function(){function e(e,n){return!!e&&e.some((function(e){if("function"!==typeof e.getInteractionElements)return!1;var o=e.getInteractionElements();return!!o&&(Array.isArray(o)||(o=[o]),o.some((function(e){return t.util.isDescendant(e,n,!0)})))}))}var n=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(e,n,o,r){var i=this.base.options.contentWindow,a=this.base.options.ownerDocument;e=t.util.isElement(e)||[i,a].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){t.addEventListener(n,o,r),this.events.push([t,n,o,r])}.bind(this))},detachDOMEvent:function(e,n,o,r){var i,a,s=this.base.options.contentWindow,l=this.base.options.ownerDocument;e&&(e=t.util.isElement(e)||[s,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){i=this.indexOfListener(t,n,o,r),-1!==i&&(a=this.events.splice(i,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this)))},indexOfListener:function(t,e,n,o){var r,i,a;for(r=0,i=this.events.length;r<i;r+=1)if(a=this.events[r],a[0]===t&&a[1]===e&&a[2]===n&&a[3]===o)return r;return-1},detachAllDOMEvents:function(){var t=this.events.pop();while(t)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter((function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")})),n=0,o=e.length;n<o;n++){var r=e[n];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(t){this.listeners["editableInput"]&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach((function(e){this.attachDOMEvent(t,e["name"],e["handler"].bind(this))}),this)},enableCustomEvent:function(t){void 0!==this.disabledEvents[t]&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,e){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e)},detachCustomEvent:function(t,e){var n=this.indexOfCustomListener(t,e);-1!==n&&this.customEvents[t].splice(n,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,n){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach((function(t){t(e,n)}))},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach((function(t){t.removeAttribute("data-medium-focused")}))},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);-1!==e&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,n){t.execCommand.listeners&&t.execCommand.listeners.forEach((function(t){t({command:e[0],value:e[2],args:e,result:n})}))},n=function(){var n=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return n;var o=Array.prototype.slice.call(arguments);return e(o,n),n};n.orig=t.execCommand,n.listeners=[],n.callListeners=e,t.execCommand=n}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach((function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML}),this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[t]=!0}},attachToEachElement:function(t,e){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach((function(n){this.attachDOMEvent(n,t,e.bind(this))}),this),this.eventsCache.push({name:t,handler:e})},cleanupElement:function(t){var e=t.getAttribute("medium-editor-index");e&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[e])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(n,o){var r,i=this.base.getFocusedElement();i&&"click"===o.type&&this.lastMousedownTarget&&(t.util.isDescendant(i,this.lastMousedownTarget,!0)||e(this.base.extensions,this.lastMousedownTarget))&&(r=i),r||this.base.elements.some((function(e){return!r&&t.util.isDescendant(e,n,!0)&&(r=e),!!r}),this);var a=!t.util.isDescendant(i,n,!0)&&!e(this.base.extensions,n);r!==i&&(i&&a&&(i.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,i)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,r))),a&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(t,e){if(this.contentCache){var n=t.getAttribute("medium-editor-index"),o=t.innerHTML;o!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[n]=o}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var n,o=e.currentTarget.activeElement;this.base.elements.some((function(e){return!!t.util.isDescendant(e,o,!0)&&(n=e,!0)}),this),n&&this.updateInput(n,{target:o,currentTarget:n})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.util.isKey(e,t.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.ENTER)||e.ctrlKey&&t.util.isKey(e,t.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.util.isKey(e,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},t.Events=n}(),function(){var e=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){e.isBuiltInButton(n)?t.Extension.call(this,this.defaults[n]):t.Extension.call(this,n)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"===typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"===typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"===typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,n=this.getAria(),o=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach((function(e){t.classList.add(e)})),t.setAttribute("data-action",this.getAction()),n&&(t.setAttribute("title",n),t.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach((function(e){t.setAttribute(e,this.attrs[e])}),this),"fontawesome"===o&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,n,o=!1,r=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(r&&r.length>0&&(o=-1!==r.indexOf(t.nodeName.toLowerCase())),!o&&this.style&&(e=this.style.value.split("|"),n=this.window.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach((function(t){this.knownState||(o=-1!==n.indexOf(t),(o||"text-decoration"!==this.style.prop)&&(this.knownState=o))}),this)),o)}});e.isBuiltInButton=function(e){return"string"===typeof e&&t.extensions.button.prototype.defaults.hasOwnProperty(e)},t.extensions.button=e}(),function(){t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var e=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.hideToolbarDefaultActions()},setToolbarPosition:function(){var t=this.base.getExtensionByName("toolbar");t&&t.setToolbarPosition()}});t.extensions.form=e}(),function(){var e=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=t.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||t.util.getClosestTag(t.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.util.isKey(e,t.util.keyCode.K)&&t.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),t.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var n=this.getInput(),o=this.getAnchorTargetCheckbox(),r=this.getAnchorButtonCheckbox();if(e=e||{value:""},"string"===typeof e&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=e.value,n.focus(),o&&(o.checked="_blank"===e.target),r){var i=e.buttonClass?e.buttonClass.split(" "):[];r.checked=-1!==i.indexOf(this.customClassOption)}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",t&&t.checked&&(n.target="_blank"),e&&e.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.execAction(this.action,t),this.base.checkSelection()},ensureEncodedUri:function(t){return t===decodeURI(t)?encodeURI(t):t},ensureEncodedUriComponent:function(t){return t===decodeURIComponent(t)?encodeURIComponent(t):t},ensureEncodedParam:function(t){var e=t.split("="),n=e[0],o=e[1];return n+(void 0===o?"":"="+this.ensureEncodedUriComponent(o))},ensureEncodedQuery:function(t){return t.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(t){var e=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=e.test(t),o="",r=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,i=t.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),a=i[1],s=i[2],l=i[3];if(r.test(t))return"tel:"+t;if(!n){var u=a.split("/")[0];(u.match(/.+(\.|:).+/)||"localhost"===u)&&(o="http://")}return o+this.ensureEncodedUri(a)+(void 0===s?"":"?"+this.ensureEncodedQuery(s))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),n=t.querySelector(".medium-editor-toolbar-save"),o=t.querySelector(".medium-editor-toolbar-input");this.on(t,"click",this.handleFormClick.bind(this)),this.on(o,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){if(e.keyCode===t.util.keyCode.ENTER)return e.preventDefault(),void this.doFormSave();e.keyCode===t.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel())},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.anchor=e}(),function(){var e=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.getEditorId(),t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!t.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(t){t=t||this.activeAnchor;var e,n,o,r,i,a=this.window.innerWidth,s=this.anchorPreview.offsetHeight,l=t.getBoundingClientRect(),u=this.diffLeft,c=this.diffTop,d=this.getEditorOption("elementsContainer"),h=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,p={};e=this.anchorPreview.offsetWidth/2;var f=this.base.getExtensionByName("toolbar");f&&(u=f.diffLeft,c=f.diffTop),n=u-e,h?(r=d.getBoundingClientRect(),["top","left"].forEach((function(t){p[t]=l[t]-r[t]})),p.width=l.width,p.height=l.height,l=p,a=r.width,i=d.scrollTop):i=this.window.pageYOffset,o=l.left+l.width/2,i+=s+l.top+l.height-c-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(i)+"px",this.anchorPreview.style.right="initial",o<e?(this.anchorPreview.style.left=n+e+"px",this.anchorPreview.style.right="initial"):a-o<e?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+o+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),n=this.activeAnchor;e&&n&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var t={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};e.showForm(t),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var n=t.util.getClosestTag(e.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var t=(new Date).getTime()-this.lastOver;t>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=e}(),function(){var e,n,o,r,i;function a(e){return!t.util.getClosestTag(e,"a")}e=[" ","\t","\n","\r","","","","","","\u2028","\u2029"],n="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+n+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+n+"))",r=new RegExp("^("+n+")$","i"),i=new RegExp(o,"gi");var s=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t=0,e=0;e<this.window._mediumEditors.length;e++){var n=this.window._mediumEditors[e];null!==n&&void 0!==n.getExtensionByName("autoLink")&&t++}return 1===t},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(e){this.disableEventHandling||t.util.isKey(e,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(n){window.console&&window.console.error("Failed to perform linking",n),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var n=t.util.splitByBlockElements(e),o=!1;0===n.length&&(n=[e]);for(var r=0;r<n.length;r++)o=this.removeObsoleteAutoLinkSpans(n[r])||o,o=this.performLinkingWithinElement(n[r])||o;return this.base.events.updateInput(e,{target:e,currentTarget:e}),o},removeObsoleteAutoLinkSpans:function(e){if(!e||3===e.nodeType)return!1;for(var n=e.querySelectorAll('span[data-auto-link="true"]'),o=!1,r=0;r<n.length;r++){var i=n[r].textContent;if(-1===i.indexOf("://")&&(i=t.util.ensureUrlHasProtocol(i)),n[r].getAttribute("data-href")!==i&&a(n[r])){o=!0;var s=i.replace(/\s+$/,"");if(n[r].getAttribute("data-href")===s){var l=i.length-s.length,u=t.util.splitOffDOMTree(n[r],this.splitTextBeforeEnd(n[r],l));n[r].parentNode.insertBefore(u,n[r].nextSibling)}else t.util.unwrap(n[r],this.document)}}return o},splitTextBeforeEnd:function(t,e){var n,o,r,i=this.document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),a=!0;while(a)a=null!==i.lastChild();while(e>0&&null!==r)n=i.currentNode,o=n.nodeValue,o.length>e?(r=n.splitText(o.length-e),e=0):(r=i.previousNode(),e-=o.length);return r},performLinkingWithinElement:function(e){for(var n=this.findLinkableText(e),o=!1,r=0;r<n.length;r++){var i=t.util.findOrCreateMatchingTextNodes(this.document,e,n[r]);this.shouldNotLink(i)||this.createAutoLink(i,n[r].href)}return o},shouldNotLink:function(e){for(var n=!1,o=0;o<e.length&&!1===n;o++)n=!!t.util.traverseUp(e[o],(function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")}));return n},findLinkableText:function(t){var n=t.textContent,o=null,a=[];while(null!==(o=i.exec(n))){var s=!0,l=o.index+o[0].length;s=(0===o.index||-1!==e.indexOf(n[o.index-1]))&&(l===n.length||-1!==e.indexOf(n[l])),s=s&&(-1!==o[0].indexOf("/")||r.test(o[0].split(".").pop().split("?").shift())),s&&a.push({href:o[0],start:o.index,end:l})}return a},createAutoLink:function(e,n){n=t.util.ensureUrlHasProtocol(n);var o=t.util.createLink(this.document,e,n,this.getEditorOption("targetBlank")?"_blank":null),r=this.document.createElement("span");r.setAttribute("data-auto-link","true"),r.setAttribute("data-href",n),o.insertBefore(r,o.firstChild);while(o.childNodes.length>1)r.appendChild(o.childNodes[1])}});t.extensions.autoLink=s}(),function(){var e="medium-editor-dragover";function n(n){var o=t.util.getContainerEditorElement(n),r=Array.prototype.slice.call(o.parentElement.querySelectorAll("."+e));r.forEach((function(t){t.classList.remove(e)}))}var o=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var o=t.target.classList?t.target:t.target.parentElement;n(o),"dragover"===t.type&&o.classList.add(e)},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),this.base.selectElement(t.target);var e=this.base.exportSelection();e.start=e.end,this.base.importSelection(e),t.dataTransfer.files&&Array.prototype.slice.call(t.dataTransfer.files).forEach((function(t){this.isAllowedFile(t)&&t.type.match("image")&&this.insertImageFile(t)}),this),n(t.target)},isAllowedFile:function(t){return this.allowedTypes.some((function(e){return!!t.type.match(e)}))},insertImageFile:function(e){if("function"===typeof FileReader){var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(e){var n=this.document.createElement("img");n.src=e.target.result,t.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});t.extensions.fileDragging=o}(),function(){var e=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach((function(t){var e=t.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(t)}),this)},handleKeydown:function(e){var n=t.util.getKeyCode(e);if(this.keys[n]){var o=t.util.isMetaCtrlKey(e),r=!!e.shiftKey,i=!!e.altKey;this.keys[n].forEach((function(t){t.meta!==o||t.shift!==r||t.alt!==i&&void 0!==t.alt||(e.preventDefault(),e.stopPropagation(),"function"===typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))}),this)}}});t.extensions.keyboardCommands=e}(),function(){var e=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(t){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var t,e=this.document,n=e.createElement("div"),o=e.createElement("select"),r=e.createElement("a"),i=e.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)t=e.createElement("option"),t.innerHTML=this.fonts[a],t.value=this.fonts[a],o.appendChild(t);return o.className="medium-editor-toolbar-select",n.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),i.setAttribute("href","#"),i.className="medium-editor-toobar-save",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(i),this.on(i,"click",this.handleSaveClick.bind(this),!0),r.setAttribute("href","#"),r.className="medium-editor-toobar-close",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(r),this.on(r,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach((function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("face")&&t.removeAttribute("face")}))},handleFontChange:function(){var t=this.getSelect().value;""===t?this.clearFontName():this.execAction("fontName",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontName=e}(),function(){var e=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.document,e=t.createElement("div"),n=t.createElement("input"),o=t.createElement("a"),r=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",e.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach((function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("size")&&t.removeAttribute("size")}))},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.execAction("fontSize",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=e}(),function(){var e="%ME_PASTEBIN%",n=null,o=null,r=function(t){t.stopPropagation()};function i(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function a(t,e,n){var o=t.clipboardData||e.clipboardData||n.dataTransfer,r={};if(!o)return r;if(o.getData){var i=o.getData("Text");i&&i.length>0&&(r["text/plain"]=i)}if(o.types)for(var a=0;a<o.types.length;a++){var s=o.types[a];r[s]=o.getData(s)}return r}var s=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach((function(t){this.on(t,"paste",this.handlePaste.bind(this))}),this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(t,e){this.on(e,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(t,e){if(!t.defaultPrevented){var n=a(t,this.window,this.document),o=n["text/html"],r=n["text/plain"];this.window.clipboardData&&void 0===t.clipboardData&&!o&&(o=r),(o||r)&&(t.preventDefault(),this.doPaste(o,r,e))}},doPaste:function(e,n,o){var r,i,a="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(n){if(this.getEditorOption("disableReturn")||o&&o.getAttribute("data-disable-return"))a=t.util.htmlEntities(n);else if(r=n.split(/[\r\n]+/g),r.length>1)for(i=0;i<r.length;i+=1)""!==r[i]&&(a+="<p>"+t.util.htmlEntities(r[i])+"</p>");else a=t.util.htmlEntities(r[0]);t.util.insertHTMLCommand(this.document,a)}},handlePasteBinPaste:function(t){if(t.defaultPrevented)this.removePasteBin();else{var e=a(t,this.window,this.document),n=e["text/html"],r=e["text/plain"],i=o;if(!this.cleanPastedHTML||n)return t.preventDefault(),this.removePasteBin(),this.doPaste(n,r,i),void this.trigger("editablePaste",{currentTarget:i,target:i},i);setTimeout(function(){this.cleanPastedHTML&&(n=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(n,r,i),this.trigger("editablePaste",{currentTarget:i,target:i},i)}.bind(this),0)}},handleKeydown:function(e,n){t.util.isKey(e,t.util.keyCode.V)&&t.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(i){var a,s=t.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=i,s&&(a=s.getClientRects(),a.length?l+=a[0].top:void 0!==s.startContainer.getBoundingClientRect?l+=s.startContainer.getBoundingClientRect().top:l+=s.getBoundingClientRect().top),n=s;var u=this.document.createElement("div");u.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),u.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),u.setAttribute("contentEditable",!0),u.innerHTML=e,this.document.body.appendChild(u),this.on(u,"focus",r),this.on(u,"focusin",r),this.on(u,"focusout",r),u.focus(),t.selection.selectNode(u,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(u,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==n&&(t.selection.selectRange(this.document,n),n=null),null!==o&&(o=null);var e=this.getPasteBin();e&&e&&(this.off(e,"focus",r),this.off(e,"focusin",r),this.off(e,"focusout",r),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var t=this.getPasteBin();if(!t)return!1;if(t.firstChild&&"mcepastebin"===t.firstChild.id)return!1;var n=t.innerHTML;return!(!n||n===e)&&n},cleanPaste:function(t){var e,n,o,r,a=/<p|<br|<div/.test(t),s=[].concat(this.preCleanReplacements||[],i(),this.cleanReplacements||[]);for(e=0;e<s.length;e+=1)t=t.replace(s[e][0],s[e][1]);if(!a)return this.pasteHTML(t);for(o=this.document.createElement("div"),o.innerHTML="<p>"+t.split("<br><br>").join("</p><p>")+"</p>",n=o.querySelectorAll("a,p,div,br"),e=0;e<n.length;e+=1)switch(r=n[e],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r);break}this.pasteHTML(o.innerHTML)},pasteHTML:function(e,n){n=t.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var o,r,i,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=e,this.cleanupSpans(a),o=a.querySelectorAll("*"),i=0;i<o.length;i+=1)r=o[i],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(r),t.util.cleanupAttrs(r,n.cleanAttrs),t.util.cleanupTags(r,n.cleanTags),t.util.unwrapTags(r,n.unwrapTags);t.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.nodeName.toLowerCase()||"div"===t.nodeName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(e){var n,o,r,i=e.querySelectorAll(".replace-with"),a=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(n=0;n<i.length;n+=1)o=i[n],r=this.document.createElement(o.classList.contains("bold")?"b":"i"),o.classList.contains("bold")&&o.classList.contains("italic")?r.innerHTML="<i>"+o.innerHTML+"</i>":r.innerHTML=o.innerHTML,o.parentNode.replaceChild(r,o);for(i=e.querySelectorAll("span"),n=0;n<i.length;n+=1){if(o=i[n],t.util.traverseUp(o,a))return!1;t.util.unwrap(o,this.document)}}});t.extensions.paste=s}(),function(){var e=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(t,e){this.initElement(e)},initElement:function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(t,e){this.cleanupElement(e)},cleanupElement:function(t){t.getAttribute("data-placeholder")===this.text&&t.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(t.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(t){t&&(t.classList.remove("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(t,e){if(t.querySelector("img, blockquote, ul, ol, table")||""!==t.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(t);e||this.showPlaceholder(t)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(t,e){var n=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,n)},handleFocus:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)}});t.extensions.placeholder=e}(),function(){var e=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach((function(n){if(n!==this)return t.apply(e||this,arguments)}),this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension((function(e){e.hasForm&&t.appendChild(e.getForm())})),this.attachEventHandlers(),t},createToolbarButtons:function(){var e,n,o,r,i,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach((function(o){"string"===typeof o?(i=o,a=null):(i=o.name,a=o),r=this.base.addBuiltInExtension(i,a),r&&"function"===typeof r.getButton&&(n=r.getButton(this.base),e=this.document.createElement("li"),t.util.isElement(n)?e.appendChild(n):e.innerHTML=n,s.appendChild(e))}),this),o=s.querySelectorAll("button"),o.length>0&&(o[0].classList.add(this.firstButtonClass),o[o.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){if(e&&e.target&&t.util.isDescendant(this.getToolbarElement(),e.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension((function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()}))},multipleBlockElementsSelected:function(){var e=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=t.selection.getSelectionHtml(this.document).replace(e,""),r=o.match(n);return!!r&&r.length>1},modifySelection:function(){var e=this.window.getSelection(),n=e.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var o=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),n.startContainer,this.document);if(o){var r=0;while(0===o.nodeValue.substr(r,1).trim().length)r+=1;n=t.selection.select(this.document,o,r,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=t.selection.getSelectionElement(this.window);return!e||-1===this.getEditorElements().indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!t.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension((function(t){"function"===typeof t.isActive&&"function"===typeof t.setInactive&&t.setInactive()})),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],o=null,r=t.selection.getSelectionRange(this.document),i=function(t){"function"===typeof t.checkState?t.checkState(e):"function"===typeof t.isActive&&"function"===typeof t.isAlreadyApplied&&"function"===typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(r&&(this.forEachExtension((function(t){"function"!==typeof t.queryCommandState||(o=t.queryCommandState(),null===o)?n.push(t):o&&"function"===typeof t.setActive&&t.setActive()})),e=t.selection.getSelectedParentElement(r),this.getEditorElements().some((function(n){return t.util.isDescendant(n,e,!0)}))))while(e){if(n.forEach(i),t.util.isMediumEditorElement(e))break;e=e.parentNode}},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();if(!t)return this;!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,r=this.getToolbarElement(),i=t.getBoundingClientRect(),a=i.top+n,s=i.left+i.width/2,l=r.offsetHeight,u=r.offsetWidth,c=u/2;switch(this.sticky?n>a+t.offsetHeight-l-this.stickyTopOffset?(r.style.top=a+t.offsetHeight-l+"px",r.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(r.classList.add("medium-editor-sticky-toolbar"),r.style.top=this.stickyTopOffset+"px"):(r.classList.remove("medium-editor-sticky-toolbar"),r.style.top=a-l+"px"):r.style.top=a-l+"px",this.align){case"left":e=i.left;break;case"right":e=i.right-u;break;case"center":e=s-c;break}e<0?e=0:e+u>o&&(e=o-Math.ceil(u)-1),r.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),n=e.getBoundingClientRect();(!n||0===n.height&&0===n.width&&e.startContainer===e.endContainer)&&(n=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var o,r,i=this.window.innerWidth,a=this.getToolbarElement(),s=a.offsetHeight,l=a.offsetWidth,u=l/2,c=50,d=this.diffLeft-u,h=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={},v={};p?(r=h.getBoundingClientRect(),["top","left"].forEach((function(t){v[t]=n[t]-r[t]})),v.width=n.width,v.height=n.height,n=v,i=r.width,f.top=h.scrollTop):f.top=this.window.pageYOffset,o=n.left+n.width/2,f.top+=n.top-s,n.top<c?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),f.top+=c+n.height-this.diffTop):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),o<u?(f.left=d+u,f.right="initial"):i-o<u?(f.left="auto",f.right=0):(f.left=d+o,f.right="initial"),["top","left","right"].forEach((function(t){a.style[t]=f[t]+(isNaN(f[t])?"":"px")}))}});t.extensions.toolbar=e}(),function(){var e=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){var e="medium-editor-dragover";t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add(e):"dragleave"===t.type&&t.target.classList.remove(e)},handleDrop:function(e){var n,o="medium-editor-dragover";e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){var n,o;e.type.match("image")&&(n=new FileReader,n.readAsDataURL(e),o="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+o+'" />'),n.onload=function(){var t=this.document.getElementById(o);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=n.result)}.bind(this))}.bind(this))),e.target.classList.remove(o)}});t.extensions.imageDragging=e}(),function(){function e(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),o=n.textContent,r=t.selection.getCaretOffsets(n);(void 0===o[r.left-1]||""===o[r.left-1].trim()||void 0!==o[r.left]&&""===o[r.left].trim())&&e.preventDefault()}function n(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var o=t.selection.getSelectionStart(this.options.ownerDocument);(o&&""===o.textContent.trim()&&"li"!==o.nodeName.toLowerCase()||o.previousElementSibling&&"br"!==o.previousElementSibling.nodeName.toLowerCase()&&""===o.previousElementSibling.textContent.trim())&&e.preventDefault()}}function o(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),o=n&&n.nodeName.toLowerCase();"pre"===o&&(e.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(e){var n,o=t.selection.getSelectionStart(this.options.ownerDocument),r=o.nodeName.toLowerCase(),i=/^(\s+|<br\/?>)?$/i,a=/h\d/i;t.util.isKey(e,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&o.previousElementSibling&&a.test(r)&&0===t.selection.getCaretOffsets(o).left?t.util.isKey(e,t.util.keyCode.BACKSPACE)&&i.test(o.previousElementSibling.innerHTML)?(o.previousElementSibling.parentNode.removeChild(o.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(e,t.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",o.previousElementSibling.parentNode.insertBefore(n,o),e.preventDefault()):t.util.isKey(e,t.util.keyCode.DELETE)&&o.nextElementSibling&&o.previousElementSibling&&!a.test(r)&&i.test(o.innerHTML)&&a.test(o.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,o.nextElementSibling),o.previousElementSibling.parentNode.removeChild(o),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&"li"===r&&i.test(o.innerHTML)&&!o.previousElementSibling&&!o.parentElement.previousElementSibling&&o.nextElementSibling&&"li"===o.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",o.parentElement.parentElement.insertBefore(n,o.parentElement),t.selection.moveCursor(this.options.ownerDocument,n),o.parentElement.removeChild(o),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&!1!==t.util.getClosestTag(o,"blockquote")&&0===t.selection.getCaretOffsets(o).left?(e.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(e,t.util.keyCode.ENTER)&&!1!==t.util.getClosestTag(o,"blockquote")&&0===t.selection.getCaretOffsets(o).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",o.parentElement.insertBefore(n,o.nextSibling),t.selection.moveCursor(this.options.ownerDocument,n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(o.parentElement)&&!o.previousElementSibling&&o.nextElementSibling&&i.test(o.innerHTML)&&(e.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,o.nextSibling),o.parentElement.removeChild(o))}function i(e){var n,o=t.selection.getSelectionStart(this.options.ownerDocument);o&&(t.util.isMediumEditorElement(o)&&0===o.children.length&&!t.util.isBlockContainer(o)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!t.util.isKey(e,t.util.keyCode.ENTER)||t.util.isListItem(o)||t.util.isBlockContainer(o)||(n=o.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(t,e){var n=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=e.innerHTML.trim())}function s(t){t._mediumEditors||(t._mediumEditors=[null]),this.id||(this.id=t._mediumEditors.length),t._mediumEditors[this.id]=this}function l(t){t._mediumEditors&&t._mediumEditors[this.id]&&(t._mediumEditors[this.id]=null)}function u(e,n,o){var r=[];if(e||(e=[]),"string"===typeof e&&(e=n.querySelectorAll(e)),t.util.isElement(e)&&(e=[e]),o)for(var i=0;i<e.length;i++){var a=e[i];!t.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||r.push(a)}else r=Array.prototype.slice.apply(e);return r}function c(t){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');e&&(e.classList.remove("medium-editor-hidden"),e.removeAttribute("medium-editor-textarea-id")),t.parentNode&&t.parentNode.removeChild(t)}function d(t,e){return Object.keys(e).forEach((function(n){void 0===t[n]&&(t[n]=e[n])})),t}function h(t,e,n){var o={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return t=d(t,o),"function"===typeof t.init&&t.init(),t.name||(t.name=e),t}function p(){return!this.elements.every((function(t){return!!t.getAttribute("data-disable-toolbar")}))&&!1!==this.options.toolbar}function f(){return!!p.call(this)&&!1!==this.options.anchorPreview}function v(){return!1!==this.options.placeholder}function g(){return!1!==this.options.autoLink}function y(){return!1!==this.options.imageDragging}function m(){return!1!==this.options.keyboardCommands}function b(){return!this.options.extensions["imageDragging"]}function x(t){var e=this.options.ownerDocument.createElement("div"),n=Date.now(),o="medium-editor-"+n,r=t.attributes;while(this.options.ownerDocument.getElementById(o))n++,o="medium-editor-"+n;e.className=t.className,e.id=o,e.innerHTML=t.value,t.setAttribute("medium-editor-textarea-id",o);for(var i=0,a=r.length;i<a;i++)e.hasAttribute(r[i].nodeName)||e.setAttribute(r[i].nodeName,r[i].value);return t.form&&this.on(t.form,"reset",function(t){t.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(o))}.bind(this)),t.classList.add("medium-editor-hidden"),t.parentNode.insertBefore(e,t),e}function w(e,o){if(!e.getAttribute("data-medium-editor-element")){"textarea"===e.nodeName.toLowerCase()&&(e=x.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",i.bind(this));var r=t.util.guid();e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",o),e.setAttribute("medium-editor-index",r),C[r]=e.innerHTML,this.events.attachAllEventsToElement(e)}return e}function _(){this.subscribe("editableKeydownTab",o.bind(this)),this.subscribe("editableKeydownDelete",r.bind(this)),this.subscribe("editableKeydownEnter",r.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",e.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function E(){if(this.extensions=[],Object.keys(this.options.extensions).forEach((function(t){"toolbar"!==t&&this.options.extensions[t]&&this.extensions.push(h(this.options.extensions[t],t,this))}),this),b.call(this)){var e=this.options.fileDragging;e||(e={},y.call(this)||(e.allowedTypes=[])),this.addBuiltInExtension("fileDragging",e)}var n={paste:!0,"anchor-preview":f.call(this),autoLink:g.call(this),keyboardCommands:m.call(this),placeholder:v.call(this)};Object.keys(n).forEach((function(t){n[t]&&this.addBuiltInExtension(t)}),this);var o=this.options.extensions["toolbar"];if(!o&&p.call(this)){var r=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});o=new t.extensions.toolbar(r)}o&&this.extensions.push(h(o,"toolbar",this))}function A(e,n){var o=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&o.forEach((function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.util.deprecated(e[0],e[1],"v6.0.0")})),t.util.defaults({},n,e)}function S(e,n){var o,r,i=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(o=i.exec(e),o)return t.util.execFormatBlock(this.options.ownerDocument,o[1]);if("fontSize"===e)return n.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if("fontName"===e)return n.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),r=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,r);if("createLink"===e)return this.createLink(n);if("image"===e){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if("html"===e){var l=this.options.contentWindow.getSelection().toString().trim();return t.util.insertHTMLCommand(this.options.ownerDocument,l)}if(a.exec(e)){var u=this.options.ownerDocument.execCommand(e,!1,null),c=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return c&&O.call(this,t.util.getTopBlockContainer(c)),u}return r=n&&n.value,this.options.ownerDocument.execCommand(e,!1,r)}function O(e){if(e){var n,o=Array.prototype.slice.call(e.childNodes).filter((function(t){var e="div"===t.nodeName.toLowerCase();return e&&!n&&(n=t.style.textAlign),e}));o.length&&(this.saveSelection(),o.forEach((function(e){if(e.style.textAlign===n){var o=e.lastChild;if(o){t.util.unwrap(e,this.options.ownerDocument);var r=this.options.ownerDocument.createElement("BR");o.parentNode.insertBefore(r,o.nextSibling)}}}),this),e.style.textAlign=n,this.restoreSelection())}}var C={};t.prototype={init:function(t,e){return this.options=A.call(this,this.defaults,e),this.origElements=t,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,E.call(this),_.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach((function(t){"function"===typeof t.destroy&&t.destroy()}),this),this.events.destroy(),this.elements.forEach((function(t){this.options.spellcheck&&(t.innerHTML=t.innerHTML),t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-editor-element"),t.classList.remove("medium-editor-element"),t.removeAttribute("role"),t.removeAttribute("aria-multiline"),t.removeAttribute("medium-editor-index"),t.removeAttribute("data-medium-editor-editor-index"),t.getAttribute("medium-editor-textarea-id")&&c(t)}),this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(t,e,n,o){return this.events.attachDOMEvent(t,e,n,o),this},off:function(t,e,n,o){return this.events.detachDOMEvent(t,e,n,o),this},subscribe:function(t,e){return this.events.attachCustomEvent(t,e),this},unsubscribe:function(t,e){return this.events.detachCustomEvent(t,e),this},trigger:function(t,e,n){return this.events.triggerCustomEvent(t,e,n),this},delay:function(t){var e=this;return setTimeout((function(){e.isActive&&t()}),this.options.delay)},serialize:function(){var t,e,n={},o=this.elements.length;for(t=0;t<o;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},getExtensionByName:function(t){var e;return this.extensions&&this.extensions.length&&this.extensions.some((function(n){return n.name===t&&(e=n,!0)})),e},addBuiltInExtension:function(e,n){var o,r=this.getExtensionByName(e);if(r)return r;switch(e){case"anchor":o=t.util.extend({},this.options.anchor,n),r=new t.extensions.anchor(o);break;case"anchor-preview":r=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":r=new t.extensions.autoLink;break;case"fileDragging":r=new t.extensions.fileDragging(n);break;case"fontname":r=new t.extensions.fontName(this.options.fontName);break;case"fontsize":r=new t.extensions.fontSize(n);break;case"keyboardCommands":r=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":r=new t.extensions.paste(this.options.paste);break;case"placeholder":r=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(e)&&(n?(o=t.util.defaults({},n,t.extensions.button.prototype.defaults[e]),r=new t.extensions.button(o)):r=new t.extensions.button(e))}return r&&this.extensions.push(h(r,e,this)),r},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var t=this.getExtensionByName("toolbar");return t&&t.checkState(),this},queryCommandState:function(t){var e,n=/^full-(.+)$/gi,o=null;e=n.exec(t),e&&(t=e[1]);try{o=this.options.ownerDocument.queryCommandState(t)}catch(r){o=null}return o},execAction:function(e,n){var o,r,i=/^full-(.+)$/gi;return o=i.exec(e),o?(this.saveSelection(),this.selectAllContents(),r=S.call(this,o[1],n),this.restoreSelection()):r=S.call(this,e,n),"insertunorderedlist"!==e&&"insertorderedlist"!==e||t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=t.selection.getSelectionElement(this.options.contentWindow);if(e){while(1===e.children.length)e=e.children[0];this.selectElement(e)}},selectElement:function(e){t.selection.selectNode(e,this.options.ownerDocument);var n=t.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var t;return this.elements.some((function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t}),this),t},exportSelection:function(){var e=t.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(e),o=null;return n>=0&&(o=t.selection.exportSelection(e,this.options.ownerDocument)),null!==o&&0!==n&&(o.editableElementIndex=n),o},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,n){if(e){var o=this.elements[e.editableElementIndex||0];t.selection.importSelection(e,o,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var n,o=t.selection.getSelectionElement(this.options.contentWindow),r={};if(-1!==this.elements.indexOf(o)){try{if(this.events.disableCustomEvent("editableInput"),e.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),n=e.url||e.value,n&&n.trim().length>0){var i=this.options.contentWindow.getSelection();if(i){var a,s,l,u,c=i.getRangeAt(0),d=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(d=c.endContainer),s=t.util.getClosestBlockContainer(c.startContainer),l=t.util.getClosestBlockContainer(c.endContainer),3!==d.nodeType&&0!==d.textContent.length&&s===l){var h=s||o,p=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),p.appendChild(h.cloneNode(!0)),o===h?t.selection.select(this.options.ownerDocument,h.firstChild,0,h.lastChild,3===h.lastChild.nodeType?h.lastChild.nodeValue.length:h.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,h,0,h,h.childNodes.length);var f=this.exportSelection();u=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,p,{start:a.start-f.start,end:a.end-f.start,editableElementIndex:a.editableElementIndex}),0===u.length&&(p=this.options.ownerDocument.createDocumentFragment(),p.appendChild(d.cloneNode(!0)),u=[p.firstChild.firstChild,p.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,u,n.trim());var v=(p.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,p.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=v,a.end-=v,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===e.target?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n),e.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass)}}if(this.options.targetBlank||"_blank"===e.target||e.buttonClass){r=this.options.ownerDocument.createEvent("HTMLEvents"),r.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,y=this.elements.length;g<y;g+=1)this.elements[g].dispatchEvent(r)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",r,o)}},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)},setContent:function(t,e){if(e=e||0,this.elements[e]){var n=this.elements[e];n.innerHTML=t,this.checkContentChanged(n)}},getContent:function(t){return t=t||0,this.elements[t]?this.elements[t].innerHTML.trim():null},checkContentChanged:function(e){e=e||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(t){if(t){var e=this.elements.indexOf(t);-1!==e&&this.setContent(C[t.getAttribute("medium-editor-index")],e)}else this.elements.forEach((function(t,e){this.setContent(C[t.getAttribute("medium-editor-index")],e)}),this)},addElements:function(t){var e=u(t,this.options.ownerDocument,!0);if(0===e.length)return!1;e.forEach((function(t){t=w.call(this,t,this.id),this.elements.push(t),this.trigger("addElement",{target:t,currentTarget:t},t)}),this)},removeElements:function(t){var e=u(t,this.options.ownerDocument),n=e.map((function(t){return t.getAttribute("medium-editor-textarea-id")&&t.parentNode?t.parentNode.querySelector('div[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]'):t}));this.elements=this.elements.filter((function(t){return-1===n.indexOf(t)||(this.events.cleanupElement(t),t.getAttribute("medium-editor-textarea-id")&&c(t),this.trigger("removeElement",{target:t,currentTarget:t},t),!1)}),this)}},t.getEditorFromElement=function(t){var e=t.getAttribute("data-medium-editor-editor-index"),n=t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[e]?n._mediumEditors[e]:null}}(),function(){t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),t.parseVersionString=function(t){var e=t.split("-"),n=e[0].split("."),o=e.length>1?e[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:o,toString:function(){return[n[0],n[1],n[2]].join(".")+(o?"-"+o:"")}}},t.version=t.parseVersionString.call(this,{version:"5.23.3"}.version),t}())},16901:function(t,e,n){"use strict";n.d(e,{FK:function(){return A},Ob:function(){return V},Qv:function(){return U},XX:function(){return X},_3:function(){return E},fF:function(){return r},h:function(){return w},n:function(){return w},q6:function(){return K},uA:function(){return S},v2:function(){return k}});var o,r,i,a,s,l,u,c,d,h,p,f,v={},g=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function b(t,e){for(var n in e)t[n]=e[n];return t}function x(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function w(t,e,n){var r,i,a,s={};for(a in e)"key"==a?r=e[a]:"ref"==a?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?o.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===s[a]&&(s[a]=t.defaultProps[a]);return _(t,s,r,i,null)}function _(t,e,n,o,a){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=r.vnode&&r.vnode(s),s}function E(){return{current:null}}function A(t){return t.children}function S(t,e){this.props=t,this.context=e}function O(t,e){if(null==e)return t.__?O(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?O(t):null}function C(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return C(t)}}function N(t){(!t.__d&&(t.__d=!0)&&a.push(t)&&!M.__r++||s!==r.debounceRendering)&&((s=r.debounceRendering)||l)(M)}function M(){for(var t,e,n,o,i,s,l,c=1;a.length;)a.length>c&&a.sort(u),t=a.shift(),c=a.length,t.__d&&(n=void 0,i=(o=(e=t).__v).__e,s=[],l=[],e.__P&&((n=b({},o)).__v=o.__v+1,r.vnode&&r.vnode(n),B(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,s,null==i?O(o):i,!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,H(s,n,l),n.__e!=i&&C(n)));M.__r=0}function T(t,e,n,o,r,i,a,s,l,u,c){var d,h,p,f,y,m,b=o&&o.__k||g,x=e.length;for(l=P(n,e,b,l,x),d=0;d<x;d++)null!=(p=n.__k[d])&&(h=-1===p.__i?v:b[p.__i]||v,p.__i=d,m=B(t,p,h,r,i,a,s,l,u,c),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&W(h.ref,null,p),c.push(p.ref,p.__c||f,p)),null==y&&null!=f&&(y=f),4&p.__u||h.__k===p.__k?l=D(p,l,t):"function"==typeof p.type&&void 0!==m?l=m:f&&(l=f.nextSibling),p.__u&=-7);return n.__e=y,l}function P(t,e,n,o,r){var i,a,s,l,u,c=n.length,d=c,h=0;for(t.__k=new Array(r),i=0;i<r;i++)null!=(a=e[i])&&"boolean"!=typeof a&&"function"!=typeof a?(l=i+h,(a=t.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?_(null,a,null,null,null):m(a)?_(A,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?_(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,-1!==(u=a.__i=R(a,n,l,d))&&(d--,(s=n[u])&&(s.__u|=2)),null==s||null===s.__v?(-1==u&&(r>c?h--:r<c&&h++),"function"!=typeof a.type&&(a.__u|=4)):u!=l&&(u==l-1?h--:u==l+1?h++:(u>l?h--:h++,a.__u|=4))):t.__k[i]=null;if(d)for(i=0;i<c;i++)null!=(s=n[i])&&0==(2&s.__u)&&(s.__e==o&&(o=O(s)),Y(s,s));return o}function D(t,e,n){var o,r;if("function"==typeof t.type){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=D(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=O(t)),n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function k(t,e){return e=e||[],null==t||"boolean"==typeof t||(m(t)?t.some((function(t){k(t,e)})):e.push(t)),e}function R(t,e,n,o){var r,i,a=t.key,s=t.type,l=e[n];if(null===l&&null==t.key||l&&a==l.key&&s===l.type&&0==(2&l.__u))return n;if(o>(null!=l&&0==(2&l.__u)?1:0))for(r=n-1,i=n+1;r>=0||i<e.length;){if(r>=0){if((l=e[r])&&0==(2&l.__u)&&a==l.key&&s===l.type)return r;r--}if(i<e.length){if((l=e[i])&&0==(2&l.__u)&&a==l.key&&s===l.type)return i;i++}}return-1}function I(t,e,n){"-"==e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||y.test(e)?n:n+"px"}function L(t,e,n,o,r){var i;t:if("style"==e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof o&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||I(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||I(t.style,e,n[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(c,"$1")),e=e.toLowerCase()in t||"onFocusOut"==e||"onFocusIn"==e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o?n.t=o.t:(n.t=d,t.addEventListener(e,i?p:h,i)):t.removeEventListener(e,i?p:h,i);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function j(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.u)e.u=d++;else if(e.u<n.t)return;return n(r.event?r.event(e):e)}}}function B(t,e,n,o,i,a,s,l,u,c){var d,h,p,f,v,g,y,w,_,E,O,C,N,M,P,D,k,R=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(u=!!(32&n.__u),a=[l=e.__e=n.__e]),(d=r.__b)&&d(e);t:if("function"==typeof R)try{if(w=e.props,_="prototype"in R&&R.prototype.render,E=(d=R.contextType)&&o[d.__c],O=d?E?E.props.value:d.__:o,n.__c?y=(h=e.__c=n.__c).__=h.__E:(_?e.__c=h=new R(w,O):(e.__c=h=new S(w,O),h.constructor=R,h.render=G),E&&E.sub(h),h.props=w,h.state||(h.state={}),h.context=O,h.__n=o,p=h.__d=!0,h.__h=[],h._sb=[]),_&&null==h.__s&&(h.__s=h.state),_&&null!=R.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=b({},h.__s)),b(h.__s,R.getDerivedStateFromProps(w,h.__s))),f=h.props,v=h.state,h.__v=e,p)_&&null==R.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),_&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(_&&null==R.getDerivedStateFromProps&&w!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(w,O),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(w,h.__s,O)||e.__v==n.__v)){for(e.__v!=n.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some((function(t){t&&(t.__=e)})),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[],h.__h.length&&s.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(w,h.__s,O),_&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,v,g)}))}if(h.context=O,h.props=w,h.__P=t,h.__e=!1,N=r.__r,M=0,_){for(h.state=h.__s,h.__d=!1,N&&N(e),d=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do{h.__d=!1,N&&N(e),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++M<25);h.state=h.__s,null!=h.getChildContext&&(o=b(b({},o),h.getChildContext())),_&&!p&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(f,v)),D=d,null!=d&&d.type===A&&null==d.key&&(D=F(d.props.children)),l=T(t,m(D)?D:[D],e,n,o,i,a,s,l,u,c),h.base=e.__e,e.__u&=-161,h.__h.length&&s.push(h),y&&(h.__E=h.__=null)}catch(t){if(e.__v=null,u||null!=a)if(t.then){for(e.__u|=u?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else for(k=a.length;k--;)x(a[k]);else e.__e=n.__e,e.__k=n.__k;r.__e(t,e,n)}else null==a&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=z(n.__e,e,n,o,i,a,s,u,c);return(d=r.diffed)&&d(e),128&e.__u?void 0:l}function H(t,e,n){for(var o=0;o<n.length;o++)W(n[o],n[++o],n[++o]);r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function F(t){return"object"!=typeof t||null==t?t:m(t)?t.map(F):b({},t)}function z(t,e,n,i,a,s,l,u,c){var d,h,p,f,g,y,b,w=n.props,_=e.props,E=e.type;if("svg"==E?a="http://www.w3.org/2000/svg":"math"==E?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(d=0;d<s.length;d++)if((g=s[d])&&"setAttribute"in g==!!E&&(E?g.localName==E:3==g.nodeType)){t=g,s[d]=null;break}if(null==t){if(null==E)return document.createTextNode(_);t=document.createElementNS(a,E,_.is&&_),u&&(r.__m&&r.__m(e,s),u=!1),s=null}if(null===E)w===_||u&&t.data===_||(t.data=_);else{if(s=s&&o.call(t.childNodes),w=n.props||v,!u&&null!=s)for(w={},d=0;d<t.attributes.length;d++)w[(g=t.attributes[d]).name]=g.value;for(d in w)if(g=w[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=g;else if(!(d in _)){if("value"==d&&"defaultValue"in _||"checked"==d&&"defaultChecked"in _)continue;L(t,d,null,g,a)}for(d in _)g=_[d],"children"==d?f=g:"dangerouslySetInnerHTML"==d?h=g:"value"==d?y=g:"checked"==d?b=g:u&&"function"!=typeof g||w[d]===g||L(t,d,g,w[d],a);if(h)u||p&&(h.__html===p.__html||h.__html===t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(p&&(t.innerHTML=""),T("template"===e.type?t.content:t,m(f)?f:[f],e,n,i,"foreignObject"==E?"http://www.w3.org/1999/xhtml":a,s,l,s?s[0]:n.__k&&O(n,0),u,c),null!=s)for(d=s.length;d--;)x(s[d]);u||(d="value","progress"==E&&null==y?t.removeAttribute("value"):void 0!==y&&(y!==t[d]||"progress"==E&&!y||"option"==E&&y!==w[d])&&L(t,d,y,w[d],a),d="checked",void 0!==b&&b!==t[d]&&L(t,d,b,w[d],a))}return t}function W(t,e,n){try{if("function"==typeof t){var o="function"==typeof t.__u;o&&t.__u(),o&&null==e||(t.__u=t(e))}else t.current=e}catch(t){r.__e(t,n)}}function Y(t,e,n){var o,i;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||W(o,null,e)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Y(o[i],e,n||"function"!=typeof t.type);n||x(t.__e),t.__c=t.__=t.__e=void 0}function G(t,e,n){return this.constructor(t,n)}function X(t,e,n){var i,a,s,l;e==document&&(e=document.documentElement),r.__&&r.__(t,e),a=(i="function"==typeof n)?null:n&&n.__k||e.__k,s=[],l=[],B(e,t=(!i&&n||e).__k=w(A,null,[t]),a||v,v,e.namespaceURI,!i&&n?[n]:a?null:e.firstChild?o.call(e.childNodes):null,s,!i&&n?n:a?a.__e:e.firstChild,i,l),H(s,t,l)}function U(t,e){X(t,e,U)}function V(t,e,n){var r,i,a,s,l=b({},t.props);for(a in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)"key"==a?r=e[a]:"ref"==a?i=e[a]:l[a]=void 0===e[a]&&void 0!==s?s[a]:e[a];return arguments.length>2&&(l.children=arguments.length>3?o.call(arguments,2):n),_(t.type,l,r||t.key,i||t.ref,null)}function K(t){function e(t){var n,o;return this.getChildContext||(n=new Set,(o={})[e.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.forEach((function(t){t.__e=!0,N(t)}))},this.sub=function(t){n.add(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n&&n.delete(t),e&&e.call(t)}}),t.children}return e.__c="__cC"+f++,e.__=t,e.Provider=e.__l=(e.Consumer=function(t,e){return t.children(e)}).contextType=e,e}o=g.slice,r={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(e){t=e}throw t}},i=0,S.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof t&&(t=t(b({},n),this.props)),t&&b(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),N(this))},S.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),N(this))},S.prototype.render=A,a=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(t,e){return t.__v.__b-e.__v.__b},M.__r=0,c=/(PointerCapture)$|Capture$/i,d=0,h=j(!1),p=j(!0),f=0},21348:function(t,e,n){"use strict";var o=n(5919),r=n(20104),i=n(90100);function a(t){return function(e,n,a){var s=Object(e);if(!(0,r.A)(e)){var l=(0,o.A)(n,3);e=(0,i.A)(e),n=function(t){return l(s[t],t,s)}}var u=t(e,n,a);return u>-1?s[l?e[u]:u]:void 0}}e.A=a},22714:function(t,e,n){"use strict";var o=n(22980),r=n(82343),i=n(5919),a=n(39036),s=n(93791);function l(t,e,n){var l=(0,s.A)(t)?o.A:a.A,u=arguments.length<3;return l(t,(0,i.A)(e,4),n,u,r.A)}e.A=l},22980:function(t,e){"use strict";function n(t,e,n,o){var r=-1,i=null==t?0:t.length;o&&i&&(n=t[++r]);while(++r<i)n=e(n,t[r],r,t);return n}e.A=n},28023:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var o=Object.prototype,r=o.hasOwnProperty;function i(t,e){return null!=t&&r.call(t,e)}var a=i,s=n(61084);function l(t,e){return null!=t&&(0,s.A)(t,e,a)}var u=l},28984:function(t,e,n){"use strict";var o=n(72843),r=n(90100),i=(0,o.A)(r.A);e.A=i},30596:function(t,e,n){"use strict";var o=n(64502),r=n(6911),i=n(5919);function a(t,e){var n={};return e=(0,i.A)(e,3),(0,r.A)(t,(function(t,r,i){(0,o.A)(n,e(t,r,i),t)})),n}e.A=a},31226:function(t,e,n){"use strict";var o=n(49378),r=n(58408),i="[object Boolean]";function a(t){return!0===t||!1===t||(0,r.A)(t)&&(0,o.A)(t)==i}e.A=a},37652:function(t,e,n){"use strict";var o=n(41439),r=n(82343),i=n(59700),a=n(93791);function s(t,e){var n=(0,a.A)(t)?o.A:r.A;return n(t,(0,i.A)(e))}e.A=s},39036:function(t,e){"use strict";function n(t,e,n,o,r){return r(t,(function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)})),n}e.A=n},52302:function(t,e,n){"use strict";n.d(e,{W1:function(){return gC},Fm:function(){return nC}});var o={width:40,height:40},r={width:40,height:40},i={width:40,height:40},a={width:100,height:80},s={width:100,height:80},l=n(99893),u=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}(),c=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new u;function d(){return c.next()}var h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=(function(t){function e(e,n){return e.id||(e.id="Event_".concat(d())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,n)||this}h(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=t.prototype.getConnectedTargetRules.call(this),n={message:"",validate:function(){return!1}};return e.push(n),e},e.extendKey="StartEventModel"}(l.mb5),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}h(e,t),e.extendKey="StartEventNode"}(l.hIF),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),f=function(){return f=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},f.apply(this,arguments)},v=(function(t){function e(e,n){return e.id||(e.id="Event_".concat(d())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,n)||this}p(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=t.prototype.getConnectedSourceRules.call(this),n={message:"",validate:function(){return!1}};return e.push(n),e},e.extendKey="EndEventModel"}(l.mb5),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}p(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e=this.props.model,n=e.getNodeStyle(),o=e,r=o.x,i=o.y,a=o.r,s=t.prototype.getShape.call(this);return(0,l.h)("g",{},s,(0,l.h)("circle",f(f({},n),{cx:r,cy:i,r:a-5})))},e.extendKey="EndEventView"}(l.hIF),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),g=(function(t){function e(e,n){return e.id||(e.id="Flow_".concat(d())),t.call(this,e,n)||this}v(e,t),e.extendKey="SequenceFlowModel"}(l.nTh),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}v(e,t),e.extendKey="SequenceFlowEdge"}(l.Uzs),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),y=function(){return y=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},y.apply(this,arguments)},m=(function(t){function e(e,n){var o=this;return e.id||(e.id="Gateway_".concat(d())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),o=t.call(this,e,n)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}g(e,t),e.extendKey="ExclusiveGatewayModel"}(l.CPR),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}g(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t,n=e.x,o=e.y,r=e.width,i=e.height,a=e.points,s=t.getNodeStyle();return(0,l.h)("g",{transform:"matrix(1 0 0 1 ".concat(n-r/2," ").concat(o-i/2,")")},(0,l.h)("polygon",y(y({},s),{x:n,y:o,points:a})),(0,l.h)("path",y({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},s)))},e.extendKey="ExclusiveGatewayNode"}(l.T5i),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),b=function(){return b=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},b.apply(this,arguments)},x=(function(t){function e(e,n){return e.id||(e.id="Activity_".concat(d())),t.call(this,e,n)||this}m(e,t),e.extendKey="ServiceTaskModel"}(l.G6l),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}m(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.getNodeStyle();return(0,l.h)("svg",{x:e-o/2+5,y:n-r/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},(0,l.h)("path",{fill:i.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.radius,a=t.getNodeStyle();return(0,l.h)("g",{},[(0,l.h)("rect",b({x:e-o/2,y:n-r/2,rx:i,ry:i,width:o,height:r},a)),this.getLabelShape()])},e.extendKey="ServiceTaskNode"}(l.Pc7),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),w=function(){return w=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},w.apply(this,arguments)},_=(function(t){function e(e,n){return e.id||(e.id="Activity_".concat(d())),t.call(this,e,n)||this}x(e,t),e.extendKey="UserTaskModel"}(l.G6l),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}x(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.getNodeStyle();return(0,l.h)("svg",{x:e-o/2+5,y:n-r/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},(0,l.h)("path",{fill:i.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.radius,a=t.getNodeStyle();return(0,l.h)("g",{},[(0,l.h)("rect",w(w({},a),{x:e-o/2,y:n-r/2,rx:i,ry:i,width:o,height:r})),this.getLabelShape()])},e.extendKey="UserTaskNode"}(l.Pc7),function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}()),E=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new _;function A(){return E.next()}function S(t){return Object.prototype.toString.call(t)}function O(t){return"  ".repeat(t)}function C(t){var e=t;return"[object Object]"===S(t)?(e={},Object.keys(t).forEach((function(n){var o=n;"-"===n.charAt(0)&&(o=n.substring(1)),e[o]=C(t[n])}))):Array.isArray(t)&&(e=[],t.forEach((function(t,n){e[n]=C(t)}))),e}function N(t){var e=t;try{"string"!==typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(C(t)).replace(/"/g,"'")}return e}var M="\t\n";function T(t,e,n){var o=O(n);if(0!==t&&!1!==t&&!t)return M+o+"<".concat(e," />");var r="";if("#text"===e)return M+o+t;if("#cdata-section"===e)return M+o+"<![CDATA["+t+"]]>";if("#comment"===e)return M+o+"\x3c!--"+t+"--\x3e";if("-"==="".concat(e).charAt(0))return" "+e.substring(1)+'="'+N(t)+'"';if(Array.isArray(t))t.forEach((function(t){r+=T(t,e,n+1)}));else if("[object Object]"===S(t)){var i=Object.keys(t),a="",s="";r+=(0===n?"":M+o)+"<"+e,i.forEach((function(e){"-"===e.charAt(0)?a+=T(t[e],e,n+1):s+=T(t[e],e,n+1)})),r+=a+(""!==s?">".concat(s).concat(M+o,"</").concat(e,">"):" />")}else r+=M+o+"<".concat(e,">").concat(t.toString(),"</").concat(e,">");return r}function P(t){var e="";for(var n in t)e+=T(t[n],n,0);return e}var D=function(){};D.ObjTree=function(){return this},D.ObjTree.VERSION="0.23",D.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',D.ObjTree.prototype.attr_prefix="-",D.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(t,"application/xml");if(!o)return;e=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},D.ObjTree.prototype.parseHTTP=function(t,e,n){var o,r={};for(var i in e)r[i]=e[i];if(r.method||("undefined"==typeof r.postBody&&"undefined"==typeof r.postbody&&"undefined"==typeof r.parameters?r.method="get":r.method="post"),n){r.asynchronous=!0;var a=this,s=n,l=r.onComplete;r.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else r.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request){r.uri=t;var u=new HTTP.Request(r);u&&(o=u.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){u=new Ajax.Request(t,r);u&&(o=u.transport)}return n?o:o&&o.responseXML&&o.responseXML.documentElement?this.parseDOM(o.responseXML.documentElement):void 0},D.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!=t.nodeType){var o={};o[t.nodeName]=n,n=o}return n}},D.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType||8==t.nodeType){var e=t.nodeValue.match(/[^\x00-\x20]/);if(null==e)return;return t.nodeValue}var n=null,o={};if(t.attributes&&t.attributes.length){n={};for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r].nodeName;if("string"==typeof i){var a=t.attributes[r].nodeValue;try{a=JSON.parse(t.attributes[r].nodeValue.replace(/'/g,'"'))}catch(u){a=t.attributes[r].nodeValue}a&&(i=this.attr_prefix+i,"undefined"==typeof o[i]&&(o[i]=0),o[i]++,this.addNode(n,i,o[i],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(r=0;r<t.childNodes.length&&s;r++){var l=t.childNodes[r].nodeType;3!=l&&4!=l&&8!=l&&(s=!1)}if(s){n||(n="");for(r=0;r<t.childNodes.length;r++)n+=t.childNodes[r].nodeValue}else{n||(n={});for(r=0;r<t.childNodes.length;r++){i=t.childNodes[r].nodeName;if("string"==typeof i){a=this.parseElement(t.childNodes[r]);a&&("undefined"==typeof o[i]&&(o[i]=0),o[i]++,this.addNode(n,i,o[i],a))}}}}else null===n&&(n={});return n}},D.ObjTree.prototype.addNode=function(t,e,n,o){this.__force_array[e]?(1==n&&(t[e]=[]),t[e][t[e].length]=o):1==n?t[e]=o:2==n?t[e]=[t[e],o]:t[e][t[e].length]=o},D.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},D.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],o=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];r.charAt(0)!=this.attr_prefix?"undefined"==typeof i||null==i?n[n.length]="<"+r+" />":"object"==typeof i&&i.constructor==Array?n[n.length]=this.array_to_xml(r,i):n[n.length]="object"==typeof i?this.hash_to_xml(r,i):this.scalar_to_xml(r,i):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(i)+'"'}var a=o.join(""),s=n.join("");return"undefined"==typeof t||null==t||(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s},D.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],o=0;o<e.length;o++){var r=e[o];"undefined"==typeof r||null==r?n[n.length]="<"+t+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=this.array_to_xml(t,r):n[n.length]="object"==typeof r?this.hash_to_xml(t,r):this.scalar_to_xml(t,r)}return n.join("")},D.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},D.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var k,R=function(t){return(new D.ObjTree).parseXML(t)},I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(){return L=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},L.apply(this,arguments)},j=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};(function(t){t["START"]="bpmn:startEvent",t["END"]="bpmn:endEvent",t["GATEWAY"]="bpmn:exclusiveGateway",t["USER"]="bpmn:userTask",t["SYSTEM"]="bpmn:serviceTask",t["FLOW"]="bpmn:sequenceFlow"})(k||(k={}));var B=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],H=["properties","startPoint","endPoint","pointsList"];function F(t){var e=t?H.concat(t):H;return function(t){function n(t){var o={};return"string"===typeof t?t:Array.isArray(t)?t.map((function(t){return n(t)})):(Object.entries(t).forEach((function(t){var r=j(t,2),i=r[0],a=r[1];"object"!==typeof a?0===i.indexOf("-")||["#text","#cdata-section","#comment"].includes(i)?o[i]=a:o["-".concat(i)]=a:e.includes(i)?o["-".concat(i)]=n(a):o[i]=n(a)})),o)}return n(t)}}function z(t){var e={};return Object.entries(t).forEach((function(t){var n=j(t,2),o=n[0],r=n[1];0===o.indexOf("-")?e[o.substring(1)]=C(r):"string"===typeof r?e[o]=r:"[object Object]"===Object.prototype.toString.call(r)?e[o]=z(r):Array.isArray(r)?e[o]=r.map((function(t){return z(t)})):e[o]=r})),e}function W(t,e,n){var o=new Map;e.nodes.forEach((function(e){var r,i={"-id":e.id};if((null===(r=e.text)||void 0===r?void 0:r.value)&&(i["-name"]=e.text.value),e.properties){var a=F(n)(e.properties);Object.assign(i,a)}o.set(e.id,i),t[e.type]?Array.isArray(t[e.type])?t[e.type].push(i):t[e.type]=[t[e.type],i]:t[e.type]=i}));var r=e.edges.map((function(t){var e,r,i=o.get(t.targetNodeId);i["bpmn:incoming"]?Array.isArray(i["bpmn:incoming"])?i["bpmn:incoming"].push(t.id):i["bpmn:incoming"]=[i["bpmn:incoming"],t.id]:i["bpmn:incoming"]=t.id;var a={"-id":t.id,"-sourceRef":t.sourceNodeId,"-targetRef":t.targetNodeId};if((null===(e=t.text)||void 0===e?void 0:e.value)&&(a["-name"]=null===(r=t.text)||void 0===r?void 0:r.value),t.properties){var s=F(n)(t.properties);Object.assign(a,s)}return a}));e.edges.forEach((function(t){var e=o.get(t.sourceNodeId);e["bpmn:outgoing"]?Array.isArray(e["bpmn:outgoing"])?e["bpmn:outgoing"].push(t.id):e["bpmn:outgoing"]=[e["bpmn:outgoing"],t.id]:e["bpmn:outgoing"]=t.id})),t[k.FLOW]=r}function Y(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,o=t.pointsList.map((function(t){var e=t.x,n=t.y;return{"-x":e,"-y":n}})),r={"-id":"".concat(n,"_di"),"-bpmnElement":n,"di:waypoint":o};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(r["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),r})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,o=100,r=80,i=t.x,a=t.y,s=q.shapeConfigMap.get(t.type);s&&(o=s.width,r=s.height),i-=o/2,a-=r/2;var l={"-id":"".concat(n,"_di"),"-bpmnElement":n,"dc:Bounds":{"-x":i,"-y":a,"-width":o,"-height":r}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}function G(t){var e=[],n=[],o=t["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach((function(t){if(0===t.indexOf("bpmn:")){var i=r[t];if(t===k.FLOW){var a=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=V(i,a)}else{var s=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(X(i,s,t))}}}))}return{nodes:e,edges:n}}function X(t,e,n){var o=[];if(Array.isArray(t))t.forEach((function(t){var r;r=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var i=U(r,n,t);o.push(i)}));else{var r=void 0;r=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var i=U(r,n,t);o.push(i)}return o}function U(t,e,n){var o,r,i=Number(t["dc:Bounds"]["-x"]),a=Number(t["dc:Bounds"]["-y"]),s=n["-name"],l=q.shapeConfigMap.get(e);if(l&&(i+=l.width/2,a+=l.height/2),Object.entries(n).forEach((function(t){var e=j(t,2),n=e[0],r=e[1];-1===B.indexOf(n)&&(o||(o={}),o[n]=r)})),o&&(o=z(o)),s&&(r={x:i,y:a,value:s},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=t["bpmndi:BPMNLabel"]["dc:Bounds"];r.x=Number(u["-x"])+Number(u["-width"])/2,r.y=Number(u["-y"])+Number(u["-height"])/2}var c={id:t["-bpmnElement"],type:e,x:i,y:a,properties:o};return r&&(c.text=r),c}function V(t,e){var n=[];if(Array.isArray(t))t.forEach((function(t){var o;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(K(o,t))}));else{var o=void 0;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(K(o,t))}return n}function K(t,e){var n,o,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=t["bpmndi:BPMNLabel"]["dc:Bounds"],a=0;r.split("\n").forEach((function(t){a<t.length&&(a=t.length)})),n={value:r,x:Number(i["-x"])+10*a/2,y:Number(i["-y"])+7}}Object.entries(e).forEach((function(t){var e=j(t,2),n=e[0],r=e[1];-1===B.indexOf(n)&&(o||(o={}),o[n]=r)})),o&&(o=z(o));var s={id:e["-id"],type:k.FLOW,pointsList:t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:o};return n&&(s.text=n),s}var q=function(){function t(t){var e=t.lf,n=this;this.adapterOut=function(t,e){var o=L({},n.processAttributes);W(o,t,e);var r={"-id":"BPMNPlane_1","-bpmnElement":o["-id"]};Y(r,t);var i=n.definitionAttributes;i["bpmn:process"]=o,i["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":r};var a={"bpmn:definitions":i};return a},this.adapterIn=function(t){if(t)return G(t)},e.adapterIn=function(t){return n.adapterIn(t)},e.adapterOut=function(t,e){return n.adapterOut(t,e)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(A())},this.definitionAttributes={"-id":"Definitions_".concat(A()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();q.shapeConfigMap.set(k.START,{width:o.width,height:o.height}),q.shapeConfigMap.set(k.END,{width:r.width,height:r.height}),q.shapeConfigMap.set(k.GATEWAY,{width:i.width,height:i.height}),q.shapeConfigMap.set(k.SYSTEM,{width:a.width,height:a.height}),q.shapeConfigMap.set(k.USER,{width:s.width,height:s.height});(function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=R(t);return n.adapterIn(e)},n.adapterXmlOut=function(t,e){var o=n.adapterOut(t,e);return P(o)};var o=e.lf;return o.adapterIn=n.adapterXmlIn,o.adapterOut=n.adapterXmlOut,n}I(e,t),e.pluginName="bpmnXmlAdapter"})(q);function Z(){var t={message:"",validate:function(t,e){var n=!!t.properties.parent,o=!!e.properties.parent;return!(!n&&o)}};this.targetRules.push(t)}var $=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}));return t},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}(),J=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new $;function Q(){return J.next()}var tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),et=function(){return et=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},et.apply(this,arguments)},nt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},ot=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function rt(t){var e=nt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e,o=this.props.model,r=o.getNodeStyle(),i=o,a=i.x,s=i.y,u=i.r,c=i.width,d=i.height,h=i.properties,p=t.prototype.getShape.call(this),f=h.definitionType,v=((null===(e=n.endEvent)||void 0===e?void 0:e.get(f))||{}).icon,g=Array.isArray(v)?l.h.apply(void 0,ot(["g",{transform:"matrix(1 0 0 1 ".concat(a-c/2," ").concat(s-d/2,")")}],nt(v),!1)):(0,l.h)("path",{transform:"matrix(1 0 0 1 ".concat(a-c/2," ").concat(s-d/2,")"),d:v,style:"fill: black; stroke-linecap: round; stroke-linejoin: round; stroke: white; stroke-width: 1px;"});return(0,l.h)("g",{},p,(0,l.h)("circle",et(et({},r),{strokeWidth:2,cx:a,cy:s,r:u-2})),g)},e}(l.hIF),r=function(t){function e(e,o){var r,i,a,s=this;e.id||(e.id="Event_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(r=n.endEvent)||void 0===r?void 0:r.get(null===(i=e.properties)||void 0===i?void 0:i.definitionType))||{}).properties,u=void 0===l?{}:l;return e.properties=et(et({},u),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_".concat(Q())),s=t.call(this,e,o)||this,Z.call(s),s}return tt(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=this,n=t.prototype.getConnectedSourceRules.call(this),o={message:"",validate:function(t,n){return console.log("_target",n),t!==e}};return n.push(o),n},e}(l.mb5);return{type:"bpmn:endEvent",view:o,model:r}}var it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),at=function(){return at=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},at.apply(this,arguments)},st=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},lt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function ut(t){var e=st(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e,i=r.x,a=r.y,s=r.r,u=r.width,c=r.height,d=r.properties,h=d.definitionType,p=((null===(t=n.intermediateCatchEvent)||void 0===t?void 0:t.get(h))||{}).icon,f=Array.isArray(p)?l.h.apply(void 0,lt(["g",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")")}],st(p),!1)):(0,l.h)("path",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")"),d:p});return(0,l.h)("g",{},(0,l.h)("circle",at(at({},o),{cx:i,cy:a,r:s,strokeWidth:1.5})),(0,l.h)("circle",at(at({},o),{cx:i,cy:a,r:s-3,strokeWidth:1.5})),f)},e}(l.hIF),r=function(t){function e(e,o){var r,i,a,s=this;e.id||(e.id="Event_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(r=n.intermediateCatchEvent)||void 0===r?void 0:r.get(null===(i=e.properties)||void 0===i?void 0:i.definitionType))||{}).properties,u=void 0===l?{}:l;return e.properties=at(at({},u),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_".concat(Q())),s=t.call(this,e,o)||this,Z.call(s),s}return it(e,t),e.prototype.setAttributes=function(){this.r=18},e}(l.mb5);return{type:"bpmn:intermediateCatchEvent",view:o,model:r}}var ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=function(){return dt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},dt.apply(this,arguments)},ht=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},pt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function ft(t){var e=ht(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ct(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e,i=r.x,a=r.y,s=r.r,u=r.width,c=r.height,d=r.properties,h=d.definitionType,p=d.isInterrupting,f=((null===(t=n.startEvent)||void 0===t?void 0:t.get(h))||{}).icon,v=Array.isArray(f)?l.h.apply(void 0,pt(["g",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")")}],ht(f),!1)):(0,l.h)("path",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")"),d:f,style:"fill: white; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});return(0,l.h)("g",{},(0,l.h)("circle",dt(dt({},o),{cx:i,cy:a,r:s,strokeDasharray:p?"5,5":"",strokeWidth:2})),v)},e}(l.hIF),r=function(t){function e(e,o){var r,i,a;e.id||(e.id="Event_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var s=((null===(r=n.startEvent)||void 0===r?void 0:r.get(null===(i=e.properties)||void 0===i?void 0:i.definitionType))||{}).properties,l=void 0===s?{}:s;return e.properties=dt(dt({},l),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_".concat(Q())),t.call(this,e,o)||this}return ct(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=this,n=t.prototype.getConnectedTargetRules.call(this),o={message:"",validate:function(t,n){return n!==e}};return n.push(o),n},e}(l.mb5);return{type:"bpmn:startEvent",view:o,model:r}}var vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gt=function(){return gt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},gt.apply(this,arguments)},yt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},mt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function bt(t){var e=yt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e,i=r.x,a=r.y,s=r.r,u=r.width,c=r.height,d=r.properties,h=d.definitionType,p=d.cancelActivity,f=((null===(t=n.boundaryEvent)||void 0===t?void 0:t.get(h))||{}).icon,v=Array.isArray(f)?l.h.apply(void 0,mt(["g",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")")}],yt(f),!1)):(0,l.h)("path",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")"),d:f});return(0,l.h)("g",{},(0,l.h)("circle",gt(gt({},o),{cx:i,cy:a,r:s,strokeDasharray:p?"":"5,5",strokeWidth:1.5})),(0,l.h)("circle",gt(gt({},o),{cx:i,cy:a,r:s-3,strokeDasharray:p?"":"5,5",strokeWidth:1.5})),v)},e}(l.hIF),r=function(t){function e(e,o){var r,i,a,s=this;e.id||(e.id="Event_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(r=n.boundaryEvent)||void 0===r?void 0:r.get(null===(i=e.properties)||void 0===i?void 0:i.definitionType))||{}).properties,u=void 0===l?{}:l;return e.properties=gt(gt({attachedToRef:"",cancelActivity:!0},u),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_".concat(Q())),s=t.call(this,e,o)||this,Z.call(s),s}return vt(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.r=20,this.autoToFront=!1,this.zIndex=99999},e.prototype.setAttributes=function(){this.r=18},e}(l.mb5);return{type:"bpmn:boundaryEvent",view:o,model:r}}var xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=function(){return wt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},wt.apply(this,arguments)},_t=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Et=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function At(t){var e=_t(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e,i=r.x,a=r.y,s=r.r,u=r.width,c=r.height,d=r.properties,h=d.definitionType,p=((null===(t=n.intermediateThrowEvent)||void 0===t?void 0:t.get(h))||{}).icon,f=Array.isArray(p)?l.h.apply(void 0,Et(["g",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")")}],_t(p),!1)):(0,l.h)("path",{transform:"matrix(1 0 0 1 ".concat(i-u/2," ").concat(a-c/2,")"),d:p,style:"fill: black"});return(0,l.h)("g",{},(0,l.h)("circle",wt(wt({},o),{cx:i,cy:a,r:s,strokeWidth:1.5})),(0,l.h)("circle",wt(wt({},o),{cx:i,cy:a,r:s-3,strokeWidth:1.5})),f)},e}(l.hIF),r=function(t){function e(e,o){var r,i,a,s=this;e.id||(e.id="Event_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(r=n.intermediateThrowEvent)||void 0===r?void 0:r.get(null===(i=e.properties)||void 0===i?void 0:i.definitionType))||{}).properties,u=void 0===l?{}:l;return e.properties=wt(wt({},u),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_".concat(Q())),s=t.call(this,e,o)||this,Z.call(s),s}return xt(e,t),e.prototype.setAttributes=function(){this.r=18},e}(l.mb5);return{type:"bpmn:intermediateThrowEvent",view:o,model:r}}function St(t){t.register(ft(t)),t.register(rt(t)),t.register(ut(t)),t.register(At(t)),t.register(bt(t))}var Ot=[(0,l.h)("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),(0,l.h)("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),(0,l.h)("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"})],Ct=((0,l.h)("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"}),"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"),Nt="m 23,10 0,12.5 -12.5,0 0,5 12.5,0 0,12.5 5,0 0,-12.5 12.5,0 0,-5 -12.5,0 0,-12.5 -5,0 z",Mt=(0,l.h)("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"}),Tt="M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z",Pt="M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z",Dt="m44,60 m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",kt="m47,61 m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",Rt="m 50,73 c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",It=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=function(){return Lt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Lt.apply(this,arguments)};function jt(t,e,n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return It(n,t),n.prototype.getShape=function(){var t=this.props.model,n=t,o=n.x,r=n.y,i=n.width,a=n.height,s=n.points,u=t.getNodeStyle();return(0,l.h)("g",{transform:"matrix(1 0 0 1 ".concat(o-i/2," ").concat(r-a/2,")")},(0,l.h)(l.tS,Lt(Lt({},u),{x:o,y:r,points:s})),"string"===typeof e?(0,l.h)("path",Lt(Lt({d:e},u),{fill:"rgb(34, 36, 42)",strokeWidth:1})):e)},n}(l.T5i),r=function(t){function e(e,o){var r=this;return e.id||(e.id="Gateway_".concat(Q())),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),e.properties=Lt(Lt({},n||{}),e.properties),r=t.call(this,e,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],Z.call(r),r}return It(e,t),e}(l.CPR);return{type:t,view:o,model:r}}function Bt(t){var e=jt("bpmn:exclusiveGateway",Ct),n=jt("bpmn:parallelGateway",Nt),o=jt("bpmn:inclusiveGateway",Mt);t.register(e),t.register(o),t.register(n)}var Ht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(){return Ft=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ft.apply(this,arguments)},zt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Wt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Yt={parallel:Dt,sequential:kt,loop:Rt};function Gt(t,e,n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ht(n,t),n.prototype.getLabelShape=function(){var t=this.props.model,n=t.x,o=t.y,r=t.width,i=t.height,a=t.getNodeStyle(),s=Array.isArray(e)?l.h.apply(void 0,Wt(["g",{transform:"matrix(1 0 0 1 ".concat(n-r/2," ").concat(o-i/2,")")}],zt(e),!1)):(0,l.h)("path",{fill:a.stroke,d:e});return(0,l.h)("svg",{x:n-r/2+5,y:o-i/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},s)},n.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.radius,a=t.properties,s=t.getNodeStyle();return(0,l.h)("g",{},[(0,l.h)("rect",Ft(Ft({},s),{x:e-o/2,y:n-r/2,rx:i,ry:i,width:o,height:r,opacity:.95})),this.getLabelShape(),(0,l.h)("g",{transform:"matrix(1 0 0 1 ".concat(e-o/2," ").concat(n-r/2,")")},(0,l.h)("path",{fill:"white",strokeLinecap:"round",strokeLinejoin:"round",stroke:"rgb(34, 36, 42)",strokeWidth:"2",d:Yt[a.multiInstanceType]||""}))])},n}(l.Pc7),r=function(t){function e(e,o){var r,i=this;e.id||(e.id="Activity_".concat(Q()));var a=Ft(Ft({},n||{}),e.properties);return e.properties=a,i=t.call(this,e,o)||this,null===(r=null===a||void 0===a?void 0:a.boundaryEvents)||void 0===r||r.forEach((function(t){i.addBoundaryEvent(t)})),i.deleteProperty("boundaryEvents"),Z.call(i),i}return Ht(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.properties.isBoundaryEventTouchingTask;return n&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",!e.hover&&(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null===e||void 0===e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(l.G6l);return{type:t,view:o,model:r}}var Xt=n(37652),Ut=n(72511),Vt=n(72863),Kt=n(93791),qt=n(6556),Zt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},$t.apply(this,arguments)},Jt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Qt=l.Vu$.N4,te=function(t){function e(e){var n=t.call(this)||this;return n.updatePosition=function(t){var e=t.deltaX,o=t.deltaY,r=n.nodeModel,i=r.x,a=r.y;n.nodeModel.x=i+e/2,n.nodeModel.y=a+o/2,n.nodeModel.moveText(e/2,o/2)},n.getResize=function(t){var e=t.index,n=t.deltaX,o=t.deltaY,r=t.width,i=t.height,a=t.PCTResizeInfo,s=t.pct,l=void 0===s?1:s,u=t.freezeWidth,c=void 0!==u&&u,d=t.freezeHeight,h=void 0!==d&&d,p={width:r,height:i,deltaX:n,deltaY:o};if(a){var f=4,v=0,g=0;switch(e){case 0:g=(-1*n-o)/f;break;case 1:g=(n-o)/f;break;case 2:g=(n+o)/f;break;case 3:g=(-1*n+o)/f;break;default:break}0!==g&&(v=Math.round(g/a.ResizeBasis.basisHeight*1e5)/1e3),a.ResizePCT.widthPCT=Math.max(Math.min(a.ResizePCT.widthPCT+v,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit),a.ResizePCT.heightPCT=Math.max(Math.min(a.ResizePCT.heightPCT+v,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit);var y=Math.round(a.ResizePCT.widthPCT*a.ResizeBasis.basisWidth/100),m=Math.round(a.ResizePCT.heightPCT*a.ResizeBasis.basisHeight/100);switch(e){case 0:n=r-y,o=i-m;break;case 1:n=y-r,o=i-m;break;case 2:n=y-r,o=m-i;break;case 3:n=r-y,o=m-i;break;default:break}return p.width=y,p.height=m,p.deltaX=n/l,p.deltaY=o/l,p}switch(e){case 0:p.width=c?r:r-n*l,p.height=h?i:i-o*l;break;case 1:p.width=c?r:r+n*l,p.height=h?i:i-o*l;break;case 2:p.width=c?r:r+n*l,p.height=h?i:i+o*l;break;case 3:p.width=c?r:r-n*l,p.height=h?i:i+o*l;break;default:break}return p},n.updateEdgePointByAnchors=function(){var t=n.nodeModel,e=t.id,o=t.anchors,r=n.getNodeEdges(e);r.sourceEdges.forEach((function(t){var e=o.find((function(e){return e.id===t.sourceAnchorId}));e&&t.updateStartPoint({x:e.x,y:e.y})})),r.targetEdges.forEach((function(t){var e=o.find((function(e){return e.id===t.targetAnchorId}));e&&t.updateEndPoint({x:e.x,y:e.y})}))},n.updateRect=function(t){var e=t.deltaX,o=t.deltaY,r=n.nodeModel,i=r.x,a=r.y,s=r.width,l=r.height,u=r.radius,c=r.PCTResizeInfo,d=n.nodeModel,h=d.minWidth,p=d.minHeight,f=d.maxWidth,v=d.maxHeight,g=n.index,y=h===f,m=p===v,b=n.getResize({index:g,deltaX:e,deltaY:o,width:s,height:l,PCTResizeInfo:c,pct:1,freezeWidth:y,freezeHeight:m});if(b.width<h||b.width>f||b.height<p||b.height>v)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:y?0:b.deltaX,deltaY:m?0:b.deltaY}),n.nodeModel.width=b.width,n.nodeModel.height=b.height,n.nodeModel.setProperties({nodeSize:{width:b.width,height:b.height}});var x={x:i,y:a,width:s,height:l,radius:u},w={x:n.nodeModel.x,y:n.nodeModel.y,width:n.nodeModel.width,height:n.nodeModel.height,radius:u};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:e,deltaY:o,beforeNode:x,afterNode:w})}},n.updateEllipse=function(t){var e=t.deltaX,o=t.deltaY,r=n.nodeModel,i=r.rx,a=r.ry,s=r.x,l=r.y,u=r.PCTResizeInfo,c=n.index,d=n.nodeModel,h=d.minWidth,p=d.minHeight,f=d.maxWidth,v=d.maxHeight,g=h===f,y=p===v,m=i,b=a,x=n.getResize({index:c,deltaX:e,deltaY:o,width:m,height:b,PCTResizeInfo:u,pct:.5,freezeWidth:g,freezeHeight:y});if(x.width<h/2||x.width>f/2||x.height<p/2||x.height>v/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:g?0:x.deltaX,deltaY:y?0:x.deltaY}),n.nodeModel.rx=x.width,n.nodeModel.ry=x.height,n.nodeModel.setProperties({nodeSize:{rx:x.width,ry:x.height}});var w={x:s,y:l},_={rx:x.width,ry:x.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:e,deltaY:o,beforeNode:$t($t({},w),{rx:i,ry:a}),afterNode:_})}},n.updateDiamond=function(t){var e=t.deltaX,o=t.deltaY,r=n.nodeModel,i=r.rx,a=r.ry,s=r.x,l=r.y,u=r.PCTResizeInfo,c=n.index,d=n.nodeModel,h=d.minWidth,p=d.minHeight,f=d.maxWidth,v=d.maxHeight,g=h===f,y=p===v,m=i,b=a,x=n.getResize({index:c,deltaX:e,deltaY:o,width:m,height:b,PCTResizeInfo:u,pct:.5,freezeWidth:g,freezeHeight:y});if(x.width<h/2||x.width>f/2||x.height<p/2||x.height>v/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:g?0:x.deltaX,deltaY:y?0:x.deltaY}),n.nodeModel.rx=x.width,n.nodeModel.ry=x.height,n.nodeModel.setProperties({nodeSize:{rx:x.width,ry:x.height}});var w={x:s,y:l,rx:i,ry:a},_={rx:x.width,ry:x.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:e,deltaY:o,beforeNode:w,afterNode:_})}},n.eventEmit=function(t){var e=t.deltaX,o=t.deltaY,r=t.beforeNode,i=t.afterNode,a=n.nodeModel,s=a.id,l=a.modelType,u=a.type,c=$t({id:s,modelType:l,type:u},r),d=$t({id:s,modelType:l,type:u},i);n.graphModel.eventCenter.emit("node:resize",{preData:c,data:d,deltaX:e,deltaY:o,index:n.index,model:n.nodeModel})},n.onDragging=function(t){var e,o=t.deltaX,r=t.deltaY,i=n.graphModel.transformModel,a=n.nodeModel.modelType;e=Jt(i.fixDeltaXY(o,r),2),o=e[0],r=e[1],a===l.e3q.RECT_NODE||a===l.e3q.HTML_NODE?n.updateRect({deltaX:o,deltaY:r}):a===l.e3q.ELLIPSE_NODE?n.updateEllipse({deltaX:o,deltaY:r}):a===l.e3q.DIAMOND_NODE&&n.updateDiamond({deltaX:o,deltaY:r})},n.onDragEnd=function(){var t=n.graphModel.gridSize,e=void 0===t?1:t,o=e*Math.round(n.nodeModel.x/e),r=e*Math.round(n.nodeModel.y/e);n.nodeModel.moveTo(o,r),n.updateEdgePointByAnchors()},n.index=e.index,n.nodeModel=e.model,n.graphModel=e.graphModel,n.dragHandler=new Qt({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:1}),n}return Zt(e,t),e.prototype.getNodeEdges=function(t){for(var e=this.graphModel,n=e.edges,o=[],r=[],i=0;i<n.length;i++){var a=n[i];a.sourceNodeId===t?o.push(a):n[i].targetNodeId===t&&r.push(a)}return{sourceEdges:o,targetEdges:r}},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,o=t.index,r=t.model,i=r.getControlPointStyle();return(0,qt.Y)("g",{className:"lf-resize-control-".concat(o),children:(0,qt.Y)(l.rwV,$t({className:"lf-node-control",x:e,y:n},i,{onMouseDown:this.dragHandler.handleMouseDown}))})},e}(l.uAl),ee=te,ne=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(){return oe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},oe.apply(this,arguments)},re=function(t){function e(){var e=t.call(this)||this;return e.state={},e}return ne(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,o=e.x,r=e.y,i=e.width,a=e.height,s={minX:o-i/2,minY:r-a/2,maxX:o+i/2,maxY:r+a/2},l=s.minX,u=s.minY,c=s.maxX,d=s.maxY,h=[{x:l,y:u},{x:c,y:u},{x:c,y:d},{x:l,y:d}];return h.map((function(t,o){return(0,qt.Y)(ee,oe({index:o},t,{model:e,graphModel:n}))}))},e.prototype.getGroupSolid=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.getResizeOutlineStyle();return(0,qt.Y)(l.rwV,oe({},i,{x:e,y:n,width:o,height:r}))},e.prototype.render=function(){return(0,qt.FD)("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},e}(l.uAl),ie=re,ae=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=(function(t){function e(e,n){var o=t.call(this,e,n)||this,r=e.properties.nodeSize;return r&&(o.rx=r.rx,o.ry=r.ry),o}ae(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,heightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:o}}else delete this.PCTResizeInfo}}(l._5e),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ae(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return(0,qt.Y)(ie,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model,n=t.graphModel.editConfigModel.isSilentMode;return(0,qt.FD)("g",{children:[this.getResizeShape(),e.isSelected&&!n?this.getControlGroup():""]})}}(l.jJD),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),le=function(){return le=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},le.apply(this,arguments)},ue=(function(t){function e(e,n){var o=t.call(this,e,n)||this,r=e.properties.nodeSize;return r&&(o.rx=r.rx,o.ry=r.ry),o}se(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,heightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:o}}else delete this.PCTResizeInfo}}(l.KeU),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}se(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return(0,qt.Y)(ie,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.points,n=t.getNodeStyle();return(0,qt.Y)("g",{children:(0,qt.Y)(l.tS,le({},n,{points:e}))})},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return(0,qt.FD)("g",{children:[this.getResizeShape(),e&&!n?this.getControlGroup():""]})}}(l.FXO),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),ce=(function(t){function e(e,n){var o=t.call(this,e,n)||this,r=e.properties.nodeSize;return r&&(o.width=r.width,o.height=r.height),o}ue(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,heightPCT:100},n={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:o}}else delete this.PCTResizeInfo}}(l.t8p),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ue(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return(0,qt.Y)(ie,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return(0,qt.FD)("g",{children:[this.getResizeShape(),e&&!n?this.getControlGroup():""]})}}(l.yI1),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),de=function(t){function e(e,n){var o=t.call(this,e,n)||this,r=e.properties.nodeSize;return r&&(o.width=r.width,o.height=r.height),o}return ce(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,heightPCT:100},n={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:o}}else delete this.PCTResizeInfo},e}(l.G6l),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ce(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return(0,qt.Y)(ie,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return(0,qt.FD)("g",{children:[this.getResizeShape(),e&&!n?this.getControlGroup():""]})},e}(l.Pc7),pe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fe=function(){return fe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},fe.apply(this,arguments)},ve=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},ge=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},ye=500,me=300,be=-1e4,xe=function(t){function e(){var e=t.apply(this,ge([],ve(arguments),!1))||this;return e.isGroup=!0,e.isFolded=!1,e.unfoldedWidth=ye,e.unfoldedHeight=me,e.childrenLastFoldStatus={},e}return pe(e,t),e.prototype.initNodeData=function(e){var n=this;t.prototype.initNodeData.call(this,e);var o=[];(0,Kt.A)(e.children)&&(o=e.children),this.children=new Set(o),this.width=ye,this.height=me,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=be,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,void 0===this.properties.isFolded&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout((function(){n.isFolded&&n.foldGroup(n.isFolded)}))},e.prototype.getResizeOutlineStyle=function(){var e=t.prototype.getResizeOutlineStyle.call(this);return e.stroke="none",e},e.prototype.foldGroup=function(t){var e=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var n=ge(ge([],ve(this.incoming.edges),!1),ve(this.outgoing.edges),!1);this.children.forEach((function(o){var r=e.graphModel.getElement(o);if(r){var i=r.isFolded;if(r.isGroup&&!r.isFolded&&r.foldGroup(t),r.isGroup&&!t){var a=e.childrenLastFoldStatus[o];void 0!==a&&a!==r.isFolded&&r.foldGroup(a)}e.childrenLastFoldStatus[o]=!!i,r.visible=!t;var s=r.incoming.edges,l=r.outgoing.edges;n=ge(ge(ge([],ve(n),!1),ve(s),!1),ve(l),!1)}})),this.foldEdge(t,n)}},e.prototype.getAnchorStyle=function(e){var n=t.prototype.getAnchorStyle.call(this,e);return n.stroke="transparent",n.fill="transparent",n.hover.fill="transparent",n.hover.stroke="transparent",n},e.prototype.foldEdge=function(t,e){var n=this;e.forEach((function(e,o){var r=e.id,i=e.sourceNodeId,a=e.targetNodeId,s=e.startPoint,l=e.endPoint,u=e.type,c=e.text,d=e.getProperties(),h={id:"".concat(r,"__").concat(o),sourceNodeId:i,targetNodeId:a,startPoint:s,endPoint:l,type:u,properties:d,text:null===c||void 0===c?void 0:c.value};e.virtual&&n.graphModel.deleteEdgeById(e.id);var p=n.graphModel.group.getNodeGroup(a);p||(p=n.graphModel.getNodeModelById(a));var f=n.graphModel.group.getNodeGroup(i);f||(f=n.graphModel.getNodeModelById(i)),t&&!1!==e.visible&&(n.children.has(i)||n.id===i?(h.startPoint=void 0,h.sourceNodeId=n.id):(h.endPoint=void 0,h.targetNodeId=n.id),p.id===n.id&&f.id===n.id||n.createVirtualEdge(h),e.visible=!1),t||!1!==e.visible||(p&&p.isGroup&&p.isFolded?(h.targetNodeId=p.id,h.endPoint=void 0,n.createVirtualEdge(h)):f&&f.isGroup&&f.isFolded?(h.sourceNodeId=f.id,h.startPoint=void 0,n.createVirtualEdge(h)):e.visible=!0)}))},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var e=this.graphModel.addEdge(t);e.virtual=!0,e.text.editable=!1,e.isFoldedEdge=!0},e.prototype.isInRange=function(t){var e=t.minX,n=t.minY,o=t.maxX,r=t.maxY;return e>=this.x-this.width/2&&o<=this.x+this.width/2&&n>=this.y-this.height/2&&r<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var e=t.minX,n=t.minY,o=t.maxX,r=t.maxY;return{x:e>=this.x-this.width/2&&o<=this.x+this.width/2,y:n>=this.y-this.height/2&&r<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var e=this,n=t.prototype.getData.call(this);n.children=[],console.log("this.children",this.children),this.children.forEach((function(t){var o=e.graphModel.getNodeModelById(t);o&&!o.virtual&&n.children.push(t)}));var o=n.properties;return null===o||void 0===o||delete o.groupAddable,null===o||void 0===o||delete o.isFolded,n},e.prototype.getHistoryData=function(){var e=t.prototype.getData.call(this);e.children=ge([],ve(this.children),!1),e.isGroup=!0;var n=e.properties;return null===n||void 0===n||delete n.groupAddable,(null===n||void 0===n?void 0:n.isFolded)&&(e.x=e.x+this.unfoldedWidth/2-this.foldedWidth/2,e.y=e.y+this.unfoldedHeight/2-this.foldedHeight/2),e},e.prototype.isAllowAppendIn=function(t){return console.info("_nodeData",t),!0},e.prototype.toBack=function(){this.zIndex--},e}(de),we=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pe(e,t),e.prototype.getControlGroup=function(){var e=this.props.model,n=e.resizable,o=e.properties;return n&&!o.isFolded?t.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,e=t.width,n=t.height,o=t.x,r=t.y,i=t.radius,a=t.properties,s=t.getAddableOutlineStyle;if(!a.groupAddable)return null;var u=this.props.model.getNodeStyle().strokeWidth,c=void 0===u?0:u,d=s(),h=e+c+8,p=n+c+8;return(0,l.h)("rect",fe(fe({},d),{width:h,height:p,x:o-h/2,y:r-p/2,rx:i,ry:i}))},e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x-t.width/2+5,n=t.y-t.height/2+5;if(!t.foldable)return null;var o=(0,l.h)("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M ".concat(e+3,",").concat(n+6," ").concat(e+11,",").concat(n+6," M").concat(e+7,",").concat(n+2," ").concat(e+7,",").concat(n+10):"M ".concat(e+3,",").concat(n+6," ").concat(e+11,",").concat(n+6," ")});return(0,l.h)("g",{},[(0,l.h)("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return(0,l.h)("g",{},[this.getAddableShape(),t.prototype.getResizeShape.call(this),this.getFoldIcon()])},e}(he),_e={type:"group",view:we,model:xe},Ee=function(){return Ee=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ee.apply(this,arguments)},Ae=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},Se=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Oe=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Ce=-1e3,Ne=-1e4,Me=(function(){function t(t){var e=t.lf,n=this;this.topGroupZIndex=Ne,this.nodeGroupMap=new Map,this.graphRendered=function(t){var e=t.data;e&&e.nodes&&(e.nodes.forEach((function(t){t.children&&t.children.forEach((function(e){n.nodeGroupMap.set(e,t.id)}))})),n.checkAndCorrectTopGroupZIndex(e.nodes))},this.appendNodeToGroup=function(t){var e=t.data,o=n.nodeGroupMap.get(e.id);if(o){var r=n.lf.getNodeModelById(o);r.removeChild(e.id),n.nodeGroupMap.delete(e.id),r.setAllowAppendChild(!1)}var i=n.lf.getNodeModelById(e.id),a=null===i||void 0===i?void 0:i.getBounds();if(a&&i){var s=n.getGroup(a,e);if(i.isGroup&&(e.children.forEach((function(t){n.nodeGroupMap.set(t,e.id)})),n.checkAndCorrectTopGroupZIndex([e]),n.nodeSelected({data:e,isSelected:!1,isMultiple:!1})),!s)return;var l=s.isAllowAppendIn(e);if(!l)return void n.lf.emit("group:not-allowed",{group:s.getData(),node:e});s.addChild(e.id),n.nodeGroupMap.set(e.id,s.id),s.setAllowAppendChild(!1)}},this.deleteGroupChild=function(t){var e=t.data;e.children&&e.children.forEach((function(t){n.nodeGroupMap.delete(t),n.lf.deleteNode(t)}));var o=n.nodeGroupMap.get(e.id);if(o){var r=n.lf.getNodeModelById(o);r.removeChild(e.id),n.nodeGroupMap.delete(e.id)}},this.setActiveGroup=function(t){var e=t.data,o=n.lf.getNodeModelById(e.id),r=null===o||void 0===o?void 0:o.getBounds();if(o&&r){var i=n.getGroup(r,e);if(n.activeGroup&&n.activeGroup.setAllowAppendChild(!1),!i||o.isGroup&&i.id===e.id)return;var a=i.isAllowAppendIn(e);if(!a)return;n.activeGroup=i,n.activeGroup.setAllowAppendChild(!0)}},this.findNodeAndChildMaxZIndex=function(t){var e=Ne;return t.isGroup&&(e=Math.max(e,t.zIndex)),t.children&&t.children.forEach((function(t){"object"===typeof t&&(t=t.id);var o=n.lf.getNodeModelById(t);if(null===o||void 0===o?void 0:o.isGroup){var r=n.findNodeAndChildMaxZIndex(o);e=Math.max(r,e)}})),e},this.checkAndCorrectTopGroupZIndex=function(t){var e=Ne;if(t.forEach((function(t){var o=n.lf.getNodeModelById(t.id);if(o){var r=n.findNodeAndChildMaxZIndex(o);r>e&&(e=r)}})),!(n.topGroupZIndex>=e)){for(var o=n.lf.graphModel.nodes.filter((function(t){return t.isGroup})),r=n.topGroupZIndex,i=0;i<o.length;i++){var a=o[i];a.zIndex>r&&(r=a.zIndex)}n.topGroupZIndex=r}},this.nodeSelected=function(t){var e=t.data,o=t.isMultiple,r=t.isSelected,i=n.lf.getNodeModelById(e.id);if(n.toFrontGroup(i),n.topGroupZIndex>Ce){n.topGroupZIndex=Ne;for(var a=n.lf.graphModel.nodes.filter((function(t){return t.isGroup})).sort((function(t,e){return t.zIndex-e.zIndex})),s=0,l=0;l<a.length;l++){var u=a[l];u.zIndex!==s&&(n.topGroupZIndex++,s=u.zIndex),u.setZIndex(n.topGroupZIndex)}}if(o&&r)if(null===i||void 0===i?void 0:i.isGroup)i.children.forEach((function(t){var e=n.lf.graphModel.getElement(t);null===e||void 0===e||e.setSelected(!1)}));else{var c=n.nodeGroupMap.get(e.id);if(c){var d=n.lf.getNodeModelById(c);(null===d||void 0===d?void 0:d.isSelected)&&(null===i||void 0===i||i.setSelected(!1))}}},this.toFrontGroup=function(t){t&&t.isGroup&&(n.topGroupZIndex++,t.setZIndex(n.topGroupZIndex),t.children&&t.children.forEach((function(t){var e=n.lf.getNodeModelById(t);n.toFrontGroup(e)})))},e.register(_e),this.lf=e,e.graphModel.addNodeMoveRules((function(t,o,r){if(t.isGroup){var i=n.getNodeAllChild(t);return e.graphModel.moveNodes(i,o,r,!0),!0}var a=e.getNodeModelById(n.nodeGroupMap.get(t.id));if(a&&a.isRestrict){var s=t.getBounds(),l=s.minX,u=s.minY,c=s.maxX,d=s.maxY;return a.isAllowMoveTo({minX:l+o,minY:u+r,maxX:c+o,maxY:d+r})}return!0})),e.graphModel.group=this,e.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),e.on("node:delete",this.deleteGroupChild),e.on("node:dnd-drag,node:drag",this.setActiveGroup),e.on("node:click",this.nodeSelected),e.on("graph:rendered",this.graphRendered),e.addElements=function(t,o){var r=t.nodes,i=t.edges,a={},s={nodes:[],edges:[]},l=[];return(0,Xt.A)(r,(function(t){var r=t.id,i=t.children,u=Ae(t,["children"]),c=e.addNode(u);if(!c)return{nodes:[],edges:[]};r&&(a[r]=c.id),s.nodes.push(c);var d=n.createAllChildNodes(a,i,c,o).edgesArray;l.push.apply(l,Oe([],Se(d),!1))})),l.forEach((function(t){n.createEdgeModel(t,a,o)})),(0,Xt.A)(i,(function(t){var e=n.createEdgeModel(t,a,0);s.edges.push(e)})),s}}t.prototype.createAllChildNodes=function(t,e,n,o){var r=this,i=this.lf,a=[],s=[],u=[];null===e||void 0===e||e.forEach((function(e){var c=i.getNodeModelById(e);if(c){var d=c.x,h=c.y,p=c.properties,f=c.type,v=c.rotate,g=c.children,y={x:d+o,y:h+o,properties:p,type:f,rotate:v},m=l.Bx4.NODE_GROUP_COPY||"node:group-copy-add",b=i.addNode(y,m);if(n.addChild(b.id),t[e]=b.id,u.push(b),c.incoming.edges.forEach((function(t){s.push(t)})),c.outgoing.edges.forEach((function(t){s.push(t)})),g instanceof Set){var x=r.createAllChildNodes(t,g,b,o),w=x.nodesArray,_=x.edgesArray;u.push.apply(u,Oe([],Se(w),!1)),a.push.apply(a,Oe([],Se(_),!1))}}}));var c=s.filter((function(e){return t[e.sourceNodeId]&&t[e.targetNodeId]})),d=c.map((function(t){return t.getData()}));return{nodesArray:u,edgesArray:a.concat(d)}},t.prototype.createEdgeModel=function(t,e,n){var o=this.lf,r=t.sourceNodeId,i=t.targetNodeId;e[r]&&(r=e[r]),e[i]&&(i=e[i]);var a=t.type,s=t.startPoint,l=t.endPoint,u=t.pointsList,c=t.text,d={x:((null===s||void 0===s?void 0:s.x)||0)+n,y:((null===s||void 0===s?void 0:s.y)||0)+n},h={x:((null===l||void 0===l?void 0:l.x)||0)+n,y:((null===l||void 0===l?void 0:l.y)||0)+n},p=[];u&&u.length>0&&(p=u.map((function(t){return t.x+=n,t.y+=n,t})));var f={type:a,startPoint:d,endPoint:h,sourceNodeId:r,targetNodeId:i,pointsList:p};return(0,Ut.A)(c)&&!(0,Vt.A)(c)&&(f.text=Ee(Ee({},c),{x:(null===c||void 0===c?void 0:c.x)+n,y:(null===c||void 0===c?void 0:c.y)+n})),o.graphModel.addEdge(f)},t.prototype.getNodeAllChild=function(t){var e=this,n=[];return t.children&&t.children.forEach((function(t){n.push(t);var o=e.lf.getNodeModelById(t);(null===o||void 0===o?void 0:o.isGroup)&&(n=n.concat(e.getNodeAllChild(o)))})),n},t.prototype.getGroup=function(t,e){var n=this.lf.graphModel.nodes,o=n.filter((function(n){return n.isGroup&&n.isInRange(t)&&n.id!==e.id}));if(0!==o.length){if(1===o.length)return o[0];for(var r=o[o.length-1],i=o.length-2;i>=0;i--)o[i].zIndex>r.zIndex&&(r=o[i]);return r}},t.prototype.getNodeGroup=function(t){var e=this.nodeGroupMap.get(t);if(e)return this.lf.getNodeModelById(e)},t.prototype.render=function(){},t.prototype.destroy=function(){},t.pluginName="group"}(),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Te=function(){return Te=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Te.apply(this,arguments)};function Pe(){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Me(e,t),e.prototype.getFoldIcon=function(){var t=this.props.model,e=t,n=e.x,o=e.y,r=e.width,i=e.height,a=e.properties,s=e.foldable,u=t.x-t.width/2+5,c=t.y-t.height/2+5;if(!s)return null;var d=(0,l.h)("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:a.isFolded?"M ".concat(u+3,",").concat(c+6," ").concat(u+11,",").concat(c+6," M").concat(u+7,",").concat(c+2," ").concat(u+7,",").concat(c+10):"M ".concat(u+3,",").concat(c+6," ").concat(u+11,",").concat(c+6," ")});return(0,l.h)("g",{},[(0,l.h)("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n-r/2+5,y:o-i/2+5,onClick:function(e){var n,o;e.stopPropagation(),null===(o=(n=t).foldGroup)||void 0===o||o.call(n,!a.isFolded)}}),d])},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.getNodeStyle(),a=Te(Te({},i),{x:e-o/2,y:n-r/2,width:o,height:r,stroke:"black",strokeWidth:2,strokeDasharray:"0 0"});return(0,l.h)("g",{},[(0,l.h)("rect",Te({},a)),this.getFoldIcon()])},e}(we),e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Me(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.foldable=!0,this.resizable=!0,this.width=400,this.height=200,this.resetWidthHeight(),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.resetWidthHeight=function(){var t,e,n=null===(t=this.properties.iniProp)||void 0===t?void 0:t.width,o=null===(e=this.properties.iniProp)||void 0===e?void 0:e.height;n&&(this.width=n),o&&(this.height=o)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this);e.stroke="#989891",e.strokeWidth=1,e.strokeDasharray="3 3",this.isSelected&&(e.stroke="rgb(124, 15, 255)");var n=this.properties.isBoundaryEventTouchingTask;return n&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.addChild=function(e){var n=this.graphModel.getElement(e);null===n||void 0===n||n.setProperties({parent:this.id}),t.prototype.addChild.call(this,e)},e.prototype.getAnchorStyle=function(){var e=t.prototype.getAnchorStyle.call(this);return e.stroke="#000",e.fill="#fff",e.hover||(e.hover={}),e.hover.stroke="transparent",e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",e.hover||(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null===e||void 0===e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(xe);return{type:"bpmn:subProcess",view:t,model:e}}var De=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ke(t){function e(e){var n,r,i=e.data,a=i.type,s=i.id;if("bpmn:boundaryEvent"===a){var l=t.graphModel.nodes;try{for(var u=De(l),c=u.next();!c.done;c=u.next()){var d=c.value;if(d.isTaskNode){var h=null;if(null!==(h=o(d,i))){var p=t.graphModel.getNodeModelById(s),f=t.graphModel.getNodeModelById(h),v=p.properties.attachedToRef;return v&&v!==h&&t.graphModel.getNodeModelById(v).deleteBoundaryEvent(s),void f.addBoundaryEvent(s)}}}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}function n(e){var n,r,i=e.data,a=i.type;if("bpmn:boundaryEvent"===a){var s=t.graphModel.nodes;try{for(var l=De(s),u=l.next();!u.done;u=l.next()){var c=u.value;c.isTaskNode&&(o(c,i)?c.setTouching(!0):c.setTouching(!1))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}function o(t,e){var n=5,o=t.x,r=t.y,i=t.width,a=t.height,s=t.id,l={minX:o-i/2,maxX:o+i/2,minY:r-a/2,maxY:r+a/2},u=e.x,c=e.y,d={minX:l.minX-n,maxX:l.maxX+n,minY:l.minY-n,maxY:l.maxY+n},h={minX:l.minX+n,maxX:l.maxX-n,minY:l.minY+n,maxY:l.maxY-n};return u>d.minX&&u<d.maxX&&c>d.minY&&c<d.maxY&&!(u>h.minX&&u<h.maxX&&c>h.minY&&c<h.maxY)?s:null}t.on("node:drag,node:dnd-drag",n),t.on("node:drop,node:dnd-add",e),t.graphModel.addNodeMoveRules((function(e,n,o){if(e.isTaskNode){var r=e.boundaryEvents;return t.graphModel.moveNodes(r,n,o,!0),!0}return!0}))}function Re(t){var e=Gt("bpmn:serviceTask",Tt),n=Gt("bpmn:userTask",Pt);t.register(e),t.register(n),t.register(Pe()),ke(t)}var Ie=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(){return Le=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Le.apply(this,arguments)};function je(t){var e=function(e){function n(n,o){n.id||(n.id="Flow_".concat(Q()));var r=Le(Le(Le({},t||{}),n.properties),{isDefaultFlow:!1});return n.properties=r,e.call(this,n,o)||this}return Ie(n,e),n.extendKey="SequenceFlowModel",n}(l.nTh),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.getStartArrow=function(){var t=this.props.model,e=t.properties.isDefaultFlow;return e?(0,l.h)("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):(0,l.h)("path",{d:""})},e.extendKey="SequenceFlowEdge",e}(l.Uzs);return{type:"bpmn:sequenceFlow",view:n,model:e}}var Be=je();function He(t){t.register(Be)}var Fe=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},ze=[{nodes:["startEvent","intermediateCatchEvent","boundaryEvent"],definition:[{type:"bpmn:timerEventDefinition",icon:Ot,properties:{definitionType:"bpmn:timerEventDefinition",timerValue:"",timerType:""}}]}];function We(t){function e(e){function n(e,n){return e.forEach((function(e){(null===t||void 0===t?void 0:t[e])||(t[e]=new Map);var o=null===t||void 0===t?void 0:t[e];n.forEach((function(t){o.set(t.type,t)}))})),t}e.forEach((function(t){n(t.nodes,t.definition)}))}return function(){return[t,e]}}(function(){function t(t){var e=t.lf;e.definition={},e.useDefinition=We(e.definition);var n=Fe(e.useDefinition(),2),o=n[0],r=n[1];console.log("_definition",o),r(ze),St(e),Bt(e),He(e),Re(e),e.setDefaultEdgeType("bpmn:sequenceFlow")}t.pluginName="BpmnElementsPlugin"})();function Ye(t,e,n){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;var i=Array(r);while(++o<r)i[o]=t[o+e];return i}var Ge=Ye,Xe=n(19386),Ue=n(33323),Ve=Math.ceil,Ke=Math.max;function qe(t,e,n){e=(n?(0,Xe.A)(t,e,n):void 0===e)?1:Ke((0,Ue.A)(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];var r=0,i=0,a=Array(Ve(o/e));while(r<o)a[i++]=Ge(t,r,r+=e);return a}var Ze=qe;function $e(t){var e=-1,n=null==t?0:t.length,o=0,r=[];while(++e<n){var i=t[e];i&&(r[o++]=i)}return r}var Je=$e,Qe=n(5574),tn=n(48070),en=n(42297);function nn(){var t=arguments.length;if(!t)return[];var e=Array(t-1),n=arguments[0],o=t;while(o--)e[o-1]=arguments[o];return(0,Qe.A)((0,Kt.A)(n)?(0,en.A)(n):[n],(0,tn.A)(e,1))}var on=nn,rn=n(67976),an=n(49899),sn=n(45763),ln=n(49082),un=n(89023),cn=n(83501),dn=200;function hn(t,e,n,o){var r=-1,i=an.A,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=(0,ln.A)(e,(0,un.A)(n))),o?(i=sn.A,a=!1):e.length>=dn&&(i=cn.A,a=!1,e=new rn.A(e));t:while(++r<s){var c=t[r],d=null==n?c:n(c);if(c=o||0!==c?c:0,a&&d===d){var h=u;while(h--)if(e[h]===d)continue t;l.push(c)}else i(e,d,o)||l.push(c)}return l}var pn=hn,fn=n(83932),vn=n(24527),gn=(0,fn.A)((function(t,e){return(0,vn.A)(t)?pn(t,(0,tn.A)(e,1,vn.A,!0)):[]})),yn=gn,mn=n(5919),bn=n(99100),xn=(0,fn.A)((function(t,e){var n=(0,bn.A)(e);return(0,vn.A)(n)&&(n=void 0),(0,vn.A)(t)?pn(t,(0,tn.A)(e,1,vn.A,!0),(0,mn.A)(n,2)):[]})),wn=xn,_n=(0,fn.A)((function(t,e){var n=(0,bn.A)(e);return(0,vn.A)(n)&&(n=void 0),(0,vn.A)(t)?pn(t,(0,tn.A)(e,1,vn.A,!0),void 0,n):[]})),En=_n;function An(t,e,n){var o=null==t?0:t.length;return o?(e=n||void 0===e?1:(0,Ue.A)(e),Ge(t,e<0?0:e,o)):[]}var Sn=An;function On(t,e,n){var o=null==t?0:t.length;return o?(e=n||void 0===e?1:(0,Ue.A)(e),e=o-e,Ge(t,0,e<0?0:e)):[]}var Cn=On;function Nn(t,e,n,o){var r=t.length,i=o?r:-1;while((o?i--:++i<r)&&e(t[i],i,t));return n?Ge(t,o?0:i,o?i+1:r):Ge(t,o?i+1:0,o?r:i)}var Mn=Nn;function Tn(t,e){return t&&t.length?Mn(t,(0,mn.A)(e,3),!0,!0):[]}var Pn=Tn;function Dn(t,e){return t&&t.length?Mn(t,(0,mn.A)(e,3),!0):[]}var kn=Dn;function Rn(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}var In=Rn,Ln=4294967295;function jn(t){return t?In((0,Ue.A)(t),0,Ln):0}var Bn=jn;function Hn(t,e,n,o){var r=t.length;n=(0,Ue.A)(n),n<0&&(n=-n>r?0:r+n),o=void 0===o||o>r?r:(0,Ue.A)(o),o<0&&(o+=r),o=n>o?0:Bn(o);while(n<o)t[n++]=e;return t}var Fn=Hn;function zn(t,e,n,o){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&(0,Xe.A)(t,e,n)&&(n=0,o=r),Fn(t,e,n,o)):[]}var Wn=zn,Yn=n(72727),Gn=n(38615);function Xn(t){return t&&t.length?t[0]:void 0}var Un=Xn,Vn=n(1868),Kn=n(59314);function qn(t,e){var n=null==t?0:t.length;return n?(e=void 0===e?1:(0,Ue.A)(e),(0,tn.A)(t,e)):[]}var Zn=qn,$n=n(74927),Jn=n(94807);function Qn(t){var e=null==t?0:t.length;return e?Ge(t,0,-1):[]}var to=Qn,eo=Math.min;function no(t,e,n){var o=n?sn.A:an.A,r=t[0].length,i=t.length,a=i,s=Array(i),l=1/0,u=[];while(a--){var c=t[a];a&&e&&(c=(0,ln.A)(c,(0,un.A)(e))),l=eo(c.length,l),s[a]=!n&&(e||r>=120&&c.length>=120)?new rn.A(a&&c):void 0}c=t[0];var d=-1,h=s[0];t:while(++d<r&&u.length<l){var p=c[d],f=e?e(p):p;if(p=n||0!==p?p:0,!(h?(0,cn.A)(h,f):o(u,f,n))){a=i;while(--a){var v=s[a];if(!(v?(0,cn.A)(v,f):o(t[a],f,n)))continue t}h&&h.push(f),u.push(p)}}return u}var oo=no;function ro(t){return(0,vn.A)(t)?t:[]}var io=ro,ao=(0,fn.A)((function(t){var e=(0,ln.A)(t,io);return e.length&&e[0]===t[0]?oo(e):[]})),so=ao,lo=(0,fn.A)((function(t){var e=(0,bn.A)(t),n=(0,ln.A)(t,io);return e===(0,bn.A)(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?oo(n,(0,mn.A)(e,2)):[]})),uo=lo,co=(0,fn.A)((function(t){var e=(0,bn.A)(t),n=(0,ln.A)(t,io);return e="function"==typeof e?e:void 0,e&&n.pop(),n.length&&n[0]===t[0]?oo(n,void 0,e):[]})),ho=co,po=Array.prototype,fo=po.join;function vo(t,e){return null==t?"":fo.call(t,e)}var go=vo,yo=n(75241),mo=n(42301);function bo(t,e,n){var o=n+1;while(o--)if(t[o]===e)return o;return o}var xo=bo,wo=Math.max,_o=Math.min;function Eo(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var r=o;return void 0!==n&&(r=(0,Ue.A)(n),r=r<0?wo(o+r,0):_o(r,o-1)),e===e?xo(t,e,r):(0,yo.A)(t,mo.A,r,!0)}var Ao=Eo,So=n(18507);function Oo(t,e){var n=t.length;if(n)return e+=e<0?n:0,(0,So.A)(e,n)?t[e]:void 0}var Co=Oo;function No(t,e){return t&&t.length?Co(t,(0,Ue.A)(e)):void 0}var Mo=No,To=n(92178);function Po(t,e,n,o){var r=n-1,i=t.length;while(++r<i)if(o(t[r],e))return r;return-1}var Do=Po,ko=Array.prototype,Ro=ko.splice;function Io(t,e,n,o){var r=o?Do:To.A,i=-1,a=e.length,s=t;t===e&&(e=(0,en.A)(e)),n&&(s=(0,ln.A)(t,(0,un.A)(n)));while(++i<a){var l=0,u=e[i],c=n?n(u):u;while((l=r(s,c,l,o))>-1)s!==t&&Ro.call(s,l,1),Ro.call(t,l,1)}return t}var Lo=Io;function jo(t,e){return t&&t.length&&e&&e.length?Lo(t,e):t}var Bo=jo,Ho=(0,fn.A)(Bo),Fo=Ho;function zo(t,e,n){return t&&t.length&&e&&e.length?Lo(t,e,(0,mn.A)(n,2)):t}var Wo=zo;function Yo(t,e,n){return t&&t.length&&e&&e.length?Lo(t,e,void 0,n):t}var Go=Yo,Xo=n(2386);function Uo(t,e){var n=-1,o=e.length,r=Array(o),i=null==t;while(++n<o)r[n]=i?void 0:(0,Xo.A)(t,e[n]);return r}var Vo=Uo,Ko=n(29159),qo=n(15756);function Zo(t,e){return e.length<2?t:(0,qo.A)(t,Ge(e,0,-1))}var $o=Zo,Jo=n(24495);function Qo(t,e){return e=(0,Ko.A)(e,t),t=$o(t,e),null==t||delete t[(0,Jo.A)((0,bn.A)(e))]}var tr=Qo,er=Array.prototype,nr=er.splice;function or(t,e){var n=t?e.length:0,o=n-1;while(n--){var r=e[n];if(n==o||r!==i){var i=r;(0,So.A)(r)?nr.call(t,r,1):tr(t,r)}}return t}var rr=or,ir=n(97712);function ar(t,e){if(t!==e){var n=void 0!==t,o=null===t,r=t===t,i=(0,ir.A)(t),a=void 0!==e,s=null===e,l=e===e,u=(0,ir.A)(e);if(!s&&!u&&!i&&t>e||i&&a&&l&&!s&&!u||o&&a&&l||!n&&l||!r)return 1;if(!o&&!i&&!u&&t<e||u&&n&&r&&!o&&!i||s&&n&&r||!a&&r||!l)return-1}return 0}var sr=ar,lr=n(34994),ur=(0,lr.A)((function(t,e){var n=null==t?0:t.length,o=Vo(t,e);return rr(t,(0,ln.A)(e,(function(t){return(0,So.A)(t,n)?+t:t})).sort(sr)),o})),cr=ur;function dr(t,e){var n=[];if(!t||!t.length)return n;var o=-1,r=[],i=t.length;e=(0,mn.A)(e,3);while(++o<i){var a=t[o];e(a,o,t)&&(n.push(a),r.push(o))}return rr(t,r),n}var hr=dr,pr=Array.prototype,fr=pr.reverse;function vr(t){return null==t?t:fr.call(t)}var gr=vr;function yr(t,e,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&(0,Xe.A)(t,e,n)?(e=0,n=o):(e=null==e?0:(0,Ue.A)(e),n=void 0===n?o:(0,Ue.A)(n)),Ge(t,e,n)):[]}var mr=yr,br=4294967295,xr=br-1,wr=Math.floor,_r=Math.min;function Er(t,e,n,o){var r=0,i=null==t?0:t.length;if(0===i)return 0;e=n(e);var a=e!==e,s=null===e,l=(0,ir.A)(e),u=void 0===e;while(r<i){var c=wr((r+i)/2),d=n(t[c]),h=void 0!==d,p=null===d,f=d===d,v=(0,ir.A)(d);if(a)var g=o||f;else g=u?f&&(o||h):s?f&&h&&(o||!p):l?f&&h&&!p&&(o||!v):!p&&!v&&(o?d<=e:d<e);g?r=c+1:i=c}return _r(i,xr)}var Ar=Er,Sr=n(26914),Or=4294967295,Cr=Or>>>1;function Nr(t,e,n){var o=0,r=null==t?o:t.length;if("number"==typeof e&&e===e&&r<=Cr){while(o<r){var i=o+r>>>1,a=t[i];null!==a&&!(0,ir.A)(a)&&(n?a<=e:a<e)?o=i+1:r=i}return r}return Ar(t,e,Sr.A,n)}var Mr=Nr;function Tr(t,e){return Mr(t,e)}var Pr=Tr;function Dr(t,e,n){return Ar(t,e,(0,mn.A)(n,2))}var kr=Dr,Rr=n(19782);function Ir(t,e){var n=null==t?0:t.length;if(n){var o=Mr(t,e);if(o<n&&(0,Rr.A)(t[o],e))return o}return-1}var Lr=Ir;function jr(t,e){return Mr(t,e,!0)}var Br=jr;function Hr(t,e,n){return Ar(t,e,(0,mn.A)(n,2),!0)}var Fr=Hr;function zr(t,e){var n=null==t?0:t.length;if(n){var o=Mr(t,e,!0)-1;if((0,Rr.A)(t[o],e))return o}return-1}var Wr=zr;function Yr(t,e){var n=-1,o=t.length,r=0,i=[];while(++n<o){var a=t[n],s=e?e(a):a;if(!n||!(0,Rr.A)(s,l)){var l=s;i[r++]=0===a?0:a}}return i}var Gr=Yr;function Xr(t){return t&&t.length?Gr(t):[]}var Ur=Xr;function Vr(t,e){return t&&t.length?Gr(t,(0,mn.A)(e,2)):[]}var Kr=Vr;function qr(t){var e=null==t?0:t.length;return e?Ge(t,1,e):[]}var Zr=qr;function $r(t,e,n){return t&&t.length?(e=n||void 0===e?1:(0,Ue.A)(e),Ge(t,0,e<0?0:e)):[]}var Jr=$r;function Qr(t,e,n){var o=null==t?0:t.length;return o?(e=n||void 0===e?1:(0,Ue.A)(e),e=o-e,Ge(t,e<0?0:e,o)):[]}var ti=Qr;function ei(t,e){return t&&t.length?Mn(t,(0,mn.A)(e,3),!1,!0):[]}var ni=ei;function oi(t,e){return t&&t.length?Mn(t,(0,mn.A)(e,3)):[]}var ri=oi,ii=n(27161),ai=n(55252),si=(0,fn.A)((function(t){var e=(0,bn.A)(t);return(0,vn.A)(e)&&(e=void 0),(0,ai.A)((0,tn.A)(t,1,vn.A,!0),(0,mn.A)(e,2))})),li=si,ui=(0,fn.A)((function(t){var e=(0,bn.A)(t);return e="function"==typeof e?e:void 0,(0,ai.A)((0,tn.A)(t,1,vn.A,!0),void 0,e)})),ci=ui;function di(t){return t&&t.length?(0,ai.A)(t):[]}var hi=di;function pi(t,e){return t&&t.length?(0,ai.A)(t,(0,mn.A)(e,2)):[]}var fi=pi;function vi(t,e){return e="function"==typeof e?e:void 0,t&&t.length?(0,ai.A)(t,void 0,e):[]}var gi=vi,yi=n(62212),mi=n(43703),bi=n(28302),xi=Math.max;function wi(t){if(!t||!t.length)return[];var e=0;return t=(0,yi.A)(t,(function(t){if((0,vn.A)(t))return e=xi(t.length,e),!0})),(0,bi.A)(e,(function(e){return(0,ln.A)(t,(0,mi.A)(e))}))}var _i=wi,Ei=n(89739);function Ai(t,e){if(!t||!t.length)return[];var n=_i(t);return null==e?n:(0,ln.A)(n,(function(t){return(0,Ei.A)(e,void 0,t)}))}var Si=Ai,Oi=(0,fn.A)((function(t,e){return(0,vn.A)(t)?pn(t,e):[]})),Ci=Oi;function Ni(t,e,n){var o=t.length;if(o<2)return o?(0,ai.A)(t[0]):[];var r=-1,i=Array(o);while(++r<o){var a=t[r],s=-1;while(++s<o)s!=r&&(i[r]=pn(i[r]||a,t[s],e,n))}return(0,ai.A)((0,tn.A)(i,1),e,n)}var Mi=Ni,Ti=(0,fn.A)((function(t){return Mi((0,yi.A)(t,vn.A))})),Pi=Ti,Di=(0,fn.A)((function(t){var e=(0,bn.A)(t);return(0,vn.A)(e)&&(e=void 0),Mi((0,yi.A)(t,vn.A),(0,mn.A)(e,2))})),ki=Di,Ri=(0,fn.A)((function(t){var e=(0,bn.A)(t);return e="function"==typeof e?e:void 0,Mi((0,yi.A)(t,vn.A),void 0,e)})),Ii=Ri,Li=(0,fn.A)(_i),ji=Li,Bi=n(65169);function Hi(t,e,n){var o=-1,r=t.length,i=e.length,a={};while(++o<r){var s=o<i?e[o]:void 0;n(a,t[o],s)}return a}var Fi=Hi;function zi(t,e){return Fi(t||[],e||[],Bi.A)}var Wi=zi,Yi=n(69416);function Gi(t,e){return Fi(t||[],e||[],Yi.A)}var Xi=Gi,Ui=(0,fn.A)((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Si(t,n)})),Vi=Ui,Ki={chunk:Ze,compact:Je,concat:on,difference:yn,differenceBy:wn,differenceWith:En,drop:Sn,dropRight:Cn,dropRightWhile:Pn,dropWhile:kn,fill:Wn,findIndex:Yn.A,findLastIndex:Gn.A,first:Un,flatten:Vn.A,flattenDeep:Kn.A,flattenDepth:Zn,fromPairs:$n.A,head:Un,indexOf:Jn.A,initial:to,intersection:so,intersectionBy:uo,intersectionWith:ho,join:go,last:bn.A,lastIndexOf:Ao,nth:Mo,pull:Fo,pullAll:Bo,pullAllBy:Wo,pullAllWith:Go,pullAt:cr,remove:hr,reverse:gr,slice:mr,sortedIndex:Pr,sortedIndexBy:kr,sortedIndexOf:Lr,sortedLastIndex:Br,sortedLastIndexBy:Fr,sortedLastIndexOf:Wr,sortedUniq:Ur,sortedUniqBy:Kr,tail:Zr,take:Jr,takeRight:ti,takeRightWhile:ni,takeWhile:ri,union:ii.A,unionBy:li,unionWith:ci,uniq:hi,uniqBy:fi,uniqWith:gi,unzip:_i,unzipWith:Si,without:Ci,xor:Pi,xorBy:ki,xorWith:Ii,zip:ji,zipObject:Wi,zipObjectDeep:Xi,zipWith:Vi},qi=n(64502);function Zi(t,e,n,o){var r=-1,i=null==t?0:t.length;while(++r<i){var a=t[r];e(o,a,n(a),t)}return o}var $i=Zi,Ji=n(82343);function Qi(t,e,n,o){return(0,Ji.A)(t,(function(t,r,i){e(o,t,n(t),i)})),o}var ta=Qi;function ea(t,e){return function(n,o){var r=(0,Kt.A)(n)?$i:ta,i=e?e():{};return r(n,t,(0,mn.A)(o,2),i)}}var na=ea,oa=Object.prototype,ra=oa.hasOwnProperty,ia=na((function(t,e,n){ra.call(t,n)?++t[n]:(0,qi.A)(t,n,1)})),aa=ia;function sa(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}var la=sa,ua=n(64883),ca=(0,ua.A)(!0),da=ca,ha=n(90100);function pa(t,e){return t&&da(t,e,ha.A)}var fa=pa,va=n(28539),ga=(0,va.A)(fa,!0),ya=ga,ma=n(59700);function ba(t,e){var n=(0,Kt.A)(t)?la:ya;return n(t,(0,ma.A)(e))}var xa=ba;function wa(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(!e(t[n],n,t))return!1;return!0}var _a=wa;function Ea(t,e){var n=!0;return(0,Ji.A)(t,(function(t,o,r){return n=!!e(t,o,r),n})),n}var Aa=Ea;function Sa(t,e,n){var o=(0,Kt.A)(t)?_a:Aa;return n&&(0,Xe.A)(t,e,n)&&(e=void 0),o(t,(0,mn.A)(e,3))}var Oa=Sa;function Ca(t,e){var n=[];return(0,Ji.A)(t,(function(t,o,r){e(t,o,r)&&n.push(t)})),n}var Na=Ca;function Ma(t,e){var n=(0,Kt.A)(t)?yi.A:Na;return n(t,(0,mn.A)(e,3))}var Ta=Ma,Pa=n(57603),Da=n(21348),ka=(0,Da.A)(Gn.A),Ra=ka,Ia=n(51793),La=n(45884),ja=1/0;function Ba(t,e){return(0,tn.A)((0,La.A)(t,e),ja)}var Ha=Ba;function Fa(t,e,n){return n=void 0===n?1:(0,Ue.A)(n),(0,tn.A)((0,La.A)(t,e),n)}var za=Fa,Wa=Object.prototype,Ya=Wa.hasOwnProperty,Ga=na((function(t,e,n){Ya.call(t,n)?t[n].push(e):(0,qi.A)(t,n,[e])})),Xa=Ga,Ua=n(20104),Va=n(49378),Ka=n(58408),qa="[object String]";function Za(t){return"string"==typeof t||!(0,Kt.A)(t)&&(0,Ka.A)(t)&&(0,Va.A)(t)==qa}var $a=Za;function Ja(t,e){return(0,ln.A)(e,(function(e){return t[e]}))}var Qa=Ja;function ts(t){return null==t?[]:Qa(t,(0,ha.A)(t))}var es=ts,ns=Math.max;function os(t,e,n,o){t=(0,Ua.A)(t)?t:es(t),n=n&&!o?(0,Ue.A)(n):0;var r=t.length;return n<0&&(n=ns(r+n,0)),$a(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&(0,To.A)(t,e,n)>-1}var rs=os;function is(t,e,n){e=(0,Ko.A)(e,t),t=$o(t,e);var o=null==t?t:t[(0,Jo.A)((0,bn.A)(e))];return null==o?void 0:(0,Ei.A)(o,t,n)}var as=is,ss=(0,fn.A)((function(t,e,n){var o=-1,r="function"==typeof e,i=(0,Ua.A)(t)?Array(t.length):[];return(0,Ji.A)(t,(function(t){i[++o]=r?(0,Ei.A)(e,t,n):as(t,e,n)})),i})),ls=ss,us=na((function(t,e,n){(0,qi.A)(t,n,e)})),cs=us,ds=n(43826);function hs(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}var ps=hs;function fs(t,e,n){var o=-1,r=t.criteria,i=e.criteria,a=r.length,s=n.length;while(++o<a){var l=sr(r[o],i[o]);if(l){if(o>=s)return l;var u=n[o];return l*("desc"==u?-1:1)}}return t.index-e.index}var vs=fs;function gs(t,e,n){e=e.length?(0,ln.A)(e,(function(t){return(0,Kt.A)(t)?function(e){return(0,qo.A)(e,1===t.length?t[0]:t)}:t})):[Sr.A];var o=-1;e=(0,ln.A)(e,(0,un.A)(mn.A));var r=(0,ds.A)(t,(function(t,n,r){var i=(0,ln.A)(e,(function(e){return e(t)}));return{criteria:i,index:++o,value:t}}));return ps(r,(function(t,e){return vs(t,e,n)}))}var ys=gs;function ms(t,e,n,o){return null==t?[]:((0,Kt.A)(e)||(e=null==e?[]:[e]),n=o?void 0:n,(0,Kt.A)(n)||(n=null==n?[]:[n]),ys(t,e,n))}var bs=ms,xs=na((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),ws=xs,_s=n(22714);function Es(t,e,n,o){var r=null==t?0:t.length;o&&r&&(n=t[--r]);while(r--)n=e(n,t[r],r,t);return n}var As=Es,Ss=n(39036);function Os(t,e,n){var o=(0,Kt.A)(t)?As:Ss.A,r=arguments.length<3;return o(t,(0,mn.A)(e,4),n,r,ya)}var Cs=Os,Ns="Expected a function";function Ms(t){if("function"!=typeof t)throw new TypeError(Ns);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var Ts=Ms;function Ps(t,e){var n=(0,Kt.A)(t)?yi.A:Na;return n(t,Ts((0,mn.A)(e,3)))}var Ds=Ps,ks=Math.floor,Rs=Math.random;function Is(t,e){return t+ks(Rs()*(e-t+1))}var Ls=Is;function js(t){var e=t.length;return e?t[Ls(0,e-1)]:void 0}var Bs=js;function Hs(t){return Bs(es(t))}var Fs=Hs;function zs(t){var e=(0,Kt.A)(t)?Bs:Fs;return e(t)}var Ws=zs;function Ys(t,e){var n=-1,o=t.length,r=o-1;e=void 0===e?o:e;while(++n<e){var i=Ls(n,r),a=t[i];t[i]=t[n],t[n]=a}return t.length=e,t}var Gs=Ys;function Xs(t,e){return Gs((0,en.A)(t),In(e,0,t.length))}var Us=Xs;function Vs(t,e){var n=es(t);return Gs(n,In(e,0,n.length))}var Ks=Vs;function qs(t,e,n){e=(n?(0,Xe.A)(t,e,n):void 0===e)?1:(0,Ue.A)(e);var o=(0,Kt.A)(t)?Us:Ks;return o(t,e)}var Zs=qs;function $s(t){return Gs((0,en.A)(t))}var Js=$s;function Qs(t){return Gs(es(t))}var tl=Qs;function el(t){var e=(0,Kt.A)(t)?Js:tl;return e(t)}var nl=el,ol=n(29461),rl=n(24753),il=(0,mi.A)("length"),al=il,sl="\\ud800-\\udfff",ll="\\u0300-\\u036f",ul="\\ufe20-\\ufe2f",cl="\\u20d0-\\u20ff",dl=ll+ul+cl,hl="\\ufe0e\\ufe0f",pl="\\u200d",fl=RegExp("["+pl+sl+dl+hl+"]");function vl(t){return fl.test(t)}var gl=vl,yl="\\ud800-\\udfff",ml="\\u0300-\\u036f",bl="\\ufe20-\\ufe2f",xl="\\u20d0-\\u20ff",wl=ml+bl+xl,_l="\\ufe0e\\ufe0f",El="["+yl+"]",Al="["+wl+"]",Sl="\\ud83c[\\udffb-\\udfff]",Ol="(?:"+Al+"|"+Sl+")",Cl="[^"+yl+"]",Nl="(?:\\ud83c[\\udde6-\\uddff]){2}",Ml="[\\ud800-\\udbff][\\udc00-\\udfff]",Tl="\\u200d",Pl=Ol+"?",Dl="["+_l+"]?",kl="(?:"+Tl+"(?:"+[Cl,Nl,Ml].join("|")+")"+Dl+Pl+")*",Rl=Dl+Pl+kl,Il="(?:"+[Cl+Al+"?",Al,Nl,Ml,El].join("|")+")",Ll=RegExp(Sl+"(?="+Sl+")|"+Il+Rl,"g");function jl(t){var e=Ll.lastIndex=0;while(Ll.test(t))++e;return e}var Bl=jl;function Hl(t){return gl(t)?Bl(t):al(t)}var Fl=Hl,zl="[object Map]",Wl="[object Set]";function Yl(t){if(null==t)return 0;if((0,Ua.A)(t))return $a(t)?Fl(t):t.length;var e=(0,rl.A)(t);return e==zl||e==Wl?t.size:(0,ol.A)(t).length}var Gl=Yl,Xl=n(38210);function Ul(t,e){var n;return(0,Ji.A)(t,(function(t,o,r){return n=e(t,o,r),!n})),!!n}var Vl=Ul;function Kl(t,e,n){var o=(0,Kt.A)(t)?Xl.A:Vl;return n&&(0,Xe.A)(t,e,n)&&(e=void 0),o(t,(0,mn.A)(e,3))}var ql=Kl,Zl=(0,fn.A)((function(t,e){if(null==t)return[];var n=e.length;return n>1&&(0,Xe.A)(t,e[0],e[1])?e=[]:n>2&&(0,Xe.A)(e[0],e[1],e[2])&&(e=[e[0]]),ys(t,(0,tn.A)(e,1),[])})),$l=Zl,Jl={countBy:aa,each:Xt.A,eachRight:xa,every:Oa,filter:Ta,find:Pa.A,findLast:Ra,flatMap:Ia.A,flatMapDeep:Ha,flatMapDepth:za,forEach:Xt.A,forEachRight:xa,groupBy:Xa,includes:rs,invokeMap:ls,keyBy:cs,map:La.A,orderBy:bs,partition:ws,reduce:_s.A,reduceRight:Cs,reject:Ds,sample:Ws,sampleSize:Zs,shuffle:nl,size:Gl,some:ql,sortBy:$l},Ql=n(84882),tu={now:Ql.A},eu="Expected a function";function nu(t,e){if("function"!=typeof e)throw new TypeError(eu);return t=(0,Ue.A)(t),function(){if(--t<1)return e.apply(this,arguments)}}var ou=nu,ru=n(21337),iu=ru.A&&new ru.A,au=iu,su=au?function(t,e){return au.set(t,e),t}:Sr.A,lu=su,uu=n(67966);function cu(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=(0,uu.A)(t.prototype),o=t.apply(n,e);return(0,Ut.A)(o)?o:n}}var du=cu,hu=n(87615),pu=1;function fu(t,e,n){var o=e&pu,r=du(t);function i(){var e=this&&this!==hu.A&&this instanceof i?r:t;return e.apply(o?n:this,arguments)}return i}var vu=fu,gu=Math.max;function yu(t,e,n,o){var r=-1,i=t.length,a=n.length,s=-1,l=e.length,u=gu(i-a,0),c=Array(l+u),d=!o;while(++s<l)c[s]=e[s];while(++r<a)(d||r<i)&&(c[n[r]]=t[r]);while(u--)c[s++]=t[r++];return c}var mu=yu,bu=Math.max;function xu(t,e,n,o){var r=-1,i=t.length,a=-1,s=n.length,l=-1,u=e.length,c=bu(i-s,0),d=Array(c+u),h=!o;while(++r<c)d[r]=t[r];var p=r;while(++l<u)d[p+l]=e[l];while(++a<s)(h||r<i)&&(d[p+n[a]]=t[r++]);return d}var wu=xu;function _u(t,e){var n=t.length,o=0;while(n--)t[n]===e&&++o;return o}var Eu=_u;function Au(){}var Su=Au,Ou=4294967295;function Cu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ou,this.__views__=[]}Cu.prototype=(0,uu.A)(Su.prototype),Cu.prototype.constructor=Cu;var Nu=Cu,Mu=n(33744),Tu=au?function(t){return au.get(t)}:Mu.A,Pu=Tu,Du={},ku=Du,Ru=Object.prototype,Iu=Ru.hasOwnProperty;function Lu(t){var e=t.name+"",n=ku[e],o=Iu.call(ku,e)?n.length:0;while(o--){var r=n[o],i=r.func;if(null==i||i==t)return r.name}return e}var ju=Lu;function Bu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Bu.prototype=(0,uu.A)(Su.prototype),Bu.prototype.constructor=Bu;var Hu=Bu;function Fu(t){if(t instanceof Nu)return t.clone();var e=new Hu(t.__wrapped__,t.__chain__);return e.__actions__=(0,en.A)(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zu=Fu,Wu=Object.prototype,Yu=Wu.hasOwnProperty;function Gu(t){if((0,Ka.A)(t)&&!(0,Kt.A)(t)&&!(t instanceof Nu)){if(t instanceof Hu)return t;if(Yu.call(t,"__wrapped__"))return zu(t)}return new Hu(t)}Gu.prototype=Su.prototype,Gu.prototype.constructor=Gu;var Xu=Gu;function Uu(t){var e=ju(t),n=Xu[e];if("function"!=typeof n||!(e in Nu.prototype))return!1;if(t===n)return!0;var o=Pu(n);return!!o&&t===o[0]}var Vu=Uu,Ku=n(38937),qu=(0,Ku.A)(lu),Zu=qu,$u=/\{\n\/\* \[wrapped with (.+)\] \*/,Ju=/,? & /;function Qu(t){var e=t.match($u);return e?e[1].split(Ju):[]}var tc=Qu,ec=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function nc(t,e){var n=e.length;if(!n)return t;var o=n-1;return e[o]=(n>1?"& ":"")+e[o],e=e.join(n>2?", ":" "),t.replace(ec,"{\n/* [wrapped with "+e+"] */\n")}var oc=nc,rc=n(39929),ic=n(41439),ac=1,sc=2,lc=8,uc=16,cc=32,dc=64,hc=128,pc=256,fc=512,vc=[["ary",hc],["bind",ac],["bindKey",sc],["curry",lc],["curryRight",uc],["flip",fc],["partial",cc],["partialRight",dc],["rearg",pc]];function gc(t,e){return(0,ic.A)(vc,(function(n){var o="_."+n[0];e&n[1]&&!(0,an.A)(t,o)&&t.push(o)})),t.sort()}var yc=gc;function mc(t,e,n){var o=e+"";return(0,rc.A)(t,oc(o,yc(tc(o),n)))}var bc=mc,xc=1,wc=2,_c=4,Ec=8,Ac=32,Sc=64;function Oc(t,e,n,o,r,i,a,s,l,u){var c=e&Ec,d=c?a:void 0,h=c?void 0:a,p=c?i:void 0,f=c?void 0:i;e|=c?Ac:Sc,e&=~(c?Sc:Ac),e&_c||(e&=~(xc|wc));var v=[t,e,r,p,d,f,h,s,l,u],g=n.apply(void 0,v);return Vu(t)&&Zu(g,v),g.placeholder=o,bc(g,t,e)}var Cc=Oc;function Nc(t){var e=t;return e.placeholder}var Mc=Nc,Tc=Math.min;function Pc(t,e){var n=t.length,o=Tc(e.length,n),r=(0,en.A)(t);while(o--){var i=e[o];t[o]=(0,So.A)(i,n)?r[i]:void 0}return t}var Dc=Pc,kc="__lodash_placeholder__";function Rc(t,e){var n=-1,o=t.length,r=0,i=[];while(++n<o){var a=t[n];a!==e&&a!==kc||(t[n]=kc,i[r++]=n)}return i}var Ic=Rc,Lc=1,jc=2,Bc=8,Hc=16,Fc=128,zc=512;function Wc(t,e,n,o,r,i,a,s,l,u){var c=e&Fc,d=e&Lc,h=e&jc,p=e&(Bc|Hc),f=e&zc,v=h?void 0:du(t);function g(){var y=arguments.length,m=Array(y),b=y;while(b--)m[b]=arguments[b];if(p)var x=Mc(g),w=Eu(m,x);if(o&&(m=mu(m,o,r,p)),i&&(m=wu(m,i,a,p)),y-=w,p&&y<u){var _=Ic(m,x);return Cc(t,e,Wc,g.placeholder,n,m,_,s,l,u-y)}var E=d?n:this,A=h?E[t]:t;return y=m.length,s?m=Dc(m,s):f&&y>1&&m.reverse(),c&&l<y&&(m.length=l),this&&this!==hu.A&&this instanceof g&&(A=v||du(A)),A.apply(E,m)}return g}var Yc=Wc;function Gc(t,e,n){var o=du(t);function r(){var i=arguments.length,a=Array(i),s=i,l=Mc(r);while(s--)a[s]=arguments[s];var u=i<3&&a[0]!==l&&a[i-1]!==l?[]:Ic(a,l);if(i-=u.length,i<n)return Cc(t,e,Yc,r.placeholder,void 0,a,u,void 0,void 0,n-i);var c=this&&this!==hu.A&&this instanceof r?o:t;return(0,Ei.A)(c,this,a)}return r}var Xc=Gc,Uc=1;function Vc(t,e,n,o){var r=e&Uc,i=du(t);function a(){var e=-1,s=arguments.length,l=-1,u=o.length,c=Array(u+s),d=this&&this!==hu.A&&this instanceof a?i:t;while(++l<u)c[l]=o[l];while(s--)c[l++]=arguments[++e];return(0,Ei.A)(d,r?n:this,c)}return a}var Kc=Vc,qc="__lodash_placeholder__",Zc=1,$c=2,Jc=4,Qc=8,td=128,ed=256,nd=Math.min;function od(t,e){var n=t[1],o=e[1],r=n|o,i=r<(Zc|$c|td),a=o==td&&n==Qc||o==td&&n==ed&&t[7].length<=e[8]||o==(td|ed)&&e[7].length<=e[8]&&n==Qc;if(!i&&!a)return t;o&Zc&&(t[2]=e[2],r|=n&Zc?0:Jc);var s=e[3];if(s){var l=t[3];t[3]=l?mu(l,s,e[4]):s,t[4]=l?Ic(t[3],qc):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?wu(l,s,e[6]):s,t[6]=l?Ic(t[5],qc):e[6]),s=e[7],s&&(t[7]=s),o&td&&(t[8]=null==t[8]?e[8]:nd(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}var rd=od,id="Expected a function",ad=1,sd=2,ld=8,ud=16,cd=32,dd=64,hd=Math.max;function pd(t,e,n,o,r,i,a,s){var l=e&sd;if(!l&&"function"!=typeof t)throw new TypeError(id);var u=o?o.length:0;if(u||(e&=~(cd|dd),o=r=void 0),a=void 0===a?a:hd((0,Ue.A)(a),0),s=void 0===s?s:(0,Ue.A)(s),u-=r?r.length:0,e&dd){var c=o,d=r;o=r=void 0}var h=l?void 0:Pu(t),p=[t,e,n,o,r,c,d,i,a,s];if(h&&rd(p,h),t=p[0],e=p[1],n=p[2],o=p[3],r=p[4],s=p[9]=void 0===p[9]?l?0:t.length:hd(p[9]-u,0),!s&&e&(ld|ud)&&(e&=~(ld|ud)),e&&e!=ad)f=e==ld||e==ud?Xc(t,e,s):e!=cd&&e!=(ad|cd)||r.length?Yc.apply(void 0,p):Kc(t,e,n,o);else var f=vu(t,e,n);var v=h?lu:Zu;return bc(v(f,p),t,e)}var fd=pd,vd=128;function gd(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,fd(t,vd,void 0,void 0,void 0,void 0,e)}var yd=gd,md="Expected a function";function bd(t,e){var n;if("function"!=typeof e)throw new TypeError(md);return t=(0,Ue.A)(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var xd=bd,wd=1,_d=32,Ed=(0,fn.A)((function(t,e,n){var o=wd;if(n.length){var r=Ic(n,Mc(Ed));o|=_d}return fd(t,o,e,n,r)}));Ed.placeholder={};var Ad=Ed,Sd=1,Od=2,Cd=32,Nd=(0,fn.A)((function(t,e,n){var o=Sd|Od;if(n.length){var r=Ic(n,Mc(Nd));o|=Cd}return fd(e,o,t,n,r)}));Nd.placeholder={};var Md=Nd,Td=8;function Pd(t,e,n){e=n?void 0:e;var o=fd(t,Td,void 0,void 0,void 0,void 0,void 0,e);return o.placeholder=Pd.placeholder,o}Pd.placeholder={};var Dd=Pd,kd=16;function Rd(t,e,n){e=n?void 0:e;var o=fd(t,kd,void 0,void 0,void 0,void 0,void 0,e);return o.placeholder=Rd.placeholder,o}Rd.placeholder={};var Id=Rd,Ld=n(94235),jd="Expected a function";function Bd(t,e,n){if("function"!=typeof t)throw new TypeError(jd);return setTimeout((function(){t.apply(void 0,n)}),e)}var Hd=Bd,Fd=(0,fn.A)((function(t,e){return Hd(t,1,e)})),zd=Fd,Wd=n(66324),Yd=(0,fn.A)((function(t,e,n){return Hd(t,(0,Wd.A)(e)||0,n)})),Gd=Yd,Xd=512;function Ud(t){return fd(t,Xd)}var Vd=Ud,Kd=n(26298);function qd(t){return xd(2,t)}var Zd=qd,$d=fn.A,Jd=$d,Qd=Math.min,th=Jd((function(t,e){e=1==e.length&&(0,Kt.A)(e[0])?(0,ln.A)(e[0],(0,un.A)(mn.A)):(0,ln.A)((0,tn.A)(e,1),(0,un.A)(mn.A));var n=e.length;return(0,fn.A)((function(o){var r=-1,i=Qd(o.length,n);while(++r<i)o[r]=e[r].call(this,o[r]);return(0,Ei.A)(t,this,o)}))})),eh=th,nh=32,oh=(0,fn.A)((function(t,e){var n=Ic(e,Mc(oh));return fd(t,nh,void 0,e,n)}));oh.placeholder={};var rh=oh,ih=64,ah=(0,fn.A)((function(t,e){var n=Ic(e,Mc(ah));return fd(t,ih,void 0,e,n)}));ah.placeholder={};var sh=ah,lh=256,uh=(0,lr.A)((function(t,e){return fd(t,lh,void 0,void 0,void 0,e)})),ch=uh,dh="Expected a function";function hh(t,e){if("function"!=typeof t)throw new TypeError(dh);return e=void 0===e?e:(0,Ue.A)(e),(0,fn.A)(t,e)}var ph=hh;function fh(t,e,n){var o=t.length;return n=void 0===n?o:n,!e&&n>=o?t:Ge(t,e,n)}var vh=fh,gh="Expected a function",yh=Math.max;function mh(t,e){if("function"!=typeof t)throw new TypeError(gh);return e=null==e?0:yh((0,Ue.A)(e),0),(0,fn.A)((function(n){var o=n[e],r=vh(n,0,e);return o&&(0,Qe.A)(r,o),(0,Ei.A)(t,this,r)}))}var bh=mh,xh=n(42068);function wh(t){return yd(t,1)}var _h=wh;function Eh(t,e){return rh((0,ma.A)(e),t)}var Ah=Eh,Sh={after:ou,ary:yd,before:xd,bind:Ad,bindKey:Md,curry:Dd,curryRight:Id,debounce:Ld.A,defer:zd,delay:Gd,flip:Vd,memoize:Kd.A,negate:Ts,once:Zd,overArgs:eh,partial:rh,partialRight:sh,rearg:ch,rest:ph,spread:bh,throttle:xh.A,unary:_h,wrap:Ah},Oh=n(45022),Ch=n(88763),Nh=n(2053),Mh=n(81239),Th=1,Ph=4;function Dh(t,e){return e="function"==typeof e?e:void 0,(0,Mh.A)(t,Th|Ph,e)}var kh=Dh,Rh=4;function Ih(t,e){return e="function"==typeof e?e:void 0,(0,Mh.A)(t,Rh,e)}var Lh=Ih;function jh(t,e,n){var o=n.length;if(null==t)return!o;t=Object(t);while(o--){var r=n[o],i=e[r],a=t[r];if(void 0===a&&!(r in t)||!i(a))return!1}return!0}var Bh=jh;function Hh(t,e){return null==e||Bh(t,e,(0,ha.A)(e))}var Fh=Hh;function zh(t,e){return t>e}var Wh=zh;function Yh(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=(0,Wd.A)(e),n=(0,Wd.A)(n)),t(e,n)}}var Gh=Yh,Xh=Gh(Wh),Uh=Xh,Vh=Gh((function(t,e){return t>=e})),Kh=Vh,qh=n(38280),Zh="[object ArrayBuffer]";function $h(t){return(0,Ka.A)(t)&&(0,Va.A)(t)==Zh}var Jh=$h,Qh=n(80199),tp=Qh.A&&Qh.A.isArrayBuffer,ep=tp?(0,un.A)(tp):Jh,np=ep,op=n(31226),rp=n(79410),ip="[object Date]";function ap(t){return(0,Ka.A)(t)&&(0,Va.A)(t)==ip}var sp=ap,lp=Qh.A&&Qh.A.isDate,up=lp?(0,un.A)(lp):sp,cp=up,dp=n(27181);function hp(t){return(0,Ka.A)(t)&&1===t.nodeType&&!(0,dp.A)(t)}var pp=hp,fp=n(46018),vp=n(79561);function gp(t,e,n){n="function"==typeof n?n:void 0;var o=n?n(t,e):void 0;return void 0===o?(0,vp.A)(t,e,void 0,n):!!o}var yp=gp,mp="[object DOMException]",bp="[object Error]";function xp(t){if(!(0,Ka.A)(t))return!1;var e=(0,Va.A)(t);return e==bp||e==mp||"string"==typeof t.message&&"string"==typeof t.name&&!(0,dp.A)(t)}var wp=xp,_p=hu.A.isFinite;function Ep(t){return"number"==typeof t&&_p(t)}var Ap=Ep,Sp=n(85048);function Op(t){return"number"==typeof t&&t==(0,Ue.A)(t)}var Cp=Op,Np=n(51336),Mp=n(94506),Tp=n(17889),Pp=n(70862);function Dp(t,e){return t===e||(0,Tp.A)(t,e,(0,Pp.A)(e))}var kp=Dp;function Rp(t,e,n){return n="function"==typeof n?n:void 0,(0,Tp.A)(t,e,(0,Pp.A)(e),n)}var Ip=Rp,Lp="[object Number]";function jp(t){return"number"==typeof t||(0,Ka.A)(t)&&(0,Va.A)(t)==Lp}var Bp=jp;function Hp(t){return Bp(t)&&t!=+t}var Fp=Hp,zp=n(77684),Wp=n(4179),Yp=n(81249),Gp=Wp.A?Sp.A:Yp.A,Xp=Gp,Up="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function Vp(t){if(Xp(t))throw new Error(Up);return(0,zp.A)(t)}var Kp=Vp,qp=n(91549),Zp=n(62993),$p="[object RegExp]";function Jp(t){return(0,Ka.A)(t)&&(0,Va.A)(t)==$p}var Qp=Jp,tf=Qh.A&&Qh.A.isRegExp,ef=tf?(0,un.A)(tf):Qp,nf=ef,of=9007199254740991;function rf(t){return Cp(t)&&t>=-of&&t<=of}var af=rf,sf=n(12423),lf=n(3596),uf=n(63546),cf="[object WeakMap]";function df(t){return(0,Ka.A)(t)&&(0,rl.A)(t)==cf}var hf=df,pf="[object WeakSet]";function ff(t){return(0,Ka.A)(t)&&(0,Va.A)(t)==pf}var vf=ff;function gf(t,e){return t<e}var yf=gf,mf=Gh(yf),bf=mf,xf=Gh((function(t,e){return t<=e})),wf=xf,_f=n(79795);function Ef(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}var Af=Ef,Sf=n(86215),Of=n(28789);function Cf(t){return t.split("")}var Nf=Cf,Mf="\\ud800-\\udfff",Tf="\\u0300-\\u036f",Pf="\\ufe20-\\ufe2f",Df="\\u20d0-\\u20ff",kf=Tf+Pf+Df,Rf="\\ufe0e\\ufe0f",If="["+Mf+"]",Lf="["+kf+"]",jf="\\ud83c[\\udffb-\\udfff]",Bf="(?:"+Lf+"|"+jf+")",Hf="[^"+Mf+"]",Ff="(?:\\ud83c[\\udde6-\\uddff]){2}",zf="[\\ud800-\\udbff][\\udc00-\\udfff]",Wf="\\u200d",Yf=Bf+"?",Gf="["+Rf+"]?",Xf="(?:"+Wf+"(?:"+[Hf,Ff,zf].join("|")+")"+Gf+Yf+")*",Uf=Gf+Yf+Xf,Vf="(?:"+[Hf+Lf+"?",Lf,Ff,zf,If].join("|")+")",Kf=RegExp(jf+"(?="+jf+")|"+Vf+Uf,"g");function qf(t){return t.match(Kf)||[]}var Zf=qf;function $f(t){return gl(t)?Zf(t):Nf(t)}var Jf=$f,Qf="[object Map]",tv="[object Set]",ev=_f.A?_f.A.iterator:void 0;function nv(t){if(!t)return[];if((0,Ua.A)(t))return $a(t)?Jf(t):(0,en.A)(t);if(ev&&t[ev])return Af(t[ev]());var e=(0,rl.A)(t),n=e==Qf?Sf.A:e==tv?Of.A:es;return n(t)}var ov=nv,rv=n(96722),iv=n(65166),av=9007199254740991;function sv(t){return t?In((0,Ue.A)(t),-av,av):0===t?t:0}var lv=sv,uv=n(65632),cv={castArray:Oh.A,clone:Ch.A,cloneDeep:Nh.A,cloneDeepWith:kh,cloneWith:Lh,conformsTo:Fh,eq:Rr.A,gt:Uh,gte:Kh,isArguments:qh.A,isArray:Kt.A,isArrayBuffer:np,isArrayLike:Ua.A,isArrayLikeObject:vn.A,isBoolean:op.A,isBuffer:rp.A,isDate:cp,isElement:pp,isEmpty:Vt.A,isEqual:fp.A,isEqualWith:yp,isError:wp,isFinite:Ap,isFunction:Sp.A,isInteger:Cp,isLength:Np.A,isMap:Mp.A,isMatch:kp,isMatchWith:Ip,isNaN:Fp,isNative:Kp,isNil:qp.A,isNull:Zp.A,isNumber:Bp,isObject:Ut.A,isObjectLike:Ka.A,isPlainObject:dp.A,isRegExp:nf,isSafeInteger:af,isSet:sf.A,isString:$a,isSymbol:ir.A,isTypedArray:lf.A,isUndefined:uf.A,isWeakMap:hf,isWeakSet:vf,lt:bf,lte:wf,toArray:ov,toFinite:rv.A,toInteger:Ue.A,toLength:Bn,toNumber:Wd.A,toPlainObject:iv.A,toSafeInteger:lv,toString:uv.A},dv=NaN;function hv(t){return"number"==typeof t?t:(0,ir.A)(t)?dv:+t}var pv=hv,fv=n(40710);function vv(t,e){return function(n,o){var r;if(void 0===n&&void 0===o)return e;if(void 0!==n&&(r=n),void 0!==o){if(void 0===r)return o;"string"==typeof n||"string"==typeof o?(n=(0,fv.A)(n),o=(0,fv.A)(o)):(n=pv(n),o=pv(o)),r=t(n,o)}return r}}var gv=vv,yv=gv((function(t,e){return t+e}),0),mv=yv,bv=hu.A.isFinite,xv=Math.min;function wv(t){var e=Math[t];return function(t,n){if(t=(0,Wd.A)(t),n=null==n?0:xv((0,Ue.A)(n),292),n&&bv(t)){var o=((0,uv.A)(t)+"e").split("e"),r=e(o[0]+"e"+(+o[1]+n));return o=((0,uv.A)(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return e(t)}}var _v=wv,Ev=_v("ceil"),Av=Ev,Sv=gv((function(t,e){return t/e}),1),Ov=Sv,Cv=_v("floor"),Nv=Cv;function Mv(t,e,n){var o=-1,r=t.length;while(++o<r){var i=t[o],a=e(i);if(null!=a&&(void 0===s?a===a&&!(0,ir.A)(a):n(a,s)))var s=a,l=i}return l}var Tv=Mv;function Pv(t){return t&&t.length?Tv(t,Sr.A,Wh):void 0}var Dv=Pv;function kv(t,e){return t&&t.length?Tv(t,(0,mn.A)(e,2),Wh):void 0}var Rv=kv;function Iv(t,e){var n,o=-1,r=t.length;while(++o<r){var i=e(t[o]);void 0!==i&&(n=void 0===n?i:n+i)}return n}var Lv=Iv,jv=NaN;function Bv(t,e){var n=null==t?0:t.length;return n?Lv(t,e)/n:jv}var Hv=Bv;function Fv(t){return Hv(t,Sr.A)}var zv=Fv;function Wv(t,e){return Hv(t,(0,mn.A)(e,2))}var Yv=Wv;function Gv(t){return t&&t.length?Tv(t,Sr.A,yf):void 0}var Xv=Gv;function Uv(t,e){return t&&t.length?Tv(t,(0,mn.A)(e,2),yf):void 0}var Vv=Uv,Kv=gv((function(t,e){return t*e}),1),qv=Kv,Zv=_v("round"),$v=Zv,Jv=gv((function(t,e){return t-e}),0),Qv=Jv;function tg(t){return t&&t.length?Lv(t,Sr.A):0}var eg=tg;function ng(t,e){return t&&t.length?Lv(t,(0,mn.A)(e,2)):0}var og=ng,rg={add:mv,ceil:Av,divide:Ov,floor:Nv,max:Dv,maxBy:Rv,mean:zv,meanBy:Yv,min:Xv,minBy:Vv,multiply:qv,round:$v,subtract:Qv,sum:eg,sumBy:og};function ig(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(0,Wd.A)(n),n=n===n?n:0),void 0!==e&&(e=(0,Wd.A)(e),e=e===e?e:0),In((0,Wd.A)(t),e,n)}var ag=ig,sg=Math.max,lg=Math.min;function ug(t,e,n){return t>=lg(e,n)&&t<sg(e,n)}var cg=ug;function dg(t,e,n){return e=(0,rv.A)(e),void 0===n?(n=e,e=0):n=(0,rv.A)(n),t=(0,Wd.A)(t),cg(t,e,n)}var hg=dg,pg=parseFloat,fg=Math.min,vg=Math.random;function gg(t,e,n){if(n&&"boolean"!=typeof n&&(0,Xe.A)(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=(0,rv.A)(t),void 0===e?(e=t,t=0):e=(0,rv.A)(e)),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var r=vg();return fg(t+r*(e-t+pg("1e-"+((r+"").length-1))),e)}return Ls(t,e)}var yg=gg,mg={clamp:ag,inRange:hg,random:yg},bg=n(59489),xg=n(63413),wg=n(95745),_g=n(61189),Eg=(0,wg.A)((function(t,e){(0,xg.A)(e,(0,_g.A)(e),t)})),Ag=Eg,Sg=(0,wg.A)((function(t,e,n,o){(0,xg.A)(e,(0,_g.A)(e),t,o)})),Og=Sg,Cg=(0,wg.A)((function(t,e,n,o){(0,xg.A)(e,(0,ha.A)(e),t,o)})),Ng=Cg,Mg=(0,lr.A)(Vo),Tg=Mg,Pg=n(86491);function Dg(t,e){var n=(0,uu.A)(t);return null==e?n:(0,Pg.A)(n,e)}var kg=Dg,Rg=Object.prototype,Ig=Rg.hasOwnProperty,Lg=(0,fn.A)((function(t,e){t=Object(t);var n=-1,o=e.length,r=o>2?e[2]:void 0;r&&(0,Xe.A)(e[0],e[1],r)&&(o=1);while(++n<o){var i=e[n],a=(0,_g.A)(i),s=-1,l=a.length;while(++s<l){var u=a[s],c=t[u];(void 0===c||(0,Rr.A)(c,Rg[u])&&!Ig.call(t,u))&&(t[u]=i[u])}}return t})),jg=Lg,Bg=n(52827);function Hg(t,e,n,o,r,i){return(0,Ut.A)(t)&&(0,Ut.A)(e)&&(i.set(e,t),(0,Bg.A)(t,e,void 0,Hg,i),i["delete"](e)),t}var Fg=Hg,zg=(0,wg.A)((function(t,e,n,o){(0,Bg.A)(t,e,n,o)})),Wg=zg,Yg=(0,fn.A)((function(t){return t.push(void 0,Fg),(0,Ei.A)(Wg,void 0,t)})),Gg=Yg,Xg=n(28984),Ug=n(72843),Vg=(0,Ug.A)(_g.A),Kg=Vg;function qg(t,e,n){var o;return n(t,(function(t,n,r){if(e(t,n,r))return o=n,!1})),o}var Zg=qg,$g=n(6911);function Jg(t,e){return Zg(t,(0,mn.A)(e,3),$g.A)}var Qg=Jg;function ty(t,e){return Zg(t,(0,mn.A)(e,3),fa)}var ey=ty,ny=n(27903);function oy(t,e){return null==t?t:(0,ny.A)(t,(0,ma.A)(e),_g.A)}var ry=oy;function iy(t,e){return null==t?t:da(t,(0,ma.A)(e),_g.A)}var ay=iy;function sy(t,e){return t&&(0,$g.A)(t,(0,ma.A)(e))}var ly=sy;function uy(t,e){return t&&fa(t,(0,ma.A)(e))}var cy=uy;function dy(t,e){return(0,yi.A)(e,(function(e){return(0,Sp.A)(t[e])}))}var hy=dy;function py(t){return null==t?[]:hy(t,(0,ha.A)(t))}var fy=py;function vy(t){return null==t?[]:hy(t,(0,_g.A)(t))}var gy=vy,yy=n(28023),my=n(28086),by=n(51016);function xy(t,e,n,o){return(0,$g.A)(t,(function(t,r,i){e(o,n(t),r,i)})),o}var wy=xy;function _y(t,e){return function(n,o){return wy(n,t,e(o),{})}}var Ey=_y,Ay=Object.prototype,Sy=Ay.toString,Oy=Ey((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Sy.call(e)),t[e]=n}),(0,by.A)(Sr.A)),Cy=Oy,Ny=Object.prototype,My=Ny.hasOwnProperty,Ty=Ny.toString,Py=Ey((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ty.call(e)),My.call(t,e)?t[e].push(n):t[e]=[n]}),mn.A),Dy=Py,ky=(0,fn.A)(as),Ry=ky,Iy=n(30596);function Ly(t,e){var n={};return e=(0,mn.A)(e,3),(0,$g.A)(t,(function(t,o,r){(0,qi.A)(n,o,e(t,o,r))})),n}var jy=Ly,By=n(95550);function Hy(t){return(0,dp.A)(t)?void 0:t}var Fy=Hy,zy=n(27995),Wy=1,Yy=2,Gy=4,Xy=(0,lr.A)((function(t,e){var n={};if(null==t)return n;var o=!1;e=(0,ln.A)(e,(function(e){return e=(0,Ko.A)(e,t),o||(o=e.length>1),e})),(0,xg.A)(t,(0,zy.A)(t),n),o&&(n=(0,Mh.A)(n,Wy|Yy|Gy,Fy));var r=e.length;while(r--)tr(n,e[r]);return n})),Uy=Xy,Vy=n(37262);function Ky(t,e){if(null==t)return{};var n=(0,ln.A)((0,zy.A)(t),(function(t){return[t]}));return e=(0,mn.A)(e),(0,Vy.A)(t,n,(function(t,n){return e(t,n[0])}))}var qy=Ky;function Zy(t,e){return qy(t,Ts((0,mn.A)(e)))}var $y=Zy,Jy=n(56812);function Qy(t,e,n){e=(0,Ko.A)(e,t);var o=-1,r=e.length;r||(r=1,t=void 0);while(++o<r){var i=null==t?void 0:t[(0,Jo.A)(e[o])];void 0===i&&(o=r,i=n),t=(0,Sp.A)(i)?i.call(t):i}return t}var tm=Qy,em=n(32062);function nm(t,e,n,o){return o="function"==typeof o?o:void 0,null==t?t:(0,Yi.A)(t,e,n,o)}var om=nm,rm=n(75989);function im(t,e,n){var o=(0,Kt.A)(t),r=o||(0,rp.A)(t)||(0,lf.A)(t);if(e=(0,mn.A)(e,4),null==n){var i=t&&t.constructor;n=r?o?new i:[]:(0,Ut.A)(t)&&(0,Sp.A)(i)?(0,uu.A)((0,rm.A)(t)):{}}return(r?ic.A:$g.A)(t,(function(t,o,r){return e(n,t,o,r)})),n}var am=im;function sm(t,e){return null==t||tr(t,e)}var lm=sm;function um(t,e,n,o){return(0,Yi.A)(t,e,n((0,qo.A)(t,e)),o)}var cm=um;function dm(t,e,n){return null==t?t:cm(t,e,(0,ma.A)(n))}var hm=dm;function pm(t,e,n,o){return o="function"==typeof o?o:void 0,null==t?t:cm(t,e,(0,ma.A)(n),o)}var fm=pm;function vm(t){return null==t?[]:Qa(t,(0,_g.A)(t))}var gm=vm,ym={assign:bg.A,assignIn:Ag,assignInWith:Og,assignWith:Ng,at:Tg,create:kg,defaults:jg,defaultsDeep:Gg,entries:Xg.A,entriesIn:Kg,extend:Ag,extendWith:Og,findKey:Qg,findLastKey:ey,forIn:ry,forInRight:ay,forOwn:ly,forOwnRight:cy,functions:fy,functionsIn:gy,get:Xo.A,has:yy.A,hasIn:my.A,invert:Cy,invertBy:Dy,invoke:Ry,keys:ha.A,keysIn:_g.A,mapKeys:Iy.A,mapValues:jy,merge:By.A,mergeWith:Wg,omit:Uy,omitBy:$y,pick:Jy.A,pickBy:qy,result:tm,set:em.A,setWith:om,toPairs:Xg.A,toPairsIn:Kg,transform:am,unset:lm,update:hm,updateWith:fm,values:es,valuesIn:gm};function mm(t,e){return e(t)}var bm=mm,xm=(0,lr.A)((function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,r=function(e){return Vo(e,t)};return!(e>1||this.__actions__.length)&&o instanceof Nu&&(0,So.A)(n)?(o=o.slice(n,+n+(e?1:0)),o.__actions__.push({func:bm,args:[r],thisArg:void 0}),new Hu(o,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)})),wm=xm;function _m(t){var e=Xu(t);return e.__chain__=!0,e}var Em=_m;function Am(){return new Hu(this.value(),this.__chain__)}var Sm=Am;function Om(){void 0===this.__values__&&(this.__values__=ov(this.value()));var t=this.__index__>=this.__values__.length,e=t?void 0:this.__values__[this.__index__++];return{done:t,value:e}}var Cm=Om;function Nm(t){var e,n=this;while(n instanceof Su){var o=zu(n);o.__index__=0,o.__values__=void 0,e?r.__wrapped__=o:e=o;var r=o;n=n.__wrapped__}return r.__wrapped__=t,e}var Mm=Nm;function Tm(){var t=this.__wrapped__;if(t instanceof Nu){var e=t;return this.__actions__.length&&(e=new Nu(this)),e=e.reverse(),e.__actions__.push({func:bm,args:[gr],thisArg:void 0}),new Hu(e,this.__chain__)}return this.thru(gr)}var Pm=Tm;function Dm(t,e){return e(t),t}var km=Dm;function Rm(){return this}var Im=Rm,Lm=n(22980);function jm(t,e){var n=t;return n instanceof Nu&&(n=n.value()),(0,Lm.A)(e,(function(t,e){return e.func.apply(e.thisArg,(0,Qe.A)([t],e.args))}),n)}var Bm=jm;function Hm(){return Bm(this.__wrapped__,this.__actions__)}var Fm=Hm;function zm(){return Em(this)}var Wm=zm,Ym={at:wm,chain:Em,commit:Sm,lodash:Xu,next:Cm,plant:Mm,reverse:Pm,tap:km,thru:bm,toIterator:Im,toJSON:Fm,value:Fm,valueOf:Fm,wrapperChain:Wm};function Gm(t){return function(e){e=(0,uv.A)(e);var n=gl(e)?Jf(e):void 0,o=n?n[0]:e.charAt(0),r=n?vh(n,1).join(""):e.slice(1);return o[t]()+r}}var Xm=Gm,Um=Xm("toUpperCase"),Vm=Um;function Km(t){return Vm((0,uv.A)(t).toLowerCase())}var qm=Km;function Zm(t){return function(e){return null==t?void 0:t[e]}}var $m=Zm,Jm={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Qm=$m(Jm),tb=Qm,eb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nb="\\u0300-\\u036f",ob="\\ufe20-\\ufe2f",rb="\\u20d0-\\u20ff",ib=nb+ob+rb,ab="["+ib+"]",sb=RegExp(ab,"g");function lb(t){return t=(0,uv.A)(t),t&&t.replace(eb,tb).replace(sb,"")}var ub=lb,cb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function db(t){return t.match(cb)||[]}var hb=db,pb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function fb(t){return pb.test(t)}var vb=fb,gb="\\ud800-\\udfff",yb="\\u0300-\\u036f",mb="\\ufe20-\\ufe2f",bb="\\u20d0-\\u20ff",xb=yb+mb+bb,wb="\\u2700-\\u27bf",_b="a-z\\xdf-\\xf6\\xf8-\\xff",Eb="\\xac\\xb1\\xd7\\xf7",Ab="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sb="\\u2000-\\u206f",Ob=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cb="A-Z\\xc0-\\xd6\\xd8-\\xde",Nb="\\ufe0e\\ufe0f",Mb=Eb+Ab+Sb+Ob,Tb="[']",Pb="["+Mb+"]",Db="["+xb+"]",kb="\\d+",Rb="["+wb+"]",Ib="["+_b+"]",Lb="[^"+gb+Mb+kb+wb+_b+Cb+"]",jb="\\ud83c[\\udffb-\\udfff]",Bb="(?:"+Db+"|"+jb+")",Hb="[^"+gb+"]",Fb="(?:\\ud83c[\\udde6-\\uddff]){2}",zb="[\\ud800-\\udbff][\\udc00-\\udfff]",Wb="["+Cb+"]",Yb="\\u200d",Gb="(?:"+Ib+"|"+Lb+")",Xb="(?:"+Wb+"|"+Lb+")",Ub="(?:"+Tb+"(?:d|ll|m|re|s|t|ve))?",Vb="(?:"+Tb+"(?:D|LL|M|RE|S|T|VE))?",Kb=Bb+"?",qb="["+Nb+"]?",Zb="(?:"+Yb+"(?:"+[Hb,Fb,zb].join("|")+")"+qb+Kb+")*",$b="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qb=qb+Kb+Zb,tx="(?:"+[Rb,Fb,zb].join("|")+")"+Qb,ex=RegExp([Wb+"?"+Ib+"+"+Ub+"(?="+[Pb,Wb,"$"].join("|")+")",Xb+"+"+Vb+"(?="+[Pb,Wb+Gb,"$"].join("|")+")",Wb+"?"+Gb+"+"+Ub,Wb+"+"+Vb,Jb,$b,kb,tx].join("|"),"g");function nx(t){return t.match(ex)||[]}var ox=nx;function rx(t,e,n){return t=(0,uv.A)(t),e=n?void 0:e,void 0===e?vb(t)?ox(t):hb(t):t.match(e)||[]}var ix=rx,ax="[']",sx=RegExp(ax,"g");function lx(t){return function(e){return(0,Lm.A)(ix(ub(e).replace(sx,"")),t,"")}}var ux=lx,cx=ux((function(t,e,n){return e=e.toLowerCase(),t+(n?qm(e):e)})),dx=cx;function hx(t,e,n){t=(0,uv.A)(t),e=(0,fv.A)(e);var o=t.length;n=void 0===n?o:In((0,Ue.A)(n),0,o);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}var px=hx,fx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vx=$m(fx),gx=vx,yx=/[&<>"']/g,mx=RegExp(yx.source);function bx(t){return t=(0,uv.A)(t),t&&mx.test(t)?t.replace(yx,gx):t}var xx=bx,wx=/[\\^$.*+?()[\]{}|]/g,_x=RegExp(wx.source);function Ex(t){return t=(0,uv.A)(t),t&&_x.test(t)?t.replace(wx,"\\$&"):t}var Ax=Ex,Sx=ux((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ox=Sx,Cx=ux((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Nx=Cx,Mx=Xm("toLowerCase"),Tx=Mx,Px=9007199254740991,Dx=Math.floor;function kx(t,e){var n="";if(!t||e<1||e>Px)return n;do{e%2&&(n+=t),e=Dx(e/2),e&&(t+=t)}while(e);return n}var Rx=kx,Ix=Math.ceil;function Lx(t,e){e=void 0===e?" ":(0,fv.A)(e);var n=e.length;if(n<2)return n?Rx(e,t):e;var o=Rx(e,Ix(t/Fl(e)));return gl(e)?vh(Jf(o),0,t).join(""):o.slice(0,t)}var jx=Lx,Bx=Math.ceil,Hx=Math.floor;function Fx(t,e,n){t=(0,uv.A)(t),e=(0,Ue.A)(e);var o=e?Fl(t):0;if(!e||o>=e)return t;var r=(e-o)/2;return jx(Hx(r),n)+t+jx(Bx(r),n)}var zx=Fx;function Wx(t,e,n){t=(0,uv.A)(t),e=(0,Ue.A)(e);var o=e?Fl(t):0;return e&&o<e?t+jx(e-o,n):t}var Yx=Wx;function Gx(t,e,n){t=(0,uv.A)(t),e=(0,Ue.A)(e);var o=e?Fl(t):0;return e&&o<e?jx(e-o,n)+t:t}var Xx=Gx,Ux=/^\s+/,Vx=hu.A.parseInt;function Kx(t,e,n){return n||null==e?e=0:e&&(e=+e),Vx((0,uv.A)(t).replace(Ux,""),e||0)}var qx=Kx;function Zx(t,e,n){return e=(n?(0,Xe.A)(t,e,n):void 0===e)?1:(0,Ue.A)(e),Rx((0,uv.A)(t),e)}var $x=Zx;function Jx(){var t=arguments,e=(0,uv.A)(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Qx=Jx,tw=ux((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),ew=tw,nw=4294967295;function ow(t,e,n){return n&&"number"!=typeof n&&(0,Xe.A)(t,e,n)&&(e=n=void 0),n=void 0===n?nw:n>>>0,n?(t=(0,uv.A)(t),t&&("string"==typeof e||null!=e&&!nf(e))&&(e=(0,fv.A)(e),!e&&gl(t))?vh(Jf(t),0,n):t.split(e,n)):[]}var rw=ow,iw=ux((function(t,e,n){return t+(n?" ":"")+Vm(e)})),aw=iw;function sw(t,e,n){return t=(0,uv.A)(t),n=null==n?0:In((0,Ue.A)(n),0,t.length),e=(0,fv.A)(e),t.slice(n,n+e.length)==e}var lw=sw,uw=(0,fn.A)((function(t,e){try{return(0,Ei.A)(t,void 0,e)}catch(n){return wp(n)?n:new Error(n)}})),cw=uw,dw=Object.prototype,hw=dw.hasOwnProperty;function pw(t,e,n,o){return void 0===t||(0,Rr.A)(t,dw[n])&&!hw.call(o,n)?e:t}var fw=pw,vw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function gw(t){return"\\"+vw[t]}var yw=gw,mw=/<%=([\s\S]+?)%>/g,bw=mw,xw=/<%-([\s\S]+?)%>/g,ww=xw,_w=/<%([\s\S]+?)%>/g,Ew=_w,Aw={escape:ww,evaluate:Ew,interpolate:bw,variable:"",imports:{_:{escape:xx}}},Sw=Aw,Ow="Invalid `variable` option passed into `_.template`",Cw=/\b__p \+= '';/g,Nw=/\b(__p \+=) '' \+/g,Mw=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tw=/[()=,{}\[\]\/\s]/,Pw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dw=/($^)/,kw=/['\n\r\u2028\u2029\\]/g,Rw=Object.prototype,Iw=Rw.hasOwnProperty;function Lw(t,e,n){var o=Sw.imports._.templateSettings||Sw;n&&(0,Xe.A)(t,e,n)&&(e=void 0),t=(0,uv.A)(t),e=Og({},e,o,fw);var r,i,a=Og({},e.imports,o.imports,fw),s=(0,ha.A)(a),l=Qa(a,s),u=0,c=e.interpolate||Dw,d="__p += '",h=RegExp((e.escape||Dw).source+"|"+c.source+"|"+(c===bw?Pw:Dw).source+"|"+(e.evaluate||Dw).source+"|$","g"),p=Iw.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(h,(function(e,n,o,a,s,l){return o||(o=a),d+=t.slice(u,l).replace(kw,yw),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),o&&(d+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var f=Iw.call(e,"variable")&&e.variable;if(f){if(Tw.test(f))throw new Error(Ow)}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(Cw,""):d).replace(Nw,"$1").replace(Mw,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=cw((function(){return Function(s,p+"return "+d).apply(void 0,l)}));if(v.source=d,wp(v))throw v;return v}var jw=Lw;function Bw(t){return(0,uv.A)(t).toLowerCase()}var Hw=Bw;function Fw(t){return(0,uv.A)(t).toUpperCase()}var zw=Fw,Ww=n(67930);function Yw(t,e){var n=t.length;while(n--&&(0,To.A)(e,t[n],0)>-1);return n}var Gw=Yw;function Xw(t,e){var n=-1,o=t.length;while(++n<o&&(0,To.A)(e,t[n],0)>-1);return n}var Uw=Xw;function Vw(t,e,n){if(t=(0,uv.A)(t),t&&(n||void 0===e))return(0,Ww.A)(t);if(!t||!(e=(0,fv.A)(e)))return t;var o=Jf(t),r=Jf(e),i=Uw(o,r),a=Gw(o,r)+1;return vh(o,i,a).join("")}var Kw=Vw,qw=n(14806);function Zw(t,e,n){if(t=(0,uv.A)(t),t&&(n||void 0===e))return t.slice(0,(0,qw.A)(t)+1);if(!t||!(e=(0,fv.A)(e)))return t;var o=Jf(t),r=Gw(o,Jf(e))+1;return vh(o,0,r).join("")}var $w=Zw,Jw=/^\s+/;function Qw(t,e,n){if(t=(0,uv.A)(t),t&&(n||void 0===e))return t.replace(Jw,"");if(!t||!(e=(0,fv.A)(e)))return t;var o=Jf(t),r=Uw(o,Jf(e));return vh(o,r).join("")}var t_=Qw,e_=30,n_="...",o_=/\w*$/;function r_(t,e){var n=e_,o=n_;if((0,Ut.A)(e)){var r="separator"in e?e.separator:r;n="length"in e?(0,Ue.A)(e.length):n,o="omission"in e?(0,fv.A)(e.omission):o}t=(0,uv.A)(t);var i=t.length;if(gl(t)){var a=Jf(t);i=a.length}if(n>=i)return t;var s=n-Fl(o);if(s<1)return o;var l=a?vh(a,0,s).join(""):t.slice(0,s);if(void 0===r)return l+o;if(a&&(s+=l.length-s),nf(r)){if(t.slice(s).search(r)){var u,c=l;r.global||(r=RegExp(r.source,(0,uv.A)(o_.exec(r))+"g")),r.lastIndex=0;while(u=r.exec(c))var d=u.index;l=l.slice(0,void 0===d?s:d)}}else if(t.indexOf((0,fv.A)(r),s)!=s){var h=l.lastIndexOf(r);h>-1&&(l=l.slice(0,h))}return l+o}var i_=r_,a_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s_=$m(a_),l_=s_,u_=/&(?:amp|lt|gt|quot|#39);/g,c_=RegExp(u_.source);function d_(t){return t=(0,uv.A)(t),t&&c_.test(t)?t.replace(u_,l_):t}var h_=d_,p_=ux((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),f_=p_,v_={camelCase:dx,capitalize:qm,deburr:ub,endsWith:px,escape:xx,escapeRegExp:Ax,kebabCase:Ox,lowerCase:Nx,lowerFirst:Tx,pad:zx,padEnd:Yx,padStart:Xx,parseInt:qx,repeat:$x,replace:Qx,snakeCase:ew,split:rw,startCase:aw,startsWith:lw,template:jw,templateSettings:Sw,toLower:Hw,toUpper:zw,trim:Kw,trimEnd:$w,trimStart:t_,truncate:i_,unescape:h_,upperCase:f_,upperFirst:Vm,words:ix},g_=(0,lr.A)((function(t,e){return(0,ic.A)(e,(function(e){e=(0,Jo.A)(e),(0,qi.A)(t,e,Ad(t[e],t))})),t})),y_=g_,m_="Expected a function";function b_(t){var e=null==t?0:t.length,n=mn.A;return t=e?(0,ln.A)(t,(function(t){if("function"!=typeof t[1])throw new TypeError(m_);return[n(t[0]),t[1]]})):[],(0,fn.A)((function(n){var o=-1;while(++o<e){var r=t[o];if((0,Ei.A)(r[0],this,n))return(0,Ei.A)(r[1],this,n)}}))}var x_=b_;function w_(t){var e=(0,ha.A)(t);return function(n){return Bh(n,t,e)}}var __=w_,E_=1;function A_(t){return __((0,Mh.A)(t,E_))}var S_=A_;function O_(t,e){return null==t||t!==t?e:t}var C_=O_,N_="Expected a function",M_=8,T_=32,P_=128,D_=256;function k_(t){return(0,lr.A)((function(e){var n=e.length,o=n,r=Hu.prototype.thru;t&&e.reverse();while(o--){var i=e[o];if("function"!=typeof i)throw new TypeError(N_);if(r&&!a&&"wrapper"==ju(i))var a=new Hu([],!0)}o=a?o:n;while(++o<n){i=e[o];var s=ju(i),l="wrapper"==s?Pu(i):void 0;a=l&&Vu(l[0])&&l[1]==(P_|M_|T_|D_)&&!l[4].length&&1==l[9]?a[ju(l[0])].apply(a,l[3]):1==i.length&&Vu(i)?a[s]():a.thru(i)}return function(){var t=arguments,o=t[0];if(a&&1==t.length&&(0,Kt.A)(o))return a.plant(o).value();var r=0,i=n?e[r].apply(this,t):o;while(++r<n)i=e[r].call(this,i);return i}}))}var R_=k_,I_=R_(),L_=I_,j_=R_(!0),B_=j_,H_=1;function F_(t){return(0,mn.A)("function"==typeof t?t:(0,Mh.A)(t,H_))}var z_=F_,W_=n(70785),Y_=1;function G_(t){return(0,W_.A)((0,Mh.A)(t,Y_))}var X_=G_,U_=n(20464),V_=1;function K_(t,e){return(0,U_.A)(t,(0,Mh.A)(e,V_))}var q_=K_,Z_=(0,fn.A)((function(t,e){return function(n){return as(n,t,e)}})),$_=Z_,J_=(0,fn.A)((function(t,e){return function(n){return as(t,n,e)}})),Q_=J_;function tE(t,e,n){var o=(0,ha.A)(e),r=hy(e,o),i=!((0,Ut.A)(n)&&"chain"in n)||!!n.chain,a=(0,Sp.A)(t);return(0,ic.A)(r,(function(n){var o=e[n];t[n]=o,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),r=n.__actions__=(0,en.A)(this.__actions__);return r.push({func:o,args:arguments,thisArg:t}),n.__chain__=e,n}return o.apply(t,(0,Qe.A)([this.value()],arguments))})})),t}var eE=tE;function nE(t){return t=(0,Ue.A)(t),(0,fn.A)((function(e){return Co(e,t)}))}var oE=nE;function rE(t){return(0,lr.A)((function(e){return e=(0,ln.A)(e,(0,un.A)(mn.A)),(0,fn.A)((function(n){var o=this;return t(e,(function(t){return(0,Ei.A)(t,o,n)}))}))}))}var iE=rE,aE=iE(ln.A),sE=aE,lE=iE(_a),uE=lE,cE=iE(Xl.A),dE=cE,hE=n(10201);function pE(t){return function(e){return null==t?void 0:(0,qo.A)(t,e)}}var fE=pE,vE=Math.ceil,gE=Math.max;function yE(t,e,n,o){var r=-1,i=gE(vE((e-t)/(n||1)),0),a=Array(i);while(i--)a[o?i:++r]=t,t+=n;return a}var mE=yE;function bE(t){return function(e,n,o){return o&&"number"!=typeof o&&(0,Xe.A)(e,n,o)&&(n=o=void 0),e=(0,rv.A)(e),void 0===n?(n=e,e=0):n=(0,rv.A)(n),o=void 0===o?e<n?1:-1:(0,rv.A)(o),mE(e,n,o,t)}}var xE=bE,wE=xE(),_E=wE,EE=xE(!0),AE=EE,SE=n(54131);function OE(){return{}}var CE=OE;function NE(){return""}var ME=NE;function TE(){return!0}var PE=TE,DE=9007199254740991,kE=4294967295,RE=Math.min;function IE(t,e){if(t=(0,Ue.A)(t),t<1||t>DE)return[];var n=kE,o=RE(t,kE);e=(0,ma.A)(e),t-=kE;var r=(0,bi.A)(o,e);while(++n<t)e(n);return r}var LE=IE,jE=n(44321);function BE(t){return(0,Kt.A)(t)?(0,ln.A)(t,Jo.A):(0,ir.A)(t)?[t]:(0,en.A)((0,jE.A)((0,uv.A)(t)))}var HE=BE,FE=0;function zE(t){var e=++FE;return(0,uv.A)(t)+e}var WE=zE,YE={attempt:cw,bindAll:y_,cond:x_,conforms:S_,constant:by.A,defaultTo:C_,flow:L_,flowRight:B_,identity:Sr.A,iteratee:z_,matches:X_,matchesProperty:q_,method:$_,methodOf:Q_,mixin:eE,noop:Mu.A,nthArg:oE,over:sE,overEvery:uE,overSome:dE,property:hE.A,propertyOf:fE,range:_E,rangeRight:AE,stubArray:SE.A,stubFalse:Yp.A,stubObject:CE,stubString:ME,stubTrue:PE,times:LE,toPath:HE,uniqueId:WE};function GE(){var t=new Nu(this.__wrapped__);return t.__actions__=(0,en.A)(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=(0,en.A)(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=(0,en.A)(this.__views__),t}var XE=GE;function UE(){if(this.__filtered__){var t=new Nu(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}var VE=UE,KE=Math.max,qE=Math.min;function ZE(t,e,n){var o=-1,r=n.length;while(++o<r){var i=n[o],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=qE(e,t+a);break;case"takeRight":t=KE(t,e-a);break}}return{start:t,end:e}}var $E=ZE,JE=1,QE=2,tA=Math.min;function eA(){var t=this.__wrapped__.value(),e=this.__dir__,n=(0,Kt.A)(t),o=e<0,r=n?t.length:0,i=$E(0,r,this.__views__),a=i.start,s=i.end,l=s-a,u=o?s:a-1,c=this.__iteratees__,d=c.length,h=0,p=tA(l,this.__takeCount__);if(!n||!o&&r==l&&p==l)return Bm(t,this.__actions__);var f=[];t:while(l--&&h<p){u+=e;var v=-1,g=t[u];while(++v<d){var y=c[v],m=y.iteratee,b=y.type,x=m(g);if(b==QE)g=x;else if(!x){if(b==JE)continue t;break t}}f[h++]=g}return f}var nA=eA,oA="4.17.21",rA=2,iA=1,aA=3,sA=4294967295,lA=Array.prototype,uA=Object.prototype,cA=uA.hasOwnProperty,dA=_f.A?_f.A.iterator:void 0,hA=Math.max,pA=Math.min,fA=function(t){return function(e,n,o){if(null==o){var r=(0,Ut.A)(n),i=r&&(0,ha.A)(n),a=i&&i.length&&hy(n,i);(a?a.length:r)||(o=n,n=e,e=this)}return t(e,n,o)}}(eE);Xu.after=Sh.after,Xu.ary=Sh.ary,Xu.assign=ym.assign,Xu.assignIn=ym.assignIn,Xu.assignInWith=ym.assignInWith,Xu.assignWith=ym.assignWith,Xu.at=ym.at,Xu.before=Sh.before,Xu.bind=Sh.bind,Xu.bindAll=YE.bindAll,Xu.bindKey=Sh.bindKey,Xu.castArray=cv.castArray,Xu.chain=Ym.chain,Xu.chunk=Ki.chunk,Xu.compact=Ki.compact,Xu.concat=Ki.concat,Xu.cond=YE.cond,Xu.conforms=YE.conforms,Xu.constant=YE.constant,Xu.countBy=Jl.countBy,Xu.create=ym.create,Xu.curry=Sh.curry,Xu.curryRight=Sh.curryRight,Xu.debounce=Sh.debounce,Xu.defaults=ym.defaults,Xu.defaultsDeep=ym.defaultsDeep,Xu.defer=Sh.defer,Xu.delay=Sh.delay,Xu.difference=Ki.difference,Xu.differenceBy=Ki.differenceBy,Xu.differenceWith=Ki.differenceWith,Xu.drop=Ki.drop,Xu.dropRight=Ki.dropRight,Xu.dropRightWhile=Ki.dropRightWhile,Xu.dropWhile=Ki.dropWhile,Xu.fill=Ki.fill,Xu.filter=Jl.filter,Xu.flatMap=Jl.flatMap,Xu.flatMapDeep=Jl.flatMapDeep,Xu.flatMapDepth=Jl.flatMapDepth,Xu.flatten=Ki.flatten,Xu.flattenDeep=Ki.flattenDeep,Xu.flattenDepth=Ki.flattenDepth,Xu.flip=Sh.flip,Xu.flow=YE.flow,Xu.flowRight=YE.flowRight,Xu.fromPairs=Ki.fromPairs,Xu.functions=ym.functions,Xu.functionsIn=ym.functionsIn,Xu.groupBy=Jl.groupBy,Xu.initial=Ki.initial,Xu.intersection=Ki.intersection,Xu.intersectionBy=Ki.intersectionBy,Xu.intersectionWith=Ki.intersectionWith,Xu.invert=ym.invert,Xu.invertBy=ym.invertBy,Xu.invokeMap=Jl.invokeMap,Xu.iteratee=YE.iteratee,Xu.keyBy=Jl.keyBy,Xu.keys=ha.A,Xu.keysIn=ym.keysIn,Xu.map=Jl.map,Xu.mapKeys=ym.mapKeys,Xu.mapValues=ym.mapValues,Xu.matches=YE.matches,Xu.matchesProperty=YE.matchesProperty,Xu.memoize=Sh.memoize,Xu.merge=ym.merge,Xu.mergeWith=ym.mergeWith,Xu.method=YE.method,Xu.methodOf=YE.methodOf,Xu.mixin=fA,Xu.negate=Ts,Xu.nthArg=YE.nthArg,Xu.omit=ym.omit,Xu.omitBy=ym.omitBy,Xu.once=Sh.once,Xu.orderBy=Jl.orderBy,Xu.over=YE.over,Xu.overArgs=Sh.overArgs,Xu.overEvery=YE.overEvery,Xu.overSome=YE.overSome,Xu.partial=Sh.partial,Xu.partialRight=Sh.partialRight,Xu.partition=Jl.partition,Xu.pick=ym.pick,Xu.pickBy=ym.pickBy,Xu.property=YE.property,Xu.propertyOf=YE.propertyOf,Xu.pull=Ki.pull,Xu.pullAll=Ki.pullAll,Xu.pullAllBy=Ki.pullAllBy,Xu.pullAllWith=Ki.pullAllWith,Xu.pullAt=Ki.pullAt,Xu.range=YE.range,Xu.rangeRight=YE.rangeRight,Xu.rearg=Sh.rearg,Xu.reject=Jl.reject,Xu.remove=Ki.remove,Xu.rest=Sh.rest,Xu.reverse=Ki.reverse,Xu.sampleSize=Jl.sampleSize,Xu.set=ym.set,Xu.setWith=ym.setWith,Xu.shuffle=Jl.shuffle,Xu.slice=Ki.slice,Xu.sortBy=Jl.sortBy,Xu.sortedUniq=Ki.sortedUniq,Xu.sortedUniqBy=Ki.sortedUniqBy,Xu.split=v_.split,Xu.spread=Sh.spread,Xu.tail=Ki.tail,Xu.take=Ki.take,Xu.takeRight=Ki.takeRight,Xu.takeRightWhile=Ki.takeRightWhile,Xu.takeWhile=Ki.takeWhile,Xu.tap=Ym.tap,Xu.throttle=Sh.throttle,Xu.thru=bm,Xu.toArray=cv.toArray,Xu.toPairs=ym.toPairs,Xu.toPairsIn=ym.toPairsIn,Xu.toPath=YE.toPath,Xu.toPlainObject=cv.toPlainObject,Xu.transform=ym.transform,Xu.unary=Sh.unary,Xu.union=Ki.union,Xu.unionBy=Ki.unionBy,Xu.unionWith=Ki.unionWith,Xu.uniq=Ki.uniq,Xu.uniqBy=Ki.uniqBy,Xu.uniqWith=Ki.uniqWith,Xu.unset=ym.unset,Xu.unzip=Ki.unzip,Xu.unzipWith=Ki.unzipWith,Xu.update=ym.update,Xu.updateWith=ym.updateWith,Xu.values=ym.values,Xu.valuesIn=ym.valuesIn,Xu.without=Ki.without,Xu.words=v_.words,Xu.wrap=Sh.wrap,Xu.xor=Ki.xor,Xu.xorBy=Ki.xorBy,Xu.xorWith=Ki.xorWith,Xu.zip=Ki.zip,Xu.zipObject=Ki.zipObject,Xu.zipObjectDeep=Ki.zipObjectDeep,Xu.zipWith=Ki.zipWith,Xu.entries=ym.toPairs,Xu.entriesIn=ym.toPairsIn,Xu.extend=ym.assignIn,Xu.extendWith=ym.assignInWith,fA(Xu,Xu),Xu.add=rg.add,Xu.attempt=YE.attempt,Xu.camelCase=v_.camelCase,Xu.capitalize=v_.capitalize,Xu.ceil=rg.ceil,Xu.clamp=mg.clamp,Xu.clone=cv.clone,Xu.cloneDeep=cv.cloneDeep,Xu.cloneDeepWith=cv.cloneDeepWith,Xu.cloneWith=cv.cloneWith,Xu.conformsTo=cv.conformsTo,Xu.deburr=v_.deburr,Xu.defaultTo=YE.defaultTo,Xu.divide=rg.divide,Xu.endsWith=v_.endsWith,Xu.eq=cv.eq,Xu.escape=v_.escape,Xu.escapeRegExp=v_.escapeRegExp,Xu.every=Jl.every,Xu.find=Jl.find,Xu.findIndex=Ki.findIndex,Xu.findKey=ym.findKey,Xu.findLast=Jl.findLast,Xu.findLastIndex=Ki.findLastIndex,Xu.findLastKey=ym.findLastKey,Xu.floor=rg.floor,Xu.forEach=Jl.forEach,Xu.forEachRight=Jl.forEachRight,Xu.forIn=ym.forIn,Xu.forInRight=ym.forInRight,Xu.forOwn=ym.forOwn,Xu.forOwnRight=ym.forOwnRight,Xu.get=ym.get,Xu.gt=cv.gt,Xu.gte=cv.gte,Xu.has=ym.has,Xu.hasIn=ym.hasIn,Xu.head=Ki.head,Xu.identity=Sr.A,Xu.includes=Jl.includes,Xu.indexOf=Ki.indexOf,Xu.inRange=mg.inRange,Xu.invoke=ym.invoke,Xu.isArguments=cv.isArguments,Xu.isArray=Kt.A,Xu.isArrayBuffer=cv.isArrayBuffer,Xu.isArrayLike=cv.isArrayLike,Xu.isArrayLikeObject=cv.isArrayLikeObject,Xu.isBoolean=cv.isBoolean,Xu.isBuffer=cv.isBuffer,Xu.isDate=cv.isDate,Xu.isElement=cv.isElement,Xu.isEmpty=cv.isEmpty,Xu.isEqual=cv.isEqual,Xu.isEqualWith=cv.isEqualWith,Xu.isError=cv.isError,Xu.isFinite=cv.isFinite,Xu.isFunction=cv.isFunction,Xu.isInteger=cv.isInteger,Xu.isLength=cv.isLength,Xu.isMap=cv.isMap,Xu.isMatch=cv.isMatch,Xu.isMatchWith=cv.isMatchWith,Xu.isNaN=cv.isNaN,Xu.isNative=cv.isNative,Xu.isNil=cv.isNil,Xu.isNull=cv.isNull,Xu.isNumber=cv.isNumber,Xu.isObject=Ut.A,Xu.isObjectLike=cv.isObjectLike,Xu.isPlainObject=cv.isPlainObject,Xu.isRegExp=cv.isRegExp,Xu.isSafeInteger=cv.isSafeInteger,Xu.isSet=cv.isSet,Xu.isString=cv.isString,Xu.isSymbol=cv.isSymbol,Xu.isTypedArray=cv.isTypedArray,Xu.isUndefined=cv.isUndefined,Xu.isWeakMap=cv.isWeakMap,Xu.isWeakSet=cv.isWeakSet,Xu.join=Ki.join,Xu.kebabCase=v_.kebabCase,Xu.last=bn.A,Xu.lastIndexOf=Ki.lastIndexOf,Xu.lowerCase=v_.lowerCase,Xu.lowerFirst=v_.lowerFirst,Xu.lt=cv.lt,Xu.lte=cv.lte,Xu.max=rg.max,Xu.maxBy=rg.maxBy,Xu.mean=rg.mean,Xu.meanBy=rg.meanBy,Xu.min=rg.min,Xu.minBy=rg.minBy,Xu.stubArray=YE.stubArray,Xu.stubFalse=YE.stubFalse,Xu.stubObject=YE.stubObject,Xu.stubString=YE.stubString,Xu.stubTrue=YE.stubTrue,Xu.multiply=rg.multiply,Xu.nth=Ki.nth,Xu.noop=YE.noop,Xu.now=tu.now,Xu.pad=v_.pad,Xu.padEnd=v_.padEnd,Xu.padStart=v_.padStart,Xu.parseInt=v_.parseInt,Xu.random=mg.random,Xu.reduce=Jl.reduce,Xu.reduceRight=Jl.reduceRight,Xu.repeat=v_.repeat,Xu.replace=v_.replace,Xu.result=ym.result,Xu.round=rg.round,Xu.sample=Jl.sample,Xu.size=Jl.size,Xu.snakeCase=v_.snakeCase,Xu.some=Jl.some,Xu.sortedIndex=Ki.sortedIndex,Xu.sortedIndexBy=Ki.sortedIndexBy,Xu.sortedIndexOf=Ki.sortedIndexOf,Xu.sortedLastIndex=Ki.sortedLastIndex,Xu.sortedLastIndexBy=Ki.sortedLastIndexBy,Xu.sortedLastIndexOf=Ki.sortedLastIndexOf,Xu.startCase=v_.startCase,Xu.startsWith=v_.startsWith,Xu.subtract=rg.subtract,Xu.sum=rg.sum,Xu.sumBy=rg.sumBy,Xu.template=v_.template,Xu.times=YE.times,Xu.toFinite=cv.toFinite,Xu.toInteger=Ue.A,Xu.toLength=cv.toLength,Xu.toLower=v_.toLower,Xu.toNumber=cv.toNumber,Xu.toSafeInteger=cv.toSafeInteger,Xu.toString=cv.toString,Xu.toUpper=v_.toUpper,Xu.trim=v_.trim,Xu.trimEnd=v_.trimEnd,Xu.trimStart=v_.trimStart,Xu.truncate=v_.truncate,Xu.unescape=v_.unescape,Xu.uniqueId=YE.uniqueId,Xu.upperCase=v_.upperCase,Xu.upperFirst=v_.upperFirst,Xu.each=Jl.forEach,Xu.eachRight=Jl.forEachRight,Xu.first=Ki.head,fA(Xu,function(){var t={};return(0,$g.A)(Xu,(function(e,n){cA.call(Xu.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Xu.VERSION=oA,(Xu.templateSettings=v_.templateSettings).imports._=Xu,(0,ic.A)(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Xu[t].placeholder=Xu})),(0,ic.A)(["drop","take"],(function(t,e){Nu.prototype[t]=function(n){n=void 0===n?1:hA((0,Ue.A)(n),0);var o=this.__filtered__&&!e?new Nu(this):this.clone();return o.__filtered__?o.__takeCount__=pA(n,o.__takeCount__):o.__views__.push({size:pA(n,sA),type:t+(o.__dir__<0?"Right":"")}),o},Nu.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),(0,ic.A)(["filter","map","takeWhile"],(function(t,e){var n=e+1,o=n==iA||n==aA;Nu.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:(0,mn.A)(t,3),type:n}),e.__filtered__=e.__filtered__||o,e}})),(0,ic.A)(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Nu.prototype[t]=function(){return this[n](1).value()[0]}})),(0,ic.A)(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Nu.prototype[t]=function(){return this.__filtered__?new Nu(this):this[n](1)}})),Nu.prototype.compact=function(){return this.filter(Sr.A)},Nu.prototype.find=function(t){return this.filter(t).head()},Nu.prototype.findLast=function(t){return this.reverse().find(t)},Nu.prototype.invokeMap=(0,fn.A)((function(t,e){return"function"==typeof t?new Nu(this):this.map((function(n){return as(n,t,e)}))})),Nu.prototype.reject=function(t){return this.filter(Ts((0,mn.A)(t)))},Nu.prototype.slice=function(t,e){t=(0,Ue.A)(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Nu(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(e=(0,Ue.A)(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Nu.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Nu.prototype.toArray=function(){return this.take(sA)},(0,$g.A)(Nu.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),r=Xu[o?"take"+("last"==e?"Right":""):e],i=o||/^find/.test(e);r&&(Xu.prototype[e]=function(){var e=this.__wrapped__,a=o?[1]:arguments,s=e instanceof Nu,l=a[0],u=s||(0,Kt.A)(e),c=function(t){var e=r.apply(Xu,(0,Qe.A)([t],a));return o&&d?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,h=!!this.__actions__.length,p=i&&!d,f=s&&!h;if(!i&&u){e=f?e:new Nu(this);var v=t.apply(e,a);return v.__actions__.push({func:bm,args:[c],thisArg:void 0}),new Hu(v,d)}return p&&f?t.apply(this,a):(v=this.thru(c),p?o?v.value()[0]:v.value():v)})})),(0,ic.A)(["pop","push","shift","sort","splice","unshift"],(function(t){var e=lA[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);Xu.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var r=this.value();return e.apply((0,Kt.A)(r)?r:[],t)}return this[n]((function(n){return e.apply((0,Kt.A)(n)?n:[],t)}))}})),(0,$g.A)(Nu.prototype,(function(t,e){var n=Xu[e];if(n){var o=n.name+"";cA.call(ku,o)||(ku[o]=[]),ku[o].push({name:e,func:n})}})),ku[Yc(void 0,rA).name]=[{name:"wrapper",func:void 0}],Nu.prototype.clone=XE,Nu.prototype.reverse=VE,Nu.prototype.value=nA,Xu.prototype.at=Ym.at,Xu.prototype.chain=Ym.wrapperChain,Xu.prototype.commit=Ym.commit,Xu.prototype.next=Ym.next,Xu.prototype.plant=Ym.plant,Xu.prototype.reverse=Ym.reverse,Xu.prototype.toJSON=Xu.prototype.valueOf=Xu.prototype.value=Ym.value,Xu.prototype.first=Xu.prototype.head,dA&&(Xu.prototype[dA]=Ym.toIterator);var vA=Xu,gA={width:40,height:40},yA={width:40,height:40},mA={width:100,height:80},bA={width:100,height:80},xA={width:100,height:80},wA={width:100,height:80},_A={width:100,height:80},EA={width:100,height:80},AA={width:100,height:80},SA={width:100,height:80},OA=function(){};OA.ObjTree=function(){return this},OA.ObjTree.VERSION="0.23",OA.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',OA.ObjTree.prototype.attr_prefix="-",OA.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(t,"application/xml");if(!o)return;e=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e){var r=this.parseDOM(e);return r}},OA.ObjTree.prototype.parseHTTP=function(t,e,n){var o,r={};for(var i in e)r[i]=e[i];if(r.method||("undefined"===typeof r.postBody&&"undefined"===typeof r.postbody&&"undefined"===typeof r.parameters?r.method="get":r.method="post"),n){r.asynchronous=!0;var a=this,s=n,l=r.onComplete;r.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else r.asynchronous=!1;if("undefined"!==typeof HTTP&&HTTP.Request){r.uri=t;var u=new HTTP.Request(r);u&&(o=u.transport)}else if("undefined"!==typeof Ajax&&Ajax.Request){u=new Ajax.Request(t,r);u&&(o=u.transport)}return n?o:o&&o.responseXML&&o.responseXML.documentElement?this.parseDOM(o.responseXML.documentElement):void 0},OA.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var o={};o[t.nodeName]=n,n=o}return n}},OA.ObjTree.prototype.parseElement=function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType||8===t.nodeType){var e=t.nodeValue.match(/[^\x00-\x20]/);if(null==e)return;return t.nodeValue}var n=null,o={};if(t.attributes&&t.attributes.length){n={};for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r].nodeName;if("string"===typeof i){var a=t.attributes[r].nodeValue;try{a=JSON.parse(t.attributes[r].nodeValue.replace(/'/g,'"'))}catch(u){a=t.attributes[r].nodeValue}null!==a&&void 0!==a&&(i=this.attr_prefix+i,"undefined"===typeof o[i]&&(o[i]=0),o[i]++,this.addNode(n,i,o[i],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(r=0;r<t.childNodes.length&&s;r++){var l=t.childNodes[r].nodeType;3!==l&&4!==l&&8!==l&&(s=!1)}if(s){n||(n="");for(r=0;r<t.childNodes.length;r++)n+=t.childNodes[r].nodeValue}else{n||(n={});for(r=0;r<t.childNodes.length;r++){i=t.childNodes[r].nodeName;if("string"===typeof i){a=this.parseElement(t.childNodes[r]);a&&("undefined"===typeof o[i]&&(o[i]=0),o[i]++,this.addNode(n,i,o[i],a))}}}}else null===n&&(n={});return n}},OA.ObjTree.prototype.addNode=function(t,e,n,o){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=o):1===n?t[e]=o:2===n?t[e]=[t[e],o]:t[e][t[e].length]=o},OA.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},OA.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],o=[];for(var r in e)if((0,yy.A)(e,r)){var i=e[r];r.charAt(0)!==this.attr_prefix?"undefined"===typeof i||null==i?n[n.length]="<".concat(r," />"):"object"===typeof i&&i.constructor===Array?n[n.length]=this.array_to_xml(r,i):n[n.length]="object"===typeof i?this.hash_to_xml(r,i):this.scalar_to_xml(r,i):o[o.length]=" ".concat(r.substring(1),'="').concat(this.xml_escape(i),'"')}var a=o.join(""),s=n.join("");return"undefined"===typeof t||null==t||(s=n.length>0?s.match(/\n/)?"<".concat(t).concat(a,">\n").concat(s,"</").concat(t,">\n"):"<".concat(t).concat(a,">").concat(s,"</").concat(t,">\n"):"<".concat(t).concat(a," />\n")),s},OA.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],o=0;o<e.length;o++){var r=e[o];"undefined"===typeof r||null==r?n[n.length]="<".concat(t," />"):"object"===typeof r&&r.constructor===Array?n[n.length]=this.array_to_xml(t,r):n[n.length]="object"===typeof r?this.hash_to_xml(t,r):this.scalar_to_xml(t,r)}return n.join("")},OA.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"===t?this.xml_escape(e):"<".concat(t,">").concat(this.xml_escape(e),"</").concat(t,">\n")},OA.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var CA=function(t){return(new OA.ObjTree).parseXML(t)};function NA(t){return Object.prototype.toString.call(t)}function MA(t){return"  ".repeat(t)}function TA(t){return"[object Object]"===NA(t)?Object.keys(t).reduce((function(e,n){var o=n;return"-"===n.charAt(0)&&(o=n.substring(1)),e[o]=TA(t[n]),e}),{}):Array.isArray(t)?t.map((function(t){return TA(t)})):t}function PA(t){var e=t;try{"string"!==typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(TA(t)).replace(/"/g,"'")}return e}var DA="\t\n";function kA(t,e,n){var o=MA(n),r="",i=DA+o;if("-json"===e)return"";if("#text"===e)return i+t;if("#cdata-section"===e)return"".concat(i,"<![CDATA[").concat(t,"]]>");if("#comment"===e)return"".concat(i,"\x3c!--").concat(t,"--\x3e");if("-"==="".concat(e).charAt(0))return" ".concat(e.substring(1),'="').concat(PA(t),'"');if(Array.isArray(t))r+=t.map((function(t){return kA(t,e,n+1)})).join("");else if("[object Object]"===NA(t)){var a=Object.keys(t),s="",l=t["-json"]?DA+MA(n+1)+t["-json"]:"";r+="".concat(0===n?"":i,"<").concat(e),a.forEach((function(e){"-"===e.charAt(0)?s+=kA(t[e],e,n+1):l+=kA(t[e],e,n+1)})),r+=s+(""!==l?">".concat(l).concat(i,"</").concat(e,">"):" />")}else r+="".concat(i,"<").concat(e,">").concat(t.toString(),"</").concat(e,">");return r}function RA(t){var e="";for(var n in t)e+=kA(t[n],n,0);return e}var IA,LA=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jA=function(){return jA=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},jA.apply(this,arguments)},BA=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},HA=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FA=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},zA=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};(function(t){t["START"]="bpmn:startEvent",t["END"]="bpmn:endEvent",t["INTERMEDIATE_CATCH"]="bpmn:intermediateCatchEvent",t["INTERMEDIATE_THROW"]="bpmn:intermediateThrowEvent",t["BOUNDARY"]="bpmn:boundaryEvent",t["PARALLEL_GATEWAY"]="bpmn:parallelGateway",t["INCLUSIVE_GATEWAY"]="bpmn:inclusiveGateway",t["EXCLUSIVE_GATEWAY"]="bpmn:exclusiveGateway",t["USER"]="bpmn:userTask",t["SYSTEM"]="bpmn:serviceTask",t["FLOW"]="bpmn:sequenceFlow",t["SUBPROCESS"]="bpmn:subProcess"})(IA||(IA={}));var WA=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],YA=["properties","startPoint","endPoint","pointsList"],GA={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},XA=function(t,e){var n=Object.keys(e||{});return n.forEach((function(n){if(t[n]){var o=e[n],r=o.in,i=o.out;r&&(t[n].in=r),i&&(t[n].out=i)}else t[n]=e[n]})),t},UA={"bpmn:startEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=UA[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateCatchEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=UA[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateThrowEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=UA[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:boundaryEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=UA[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:sequenceFlow":{out:function(t){var e=t.properties,n=e.expressionType,o=e.condition;return o?"cdata"===n?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(o,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(o,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(t){var e=t.properties,n=e.timerType,o=e.timerValue,r=e.definitionId,i=function(){return"<bpmn:".concat(n,' xsi:type="bpmn:tFormalExpression">').concat(o,"</bpmn:").concat(n,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(r,'"').concat(n&&o?">".concat(i(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(t,e){var n,o,r,i,a=t,s=e["-id"],l="",u="";try{for(var c=HA(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value;h.includes("bpmn:")&&(r=FA(h.split(":"),2),l=r[1],u=null===(i=e[h])||void 0===i?void 0:i["#text"])}}catch(p){n={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(t,e){var n,o="",r="";return e["#cdata-section"]?(r="cdata",o=(null===(n=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))||void 0===n?void 0:n[1])||""):e["#text"]&&(r="normal",o=e["#text"]),{"-condition":o,"-expressionType":r}}}};function VA(t){var e=null!==t&&void 0!==t?t:{},n=e.retainedAttrsFields,o=e.excludeFields,r=e.transformer,i=new Set(zA(zA([],FA(YA),!1),FA(n||[]),!1)),a={in:new Set(zA(zA([],FA(GA.in),!1),FA((null===o||void 0===o?void 0:o.in)||[]),!1)),out:new Set(zA(zA([],FA(GA.out),!1),FA((null===o||void 0===o?void 0:o.out)||[]),!1))};return UA=XA(UA,r),function(t){var e=t.nodes,n=t.edges;function o(t,r){var s,l;if(1!==(null===t||void 0===t?void 0:t.flag)){var u;if((u=UA[t.type])&&u.out){var c=u.out(t),d=Object.keys(c);d.length>0&&d.forEach((function(e){t[e]=c[e]}))}(null===t||void 0===t?void 0:t.children)&&(t.children=t.children.map((function(t){var o=e.find((function(e){return e.id===t}))||n.find((function(e){return e.id===t}));return o||{}})));var h={};if("string"===typeof t)return t;if(Array.isArray(t))return t.map((function(t){return o(t,"")})).filter((function(t){return void 0!=t}));try{for(var p=HA(Object.entries(t)),f=p.next();!f.done;f=p.next()){var v=FA(f.value,2),g=v[0],y=v[1];if(1===(null===y||void 0===y?void 0:y["flag"]))return;var m=[r,g].filter((function(t){return t})).join(".");a.out.has(m)||("object"!==typeof y?0===g.indexOf("-")||["#text","#cdata-section","#comment"].includes(g)?h[g]=y:h["-".concat(g)]=y:i.has(m)?h["-".concat(g)]=o(y,m):h[g]=o(y,m))}}catch(b){s={error:b}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return h}}return o(t,"")}}function KA(t){var e,n,o={};try{for(var r=HA(Object.entries(t)),i=r.next();!i.done;i=r.next()){var a=FA(i.value,2),s=a[0],l=a[1];0===s.indexOf("-")?o[s.substring(1)]=TA(l):"string"===typeof l?o[s]=l:"[object Object]"===Object.prototype.toString.call(l)?o[s]=KA(l):Array.isArray(l)?o[s]=l.map((function(t){return KA(t)})):o[s]=l}}catch(u){e={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return o}function qA(t,e,n){var o,r=new Map,i=VA(n)(e);i.nodes.forEach((function(e){var n=e["-id"],o=e["-type"],i=e.text,a=e.children,s=BA(e,["-id","-type","text","children"]),l={"-id":n};(null===i||void 0===i?void 0:i["-value"])&&(l["-name"]=i["-value"]),s["-json"]&&(l["-json"]=s["-json"]),s["-properties"]&&Object.assign(l,s["-properties"]),a&&(l.children=a),t[o]||(t[o]=[]),t[o].push(l),r.set(n,l)}));var a=i.edges.map((function(t){var e=t["-id"],n=t["-sourceNodeId"],o=t["-targetNodeId"],i=t.text,a=BA(t,["-id","-sourceNodeId","-targetNodeId","text"]),s=r.get(o);s["bpmn:incoming"]||(s["bpmn:incoming"]=[]),s["bpmn:incoming"].push(e);var l={"-id":e,"-sourceRef":n,"-targetRef":o};return(null===i||void 0===i?void 0:i["-value"])&&(l["-name"]=i["-value"]),a["-json"]&&(l["-json"]=a["-json"]),a["-properties"]&&Object.assign(l,a["-properties"]),l}));return e.edges.forEach((function(t){var e=t.sourceNodeId,n=t.id,o=r.get(e);o["bpmn:outgoing"]||(o["bpmn:outgoing"]=[]),o["bpmn:outgoing"].push(n)})),null===(o=t["bpmn:subProcess"])||void 0===o||o.forEach((function(e){var n={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},o=[];e.children.forEach((function(o){var i,a=r.get(o["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach((function(t){a[t]&&a[t].forEach((function(e){n[t].add(e)}))}));var s=null===(i=t[o["-type"]])||void 0===i?void 0:i.findIndex((function(t){return t["-id"]===o["-id"]}));s>=0&&t[o["-type"]].splice(s,1),r.delete(o["-id"]),e[o["-type"]]||(e[o["-type"]]=[]),e[o["-type"]].push(a)}));var i=n["bpmn:incoming"],s=n["bpmn:outgoing"];s.forEach((function(t){i.has(t)&&o.push(t)}));for(var l,u=function(t){var n=a.findIndex((function(e){return e["-id"]===o[t]}));n>=0?(e["bpmn:sequenceFlow"]||(e["bpmn:sequenceFlow"]=[]),e["bpmn:sequenceFlow"].push(a[n]),a.splice(n,1)):t++,l=t},c=0;c<o.length;)u(c),c=l;delete e.children})),t[IA.FLOW]=a,t}function ZA(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,o=t.pointsList.map((function(t){var e=t.x,n=t.y;return{"-x":e,"-y":n}})),r={"-id":"".concat(n,"_di"),"-bpmnElement":n,"di:waypoint":o};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(r["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),r})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,o=100,r=80,i=t.x,a=t.y,s=oS.shapeConfigMap.get(t.type);s&&(o=s.width,r=s.height),i-=o/2,a-=r/2;var l={"-id":"".concat(n,"_di"),"-bpmnElement":n,"dc:Bounds":{"-x":i,"-y":a,"-width":o,"-height":r}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}var $A=["bpmn:incoming","bpmn:outgoing"];function JA(t,e){var n=[],o=[],r=new Map,i=null!==e&&void 0!==e?e:{},a=i.transformer,s=i.excludeFields,l={in:new Set(zA(zA([],FA(GA.in),!1),FA((null===s||void 0===s?void 0:s.in)||[]),!1)),out:new Set(zA(zA([],FA(GA.out),!1),FA((null===s||void 0===s?void 0:s.out)||[]),!1))};UA=XA(UA,a);var u=t["bpmn:definitions"];if(u){var c=u["bpmn:process"];(function(t,e){e.forEach((function(e){try{Object.keys(t).forEach((function(t){try{e(t)}catch(n){console.error(n)}}))}catch(n){console.error(n)}}))})(c,[function(t){function e(t){t["-children"]||(t["-children"]=[]),Object.keys(t).forEach((function(e){var n;0!==e.indexOf("bpmn:")||$A.includes(e)||(c[e]||(c[e]=[]),!Array.isArray(c[e])&&(c[e]=[c[e]]),Array.isArray(t[e])?(n=c[e]).push.apply(n,zA([],FA(t[e]),!1)):c[e].push(t[e]),Array.isArray(t[e])?t[e].forEach((function(n){!e.includes("Flow")&&t["-children"].push(n["-id"])})):!e.includes("Flow")&&t["-children"].push(t[e]["-id"]),delete t[e])}))}if("bpmn:subProcess"===t){var n=c[t];Array.isArray(n)?n.forEach((function(n){"bpmn:subProcess"===t&&e(n)})):e(n)}},function(t){var e=function(t){Object.keys(t).forEach((function(e){var o,r;if(e.includes("bpmn:")){var i={};UA[e]&&UA[e].in?(i=null===(r=(o=UA[e]).in)||void 0===r?void 0:r.call(o,e,vA.cloneDeep(t[e])),delete t[e]):n(t[e]);var a=void 0;(a=Reflect.ownKeys(i)).length>0&&a.forEach((function(e){Reflect.set(t,e,i[e])}))}}))};function n(t){r.set(t["-id"],t),Array.isArray(t)?t.forEach((function(t){n(t)})):"object"===typeof t&&e(t)}n(c[t])},function(t){if(0===t.indexOf("bpmn:")){var e=c[t];if("bpmn:sequenceFlow"===t){var i=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=eS(e,i)}else{var a=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if("bpmn:boundaryEvent"===t){var s=c[t],l=function(t){var e=t["-attachedToRef"],n=r.get(e);n["-boundaryEvents"]||(n["-boundaryEvents"]=[]),n["-boundaryEvents"].push(t["-id"])};Array.isArray(s)?s.forEach((function(t){l(t)})):l(s)}n=n.concat(QA(e,a,t))}}}])}var d=function(t,e,n){Object.keys(t).forEach((function(o){var r=n?"".concat(n,".").concat(o):o;e.has(r)?delete t[o]:"object"===typeof t[o]&&d(t[o],e,r)}))};return n.forEach((function(t){var n,o;if(null===(n=null===e||void 0===e?void 0:e.mapping)||void 0===n?void 0:n.in){var r=null===(o=null===e||void 0===e?void 0:e.mapping)||void 0===o?void 0:o.in,i=t.type;r[i]&&(t.type=r[i])}d(t,l.in,"")})),o.forEach((function(t){var n,o;if(null===(n=null===e||void 0===e?void 0:e.mapping)||void 0===n?void 0:n.in){var r=null===(o=null===e||void 0===e?void 0:e.mapping)||void 0===o?void 0:o.in,i=t.type;r[i]&&(t.type=r[i])}d(t,l.in,"")})),{nodes:n,edges:o}}function QA(t,e,n){var o=[];if(Array.isArray(t))t.forEach((function(t){var r;r=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var i=tS(r,n,t);o.push(i)}));else{var r=void 0;r=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var i=tS(r,n,t);o.push(i)}return o}function tS(t,e,n){var o=Number(t["dc:Bounds"]["-x"]),r=Number(t["dc:Bounds"]["-y"]),i=n["-children"],a=n["-name"],s=oS.shapeConfigMap.get(e);s&&(o+=s.width/2,r+=s.height/2);var l,u={};if(Object.entries(n).forEach((function(t){var e=FA(t,2),n=e[0],o=e[1];WA.includes(n)||(u[n]=o)})),u=KA(u),a&&(l={x:o,y:r,value:a},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var c=t["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(c["-x"])+Number(c["-width"])/2,l.y=Number(c["-y"])+Number(c["-height"])/2}var d={id:t["-bpmnElement"],type:e,x:o,y:r,properties:u};return i&&(d.children=i),l&&(d.text=l),d}function eS(t,e){var n=[];if(Array.isArray(t))t.forEach((function(t){var o;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(nS(o,t))}));else{var o=void 0;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(nS(o,t))}return n}function nS(t,e){var n,o=e["-name"]?"".concat(e["-name"]):"";if(o){var r=t["bpmndi:BPMNLabel"]["dc:Bounds"],i=0;o.split("\n").forEach((function(t){i<t.length&&(i=t.length)})),n={value:o,x:Number(r["-x"])+10*i/2,y:Number(r["-y"])+7}}var a={};Object.entries(e).forEach((function(t){var e=FA(t,2),n=e[0],o=e[1];WA.includes(n)||(a[n]=o)})),a=KA(a);var s=t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),l={id:e["-id"],type:IA.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return n&&(l.text=n),l}var oS=function(){function t(t){var e=t.lf,n=this;this.adapterOut=function(t,e){var o,r,i=jA({},n.processAttributes);qA(i,t,e);var a={"-id":"BPMNPlane_1","-bpmnElement":i["-id"]};ZA(a,t);var s=n.definitionAttributes;s["bpmn:process"]=i,s["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":a};var l={"bpmn:definitions":s};if(null===(o=null===e||void 0===e?void 0:e.mapping)||void 0===o?void 0:o.out){var u=null===(r=null===e||void 0===e?void 0:e.mapping)||void 0===r?void 0:r.out,c=function(t){Array.isArray(t)&&t.forEach((function(t){return c(t)})),"object"===typeof t&&Object.keys(t).forEach((function(e){var n;(n=u[e])?(t[n]=vA.cloneDeep(t[e]),delete t[e],c(t[n])):c(t[e])}))};c(l)}return l},this.adapterIn=function(t,e){if(t)return JA(t,e)},e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();oS.shapeConfigMap.set(IA.START,{width:gA.width,height:gA.height}),oS.shapeConfigMap.set(IA.END,{width:yA.width,height:yA.height}),oS.shapeConfigMap.set(IA.INTERMEDIATE_CATCH,{width:bA.width,height:bA.height}),oS.shapeConfigMap.set(IA.INTERMEDIATE_THROW,{width:bA.width,height:bA.height}),oS.shapeConfigMap.set(IA.BOUNDARY,{width:mA.width,height:mA.height}),oS.shapeConfigMap.set(IA.PARALLEL_GATEWAY,{width:xA.width,height:xA.height}),oS.shapeConfigMap.set(IA.INCLUSIVE_GATEWAY,{width:wA.width,height:wA.height}),oS.shapeConfigMap.set(IA.EXCLUSIVE_GATEWAY,{width:_A.width,height:_A.height}),oS.shapeConfigMap.set(IA.SYSTEM,{width:EA.width,height:EA.height}),oS.shapeConfigMap.set(IA.USER,{width:AA.width,height:AA.height}),oS.shapeConfigMap.set(IA.SUBPROCESS,{width:SA.width,height:SA.height});(function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=CA(t);return n.adapterIn(e,n.props)},n.adapterXmlOut=function(t){var e=n.adapterOut(t,n.props);return RA(e)};var o=e.lf,r=e.props;return o.adapterIn=n.adapterXmlIn,o.adapterOut=n.adapterXmlOut,n.props=r,n}LA(e,t),e.pluginName="BPMNAdapter"})(oS);var rS=function(){return rS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},rS.apply(this,arguments)},iS=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},aS={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,EXCLUSIVE_GATEWAY:6},sS={1:"bpmn:sequenceFlow",2:"bpmn:startEvent",3:"bpmn:endEvent",4:"bpmn:userTask",6:"bpmn:exclusiveGateway"};function lS(t){switch(t){case"bpmn:sequenceFlow":return aS.SEQUENCE_FLOW;case"bpmn:startEvent":return aS.START_EVENT;case"bpmn:endEvent":return aS.END_EVENT;case"bpmn:userTask":return aS.USER_TASK;case"bpmn:exclusiveGateway":return aS.EXCLUSIVE_GATEWAY;default:return t}}function uS(t){var e=t.id,n=t.type,o=t.x,r=t.y,i=t.text,a=void 0===i?"":i,s=t.properties;return{incoming:[],outgoing:[],dockers:[],type:lS(n),properties:rS(rS({},s),{name:a&&a.value||"",x:o,y:r,text:a}),key:e}}function cS(t){var e=t.id,n=t.type,o=t.sourceNodeId,r=t.targetNodeId,i=t.startPoint,a=t.endPoint,s=t.pointsList,l=t.text,u=void 0===l?"":l,c=t.properties;return{incoming:[o],outgoing:[r],type:lS(n),dockers:[],properties:rS(rS({},c),{name:u&&u.value||"",text:u,startPoint:JSON.stringify(i),endPoint:JSON.stringify(a),pointsList:JSON.stringify(s)}),key:e}}function dS(t){var e=new Map,n={flowElementList:[]};return t.nodes.forEach((function(t){var o=uS(t);n.flowElementList.push(o),e.set(t.id,o)})),t.edges.forEach((function(t){var o=cS(t),r=e.get(t.sourceNodeId);r.outgoing.push(o.key);var i=e.get(t.targetNodeId);i.incoming.push(o.key),n.flowElementList.push(o)})),n}function hS(t){var e=t.incoming,n=t.outgoing,o=t.properties,r=t.key,i=t.type,a=o.text,s=o.name,l=o.startPoint,u=o.endPoint,c=o.pointsList,d={id:r,type:sS[i],sourceNodeId:e[0],targetNodeId:n[0],text:a||s,properties:{}};l&&(d.startPoint=JSON.parse(l)),u&&(d.endPoint=JSON.parse(u)),c&&(d.pointsList=JSON.parse(c));var h=["startPoint","endPoint","pointsList","text"];return Object.keys(t.properties).forEach((function(e){-1===h.indexOf(e)&&(d.properties[e]=t.properties[e])})),d}function pS(t){var e=t.properties,n=t.key,o=t.type,r=t.bounds,i=e.x,a=e.y,s=e.text;if(void 0===i){var l=iS(r,2),u=l[0],c=u.x,d=u.y,h=l[1],p=h.x,f=h.y;i=(c+p)/2,a=(d+f)/2}var v={id:n,type:sS[o],x:i,y:a,text:s,properties:{}},g=["x","y","text"];return Object.keys(t.properties).forEach((function(e){-1===g.indexOf(e)&&(v.properties[e]=t.properties[e])})),v}function fS(t){var e={nodes:[],edges:[]},n=t.flowElementList;return n&&n.length>0&&n.forEach((function(t){if(t.type===aS.SEQUENCE_FLOW){var n=hS(t);e.edges.push(n)}else{var o=pS(t);e.nodes.push(o)}})),e}(function(){function t(t){var e=t.lf;e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut}t.prototype.adapterOut=function(t){if(t)return dS(t)},t.prototype.adapterIn=function(t){if(t)return fS(t)},t.pluginName="turboAdapter"})();function vS(t,e,n){var o=t.x,r=t.y,i=t.width,a=t.height,s=e.x,l=e.y,u=e.width,c=e.height,d=n.x,h=n.y,p=(d-o)/i,f=(h-r)/a,v=s+p*u,g=l+f*c;return{x:v,y:g}}function gS(t,e,n){var o=e.x,r=e.y,i=t.x,a=t.y,s=i-o,l=a-r,u=s*Math.cos(n)-l*Math.sin(n),c=s*Math.sin(n)+l*Math.cos(n),d=u+o,h=c+r;return{x:d,y:h}}var yS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mS=function(){return mS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},mS.apply(this,arguments)},bS=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},xS=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},wS=function(t){function e(){var e=t.apply(this,xS([],bS(arguments),!1))||this;return e.childrenPositionMap=new Map,e.onNodeRotate=function(t){var n=t.model,o=e.props,r=o.model,i=o.graphModel,a=r.transformWithContainer,s=r.isRestrict,l=e.childrenPositionMap;if(a&&!s&&n.id===r.id){var u={x:r.x,y:r.y};(0,Xt.A)(Array.from(r.children),(function(t){var e=i.getNodeModelById(t);if(e){var o={x:e.x,y:e.y};l.has(e.id)?o=l.get(e.id):l.set(e.id,o);var r=n.rotate*(180/Math.PI);r<0&&(r+=360);var a=r*(Math.PI/180),s=gS(o,u,a);e.moveTo(s.x,s.y),e.rotate=n.rotate}}))}},e.onNodeResize=function(t){var n=t.deltaX,o=t.deltaY,r=t.index,i=t.model,a=t.preData,s=e.props,u=s.model,c=s.graphModel,d=u.transformWithContainer,h=u.isRestrict;if(d&&!h&&i.id===u.id){var p=a.properties,f=p||{},v=f.width,g=f.height;(0,Xt.A)(Array.from(u.children),(function(t){var e=c.getNodeModelById(t);if(e){var i=e.width/v*n,a=e.height/g*o;(0,l.Z1$)({deltaX:i,deltaY:a,index:r,nodeModel:e,graphModel:c,cancelCallback:function(){}})}}))}},e.onNodeMouseMove=function(){},e.graphRendered=function(){var t=e.props.model;t.isCollapsed&&t.toggleCollapse(!0)},e}return yS(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.props.graphModel.eventCenter;e.on("node:rotate",this.onNodeRotate),e.on("node:resize",this.onNodeResize),e.on("node:mousemove",this.onNodeMouseMove),e.on("graph:rendered",this.graphRendered)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this);var e=this.props.graphModel.eventCenter;e.off("node:rotate",this.onNodeRotate),e.off("node:resize",this.onNodeResize),e.off("node:mousemove",this.onNodeMouseMove),e.off("graph:rendered",this.graphRendered)},e.prototype.getNodesInGroup=function(t,e){var n=this,o=[];return t.isGroup&&(0,Xt.A)(Array.from(t.children),(function(t){o.push(t);var r=e.getNodeModelById(t);(null===r||void 0===r?void 0:r.isGroup)&&(o=o.concat(n.getNodesInGroup(r,e)))})),o},e.prototype.getResizeControl=function(){var e=this.props.model,n=e.resizable,o=e.isCollapsed,r=n&&!o;return r?t.prototype.getResizeControl.call(this):null},e.prototype.getAppendAreaShape=function(){var t=this.props.model,e=t.width,n=t.height,o=t.x,r=t.y,i=t.radius,a=t.groupAddable;if(!a)return null;var s=t.getNodeStyle().strokeWidth,u=void 0===s?0:s,c=t.getAddableOutlineStyle(),d=e+u+8,h=n+u+8;return(0,l.h)("rect",mS(mS({},c),{width:d,height:h,x:o-d/2,y:r-h/2,rx:i,ry:i}))},e.prototype.getCollapseIcon=function(t,e){return"M ".concat(t+3,",").concat(e+6," ").concat(t+11,",").concat(e+6," M").concat(t+7,",").concat(e+2," ").concat(t+7,",").concat(e+10)},e.prototype.getExpandIcon=function(t,e){return"M ".concat(t+3,",").concat(e+6," ").concat(t+11,",").concat(e+6," ")},e.prototype.getOperateIcon=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=e-o/2+10,a=n-r/2+10;if(!t.collapsible)return null;var s=(null===t||void 0===t?void 0:t.isCollapsed)?this.getCollapseIcon(i,a):this.getExpandIcon(i,a),u=(0,l.h)("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:s});return(0,l.h)("g",{},[(0,l.h)("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:i,y:a,onClick:function(){t.toggleCollapse(!t.isCollapsed)}}),u])},e.prototype.getShape=function(){return(0,l.h)("g",{},[this.getAppendAreaShape(),t.prototype.getShape.call(this),this.getOperateIcon()])},e}(l.Pc7),_S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ES=function(){return ES=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ES.apply(this,arguments)},AS=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},SS=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},OS=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},CS=400,NS=230,MS=80,TS=60,PS=-1e4,DS=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isGroup=!0,o.isRestrict=!1,o.autoResize=!1,o.collapsible=!0,o.isCollapsed=!1,o.groupAddable=!1,o.transformWithContainer=!1,o.childrenLastCollapseStateDict=new Map,o.childrenLastCollapseStateDict=new Map,o.initNodeData(e),o.setAttributes(),o}return _S(e,t),e.prototype.initNodeData=function(e){var n;t.prototype.initNodeData.call(this,e);var o=null!==(n=e.properties)&&void 0!==n?n:{},r=o.children,i=o.width,a=o.height,s=o.collapsedWidth,l=o.collapsedHeight,u=o.collapsible,c=o.isCollapsed,d=o.zIndex,h=o.isRestrict,p=o.autoResize,f=o.autoToFront,v=o.transformWithContainer;this.children=r?new Set(r):new Set,this.zIndex=null!==d&&void 0!==d?d:PS,this.isCollapsed=null!==c&&void 0!==c&&c;var g=null!==i&&void 0!==i?i:CS,y=null!==a&&void 0!==a?a:NS;this.width=g,this.height=y,this.expandWidth=g,this.expandHeight=y,this.collapsedWidth=null!==s&&void 0!==s?s:MS,this.collapsedHeight=null!==l&&void 0!==l?l:TS,this.isRestrict=null!==h&&void 0!==h&&h,this.transformWithContainer=null!==v&&void 0!==v&&v,this.autoResize=null!==p&&void 0!==p&&p,this.collapsible=null===u||void 0===u||u,this.autoToFront=null!==f&&void 0!==f&&f,this.text.editable=!1,this.text.draggable=!1},e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this)},e.prototype.getData=function(){var e=this,n=t.prototype.getData.call(this),o=[];return(0,Xt.A)(Array.from(this.children),(function(t){var n=e.graphModel.getNodeModelById(t);n&&!n.virtual&&o.push(t)})),n.children=o,n.properties&&(n.properties.children=o,n.properties.isCollapsed=this.isCollapsed),n},e.prototype.getNodesInGroup=function(t){var e=[];return t.isGroup&&(0,Xt.A)(Array.from(t.children),(function(t){e.push(t)})),e},e.prototype.getMoveDistance=function(e,n,o){void 0===o&&(o=!1);var r=SS(t.prototype.getMoveDistance.call(this,e,n,o),2),i=r[0],a=r[1],s=this.getNodesInGroup(this);return this.graphModel.moveNodes(s,e,n,o),[i,a]},e.prototype.getHistoryData=function(){var e=t.prototype.getHistoryData.call(this);e.children=Array.from(this.children),e.isGroup=!0;var n=this,o=n.x,r=n.y,i=n.collapsedWidth,a=n.collapsedHeight,s=n.expandWidth,l=n.expandHeight,u=n.isCollapsed;return u&&(e.x=o+s/2-i/2,e.y=r+l/2-a/2,e.text&&(e.text.x=e.text.x+s/2-i/2,e.text.y=e.text.y+l/2-a/2)),e},e.prototype.toggleCollapse=function(t){var e=this,n=!!t;this.isCollapsed=n,n?this.collapse():this.expand();var o=OS(OS([],SS(this.incoming.edges),!1),SS(this.outgoing.edges),!1),r=Array.from(this.children);(0,Xt.A)(r,(function(n){var r,i,a=e.graphModel.elementsModelMap.get(n);if(a){var s=a.isCollapsed;if(a.isGroup){var u=a;if(u.isCollapsed||u.toggleCollapse(t),!t){var c=null===(r=e.childrenLastCollapseStateDict)||void 0===r?void 0:r.get(n);void 0!==c&&c!==a.isCollapsed&&u.toggleCollapse(c)}}if(null===(i=e.childrenLastCollapseStateDict)||void 0===i||i.set(n,!!s),a.visible=!t,a.BaseType===l.RJL.NODE){var d=a.incoming.edges,h=a.outgoing.edges;o=OS(OS(OS([],SS(o),!1),SS(d),!1),SS(h),!1)}}})),this.collapseEdge(n,o)},e.prototype.collapse=function(){var t=this,e=t.x,n=t.y,o=t.text,r=t.width,i=t.height,a=t.collapsedWidth,s=t.collapsedHeight;this.x=e-r/2+a/2,this.y=n-i/2+s/2,this.text.x=o.x-r/2+a/2,this.text.y=o.y-i/2+s/2,this.expandWidth=r,this.expandHeight=i,this.width=a,this.height=s},e.prototype.expand=function(){var t=this,e=t.x,n=t.y,o=t.text,r=t.expandWidth,i=t.expandHeight,a=t.collapsedWidth,s=t.collapsedHeight;this.width=r,this.height=i,this.x=e+this.width/2-a/2,this.y=n+this.height/2-s/2,this.text.x=o.x+this.width/2-a/2,this.text.y=o.y+this.height/2-s/2},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var e=this.graphModel.addEdge(t);e.virtual=!0,e.text.editable=!1,e.isCollapsedEdge=!0},e.prototype.collapseEdge=function(t,e){var n=this,o=this.graphModel;(0,Xt.A)(e,(function(e,r){var i,a=e.getData(),s=a.targetNodeId,l=a.sourceNodeId,u=ES(ES({},a),{id:"".concat(a.id,"__").concat(r),text:null===(i=a.text)||void 0===i?void 0:i.value});e.virtual&&o.deleteEdgeById(e.id);var c=o.dynamicGroup.getGroupByNodeId(s);c||(c=o.getNodeModelById(s));var d=o.dynamicGroup.getGroupByNodeId(l);d||(d=o.getNodeModelById(l)),t&&e.visible&&(n.children.has(l)||n.id===l?(u.startPoint=void 0,u.sourceNodeId=n.id):(u.endPoint=void 0,u.targetNodeId=n.id),c.id===n.id&&d.id===n.id||n.createVirtualEdge(u),e.visible=!1),t||e.visible||(c&&c.isGroup&&c.isCollapsed?(u.targetNodeId=c.id,u.endPoint=void 0,n.createVirtualEdge(u)):d&&d.isGroup&&d.isCollapsed?(u.sourceNodeId=d.id,u.startPoint=void 0,n.createVirtualEdge(u)):e.visible=!0)}))},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.setAllowAppendChild=function(t){this.groupAddable=t},e.prototype.addChild=function(t){this.children.add(t);var e=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:e,childId:t})},e.prototype.removeChild=function(t){this.children.delete(t);var e=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:e})},e.prototype.toBack=function(){this.zIndex--},e.prototype.getResizeOutlineStyle=function(){var e=t.prototype.getResizeOutlineStyle.call(this);return e.stroke="none",e},e.prototype.getAnchorStyle=function(){var e=t.prototype.getAnchorStyle.call(this);return e.stroke="transparent",e.fill="transparent",e.hover&&(e.hover.fill="transparent",e.hover.stroke="transparent"),e},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},AS([l.sHX],e.prototype,"isCollapsed",void 0),AS([l.sHX],e.prototype,"groupAddable",void 0),AS([l.sHX],e.prototype,"transformWithContainer",void 0),e}(l.G6l);function kS(t,e){var n=t.minX,o=t.minY,r=t.maxX,i=t.maxY,a=e.x,s=e.y,l=e.width,u=e.height;return n>=a-l/2&&r<=a+l/2&&o>=s-u/2&&i<=s+u/2}function RS(t,e,n,o){var r=t.minX,i=t.minY,a=t.maxX,s=t.maxY,l=e.x,u=e.y,c=e.width,d=e.height,h=r+c/2,p=i+d/2,f=a-c/2,v=s-d/2;return{x:l+n>=h&&l+n<=f,y:u+o>=p&&u+o<=v}}var IS,LS=function(){return LS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},LS.apply(this,arguments)},jS=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},BS=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},HS={type:"dynamic-group",view:wS,model:DS},FS=-1e3,zS=-1e4;(function(){function t(t){var e=t.lf,n=t.options,o=this;this.topGroupZIndex=zS,this.nodeGroupMap=new Map,this.addNodeToGroup=function(t){var e=t.data,n=o.nodeGroupMap.get(e.id);if(n){var r=o.lf.getNodeModelById(n);r.removeChild(e.id),o.nodeGroupMap.delete(e.id),r.setAllowAppendChild(!1)}var i=o.lf.getNodeModelById(e.id),a=null===i||void 0===i?void 0:i.getBounds();if(i&&a){if(i.isGroup){var s=i;(0,Xt.A)(Array.from(s.children),(function(t){o.nodeGroupMap.set(t,e.id)})),o.calibrateTopGroupZIndex([e]),o.onNodeSelect({data:e,isSelected:!1,isMultiple:!1})}r=o.getGroupByBounds(a,e);if(r){var l=r.isAllowAppendIn(e);console.log("isAllowAppendIn",l),l?(r.addChild(e.id),r.setAllowAppendChild(!0)):o.lf.emit("group:not-allowed",{group:r.getData(),node:e})}}},this.onGroupAddNode=function(t){var e=t.data,n=t.childId;console.log("group:add-node",e),o.nodeGroupMap.set(n,e.id)},this.removeNodeFromGroup=function(t){var e=t.data,n=t.model;n.isGroup&&e.children&&(0,Xt.A)(Array.from(e.children),(function(t){o.nodeGroupMap.delete(t),o.lf.deleteNode(t)}));var r=o.nodeGroupMap.get(e.id);if(r){var i=o.lf.getNodeModelById(r);i&&i.removeChild(e.id),o.nodeGroupMap.delete(e.id)}},this.setActiveGroup=function(t){var e=t.data,n=o.lf.getNodeModelById(e.id),r=null===n||void 0===n?void 0:n.getBounds();if(n&&r){var i=o.getGroupByBounds(r,e);if(o.activeGroup&&o.activeGroup.setAllowAppendChild(!1),!i||n.isGroup&&i.id===e.id)return;var a=i.isAllowAppendIn(e);if(!a)return;o.activeGroup=i,console.log("this.activeGroup",o.activeGroup),o.activeGroup.setAllowAppendChild(!0)}},this.onNodeSelect=function(t){var e=t.data,n=t.isMultiple,r=t.isSelected,i=o.lf.getNodeModelById(e.id);if(o.sendNodeToFront(i),o.topGroupZIndex>FS){var a=o.lf.graphModel.nodes;o.topGroupZIndex=zS;var s=$l(Ta(a,(function(t){return!!t.isGroup})),"zIndex"),l=0;(0,Xt.A)(s,(function(t){t.zIndex!==l&&(o.topGroupZIndex++,l=t.zIndex),t.setZIndex(o.topGroupZIndex)}))}if(n&&r)if(null===i||void 0===i?void 0:i.isGroup){var u=i.children;(0,Xt.A)(Array.from(u),(function(t){var e=o.lf.getNodeModelById(t);null===e||void 0===e||e.setSelected(!1)}))}else{var c=o.nodeGroupMap.get(e.id);if(c){var d=o.lf.getNodeModelById(c);(null===d||void 0===d?void 0:d.isSelected)&&(null===i||void 0===i||i.setSelected(!1))}}},this.onNodeMove=function(t){var e=t.deltaX,n=t.deltaY,r=t.data,i=r.id,a=r.x,s=r.y,l=r.properties;if(l){var u=l.width,c=l.height,d=o.nodeGroupMap.get(i);if(d){var h=o.lf.getNodeModelById(d);if(h&&h.isRestrict&&h.autoResize){var p=a+e/2,f=s+n/2,v=p-u/2,g=f-c/2,y=p+u/2,m=f+c/2,b=!1,x=h.getBounds(),w=Object.assign({},x);if(v<w.minX&&(w.minX=v,b=!0),g<w.minY&&(w.minY=g,b=!0),y>w.maxX&&(w.maxX=y,b=!0),m>w.maxY&&(w.maxY=m,b=!0),b){var _=w.minX+(w.maxX-w.minX)/2,E=w.minY+(w.maxY-w.minY)/2,A=w.maxX-w.minX,S=w.maxY-w.minY;h.moveTo(_,E),h.width=A,h.height=S}}}}},this.onGraphRendered=function(t){var e=t.data;console.log("data",e),(0,Xt.A)(e.nodes,(function(t){t.children&&(0,Xt.A)(t.children,(function(e){o.nodeGroupMap.set(e,t.id)}))})),o.calibrateTopGroupZIndex(e.nodes)},e.register(HS),this.lf=e,(0,bg.A)(this,n),this.init()}t.prototype.getGroupByNodeId=function(t){var e=this.nodeGroupMap.get(t);if(e)return this.lf.getNodeModelById(e)},t.prototype.getGroupByBounds=function(t,e){var n=this.lf.graphModel.nodes,o=Ta(n,(function(n){return!!n.isGroup&&kS(t,n)&&n.id!==e.id})),r=o.length;if(r<=1)return o[0];for(var i=o[r-1],a=r-2;a>=0;a--)o[a].zIndex>i.zIndex&&(i=o[a]);return i},t.prototype.sendNodeToFront=function(t){var e=this;if(t&&t.isGroup&&(this.topGroupZIndex++,t.setZIndex(this.topGroupZIndex),t.children)){var n=t.children;(0,Xt.A)(Array.from(n),(function(t){var n=e.lf.getNodeModelById(t);e.sendNodeToFront(n)}))}},t.prototype.getMaxZIndex=function(t){var e=this,n=zS;if(t.isGroup&&(n=Math.max(n,t.zIndex)),t.children){var o=t.children;(0,Xt.A)(Array.from(o),(function(t){var o=e.lf.getNodeModelById(t);if(null===o||void 0===o?void 0:o.isGroup){var r=e.getMaxZIndex(o);n=Math.max(n,r)}}))}return n},t.prototype.calibrateTopGroupZIndex=function(t){var e=this,n=zS;if((0,Xt.A)(t,(function(t){var o=e.lf.getNodeModelById(t.id);if(o){var r=e.getMaxZIndex(o);r>n&&(n=r)}})),!(this.topGroupZIndex>=n)){var o=this.lf.graphModel.nodes,r=Ta(o,(function(t){return!!t.isGroup})),i=this.topGroupZIndex;(0,Xt.A)(r,(function(t){t.zIndex>i&&(i=t.zIndex)})),this.topGroupZIndex=i}},t.prototype.removeChildrenInGroupNodeData=function(t){var e,n=(0,Nh.A)(t);return delete n.children,(null===(e=n.properties)||void 0===e?void 0:e.children)&&delete n.properties.children,n},t.prototype.initGroupChildNodes=function(t,e,n,o){var r=this,i=[],a=[],s=[];(0,Xt.A)(Array.from(e),(function(e){var u=r.lf.getNodeModelById(e);if(u){var c=u.children,d=u.getData(),h=l.Bx4.NODE_GROUP_COPY||"node:group-copy-add",p=(0,l.XmX)(r.removeChildrenInGroupNodeData(d),o),f=r.lf.addNode(p,h);if(n.addChild(f.id),t[e]=f.id,i.push(f),s.push.apply(s,BS([],jS(BS(BS([],jS(f.incoming.edges),!1),jS(f.outgoing.edges),!1)),!1)),c instanceof Set){var v=r.initGroupChildNodes(t,c,f,o),g=v.childNodes,y=v.edgesData;i.push.apply(i,BS([],jS(g),!1)),a.push.apply(a,BS([],jS(y),!1))}}})),console.log("allRelatedEdges --\x3e>",s);var u=Ta(s,(function(e){return(0,yy.A)(t,e.sourceNodeId)&&(0,yy.A)(t,e.targetNodeId)})),c=(0,La.A)(u,(function(t){return t.getData()}));return{childNodes:i,edgesData:a.concat(c)}},t.prototype.createEdge=function(t,e,n){var o,r,i=t.sourceNodeId,a=t.targetNodeId,s=null!==(o=e[i])&&void 0!==o?o:i,u=null!==(r=e[a])&&void 0!==r?r:a,c=(0,Nh.A)(t);return t.id&&"object"===typeof t.text&&null!==t.text&&(c=(0,l.AC1)(t,n)),this.lf.graphModel.addEdge(LS(LS({},c),{sourceNodeId:s,targetNodeId:u}))},t.prototype.checkGroupBoundsWithChildren=function(t,e,n,o,r){if(t.children)for(var i=t.children,a=t.x,s=t.y,l=a+e/2,u=s+n/2,c=l-o/2,d=u-r/2,h=l+o/2,p=u+r/2,f=Array.from(i),v=0;v<f.length;v++){var g=f[v],y=this.lf.getNodeModelById(g);if(y){var m=y.getBounds(),b=m.minX,x=m.minY,w=m.maxX,_=m.maxY,E=c<=b&&d<=x&&h>=w&&p>=_;if(!E)return!1}}return!0},t.prototype.init=function(){var t=this,e=this.lf,n=e.graphModel;n.addNodeMoveRules((function(e,n,o){if(e.isGroup)return!0;var r=t.nodeGroupMap.get(e.id),i=t.lf.getNodeModelById(r);if(i&&i.isRestrict){if(i.autoResize)return!0;var a=i.getBounds();return RS(a,e,n,o)}return!0})),n.addNodeResizeRules((function(e,n,o,r,i){return!e.isGroup||!e.isRestrict||t.checkGroupBoundsWithChildren(e,n,o,r,i)})),n.dynamicGroup=this,e.on("node:add,node:drop,node:dnd-add",this.addNodeToGroup),e.on("node:delete",this.removeNodeFromGroup),e.on("node:drag,node:dnd-drag",this.setActiveGroup),e.on("node:click",this.onNodeSelect),e.on("node:mousemove",this.onNodeMove),e.on("graph:rendered",this.onGraphRendered),e.on("graph:updated",(function(t){var e=t.data;return console.log("data",e)})),e.on("group:add-node",this.onGroupAddNode),e.addElements=function(n,o){var r=n.nodes,i=n.edges;void 0===o&&(o=40);var a={},s={nodes:[],edges:[]},l=[];return(0,Xt.A)(r,(function(n){var r,i,u=n.id,c=null!==(i=null===(r=n.properties)||void 0===r?void 0:r.children)&&void 0!==i?i:n.children,d=e.addNode(t.removeChildrenInGroupNodeData(n));if(u&&(a[u]=d.id),s.nodes.push(d),d.isGroup){var h=t.initGroupChildNodes(a,c,d,o).edgesData;l.push.apply(l,BS([],jS(h),!1))}})),(0,Xt.A)(l,(function(e){t.createEdge(e,a,o)})),console.log("selectedEdges ---\x3e>>",i),(0,Xt.A)(i,(function(e){s.edges.push(t.createEdge(e,a,o))})),s},this.render()},t.prototype.render=function(){},t.prototype.destroy=function(){this.lf.off("node:add,node:drop,node:dnd-add",this.addNodeToGroup),this.lf.off("node:delete",this.removeNodeFromGroup),this.lf.off("node:drag,node:dnd-drag",this.setActiveGroup),this.lf.off("node:click",this.onNodeSelect),this.lf.off("node:mousemove",this.onNodeMove),this.lf.off("graph:rendered",this.onGraphRendered),this.lf.off("group:add-node",this.onGroupAddNode)},t.pluginName="dynamicGroup"})();(function(t){t["HORIZONTAL"]="horizontal",t["VERTICAL"]="vertical"})(IS||(IS={}));var WS=function(t,e,n,o){void 0===o&&(o=0);var r=US(t,e,n);return r<=o};function YS(t){return t*t}function GS(t,e){return YS(t.x-e.x)+YS(t.y-e.y)}var XS=function(t,e,n){var o=GS(e,n);if(0===o)return GS(t,e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o;return r=Math.max(0,Math.min(1,r)),GS(t,{x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)})},US=function(t,e,n){return Math.sqrt(XS(t,e,n))},VS=function(t){var e=t.x,n=t.y,o=t.width,r=t.height,i={minX:e-o/2,minY:n-r/2,maxX:e+o/2,maxY:n+r/2,x:e,y:n,width:o,height:r,centerX:e,centerY:n};return i},KS=function(t,e){var n;return t.x===e.x?n=IS.VERTICAL:t.y===e.y&&(n=IS.HORIZONTAL),n},qS=function(t,e,n){var o=VS(t),r=KS(e,n),i=Math.max(e.x,n.x),a=Math.min(e.x,n.x),s=Math.max(e.y,n.y),l=Math.min(e.y,n.y),u=t.x,c=t.y,d=t.width,h=t.height;if(r===IS.HORIZONTAL){if(i>=o.maxX&&a<=o.minX)return{startCrossPoint:{x:e.x>n.x?u+d/2:u-d/2,y:e.y},endCrossPoint:{x:e.x>n.x?u-d/2:u+d/2,y:e.y}}}else if(r===IS.VERTICAL&&s>=o.maxY&&l<=o.minY)return{startCrossPoint:{x:e.x,y:e.y>n.y?c+h/2:c-h/2},endCrossPoint:{x:e.x,y:e.y>n.y?c-h/2:c+h/2}}},ZS=function(t,e,n){void 0===n&&(n=0);for(var o=t.x,r=t.y,i=e.pointsList,a=0;a<i.length-1;a++)if(WS({x:o,y:r},i[a],i[a+1],n)){var s=qS(t,i[a],i[a+1]);if(s)return{crossIndex:a+1,crossPoints:s}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},$S=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},JS=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},QS=(function(){function t(t){var e=t.lf;this._lf=e,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}t.prototype.eventHandler=function(){var t=this;this.dndAdd&&this._lf.on("node:dnd-add",(function(e){var n=e.data;t.insetNode(n)})),this.dropAdd&&this._lf.on("node:drop",(function(e){for(var n=e.data,o=t._lf.graphModel.edges,r=n.id,i=!0,a=0;a<o.length;a++)if(o[a].sourceNodeId===r||o[a].targetNodeId===r){i=!1;break}i&&t.insetNode(n)}))},t.prototype.checkRuleBeforeInsetNode=function(t,e,n,o,r){var i=this._lf.getNodeModelById(t),a=this._lf.getNodeModelById(e),s=i.getAnchorInfo(n),u=a.getAnchorInfo(o),c=i.isAllowConnectedAsSource(r,s,u),d=a.isAllowConnectedAsTarget(r,s,u),h=(0,l.nDY)(c),p=h.isAllPass,f=h.msg,v=(0,l.nDY)(d),g=v.isAllPass,y=v.msg;return{isPass:p&&g,sourceMsg:f,targetMsg:y}},t.prototype.insetNode=function(t){var e=this,n=this._lf.graphModel.edges,o=this._lf.getNodeModelById(t.id),r=null===o||void 0===o?void 0:o.getDefaultAnchor(),i=!r||0===r.length;if(i)this._lf.graphModel.eventCenter.emit(l.Bx4.CONNECTION_NOT_ALLOWED,{data:t,msg:""});else if(o)for(var a=0;a<n.length;a++){var s=ZS(o,n[a],this.deviation),u=s.crossIndex,c=s.crossPoints;if(u>=0){var d=n[a],h=d.sourceNodeId,p=d.targetNodeId,f=d.id,v=d.type,g=d.pointsList,y=d.sourceAnchorId,m=d.targetAnchorId,b=(0,Nh.A)(g[0]),x=(0,Nh.A)(c.startCrossPoint);this._lf.deleteEdge(f);var w=this.checkRuleBeforeInsetNode(h,p,y,m,t);if(this._lf.addEdge({type:v,sourceNodeId:h,targetNodeId:t.id,startPoint:b,endPoint:x,pointsList:JS(JS([],$S(g.slice(0,u)),!1),[c.startCrossPoint],!1)}),this._lf.addEdge({type:v,sourceNodeId:t.id,targetNodeId:p,startPoint:(0,Nh.A)(c.endCrossPoint),endPoint:(0,Nh.A)(g[g.length-1]),pointsList:JS([c.endCrossPoint],$S(g.slice(u)),!1)}),w.isPass)break;this._lf.graphModel.eventCenter.emit(l.Bx4.CONNECTION_NOT_ALLOWED,{data:t,msg:w.targetMsg||w.sourceMsg}),setTimeout((function(){e._lf.undo()}),200);break}}},t.pluginName="insertNodeInPolyline"}(),n(95399)),tO=n.n(QS),eO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nO=function(){return nO=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},nO.apply(this,arguments)},oO=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},rO=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},iO=function(t){function e(e){var n=t.call(this,e)||this;n.textRef=(0,l._3b)(),n.setHoverOn=function(){var t=n.props.element;t.isDragging||n.state.isHovered||(n.setState({isHovered:!0}),t.setHovered(!0))},n.setHoverOff=function(){var t=n.props.element;n.state.isHovered&&(n.setState({isHovered:!1}),t.setHovered(!1))},n.handleMouseDown=function(t){var e,o=n.props,r=o.label,i=o.graphModel,a=i.editConfigModel.nodeTextDraggable;!(null!==(e=r.draggable)&&void 0!==e?e:a)||n.state.isDragging||n.state.isEditing||n.stepDrag.handleMouseDown(t)},n.handleMouseUp=function(t){n.state.isDragging&&n.stepDrag.handleMouseUp(t)},n.handleDragging=function(t){var e=t.deltaX,o=t.deltaY;n.state.isDragging||n.setState({isDragging:!0});var r=n.props,i=r.label,a=r.graphModel,s=a.transformModel,l=rO(s.fixDeltaXY(e,o),2),u=l[0],c=l[1];n.setElementModelLabelInfo({x:i.x+u,y:i.y+c}),a.eventCenter.emit("label:drag",{data:i.getData(),model:i})},n.handleDragEnd=function(){n.setState({isDragging:!1})},n.handleClick=function(t){var e=n.props,o=e.label,r=e.element,i=e.graphModel;r.setSelected(!n.state.isSelected),n.setState({isSelected:!n.state.isSelected}),n.setElementModelLabelInfo({isSelected:!0}),i.eventCenter.emit("label:click",{data:o.getData(),e:t,model:r})},n.handleDbClick=function(t){var e=n.props,o=e.label,r=e.element,i=e.graphModel;if(i.eventCenter.emit("label:dblclick",{data:o.getData(),e:t,model:r}),o.editable){if(r.setSelected(),r.setElementState(l.e_r.TEXT_EDIT),n.setState({isEditing:!0}),n.textRef.current){n.textRef.current.contentEditable="true",n.textRef.current.focus();var a=document.createRange(),s=window.getSelection();a.selectNodeContents(n.textRef.current),a.collapse(!1),null===s||void 0===s||s.removeAllRanges(),null===s||void 0===s||s.addRange(a)}}else r.setSelected(!0)},n.handleBlur=function(t){var e=n.props,o=e.label,r=e.element,i=e.graphModel.eventCenter;i.emit("label:blur",{e:t,model:r,data:o.getData(),element:n.textRef.current}),n.setState({isDragging:!1,isHovered:!1,isSelected:!1})},n.handleInput=function(t){var e=n.props,o=e.label,r=e.graphModel;r.eventCenter.emit("label:input",{e:t,data:o.getData()})},n.reCalcLabelSize=function(){};var o=e.label,r=e.graphModel,i=r.gridSize,a=r.eventCenter;return n.stepDrag=new l.N46({onDragging:n.handleDragging,onDragEnd:n.handleDragEnd,step:i,eventType:"LABEL",model:o,eventCenter:a}),n.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},n}return eO(e,t),e.prototype.setElementModelLabelInfo=function(t){var e=this.props,n=e.label,o=e.element,r=e.graphModel,i=o.properties._label,a=i,s=(0,Yn.A)(a,(function(t){return t.id===n.id})),l=a[s];a[s]=nO(nO({},l),t);var u=r.getElement(o.id);null===u||void 0===u||u.setProperty("_label",a)},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.label,o=e.element,r=e.graphModel;r.eventCenter.on("blank:click,node:click,edge:click,label:click",(function(e){var r,i,a,s,u=e.data;if(("label"!==(null===u||void 0===u?void 0:u.type)||"label"===u.type&&u.id!==n.id||t.state.isSelected)&&t.setState({isSelected:!1}),("label"!==(null===u||void 0===u?void 0:u.type)||"label"==u.type&&u.id!==n.id)&&t.state.isEditing){t.setState({isEditing:!1});var c=null!==(i=null===(r=t.textRef.current)||void 0===r?void 0:r.innerText)&&void 0!==i?i:"",d=null!==(s=null===(a=t.textRef.current)||void 0===a?void 0:a.innerHTML)&&void 0!==s?s:"";t.setElementModelLabelInfo({value:c,content:d,isSelected:!1}),o.setElementState(l.e_r.DEFAULT)}("label"!==(null===u||void 0===u?void 0:u.type)||"label"==u.type&&u.id!==n.id)&&t.textRef.current&&(t.textRef.current.contentEditable="false")}))},e.prototype.componentDidUpdate=function(){},e.prototype.componentWillUnmount=function(){var t=this.props.graphModel;t.eventCenter.off("blank:click,node:click,edge:click")},e.prototype.render=function(){var t,e=this.props,n=e.label,o=e.element,r=e.graphModel,i=this.state,a=i.isDragging,s=i.isHovered,l=i.isSelected,u=i.isEditing,c=r.transformModel,d=c.getTransformStyle().transform,h=n.id,p=n.x,f=n.y,v=n.zIndex,g=n.vertical,y=n.style,m=n.rotate,b=n.content,x=n.labelWidth,w=n.textOverflowMode,_=null!==x&&void 0!==x?x:"node"===o.BaseType?o.width-20:80,E={left:"".concat(p-_/2,"px"),top:"".concat(f-10,"px"),width:"".concat(_,"px"),height:"20px",zIndex:null!==v&&void 0!==v?v:1,transform:m?"".concat(d," rotate(").concat(m,"deg)"):"".concat(d," rotate(").concat(g?-.25:0,"turn)")};return(0,qt.Y)("div",{id:"element-container-".concat(h),className:tO()("lf-label-editor-container"),style:E,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:(0,qt.Y)("div",{ref:this.textRef,id:"editor-container-".concat(h),className:tO()("lf-label-editor",(t={"lf-label-editor-dragging":a,"lf-label-editor-editing":u,"lf-label-editor-hover":!u&&(s||l)},t["lf-label-editor-".concat(w)]=!u,t)),onInput:this.handleInput,style:nO({maxWidth:"".concat(_,"px"),boxSizing:"border-box",display:"inline-block",background:u||"edge"===o.BaseType?"#fff":"transparent"},y),dangerouslySetInnerHTML:{__html:b}})})},e=oO([l.PAp],e),e}(l.uAl),aO=iO,sO=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},lO=l.Vu$.ir,uO=function(){function t(t,e,n){var o;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=e,this.graphModel=n,this.id=null!==(o=t.id)&&void 0!==o?o:lO(),this.initLabelData(t)}return t.prototype.initLabelData=function(t){(0,bg.A)(this,t)},t.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:(0,l.HOl)(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},sO([l.sHX],t.prototype,"x",void 0),sO([l.sHX],t.prototype,"y",void 0),sO([l.sHX],t.prototype,"content",void 0),sO([l.sHX],t.prototype,"value",void 0),sO([l.sHX],t.prototype,"rotate",void 0),sO([l.sHX],t.prototype,"style",void 0),sO([l.sHX],t.prototype,"zIndex",void 0),sO([l.sHX],t.prototype,"vertical",void 0),sO([l.sHX],t.prototype,"editable",void 0),sO([l.sHX],t.prototype,"draggable",void 0),sO([l.sHX],t.prototype,"labelWidth",void 0),sO([l.sHX],t.prototype,"textOverflowMode",void 0),t}(),cO=uO,dO=n(13105),hO=n.n(dO),pO=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},fO=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),vO=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0)if(n.push(a.value),e&&n.length===e)break}catch(l){r=!0,i=l}finally{try{!o&&s["return"]&&s["return"]()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){var n=this;while(n.length<t)n=e+n;return n};var gO={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function yO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var mO=function(){function t(e,n,o,r){pO(this,t);var i=this;function a(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),o=vO(n,4),r=o[0],a=o[1],s=o[2],l=o[3];void 0===l&&(l=1),r/=360,a/=100,s/=100,i.hsla=[r,a,s,l]}else if(e.startsWith("rgb")){var u=e.match(/([\-\d\.e]+)/g).map(Number),c=vO(u,4),d=c[0],h=c[1],p=c[2],f=c[3];void 0===f&&(f=1),i.rgba=[d,h,p,f]}else e.startsWith("#")?i.rgba=t.hexToRgb(e):i.rgba=t.nameToRgb(e)||t.hexToRgb(e)}if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===o){var s=e&&""+e;s&&a(s.toLowerCase())}else this.rgba=[e,n,o,void 0===r?1:r]}return fO(t,[{key:"printRGB",value:function(t){var e=t?this.rgba:this.rgba.slice(0,3),n=e.map((function(t,e){return yO(t,3===e?3:0)}));return t?"rgba("+n+")":"rgb("+n+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],o=t?this.hsla:this.hsla.slice(0,3),r=o.map((function(t,o){return yO(t*e[o],3===o?3:1)+n[o]}));return t?"hsla("+r+")":"hsl("+r+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,e=t.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)}));return"#"+e.map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),o=gO[n];return void 0===o?o:t.hexToRgb(o.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=vO(t,4),n=e[0],o=e[1],r=e[2],i=e[3];n/=255,o/=255,r/=255;var a=Math.max(n,o,r),s=Math.min(n,o,r),l=void 0,u=void 0,c=(a+s)/2;if(a===s)l=u=0;else{var d=a-s;switch(u=c>.5?d/(2-a-s):d/(a+s),a){case n:l=(o-r)/d+(o<r?6:0);break;case o:l=(r-n)/d+2;break;case r:l=(n-o)/d+4;break}l/=6}return[l,u,c,i]}},{key:"hslToRgb",value:function(t){var e=vO(t,4),n=e[0],o=e[1],r=e[2],i=e[3],a=void 0,s=void 0,l=void 0;if(0===o)a=s=l=r;else{var u=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},c=r<.5?r*(1+o):r+o-r*o,d=2*r-c;a=u(d,c,n+1/3),s=u(d,c,n),l=u(d,c,n-1/3)}var h=[255*a,255*s,255*l].map(Math.round);return h[3]=i,h}}]),t}(),bO=function(){function t(){pO(this,t),this._events=[]}return fO(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,o){this._events=this._events.filter((function(r){var i=!0;return e&&e!==r.target&&(i=!1),n&&n!==r.type&&(i=!1),o&&o!==r.handler&&(i=!1),i&&t._doRemove(r.target,r.type,r.handler),!i}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function xO(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function wO(t,e,n){var o=!1;function r(t,e,n){return Math.max(e,Math.min(t,n))}function i(t,i,a){if(a&&(o=!0),o){t.preventDefault();var s=e.getBoundingClientRect(),l=s.width,u=s.height,c=i.clientX,d=i.clientY,h=r(c-s.left,0,l),p=r(d-s.top,0,u);n(h/l,p/u)}}function a(t,e){var n=void 0===t.buttons?t.which:t.buttons;1===n?i(t,t,e):o=!1}function s(t,e){1===t.touches.length?i(t,t.touches[0],e):o=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){o=!1})),t.add(e,"touchend",(function(t){o=!1})),t.add(e,"touchcancel",(function(t){o=!1}))}var _O="linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em",EO=360,AO="keydown",SO="mousedown",OO="focusin";function CO(t,e){return(e||document).querySelector(t)}function NO(t){t.preventDefault(),t.stopPropagation()}function MO(t,e,n,o,r){t.add(e,AO,(function(t){n.indexOf(t.key)>=0&&(r&&NO(t),o(t))}))}var TO=function(){function t(e){pO(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new bO,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return fO(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),a(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var o=t.color||t.colour;o&&this._setColor(o)}var r=n.parent;if(r&&n.popup&&!this._popupInited){var i=function(t){return e.openHandler(t)};this._events.add(r,"click",i),MO(this._events,r,[" ","Spacebar","Enter"],i),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}function a(t,e,n){for(var o in t)n&&n.indexOf(o)>=0||(e[o]=t[o])}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===AO?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;if(t)if(e===SO||e===OO){var o=(this.__containedEvent||0)+100;t.timeStamp>o&&(n=!0)}else NO(t),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==SO&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"===typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new mO(t)}catch(r){if(e.failSilently)return;throw r}if(!this.settings.alpha){var o=n.hsla;o[3]=1,n.hsla=o}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var e=this._toggleDOM(!0);return this._setPosition(),e}var n=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=xO(n);return this.domElement=o,this._domH=CO(".picker_hue",o),this._domSL=CO(".picker_sl",o),this._domA=CO(".picker_alpha",o),this._domEdit=CO(".picker_editor input",o),this._domSample=CO(".picker_sample",o),this._domOkay=CO(".picker_done button",o),this._domCancel=CO(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup((function(){return o.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,o=this._events;function r(t,e,n){o.add(t,e,n)}r(n,"click",(function(t){return t.preventDefault()})),wO(o,this._domH,(function(t,n){return e._setHSLA(t)})),wO(o,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&wO(o,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var i=this._domEdit;r(i,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(i,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,SO,e),r(window,OO,e),MO(o,n,["Esc","Escape"],e);var i=function(e){t.__containedEvent=e.timeStamp};r(n,SO,i),r(n,OO,i),r(t._domCancel,"click",e)}));var a=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",a),MO(o,n,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var o=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===o?e.classList.add(t):e.classList.remove(t)})),e.classList.add(o)}))}},{key:"_setHSLA",value:function(t,e,n,o,r){r=r||{};var i=this.colour,a=i.hsla;[t,e,n,o].forEach((function(t,e){(t||0===t)&&(a[e]=t)})),i.hsla=a,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(i)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,o="hsl("+n[0]*EO+", 100%, 50%)",r=e.hslString,i=e.hslaString,a=this._domH,s=this._domSL,l=this._domA,u=CO(".picker_selector",a),c=CO(".picker_selector",s),d=CO(".picker_selector",l);m(a,u,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,m(s,c,n[1]),b(s,c,1-n[2]),s.style.color=r,b(l,d,1-n[3]);var h=r,p=h.replace("hsl","hsla").replace(")",", 0)"),f="linear-gradient("+[h,p]+")";if(this._domA.style.background=f+", "+_O,!t.fromEditor){var v=this.settings.editorFormat,g=this.settings.alpha,y=void 0;switch(v){case"rgb":y=e.printRGB(g);break;case"hsl":y=e.printHSL(g);break;default:y=e.printHex(g)}this._domEdit.value=y}this._domSample.style.color=i}function m(t,e,n){e.style.left=100*n+"%"}function b(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",o=e.style.display!==n;return o&&(e.style.display=n),o}}]),t}(),PO=document.createElement("style");PO.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(PO),TO.StyleElement=PO;var DO=n(60223),kO=n.n(DO),RO=(n(72583),{toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"",hideOnClick:!0},disableEditing:!0}),IO=hO().extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var t=this;kO().init(),hO().extensions.button.prototype.init.call(this),this.colorPicker=new TO({parent:this.button,color:"#000",onDone:function(e){t.coloredText&&t.coloredText.isAppliedToSelection()&&t.coloredText.undoToSelection(),t.coloredText=kO().createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:e.hex}},normalize:!0}),t.coloredText.toggleSelection(),t.base.checkContentChanged(),t.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(t){return"mark"===t.nodeName.toLowerCase()},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),LO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jO=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},BO=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},HO=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},FO=function(t){function e(e){var n=t.call(this,e)||this;n.labelMap=new Map;var o=e.lf,r=e.graphModel;return n.lf=o,n.graphModel=r,n.state={tick:0},n}return LO(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.graphModel;this.editor=new(hO())(".lf-label-editor",(0,By.A)(RO,{autoLink:!0,extensions:{colorPicker:new IO}})),e.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",(function(){})),e.eventCenter.on("node:properties-change,node:properties-delete",(function(){t.setState({tick:t.state.tick+1})}))},e.prototype.componentDidUpdate=function(){var t;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):(null===(t=this.editor)||void 0===t||t.destroy(),this.editor=new(hO())(".lf-label-editor",(0,By.A)(RO,{autoLink:!0,extensions:{colorPicker:new IO}})))},e.prototype.componentWillUnmount=function(){var t;null===(t=this.editor)||void 0===t||t.destroy()},e.prototype.getLabels=function(){var t=this,e=this.props,n=e.lf.extension,o=e.graphModel,r=HO(HO([],BO(o.nodes),!1),BO(o.edges),!1),i=n["label"];if(i){var a=[];return(0,Xt.A)(r,(function(e){var n,r,i=e.getData(),s=null!==(r=null===(n=i.properties)||void 0===n?void 0:n._label)&&void 0!==r?r:[];(0,Xt.A)(s,(function(n){var r=t.labelMap,i=new cO(n,e,o);r.set(i.id,i),a.push((0,qt.Y)(aO,{label:i,element:e,graphModel:o},i.id))}))})),a}return null},e.prototype.render=function(){return(0,qt.Y)("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},e.toolName="label-edit-tool",e=jO([l.PAp],e),e}(l.uAl),zO=FO,WO=function(){return WO=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},WO.apply(this,arguments)},YO=(function(){function t(t){var e,n,o,r=t.lf,i=t.options;this.labelInitPositionMap=new Map,this.lf=r,this.options=null!==i&&void 0!==i?i:{},this.textOverflowMode=null!==(e=i.textOverflowMode)&&void 0!==e?e:"default",this.isMultiple=null===(n=i.isMultiple)||void 0===n||n,this.labelWidth=i.labelWidth,this.maxCount=null!==(o=i.maxCount)&&void 0!==o?o:1/0,r.graphModel.editConfigModel.updateTextMode(l.RM7.LABEL),this.addEventListeners(),this.rewriteShortcut(),r.tool.registerTool(zO.toolName,zO),r.tool.disableTool("text-edit-tool")}t.prototype.formatConfig=function(t,e){var n=t.editConfigModel,o=n.nodeTextEdit,r=n.edgeTextEdit,i=n.nodeTextDraggable,a=n.edgeTextDraggable,s=this,u=s.textOverflowMode,c=s.isMultiple,d=s.maxCount,h=s.labelWidth,p=e.text,f=e.zIndex,v=e.properties,g=v._label,y=v._labelOption,m=void 0===y?{}:y,b=g,x=m,w=x.isMultiple,_=x.maxCount,E=[];if((0,Kt.A)(b)){var A=null!==_&&void 0!==_?_:d;E=c&&w?b.length>A?b.slice(0,A):b:[b[0]]}else if((0,Ut.A)(b))E=[b];else if("string"===typeof b||!b){var S=WO(WO({},p),{content:b||(null===p||void 0===p?void 0:p.value),draggable:"edge"===e.BaseType?a:i});E=S.value?[S]:[]}return"edge"===e.BaseType&&(E=(0,La.A)(E,(function(t){return t}))),(0,La.A)(E,(function(t){t.id||(t.id=(0,l.ir6)());var n=t.value,s=t.content,c=t.vertical,d=t.editable,p=t.draggable,v=t.textOverflowMode,g="node"===e.BaseType?o:r,y="node"===e.BaseType?i:a;return WO(WO({},t),{zIndex:f,labelWidth:h,content:null!==s&&void 0!==s?s:n,vertical:null!==c&&void 0!==c&&c,editable:g&&d,draggable:y&&p,textOverflowMode:null!==v&&void 0!==v?v:u})}))},t.prototype.setupLabels=function(t){var e=this,n=t.sortElements;(0,Xt.A)(n,(function(n){e.rewriteInnerMethods(n);var o=e.formatConfig(t,n);n.setProperty("_label",o)}))},t.prototype.addLabel=function(t,e){var n,o,r,i=this,a=i.isMultiple,s=i.maxCount,u=t.properties,c=u._label,d=u._labelOption,h=null!==(n=c)&&void 0!==n?n:[],p=null!==(o=d)&&void 0!==o?o:{},f=h.length,v={id:(0,l.ir6)(),x:e.x,y:e.y,content:"Label".concat(f+1),value:"Label".concat(f+1),style:{},draggable:!0,editable:!0,vertical:!1};!a||a&&!1===p.isMultiple||f>=(null!==(r=null===p||void 0===p?void 0:p.maxCount)&&void 0!==r?r:s)||(h.push(v),t.setProperty("_label",h))},t.prototype.addEventListeners=function(){var t=this,e=this.lf.graphModel,n=e.eventCenter,o=e.editConfigModel;n.on("graph:rendered",(function(e){var n=e.graphModel;t.setupLabels(n)})),n.on("node:dbclick,edge:dbclick",(function(n){var r=n.e,i=n.data,a=e.getElement(i.id),s=e.getPointByClient({x:r.clientX,y:r.clientY}).canvasOverlayPosition,u=s.x,c=s.y,d={x:u,y:c};a&&o.textMode===l.RM7.LABEL&&t.addLabel(a,d)})),n.on("node:resize",(function(t){var e,n,o=t.preData,r=t.data,i=t.model,a=null!==(e=o.properties)&&void 0!==e?e:{},s=a.width,l=a.height,u=a._label,c=void 0===u?[]:u,d=null!==(n=r.properties)&&void 0!==n?n:{},h=d.width,p=d.height;if(s&&l&&h&&p){var f={x:o.x,y:o.y,width:s,height:l},v={x:r.x,y:r.y,width:h,height:p},g=(0,La.A)(c,(function(t){var e=t.x,n=t.y,o=vS(f,v,{x:e,y:n});return WO(WO({},t),o)}));i.setProperty("_label",g)}})),n.on("node:rotate",(function(e){var n=e.model,o=n.x,r=n.y,i=n.rotate,a=n.properties._label,s=void 0===a?[]:a,l={x:o,y:r},u=(0,La.A)(s,(function(e){if(!e.id)return e;var n={x:e.x,y:e.y};t.labelInitPositionMap.has(e.id)?n=t.labelInitPositionMap.get(e.id):t.labelInitPositionMap.set(e.id,n);var o=i*(180/Math.PI);o<0&&(o+=360);var r=o*(Math.PI/180),a=gS(n,l,r);return WO(WO(WO({},e),a),{rotate:o})}));n.setProperty("_label",u)})),n.on("node:dnd-add,node:add,edge:add",(function(n){var o=n.data,r=e.getElement(o.id);if(r){t.rewriteInnerMethods(r);var i=t.formatConfig(e,o);r.setProperty("_label",i)}}))},t.prototype.rewriteInnerMethods=function(t){t.moveText=function(e,n){if(t.text){var o=t.text,r=o.x,i=o.y,a=o.value,s=o.draggable,l=o.editable;t.text={value:a,editable:l,draggable:s,x:r+e,y:i+n};var u=(0,Nh.A)(t.getProperties());if((0,Kt.A)(u._label)){var c=(0,La.A)(u._label,(function(t){return WO(WO({},t),{x:t.x+e,y:t.y+n})}));null===t||void 0===t||t.setProperty("_label",c)}}}},t.prototype.rewriteShortcut=function(){var t=this,e=this.lf,n=e.keyboard,o=e.graphModel,r=n.options.keyboard;n.off(["backspace"]),n.on(["backspace"],(function(){if(!(null===r||void 0===r?void 0:r.enabled))return!0;if(o.textEditElement)return!0;var e=o.getSelectElements(!0);t.lf.clearSelectElements();var n=t.lf.graphModel.editConfigModel;return e.edges.forEach((function(e){var r=e.properties;if(r&&!(0,Vt.A)(r._label)&&n.textMode===l.RM7.LABEL){var i=r._label.filter((function(t){return!t.isSelected}));if(!(0,fp.A)(i.length,r._label.length)){var a=o.getEdgeModelById(e.id);return void(null===a||void 0===a||a.setProperty("_label",i))}}e.id&&t.lf.deleteEdge(e.id)})),e.nodes.forEach((function(e){var r=e.properties;if(r&&!(0,Vt.A)(r._label)&&n.textMode===l.RM7.LABEL){var i=r._label.filter((function(t){return!t.isSelected}));if(!(0,fp.A)(i.length,r._label.length)){var a=o.getNodeModelById(e.id);return void(null===a||void 0===a||a.setProperty("_label",i))}}e.id&&t.lf.deleteNode(e.id)})),!1}))},t.prototype.updateTextMode=function(t){var e=this.lf.graphModel.editConfigModel;t!==e.textMode&&(e.updateTextMode(t),t===l.RM7.LABEL?(this.lf.tool.enableTool(zO.toolName),this.lf.tool.disableTool("text-edit-tool")):t===l.RM7.TEXT&&(this.lf.tool.enableTool("text-edit-tool"),this.lf.tool.disableTool(zO.toolName)))},t.prototype.render=function(){},t.prototype.destroy=function(){},t.pluginName="label"}(),function(t,e,n,o){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{l(o.next(t))}catch(e){i(e)}}function s(t){try{l(o["throw"](t))}catch(e){i(e)}}function l(t){t.done?n(t.value):r(t.value).then(a,s)}l((o=o.apply(t,e||[])).next())}))}),GO=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(i&&(i=0,s[0]&&(a=0)),a)try{if(n=1,o&&(r=2&s[0]?o["return"]:s[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},XO=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},UO=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},VO={};function KO(t){return t.startsWith("data:text/plain")}function qO(t){return YO(this,void 0,void 0,(function(){return GO(this,(function(e){return VO[t]?[2,VO[t]]:[2,new Promise((function(e,n){try{fetch(t).then((function(t){return t.blob()})).then((function(o){var r=new FileReader;r.onloadend=function(){e(VO[t]=r.result)},r.onerror=n,r.readAsDataURL(o)})).catch((function(){e(VO[t]=t)}))}catch(o){return VO[t]=t}}))]}))}))}function ZO(t,e){return YO(this,void 0,void 0,(function(){var n,o,r;return GO(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=t.getAttribute(e)||"",n.startsWith("data:")?[2]:[4,qO(n)];case 1:return o=i.sent(),KO(o)?[2]:(t.setAttribute(e,o),[3,3]);case 2:return r=i.sent(),console.error(r),[3,3];case 3:return[2]}}))}))}function $O(t,e){return YO(this,void 0,void 0,(function(){var n,o;return GO(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e.startsWith("data:")?[2]:[4,qO(e)];case 1:return n=r.sent(),KO(n)?[2]:(t.style.backgroundImage="url(".concat(n,")"),[3,3]);case 2:return o=r.sent(),console.error(o),[3,3];case 3:return[2]}}))}))}function JO(t){return YO(this,void 0,void 0,(function(){var e,n,o,r,i,a,s,l,u;return GO(this,(function(c){switch(c.label){case 0:e=[t],o=[];while(e.length)n=e.shift(),n.children.length&&e.push.apply(e,UO([],XO(n.children),!1)),n instanceof HTMLElement&&(r=n.style,i=r.background,a=r.backgroundImage,s=i.match(/url\(["']?(.*?)["']?\)/),s&&s[1]&&(u=s[1],o.push($O(n,u))),l=a.match(/url\(["']?(.*?)["']?\)/),l&&l[1]&&(u=l[1],o.push($O(n,u)))),n instanceof HTMLImageElement?o.push(ZO(n,"src")):n instanceof SVGImageElement&&o.push(ZO(n,"href"));return[4,Promise.all(o)];case 1:return c.sent(),[2]}}))}))}function QO(t,e,n){var o=document.createElement("canvas");o.width=e,o.height=n;var r=o.getContext("2d");return r&&r.drawImage(t,0,0,t.width,t.height,0,0,e,n),o}var tC=function(t,e,n,o){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{l(o.next(t))}catch(e){i(e)}}function s(t){try{l(o["throw"](t))}catch(e){i(e)}}function l(t){t.done?n(t.value):r(t.value).then(a,s)}l((o=o.apply(t,e||[])).next())}))},eC=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(i&&(i=0,s[0]&&(a=0)),a)try{if(n=1,o&&(r=2&s[0]?o["return"]:s[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},nC=function(){function t(t){var e=t.lf,n=this;this.lf=e,this.customCssRules="",this.useGlobalRules=!0,e.getSnapshot=function(t,e){return tC(n,void 0,void 0,(function(){return eC(this,(function(n){switch(n.label){case 0:return[4,this.getSnapshot(t,e)];case 1:return[2,n.sent()]}}))}))},e.getSnapshotBlob=function(t,e){return tC(n,void 0,void 0,(function(){return eC(this,(function(n){switch(n.label){case 0:return[4,this.getSnapshotBlob(t,e)];case 1:return[2,n.sent()]}}))}))},e.getSnapshotBase64=function(t,e){return tC(n,void 0,void 0,(function(){return eC(this,(function(n){switch(n.label){case 0:return[4,this.getSnapshotBase64(t,e)];case 1:return[2,n.sent()]}}))}))}}return t.prototype.getSvgRootElement=function(t){var e=t.container.querySelector(".lf-canvas-overlay");return e},t.prototype.triggerDownload=function(t){var e=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download",this.fileName),n.setAttribute("href",t),n.setAttribute("target","_blank"),n.dispatchEvent(e)},t.prototype.removeAnchor=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,o=0;o<n;o++){var r=e[o],i=r.classList&&Array.from(r.classList)||[];i.indexOf("lf-anchor")>-1&&(t.removeChild(t.childNodes[o]),n--,o--)}},t.prototype.removeRotateControl=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,o=0;o<n;o++){var r=e[o],i=r.classList&&Array.from(r.classList)||[];i.indexOf("lf-rotate-control")>-1&&(t.removeChild(t.childNodes[o]),n--,o--)}},t.prototype.getSnapshot=function(t,e){return tC(this,void 0,void 0,(function(){var n,o,r,i,a=this;return eC(this,(function(s){switch(s.label){case 0:return n=this.lf.graphModel.getPartial(),o=(null!==e&&void 0!==e?e:{}).partial,r=void 0===o?n:o,i=this.lf.getEditConfig(),this.lf.updateEditConfig({isSilentMode:!0,stopScrollGraph:!0,stopMoveGraph:!0}),n===r?[3,1]:(this.lf.graphModel.setPartial(r),this.lf.graphModel.eventCenter.once("graph:updated",(function(){return tC(a,void 0,void 0,(function(){return eC(this,(function(o){switch(o.label){case 0:return[4,this.snapshot(t,e)];case 1:return o.sent(),this.lf.graphModel.setPartial(n),[2]}}))}))})),[3,3]);case 1:return[4,this.snapshot(t,e)];case 2:s.sent(),s.label=3;case 3:return this.lf.updateEditConfig(i),[2]}}))}))},t.prototype.snapshot=function(t,e){return tC(this,void 0,void 0,(function(){var n,o,r,i,a,s,l,u,c,d=this;return eC(this,(function(h){switch(h.label){case 0:return n=null!==e&&void 0!==e?e:{},o=n.fileType,r=void 0===o?"png":o,i=n.quality,this.fileName="".concat(null!==t&&void 0!==t?t:"logic-flow.".concat(Date.now()),".").concat(r),a=this.getSvgRootElement(this.lf),[4,JO(a)];case 1:return h.sent(),"svg"===r?(s=this.cloneSvg(a),l=(new XMLSerializer).serializeToString(s),u=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(u),this.triggerDownload(c)):this.getCanvasData(a,null!==e&&void 0!==e?e:{}).then((function(t){var e=t.toDataURL("image/".concat(r),i).replace("image/".concat(r),"image/octet-stream");d.triggerDownload(e)})),[2]}}))}))},t.prototype.getSnapshotBase64=function(t,e){return tC(this,void 0,void 0,(function(){var n,o=this;return eC(this,(function(r){switch(r.label){case 0:return n=this.getSvgRootElement(this.lf),[4,JO(n)];case 1:return r.sent(),[2,new Promise((function(r){o.getCanvasData(n,{backgroundColor:t}).then((function(t){var n=t.toDataURL("image/".concat(null!==e&&void 0!==e?e:"png"));r({data:n,width:t.width,height:t.height})}))}))]}}))}))},t.prototype.getSnapshotBlob=function(t,e){return tC(this,void 0,void 0,(function(){var n,o=this;return eC(this,(function(r){switch(r.label){case 0:return n=this.getSvgRootElement(this.lf),[4,JO(n)];case 1:return r.sent(),[2,new Promise((function(r){o.getCanvasData(n,{backgroundColor:t}).then((function(t){t.toBlob((function(e){r({data:e,width:t.width,height:t.height})}),"image/".concat(null!==e&&void 0!==e?e:"png"))}))}))]}}))}))},t.prototype.getClassRules=function(){var t="";if(this.useGlobalRules)for(var e=document.styleSheets,n=0;n<e.length;n++){var o=e[n];try{for(var r=0;r<o.cssRules.length;r++)t+=o.cssRules[r].cssText}catch(i){console.log("CSS scripts from different sources have been filtered out")}}return this.customCssRules&&(t+=this.customCssRules),t},t.prototype.getCanvasData=function(t,e){return tC(this,void 0,void 0,(function(){var n,o,r,i,a,s,l,u,c,d,h,p,f,v,g,y,m,b,x,w,_,E,A,S,O,C;return eC(this,(function(N){return n=e.width,o=e.height,r=e.backgroundColor,i=e.padding,a=void 0===i?40:i,s=this.cloneSvg(t,!1),l=window.devicePixelRatio||1,l<1&&(l=1),u=this.lf.graphModel.rootEl.querySelector(".lf-base"),c=u.getBoundingClientRect(),d=this.lf.container.querySelector(".lf-canvas-overlay"),h=d.getBoundingClientRect(),p=c.x-h.x,f=c.y-h.y,v=this.lf.graphModel,g=v.transformModel,y=g.SCALE_X,m=g.SCALE_Y,b=g.TRANSLATE_X,x=g.TRANSLATE_Y,s.lastChild.style.transform="matrix(1, 0, 0, 1, ".concat((-p+b)*(1/y),", ").concat((-f+x)*(1/m),")"),w=Math.ceil(c.width/y),_=Math.ceil(c.height/m),E=document.createElement("canvas"),E.style.width="".concat(w,"px"),E.style.height="".concat(_,"px"),E.width=w*l+2*a,E.height=_*l+2*a,A=E.getContext("2d"),A&&(A.clearRect(0,0,E.width,E.height),A.scale(l,l),r?(A.fillStyle=r,A.fillRect(0,0,E.width,E.height)):A.clearRect(0,0,E.width,E.height)),S=new Image,O=document.createElement("style"),O.innerHTML=this.getClassRules(),C=document.createElement("foreignObject"),C.appendChild(O),s.appendChild(C),[2,new Promise((function(t){S.onload=function(){var e=navigator.userAgent.indexOf("Firefox")>-1;try{e?createImageBitmap(S,{resizeWidth:n&&o?QO(E,n,o).width:E.width,resizeHeight:n&&o?QO(E,n,o).height:E.height}).then((function(e){null===A||void 0===A||A.drawImage(e,a/l,a/l),t(n&&o?QO(E,n,o):E)})):(null===A||void 0===A||A.drawImage(S,a/l,a/l),t(n&&o?QO(E,n,o):E))}catch(r){null===A||void 0===A||A.drawImage(S,a/l,a/l),t(n&&o?QO(E,n,o):E)}};var e="data:image/svg+xml;charset=utf-8,".concat((new XMLSerializer).serializeToString(s)),r=e.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");S.src=r}))]}))}))},t.prototype.cloneSvg=function(t,e){var n,o=this;void 0===e&&(e=!0);var r=t.cloneNode(!0),i=r.lastChild,a=null===(n=null===i||void 0===i?void 0:i.childNodes)||void 0===n?void 0:n.length;if(a)for(var s=0;s<a;s++){var l=null===i||void 0===i?void 0:i.childNodes[s],u=l.classList&&Array.from(l.classList);if(u&&u.indexOf("lf-base")<0)null===i||void 0===i||i.removeChild(i.childNodes[s]),a--,s--;else{var c=null===i||void 0===i?void 0:i.childNodes[s];c&&c.childNodes.forEach((function(t){var e=t;o.removeAnchor(e.firstChild),o.removeRotateControl(e.firstChild)}))}}if(e){var d=document.createElement("style");d.innerHTML=this.getClassRules();var h=document.createElement("foreignObject");h.appendChild(d),r.appendChild(h)}return r},t.pluginName="snapshot",t}(),oC=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},rC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},iC=(function(){function t(t){var e=t.lf,n=this;this.lf=e,this.paths=[],e.getPathes=function(){if(!n.startNodeType)throw new Error("");return n.getPathes()},e.setRawPaths=function(t){n.setPathes(t)},e.getRawPathes=function(){return n.paths},e.setStartNodeType=function(t){n.startNodeType=t}}t.prototype.setPathes=function(t){this.paths=t.map((function(t){var e=t.routeId,n=t.name,o=t.elements,r=t.type;return{routeId:e,name:n,elements:o,type:r,similarElement:null,weight:0}}))},t.prototype.getPathes=function(){var t=this,e=this.lf.getGraphRawData(),n=new Map,o=[];e.nodes.forEach((function(e){n.set(e.id,{id:e.id,data:e,nextNodes:[]}),e.type===t.startNodeType&&o.push(e.id)})),e.edges.forEach((function(t){var e=n.get(t.sourceNodeId);null===e||void 0===e||e.nextNodes.push(t.targetNodeId)}));var r=[];return o.forEach((function(e){var o=n.get(e);o&&(r=r.concat(t.findPathElements(o,n,[])))})),this.getNewPathes(r)},t.prototype.findPathElements=function(t,e,n){void 0===n&&(n=[]);var o=rC([],oC(n),!1);if(o.push(t.id),0===t.nextNodes.length)return[o];for(var r=[],i=0;i<t.nextNodes.length;i++){var a=e.get(t.nextNodes[i]),s=void 0;if(a){var l=o.indexOf(a.id);s=-1!==l?[rC(rC([],oC(o.slice(l)),!1),[a.id],!1)]:this.findPathElements(a,e,rC([],oC(o),!1)),r=r.concat(s)}}return r},t.prototype.getNewPathes=function(t){var e=this,n=[],o=new Set;t.forEach((function(t){var r=e.getNewId("path"),i=e.getNewId(""),a=e.isLoopPath(t),s=t.join(",");o.has(s)||(o.add(s),n.push({routeId:r,name:i,elements:t,type:a,weight:0,similarElement:""}))}));var r=JSON.parse(JSON.stringify(this.paths));return n.forEach((function(t){for(var n=0;n<r.length;n++){var o=r[n],i=e.similar2Path(rC([],oC(t.elements),!1),rC([],oC(o.elements),!1));i>t.weight&&o.weight<=i&&(t.weight=i,t.similarElement=o,i===o.weight&&o.similarElement?(o.similarElement.similarElement=null,o.similarElement.weight=0,o.similarElement=null,o.weight=0):(o.similarElement=t,o.weight=i))}})),n.forEach((function(t){t.similarElement&&t.similarElement.similarElement===t&&(t.routeId=t.similarElement.routeId,t.name=t.similarElement.name),delete t.similarElement,delete t.weight})),this.setPathes(n),n},t.prototype.similar2Path=function(t,e){var n=0,o=t.length+e.length;t.sort(),e.sort();var r=t.shift(),i=e.shift();while(void 0!==r&&void 0!==i)r===i?(n++,r=t.shift(),i=e.shift()):r<i?r=t.shift():r>i&&(i=e.shift());return n/o*200},t.prototype.getNewId=function(t){return"".concat(t,"_").concat(d())},t.prototype.isLoopPath=function(t){var e=t.length;return t.indexOf(t[e-1])!==e-1?1:0},t.pluginName="flowPath"}(),function(){return iC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},iC.apply(this,arguments)}),aC={LEFT_TOP:-1,LEFT:0,LEFT_BOTTOM:1},sC=(function(){function t(t){var e=t.lf,n=this;this.levelHeight=[],this.newNodeMap=new Map,this.lf=e,this.trunk=[],e.layout=function(t){var e=n.lf.getGraphRawData();n.lf.setStartNodeType(t);var o=n.lf.getPathes();return n.levelHeight=[],n.newNodeMap=new Map,n.layout(e,o)}}t.prototype.layout=function(t,e){var n=this,o=[];e.forEach((function(t){var e=t.elements;e.length>o.length?o=e:e.length===o.length&&JSON.stringify(e)===JSON.stringify(n.trunk)&&(o=n.trunk)})),this.trunk=o;for(var r=this.formatData(t),i={nodes:[],edges:[]},a=o.length-1;a>=0;a--)this.setNodePosition(o[a],r,i,a,1);this.lf.graphModel.graphDataToModel(i)},t.prototype.setNodePosition=function(t,e,n,o,r){var i=this,a=e[t],s=a.text,l=a.type,u=a.next,c=a.properties,d=160*o+40,h=120*r,p={id:t,x:d,text:s,y:h,type:l,properties:c};return s&&"object"===typeof s&&(p.text=iC(iC({},s),{x:d+s.x,y:h+s.y})),this.newNodeMap.set(p.id,{x:p.x,y:p.y,type:l}),n.nodes.push(p),a.isFixed=!0,this.addLevelHeight(o,1),u&&u.length>0&&u.forEach((function(r){var a=e[r.nodeId];if(!a.isFixed){var s=i.getLevelHeight(o+1);i.addLevelHeight(o,1),i.setNodePosition(r.nodeId,e,n,o+1,s+1)}n.edges.push(iC({id:r.edgeId,type:r.edgeType,sourceNodeId:t,targetNodeId:r.nodeId,properties:r.properties,text:r.text},i.getEdgeDataPoints(t,r.nodeId)))})),p},t.prototype.getEdgeDataPoints=function(t,e){var n=this.newNodeMap.get(t),o=this.newNodeMap.get(e),r=this.getShape(t),i=r.width,a=r.height,s=this.getShape(e),l=s.width,u=s.height,c=this.getRelativePosition(n,o),d={x:n.x,y:n.y},h={x:o.x,y:o.y};switch(c){case aC.LEFT:d.x=n.x+i/2,h.x=o.x-l/2;break;case aC.LEFT_TOP:d.y=n.y+a/2,h.x=o.x-l/2;break;case aC.LEFT_BOTTOM:d.x=n.x+i/2,h.y=o.y+u/2;break;default:break}return{startPoint:d,endPoint:h}},t.prototype.getRelativePosition=function(t,e){var n,o=t.y,r=e.y;return n=o<r?-1:o===r?0:1,n},t.prototype.getShape=function(t){var e,n,o=this.lf.getNodeModelById(t);return{height:null!==(e=null===o||void 0===o?void 0:o.height)&&void 0!==e?e:0,width:null!==(n=null===o||void 0===o?void 0:o.width)&&void 0!==n?n:0}},t.prototype.formatData=function(t){var e=t.nodes.reduce((function(t,e){var n=e.type,o=e.properties,r=e.text,i=e.x,a=e.y;return r&&"object"===typeof r&&(r.x=r.x-i,r.y=r.y-a),t[e.id]={type:n,properties:o,text:r,prev:[],next:[]},t}),{});return t.edges.forEach((function(t){var n=t.sourceNodeId,o=t.targetNodeId,r=t.id,i=t.properties,a=t.text,s=a;"object"===typeof a&&(s=a.value),e[n].next.push({edgeId:r,nodeId:o,edgeType:t.type,properties:i,text:s}),e[o].prev.push({edgeId:r,nodeId:n,properties:i,text:s})})),e},t.prototype.addLevelHeight=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var o=this.levelHeight[t];o||(o={positiveHeight:0,negativeHeight:0},this.levelHeight[t]=o),n?o.negativeHeight-=e:o.positiveHeight+=e},t.prototype.getLevelHeight=function(t,e){void 0===e&&(e=!1);var n=this.levelHeight[t];return n?e?n.negativeHeight:n.positiveHeight:0},t.pluginName="AutoLayout"}(),function(){return sC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},sC.apply(this,arguments)}),lC=(function(){function t(t){var e=t.lf,n=t.options;this.enable=!0,this.currentDistance=1/0,this.thresholdDistance=100,this.reverseDirection=!1,this.virtualEdgeStyle={strokeDasharray:"10,10",stroke:"#acacac"},this.lf=e,(0,bg.A)(this,n)}t.prototype.render=function(){this.addEventListeners()},t.prototype.addEventListeners=function(){var t=this;this.lf.graphModel.eventCenter.on("node:dragstart",(function(e){var n=e.data;if(t.enable){var o=t.lf.graphModel,r=n.id;t.currentNode=o.getNodeModelById(r)}})),this.lf.graphModel.eventCenter.on("node:drag",(function(){t.handleNodeDrag()})),this.lf.graphModel.eventCenter.on("anchor:dragstart",(function(e){var n=e.data,o=e.nodeModel;t.enable&&(t.currentNode=o,t.currentAnchor=n)})),this.lf.graphModel.eventCenter.on("anchor:drag",(function(e){var n=e.e,o=n.clientX,r=n.clientY;t.enable&&t.handleAnchorDrag(o,r)})),this.lf.graphModel.eventCenter.on("node:drop,anchor:dragend",(function(){t.enable&&t.handleDrop()}))},t.prototype.handleNodeDrag=function(){var t=this.lf.graphModel.nodes;if(!(0,qp.A)(this.virtualEdge)){var e=this.virtualEdge,n=e.startPoint,o=e.endPoint,r=e.id,i=(0,l.swm)(n,o);i>this.thresholdDistance&&(this.lf.deleteEdge(r),this.virtualEdge=void 0)}this.currentNode&&this.findClosestAnchorOfNode(this.currentNode,t),this.currentDistance<this.thresholdDistance&&this.addVirtualEdge()},t.prototype.handleDrop=function(){this.addActualEdge(),this.resetData()},t.prototype.handleAnchorDrag=function(t,e){var n=this.lf.graphModel,o=n.getPointByClient({x:t,y:e}).canvasOverlayPosition,r=o.x,i=o.y;if(!(0,qp.A)(r)&&!(0,qp.A)(i)){var a={x:r,y:i},s=n.nodes;if(!(0,qp.A)(this.virtualEdge)){var u=this.virtualEdge,c=u.endPoint,d=u.id,h=(0,l.swm)(a,c);h>this.thresholdDistance&&(this.lf.deleteEdge(d),this.virtualEdge=void 0)}this.findClosestAnchorOfAnchor(a,s),this.currentDistance<this.thresholdDistance&&this.addVirtualEdge()}},t.prototype.findClosestAnchorOfNode=function(t,e){var n=this;if(!(0,qp.A)(t)&&!(0,Vt.A)(t)){var o,r,i,a,s=t.anchors,u=void 0===s?[]:s,c=t.id;e.forEach((function(t){if(!(0,fp.A)(t.id,c)){var e=t.anchors,s=void 0===e?[]:e;s.forEach((function(e){u.forEach((function(s){var u=n.anchorAllowConnect(t,e,s);if(u){var c=(0,l.swm)(s,e);(!o||c<o)&&(o=c,r=s,i=e,a=t)}}))}))}})),this.currentDistance=o,this.currentAnchor=r,this.closestAnchor=i,this.closestNode=a}},t.prototype.findClosestAnchorOfAnchor=function(t,e){var n=this;if(!(0,qp.A)(t)){var o,r,i,a=this,s=a.currentNode,u=a.currentAnchor;e.forEach((function(e){if(s){var a=e.anchors,c=void 0===a?[]:a;c.forEach((function(a){var s;if(!(0,fp.A)(null===(s=n.currentAnchor)||void 0===s?void 0:s.id,a.id)){var c=n.anchorAllowConnect(e,a,u);if(c){var d=(0,l.swm)(t,a);(!o||d<o)&&(o=d,r=a,i=e)}}}))}})),this.currentDistance=o,this.closestAnchor=r,this.closestNode=i}},t.prototype.anchorAllowConnect=function(t,e,n){var o=this.currentNode;if(o){var r=(this.reverseDirection?t.isAllowConnectedAsSource(o,e,n):o.isAllowConnectedAsSource(t,n,e)).isAllPass,i=(this.reverseDirection?o.isAllowConnectedAsTarget(t,e,n):t.isAllowConnectedAsTarget(o,n,e)).isAllPass;return r&&i}},t.prototype.sameEdgeIsExist=function(t){if((0,qp.A)(this.closestNode)||(0,qp.A)(this.currentNode)||(0,qp.A)(this.closestAnchor)||(0,qp.A)(this.currentAnchor))return!1;if((0,qp.A)(t))return!1;var e=this,n=e.closestNode.id,o=e.currentNode.id,r=e.closestAnchor.id,i=e.currentAnchor.id,a=e.reverseDirection,s=t.sourceNodeId,l=t.targetNodeId,u=t.sourceAnchorId,c=t.targetAnchorId,d=a?(0,fp.A)(n,s)&&(0,fp.A)(o,l)&&(0,fp.A)(r,u)&&(0,fp.A)(i,c):(0,fp.A)(o,s)&&(0,fp.A)(n,l)&&(0,fp.A)(i,u)&&(0,fp.A)(r,c);return d},t.prototype.addVirtualEdge=function(){var t=this,e=this.lf.graphModel.edges,n=(0,_s.A)(e,(function(e,n){return n.virtual?e:e||t.sameEdgeIsExist(n)}),!1);if(!n){if(!(0,qp.A)(this.virtualEdge)){var o=this.virtualEdge.id;if(this.sameEdgeIsExist(this.virtualEdge))return;this.lf.deleteEdge(o)}var r=this,i=r.reverseDirection,a=r.currentNode,s=r.closestNode,l=r.currentAnchor,u=r.closestAnchor;if(!(0,Vt.A)(a)&&!(0,Vt.A)(s)){var c={style:this.virtualEdgeStyle};this.virtualEdge=this.lf.addEdge(i?{sourceNodeId:null===s||void 0===s?void 0:s.id,targetNodeId:null===a||void 0===a?void 0:a.id,sourceAnchorId:null===u||void 0===u?void 0:u.id,targetAnchorId:null===l||void 0===l?void 0:l.id,properties:c}:{sourceNodeId:null===a||void 0===a?void 0:a.id,targetNodeId:null===s||void 0===s?void 0:s.id,sourceAnchorId:null===l||void 0===l?void 0:l.id,targetAnchorId:null===u||void 0===u?void 0:u.id,properties:c}),this.virtualEdge.virtual=!0}}},t.prototype.addActualEdge=function(){if(!(0,qp.A)(this.virtualEdge)){var t=this.virtualEdge,e=t.type,n=t.sourceNodeId,o=t.targetNodeId,r=t.sourceAnchorId,i=t.targetAnchorId,a=t.startPoint,s=t.endPoint,l=t.pointsList;this.lf.addEdge({type:e,sourceNodeId:n,targetNodeId:o,sourceAnchorId:r,targetAnchorId:i,startPoint:a,endPoint:s,pointsList:l}),this.lf.deleteEdge(this.virtualEdge.id)}},t.prototype.setVirtualEdgeStyle=function(t){this.virtualEdgeStyle=sC(sC({},this.virtualEdgeStyle),t)},t.prototype.setThresholdDistance=function(t){console.log("distance",t),Ap(t)&&(this.thresholdDistance=t)},t.prototype.setReverseDirection=function(t){this.reverseDirection=t},t.prototype.setEnable=function(t){this.enable=t,t||this.resetData()},t.prototype.resetData=function(){this.closestNode=void 0,this.currentDistance=1/0,this.currentNode=void 0,this.currentAnchor=void 0,this.closestAnchor=void 0,this.virtualEdge=void 0},t.pluginName="proximityConnect"}(),function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a}),uC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},cC=(function(){function t(t){var e=t.lf,n=this;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){n.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){n.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){n.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){n.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){n.lf.redo()}}],this.lf=e}t.prototype.render=function(t,e){this.destroy();var n=this.getControlTool();this.toolEl=n,e.appendChild(n),this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},t.prototype.addItem=function(t){this.controlItems.push(t)},t.prototype.removeItem=function(t){var e=this.controlItems.findIndex((function(e){return e.key===t}));return-1==e?null:this.controlItems.splice(e,1)[0]},t.prototype.getControlTool=function(){var t=this,e="lf-control-item",n="lf-control-item disabled",o=document.createElement("div"),r=[];return o.className="lf-control",this.controlItems.forEach((function(o){var i=document.createElement("div"),a=document.createElement("i"),s=document.createElement("span");switch(i.className=n,o.onClick&&(i.onclick=o.onClick.bind(null,t.lf)),o.onMouseEnter&&(i.onmouseenter=o.onMouseEnter.bind(null,t.lf)),o.onMouseLeave&&(i.onmouseleave=o.onMouseLeave.bind(null,t.lf)),a.className=o.iconClass,s.className="lf-control-text",s.title=o.title,s.innerText=o.text,i.append(a,s),o.text){case"":t.lf.on("history:change",(function(t){var o=t.data.undoAble;i.className=o?e:n}));break;case"":t.lf.on("history:change",(function(t){var o=t.data.redoAble;i.className=o?e:n}));break;default:i.className=e;break}r.push(i)})),o.append.apply(o,uC([],lC(r),!1)),o},t.pluginName="control"}(),function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a}),dC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},hC="lf:defaultNodeMenu",pC="lf:defaultEdgeMenu",fC="lf:defaultGraphMenu",vC="lf:defaultSelectionMenu",gC=function(){function t(t){var e=t.lf,n=this;this.__currentData=null,this.lf=e;var o=e.options.isSilentMode;o||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(t){n.setMenuConfig(t)},this.lf.addMenuConfig=function(t){n.addMenuConfig(t)},this.lf.setMenuByType=function(t){n.setMenuByType(t)})}return t.prototype.init=function(){var t,e,n,o,r=this,i=[{text:"",callback:function(t){r.lf.deleteNode(t.id)}},{text:"",callback:function(t){r.lf.graphModel.editText(t.id)}},{text:"",callback:function(t){r.lf.cloneNode(t.id)}}];null===(t=this.menuTypeMap)||void 0===t||t.set(hC,i);var a=[{text:"",callback:function(t){r.lf.deleteEdge(t.id)}},{text:"",callback:function(t){r.lf.graphModel.editText(t.id)}}];null===(e=this.menuTypeMap)||void 0===e||e.set(pC,a),null===(n=this.menuTypeMap)||void 0===n||n.set(fC,[]);var s=[{text:"",callback:function(t){r.lf.clearSelectElements(),t.edges.forEach((function(t){return r.lf.deleteEdge(t.id)})),t.nodes.forEach((function(t){return r.lf.deleteNode(t.id)}))}}];null===(o=this.menuTypeMap)||void 0===o||o.set(vC,s)},t.prototype.render=function(t,e){var n=this;t.options.isSilentMode||(this.__container=e,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",e.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",(function(t){t.stopPropagation();var e=t.target;while(-1===Array.from(e.classList).indexOf("lf-menu-item")&&-1===Array.from(e.classList).indexOf("lf-menu"))e=null===e||void 0===e?void 0:e.parentElement;Array.from(e.classList).indexOf("lf-menu-item")>-1?(e.onclickCallback(n.__currentData),n.__menuDOM&&(n.__menuDOM.style.display="none"),n.__currentData=null):console.warn("")}),!0)),this.lf.on("node:contextmenu",(function(t){var e,o,r=t.data,i=t.position,a=t.e,s=i.domOverlayPosition,l=s.x,u=s.y,c=r.id,d=n.lf.graphModel.getNodeModelById(c);if(d){var h=[],p=null===(e=n.menuTypeMap)||void 0===e?void 0:e.get(d.type);h=d&&d.menu&&Array.isArray(d.menu)?d.menu:p||(null===(o=n.menuTypeMap)||void 0===o?void 0:o.get(hC)),n.__currentData=r,n.showMenu(l,u,h,{width:d.width,height:d.height,clientX:a.clientX,clientY:a.clientY})}})),this.lf.on("edge:contextmenu",(function(t){var e,o,r,i=t.data,a=t.position,s=t.e,l=a.domOverlayPosition,u=l.x,c=l.y,d=i.id,h=n.lf.graphModel.getEdgeModelById(d);if(h){var p=[],f=null===(e=n.menuTypeMap)||void 0===e?void 0:e.get(h.type);p=h&&h.menu&&Array.isArray(h.menu)?h.menu:f||(null!==(r=null===(o=n.menuTypeMap)||void 0===o?void 0:o.get(pC))&&void 0!==r?r:[]),n.__currentData=i,n.showMenu(u,c,p,{width:h.width,height:h.height,clientX:s.clientX,clientY:s.clientY})}})),this.lf.on("blank:contextmenu",(function(t){var e,o,r=t.position,i=null!==(o=null===(e=n.menuTypeMap)||void 0===e?void 0:e.get(fC))&&void 0!==o?o:[],a=r.domOverlayPosition,s=a.x,l=a.y;n.showMenu(s,l,i)})),this.lf.on("selection:contextmenu",(function(t){var e,o=t.data,r=t.position,i=null===(e=n.menuTypeMap)||void 0===e?void 0:e.get(vC),a=r.domOverlayPosition,s=a.x,l=a.y;n.__currentData=o,n.showMenu(s,l,i)})),this.lf.on("node:mousedown",(function(){n.__menuDOM.style.display="none"})),this.lf.on("edge:click",(function(){n.__menuDOM.style.display="none"})),this.lf.on("blank:click",(function(){n.__menuDOM.style.display="none"})))},t.prototype.destroy=function(){var t;this.__menuDOM&&(null===(t=null===this||void 0===this?void 0:this.__container)||void 0===t||t.removeChild(this.__menuDOM),this.__menuDOM=void 0)},t.prototype.showMenu=function(t,e,n,o){if(n&&n.length){var r=this.__menuDOM;if(r){if(r.innerHTML="",r.append.apply(r,dC([],cC(this.__getMenuDom(n)),!1)),!r.children.length)return;if(r.style.display="block",!o)return r.style.top="".concat(e,"px"),void(r.style.left="".concat(t,"px"));var i=o.width,a=o.height,s=o.clientX,l=o.clientY,u=this.lf.graphModel,c=r.offsetWidth,d=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=h-s,f=u.rootEl.getBoundingClientRect(),v=f.left+f.width;v<h&&(p=v-s),p<c&&(d=!1),r.style.left="".concat(d?t:t-i,"px");var g=r.offsetHeight,y=!0,m=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,b=m-l,x=f.top+f.height;x<m&&(b=x-l),b<g&&(y=!1),r.style.top="".concat(y?e:e-a,"px")}}},t.prototype.setMenuByType=function(t){var e,n=t.type,o=t.menu;n&&o&&(null===(e=this.menuTypeMap)||void 0===e||e.set(n,o))},t.prototype.__getMenuDom=function(t){var e=[];return t&&t.length>0&&t.forEach((function(t){var n=document.createElement("li");if(t.className?n.className="lf-menu-item ".concat(t.className):n.className="lf-menu-item",!0===t.icon){var o=document.createElement("span");o.className="lf-menu-item-icon",n.appendChild(o)}var r=document.createElement("span");r.className="lf-menu-item-text",t.text&&(r.innerText=t.text),n.appendChild(r),n.onclickCallback=t.callback,e.push(n)})),e},t.prototype.setMenuConfig=function(t){var e,n,o;t&&(void 0!==t.nodeMenu&&(null===(e=this.menuTypeMap)||void 0===e||e.set(hC,t.nodeMenu?t.nodeMenu:[])),void 0!==t.edgeMenu&&(null===(n=this.menuTypeMap)||void 0===n||n.set(pC,t.edgeMenu?t.edgeMenu:[])),void 0!==t.graphMenu&&(null===(o=this.menuTypeMap)||void 0===o||o.set(fC,t.graphMenu?t.graphMenu:[])))},t.prototype.addMenuConfig=function(t){var e,n,o,r,i,a,s,l,u;if(t){if(Array.isArray(t.nodeMenu)){var c=null!==(n=null===(e=this.menuTypeMap)||void 0===e?void 0:e.get(hC))&&void 0!==n?n:[];null===(o=this.menuTypeMap)||void 0===o||o.set(hC,c.concat(t.nodeMenu))}if(Array.isArray(t.edgeMenu)){c=null!==(i=null===(r=this.menuTypeMap)||void 0===r?void 0:r.get(pC))&&void 0!==i?i:[];null===(a=this.menuTypeMap)||void 0===a||a.set(pC,c.concat(t.edgeMenu))}if(Array.isArray(t.graphMenu)){c=null!==(l=null===(s=this.menuTypeMap)||void 0===s?void 0:s.get(fC))&&void 0!==l?l:[];null===(u=this.menuTypeMap)||void 0===u||u.set(fC,c.concat(t.graphMenu))}}},t.prototype.changeMenuItem=function(t,e){if("add"===t)this.addMenuConfig(e);else{if("reset"!==t)throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");this.setMenuConfig(e)}},t.pluginName="menu",t}(),yC=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},mC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},bC="menu-common",xC=200,wC=100,_C=(function(){function t(t){var e=t.lf,n=this;this.menuTypeMap=new Map,this.listenDelete=function(){n.hideContextMenu()},this.lf=e,this.__menuDOM=document.createElement("div"),this.__menuDOM.className="lf-inner-context",this.menuTypeMap.set(bC,[]),this.lf.setContextMenuByType=function(t,e){n.setContextMenuByType(t,e)},this.lf.setContextMenuItems=function(t){n.setContextMenuItems(t)},this.lf.showContextMenu=function(t){n.showContextMenu(t)},this.lf.hideContextMenu=function(){n.hideContextMenu()}}t.prototype.render=function(t,e){var n=this;this.container=e,t.on("node:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("edge:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("blank:click",(function(){n.hideContextMenu()}))},t.prototype.setContextMenuByType=function(t,e){this.menuTypeMap.set(t,e)},t.prototype.hideContextMenu=function(){this.__menuDOM.innerHTML="",this.__menuDOM.style.display="none",this.isShow&&this.container.removeChild(this.__menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1},t.prototype.showContextMenu=function(t){t&&t.id?(this._activeData=t,this.createContextMenu()):console.warn("")},t.prototype.setContextMenuItems=function(t){this.menuTypeMap.set(bC,t)},t.prototype.getContextMenuPosition=function(){var t=this._activeData,e=this.lf.graphModel.getElement(t.id);if(e){var n,o;if("edge"===e.BaseType){n=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;var r=e.getData();n=Math.max(r.startPoint.x,n),o=Math.min(r.startPoint.y,o),n=Math.max(r.endPoint.x,n),o=Math.min(r.endPoint.y,o),r.pointsList&&r.pointsList.forEach((function(t){n=Math.max(t.x,n),o=Math.min(t.y,o)}))}return"node"===e.BaseType&&(n=t.x+e.width/2,o=t.y-e.height/2),this.lf.graphModel.transformModel.CanvasPointToHtmlPoint([n,o])}},t.prototype.createContextMenu=function(){var t=this,e=this.lf.options.isSilentMode;if(!e){var n=mC(mC([],yC(this.menuTypeMap.get(this._activeData.type)||[]),!1),yC(this.menuTypeMap.get(bC)||[]),!1),o=document.createDocumentFragment();n.forEach((function(e){var n=document.createElement("div");n.className="lf-context-item";var r=document.createElement("img");r.src=e.icon,r.className="lf-context-img",e.className&&(n.className="".concat(n.className," ").concat(e.className)),r.addEventListener("click",(function(){t.hideContextMenu(),e.callback?e.callback(t._activeData):t.addNode({sourceId:t._activeData.id,x:t._activeData.x,y:t._activeData.y,properties:e.properties,type:e.type})})),n.appendChild(r),o.appendChild(n)})),this.__menuDOM.innerHTML="",this.__menuDOM.appendChild(o),this.showMenu()}},t.prototype.addNode=function(t,e){var n=void 0!==e;void 0===e&&(e=t.y);var o=this.lf.getNodeModelById(t.sourceId);if(o){var r=t.x-o.width+xC,i=e-t.y/2-20,a=t.x+o.width+xC,s=e+t.y/2+20,l=this.lf.getAreaElement([r,i],[a,s]);if(l.length)return e+=wC,void this.addNode(t,e);if(t.type){var u=this.lf.addNode({type:t.type,x:t.x+200,y:e,properties:t.properties}),c=void 0,d=void 0;n&&(c={x:t.x,y:t.y+o.height/2},d={x:u.x-u.width/2,y:u.y}),this.lf.addEdge({sourceNodeId:t.sourceId,targetNodeId:u.id,startPoint:c,endPoint:d})}}},t.prototype.showMenu=function(){var t=this.getContextMenuPosition();if(t){var e=yC(t,2),n=e[0],o=e[1];this.__menuDOM.style.display="flex",this.__menuDOM.style.top="".concat(o,"px"),this.__menuDOM.style.left="".concat(n+10,"px"),this.container.appendChild(this.__menuDOM),!this.isShow&&this.lf.on("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!0}},t.pluginName="contextMenu"}(),function(){function t(t){var e=t.lf,n=this;this.lf=e,this.lf.setPatternItems=function(t){n.setPatternItems(t)}}t.prototype.render=function(t,e){var n=this;this.destroy(),this.shapeList&&0!==this.shapeList.length?(this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach((function(t){var e;null===(e=n.panelEl)||void 0===e||e.appendChild(n.createDndItem(t))})),e.appendChild(this.panelEl),this.domContainer=e):this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},t.prototype.setPatternItems=function(t){this.shapeList=t,this.domContainer&&this.render(this.lf,this.domContainer)},t.prototype.createDndItem=function(t){var e=this,n=document.createElement("div");n.className=t.className?"lf-dnd-item ".concat(t.className):"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",t.icon&&(o.style.backgroundImage="url(".concat(t.icon,")")),n.appendChild(o),t.label){var r=document.createElement("div");r.innerText=t.label,r.className="lf-dnd-text",n.appendChild(r)}return t.disabled?(n.classList.add("disabled"),n.onmousedown=function(){t.callback&&t.callback(e.lf,e.domContainer)},n):(n.onmousedown=function(){t.type&&e.lf.dnd.startDrag({type:t.type,properties:t.properties,text:t.text}),t.callback&&t.callback(e.lf,e.domContainer)},n.ondblclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:n,data:t})},n.onclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:n,data:t})},n.oncontextmenu=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:n,data:t})},n)},t.pluginName="dndPanel"}(),function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),EC=(function(){function t(t){var e=t.lf,n=t.LogicFlow,o=t.options,r=this;this.width=200,this.height=150,this.scale=1,this.translateX=0,this.translateY=0,this.showEdge=!1,this.viewPortTop=0,this.viewPortLeft=0,this.viewPortWidth=150,this.viewPortHeight=75,this.isShow=!1,this.isShowHeader=!1,this.isShowCloseIcon=!1,this.headerTitle="",this.disabledPlugins=["miniMap","control","selectionSelect"],this.onGraphResize=function(){r.updateViewPortBounds(),r.isShow&&r.updateViewPort()},this.render=function(t,e){r.container=e,r.lf.on("history:change",(function(){r.isShow&&r.setView()})),r.lf.on("graph:transform",(function(){r.isShow&&r.setView(!1)}))},this.show=function(t,e){r.isShow||(r.createMiniMap(t,e),r.setView()),r.isShow=!0},this.hide=function(){r.isShow&&(r.removeMiniMap(),r.lf.emit("miniMap:close",{})),r.isShow=!1},this.updatePosition=function(t){if("object"===typeof t)void 0===t.left&&void 0===t.right||(r.leftPosition=t.left,r.rightPosition=t.right),void 0===t.top&&void 0===t.bottom||(r.topPosition=t.top,r.bottomPosition=t.bottom);else switch(t){case"left-top":r.leftPosition=0,r.rightPosition=void 0,r.topPosition=0,r.bottomPosition=void 0;break;case"right-top":r.leftPosition=void 0,r.rightPosition=0,r.topPosition=0,r.bottomPosition=void 0;break;case"left-bottom":r.leftPosition=0,r.rightPosition=void 0,r.topPosition=void 0,r.bottomPosition=0;break;case"right-bottom":r.leftPosition=void 0,r.rightPosition=0,r.topPosition=void 0,r.bottomPosition=0;break}r.updateMiniMapPosition()},this.reset=function(){r.lf.resetTranslate(),r.lf.resetZoom()},this.setShowEdge=function(t){r.showEdge!==t&&(r.showEdge=t,r.setView())},this.startDrag=function(t){document.addEventListener("mousemove",r.drag),document.addEventListener("mouseup",r.drop);var e=t.x,n=t.y;r.startPosition={x:e,y:n}},this.drag=function(t){var e=t.x,n=t.y,o=(e-r.startPosition.x)/r.scale,i=(n-r.startPosition.y)/r.scale,a=r.viewPortLeft+o+r.viewPortWidth/r.scale/2,s=r.viewPortTop+i+r.viewPortHeight/r.scale/2;r.startPosition={x:e,y:n},r.lf.focusOn({coordinate:{x:a,y:s}})},this.drop=function(){document.removeEventListener("mousemove",r.drag),document.removeEventListener("mouseup",r.drop)},this.mapClick=function(t){var e=t.offsetX,n=t.offsetY,o=r.translateX+e/r.scale,i=r.translateY+n/r.scale;r.lf.focusOn({coordinate:{x:o,y:i}})},this.lf=e,this.LFCtor=n,o&&this.setOption(o),this.viewPortWidth=e.graphModel.width,this.viewPortHeight=e.graphModel.height;var i={left:0,right:this.viewPortWidth,top:0,bottom:this.viewPortHeight};this.bounds=i,this.elementAreaBounds=i,this.viewPortBounds=i,this.initMiniMap(),e.on("graph:resize",this.onGraphResize)}t.prototype.setOption=function(t){var e=t.width,n=void 0===e?150:e,o=t.height,r=void 0===o?220:o,i=t.showEdge,a=void 0!==i&&i,s=t.isShowHeader,l=void 0!==s&&s,u=t.isShowCloseIcon,c=void 0!==u&&u,d=t.leftPosition,h=t.topPosition,p=t.rightPosition,f=void 0===p?0:p,v=t.bottomPosition,g=void 0===v?0:v,y=t.headerTitle,m=void 0===y?"":y;this.width=n,this.height=r,this.showEdge=a,this.isShowHeader=l,this.isShowCloseIcon=c,this.leftPosition=d,this.rightPosition=void 0!==d?void 0:f,this.topPosition=h,this.bottomPosition=void 0!==h?void 0:g,this.headerTitle=m},t.prototype.initMiniMap=function(){var t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width="".concat(this.width,"px"),t.style.height="".concat(this.height,"px"),this.lfMap=new this.LFCtor({container:t,grid:!1,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!1,history:!1,snapline:!1,disabledPlugins:this.disabledPlugins}),this.miniMapWrap=t,this.createViewPort(),t.addEventListener("click",this.mapClick)},t.prototype.createMiniMap=function(t,e){var n,o=document.createElement("div");this.miniMapContainer=o,o.appendChild(this.miniMapWrap),o.style.position="absolute",void 0===t&&void 0===e||(this.leftPosition=t||0,this.topPosition=e||0,this.rightPosition=void 0,this.bottomPosition=void 0),this.updateMiniMapPosition(),o.className="lf-mini-map",this.isShowCloseIcon||o.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||o.classList.add("lf-mini-map-no-header"),null===(n=this.container)||void 0===n||n.appendChild(o),this.miniMapWrap.appendChild(this.viewport);var r=document.createElement("div");r.className="lf-mini-map-header",r.innerText=this.headerTitle,o.appendChild(r);var i=document.createElement("span");i.className="lf-mini-map-close",i.addEventListener("click",this.hide),o.appendChild(i)},t.prototype.updateMiniMapPosition=function(){if(this.miniMapContainer){var t=this.miniMapContainer.style;void 0!==this.rightPosition?(t.right="".concat(this.rightPosition,"px"),t.left=""):(t.left="".concat(this.leftPosition,"px"),t.right=""),void 0!==this.bottomPosition?(t.bottom="".concat(this.bottomPosition,"px"),t.top=""):(t.top="".concat(this.topPosition,"px"),t.bottom="")}},t.prototype.removeMiniMap=function(){var t;this.miniMapContainer&&(null===(t=this.container)||void 0===t||t.removeChild(this.miniMapContainer))},t.prototype.updateBounds=function(t){t&&this.updateElementAreaBounds(t),this.updateViewPortBounds(),this.bounds={left:Math.min(this.elementAreaBounds.left,this.viewPortBounds.left),right:Math.max(this.elementAreaBounds.right,this.viewPortBounds.right),top:Math.min(this.elementAreaBounds.top,this.viewPortBounds.top),bottom:Math.max(this.elementAreaBounds.bottom,this.viewPortBounds.bottom)}},t.prototype.updateElementAreaBounds=function(t){var e={left:0,right:0,top:0,bottom:0},n=t.nodes;n&&n.length>0&&n.forEach((function(t){var n,o,r=t.x,i=t.y,a=null!==(n=t.width)&&void 0!==n?n:200,s=null!==(o=t.height)&&void 0!==o?o:200,l=r-a/2,u=r+a/2,c=i-s/2,d=i+s/2;e.left=Math.min(l,e.left),e.right=Math.max(u,e.right),e.top=Math.min(c,e.top),e.bottom=Math.max(d,e.bottom)})),this.elementAreaBounds=e},t.prototype.updateViewPortBounds=function(){var t=this.lf.getTransform(),e=t.TRANSLATE_X,n=t.TRANSLATE_Y,o=t.SCALE_X,r=t.SCALE_Y,i=this.lf.graphModel,a=i.width,s=i.height;this.viewPortBounds={left:-e/o,right:(-e+a)/o,top:-n/r,bottom:(-n+s)/r}},t.prototype.resetData=function(t){var e=t.nodes,n=t.edges;return e.forEach((function(t){t.text=void 0})),this.showEdge&&n.forEach((function(t){t.text=void 0})),{nodes:e,edges:this.showEdge?n:[]}},t.prototype.setView=function(t){var e,n;if(void 0===t&&(t=!0),t){var o=this.lf.getGraphRawData(),r=this.resetData(o),i=this.lf.viewMap,a=this.lf.graphModel.modelMap,s=this.lfMap.viewMap;try{for(var l=_C(i.keys()),u=l.next();!u.done;u=l.next()){var c=u.value;s.has(c)||this.lfMap.register({type:c,view:i.get(c),model:a.get(c)})}}catch(A){e={error:A}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}this.lfMap.render(r),this.updateBounds(r)}else this.updateBounds();var d=this.bounds,h=d.left,p=d.top,f=d.right,v=d.bottom,g=f-h,y=v-p,m=this.width/g,b=this.height/y,x=Math.min(m,b);this.scale=x;var w=h-(this.width/x-g)/2,_=p-(this.height/x-y)/2;if(this.lfMap.graphModel.transformModel.translate(-w+this.translateX,-_+this.translateY),this.translateX=w,this.translateY=_,this.miniMapWrap.firstChild){var E=this.miniMapWrap.firstChild.style;E.pointerEvents="none",E.transform="matrix(".concat(x,", 0, 0, ").concat(x,", 0, 0)"),E.transformOrigin="left top",E.height="".concat(this.height/x,"px"),E.width="".concat(this.width/x,"px"),this.updateViewPort()}},t.prototype.updateViewPort=function(){var t=this.viewport.style,e=this.lf.getTransform(),n=e.TRANSLATE_X,o=e.TRANSLATE_Y,r=e.SCALE_X,i=e.SCALE_Y,a=this.lf.graphModel,s=a.width,l=a.height;this.viewPortLeft=-n/r,this.viewPortTop=-o/i,this.viewPortWidth=s/r*this.scale,this.viewPortHeight=l/i*this.scale,t.width="".concat(this.viewPortWidth,"px"),t.height="".concat(this.viewPortHeight,"px"),t.left="".concat((this.viewPortLeft-this.translateX)*this.scale,"px"),t.top="".concat((this.viewPortTop-this.translateY)*this.scale,"px")},t.prototype.createViewPort=function(){var t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.startDrag),t.addEventListener("click",(function(t){t.stopPropagation()})),this.viewport=t},t.prototype.destroy=function(){this.lf.off("graph:resize",this.onGraphResize)},t.pluginName="miniMap"}(),function(){function t(t){var e=t.lf,n=this;this.disabled=!0,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.draw=function(t){var e=n.lf.getPointByClient(t.clientX,t.clientY).domOverlayPosition,o=e.x,r=e.y;if(n.endPoint={x:o,y:r},n.startPoint){var i=n.startPoint,a=i.x,s=i.y,l=a,u=s,c=o-a,d=r-s;o<a&&(l=o,c=a-o),r<s&&(u=r,d=s-r),n.wrapper&&(n.wrapper.style.left="".concat(l,"px"),n.wrapper.style.top="".concat(u,"px"),n.wrapper.style.width="".concat(c,"px"),n.wrapper.style.height="".concat(d,"px"))}},this.drawOff=function(){var t;if(document.removeEventListener("mousemove",n.draw),document.removeEventListener("mouseup",n.drawOff),n.wrapper&&(n.wrapper.oncontextmenu=null,null===(t=n.container)||void 0===t||t.removeChild(n.wrapper)),n.startPoint&&n.endPoint){var e=n.startPoint,o=e.x,r=e.y,i=n.endPoint,a=i.x,s=i.y,l=[Math.min(o,a),Math.min(r,s)],u=[Math.max(o,a),Math.max(r,s)];if(n.lf.emit("selection:selected-area",{topLeft:l,bottomRight:u}),Math.abs(a-o)<10&&Math.abs(s-r)<10)return;var c=n.lf.graphModel.getAreaElement(l,u,n.isWholeEdge,n.isWholeNode,!0),d=n.lf.graphModel,h=d.dynamicGroup,p=d.group,f=[];c.forEach((function(t){p&&p.getNodeGroup(t.id)||h&&h.getGroupByNodeId(t.id)||(n.lf.selectElementById(t.id,!0),f.push(t))})),n.lf.emit("selection:selected",{elements:f,leftTopPoint:l,rightBottomPoint:u})}},this.lf=e;var o=e.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,e.openSelectionSelect=function(){n.openSelectionSelect()},e.closeSelectionSelect=function(){n.closeSelectionSelect()}}t.prototype.render=function(t,e){var n=this;this.container=e,t.on("blank:mousedown",(function(o){var r=o.e,i=t.getEditConfig();if(i.stopMoveGraph&&!n.disabled){var a=2===r.button;if(!a){var s=t.getPointByClient(r.clientX,r.clientY).domOverlayPosition,l=s.x,u=s.y;n.startPoint={x:l,y:u},n.endPoint={x:l,y:u};var c=document.createElement("div");c.className="lf-selection-select",c.oncontextmenu=function(t){t.preventDefault()},c.style.top="".concat(n.startPoint.y,"px"),c.style.left="".concat(n.startPoint.x,"px"),e.appendChild(c),n.wrapper=c,document.addEventListener("mousemove",n.draw),document.addEventListener("mouseup",n.drawOff)}}}))},t.prototype.setSelectionSense=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isWholeEdge=t,this.isWholeNode=e},t.prototype.openSelectionSelect=function(){var t=this.lf.getEditConfig().stopMoveGraph;t||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},t.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},t.prototype.open=function(){this.disabled=!1},t.prototype.close=function(){this.disabled=!0},t.pluginName="selectionSelect"}(),function(){return EC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},EC.apply(this,arguments)}),AC=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},SC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},OC=function(t,e){var n=e.getModelById(t);return CC("node"===(null===n||void 0===n?void 0:n.BaseType)?n:null===n||void 0===n?void 0:n.targetNode,e)},CC=function(t,e){var n=[],o=[],r=function(t,o,i){t&&(i&&o.unshift.apply(o,SC([],AC(e.getEdgeModels({sourceNodeId:t.id,targetNodeId:null===i||void 0===i?void 0:i.id}).map((function(t){return t.id}))),!1)),o.includes(t.id)?n.push(o):(o.unshift(t.id),t.incoming.nodes.length?t.incoming.nodes.forEach((function(e){r(e,o.slice(),t)})):n.push(o)))},i=function(t,n,r){t&&(r&&n.push.apply(n,SC([],AC(e.getEdgeModels({sourceNodeId:null===r||void 0===r?void 0:r.id,targetNodeId:t.id}).map((function(t){return t.id}))),!1)),n.includes(t.id)?o.push(n):(n.push(t.id),t.outgoing.nodes.length?t.outgoing.nodes.forEach((function(e){i(e,n.slice(),t)})):o.push(n)))};return r(t,[]),i(t,[]),SC([],AC(new Set(SC(SC([],AC(n.flat()),!1),AC(o.flat()),!1))),!1)},NC=(function(){function t(t){var e=t.lf,n=t.options;this.mode="path",this.enable=!0,this.tempStyles={};var o=n.mode,r=void 0===o?"path":o,i=n.enable,a=void 0===i||i;this.lf=e,this.mode=r,this.enable=a}t.prototype.setMode=function(t){this.mode=t},t.prototype.setEnable=function(t){this.enable=t},t.prototype.highlightSingle=function(t){var e=this.lf.getModelById(t);"node"===(null===e||void 0===e?void 0:e.BaseType)?e.updateStyles(this.tempStyles[t]):"edge"===(null===e||void 0===e?void 0:e.BaseType)&&(e.updateStyles(this.tempStyles[t]),e.sourceNode.updateStyles(this.tempStyles[e.sourceNode.id]),e.targetNode.updateStyles(this.tempStyles[e.targetNode.id]))},t.prototype.highlightNeighbours=function(t){var e=this,n=this.lf.getModelById(t);if("node"===(null===n||void 0===n?void 0:n.BaseType)){n.updateStyles(this.tempStyles[t]);var o=n.incoming,r=o.nodes,i=o.edges,a=n.outgoing,s=a.nodes,l=a.edges;on(r,s).forEach((function(t){t.updateStyles(e.tempStyles[t.id])})),on(i,l).forEach((function(t){t.updateStyles(e.tempStyles[t.id])}))}else"edge"===(null===n||void 0===n?void 0:n.BaseType)&&(n.updateStyles(this.tempStyles[t]),n.sourceNode.updateStyles(this.tempStyles[n.sourceNode.id]),n.targetNode.updateStyles(this.tempStyles[n.targetNode.id]))},t.prototype.highlightPath=function(t){var e=this,n=OC(t,this.lf);n.forEach((function(t){var n;null===(n=e.lf.getModelById(t))||void 0===n||n.updateStyles(e.tempStyles[t])}))},t.prototype.highlight=function(t,e){var n=this;if(void 0===e&&(e=this.mode),this.enable){Object.keys(this.tempStyles).length&&this.restoreHighlight(),Object.values(this.lf.graphModel.modelsMap).forEach((function(t){var e="node"===t.BaseType?t.getNodeStyle():t.getEdgeStyle();n.tempStyles[t.id]=EC({},e),t.setStyles({opacity:.1})}));var o={single:this.highlightSingle.bind(this),neighbour:this.highlightNeighbours.bind(this),path:this.highlightPath.bind(this)};o[e](t)}},t.prototype.restoreHighlight=function(){var t=this;Object.keys(this.tempStyles).length&&(Object.values(this.lf.graphModel.modelsMap).forEach((function(e){var n,o=null!==(n=t.tempStyles[e.id])&&void 0!==n?n:{};e.updateStyles(EC({},o))})),this.tempStyles={})},t.prototype.render=function(){var t=this;this.lf.on("node:mouseenter",(function(e){var n=e.data;return t.highlight(n.id)})),this.lf.on("edge:mouseenter",(function(e){var n=e.data;return t.highlight(n.id)})),this.lf.on("node:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("edge:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("history:change",this.restoreHighlight.bind(this))},t.prototype.destroy=function(){},t.pluginName="highlight"}(),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),MC=function(){return MC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},MC.apply(this,arguments)},TC=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},PC={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function DC(t){var e=t,n=1;while(n<e.length-1){var o=TC(e[n-1],2),r=o[0],i=o[1],a=TC(e[n],2),s=a[0],l=a[1],u=TC(e[n+1],2),c=u[0],d=u[1];r===s&&s===c||i===l&&l===d?e.splice(n,1):n++}return e}function kC(t,e,n,o){var r=[t[0],t[1]],i=[t[0],t[1]];switch(n){case"tl":return"tr"===e?(r[1]+=o,i[0]+=o):"lb"===e&&(r[0]+=o,i[1]+=o),[r,i];case"tr":return"tl"===e?(r[1]+=o,i[0]-=o):"rb"===e&&(r[0]-=o,i[1]+=o),[r,i];case"bl":return"br"===e?(r[1]-=o,i[0]+=o):"lt"===e&&(r[0]+=o,i[1]-=o),[r,i];case"br":return"bl"===e?(r[1]-=o,i[0]-=o):"rt"===e&&(r[0]-=o,i[1]-=o),[r,i];default:return[]}}function RC(t,e,n,o){var r,i="",a="";t[0]===e[0]?i=t[1]>e[1]?"t":"b":t[1]===e[1]&&(i=t[0]>e[0]?"l":"r"),e[0]===n[0]?a=e[1]>n[1]?"t":"b":e[1]===n[1]&&(a=e[0]>n[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-t[0],e[1]-t[1])/2,Math.hypot(n[0]-e[0],n[1]-e[1])/2,o)||.2*o,l="".concat(i).concat(a),u=PC[l]||"-",c="L ".concat(t[0]," ").concat(t[1]);if("-"===u)c+="L ".concat(e[0]," ").concat(e[1]," L ").concat(n[0]," ").concat(n[1]);else{var d=TC(kC(e,l,u,s),2),h=d[0],p=d[1];h&&p&&(c+="L ".concat(h[0]," ").concat(h[1]," Q ").concat(e[0]," ").concat(e[1]," ").concat(p[0]," ").concat(p[1]),r=TC(p,2),e[0]=r[0],e[1]=r[1])}return c}function IC(t,e){var n=0,o="";if(2===t.length)o+="M".concat(t[n][0]," ").concat(t[n++][1]," L ").concat(t[n][0]," ").concat(t[n][1]);else{for(o+="M".concat(t[n][0]," ").concat(t[n++][1]);n+1<t.length;){var r=t[n-1],i=t[n],a=t[1+n++];o+=RC(r,i,a,e)}o+="L ".concat(t[n][0]," ").concat(t[n][1])}return o}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}NC(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.points,n=t.isAnimation,o=t.arrowConfig,r=t.radius,i=void 0===r?5:r,a=t.getEdgeStyle(),s=t.getEdgeAnimationStyle(),u=DC(e.split(" ").map((function(t){return t.split(",").map((function(t){return+t}))}))),c=IC(u,i),d=MC(MC(MC({style:n?s:{}},a),o),{fill:"none"});return(0,l.h)("path",MC({d:c},d))}})(l.Uzs),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}NC(e,t)}(l.nTh);var LC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jC=function(){return jC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},jC.apply(this,arguments)},BC=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},HC=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},FC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return LC(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.id,n=t.x,o=t.y,r=t.width,i=t.height,a=t.properties,s=this.props.model.getNodeStyle();return(0,l.h)("svg",{x:n-r/2,y:o-i/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[a.labelText?(0,l.h)("text",{x:0,y:-5,fontSize:"16px",fill:s.stroke},a.labelText):"",a.disabledDelete?"":(0,l.h)("text",{x:a.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:s.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,e)},"x")])},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.id,a=this.props.model.getNodeStyle();return(0,l.h)("g",{},[(0,l.h)("rect",jC(jC({},a),{x:e-o/2,y:n-r/2,width:o,height:r,id:i})),this.getLabelShape()])},e.prototype.toFront=function(){},e.prototype.handleCustomDeleteIconClick=function(t){var e=this.props.graphModel;e.deleteNode(t)},e}(l.T5i),zC=function(t){function e(){var e=t.apply(this,HC([],BC(arguments),!1))||this;return e.d=10,e.isResize=!1,e}return LC(e,t),e.prototype.initNodeData=function(e){e.text={value:"",x:e.x,y:e.y,draggable:!1,editable:!1},t.prototype.initNodeData.call(this,e),this.zIndex=0,this.draggable=!0},e.prototype.setAttributes=function(){var t,e=this;this.points=[],(null===(t=this.properties)||void 0===t?void 0:t.node_selection_ids).length>1&&setTimeout((function(){var t;e.updatePointsByNodes((null===(t=e.properties)||void 0===t?void 0:t.node_selection_ids)||[])}))},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this);return e.stroke=this.properties.strokeColor||"#008000",e.strokeDasharray="10 5",e},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.updatePoints=function(t){this.points=t},e.prototype.updateCoordinate=function(t){var e=t.x,n=t.y;this.x=e,this.y=n},e.prototype.updatePointsByNodes=function(t){var e=this,n=[],o=1/0,r=1/0,i=-1/0,a=-1/0;t.forEach((function(t){var n=e.graphModel.getNodeModelById(t);if(n){var s=n.width,l=n.height,u=n.x,c=n.y;o=Math.min(o,u-s/2-e.d),r=Math.min(r,c-l/2-e.d),i=Math.max(i,u+s/2+e.d),a=Math.max(a,c+l/2+e.d)}})),n.push([o,r],[i,r],[i,a],[o,a]),[o,r,i,a].some((function(t){return Math.abs(t)===1/0}))||(this.updatePoints(n),this.updateCoordinate({x:(i+o)/2,y:(a+r)/2}))},e.prototype.resize=function(e){var n;this.isResize=!0;var o=e.width,r=e.height,i={x:o/this.width,y:r/this.height},a=(this.properties.node_selection_ids||[]).slice(),s=[],l=new Set;while(a.length){var u=a.shift(),c=null===(n=this.graphModel.nodesMap[u])||void 0===n?void 0:n.model;c&&(YC(c)?l.has(c.id)||(l.add(c.id),a.push.apply(a,HC([],BC(c.properties.node_selection_ids||[]),!1))):s.push(c))}var d={x:this.x-this.width/2,y:this.y-this.height/2},h=t.prototype.resize.call(this,e),p={x:this.x-this.width/2,y:this.y-this.height/2};return s.forEach((function(t){t.width=t.width*i.x,t.height=t.height*i.y;var e=(t.x-d.x)*i.x+p.x-t.x,n=(t.y-d.y)*i.y+p.y-t.y;t.move(e,n,!0)})),this.isResize=!1,h},e}(l.CPR),WC="node-selection",YC=(function(){function t(t){var e=t.lf;this.selectNodes=[],this.d=10,this.lf=e,e.register({type:WC,view:FC,model:zC})}Object.defineProperty(t.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map((function(t){return t.id}))},enumerable:!1,configurable:!0}),t.prototype.addNodeSelection=function(){var t=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});t.updatePointsByNodes(this.selectNodesIds)},t.prototype.updateNodeSelection=function(){var t,e=this.getNodeSelection();e&&(this.lf.setProperties(e.id,{node_selection_ids:this.selectNodesIds}),null===(t=this.lf.getNodeModelById(e.id))||void 0===t||t.updatePointsByNodes(this.selectNodesIds))},t.prototype.getNodeSelection=function(){var t=this,e=this.selectNodesIds,n=this.lf.getGraphRawData(),o=e.filter((function(e){return e!==t.currentClickNode.id}));return n.nodes.find((function(t){if("node-selection"===t.type){var e=(0,Xo.A)(t,"properties.node_selection_ids",[]);return o.every((function(t){return e.includes(t)}))}return!1}))},t.prototype.onNodeChange=function(t,e){var n=t.graphModel.nodes.filter((function(t){if(!YC(t))return!1;var n=t.properties.node_selection_ids||[];return n.includes(e.id)}));Promise.resolve().then((function(){n.forEach((function(t){t.updatePointsByNodes(t.properties.node_selection_ids||[])}))}))},t.prototype.render=function(t){var e=this;this.lf=t,t.on("node:click",(function(n){var o;if(n.e.shiftKey&&n.data.type!==WC){e.currentClickNode=n.data;var r=!1;e.selectNodesIds.includes(n.data.id)&&(null===(o=e.lf.getNodeModelById(n.data.id))||void 0===o||o.setSelected(!1),r=!0);var i=t.getSelectElements(!0).nodes;e.selectNodes=i,1===e.selectNodes.length?r?e.updateNodeSelection():e.addNodeSelection():e.selectNodes.length>1&&e.updateNodeSelection()}})),t.graphModel.addNodeMoveRules((function(n,o,r){if(e.onNodeChange(t,n),YC(n)&&!n.isResize){var i=n.properties.node_selection_ids||[];return t.graphModel.moveNodes(i,o,r,!0),!0}return!0})),t.graphModel.addNodeResizeRules((function(n){return YC(n)||e.onNodeChange(t,n),!0}))},t.pluginName="node-selection"}(),function(t){return!(!t||t.type!==WC)}),GC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),XC=function(){return XC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},XC.apply(this,arguments)};(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}GC(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.properties;return(0,l.h)("text",{x:e-o/2+5,y:n-r/2+16,fontSize:12,fill:"blue"},i.moreText)},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=this.props.model.getNodeStyle();return(0,l.h)("g",{},[(0,l.h)("rect",XC(XC({},i),{fill:"#FFFFFF",x:e-o/2,y:n-r/2})),this.getLabelShape()])}})(l.Pc7)},53012:function(t,e,n){var o;(function(r,i,a){if(r){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)l[111+h]="f"+h;for(h=0;h<=9;++h)l[h+96]=h.toString();S.prototype.bind=function(t,e,n){var o=this;return t=t instanceof Array?t:[t],o._bindMultiple.call(o,t,e,n),o},S.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,(function(){}),e)},S.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},S.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},S.prototype.stopCallback=function(t,e){var n=this;if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(A(e,n.target))return!1;if("composedPath"in t&&"function"===typeof t.composedPath){var o=t.composedPath()[0];o!==t.target&&(e=o)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},S.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},S.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);s=null},S.init=function(){var t=S(i);for(var e in t)"_"!==e.charAt(0)&&(S[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},S.init(),r.Mousetrap=S,t.exports&&(t.exports=S),o=function(){return S}.call(e,n,e,t),o===a||(t.exports=o)}function p(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function v(t,e){return t.sort().join(",")===e.sort().join(",")}function g(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function y(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function m(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function b(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function x(){if(!s)for(var t in s={},l)t>95&&t<112||l.hasOwnProperty(t)&&(s[l[t]]=t);return s}function w(t,e,n){return n||(n=x()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function _(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function E(t,e){var n,o,r,i=[];for(n=_(t),r=0;r<n.length;++r)o=n[r],d[o]&&(o=d[o]),e&&"keypress"!=e&&c[o]&&(o=c[o],i.push("shift")),b(o)&&i.push(o);return e=w(o,i,e),{key:o,modifiers:i,action:e}}function A(t,e){return null!==t&&t!==i&&(t===e||A(t.parentNode,e))}function S(t){var e=this;if(t=t||i,!(e instanceof S))return new S(t);e.target=t,e._callbacks={},e._directMap={};var n,o={},r=!1,a=!1,s=!1;function l(t){t=t||{};var e,n=!1;for(e in o)t[e]?n=!0:o[e]=0;n||(s=!1)}function u(t,n,r,i,a,s){var l,u,c=[],d=r.type;if(!e._callbacks[t])return[];for("keyup"==d&&b(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(u=e._callbacks[t][l],(i||!u.seq||o[u.seq]==u.level)&&d==u.action&&("keypress"==d&&!r.metaKey&&!r.ctrlKey||v(n,u.modifiers))){var h=!i&&u.combo==a,p=i&&u.seq==i&&u.level==s;(h||p)&&e._callbacks[t].splice(l,1),c.push(u)}return c}function c(t,n,o,r){e.stopCallback(n,n.target||n.srcElement,o,r)||!1===t(n,o)&&(y(n),m(n))}function d(t){"number"!==typeof t.which&&(t.which=t.keyCode);var n=f(t);n&&("keyup"!=t.type||r!==n?e.handleKey(n,g(t),t):r=!1)}function h(){clearTimeout(n),n=setTimeout(l,1e3)}function x(t,e,n,i){function a(e){return function(){s=e,++o[t],h()}}function u(e){c(n,e,t),"keyup"!==i&&(r=f(e)),setTimeout(l,10)}o[t]=0;for(var d=0;d<e.length;++d){var p=d+1===e.length,v=p?u:a(i||E(e[d+1]).action);w(e[d],v,i,t,d)}}function w(t,n,o,r,i){e._directMap[t+":"+o]=n,t=t.replace(/\s+/g," ");var a,s=t.split(" ");s.length>1?x(t,s,n,o):(a=E(t,o),e._callbacks[a.key]=e._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},r,t,i),e._callbacks[a.key][r?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:r,level:i,combo:t}))}e._handleKey=function(t,e,n){var o,r=u(t,e,n),i={},d=0,h=!1;for(o=0;o<r.length;++o)r[o].seq&&(d=Math.max(d,r[o].level));for(o=0;o<r.length;++o)if(r[o].seq){if(r[o].level!=d)continue;h=!0,i[r[o].seq]=1,c(r[o].callback,n,r[o].combo,r[o].seq)}else h||c(r[o].callback,n,r[o].combo);var p="keypress"==n.type&&a;n.type!=s||b(t)||p||l(i),a=h&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var o=0;o<t.length;++o)w(t[o],e,n)},p(t,"keypress",d),p(t,"keydown",d),p(t,"keyup",d)}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},57603:function(t,e,n){"use strict";var o=n(21348),r=n(72727),i=(0,o.A)(r.A);e.A=i},59489:function(t,e,n){"use strict";var o=n(65169),r=n(63413),i=n(95745),a=n(20104),s=n(61145),l=n(90100),u=Object.prototype,c=u.hasOwnProperty,d=(0,i.A)((function(t,e){if((0,s.A)(e)||(0,a.A)(e))(0,r.A)(e,(0,l.A)(e),t);else for(var n in e)c.call(e,n)&&(0,o.A)(t,n,e[n])}));e.A=d},59700:function(t,e,n){"use strict";var o=n(26914);function r(t){return"function"==typeof t?t:o.A}e.A=r},60223:function(t,e,n){var o,r;(function(i){o=i,r="function"===typeof o?o.call(e,n,e,t):o,void 0===r||(t.exports=r)})((function(){var t="object",e="function",n="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],r=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],i=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],a=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function s(n,o){var r=typeof n[o];return r==e||!(r!=t||!n[o])||"unknown"==r}function l(e,n){return!(typeof e[n]!=t||!e[n])}function u(t,e){return typeof t[e]!=n}function c(t){return function(e,n){var o=n.length;while(o--)if(!t(e,n[o]))return!1;return!0}}var d=c(s),h=c(l),p=c(u);function f(t){return t&&d(t,a)&&p(t,i)}function v(t){return l(t,"body")?t.body:t.getElementsByTagName("body")[0]}var g,y,m=[].forEach?function(t,e){t.forEach(e)}:function(t,e){for(var n=0,o=t.length;n<o;++n)e(t[n],n)},b={},x=typeof window!=n&&typeof document!=n,w={isHostMethod:s,isHostObject:l,isHostProperty:u,areHostMethods:d,areHostObjects:h,areHostProperties:p,isTextRange:f,getBody:v,forEach:m},_={version:"1.3.2",initialized:!1,isBrowser:x,supported:!0,util:w,features:{},modules:b,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function E(t){typeof console!=n&&s(console,"log")&&console.log(t)}function A(t,e){x&&e?alert(t):E(t)}function S(t){_.initialized=!0,_.supported=!1,A("Rangy is not supported in this environment. Reason: "+t,_.config.alertOnFail)}function O(t){A("Rangy warning: "+t,_.config.alertOnWarn)}_.fail=S,_.warn=O,!{}.hasOwnProperty?S("hasOwnProperty not supported"):(w.extend=g=function(t,e,n){var o,r;for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&e.hasOwnProperty(i)&&(o=t[i],r=e[i],n&&null!==o&&"object"==typeof o&&null!==r&&"object"==typeof r&&g(o,r,!0),t[i]=r);return e.hasOwnProperty("toString")&&(t.toString=e.toString),t},w.createOptions=function(t,e){var n={};return g(n,e),t&&g(n,t),n}),x||S("Rangy can only run in a browser"),function(){var t;if(x){var e=document.createElement("div");e.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(e.childNodes,0)[0].nodeType&&(t=function(t){return n.call(t,0)})}catch(o){}}t||(t=function(t){for(var e=[],n=0,o=t.length;n<o;++n)e[n]=t[n];return e}),w.toArray=t}(),x&&(s(document,"addEventListener")?y=function(t,e,n){t.addEventListener(e,n,!1)}:s(document,"attachEvent")?y=function(t,e,n){t.attachEvent("on"+e,n)}:S("Document does not have required addEventListener or attachEvent method"),w.addListener=y);var C=[];function N(t){return t.message||t.description||String(t)}function M(){if(x&&!_.initialized){var t,e=!1,n=!1;s(document,"createRange")&&(t=document.createRange(),d(t,r)&&p(t,o)&&(e=!0));var i=v(document);if(i&&"body"==i.nodeName.toLowerCase())if(i&&s(i,"createTextRange")&&(t=i.createTextRange(),f(t)&&(n=!0)),e||n){var a,l;for(var u in _.initialized=!0,_.features={implementsDomRange:e,implementsTextRange:n},b)(a=b[u])instanceof R&&a.init(a,_);for(var c=0,h=C.length;c<h;++c)try{C[c](_)}catch(g){l="Rangy init listener threw an exception. Continuing. Detail: "+N(g),E(l)}}else S("Neither Range nor TextRange are available");else S("No body element found")}}function T(t,e,n){n&&(t+=" in module "+n.name),_.warn("DEPRECATED: "+t+" is deprecated. Please use "+e+" instead.")}function P(t,e,n,o){t[e]=function(){return T(e,n,o),t[n].apply(t,w.toArray(arguments))}}w.deprecationNotice=T,w.createAliasForDeprecatedMethod=P,_.init=M,_.addInitListener=function(t){_.initialized?t(_):C.push(t)};var D=[];function k(t){t=t||window,M();for(var e=0,n=D.length;e<n;++e)D[e](t)}function R(t,e,n){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=n}function I(t,e,n){var o=new R(t,e,(function(e){if(!e.initialized){e.initialized=!0;try{n(_,e),e.supported=!0}catch(r){var o="Module '"+t+"' failed to load: "+N(r);E(o),r.stack&&E(r.stack)}}}));return b[t]=o,o}function L(){}function j(){}_.addShimListener=function(t){D.push(t)},x&&(_.shim=_.createMissingNativeApi=k,P(_,"createMissingNativeApi","shim")),R.prototype={init:function(){for(var t,e,n=this.dependencies||[],o=0,r=n.length;o<r;++o){if(e=n[o],t=b[e],!t||!(t instanceof R))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error(t)},warn:function(t){_.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){_.warn("DEPRECATED: "+t+" in module "+this.name+" is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},_.createModule=function(t){var e,n;2==arguments.length?(e=arguments[1],n=[]):(e=arguments[2],n=arguments[1]);var o=I(t,n,e);_.initialized&&_.supported&&o.init()},_.createCoreModule=function(t,e,n){I(t,e,n)},_.RangePrototype=L,_.rangePrototype=new L,_.selectionPrototype=new j,_.createCoreModule("DomUtil",[],(function(t,e){var n="undefined",o=t.util,r=o.getBody;o.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),o.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var i=document.createElement("div");o.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||0)||e.fail("Incomplete Element implementation"),o.isHostProperty(i,"innerHTML")||e.fail("Element is missing innerHTML property");var a=document.createTextNode("test");o.areHostMethods(a,["splitText","deleteData","insertData","appendData","cloneNode"]||0)||e.fail("Incomplete Text Node implementation");var s=function(t,e){var n=t.length;while(n--)if(t[n]===e)return!0;return!1};function l(t){var e;return typeof t.namespaceURI==n||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function u(t){var e=t.parentNode;return 1==e.nodeType?e:null}function c(t){var e=0;while(t=t.previousSibling)++e;return e}function d(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function h(t,e){var n,o=[];for(n=t;n;n=n.parentNode)o.push(n);for(n=e;n;n=n.parentNode)if(s(o,n))return n;return null}function p(t,e,n){var o=n?e:e.parentNode;while(o){if(o===t)return!0;o=o.parentNode}return!1}function f(t,e){return p(t,e,!0)}function v(t,e,n){var o,r=n?t:t.parentNode;while(r){if(o=r.parentNode,o===e)return r;r=o}return null}function g(t){var e=t.nodeType;return 3==e||4==e||8==e}function y(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function m(t,e){var n=e.nextSibling,o=e.parentNode;return n?o.insertBefore(t,n):o.appendChild(t),t}function b(t,e,n){var o=t.cloneNode(!1);if(o.deleteData(0,e),t.deleteData(e,t.length-e),m(o,t),n)for(var r,i=0;r=n[i++];)r.node==t&&r.offset>e?(r.node=o,r.offset-=e):r.node==t.parentNode&&r.offset>c(t)&&++r.offset;return o}function x(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=n)return t.ownerDocument;if(typeof t.document!=n)return t.document;if(t.parentNode)return x(t.parentNode);throw e.createError("getDocument: no document found for node")}function w(t){var o=x(t);if(typeof o.defaultView!=n)return o.defaultView;if(typeof o.parentWindow!=n)return o.parentWindow;throw e.createError("Cannot get a window object for node")}function _(t){if(typeof t.contentDocument!=n)return t.contentDocument;if(typeof t.contentWindow!=n)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function E(t){if(typeof t.contentWindow!=n)return t.contentWindow;if(typeof t.contentDocument!=n)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function A(t){return t&&o.isHostMethod(t,"setTimeout")&&o.isHostObject(t,"document")}function S(t,e,n){var r;if(t?o.isHostProperty(t,"nodeType")?r=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?_(t):x(t):A(t)&&(r=t.document):r=document,!r)throw e.createError(n+"(): Parameter must be a Window object or DOM node");return r}function O(t){var e;while(e=t.parentNode)t=e;return t}function C(t,n,o,r){var i,a,s,l,u;if(t==o)return n===r?0:n<r?-1:1;if(i=v(o,t,!0))return n<=c(i)?-1:1;if(i=v(t,o,!0))return c(i)<r?-1:1;if(a=h(t,o),!a)throw new Error("comparePoints error: nodes have no common ancestor");if(s=t===a?a:v(t,a,!0),l=o===a?a:v(o,a,!0),s===l)throw e.createError("comparePoints got to case 4 and childA and childB are the same!");u=a.firstChild;while(u){if(u===s)return-1;if(u===l)return 1;u=u.nextSibling}}var N,M=!1;function T(t){try{return t.parentNode,!1}catch(e){return!0}}function P(t){if(!t)return"[No node]";if(M&&T(t))return"[Broken node]";if(g(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">[index:"+c(t)+",length:"+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function D(t){var e,n=x(t).createDocumentFragment();while(e=t.firstChild)n.appendChild(e);return n}function k(t,e,n){var o=r(t),i=t.createElement("div");i.contentEditable=""+!!n,e&&(i.innerHTML=e);var a=o.firstChild;return a?o.insertBefore(i,a):o.appendChild(i),i}function R(t){return t.parentNode.removeChild(t)}function I(t){this.root=t,this._next=t}function L(t){return new I(t)}function j(t,e){this.node=t,this.offset=e}function B(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}(function(){var e=document.createElement("b");e.innerHTML="1";var n=e.firstChild;e.innerHTML="<br />",M=T(n),t.features.crashyTextNodes=M})(),typeof window.getComputedStyle!=n?N=function(t,e){return w(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=n?N=function(t,e){return t.currentStyle?t.currentStyle[e]:""}:e.fail("No means of obtaining computed style properties found"),I.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild,t)this._next=t;else{e=null;while(n!==this.root&&!(e=n.nextSibling))n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},j.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+P(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},B.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},B.prototype.toString=function(){return this.message},t.dom={arrayContains:s,isHtmlNamespace:l,parentElement:u,getNodeIndex:c,getNodeLength:d,getCommonAncestor:h,isAncestorOf:p,isOrIsAncestorOf:f,getClosestAncestorIn:v,isCharacterDataNode:g,isTextOrCommentNode:y,insertAfter:m,splitDataNode:b,getDocument:x,getWindow:w,getIframeWindow:E,getIframeDocument:_,getBody:r,isWindow:A,getContentDocument:S,getRootContainer:O,comparePoints:C,isBrokenNode:T,inspectNode:P,getComputedStyleProperty:N,createTestElement:k,removeNode:R,fragmentFromNodeChildren:D,createIterator:L,DomPosition:j},t.DOMException=B})),_.createCoreModule("DomRange",["DomUtil"],(function(t,e){var n=t.dom,o=t.util,r=n.DomPosition,i=t.DOMException,a=n.isCharacterDataNode,s=n.getNodeIndex,l=n.isOrIsAncestorOf,u=n.getDocument,c=n.comparePoints,d=n.splitDataNode,h=n.getClosestAncestorIn,p=n.getNodeLength,f=n.arrayContains,v=n.getRootContainer,g=t.features.crashyTextNodes,y=n.removeNode;function m(t,e){return 3!=t.nodeType&&(l(t,e.startContainer)||l(t,e.endContainer))}function b(t){return t.document||u(t.startContainer)}function x(t){return v(t.startContainer)}function w(t){return new r(t.parentNode,s(t))}function _(t){return new r(t.parentNode,s(t)+1)}function E(t,e,o){var r=11==t.nodeType?t.firstChild:t;return a(e)?o==e.length?n.insertAfter(t,e):e.parentNode.insertBefore(t,0==o?e:d(e,o)):o>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[o]),r}function A(t,e,n){if(Z(t),Z(e),b(e)!=b(t))throw new i("WRONG_DOCUMENT_ERR");var o=c(t.startContainer,t.startOffset,e.endContainer,e.endOffset),r=c(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return n?o<=0&&r>=0:o<0&&r>0}function S(t){for(var e,n,o,r=b(t.range).createDocumentFragment();n=t.next();){if(e=t.isPartiallySelectedSubtree(),n=n.cloneNode(!e),e&&(o=t.getSubtreeIterator(),n.appendChild(S(o)),o.detach()),10==n.nodeType)throw new i("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function O(t,e,o){var r,i,a,s;for(o=o||{stop:!1};a=t.next();)if(t.isPartiallySelectedSubtree()){if(!1===e(a))return void(o.stop=!0);if(s=t.getSubtreeIterator(),O(s,e,o),s.detach(),o.stop)return}else{r=n.createIterator(a);while(i=r.next())if(!1===e(i))return void(o.stop=!0)}}function C(t){var e;while(t.next())t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),C(e),e.detach()):t.remove()}function N(t){for(var e,n,o=b(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),n=t.getSubtreeIterator(),e.appendChild(N(n)),n.detach()):t.remove(),10==e.nodeType)throw new i("HIERARCHY_REQUEST_ERR");o.appendChild(e)}return o}function M(t,e,n){var o,r=!(!e||!e.length),i=!!n;r&&(o=new RegExp("^("+e.join("|")+")$"));var s=[];return O(new P(t,!1),(function(e){if((!r||o.test(e.nodeType))&&(!i||n(e))){var l=t.startContainer;if(e!=l||!a(l)||t.startOffset!=l.length){var u=t.endContainer;e==u&&a(u)&&0==t.endOffset||s.push(e)}}})),s}function T(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+n.inspectNode(t.startContainer)+":"+t.startOffset+", "+n.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function P(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&a(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||a(this.sc)?h(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||a(this.ec)?h(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}P.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,a(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!a(n)||n!==this.sc&&n!==this.ec?n.parentNode&&y(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return m(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new yt(b(this.range));var e=this._current,n=e,o=0,r=e,i=p(e);l(e,this.sc)&&(n=this.sc,o=this.so),l(e,this.ec)&&(r=this.ec,i=this.eo),gt(t,n,o,r,i)}return new P(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var D=[1,3,4,5,7,8,10],k=[2,9,11],R=[5,6,10,12],I=[1,3,4,5,7,8,10,11],L=[1,3,4,5,7,8];function j(t){return function(e,n){var o,r=n?e:e.parentNode;while(r){if(o=r.nodeType,f(t,o))return r;r=r.parentNode}return null}}var B=j([9,11]),H=j(R),F=j([6,10,12]),z=j([1]);function W(t,e){if(F(t,e))throw new i("INVALID_NODE_TYPE_ERR")}function Y(t,e){if(!f(e,t.nodeType))throw new i("INVALID_NODE_TYPE_ERR")}function G(t,e){if(e<0||e>(a(t)?t.length:t.childNodes.length))throw new i("INDEX_SIZE_ERR")}function X(t,e){if(B(t,!0)!==B(e,!0))throw new i("WRONG_DOCUMENT_ERR")}function U(t){if(H(t,!0))throw new i("NO_MODIFICATION_ALLOWED_ERR")}function V(t,e){if(!t)throw new i(e)}function K(t,e){return e<=(a(t)?t.length:t.childNodes.length)}function q(t){return!!t.startContainer&&!!t.endContainer&&!(g&&(n.isBrokenNode(t.startContainer)||n.isBrokenNode(t.endContainer)))&&v(t.startContainer)==v(t.endContainer)&&K(t.startContainer,t.startOffset)&&K(t.endContainer,t.endOffset)}function Z(t){if(!q(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}var $=document.createElement("style"),J=!1;try{$.innerHTML="<b>x</b>",J=3==$.firstChild.nodeType}catch(mt){}t.features.htmlParsingConforms=J;var Q=J?function(t){var e=this.startContainer,o=u(e);if(!e)throw new i("INVALID_STATE_ERR");var r=null;return 1==e.nodeType?r=e:a(e)&&(r=n.parentElement(e)),r=null===r||"HTML"==r.nodeName&&n.isHtmlNamespace(u(r).documentElement)&&n.isHtmlNamespace(r)?o.createElement("body"):r.cloneNode(!1),r.innerHTML=t,n.fragmentFromNodeChildren(r)}:function(t){var e=b(this),o=e.createElement("body");return o.innerHTML=t,n.fragmentFromNodeChildren(o)};function tt(t,e){Z(t);var n=t.startContainer,o=t.startOffset,r=t.endContainer,i=t.endOffset,l=n===r;a(r)&&i>0&&i<r.length&&d(r,i,e),a(n)&&o>0&&o<n.length&&(n=d(n,o,e),l?(i-=o,r=n):r==n.parentNode&&i>=s(n)&&i++,o=0),t.setStartAndEnd(n,o,r,i)}function et(t){Z(t);var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}var nt=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ot=0,rt=1,it=2,at=3,st=0,lt=1,ut=2,ct=3;function dt(t){t.START_TO_START=ot,t.START_TO_END=rt,t.END_TO_END=it,t.END_TO_START=at,t.NODE_BEFORE=st,t.NODE_AFTER=lt,t.NODE_BEFORE_AND_AFTER=ut,t.NODE_INSIDE=ct}function ht(t){dt(t),dt(t.prototype)}function pt(t,e){return function(){Z(this);var n,o,r=this.startContainer,i=this.startOffset,a=this.commonAncestorContainer,s=new P(this,!0);r!==a&&(n=h(r,a,!0),o=_(n),r=o.node,i=o.offset),O(s,U),s.reset();var l=t(s);return s.detach(),e(this,r,i,r,i),l}}function ft(e,n){function r(t,e){return function(n){Y(n,D),Y(v(n),k);var o=(t?w:_)(n);(e?i:l)(this,o.node,o.offset)}}function i(t,e,o){var r=t.endContainer,i=t.endOffset;e===t.startContainer&&o===t.startOffset||(v(e)==v(r)&&1!=c(e,o,r,i)||(r=e,i=o),n(t,e,o,r,i))}function l(t,e,o){var r=t.startContainer,i=t.startOffset;e===t.endContainer&&o===t.endOffset||(v(e)==v(r)&&-1!=c(e,o,r,i)||(r=e,i=o),n(t,r,i,e,o))}var u=function(){};u.prototype=t.rangePrototype,e.prototype=new u,o.extend(e.prototype,{setStart:function(t,e){W(t,!0),G(t,e),i(this,t,e)},setEnd:function(t,e){W(t,!0),G(t,e),l(this,t,e)},setStartAndEnd:function(){var t=arguments,e=t[0],o=t[1],r=e,i=o;switch(t.length){case 3:i=t[2];break;case 4:r=t[2],i=t[3];break}W(e,!0),G(e,o),W(r,!0),G(r,i),n(this,e,o,r,i)},setBoundary:function(t,e,n){this["set"+(n?"Start":"End")](t,e)},setStartBefore:r(!0,!0),setStartAfter:r(!1,!0),setEndBefore:r(!0,!1),setEndAfter:r(!1,!1),collapse:function(t){Z(this),t?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){W(t,!0),n(this,t,0,t,p(t))},selectNode:function(t){W(t,!1),Y(t,D);var e=w(t),o=_(t);n(this,e.node,e.offset,o.node,o.offset)},extractContents:pt(N,n),deleteContents:pt(C,n),canSurroundContents:function(){Z(this),U(this.startContainer),U(this.endContainer);var t=new P(this,!0),e=t._first&&m(t._first,this)||t._last&&m(t._last,this);return t.detach(),!e},splitBoundaries:function(){tt(this)},splitBoundariesPreservingPositions:function(t){tt(this,t)},normalizeBoundaries:function(){Z(this);var t,e=this.startContainer,o=this.startOffset,r=this.endContainer,i=this.endOffset,l=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(r=t,i=t.length,t.appendData(e.data),y(e))},u=function(t){var n=t.previousSibling;if(n&&n.nodeType==t.nodeType){e=t;var a=t.length;if(o=n.length,t.insertData(0,n.data),y(n),e==r)i+=o,r=e;else if(r==t.parentNode){var l=s(t);i==l?(r=t,i=a):i>l&&i--}}},c=!0;if(a(r))i==r.length?l(r):0==i&&(t=r.previousSibling,t&&t.nodeType==r.nodeType&&(i=t.length,e==r&&(c=!1),t.appendData(r.data),y(r),r=t));else{if(i>0){var d=r.childNodes[i-1];d&&a(d)&&l(d)}c=!this.collapsed}if(c){if(a(e))0==o?u(e):o==e.length&&(t=e.nextSibling,t&&t.nodeType==e.nodeType&&(r==t&&(r=e,i+=e.length),e.appendData(t.data),y(t)));else if(o<e.childNodes.length){var h=e.childNodes[o];h&&a(h)&&u(h)}}else e=r,o=i;n(this,e,o,r,i)},collapseToPoint:function(t,e){W(t,!0),G(t,e),this.setStartAndEnd(t,e)},parentElement:function(){Z(this);var t=this.commonAncestorContainer;return t?z(this.commonAncestorContainer,!0):null}}),ht(e)}function vt(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:n.getCommonAncestor(t.startContainer,t.endContainer)}function gt(t,e,o,r,i){t.startContainer=e,t.startOffset=o,t.endContainer=r,t.endOffset=i,t.document=n.getDocument(e),vt(t)}function yt(t){gt(this,t,0,t,0)}o.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){var n,o,r,i;Z(this),X(this.startContainer,e.startContainer);var a=t==at||t==ot?"start":"end",s=t==rt||t==ot?"start":"end";return n=this[a+"Container"],o=this[a+"Offset"],r=e[s+"Container"],i=e[s+"Offset"],c(n,o,r,i)},insertNode:function(t){if(Z(this),Y(t,I),U(this.startContainer),l(t,this.startContainer))throw new i("HIERARCHY_REQUEST_ERR");var e=E(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){var t,e;if(Z(this),this.collapsed)return b(this).createDocumentFragment();if(this.startContainer===this.endContainer&&a(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=b(this).createDocumentFragment(),e.appendChild(t),e;var n=new P(this,!0);return t=S(n),n.detach(),t},canSurroundContents:function(){Z(this),U(this.startContainer),U(this.endContainer);var t=new P(this,!0),e=t._first&&m(t._first,this)||t._last&&m(t._last,this);return t.detach(),!e},surroundContents:function(t){if(Y(t,L),!this.canSurroundContents())throw new i("INVALID_STATE_ERR");var e=this.extractContents();if(t.hasChildNodes())while(t.lastChild)t.removeChild(t.lastChild);E(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){Z(this);var t,e=new yt(b(this)),n=nt.length;while(n--)t=nt[n],e[t]=this[t];return e},toString:function(){Z(this);var t=this.startContainer;if(t===this.endContainer&&a(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new P(this,!0);return O(n,(function(t){3!=t.nodeType&&4!=t.nodeType||e.push(t.data)})),n.detach(),e.join("")},compareNode:function(t){Z(this);var e=t.parentNode,n=s(t);if(!e)throw new i("NOT_FOUND_ERR");var o=this.comparePoint(e,n),r=this.comparePoint(e,n+1);return o<0?r>0?ut:st:r>0?lt:ct},comparePoint:function(t,e){return Z(this),V(t,"HIERARCHY_REQUEST_ERR"),X(t,this.startContainer),c(t,e,this.startContainer,this.startOffset)<0?-1:c(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){return et(this)},intersectsNode:function(t,e){if(Z(this),v(t)!=x(this))return!1;var n=t.parentNode,o=s(t);if(!n)return!0;var r=c(n,o,this.endContainer,this.endOffset),i=c(n,o+1,this.startContainer,this.startOffset);return e?r<=0&&i>=0:r<0&&i>0},isPointInRange:function(t,e){return Z(this),V(t,"HIERARCHY_REQUEST_ERR"),X(t,this.startContainer),c(t,e,this.startContainer,this.startOffset)>=0&&c(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return A(this,t,!1)},intersectsOrTouchesRange:function(t){return A(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=c(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=c(this.endContainer,this.endOffset,t.endContainer,t.endOffset),o=this.cloneRange();return-1==e&&o.setStart(t.startContainer,t.startOffset),1==n&&o.setEnd(t.endContainer,t.endOffset),o}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==c(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==c(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new i("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==ct},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,p(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var o=n.pop();return e.setEnd(o,o.length),this.containsRange(e)}return this.containsNodeContents(t)},getNodes:function(t,e){return Z(this),M(this,t,e)},getDocument:function(){return b(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var o=b(this),r=t.createRange(o);e=e||n.getBody(o),r.selectNodeContents(e);var i=this.intersection(r),a=0,s=0;return i&&(r.setEnd(i.startContainer,i.startOffset),a=r.toString().length,s=a+i.toString().length),{start:a,end:s,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,n=0;this.setStart(e,0),this.collapse(!0);var o,r,i,a,s=[e],l=!1,u=!1;while(!u&&(o=s.pop()))if(3==o.nodeType)r=n+o.length,!l&&t.start>=n&&t.start<=r&&(this.setStart(o,t.start-n),l=!0),l&&t.end>=n&&t.end<=r&&(this.setEnd(o,t.end-n),u=!0),n=r;else{a=o.childNodes,i=a.length;while(i--)s.push(a[i])}},getName:function(){return"DomRange"},equals:function(t){return yt.rangesEqual(this,t)},isValid:function(){return q(this)},inspect:function(){return T(this)},detach:function(){}}),ft(yt,gt),o.extend(yt,{rangeProperties:nt,RangeIterator:P,copyComparisonConstants:ht,createPrototypeRange:ft,inspect:T,toHtml:et,getRangeDocument:b,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=yt})),_.createCoreModule("WrappedRange",["DomRange"],(function(t,e){var n,o,r=t.dom,i=t.util,a=r.DomPosition,s=t.DomRange,l=r.getBody,u=r.getContentDocument,c=r.isCharacterDataNode;if(t.features.implementsDomRange&&function(){var o,a,c=s.rangeProperties;function d(t){var e,n=c.length;while(n--)e=c[n],t[e]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function h(t,e,n,o,r){var i=t.startContainer!==e||t.startOffset!=n,a=t.endContainer!==o||t.endOffset!=r,s=!t.equals(t.nativeRange);(i||a||s)&&(t.setEnd(o,r),t.setStart(e,n))}n=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,d(this)},s.createPrototypeRange(n,h),o=n.prototype,o.selectNode=function(t){this.nativeRange.selectNode(t),d(this)},o.cloneContents=function(){return this.nativeRange.cloneContents()},o.surroundContents=function(t){this.nativeRange.surroundContents(t),d(this)},o.collapse=function(t){this.nativeRange.collapse(t),d(this)},o.cloneRange=function(){return new n(this.nativeRange.cloneRange())},o.refresh=function(){d(this)},o.toString=function(){return this.nativeRange.toString()};var p=document.createTextNode("test");l(document).appendChild(p);var f=document.createRange();f.setStart(p,0),f.setEnd(p,0);try{f.setStart(p,1),o.setStart=function(t,e){this.nativeRange.setStart(t,e),d(this)},o.setEnd=function(t,e){this.nativeRange.setEnd(t,e),d(this)},a=function(t){return function(e){this.nativeRange[t](e),d(this)}}}catch(b){o.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(b){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}d(this)},o.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(b){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}d(this)},a=function(t,e){return function(n){try{this.nativeRange[t](n)}catch(b){this.nativeRange[e](n),this.nativeRange[t](n)}d(this)}}}o.setStartBefore=a("setStartBefore","setEndBefore"),o.setStartAfter=a("setStartAfter","setEndAfter"),o.setEndBefore=a("setEndBefore","setStartBefore"),o.setEndAfter=a("setEndAfter","setStartAfter"),o.selectNodeContents=function(t){this.setStartAndEnd(t,0,r.getNodeLength(t))},f.selectNodeContents(p),f.setEnd(p,3);var v=document.createRange();v.selectNodeContents(p),v.setEnd(p,4),v.setStart(p,2),-1==f.compareBoundaryPoints(f.START_TO_END,v)&&1==f.compareBoundaryPoints(f.END_TO_START,v)?o.compareBoundaryPoints=function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:o.compareBoundaryPoints=function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var g=document.createElement("div");g.innerHTML="123";var y=g.firstChild,m=l(document);m.appendChild(g),f.setStart(y,1),f.setEnd(y,2),f.deleteContents(),"13"==y.data&&(o.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},o.extractContents=function(){var t=this.nativeRange.extractContents();return d(this),t}),m.removeChild(g),m=null,i.isHostMethod(f,"createContextualFragment")&&(o.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),l(document).removeChild(p),o.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createNativeRange=function(t){return t=u(t,e,"createNativeRange"),t.createRange()}}(),t.features.implementsTextRange){var d=function(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var o=n.parentElement();n=t.duplicate(),n.collapse(!1);var i=n.parentElement(),a=o==i?o:r.getCommonAncestor(o,i);return a==e?a:r.getCommonAncestor(e,a)},h=function(t){return 0==t.compareEndPoints("StartToEnd",t)},p=function(t,e,n,o,i){var s=t.duplicate();s.collapse(n);var l=s.parentElement();if(r.isOrIsAncestorOf(e,l)||(l=e),!l.canHaveHTML){var u=new a(l.parentNode,r.getNodeIndex(l));return{boundaryPosition:u,nodeInfo:{nodeIndex:u.offset,containerElement:u.node}}}var d=r.getDocument(l).createElement("span");d.parentNode&&r.removeNode(d);var h,p,f,v,g,y=n?"StartToStart":"StartToEnd",m=i&&i.containerElement==l?i.nodeIndex:0,b=l.childNodes.length,x=b,w=x;while(1){if(w==b?l.appendChild(d):l.insertBefore(d,l.childNodes[w]),s.moveToElementText(d),h=s.compareEndPoints(y,t),0==h||m==x)break;if(-1==h){if(x==m+1)break;m=w}else x=x==m+1?m:w;w=Math.floor((m+x)/2),l.removeChild(d)}if(g=d.nextSibling,-1==h&&g&&c(g)){var _;if(s.setEndPoint(n?"EndToStart":"EndToEnd",t),/[\r\n]/.test(g.data)){var E=s.duplicate(),A=E.text.replace(/\r\n/g,"\r").length;_=E.moveStart("character",A);while(-1==(h=E.compareEndPoints("StartToEnd",E)))_++,E.moveStart("character",1)}else _=s.text.length;v=new a(g,_)}else p=(o||!n)&&d.previousSibling,f=(o||n)&&d.nextSibling,v=f&&c(f)?new a(f,0):p&&c(p)?new a(p,p.data.length):new a(l,r.getNodeIndex(d));return r.removeNode(d),{boundaryPosition:v,nodeInfo:{nodeIndex:w,containerElement:l}}},f=function(t,e){var n,o,i,a,s=t.offset,u=r.getDocument(t.node),d=l(u).createTextRange(),h=c(t.node);return h?(n=t.node,o=n.parentNode):(a=t.node.childNodes,n=s<a.length?a[s]:null,o=t.node),i=u.createElement("span"),i.innerHTML="&#feff;",n?o.insertBefore(i,n):o.appendChild(i),d.moveToElementText(i),d.collapse(!e),o.removeChild(i),h&&d[e?"moveStart":"moveEnd"]("character",s),d};o=function(t){this.textRange=t,this.refresh()},o.prototype=new s(document),o.prototype.refresh=function(){var t,e,n,o=d(this.textRange);h(this.textRange)?e=t=p(this.textRange,o,!0,!0).boundaryPosition:(n=p(this.textRange,o,!0,!1),t=n.boundaryPosition,e=p(this.textRange,o,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},o.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(o);var v=function(t){if(t.collapsed)return f(new a(t.startContainer,t.startOffset),!0);var e=f(new a(t.startContainer,t.startOffset),!0),n=f(new a(t.endContainer,t.endOffset),!1),o=l(s.getRangeDocument(t)).createTextRange();return o.setEndPoint("StartToStart",e),o.setEndPoint("EndToEnd",n),o};if(o.rangeToTextRange=v,o.prototype.toTextRange=function(){return v(this)},t.WrappedTextRange=o,!t.features.implementsDomRange||t.config.preferTextRange){var g=function(t){return t("return this;")()}(Function);"undefined"==typeof g.Range&&(g.Range=o),t.createNativeRange=function(t){return t=u(t,e,"createNativeRange"),l(t).createTextRange()},t.WrappedRange=o}}t.createRange=function(n){return n=u(n,e,"createRange"),new t.WrappedRange(t.createNativeRange(n))},t.createRangyRange=function(t){return t=u(t,e,"createRangyRange"),new s(t)},i.createAliasForDeprecatedMethod(t,"createIframeRange","createRange"),i.createAliasForDeprecatedMethod(t,"createIframeRangyRange","createRangyRange"),t.addShimListener((function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(n)}),n=e=null}))})),_.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(t,e){t.config.checkSelectionRanges=!0;var n,o,r="boolean",i="number",a=t.dom,s=t.util,l=s.isHostMethod,u=t.DomRange,c=t.WrappedRange,d=t.DOMException,h=a.DomPosition,p=t.features,f="Control",v=a.getDocument,g=a.getBody,y=u.rangesEqual;function m(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function b(t,n){if(t){if(a.isWindow(t))return t;if(t instanceof Z)return t.win;var o=a.getContentDocument(t,e,n);return a.getWindow(o)}return window}function x(t){return b(t,"getWinSelection").getSelection()}function w(t){return b(t,"getDocSelection").document.selection}function _(t){var e=!1;return t.anchorNode&&(e=1==a.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}var E=l(window,"getSelection"),A=s.isHostObject(document,"selection");p.implementsWinGetSelection=E,p.implementsDocSelection=A;var S=A&&(!E||t.config.preferTextRange);if(S)n=w,t.isSelectionValid=function(t){var e=b(t,"isSelectionValid").document,n=e.selection;return"None"!=n.type||v(n.createRange().parentElement())==e};else{if(!E)return e.fail("Neither document.selection or window.getSelection() detected."),!1;n=x,t.isSelectionValid=function(){return!0}}t.getNativeSelection=n;var O=n();if(!O)return e.fail("Native selection was null (possibly issue 138?)"),!1;var C=t.createNativeRange(document),N=g(document),M=s.areHostProperties(O,["anchorNode","focusNode","anchorOffset","focusOffset"]);p.selectionHasAnchorAndFocus=M;var T=l(O,"extend");p.selectionHasExtend=T;var P=l(O,"setBaseAndExtent");p.selectionHasSetBaseAndExtent=P;var D=typeof O.rangeCount==i;p.selectionHasRangeCount=D;var k=!1,R=!0,I=T?function(e,n){var o=u.getRangeDocument(n),r=t.createRange(o);r.collapseToPoint(n.endContainer,n.endOffset),e.addRange(Y(r)),e.extend(n.startContainer,n.startOffset)}:null;s.areHostMethods(O,["addRange","getRangeAt","removeAllRanges"])&&typeof O.rangeCount==i&&p.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var n=e.rangeCount,o=n>1,r=[],i=_(e),s=0;s<n;++s)r[s]=e.getRangeAt(s);var l=a.createTestElement(document,"",!1),u=l.appendChild(document.createTextNode("")),c=document.createRange();if(c.setStart(u,1),c.collapse(!0),e.removeAllRanges(),e.addRange(c),R=1==e.rangeCount,e.removeAllRanges(),!o){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)k=!1;else{var h=c.cloneRange();c.setStart(u,0),h.setEnd(u,3),h.setStart(u,2),e.addRange(c),e.addRange(h),k=2==e.rangeCount}}for(a.removeNode(l),e.removeAllRanges(),s=0;s<n;++s)0==s&&i?I?I(e,r[s]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(r[s])):e.addRange(r[s])}}(),p.selectionSupportsMultipleRanges=k,p.collapsedNonEditableSelectionsSupported=R;var L,j,B=!1;function H(t,e,n){var o=n?"end":"start",r=n?"start":"end";t.anchorNode=e[o+"Container"],t.anchorOffset=e[o+"Offset"],t.focusNode=e[r+"Container"],t.focusOffset=e[r+"Offset"]}function F(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function z(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0,W(t)}function W(t){t.type=0==t.rangeCount?"None":o(t)?"Caret":"Range"}function Y(e){var n;return e instanceof u?(n=t.createNativeRange(e.getDocument()),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset)):e instanceof c?n=e.nativeRange:p.implementsDomRange&&e instanceof a.getWindow(e.startContainer).Range&&(n=e),n}function G(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;e<n;++e)if(!a.isAncestorOf(t[0],t[e]))return!1;return!0}function X(t){var n=t.getNodes();if(!G(n))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function U(t){return!!t&&"undefined"!=typeof t.text}function V(t,e){var n=new c(e);t._ranges=[n],H(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed,W(t)}function K(e){if(e._ranges.length=0,"None"==e.docSelection.type)z(e);else{var n=e.docSelection.createRange();if(U(n))V(e,n);else{e.rangeCount=n.length;for(var o,r=v(n.item(0)),i=0;i<e.rangeCount;++i)o=t.createRange(r),o.selectNode(n.item(i)),e._ranges.push(o);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,H(e,e._ranges[e.rangeCount-1],!1),W(e)}}}function q(t,n){for(var o=t.docSelection.createRange(),r=X(n),i=v(o.item(0)),a=g(i).createControlRange(),s=0,l=o.length;s<l;++s)a.add(o.item(s));try{a.add(r)}catch(u){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),K(t)}function Z(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function $(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0,W(t)}N&&l(N,"createControlRange")&&(L=N.createControlRange(),s.areHostProperties(L,["item","add"])&&(B=!0)),p.implementsControlRange=B,o=M?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return!!t.rangeCount&&t.getRangeAt(t.rangeCount-1).collapsed},l(O,"getRangeAt")?j=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:M&&(j=function(e){var n=v(e.anchorNode),o=t.createRange(n);return o.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),o.collapsed!==this.isCollapsed&&o.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),o}),Z.prototype=t.selectionPrototype;var J=[];function Q(t,e){var n,o,r=J.length;while(r--)if(n=J[r],o=n.selection,"deleteAll"==e)$(o);else if(n.win==t)return"delete"==e?(J.splice(r,1),!0):o;return"deleteAll"==e&&(J.length=0),null}var tt=function(t){if(t&&t instanceof Z)return t.refresh(),t;t=b(t,"getNativeSelection");var e=Q(t),o=n(t),r=A?w(t):null;return e?(e.nativeSelection=o,e.docSelection=r,e.refresh()):(e=new Z(o,r,t),J.push({win:t,selection:e})),e};t.getSelection=tt,s.createAliasForDeprecatedMethod(t,"getIframeSelection","getSelection");var et,nt=Z.prototype;function ot(t,n){for(var o,r=v(n[0].startContainer),i=g(r).createControlRange(),a=0,s=n.length;a<s;++a){o=X(n[a]);try{i.add(o)}catch(l){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),K(t)}if(!S&&M&&s.areHostMethods(O,["removeAllRanges","addRange"])){nt.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),z(this)};var rt=function(t,e){I(t.nativeSelection,e),t.refresh()};nt.addRange=D?function(e,n){if(B&&A&&this.docSelection.type==f)q(this,e);else if(m(n)&&T)rt(this,e);else{var r;k?r=this.rangeCount:(this.removeAllRanges(),r=0);var i=Y(e).cloneRange();try{this.nativeSelection.addRange(i)}catch(s){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1){if(t.config.checkSelectionRanges){var a=j(this.nativeSelection,this.rangeCount-1);a&&!y(a,e)&&(e=new c(a))}this._ranges[this.rangeCount-1]=e,H(this,e,it(this.nativeSelection)),this.isCollapsed=o(this),W(this)}else this.refresh()}}:function(t,e){m(e)&&T?rt(this,t):(this.nativeSelection.addRange(Y(t)),this.refresh())},nt.setRanges=function(t){if(B&&A&&t.length>1)ot(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;e<n;++e)this.addRange(t[e])}}}else{if(!(l(O,"empty")&&l(C,"select")&&B&&S))return e.fail("No means of selecting a Range or TextRange was found"),!1;nt.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=v(this.anchorNode);else if(this.docSelection.type==f){var e=this.docSelection.createRange();e.length&&(t=v(e.item(0)))}if(t){var n=g(t).createTextRange();n.select(),this.docSelection.empty()}}}catch(o){}z(this)},nt.addRange=function(e){this.docSelection.type==f?q(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,H(this,e,!1),W(this))},nt.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?ot(this,t):e&&this.addRange(t[0])}}if(nt.getRangeAt=function(t){if(t<0||t>=this.rangeCount)throw new d("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()},S)et=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=g(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==f?K(e):U(n)?V(e,n):z(e)};else if(l(O,"getRangeAt")&&typeof O.rangeCount==i)et=function(e){if(B&&A&&e.docSelection.type==f)K(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,r=e.rangeCount;n<r;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));H(e,e._ranges[e.rangeCount-1],it(e.nativeSelection)),e.isCollapsed=o(e),W(e)}else z(e)};else{if(!M||typeof O.isCollapsed!=r||typeof C.collapsed!=r||!p.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;et=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=j(n,0),t._ranges=[e],t.rangeCount=1,F(t),t.isCollapsed=o(t),W(t)):z(t)}}nt.refresh=function(t){var e=t?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(et(this),t){var r=e.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;while(r--)if(!y(e[r],this._ranges[r]))return!0;return!1}};var it,at=function(t,e){var n=t.getAllRanges();t.removeAllRanges();for(var o=0,r=n.length;o<r;++o)y(e,n[o])||t.addRange(n[o]);t.rangeCount||z(t)};function st(t,e){if(t.win.document!=v(e))throw new d("WRONG_DOCUMENT_ERR")}function lt(t,e){if(e<0||e>(a.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new d("INDEX_SIZE_ERR")}function ut(e){return function(n,o){var r;this.rangeCount?(r=this.getRangeAt(0),r["set"+(e?"Start":"End")](n,o)):(r=t.createRange(this.win.document),r.setStartAndEnd(n,o)),this.setSingleRange(r,this.isBackward())}}function ct(t){var e=[],n=new h(t.anchorNode,t.anchorOffset),o=new h(t.focusNode,t.focusOffset),r="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var i=0,a=t.rangeCount;i<a;++i)e[i]=u.inspect(t.getRangeAt(i));return"["+r+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}nt.removeRange=B&&A?function(t){if(this.docSelection.type==f){for(var e,n=this.docSelection.createRange(),o=X(t),r=v(n.item(0)),i=g(r).createControlRange(),a=!1,s=0,l=n.length;s<l;++s)e=n.item(s),e!==o||a?i.add(n.item(s)):a=!0;i.select(),K(this)}else at(this,t)}:function(t){at(this,t)},!S&&M&&p.implementsDomRange?(it=_,nt.isBackward=function(){return it(this)}):it=nt.isBackward=function(){return!1},nt.isBackwards=nt.isBackward,nt.toString=function(){for(var t=[],e=0,n=this.rangeCount;e<n;++e)t[e]=""+this._ranges[e];return t.join("")},nt.collapse=function(e,n){st(this,e);var o=t.createRange(e);o.collapseToPoint(e,n),this.setSingleRange(o),this.isCollapsed=!0},nt.collapseToStart=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},nt.collapseToEnd=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},nt.selectAllChildren=function(e){st(this,e);var n=t.createRange(e);n.selectNodeContents(e),this.setSingleRange(n)},P?nt.setBaseAndExtent=function(t,e,n,o){this.nativeSelection.setBaseAndExtent(t,e,n,o),this.refresh()}:T&&(nt.setBaseAndExtent=function(e,n,o,r){lt(e,n),lt(o,r),st(this,e),st(this,o);var i=t.createRange(node),s=-1==a.comparePoints(e,n,o,r);s?i.setStartAndEnd(o,r,e,n):i.setStartAndEnd(e,n,o,r),this.setSingleRange(i,s)}),nt.deleteFromDocument=function(){if(B&&A&&this.docSelection.type==f){var t,e=this.docSelection.createRange();while(e.length)t=e.item(0),e.remove(t),a.removeNode(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var o=0,r=n.length;o<r;++o)n[o].deleteContents();this.addRange(n[r-1])}}},nt.eachRange=function(t,e){for(var n=0,o=this._ranges.length;n<o;++n)if(t(this.getRangeAt(n)))return e},nt.getAllRanges=function(){var t=[];return this.eachRange((function(e){t.push(e)})),t},nt.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},nt.callMethodOnEachRange=function(t,e){var n=[];return this.eachRange((function(o){n.push(o[t].apply(o,e||[]))})),n},nt.setStart=ut(!0),nt.setEnd=ut(!1),t.rangePrototype.select=function(t){tt(this.getDocument()).setSingleRange(this,t)},nt.changeEachRange=function(t){var e=[],n=this.isBackward();this.eachRange((function(n){t(n),e.push(n)})),this.removeAllRanges(),n&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},nt.containsNode=function(t,e){return this.eachRange((function(n){return n.containsNode(t,e)}),!0)||!1},nt.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},nt.moveToBookmark=function(e){for(var n,o,r=[],i=0;n=e.rangeBookmarks[i++];)o=t.createRange(this.win),o.moveToBookmark(n),r.push(o);e.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},nt.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},nt.restoreRanges=function(t){this.removeAllRanges();for(var e,n=0;e=t.ranges[n];++n)this.addRange(e,t.backward&&0==n)},nt.toHtml=function(){var t=[];return this.eachRange((function(e){t.push(u.toHtml(e))})),t.join("")},p.implementsTextRange&&(nt.getNativeTextRange=function(){var n;if(n=this.docSelection){var o=n.createRange();if(U(o))return o;throw e.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return t.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw e.createError("getNativeTextRange: selection contains no range")}),nt.getName=function(){return"WrappedSelection"},nt.inspect=function(){return ct(this)},nt.detach=function(){Q(this.win,"delete"),$(this)},Z.detachAll=function(){Q(null,"deleteAll")},Z.inspect=ct,Z.isDirectionBackward=m,t.Selection=Z,t.selectionPrototype=nt,t.addShimListener((function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return tt(t)}),t=null}))}));var B=!1,H=function(t){B||(B=!0,!_.initialized&&_.config.autoInitialize&&M())};return x&&("complete"==document.readyState?H():(s(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",H,!1),y(window,"load",H))),_}))},72583:function(t,e,n){var o,r,i;(function(a){r=[n(60223)],o=a,i="function"===typeof o?o.apply(e,r):o,void 0===i||(t.exports=i)})((function(t){return t.createModule("ClassApplier",["WrappedSelection"],(function(t,e){var n=t.dom,o=n.DomPosition,r=n.arrayContains,i=t.util,a=i.forEach,s="span",l=i.isHostMethod(document,"createElementNS");function u(t,e){for(var n in t)if(t.hasOwnProperty(n)&&!1===e(n,t[n]))return!1;return!0}function c(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(t,e){return!!t&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t)}function h(t,e){if("object"==typeof t.classList)return t.classList.contains(e);var n="string"==typeof t.className,o=n?t.className:t.getAttribute("class");return d(o,e)}function p(t,e){if("object"==typeof t.classList)t.classList.add(e);else{var n="string"==typeof t.className,o=n?t.className:t.getAttribute("class");o?d(o,e)||(o+=" "+e):o=e,n?t.className=o:t.setAttribute("class",o)}}var f=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){if("object"==typeof e.classList)e.classList.remove(n);else{var o="string"==typeof e.className,r=o?e.className:e.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),t),o?e.className=r:e.setAttribute("class",r)}}}();function v(t){var e="string"==typeof t.className;return e?t.className:t.getAttribute("class")}function g(t){return t&&t.split(/\s+/).sort().join(" ")}function y(t){return g(v(t))}function m(t,e){return y(t)==y(e)}function b(t,e){for(var n=e.split(/\s+/),o=0,r=n.length;o<r;++o)if(!h(t,c(n[o])))return!1;return!0}function x(t){var e=t.parentNode;return e&&1==e.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(e.nodeName)}function w(t,e,n,o,r){var i=t.node,a=t.offset,s=i,l=a;i==o&&a>r&&++l,i!=e||a!=n&&a!=n+1||(s=o,l+=r-n),i==e&&a>n+1&&--l,t.node=s,t.offset=l}function _(t,e,n){t.node==e&&t.offset>n&&--t.offset}function E(t,e,o,r){-1==o&&(o=e.childNodes.length);var i=t.parentNode,s=n.getNodeIndex(t);a(r,(function(t){w(t,i,s,e,o)})),e.childNodes.length==o?e.appendChild(t):e.insertBefore(t,e.childNodes[o])}function A(t,e){var o=t.parentNode,r=n.getNodeIndex(t);a(e,(function(t){_(t,o,r)})),n.removeNode(t)}function S(t,e,n,o,r){var i,a=[];while(i=t.firstChild)E(i,e,n++,r),a.push(i);return o&&A(t,r),a}function O(t,e){return S(t,t.parentNode,n.getNodeIndex(t),!0,e)}function C(t,e){var n=t.cloneRange();n.selectNodeContents(e);var o=n.intersection(t),r=o?o.toString():"";return""!=r}function N(t){var e,n=t.getNodes([3]),o=0;while((e=n[o])&&!C(t,e))++o;var r=n.length-1;while((e=n[r])&&!C(t,e))--r;return n.slice(o,r+1)}function M(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,o,r,i=0,a=t.attributes.length;i<a;++i)if(n=t.attributes[i],r=n.name,"class"!=r){if(o=e.attributes.getNamedItem(r),null===n!=(null===o))return!1;if(n.specified!=o.specified)return!1;if(n.specified&&n.nodeValue!==o.nodeValue)return!1}return!0}function T(t,e){for(var n,o=0,i=t.attributes.length;o<i;++o)if(n=t.attributes[o].name,(!e||!r(e,n))&&t.attributes[o].specified&&"class"!=n)return!0;return!1}var P=n.getComputedStyleProperty,D=function(){var t=document.createElement("div");return"boolean"==typeof t.isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return!(!t||1!=t.nodeType||"false"==t.contentEditable)&&("true"==t.contentEditable||D(t.parentNode))}}();function k(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||D(t)&&!D(t.parentNode))}function R(t){return(D(t)||1!=t.nodeType&&D(t.parentNode))&&!k(t)}var I=/^inline(-block|-table)?$/i;function L(t){return t&&1==t.nodeType&&!I.test(P(t,"display"))}var j=/[^\r\n\t\f \u200B]/;function B(t){if(0==t.data.length)return!0;if(j.test(t.data))return!1;var e=P(t.parentNode,"whiteSpace");switch(e){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return L(t.previousSibling)||L(t.nextSibling)}function H(t){var e,n,r=[];for(e=0;n=t[e++];)r.push(new o(n.startContainer,n.startOffset),new o(n.endContainer,n.endOffset));return r}function F(t,e){for(var n,o,r,i=0,a=t.length;i<a;++i)n=t[i],o=e[2*i],r=e[2*i+1],n.setStartAndEnd(o.node,o.offset,r.node,r.offset)}function z(t,e){return n.isCharacterDataNode(t)?0==e?!!t.previousSibling:e!=t.length||!!t.nextSibling:e>0&&e<t.childNodes.length}function W(t,o,r,i){var a,s,l=0==r;if(n.isAncestorOf(o,t))return t;if(n.isCharacterDataNode(o)){var u=n.getNodeIndex(o);if(0==r)r=u;else{if(r!=o.length)throw e.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+r+" in "+o.data);r=u+1}o=o.parentNode}if(z(o,r)){a=o.cloneNode(!1),s=o.parentNode,a.id&&a.removeAttribute("id");var c,d=0;while(c=o.childNodes[r])E(c,a,d++,i);return E(a,s,n.getNodeIndex(o)+1,i),o==t?a:W(t,s,n.getNodeIndex(a),i)}if(t!=o){a=o.parentNode;var h=n.getNodeIndex(o);return l||h++,W(t,a,h,i)}return t}function Y(t,e){return t.namespaceURI==e.namespaceURI&&t.tagName.toLowerCase()==e.tagName.toLowerCase()&&m(t,e)&&M(t,e)&&"inline"==P(t,"display")&&"inline"==P(e,"display")}function G(t){var e=t?"nextSibling":"previousSibling";return function(n,o){var r=n.parentNode,i=n[e];if(i){if(i&&3==i.nodeType)return i}else if(o&&(i=r[e],i&&1==i.nodeType&&Y(r,i))){var a=i[t?"firstChild":"lastChild"];if(a&&3==a.nodeType)return a}return null}}var X=G(!1),U=G(!0);function V(t){this.isElementMerge=1==t.nodeType,this.textNodes=[];var e=this.isElementMerge?t.lastChild:t;e&&(this.textNodes[0]=e)}V.prototype={doMerge:function(t){var e=this.textNodes,o=e[0];if(e.length>1){var r,i=n.getNodeIndex(o),s=[],l=0;a(e,(function(u,c){r=u.parentNode,c>0&&(r.removeChild(u),r.hasChildNodes()||n.removeNode(r),t&&a(t,(function(t){t.node==u&&(t.node=o,t.offset+=l),t.node==r&&t.offset>i&&(--t.offset,t.offset==i+1&&c<e.length-1&&(t.node=o,t.offset=l))}))),s[c]=u.data,l+=u.data.length})),o.data=s.join("")}return o.data},getLength:function(){var t=this.textNodes.length,e=0;while(t--)e+=this.textNodes[t].length;return e},toString:function(){var t=[];return a(this.textNodes,(function(e,n){t[n]="'"+e.data+"'"})),"[Merge("+t.join(",")+")]"}};var K=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],q={};function Z(t,e,n){var o,r,i,a,s=this;s.cssClass=s.className=t;var l=null,d={};if("object"==typeof e&&null!==e){for("undefined"!==typeof e.elementTagName&&(e.elementTagName=e.elementTagName.toLowerCase()),n=e.tagNames,l=e.elementProperties,d=e.elementAttributes,r=0;a=K[r++];)e.hasOwnProperty(a)&&(s[a]=e[a]);o=e.normalize}else o=e;s.normalize="undefined"==typeof o||o,s.attrExceptions=[];var h=document.createElement(s.elementTagName);s.elementProperties=s.copyPropertiesToElement(l,h,!0),u(d,(function(t,e){s.attrExceptions.push(t),d[t]=""+e})),s.elementAttributes=d,s.elementSortedClassName=s.elementProperties.hasOwnProperty("className")?g(s.elementProperties.className+" "+t):t,s.applyToAnyTagName=!1;var p=typeof n;if("string"==p)"*"==n?s.applyToAnyTagName=!0:s.tagNames=c(n.toLowerCase()).split(/\s*,\s*/);else if("object"==p&&"number"==typeof n.length)for(s.tagNames=[],r=0,i=n.length;r<i;++r)"*"==n[r]?s.applyToAnyTagName=!0:s.tagNames.push(n[r].toLowerCase());else s.tagNames=[s.elementTagName]}function $(t,e,n){return new Z(t,e,n)}Z.prototype={elementTagName:s,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(t,e,n){var o,r,i,a,s,l,u={};for(var c in t)if(t.hasOwnProperty(c))if(a=t[c],s=e[c],"className"==c)p(e,a),p(e,this.className),e[c]=g(e[c]),n&&(u[c]=a);else if("style"==c){for(o in r=s,n&&(u[c]=i={}),t[c])t[c].hasOwnProperty(o)&&(r[o]=a[o],n&&(i[o]=r[o]));this.attrExceptions.push(c)}else e[c]=a,n&&(u[c]=e[c],l=q.hasOwnProperty(c)?q[c]:c,this.attrExceptions.push(l));return n?u:""},copyAttributesToElement:function(t,e){for(var n in t)t.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&e.setAttribute(n,t[n])},appliesToElement:function(t){return r(this.tagNames,t.tagName.toLowerCase())},getEmptyElements:function(t){var e=this;return t.getNodes([1],(function(t){return e.appliesToElement(t)&&!t.hasChildNodes()}))},hasClass:function(t){return 1==t.nodeType&&(this.applyToAnyTagName||this.appliesToElement(t))&&h(t,this.className)},getSelfOrAncestorWithClass:function(t){while(t){if(this.hasClass(t))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||R(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&B(t)},postApply:function(t,e,n,o){var r,i,s=t[0],l=t[t.length-1],u=[],c=s,d=l,h=0,p=l.length;a(t,(function(t){i=X(t,!o),i?(r||(r=new V(i),u.push(r)),r.textNodes.push(t),t===s&&(c=r.textNodes[0],h=c.length),t===l&&(d=r.textNodes[0],p=r.getLength())):r=null}));var f=U(l,!o);if(f&&(r||(r=new V(l),u.push(r)),r.textNodes.push(f)),u.length){for(var v=0,g=u.length;v<g;++v)u[v].doMerge(n);e.setStartAndEnd(c,h,d,p)}},createContainer:function(t){var e=n.getDocument(t),o=l&&!n.isHtmlNamespace(t)&&t.namespaceURI?e.createElementNS(t.namespaceURI,this.elementTagName):e.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,o,!1),this.copyAttributesToElement(this.elementAttributes,o),p(o,this.className),this.onElementCreate&&this.onElementCreate(o,this),o},elementHasProperties:function(t,e){var n=this;return u(e,(function(e,o){if("className"==e)return b(t,o);if("object"==typeof o){if(!n.elementHasProperties(t[e],o))return!1}else if(t[e]!==o)return!1}))},elementHasAttributes:function(t,e){return u(e,(function(e,n){if(t.getAttribute(e)!==n)return!1}))},applyToTextNode:function(t,e){if(x(t)){var n=t.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))p(n,this.className);else{var o=t.parentNode,r=this.createContainer(o);o.insertBefore(r,t),r.appendChild(t)}}},isRemovable:function(t){return t.tagName.toLowerCase()==this.elementTagName&&y(t)==this.elementSortedClassName&&this.elementHasProperties(t,this.elementProperties)&&!T(t,this.attrExceptions)&&this.elementHasAttributes(t,this.elementAttributes)&&this.isModifiable(t)},isEmptyContainer:function(t){var e=t.childNodes.length;return 1==t.nodeType&&this.isRemovable(t)&&(0==e||1==e&&this.isEmptyContainer(t.firstChild))},removeEmptyContainers:function(t){var e=this,n=t.getNodes([1],(function(t){return e.isEmptyContainer(t)})),o=[t],r=H(o);a(n,(function(t){A(t,r)})),F(o,r)},undoToTextNode:function(t,e,n,o){if(!e.containsNode(n)){var r=e.cloneRange();r.selectNode(n),r.isPointInRange(e.endContainer,e.endOffset)&&(W(n,e.endContainer,e.endOffset,o),e.setEndAfter(n)),r.isPointInRange(e.startContainer,e.startOffset)&&(n=W(n,e.startContainer,e.startOffset,o))}this.isRemovable(n)?O(n,o):f(n,this.className)},splitAncestorWithClass:function(t,e,n){var o=this.getSelfOrAncestorWithClass(t);o&&W(o,t,e,n)},undoToAncestor:function(t,e){this.isRemovable(t)?O(t,e):f(t,this.className)},applyToRange:function(t,e){var n=this;e=e||[];var o=H(e||[]);t.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(t);var r=N(t);if(r.length){a(r,(function(t){n.isIgnorableWhiteSpaceNode(t)||n.getSelfOrAncestorWithClass(t)||!n.isModifiable(t)||n.applyToTextNode(t,o)}));var i=r[r.length-1];t.setStartAndEnd(r[0],0,i,i.length),n.normalize&&n.postApply(r,t,o,!1),F(e,o)}var s=n.getEmptyElements(t);a(s,(function(t){p(t,n.className)}))},applyToRanges:function(t){var e=t.length;while(e--)this.applyToRange(t[e],t);return t},applyToSelection:function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(t,e){var n=this;e=e||[];var o=H(e);t.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(t,o);var r,i,s=N(t),l=s[s.length-1];if(s.length){n.splitAncestorWithClass(t.endContainer,t.endOffset,o),n.splitAncestorWithClass(t.startContainer,t.startOffset,o);for(var u=0,c=s.length;u<c;++u)r=s[u],i=n.getSelfOrAncestorWithClass(r),i&&n.isModifiable(r)&&n.undoToAncestor(i,o);t.setStartAndEnd(s[0],0,l,l.length),n.normalize&&n.postApply(s,t,o,!0),F(e,o)}var d=n.getEmptyElements(t);a(d,(function(t){f(t,n.className)}))},undoToRanges:function(t){var e=t.length;while(e--)this.undoToRange(t[e],t);return t},undoToSelection:function(e){var n=t.getSelection(e),o=t.getSelection(e).getAllRanges();this.undoToRanges(o),n.setRanges(o)},isAppliedToRange:function(t){if(t.collapsed||""==t.toString())return!!this.getSelfOrAncestorWithClass(t.commonAncestorContainer);var e=t.getNodes([3]);if(e.length)for(var n,o=0;n=e[o++];)if(!this.isIgnorableWhiteSpaceNode(n)&&C(t,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(t){var e=t.length;if(0==e)return!1;while(e--)if(!this.isAppliedToRange(t[e]))return!1;return!0},isAppliedToSelection:function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},getElementsWithClassIntersectingRange:function(t){var e=[],n=this;return t.getNodes([3],(function(t){var o=n.getSelfOrAncestorWithClass(t);o&&!r(e,o)&&e.push(o)})),e},detach:function(){}},Z.util={hasClass:h,addClass:p,removeClass:f,getClass:v,hasSameClasses:m,hasAllClasses:b,replaceWithOwnChildren:O,elementsHaveSameNonClassAttributes:M,elementHasNonClassAttributes:T,splitNodeAt:W,isEditableElement:D,isEditingHost:k,isEditable:R},t.CssClassApplier=t.ClassApplier=Z,t.createClassApplier=$,i.createAliasForDeprecatedMethod(t,"createCssClassApplier","createClassApplier",e)})),t}))},72727:function(t,e,n){"use strict";var o=n(75241),r=n(5919),i=n(33323),a=Math.max;function s(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:(0,i.A)(n);return l<0&&(l=a(s+l,0)),(0,o.A)(t,(0,r.A)(e,3),l)}e.A=s},72843:function(t,e,n){"use strict";n.d(e,{A:function(){return p}});var o=n(49082);function r(t,e){return(0,o.A)(e,(function(e){return[e,t[e]]}))}var i=r,a=n(24753),s=n(86215);function l(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}var u=l,c="[object Map]",d="[object Set]";function h(t){return function(e){var n=(0,a.A)(e);return n==c?(0,s.A)(e):n==d?u(e):i(e,t(e))}}var p=h},72863:function(t,e,n){"use strict";var o=n(29461),r=n(24753),i=n(38280),a=n(93791),s=n(20104),l=n(79410),u=n(61145),c=n(3596),d="[object Map]",h="[object Set]",p=Object.prototype,f=p.hasOwnProperty;function v(t){if(null==t)return!0;if((0,s.A)(t)&&((0,a.A)(t)||"string"==typeof t||"function"==typeof t.splice||(0,l.A)(t)||(0,c.A)(t)||(0,i.A)(t)))return!t.length;var e=(0,r.A)(t);if(e==d||e==h)return!t.size;if((0,u.A)(t))return!(0,o.A)(t).length;for(var n in t)if(f.call(t,n))return!1;return!0}e.A=v},94807:function(t,e,n){"use strict";var o=n(92178),r=n(33323),i=Math.max;function a(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var s=null==n?0:(0,r.A)(n);return s<0&&(s=i(a+s,0)),(0,o.A)(t,e,s)}e.A=a},95399:function(t,e){var n,o;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=s(t,a(n)))}return t}function a(t){if("string"===typeof t||"number"===typeof t)return t;if("object"!==typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)r.call(t,n)&&t[n]&&(e=s(e,n));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):(n=[],o=function(){return i}.apply(e,n),void 0===o||(t.exports=o))})()},99100:function(t,e){"use strict";function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}e.A=n},99893:function(t,e,n){"use strict";n.d(e,{hIF:function(){return kd},mb5:function(){return _u},uAl:function(){return r.uA},FXO:function(){return Hd},KeU:function(){return Cu},e_r:function(){return bi},RJL:function(){return xi},jJD:function(){return Wd},_5e:function(){return Pu},Bx4:function(){return _i},yI1:function(){return Zd},t8p:function(){return Ku},Vu$:function(){return o},e3q:function(){return wi},tS:function(){return il},T5i:function(){return Ld},CPR:function(){return Lu},Uzs:function(){return xh},nTh:function(){return uu},rwV:function(){return Gs},Pc7:function(){return Td},G6l:function(){return Fu},N46:function(){return Pi},RM7:function(){return Si},_3b:function(){return r._3},ir6:function(){return Ns},Ay$:function(){return Lp},nDY:function(){return ms},h:function(){return r.n},Z1$:function(){return Ol},sHX:function(){return ht},PAp:function(){return Ip},HOl:function(){return an},AC1:function(){return Ep},XmX:function(){return _p},swm:function(){return Ta}});var o={};n.r(o),n.d(o,{uq:function(){return Ka},N4:function(){return Pi},ob:function(){return $a},Mi:function(){return Ya},SA:function(){return Ps},r3:function(){return Pa},YW:function(){return Ts},ir:function(){return Ns},uj:function(){return Ll},Io:function(){return rs},nD:function(){return ms},Yw:function(){return mi},ZZ:function(){return ts},_B:function(){return Ea},A2:function(){return Zi},US:function(){return Aa},b4:function(){return Sa},Rj:function(){return os},jn:function(){return Na},jp:function(){return us},aq:function(){return ya},Zu:function(){return cs},Ph:function(){return hs},FY:function(){return ps},RM:function(){return Ca},o_:function(){return gs},Q8:function(){return fa},z6:function(){return Yl},dK:function(){return vs},W4:function(){return ss},uy:function(){return pa},Zs:function(){return Da},LE:function(){return ys},b:function(){return Il},fl:function(){return Wl},Z1:function(){return Ol},r5:function(){return ds},Zb:function(){return yi},wS:function(){return is},pc:function(){return Ha},NL:function(){return Ba},LV:function(){return ga},CE:function(){return va},Sx:function(){return La},sH:function(){return ht},Wx:function(){return Ma},_d:function(){return fs},Jj:function(){return ha},pZ:function(){return ba},r6:function(){return Tl},zK:function(){return ma},eS:function(){return vi},Hc:function(){return Bl},Ej:function(){return Ia},O:function(){return es},HO:function(){return an},sw:function(){return Ta},V_:function(){return Hl}});var r=n(16901),i="An invariant failed, however the error is obfuscated because this is a production build.",a=[];Object.freeze(a);var s={};function l(){return++Jt.mobxGuid}function u(t){throw c(!1,t),"X"}function c(t,e){if(!t)throw new Error("[mobx] "+(e||i))}Object.freeze(s);function d(t,e){return!1}function h(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var p=function(){};function f(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e}function v(t){return null!==t&&"object"===typeof t}function g(t){if(null===t||"object"!==typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function y(t){if(E(t)||Pn(t))return t;if(Array.isArray(t))return new Map(t);if(g(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return u("Cannot convert to map from '"+t+"'")}function m(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function b(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function x(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!n||!1!==n.configurable&&!1!==n.writable}function w(t,e){0}function _(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return v(t)&&!0===t[n]}}function E(t){return t instanceof Map}function A(t){return t instanceof Set}function S(t){var e=new Set;for(var n in t)e.add(n);return Object.getOwnPropertySymbols(t).forEach((function(n){Object.getOwnPropertyDescriptor(t,n).enumerable&&e.add(n)})),Array.from(e)}function O(t){return t&&t.toString?t.toString():new String(t).toString()}function C(t){return null===t?null:"object"===typeof t?""+t:t}var N="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,M=Symbol("mobx administration"),T=function(){function t(t){void 0===t&&(t="Atom@"+l()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ft.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.reportObserved=function(){return ae(this)},t.prototype.reportChanged=function(){re(),se(this),ie()},t.prototype.toString=function(){return this.name},t}(),P=_("Atom",T);function D(t,e,n){void 0===e&&(e=p),void 0===n&&(n=p);var o=new T(t);return e!==p&&Re(o,e),n!==p&&Ie(o,n),o}function k(t,e){return t===e}function R(t,e){return Kn(t,e)}function I(t,e){return Kn(t,e,1)}function L(t,e){return Object.is(t,e)}var j={identity:k,structural:R,default:L,shallow:I},B=function(t,e){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},B(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function H(t,e){function n(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var F=function(){return F=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},F.apply(this,arguments)};function z(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function W(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a}function Y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(W(arguments[e]));return t}var G=Symbol("mobx did run lazy initializers"),X=Symbol("mobx pending decorators"),U={},V={};function K(t,e){var n=e?U:V;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return q(this),this[t]},set:function(e){q(this),this[t]=e}})}function q(t){var e,n;if(!0!==t[G]){var o=t[X];if(o){m(t,G,!0);var r=Y(Object.getOwnPropertySymbols(o),Object.keys(o));try{for(var i=z(r),a=i.next();!a.done;a=i.next()){var s=a.value,l=o[s];l.propertyCreator(t,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}}}function Z(t,e){return function(){var n,o=function(o,r,i,a){if(!0===a)return e(o,r,i,o,n),null;if(!Object.prototype.hasOwnProperty.call(o,X)){var s=o[X];m(o,X,F({},s))}return o[X][r]={prop:r,propertyCreator:e,descriptor:i,decoratorTarget:o,decoratorArguments:n},K(r,t)};return $(arguments)?(n=a,o.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),o)}}function $(t){return(2===t.length||3===t.length)&&("string"===typeof t[1]||"symbol"===typeof t[1])||4===t.length&&!0===t[3]}function J(t,e,n){return Ke(t)?t:Array.isArray(t)?ht.array(t,{name:n}):g(t)?ht.object(t,void 0,{name:n}):E(t)?ht.map(t,{name:n}):A(t)?ht.set(t,{name:n}):t}function Q(t,e,n){return void 0===t||null===t||Yn(t)||Cn(t)||Pn(t)||Rn(t)?t:Array.isArray(t)?ht.array(t,{name:n,deep:!1}):g(t)?ht.object(t,void 0,{name:n,deep:!1}):E(t)?ht.map(t,{name:n,deep:!1}):A(t)?ht.set(t,{name:n,deep:!1}):u(!1)}function tt(t){return t}function et(t,e,n){return Kn(t,e)?e:t}function nt(t){c(t);var e=Z(!0,(function(e,n,o,r,i){var a=o?o.initializer?o.initializer.call(e):o.value:void 0;Ln(e).addObservableProp(n,a,t)})),n=e;return n.enhancer=t,n}var ot={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function rt(t){return null===t||void 0===t?ot:"string"===typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(ot);var it=nt(J),at=nt(Q),st=nt(tt),lt=nt(et);function ut(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?tt:J}function ct(t,e,n){if("string"===typeof arguments[1]||"symbol"===typeof arguments[1])return it.apply(null,arguments);if(Ke(t))return t;var o=g(t)?ht.object(t,e,n):Array.isArray(t)?ht.array(t,e):E(t)?ht.map(t,e):A(t)?ht.set(t,e):t;if(o!==t)return o;u(!1)}var dt={box:function(t,e){arguments.length>2&&pt("box");var n=rt(e);return new Yt(t,ut(n),n.name,!0,n.equals)},array:function(t,e){arguments.length>2&&pt("array");var n=rt(e);return _n(t,ut(n),n.name)},map:function(t,e){arguments.length>2&&pt("map");var n=rt(e);return new Tn(t,ut(n),n.name)},set:function(t,e){arguments.length>2&&pt("set");var n=rt(e);return new kn(t,ut(n),n.name)},object:function(t,e,n){"string"===typeof arguments[1]&&pt("object");var o=rt(n);if(!1===o.proxy)return Be({},t,e,o);var r=He(o),i=Be({},void 0,void 0,o),a=pn(i);return Fe(a,t,e,r),a},ref:st,shallow:at,deep:it,struct:lt},ht=ct;function pt(t){u("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(dt).forEach((function(t){return ht[t]=dt[t]}));var ft,vt,gt=Z(!1,(function(t,e,n,o,r){var i=n.get,a=n.set,s=r[0]||{};Ln(t).addComputedProp(t,e,F({get:i,set:a,context:t},s))})),yt=gt({equals:j.structural}),mt=function(t,e,n){if("string"===typeof e)return gt.apply(null,arguments);if(null!==t&&"object"===typeof t&&1===arguments.length)return gt.apply(null,arguments);var o="object"===typeof e?e:{};return o.get=t,o.set="function"===typeof e?e:o.set,o.name=o.name||t.name||"",new Xt(o)};mt.struct=yt,function(t){t[t["NOT_TRACKING"]=-1]="NOT_TRACKING",t[t["UP_TO_DATE"]=0]="UP_TO_DATE",t[t["POSSIBLY_STALE"]=1]="POSSIBLY_STALE",t[t["STALE"]=2]="STALE"}(ft||(ft={})),function(t){t[t["NONE"]=0]="NONE",t[t["LOG"]=1]="LOG",t[t["BREAK"]=2]="BREAK"}(vt||(vt={}));var bt=function(){function t(t){this.cause=t}return t}();function xt(t){return t instanceof bt}function wt(t){switch(t.dependenciesState){case ft.UP_TO_DATE:return!1;case ft.NOT_TRACKING:case ft.STALE:return!0;case ft.POSSIBLY_STALE:for(var e=Pt(!0),n=Mt(),o=t.observing,r=o.length,i=0;i<r;i++){var a=o[i];if(Ut(a)){if(Jt.disableErrorBoundaries)a.get();else try{a.get()}catch(Mo){return Tt(n),Dt(e),!0}if(t.dependenciesState===ft.STALE)return Tt(n),Dt(e),!0}}return kt(t),Tt(n),Dt(e),!1}}function _t(t){var e=t.observers.size>0;Jt.computationDepth>0&&e&&u(!1),Jt.allowStateChanges||!e&&"strict"!==Jt.enforceActions||u(!1)}function Et(t){0}function At(t,e,n){var o=Pt(!0);kt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Jt.runId;var r,i=Jt.trackingDerivation;if(Jt.trackingDerivation=t,!0===Jt.disableErrorBoundaries)r=e.call(n);else try{r=e.call(n)}catch(Mo){r=new bt(Mo)}return Jt.trackingDerivation=i,Ot(t),St(t),Dt(o),r}function St(t){}function Ot(t){for(var e=t.observing,n=t.observing=t.newObserving,o=ft.UP_TO_DATE,r=0,i=t.unboundDepsCount,a=0;a<i;a++){var s=n[a];0===s.diffValue&&(s.diffValue=1,r!==a&&(n[r]=s),r++),s.dependenciesState>o&&(o=s.dependenciesState)}n.length=r,t.newObserving=null,i=e.length;while(i--){s=e[i];0===s.diffValue&&ne(s,t),s.diffValue=0}while(r--){s=n[r];1===s.diffValue&&(s.diffValue=0,ee(s,t))}o!==ft.UP_TO_DATE&&(t.dependenciesState=o,t.onBecomeStale())}function Ct(t){var e=t.observing;t.observing=[];var n=e.length;while(n--)ne(e[n],t);t.dependenciesState=ft.NOT_TRACKING}function Nt(t){var e=Mt();try{return t()}finally{Tt(e)}}function Mt(){var t=Jt.trackingDerivation;return Jt.trackingDerivation=null,t}function Tt(t){Jt.trackingDerivation=t}function Pt(t){var e=Jt.allowStateReads;return Jt.allowStateReads=t,e}function Dt(t){Jt.allowStateReads=t}function kt(t){if(t.dependenciesState!==ft.UP_TO_DATE){t.dependenciesState=ft.UP_TO_DATE;var e=t.observing,n=e.length;while(n--)e[n].lowestObserverState=ft.UP_TO_DATE}}var Rt=0,It=1,Lt=Object.getOwnPropertyDescriptor((function(){}),"name");Lt&&Lt.configurable;function jt(t,e,n){var o=function(){return Bt(t,e,n||this,arguments)};return o.isMobxAction=!0,o}function Bt(t,e,n,o){var r=Ht(t,n,o);try{return e.apply(n,o)}catch(i){throw r.error=i,i}finally{Ft(r)}}function Ht(t,e,n){var o=be()&&!!t,r=0,i=Mt();re();var a=zt(!0),s=Pt(!0),l={prevDerivation:i,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:o,startTime:r,actionId:It++,parentActionId:Rt};return Rt=l.actionId,l}function Ft(t){Rt!==t.actionId&&u("invalid action stack. did you forget to finish an action?"),Rt=t.parentActionId,void 0!==t.error&&(Jt.suppressReactionErrors=!0),Wt(t.prevAllowStateChanges),Dt(t.prevAllowStateReads),ie(),Tt(t.prevDerivation),t.notifySpy,Jt.suppressReactionErrors=!1}function zt(t){var e=Jt.allowStateChanges;return Jt.allowStateChanges=t,e}function Wt(t){Jt.allowStateChanges=t}var Yt=function(t){function e(e,n,o,r,i){void 0===o&&(o="ObservableValue@"+l()),void 0===r&&(r=!0),void 0===i&&(i=j.default);var a=t.call(this,o)||this;return a.enhancer=n,a.name=o,a.equals=i,a.hasUnreportedChange=!1,a.value=n(e,void 0,o),r&&be(),a}return H(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value;if(t=this.prepareNewValue(t),t!==Jt.UNCHANGED){be();0,this.setNewValue(t)}},e.prototype.prepareNewValue=function(t){if(_t(this),fn(this)){var e=gn(this,{object:this,type:"update",newValue:t});if(!e)return Jt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Jt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),yn(this)&&bn(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return vn(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),mn(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return C(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(T),Gt=_("ObservableValue",Yt),Xt=function(){function t(t){this.dependenciesState=ft.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ft.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+l(),this.value=new bt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=vt.NONE,c(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+l(),t.set&&(this.setter=jt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?j.structural:j.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){ue(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.get=function(){this.isComputing&&u("Cycle detected in computation "+this.name+": "+this.derivation),0!==Jt.inBatch||0!==this.observers.size||this.keepAlive?(ae(this),wt(this)&&this.trackAndCompute()&&le(this)):wt(this)&&(this.warnAboutUntrackedRead(),re(),this.value=this.computeValue(!1),ie());var t=this.value;if(xt(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(xt(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){c(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else c(!1,!1)},t.prototype.trackAndCompute=function(){be();var t=this.value,e=this.dependenciesState===ft.NOT_TRACKING,n=this.computeValue(!0),o=e||xt(t)||xt(n)||!this.equals(t,n);return o&&(this.value=n),o},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Jt.computationDepth++,t)e=At(this,this.derivation,this.scope);else if(!0===Jt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(Mo){e=new bt(Mo)}return Jt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(Ct(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,o=!0,r=void 0;return Me((function(){var i=n.get();if(!o||e){var a=Mt();t({type:"update",object:n,newValue:i,oldValue:r}),Tt(a)}o=!1,r=i}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return C(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(),Ut=_("ComputedValue",Xt),Vt=function(){function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return t}(),Kt={};function qt(){return"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:Kt}var Zt=!0,$t=!1,Jt=function(){var t=qt();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Zt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Vt).version&&(Zt=!1),Zt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Vt):(setTimeout((function(){$t||u("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Vt)}();function Qt(){(Jt.pendingReactions.length||Jt.inBatch||Jt.isRunningReactions)&&u("isolateGlobalState should be called before MobX is running any reactions"),$t=!0,Zt&&(0===--qt().__mobxInstanceCount&&(qt().__mobxGlobals=void 0),Jt=new Vt)}function te(){return Jt}function ee(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function ne(t,e){t.observers.delete(e),0===t.observers.size&&oe(t)}function oe(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Jt.pendingUnobservations.push(t))}function re(){Jt.inBatch++}function ie(){if(0===--Jt.inBatch){ve();for(var t=Jt.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Xt&&n.suspend())}Jt.pendingUnobservations=[]}}function ae(t){Et(t);var e=Jt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Jt.inBatch>0&&oe(t),!1)}function se(t){t.lowestObserverState!==ft.STALE&&(t.lowestObserverState=ft.STALE,t.observers.forEach((function(e){e.dependenciesState===ft.UP_TO_DATE&&(e.isTracing!==vt.NONE&&ce(e,t),e.onBecomeStale()),e.dependenciesState=ft.STALE})))}function le(t){t.lowestObserverState!==ft.STALE&&(t.lowestObserverState=ft.STALE,t.observers.forEach((function(e){e.dependenciesState===ft.POSSIBLY_STALE?e.dependenciesState=ft.STALE:e.dependenciesState===ft.UP_TO_DATE&&(t.lowestObserverState=ft.UP_TO_DATE)})))}function ue(t){t.lowestObserverState===ft.UP_TO_DATE&&(t.lowestObserverState=ft.POSSIBLY_STALE,t.observers.forEach((function(e){e.dependenciesState===ft.UP_TO_DATE&&(e.dependenciesState=ft.POSSIBLY_STALE,e.isTracing!==vt.NONE&&ce(e,t),e.onBecomeStale())})))}function ce(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===vt.BREAK){var n=[];de(ze(t),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Xt?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function de(t,e,n){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(n).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return de(t,e,n+1)})))}var he=function(){function t(t,e,n,o){void 0===t&&(t="Reaction@"+l()),void 0===o&&(o=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=o,this.observing=[],this.newObserving=[],this.dependenciesState=ft.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+l(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=vt.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Jt.pendingReactions.push(this),ve())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(re(),this._isScheduled=!1,wt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&be()}catch(Mo){this.reportExceptionInDerivation(Mo)}}ie()}},t.prototype.track=function(t){if(!this.isDisposed){re();be();0,this._isRunning=!0;var e=At(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ct(this),xt(e)&&this.reportExceptionInDerivation(e.cause),ie()}},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Jt.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Jt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),be()&&xe({type:"error",name:this.name,message:n,error:""+t}),Jt.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(re(),Ct(this),ie()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[M]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),sn(this,t)},t}();var pe=100,fe=function(t){return t()};function ve(){Jt.inBatch>0||Jt.isRunningReactions||fe(ge)}function ge(){Jt.isRunningReactions=!0;var t=Jt.pendingReactions,e=0;while(t.length>0){++e===pe&&(console.error("Reaction doesn't converge to a stable state after "+pe+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),o=0,r=n.length;o<r;o++)n[o].runReaction()}Jt.isRunningReactions=!1}var ye=_("Reaction",he);function me(t){var e=fe;fe=function(n){return t((function(){return e(n)}))}}function be(){return!1}function xe(t){}function we(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function _e(){u(!1)}function Ee(t){return function(e,n,o){if(o){if(o.value)return{value:jt(t,o.value),enumerable:!1,configurable:!0,writable:!0};var r=o.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return jt(t,r.call(this))}}}return Ae(t).apply(this,arguments)}}function Ae(t){return function(e,n,o){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){m(this,n,Oe(t,e))}})}}function Se(t,e,n,o){return!0===o?(Ne(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Ne(this,e,n.value||n.initializer.call(this)),this[e]},set:_e}:{enumerable:!1,configurable:!0,set:function(t){Ne(this,e,t)},get:function(){}}}var Oe=function(t,e,n,o){return 1===arguments.length&&"function"===typeof t?jt(t.name||"<unnamed action>",t):2===arguments.length&&"function"===typeof e?jt(t,e):1===arguments.length&&"string"===typeof t?Ee(t):!0!==o?Ee(e).apply(null,arguments):void m(t,e,jt(t.name||e,n.value,this))};function Ce(t,e){var n="string"===typeof t?t:t.name||"<unnamed action>",o="function"===typeof t?t:e;return Bt(n,o,this,void 0)}function Ne(t,e,n){m(t,e,jt(e,n.bind(t)))}function Me(t,e){void 0===e&&(e=s);var n,o=e&&e.name||t.name||"Autorun@"+l(),r=!e.scheduler&&!e.delay;if(r)n=new he(o,(function(){this.track(u)}),e.onError,e.requiresObservable);else{var i=Pe(e),a=!1;n=new he(o,(function(){a||(a=!0,i((function(){a=!1,n.isDisposed||n.track(u)})))}),e.onError,e.requiresObservable)}function u(){t(n)}return n.schedule(),n.getDisposer()}Oe.bound=Se;var Te=function(t){return t()};function Pe(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Te}function De(t,e,n){void 0===n&&(n=s);var o,r=n.name||"Reaction@"+l(),i=Oe(r,n.onError?ke(n.onError,e):e),a=!n.scheduler&&!n.delay,u=Pe(n),c=!0,d=!1,h=n.compareStructural?j.structural:n.equals||j.default,p=new he(r,(function(){c||a?f():d||(d=!0,u(f))}),n.onError,n.requiresObservable);function f(){if(d=!1,!p.isDisposed){var e=!1;p.track((function(){var n=t(p);e=c||!h(o,n),o=n})),c&&n.fireImmediately&&i(o,p),c||!0!==e||i(o,p),c&&(c=!1)}}return p.schedule(),p.getDisposer()}function ke(t,e){return function(){try{return e.apply(this,arguments)}catch(Mo){t.call(this,Mo)}}}function Re(t,e,n){return Le("onBecomeObserved",t,e,n)}function Ie(t,e,n){return Le("onBecomeUnobserved",t,e,n)}function Le(t,e,n,o){var r="function"===typeof o?Gn(e,n):Gn(e),i="function"===typeof o?o:n,a=t+"Listeners";r[a]?r[a].add(i):r[a]=new Set([i]);var s=r[t];return"function"!==typeof s?u(!1):function(){var t=r[a];t&&(t.delete(i),0===t.size&&delete r[a])}}function je(t){var e=t.enforceActions,n=t.computedRequiresReaction,o=t.computedConfigurable,r=t.disableErrorBoundaries,i=t.reactionScheduler,a=t.reactionRequiresObservable,s=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&Qt(),void 0!==e){"boolean"!==typeof e&&"strict"!==e||d("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:u("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Jt.enforceActions=l,Jt.allowStateChanges=!0!==l&&"strict"!==l}void 0!==n&&(Jt.computedRequiresReaction=!!n),void 0!==a&&(Jt.reactionRequiresObservable=!!a),void 0!==s&&(Jt.observableRequiresReaction=!!s,Jt.allowStateReads=!Jt.observableRequiresReaction),void 0!==o&&(Jt.computedConfigurable=!!o),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Jt.disableErrorBoundaries=!!r),i&&me(i)}function Be(t,e,n,o){o=rt(o);var r=He(o);return q(t),Ln(t,o.name,r.enhancer),e&&Fe(t,e,n,r),t}function He(t){return t.defaultDecorator||(!1===t.deep?st:it)}function Fe(t,e,n,o){var r,i;re();try{var a=N(e);try{for(var s=z(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=Object.getOwnPropertyDescriptor(e,u);0;var d=n&&u in n?n[u]:c.get?gt:o;0;var h=d(t,u,c,!0);h&&Object.defineProperty(t,u,h)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}finally{ie()}}function ze(t,e){return We(Gn(t,e))}function We(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=f(t.observing).map(We)),e}function Ye(){this.message="FLOW_CANCELLED"}function Ge(t,e){if(null===t||void 0===t)return!1;if(void 0!==e){if(!1===Yn(t))return!1;if(!t[M].values.has(e))return!1;var n=Gn(t,e);return Ut(n)}return Ut(t)}function Xe(t){return arguments.length>1?u(!1):Ge(t)}function Ue(t,e){return"string"!==typeof e?u(!1):Ge(t,e)}function Ve(t,e){return null!==t&&void 0!==t&&(void 0!==e?!!Yn(t)&&t[M].values.has(e):Yn(t)||!!t[M]||P(t)||ye(t)||Ut(t))}function Ke(t){return 1!==arguments.length&&u(!1),Ve(t)}function qe(t){return Yn(t)?t[M].getKeys():Pn(t)||Rn(t)?Array.from(t.keys()):Cn(t)?t.map((function(t,e){return e})):u(!1)}function Ze(t){return Yn(t)?qe(t).map((function(e){return t[e]})):Pn(t)?qe(t).map((function(e){return t.get(e)})):Rn(t)?Array.from(t.values()):Cn(t)?t.slice():u(!1)}function $e(t){return Yn(t)?qe(t).map((function(e){return[e,t[e]]})):Pn(t)?qe(t).map((function(e){return[e,t.get(e)]})):Rn(t)?Array.from(t.entries()):Cn(t)?t.map((function(t,e){return[e,t]})):u(!1)}function Je(t,e,n){if(2!==arguments.length||Rn(t))if(Yn(t)){var o=t[M],r=o.values.get(e);r?o.write(e,n):o.addObservableProp(e,n,o.defaultEnhancer)}else if(Pn(t))t.set(e,n);else if(Rn(t))t.add(e);else{if(!Cn(t))return u(!1);"number"!==typeof e&&(e=parseInt(e,10)),c(e>=0,"Not a valid index: '"+e+"'"),re(),e>=t.length&&(t.length=e+1),t[e]=n,ie()}else{re();var i=e;try{for(var a in i)Je(t,a,i[a])}finally{ie()}}}function Qe(t,e,n,o){return"function"===typeof n?en(t,e,n,o):tn(t,e,n)}function tn(t,e,n){return Xn(t).observe(e,n)}function en(t,e,n,o){return Xn(t,e).observe(n,o)}Ye.prototype=Object.create(Error.prototype);var nn={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function on(t,e,n,o){return o.detectCycles&&t.set(e,n),n}function rn(t,e,n){if(!e.recurseEverything&&!Ke(t))return t;if("object"!==typeof t)return t;if(null===t)return null;if(t instanceof Date)return t;if(Gt(t))return rn(t.get(),e,n);Ke(t)&&qe(t);var o=!0===e.detectCycles;if(o&&null!==t&&n.has(t))return n.get(t);if(Cn(t)||Array.isArray(t)){var r=on(n,t,[],e),i=t.map((function(t){return rn(t,e,n)}));r.length=i.length;for(var a=0,s=i.length;a<s;a++)r[a]=i[a];return r}if(Rn(t)||Object.getPrototypeOf(t)===Set.prototype){if(!1===e.exportMapsAsObjects){var l=on(n,t,new Set,e);return t.forEach((function(t){l.add(rn(t,e,n))})),l}var u=on(n,t,[],e);return t.forEach((function(t){u.push(rn(t,e,n))})),u}if(Pn(t)||Object.getPrototypeOf(t)===Map.prototype){if(!1===e.exportMapsAsObjects){var c=on(n,t,new Map,e);return t.forEach((function(t,o){c.set(o,rn(t,e,n))})),c}var d=on(n,t,{},e);return t.forEach((function(t,o){d[o]=rn(t,e,n)})),d}var h=on(n,t,{},e);return S(t).forEach((function(o){h[o]=rn(t[o],e,n)})),h}function an(t,e){var n;return"boolean"===typeof e&&(e={detectCycles:e}),e||(e=nn),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(n=new Map),rn(t,e,n)}function sn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"===typeof t[t.length-1]&&(n=t.pop());var o=ln(t);if(!o)return u(!1);o.isTracing===vt.NONE&&console.log("[mobx.trace] '"+o.name+"' tracing enabled"),o.isTracing=n?vt.BREAK:vt.LOG}function ln(t){switch(t.length){case 0:return Jt.trackingDerivation;case 1:return Gn(t[0]);case 2:return Gn(t[0],t[1])}}function un(t,e){void 0===e&&(e=void 0),re();try{return t.apply(e)}finally{ie()}}function cn(t){return t[M]}function dn(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t}var hn={has:function(t,e){if(e===M||"constructor"===e||e===G)return!0;var n=cn(t);return dn(e)?n.has(e):e in t},get:function(t,e){if(e===M||"constructor"===e||e===G)return t[e];var n=cn(t),o=n.values.get(e);if(o instanceof T){var r=o.get();return void 0===r&&n.has(e),r}return dn(e)&&n.has(e),t[e]},set:function(t,e,n){return!!dn(e)&&(Je(t,e,n),!0)},deleteProperty:function(t,e){if(!dn(e))return!1;var n=cn(t);return n.remove(e),!0},ownKeys:function(t){var e=cn(t);return e.keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return u("Dynamic observable objects cannot be frozen"),!1}};function pn(t){var e=new Proxy(t,hn);return t[M].proxy=e,e}function fn(t){return void 0!==t.interceptors&&t.interceptors.length>0}function vn(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),h((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function gn(t,e){var n=Mt();try{for(var o=Y(t.interceptors||[]),r=0,i=o.length;r<i;r++)if(e=o[r](e),c(!e||e.type,"Intercept handlers should return nothing or a change object"),!e)break;return e}finally{Tt(n)}}function yn(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function mn(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),h((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function bn(t,e){var n=Mt(),o=t.changeListeners;if(o){o=o.slice();for(var r=0,i=o.length;r<i;r++)o[r](e);Tt(n)}}var xn=1e4,wn={get:function(t,e){return e===M?t[M]:"length"===e?t[M].getArrayLength():"number"===typeof e?An.get.call(t,e):"string"!==typeof e||isNaN(e)?An.hasOwnProperty(e)?An[e]:t[e]:An.get.call(t,parseInt(e))},set:function(t,e,n){return"length"===e&&t[M].setArrayLength(n),"number"===typeof e&&An.set.call(t,e,n),"symbol"===typeof e||isNaN(e)?t[e]=n:An.set.call(t,parseInt(e),n),!0},preventExtensions:function(t){return u("Observable arrays cannot be frozen"),!1}};function _n(t,e,n,o){void 0===n&&(n="ObservableArray@"+l()),void 0===o&&(o=!1);var r=new En(n,e,o);b(r.values,M,r);var i=new Proxy(r.values,wn);if(r.proxy=i,t&&t.length){var a=zt(!0);r.spliceWithArray(0,0,t),Wt(a)}return i}var En=function(){function t(t,e,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new T(t||"ObservableArray@"+l()),this.enhancer=function(n,o){return e(n,o,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return vn(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),mn(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!==typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),o=0;o<t-e;o++)n[o]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,n){var o=this;_t(this.atom);var r=this.values.length;if(void 0===t?t=0:t>r?t=r:t<0&&(t=Math.max(0,r+t)),e=1===arguments.length?r-t:void 0===e||null===e?0:Math.max(0,Math.min(e,r-t)),void 0===n&&(n=a),fn(this)){var i=gn(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:n});if(!i)return a;e=i.removedCount,n=i.added}n=0===n.length?n:n.map((function(t){return o.enhancer(t,void 0)}));var s=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,n){var o;if(n.length<xn)return(o=this.values).splice.apply(o,Y([t,e],n));var r=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),r},t.prototype.notifyArrayChildUpdate=function(t,e,n){var o=!this.owned&&be(),r=yn(this),i=r||o?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:n}:null;this.atom.reportChanged(),r&&bn(this,i)},t.prototype.notifyArraySplice=function(t,e,n){var o=!this.owned&&be(),r=yn(this),i=r||o?{object:this.proxy,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom.reportChanged(),r&&bn(this,i)},t}(),An={intercept:function(t){return this[M].intercept(t)},observe:function(t,e){void 0===e&&(e=!1);var n=this[M];return n.observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[M];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=this[M];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray(t);case 2:return r.spliceWithArray(t,e)}return r.spliceWithArray(t,e,n)},spliceWithArray:function(t,e,n){var o=this[M];return o.spliceWithArray(t,e,n)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[M];return n.spliceWithArray(n.values.length,0,t),n.values.length},pop:function(){return this.splice(Math.max(this[M].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[M];return n.spliceWithArray(0,0,t),n.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[M],n=e.dehanceValues(e.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},get:function(t){var e=this[M];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var n=this[M],o=n.values;if(t<o.length){_t(n.atom);var r=o[t];if(fn(n)){var i=gn(n,{type:"update",object:n.proxy,index:t,newValue:e});if(!i)return;e=i.newValue}e=n.enhancer(e,r);var a=e!==r;a&&(o[t]=e,n.notifyArrayChildUpdate(t,e,r))}else{if(t!==o.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+o.length);n.spliceWithArray(t,0,[e])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){"function"===typeof Array.prototype[t]&&(An[t]=function(){var e=this[M];e.atom.reportObserved();var n=e.dehanceValues(e.values);return n[t].apply(n,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(t){"function"===typeof Array.prototype[t]&&(An[t]=function(e,n){var o=this,r=this[M];r.atom.reportObserved();var i=r.dehanceValues(r.values);return i[t]((function(t,r){return e.call(n,t,r,o)}),n)})})),["reduce","reduceRight"].forEach((function(t){An[t]=function(){var e=this,n=this[M];n.atom.reportObserved();var o=arguments[0];return arguments[0]=function(t,r,i){return r=n.dehanceValue(r),o(t,r,i,e)},n.values[t].apply(n.values,arguments)}}));var Sn,On=_("ObservableArrayAdministration",En);function Cn(t){return v(t)&&On(t[M])}var Nn,Mn={},Tn=function(){function t(t,e,n){if(void 0===e&&(e=J),void 0===n&&(n="ObservableMap@"+l()),this.enhancer=e,this.name=n,this[Sn]=Mn,this._keysAtom=D(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Jt.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var o=n=new Yt(this._has(t),tt,this.name+"."+O(t)+"?",!1);this._hasMap.set(t,o),Ie(o,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(fn(this)){var o=gn(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!o)return this;e=o.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(_t(this._keysAtom),fn(this)){var n=gn(this,{type:"delete",object:this,name:t});if(!n)return!1}if(this._has(t)){var o=be(),r=yn(this);n=r||o?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return un((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1);var n=e._data.get(t);n.setNewValue(void 0),e._data.delete(t)})),r&&bn(this,n),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if(e=n.prepareNewValue(e),e!==Jt.UNCHANGED){var o=be(),r=yn(this),i=r||o?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;0,n.setNewValue(e),r&&bn(this,i)}},t.prototype._addValue=function(t,e){var n=this;_t(this._keysAtom),un((function(){var o=new Yt(e,n.enhancer,n.name+"."+O(t),!1);n._data.set(t,o),e=o.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()}));var o=be(),r=yn(this),i=r||o?{type:"add",object:this,name:t,newValue:e}:null;r&&bn(this,i)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return Jn({next:function(){var n=e.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:t.get(r)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return Jn({next:function(){var n=e.next(),o=n.done,r=n.value;return{done:o,value:o?void 0:[r,t.get(r)]}}})},t.prototype[(Sn=M,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var n,o;try{for(var r=z(this),i=r.next();!i.done;i=r.next()){var a=W(i.value,2),s=a[0],l=a[1];t.call(e,l,s,this)}}catch(u){n={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},t.prototype.merge=function(t){var e=this;return Pn(t)&&(t=t.toJS()),un((function(){var n=zt(!0);try{g(t)?S(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=W(t,2),o=n[0],r=n[1];return e.set(o,r)})):E(t)?(t.constructor!==Map&&u("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach((function(t,n){return e.set(n,t)}))):null!==t&&void 0!==t&&u("Cannot initialize map from "+t)}finally{Wt(n)}})),this},t.prototype.clear=function(){var t=this;un((function(){Nt((function(){var e,n;try{for(var o=z(t.keys()),r=o.next();!r.done;r=o.next()){var i=r.value;t.delete(i)}}catch(a){e={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}))}))},t.prototype.replace=function(t){var e=this;return un((function(){var n,o,r,i,a=y(t),s=new Map,l=!1;try{for(var u=z(e._data.keys()),c=u.next();!c.done;c=u.next()){var d=c.value;if(!a.has(d)){var h=e.delete(d);if(h)l=!0;else{var p=e._data.get(d);s.set(d,p)}}}}catch(A){n={error:A}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}try{for(var f=z(a.entries()),v=f.next();!v.done;v=f.next()){var g=W(v.value,2),m=(d=g[0],p=g[1],e._data.has(d));if(e.set(d,p),e._data.has(d)){var b=e._data.get(d);s.set(d,b),m||(l=!0)}}}catch(S){r={error:S}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}if(!l)if(e._data.size!==s.size)e._keysAtom.reportChanged();else{var x=e._data.keys(),w=s.keys(),_=x.next(),E=w.next();while(!_.done){if(_.value!==E.value){e._keysAtom.reportChanged();break}_=x.next(),E=w.next()}}e._data=s})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,n={};try{for(var o=z(this),r=o.next();!r.done;r=o.next()){var i=W(r.value,2),a=i[0],s=i[1];n["symbol"===typeof a?a:O(a)]=s}}catch(l){t={error:l}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map((function(e){return O(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return mn(this,t)},t.prototype.intercept=function(t){return vn(this,t)},t}(),Pn=_("ObservableMap",Tn),Dn={},kn=function(){function t(t,e,n){if(void 0===e&&(e=J),void 0===n&&(n="ObservableSet@"+l()),this.name=n,this[Nn]=Dn,this._data=new Set,this._atom=D(this.name),this[Symbol.toStringTag]="Set","function"!==typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,o){return e(t,o,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;un((function(){Nt((function(){var e,n;try{for(var o=z(t._data.values()),r=o.next();!r.done;r=o.next()){var i=r.value;t.delete(i)}}catch(a){e={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}))}))},t.prototype.forEach=function(t,e){var n,o;try{for(var r=z(this),i=r.next();!i.done;i=r.next()){var a=i.value;t.call(e,a,a,this)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(_t(this._atom),fn(this)){var n=gn(this,{type:"add",object:this,newValue:t});if(!n)return this}if(!this.has(t)){un((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var o=be(),r=yn(this);n=r||o?{type:"add",object:this,newValue:t}:null;0,r&&bn(this,n)}return this},t.prototype.delete=function(t){var e=this;if(fn(this)){var n=gn(this,{type:"delete",object:this,oldValue:t});if(!n)return!1}if(this.has(t)){var o=be(),r=yn(this);n=r||o?{type:"delete",object:this,oldValue:t}:null;return un((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&bn(this,n),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return Jn({next:function(){var o=t;return t+=1,o<n.length?{value:[e[o],n[o]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,n=Array.from(this._data.values());return Jn({next:function(){return e<n.length?{value:t.dehanceValue(n[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Rn(t)&&(t=t.toJS()),un((function(){var n=zt(!0);try{Array.isArray(t)||A(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!==t&&void 0!==t&&u("Cannot initialize set from "+t)}finally{Wt(n)}})),this},t.prototype.observe=function(t,e){return mn(this,t)},t.prototype.intercept=function(t){return vn(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(Nn=M,Symbol.iterator)]=function(){return this.values()},t}(),Rn=_("ObservableSet",kn),In=function(){function t(t,e,n,o){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=n,this.defaultEnhancer=o,this.keysAtom=new T(n+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var n=this.target,o=this.values.get(t);if(o instanceof Xt)o.set(e);else{if(fn(this)){var r=gn(this,{type:"update",object:this.proxy||n,name:t,newValue:e});if(!r)return;e=r.newValue}if(e=o.prepareNewValue(e),e!==Jt.UNCHANGED){var i=yn(this),a=be();r=i||a?{type:"update",object:this.proxy||n,oldValue:o.value,name:t,newValue:e}:null;0,o.setNewValue(e),i&&bn(this,r)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),n=e.get(t);if(n)return n.get();var o=!!this.values.get(t);return n=new Yt(o,tt,this.name+"."+O(t)+"?",!1),e.set(t,n),n.get()},t.prototype.addObservableProp=function(t,e,n){void 0===n&&(n=this.defaultEnhancer);var o=this.target;if(w(o,t),fn(this)){var r=gn(this,{object:this.proxy||o,name:t,type:"add",newValue:e});if(!r)return;e=r.newValue}var i=new Yt(e,n,this.name+"."+O(t),!1);this.values.set(t,i),e=i.value,Object.defineProperty(o,t,Hn(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,n){var o=this.target;n.name=n.name||this.name+"."+O(e),this.values.set(e,new Xt(n)),(t===o||x(t,e))&&Object.defineProperty(t,e,zn(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(fn(this)){var n=gn(this,{object:this.proxy||e,name:t,type:"remove"});if(!n)return}try{re();var o=yn(this),r=be(),i=this.values.get(t),a=i&&i.get();if(i&&i.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var s=this.pendingKeys.get(t);s&&s.set(!1)}delete this.target[t];n=o||r?{type:"remove",object:this.proxy||e,oldValue:a,name:t}:null;0,o&&bn(this,n)}finally{ie()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return mn(this,t)},t.prototype.intercept=function(t){return vn(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var n=yn(this),o=be(),r=n||o?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(n&&bn(this,r),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var n=[];try{for(var o=z(this.values),r=o.next();!r.done;r=o.next()){var i=W(r.value,2),a=i[0],s=i[1];s instanceof Yt&&n.push(a)}}catch(l){t={error:l}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},t}();function Ln(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=J),Object.prototype.hasOwnProperty.call(t,M))return t[M];g(t)||(e=(t.constructor.name||"ObservableObject")+"@"+l()),e||(e="ObservableObject@"+l());var o=new In(t,new Map,O(e),n);return m(t,M,o),o}var jn=Object.create(null),Bn=Object.create(null);function Hn(t){return jn[t]||(jn[t]={configurable:!0,enumerable:!0,get:function(){return this[M].read(t)},set:function(e){this[M].write(t,e)}})}function Fn(t){var e=t[M];return e||(q(t),t[M])}function zn(t){return Bn[t]||(Bn[t]={configurable:Jt.computedConfigurable,enumerable:!1,get:function(){return Fn(this).read(t)},set:function(e){Fn(this).write(t,e)}})}var Wn=_("ObservableObjectAdministration",In);function Yn(t){return!!v(t)&&(q(t),Wn(t[M]))}function Gn(t,e){if("object"===typeof t&&null!==t){if(Cn(t))return void 0!==e&&u(!1),t[M].atom;if(Rn(t))return t[M];if(Pn(t)){var n=t;if(void 0===e)return n._keysAtom;var o=n._data.get(e)||n._hasMap.get(e);return o||u(!1),o}if(q(t),e&&!t[M]&&t[e],Yn(t)){if(!e)return u(!1);o=t[M].values.get(e);return o||u(!1),o}if(P(t)||Ut(t)||ye(t))return t}else if("function"===typeof t&&ye(t[M]))return t[M];return u(!1)}function Xn(t,e){return t||u("Expecting some object"),void 0!==e?Xn(Gn(t,e)):P(t)||Ut(t)||ye(t)||Pn(t)||Rn(t)?t:(q(t),t[M]?t[M]:void u(!1))}function Un(t,e){var n;return n=void 0!==e?Gn(t,e):Yn(t)||Pn(t)||Rn(t)?Xn(t):Gn(t),n.name}var Vn=Object.prototype.toString;function Kn(t,e,n){return void 0===n&&(n=-1),qn(t,e,n)}function qn(t,e,n,o,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var i=typeof t;if("function"!==i&&"object"!==i&&"object"!=typeof e)return!1;var a=Vn.call(t);if(a!==Vn.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=Zn(t),e=Zn(e);var s="[object Array]"===a;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!("function"===typeof l&&l instanceof l&&"function"===typeof u&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),o=o||[],r=r||[];var c=o.length;while(c--)if(o[c]===t)return r[c]===e;if(o.push(t),r.push(e),s){if(c=t.length,c!==e.length)return!1;while(c--)if(!qn(t[c],e[c],n-1,o,r))return!1}else{var d=Object.keys(t),h=void 0;if(c=d.length,Object.keys(e).length!==c)return!1;while(c--)if(h=d[c],!$n(e,h)||!qn(t[h],e[h],n-1,o,r))return!1}return o.pop(),r.pop(),!0}function Zn(t){return Cn(t)?t.slice():E(t)||Pn(t)||A(t)||Rn(t)?Array.from(t.entries()):t}function $n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jn(t){return t[Symbol.iterator]=Qn,t}function Qn(){return this}if("undefined"===typeof Proxy||"undefined"===typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");function to(t){return!(t.prototype&&t.prototype.render)&&!r.uA.isPrototypeOf(t)}function eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.prefix,o=void 0===n?"":n,r=e.suffix,i=void 0===r?"":r,a=t.displayName||t.name||t.constructor&&t.constructor.name||"<component>";return o+a+i}(function(){function t(){}t.name})(),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:we,extras:{getDebugName:Un},$mobx:M});var no="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ro=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),io=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ao=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},so=!1,lo=console;function uo(t){var e=te().allowStateChanges;return te().allowStateChanges=t,e}function co(t){te().allowStateChanges=t}function ho(t,e,n,o,r){var i=uo(t),a=void 0;try{a=e(n,o,r)}finally{co(i)}return a}function po(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t[e],r=vo[e],i=o?!0===n?function(){r.apply(this,arguments),o.apply(this,arguments)}:function(){o.apply(this,arguments),r.apply(this,arguments)}:r;t[e]=i}function fo(t,e){if(null==t||null==e||"object"!==("undefined"===typeof t?"undefined":no(t))||"object"!==("undefined"===typeof e?"undefined":no(e)))return t!==e;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var o=void 0,r=n.length-1;o=n[r];r--)if(e[o]!==t[o])return!0;return!1}var vo={componentWillMount:function(){var t=this;if(!0!==so){var e=eo(this),n=!1,o=!1;c.call(this,"props"),c.call(this,"state");var i=this.render.bind(this),a=null,s=!1,l=function(){return a=new he(e+".render()",(function(){if(!s&&(s=!0,"function"===typeof t.componentWillReact&&t.componentWillReact(),!0!==t.__$mobxIsUnmounted)){var e=!0;try{o=!0,n||r.uA.prototype.forceUpdate.call(t),e=!1}finally{o=!1,e&&a.dispose()}}})),a.reactComponent=t,u.$mobx=a,t.render=u,u(t.props,t.state,t.context)},u=function(t,e,n){s=!1;var o=void 0,r=void 0;if(a.track((function(){try{r=ho(!1,i,t,e,n)}catch(Mo){o=Mo}})),o)throw o;return r};this.render=l}function c(t){var e=this[t],r=D("reactive "+t);Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:function(){return r.reportObserved(),e},set:function(t){!o&&fo(e,t)?(e=t,n=!0,r.reportChanged(),n=!1):e=t}})}},componentWillUnmount:function(){!0!==so&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0)},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(t,e){return so&&lo.warn("[mobx-preact] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e||fo(this.props,t)}};function go(t){var e,n;if(arguments.length>1&&lo.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),!0===t.isMobxInjector&&lo.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),to(t))return go((n=e=function(e){function n(){return oo(this,n),ao(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return io(n,e),ro(n,[{key:"render",value:function(){return t.call(this,this.props,this.context)}}]),n}(r.uA),e.displayName=eo(t),n));if(!t)throw new Error("Please pass a valid component to 'observer'");var o=t.prototype||t;return yo(o),t.isMobXReactObserver=!0,t}function yo(t){po(t,"componentWillMount",!0),po(t,"componentDidMount"),t.shouldComponentUpdate||(t.shouldComponentUpdate=vo.shouldComponentUpdate)}var mo=go((function(t){var e=t.children;return e[0]()}));mo.displayName="Observer";"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;function bo(t,e){return e={exports:{}},t(e,e.exports),e.exports}bo((function(t,e){(function(e,n){t.exports=n()})(0,(function(){var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,o=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,i=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function l(u,c,d){if("string"!==typeof c){if(s){var h=a(c);h&&h!==s&&l(u,h,d)}var p=o(c);r&&(p=p.concat(r(c)));for(var f=0;f<p.length;++f){var v=p[f];if(!t[v]&&!e[v]&&(!d||!d[v])){var g=i(c,v);try{n(u,v,g)}catch(Mo){}}}return u}return u}}))}));var xo={children:!0,key:!0,ref:!0},wo=console;(function(t){function e(){return oo(this,e),ao(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}io(e,t),ro(e,[{key:"render",value:function(t){var e=t.children;return e.length>1?(0,r.h)("div",null," ",e," "):e[0]}},{key:"getChildContext",value:function(){var t={},e=this.context.mobxStores;if(e)for(var n in e)t[n]=e[n];for(var o in this.props)xo[o]||"suppressChangedStoreWarning"===o||(t[o]=this.props[o]);return{mobxStores:t}}},{key:"componentWillReceiveProps",value:function(t){if(Object.keys(t).length!==Object.keys(this.props).length&&wo.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var e in t)xo[e]||this.props[e]===t[e]||wo.warn("MobX Provider: Provided store '"+e+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}])})(r.uA);if(!r.uA)throw new Error("mobx-preact requires Preact to be available");var _o,Eo,Ao,So,Oo=0,Co=[],No=r.fF,Mo=No.__b,To=No.__r,Po=No.diffed,Do=No.__c,ko=No.unmount,Ro=No.__;function Io(t,e){No.__h&&No.__h(Eo,t,Oo||e),Oo=0;var n=Eo.__H||(Eo.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Lo(t){return Oo=1,jo(Qo,t)}function jo(t,e,n){var o=Io(_o++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Qo(void 0,e),function(t){var e=o.__N?o.__N[0]:o.__[0],n=o.t(e,t);e!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=Eo,!Eo.__f)){var r=function(t,e,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter((function(t){return!!t.__c}));if(r.every((function(t){return!t.__N})))return!i||i.call(this,t,e,n);var a=o.__c.props!==t;return r.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(a=!0)}})),i&&i.call(this,t,e,n)||a};Eo.__f=!0;var i=Eo.shouldComponentUpdate,a=Eo.componentWillUpdate;Eo.componentWillUpdate=function(t,e,n){if(this.__e){var o=i;i=void 0,r(t,e,n),i=o}a&&a.call(this,t,e,n)},Eo.shouldComponentUpdate=r}return o.__N||o.__}function Bo(t,e){var n=Io(_o++,3);!No.__s&&Jo(n.__H,e)&&(n.__=t,n.u=e,Eo.__H.__h.push(n))}function Ho(t,e){var n=Io(_o++,4);!No.__s&&Jo(n.__H,e)&&(n.__=t,n.u=e,Eo.__h.push(n))}function Fo(t){return Oo=5,Wo((function(){return{current:t}}),[])}function zo(t,e,n){Oo=6,Ho((function(){if("function"==typeof t){var n=t(e());return function(){t(null),n&&"function"==typeof n&&n()}}if(t)return t.current=e(),function(){return t.current=null}}),null==n?n:n.concat(t))}function Wo(t,e){var n=Io(_o++,7);return Jo(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Yo(t,e){return Oo=8,Wo((function(){return t}),e)}function Go(t){var e=Eo.context[t.__c],n=Io(_o++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(Eo)),e.props.value):t.__}function Xo(t,e){No.useDebugValue&&No.useDebugValue(e?e(t):t)}function Uo(){var t=Io(_o++,11);if(!t.__){for(var e=Eo.__v;null!==e&&!e.__m&&null!==e.__;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function Vo(){for(var t;t=Co.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Zo),t.__H.__h.forEach($o),t.__H.__h=[]}catch(_o){t.__H.__h=[],No.__e(_o,t.__v)}}No.__b=function(t){Eo=null,Mo&&Mo(t)},No.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ro&&Ro(t,e)},No.__r=function(t){To&&To(t),_o=0;var e=(Eo=t.__c).__H;e&&(Ao===Eo?(e.__h=[],Eo.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0}))):(e.__h.forEach(Zo),e.__h.forEach($o),e.__h=[],_o=0)),Ao=Eo},No.diffed=function(t){Po&&Po(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Co.push(e)&&So===No.requestAnimationFrame||((So=No.requestAnimationFrame)||qo)(Vo)),e.__H.__.forEach((function(t){t.u&&(t.__H=t.u),t.u=void 0}))),Ao=Eo=null},No.__c=function(t,e){e.some((function(t){try{t.__h.forEach(Zo),t.__h=t.__h.filter((function(t){return!t.__||$o(t)}))}catch(Eo){e.some((function(t){t.__h&&(t.__h=[])})),e=[],No.__e(Eo,t.__v)}})),Do&&Do(t,e)},No.unmount=function(t){ko&&ko(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{Zo(t)}catch(t){e=t}})),n.__H=void 0,e&&No.__e(e,n.__v))};var Ko="function"==typeof requestAnimationFrame;function qo(t){var e,n=function(){clearTimeout(o),Ko&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Ko&&(e=requestAnimationFrame(n))}function Zo(t){var e=Eo,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Eo=e}function $o(t){var e=Eo;t.__c=t.__(),Eo=e}function Jo(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function Qo(t,e){return"function"==typeof e?e(t):e}function tr(t,e){for(var n in e)t[n]=e[n];return t}function er(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var o in e)if("__source"!==o&&t[o]!==e[o])return!0;return!1}function nr(t,e){var n=e(),o=Lo({t:{__:n,u:e}}),r=o[0].t,i=o[1];return Ho((function(){r.__=n,r.u=e,or(r)&&i({t:r})}),[t,n,e]),Bo((function(){return or(r)&&i({t:r}),t((function(){or(r)&&i({t:r})}))}),[t]),n}function or(t){var e,n,o=t.u,r=t.__;try{var i=o();return!((e=r)===(n=i)&&(0!==e||1/e==1/n)||e!=e&&n!=n)}catch(t){return!0}}function rr(t){t()}function ir(t){return t}function ar(){return[!1,rr]}var sr=Ho;function lr(t,e){this.props=t,this.context=e}function ur(t,e){function n(t){var n=this.props.ref,o=n==t.ref;return!o&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!o:er(this.props,t)}function o(e){return this.shouldComponentUpdate=n,(0,r.n)(t,e)}return o.displayName="Memo("+(t.displayName||t.name)+")",o.prototype.isReactComponent=!0,o.__f=!0,o}(lr.prototype=new r.uA).isPureReactComponent=!0,lr.prototype.shouldComponentUpdate=function(t,e){return er(this.props,t)||er(this.state,e)};var cr=r.fF.__b;r.fF.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),cr&&cr(t)};var dr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function hr(t){function e(e){var n=tr({},e);return delete n.ref,t(n,e.ref||null)}return e.$$typeof=dr,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var pr=function(t,e){return null==t?null:(0,r.v2)((0,r.v2)(t).map(e))},fr={map:pr,forEach:pr,count:function(t){return t?(0,r.v2)(t).length:0},only:function(t){var e=(0,r.v2)(t);if(1!==e.length)throw"Children.only";return e[0]},toArray:r.v2},vr=r.fF.__e;r.fF.__e=function(t,e,n,o){if(t.then)for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);vr(t,e,n,o)};var gr=r.fF.unmount;function yr(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),t.__c.__H=null),null!=(t=tr({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return yr(t,e,n)}))),t}function mr(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return mr(t,e,n)})),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function br(){this.__u=0,this.o=null,this.__b=null}function xr(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function wr(t){var e,n,o;function i(i){if(e||(e=t()).then((function(t){n=t.default||t}),(function(t){o=t})),o)throw o;if(!n)throw e;return(0,r.n)(n,i)}return i.displayName="Lazy",i.__f=!0,i}function _r(){this.i=null,this.l=null}r.fF.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),gr&&gr(t)},(br.prototype=new r.uA).__c=function(t,e){var n=e.__c,o=this;null==o.o&&(o.o=[]),o.o.push(n);var r=xr(o.__v),i=!1,a=function(){i||(i=!0,n.__R=null,r?r(s):s())};n.__R=a;var s=function(){if(! --o.__u){if(o.state.__a){var t=o.state.__a;o.__v.__k[0]=mr(t,t.__c.__P,t.__c.__O)}var e;for(o.setState({__a:o.__b=null});e=o.o.pop();)e.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(a,a)},br.prototype.componentWillUnmount=function(){this.o=[]},br.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=yr(this.__b,n,o.__O=o.__P)}this.__b=null}var i=e.__a&&(0,r.n)(r.FK,null,t.fallback);return i&&(i.__u&=-33),[(0,r.n)(r.FK,null,e.__a?null:t.children),i]};var Er=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function Ar(t){return this.getChildContext=function(){return t.context},t.children}function Sr(t){var e=this,n=t.h;e.componentWillUnmount=function(){(0,r.XX)(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),e.v||(e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(t){this.childNodes.push(t),e.h.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.h.insertBefore(t,n)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.h.removeChild(t)}}),(0,r.XX)((0,r.n)(Ar,{context:e.context},t.__v),e.v)}function Or(t,e){var n=(0,r.n)(Sr,{__v:t,h:e});return n.containerInfo=e,n}(_r.prototype=new r.uA).__a=function(t){var e=this,n=xr(e.__v),o=e.l.get(t);return o[0]++,function(r){var i=function(){e.props.revealOrder?(o.push(r),Er(e,t,o)):r()};n?n(i):i()}},_r.prototype.render=function(t){this.i=null,this.l=new Map;var e=(0,r.v2)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},_r.prototype.componentDidUpdate=_r.prototype.componentDidMount=function(){var t=this;this.l.forEach((function(e,n){Er(t,n,e)}))};var Cr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Nr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Mr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Tr=/[A-Z0-9]/g,Pr="undefined"!=typeof document,Dr=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};function kr(t,e,n){return null==e.__k&&(e.textContent=""),(0,r.XX)(t,e),"function"==typeof n&&n(),t?t.__c:null}function Rr(t,e,n){return(0,r.Qv)(t,e),"function"==typeof n&&n(),t?t.__c:null}r.uA.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(r.uA.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var Ir=r.fF.event;function Lr(){}function jr(){return this.cancelBubble}function Br(){return this.defaultPrevented}r.fF.event=function(t){return Ir&&(t=Ir(t)),t.persist=Lr,t.isPropagationStopped=jr,t.isDefaultPrevented=Br,t.nativeEvent=t};var Hr,Fr={enumerable:!1,configurable:!0,get:function(){return this.class}},zr=r.fF.vnode;r.fF.vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,o={},i=-1===n.indexOf("-");for(var a in e){var s=e[a];if(!("value"===a&&"defaultValue"in e&&null==s||Pr&&"children"===a&&"noscript"===n||"class"===a||"className"===a)){var l=a.toLowerCase();"defaultValue"===a&&"value"in e&&null==e.value?a="value":"download"===a&&!0===s?s="":"translate"===l&&"no"===s?s=!1:"o"===l[0]&&"n"===l[1]?"ondoubleclick"===l?a="ondblclick":"onchange"!==l||"input"!==n&&"textarea"!==n||Dr(e.type)?"onfocus"===l?a="onfocusin":"onblur"===l?a="onfocusout":Mr.test(a)&&(a=l):l=a="oninput":i&&Nr.test(a)?a=a.replace(Tr,"-$&").toLowerCase():null===s&&(s=void 0),"oninput"===l&&o[a=l]&&(a="oninputCapture"),o[a]=s}}"select"==n&&o.multiple&&Array.isArray(o.value)&&(o.value=(0,r.v2)(e.children).forEach((function(t){t.props.selected=-1!=o.value.indexOf(t.props.value)}))),"select"==n&&null!=o.defaultValue&&(o.value=(0,r.v2)(e.children).forEach((function(t){t.props.selected=o.multiple?-1!=o.defaultValue.indexOf(t.props.value):o.defaultValue==t.props.value}))),e.class&&!e.className?(o.class=e.class,Object.defineProperty(o,"className",Fr)):(e.className&&!e.class||e.class&&e.className)&&(o.class=o.className=e.className),t.props=o}(t),t.$$typeof=Cr,zr&&zr(t)};var Wr=r.fF.__r;r.fF.__r=function(t){Wr&&Wr(t),Hr=t.__c};var Yr=r.fF.diffed;r.fF.diffed=function(t){Yr&&Yr(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value),Hr=null};var Gr={ReactCurrentDispatcher:{current:{readContext:function(t){return Hr.__n[t.__c].props.value},useCallback:Yo,useContext:Go,useDebugValue:Xo,useDeferredValue:ir,useEffect:Bo,useId:Uo,useImperativeHandle:zo,useInsertionEffect:sr,useLayoutEffect:Ho,useMemo:Wo,useReducer:jo,useRef:Fo,useState:Lo,useSyncExternalStore:nr,useTransition:ar}}};function Xr(t){return r.n.bind(null,t)}function Ur(t){return!!t&&t.$$typeof===Cr}function Vr(t){return Ur(t)&&t.type===r.FK}function Kr(t){return!!t&&!!t.displayName&&("string"==typeof t.displayName||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function qr(t){return Ur(t)?r.Ob.apply(null,arguments):t}function Zr(t){return!!t.__k&&((0,r.XX)(null,t),!0)}function $r(t){return t&&(t.base||1===t.nodeType&&t)||null}var Jr,Qr=function(t,e){return t(e)},ti=function(t,e){return t(e)},ei=r.FK,ni=Ur,oi=(r.n,r.q6,r._3,r.FK,r.uA,n(6556)),ri=n(37652),ii=n(91549),ai=n(2053),si=n(94807),li=n(59489),ui=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n};(function(t){function e(e){var n=ui(e,[]),o=e.container;if(!o)throw new Error("Ensure the container of LogicFlow is specified and valid.");return(0,li.A)({},t.defaults,n)}t.get=e})(Jr||(Jr={})),function(t){t.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}}(Jr||(Jr={}));var ci=n(57603),di=n(63546),hi=n(95550),pi={node:!1,edge:!1},fi={node:!0,edge:!0},vi=function(t){return t&&"boolean"!==typeof t?(0,hi.A)((0,ai.A)(pi),t):!0===t?(0,ai.A)(fi):(0,ai.A)(pi)},gi=n(2386),yi=function(){return null!==(0,gi.A)(window,"navigator.userAgent","").match(/MSIE|Trident/)};function mi(t){try{return JSON.parse(JSON.stringify(t))}catch(Sn){return t}}var bi,xi,wi,_i,Ei,Ai,Si,Oi=n(33744),Ci=200,Ni=9999,Mi=10;(function(t){t[t["DEFAULT"]=1]="DEFAULT",t[t["TEXT_EDIT"]=2]="TEXT_EDIT",t[t["SHOW_MENU"]=3]="SHOW_MENU",t[t["ALLOW_CONNECT"]=4]="ALLOW_CONNECT",t[t["NOT_ALLOW_CONNECT"]=5]="NOT_ALLOW_CONNECT"})(bi||(bi={})),function(t){t["NODE"]="node",t["EDGE"]="edge",t["GRAPH"]="graph"}(xi||(xi={})),function(t){t["NODE"]="node",t["CIRCLE_NODE"]="circle-node",t["POLYGON_NODE"]="polygon-node",t["RECT_NODE"]="rect-node",t["TEXT_NODE"]="text-node",t["ELLIPSE_NODE"]="ellipse-node",t["DIAMOND_NODE"]="diamond-node",t["HTML_NODE"]="html-node",t["CUSTOM_HTML_NODE"]="custom-html-node",t["EDGE"]="edge",t["LINE_EDGE"]="line-edge",t["POLYLINE_EDGE"]="polyline-edge",t["BEZIER_EDGE"]="bezier-edge",t["GRAPH"]="graph"}(wi||(wi={})),function(t){t["ELEMENT_CLICK"]="element:click",t["NODE_ADD"]="node:add",t["NODE_DELETE"]="node:delete",t["NODE_CLICK"]="node:click",t["NODE_DBCLICK"]="node:dbclick",t["NODE_GROUP_COPY"]="node:group-copy-add",t["NODE_DND_ADD"]="node:dnd-add",t["NODE_DND_DRAG"]="node:dnd-drag",t["NODE_MOUSEDOWN"]="node:mousedown",t["NODE_DRAGSTART"]="node:dragstart",t["NODE_DRAG"]="node:drag",t["NODE_DROP"]="node:drop",t["NODE_MOUSEUP"]="node:mouseup",t["NODE_MOUSEMOVE"]="node:mousemove",t["NODE_MOUSEENTER"]="node:mouseenter",t["NODE_MOUSELEAVE"]="node:mouseleave",t["NODE_CONTEXTMENU"]="node:contextmenu",t["NODE_ROTATE"]="node:rotate",t["NODE_RESIZE"]="node:resize",t["NODE_FOCUS"]="node:focus",t["NODE_BLUR"]="node:blur",t["NODE_PROPERTIES_CHANGE"]="node:properties-change",t["NODE_PROPERTIES_DELETE"]="node:properties-delete",t["EDGE_ADD"]="edge:add",t["EDGE_DELETE"]="edge:delete",t["EDGE_CLICK"]="edge:click",t["EDGE_DBCLICK"]="edge:dbclick",t["EDGE_FOCUS"]="edge:focus",t["EDGE_BLUR"]="edge:blur",t["EDGE_MOUSEENTER"]="edge:mouseenter",t["EDGE_MOUSELEAVE"]="edge:mouseleave",t["EDGE_CONTEXTMENU"]="edge:contextmenu",t["EDGE_ADJUST"]="edge:adjust",t["EDGE_EXCHANGE_NODE"]="edge:exchange-node",t["ANCHOR_DRAGSTART"]="anchor:dragstart",t["ANCHOR_DRAG"]="anchor:drag",t["ANCHOR_DROP"]="anchor:drop",t["ANCHOR_DRAGEND"]="anchor:dragend",t["ADJUST_POINT_MOUSEDOWN"]="adjustPoint:mousedown",t["ADJUST_POINT_MOUSEUP"]="adjustPoint:mouseup",t["ADJUST_POINT_MOUSEMOVE"]="adjustPoint:mousemove",t["ADJUST_POINT_DRAGSTART"]="adjustPoint:dragstart",t["ADJUST_POINT_DRAG"]="adjustPoint:drag",t["ADJUST_POINT_DROP"]="adjustPoint:drop",t["ADJUST_POINT_DRAGEND"]="adjustPoint:dragend",t["BLANK_MOUSEDOWN"]="blank:mousedown",t["BLANK_DRAGSTART"]="blank:dragstart",t["BLANK_DRAG"]="blank:drag",t["BLANK_DROP"]="blank:drop",t["BLANK_MOUSEMOVE"]="blank:mousemove",t["BLANK_MOUSEUP"]="blank:mouseup",t["BLANK_CLICK"]="blank:click",t["BLANK_CONTEXTMENU"]="blank:contextmenu",t["SELECTION_MOUSEDOWN"]="selection:mousedown",t["SELECTION_DRAGSTART"]="selection:dragstart",t["SELECTION_DRAG"]="selection:drag",t["SELECTION_DROP"]="selection:drop",t["SELECTION_MOUSEMOVE"]="selection:mousemove",t["SELECTION_MOUSEUP"]="selection:mouseup",t["SELECTION_CONTEXTMENU"]="selection:contextmenu",t["CONNECTION_NOT_ALLOWED"]="connection:not-allowed",t["TEXT_MOUSEDOWN"]="text:mousedown",t["TEXT_DRAGSTART"]="text:dragstart",t["TEXT_DRAG"]="text:drag",t["TEXT_DROP"]="text:drop",t["TEXT_CLICK"]="text:click",t["TEXT_DBCLICK"]="text:dbclick",t["TEXT_BLUR"]="text:blur",t["TEXT_MOUSEMOVE"]="text:mousemove",t["TEXT_MOUSEUP"]="text:mouseup",t["TEXT_FOCUS"]="text:focus",t["TEXT_ADD"]="text:add",t["TEXT_UPDATE"]="text:update",t["TEXT_CLEAR"]="text:clear",t["LABEL_MOUSEDOWN"]="label:mousedown",t["LABEL_DRAGSTART"]="label:dragstart",t["LABEL_DRAG"]="label:drag",t["LABEL_DROP"]="label:drop",t["LABEL_CLICK"]="label:click",t["LABEL_DBCLICK"]="label:dbclick",t["LABEL_BLUR"]="label:blur",t["LABEL_MOUSEMOVE"]="label:mousemove",t["LABEL_MOUSEUP"]="label:mouseup",t["LABEL_FOCUS"]="label:focus",t["LABEL_ADD"]="label:add",t["LABEL_UPDATE"]="label:update",t["LABEL_CLEAR"]="label:clear",t["LABEL_DELETE"]="label:delete",t["LABEL_SHOULD_ADD"]="label:should-add",t["LABEL_BATCH_ADD"]="label:batch-add",t["LABEL_SHOULD_UPDATE"]="label:should-update",t["LABEL_SHOULD_DELETE"]="label:should-delete",t["LABEL_BATCH_DELETE"]="label:batch-delete",t["LABEL_NOT_ALLOWED_ADD"]="label:not-allowed-add",t["HISTORY_CHANGE"]="history:change",t["GRAPH_TRANSFORM"]="graph:transform",t["GRAPH_RENDERED"]="graph:rendered",t["GRAPH_UPDATED"]="graph:updated"}(_i||(_i={})),function(t){t[t["DEFAULT"]=0]="DEFAULT",t[t["INCREASE"]=1]="INCREASE"}(Ei||(Ei={})),function(t){t["HORIZONTAL"]="horizontal",t["VERTICAL"]="vertical"}(Ai||(Ai={})),function(t){t["TEXT"]="text",t["LABEL"]="label"}(Si||(Si={}));var Ti=0,Pi=function(){function t(t){var e=t.onDragStart,n=void 0===e?Oi.A:e,o=t.onDragging,r=void 0===o?Oi.A:o,i=t.onDragEnd,a=void 0===i?Oi.A:i,s=t.eventType,l=void 0===s?"":s,u=t.eventCenter,c=t.step,d=void 0===c?1:c,h=t.isStopPropagation,p=void 0===h||h,f=t.model,v=t.data,g=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(t){var e,n,o=null===window||void 0===window?void 0:window.document;if(t.button===Ti){g.isStopPropagation&&t.stopPropagation(),g.isStartDragging=!0,g.startX=t.clientX,g.startY=t.clientY,o.addEventListener("mousemove",g.handleMouseMove,!1),o.addEventListener("mouseup",g.handleMouseUp,!1);var r=null===(e=g.model)||void 0===e?void 0:e.getData();null===(n=g.eventCenter)||void 0===n||n.emit(_i["".concat(g.eventType,"_MOUSEDOWN")],{e:t,data:g.data||r}),g.startTime=(new Date).getTime()}},this.handleMouseMove=function(t){var e,n;if(g.isStopPropagation&&t.stopPropagation(),g.isStartDragging&&(g.sumDeltaX+=t.clientX-g.startX,g.sumDeltaY+=t.clientY-g.startY,g.startX=t.clientX,g.startY=t.clientY,g.step<=1||Math.abs(g.sumDeltaX)>g.step||Math.abs(g.sumDeltaY)>g.step)){var o=g.sumDeltaX%g.step,r=g.sumDeltaY%g.step,i=g.sumDeltaX-o,a=g.sumDeltaY-r;g.sumDeltaX=o,g.sumDeltaY=r;var s=null===(e=g.model)||void 0===e?void 0:e.getData();g.isDragging||(null===(n=g.eventCenter)||void 0===n||n.emit(_i["".concat(g.eventType,"_DRAGSTART")],{e:t,data:g.data||s}),g.onDragStart({event:t})),g.isDragging=!0,Promise.resolve().then((function(){var e,n;g.onDragging({deltaX:i,deltaY:a,event:t}),null===(e=g.eventCenter)||void 0===e||e.emit(_i["".concat(g.eventType,"_MOUSEMOVE")],{deltaX:i,deltaY:a,e:t,data:g.data||s}),null===(n=g.eventCenter)||void 0===n||n.emit(_i["".concat(g.eventType,"_DRAG")],{e:t,data:g.data||s})}))}},this.handleMouseUp=function(t){var e=window.document;g.isStartDragging=!1,g.isStopPropagation&&t.stopPropagation(),Promise.resolve().then((function(){var n,o,r;e.removeEventListener("mousemove",g.handleMouseMove,!1),e.removeEventListener("mouseup",g.handleMouseUp,!1);var i=null===(n=g.model)||void 0===n?void 0:n.getData();null===(o=g.eventCenter)||void 0===o||o.emit(_i["".concat(g.eventType,"_MOUSEUP")],{e:t,data:g.data||i}),g.isDragging&&(g.isDragging=!1,g.onDragEnd({event:t}),null===(r=g.eventCenter)||void 0===r||r.emit(_i["".concat(g.eventType,"_DROP")],{e:t,data:g.data||i}))}))},this.cancelDrag=function(){var t=null===window||void 0===window?void 0:window.document;t.removeEventListener("mousemove",g.handleMouseMove,!1),t.removeEventListener("mouseup",g.handleMouseUp,!1),g.onDragEnd({event:void 0}),g.isDragging=!1},this.destroy=function(){g.isStartDragging&&g.cancelDrag()},this.onDragStart=n,this.onDragging=r,this.onDragEnd=a,this.step=d,this.isStopPropagation=p,this.eventType=l,this.eventCenter=u,this.model=f,this.data=v}return t.prototype.setStep=function(t){this.step=t},t.prototype.setModel=function(t){this.model=t},t}(),Di=n(56812),ki=function(t){var e=t.x,n=t.y,o=t.width,r=t.height;return{x:e-o/2,y:n-r/2,x1:e+o/2,y1:n+r/2}},Ri=function(t){var e=t.startPoint,n=t.endPoint,o=(e.x+n.x)/2,r=(e.y+n.y)/2,i=Math.abs(e.x-n.x)+10,a=Math.abs(e.y-n.y)+10;return{x:o-i/2,y:r-a/2,x1:o+i/2,y1:r+a/2}},Ii=function(t){var e=t.points,n=ba(e),o=Zi(n,8),r=o.x,i=o.y,a=o.width,s=o.height;return{x:r-a/2,y:i-s/2,x1:r+a/2,y1:i+s/2}},Li=function(t){var e=t.path,n=Sa(e),o=Zi(n,8),r=o.x,i=o.y,a=o.width,s=o.height;return{x:r-a/2,y:i-s/2,x1:r+a/2,y1:i+s/2}},ji=function(t){return t.modelType===wi.LINE_EDGE?Ri(t):t.modelType===wi.POLYLINE_EDGE?Ii(t):t.modelType===wi.BEZIER_EDGE?Li(t):void 0},Bi=function(t,e,n,o){var r=(e.y-t.y)*(o.x-n.x)-(t.x-e.x)*(n.y-o.y);if(0===r)return!1;var i=((e.x-t.x)*(o.x-n.x)*(n.y-t.y)+(e.y-t.y)*(o.x-n.x)*t.x-(o.y-n.y)*(e.x-t.x)*n.x)/r,a=-((e.y-t.y)*(o.y-n.y)*(n.x-t.x)+(e.x-t.x)*(o.y-n.y)*t.y-(o.x-n.x)*(e.y-t.y)*n.y)/r;return(i-t.x)*(i-e.x)<=0&&(a-t.y)*(a-e.y)<=0&&(i-n.x)*(i-o.x)<=0&&(a-n.y)*(a-o.y)<=0&&{x:i,y:a}},Hi=function(t,e,n){var o=t.x,r=t.y,i=e.x,a=e.y,s=n.x,l=n.y,u=(l-a)/(s-i),c=a-u*i;return(o>=i&&o<=s||o<=i&&o>=s)&&(r>=a&&r<=l||r<=a&&r>=l)&&Math.abs(r-u*o-c)<Number.EPSILON},Fi=function(t){var e=t.start,n=t.end,o=t.offset,r=t.verticalLength,i=t.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((n.y-e.y)/(n.x-e.x)),l=Math.atan(o/r),u=Math.sqrt(r*r+o*o);return"start"===i?n.x>=e.x?(a.leftX=e.x+u*Math.sin(s+l),a.leftY=e.y-u*Math.cos(s+l),a.rightX=e.x-u*Math.sin(s-l),a.rightY=e.y+u*Math.cos(s-l)):(a.leftX=e.x-u*Math.sin(s+l),a.leftY=e.y+u*Math.cos(s+l),a.rightX=e.x+u*Math.sin(s-l),a.rightY=e.y-u*Math.cos(s-l)):"end"===i&&(n.x>=e.x?(a.leftX=n.x+u*Math.sin(s-l),a.leftY=n.y-u*Math.cos(s-l),a.rightX=n.x-u*Math.sin(s+l),a.rightY=n.y+u*Math.cos(s+l)):(a.leftX=n.x-u*Math.sin(s-l),a.leftY=n.y+u*Math.cos(s-l),a.rightX=n.x+u*Math.sin(s+l),a.rightY=n.y-u*Math.cos(s+l))),a},zi=function(){return zi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},zi.apply(this,arguments)},Wi=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Yi=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Gi=function(t,e){return 2*Math.abs(t.centerX-e.centerX)<t.width+e.width&&2*Math.abs(t.centerY-e.centerY)<t.height+e.height},Xi=function(t){var e=[],n={};return t.forEach((function(t){var e="".concat(t.x,"-").concat(t.y);t.id=e,n[e]=t})),Object.keys(n).forEach((function(t){e.push(n[t])})),e},Ui=function(t,e){return 0===t.width&&0===t.height?t:{x:t.x,y:t.y,centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}},Vi=function(t,e){var n=Math.abs(t.x-e.centerX),o=Math.abs(t.y-e.centerY);return n/e.width>o/e.height?Ai.HORIZONTAL:Ai.VERTICAL},Ki=function(t,e,n){var o=Vi(n,e);return o===Ai.HORIZONTAL?{x:n.x>t.centerX?t.maxX:t.minX,y:n.y}:{x:n.x,y:n.y>t.centerY?t.maxY:t.minY}},qi=function(t,e){var n=Math.min(t.minX,e.minX),o=Math.min(t.minY,e.minY),r=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return{x:(n+r)/2,y:(o+i)/2,centerX:(n+r)/2,centerY:(o+i)/2,minX:n,minY:o,maxX:r,maxY:i,height:i-o,width:r-n}},Zi=function(t,e){void 0===t&&(t=[]);var n=[],o=[];t.forEach((function(t){n.push(t.x),o.push(t.y)}));var r=Math.min.apply(Math,Yi([],Wi(n),!1)),i=Math.max.apply(Math,Yi([],Wi(n),!1)),a=Math.min.apply(Math,Yi([],Wi(o),!1)),s=Math.max.apply(Math,Yi([],Wi(o),!1)),l=i-r,u=s-a;return e&&(l+=e,u+=e),{centerX:(r+i)/2,centerY:(a+s)/2,maxX:i,maxY:s,minX:r,minY:a,x:(r+i)/2,y:(a+s)/2,height:u,width:l}},$i=function(t){var e=t.minX,n=t.minY,o=t.maxX,r=t.maxY;return[{x:e,y:n},{x:o,y:n},{x:o,y:r},{x:e,y:r}]},Ji=function(t,e){var n=t.x,o=t.y;return n<e.minX||n>e.maxX||o<e.minY||o>e.maxY},Qi=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},ta=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},ea=function(t,e){return Yi(Yi([],Wi(Qi(t,e.x)),!1),Wi(ta(t,e.y)),!1)},na=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},oa=function(t,e){var n=-2,o=0;return e.forEach((function(e){e&&(t.x===e.x&&(o+=n),t.y===e.y&&(o+=n))})),o},ra=function(t,e,n,o,r){return na(t,e)+na(t,n)+oa(t,[e,n,o,r])},ia=function(t,e,n,o,r){r||(r=0),t.unshift(e[o]),n[o]&&n[o]!==o&&r<=100&&ia(t,e,n,n[o],r+1)},aa=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},sa=function(t,e,n,o){var r=e.x-t.x,i=e.y-t.y,a=o.x-n.x,s=o.y-n.y,l=(-i*(t.x-n.x)+r*(t.y-n.y))/(-a*i+r*s),u=(a*(t.y-n.y)-s*(t.x-n.x))/(-a*i+r*s);return l>=0&&l<=1&&u>=0&&u<=1},la=function(t,e,n){if(0===n.width&&0===n.height)return!1;var o=Wi($i(n),4),r=o[0],i=o[1],a=o[2],s=o[3];return sa(t,e,r,i)||sa(t,e,r,s)||sa(t,e,i,a)||sa(t,e,a,s)},ua=function(t,e,n,o){var r=[];return t.forEach((function(t){t!==e&&(t.x!==e.x&&t.y!==e.y||la(t,e,n)||la(t,e,o)||r.push(t))})),Xi(r)},ca=function(t,e,n,o,r,i,a){var s=[],l=[e],u={},c={},d={};e.id&&(c[e.id]=0,d[e.id]=ra(e,n,e));var h={};t.forEach((function(t){t.id&&(h[t.id]=t)}));var p=function(){var p,f=1/0;if(l.forEach((function(t){t.id&&d[t.id]<f&&(f=d[t.id],p=t)})),p===n&&n.id){var v=[];return ia(v,h,u,n.id),{value:v}}if(!p)return{value:[e,n]};aa(l,p),s.push(p),ua(t,p,o,r).forEach((function(t){if(-1===s.indexOf(t)&&(-1===l.indexOf(t)&&l.push(t),(null===p||void 0===p?void 0:p.id)&&(null===t||void 0===t?void 0:t.id))){var o=d[p.id]+na(p,t);if(c[t.id]&&o>=c[t.id])return;u[t.id]=p.id,c[t.id]=o,d[t.id]=c[t.id]+ra(t,n,e,i,a)}}))};while(l.length){var f=p();if("object"===typeof f)return f.value}return[e,n]},da=function(t){return ss(t)},ha=function(t){var e=1;while(e<t.length-1){var n=t[e-1],o=t[e],r=t[e+1];n.x===o.x&&o.x===r.x||n.y===o.y&&o.y===r.y?t.splice(e,1):e++}return t},pa=function(t,e,n,o,r){var i=da(n),a=da(o),s=Ui(i,r),l=Ui(a,r),u=Ki(s,i,t),c=Ki(l,a,e);if(Gi(s,l)){var d=xa(t,e,u,c);return Yi(Yi([t,u],Wi(d),!1),[c,e],!1)}var h=Zi([u,c]),p=qi(s,h),f=qi(l,h),v=[];v=v.concat($i(p)),v=v.concat($i(f));var g={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[h,p,f].forEach((function(t){v=v.concat(ea(t,g).filter((function(t){return Ji(t,s)&&Ji(t,l)})))})),[{x:u.x,y:c.y},{x:c.x,y:u.y}].forEach((function(t){Ji(t,s)&&Ji(t,l)&&v.push(t)})),v.unshift(u),v.push(c),v=Xi(v);var y=ca(v,u,c,i,a,t,e);return y.unshift(t),y.push(e),y.length>2&&(y=ha(y)),Xi(y)},fa=function(t){if(1===t.length){var e=Wi(t,1),n=e[0];return[n,n]}for(var o=t[0],r=t[1],i=rs(o.x,o.y,r.x,r.y),a=1;a<t.length-1;a++){var s=t[a],l=t[a+1],u=rs(s.x,s.y,l.x,l.y);u>i&&(i=u,o=s,r=l)}return[o,r]},va=function(t,e,n){var o=is(t,n),r=is(e,n);return o&&r},ga=function(t,e,n){var o=is(t,n),r=is(e,n),i=o&&r,a=o||r;return!i&&a},ya=function(t,e,n){for(var o=void 0,r=ss(n),i=$i(r),a=0;a<i.length;a++){var s=sa(t,e,i[a],i[(a+1)%i.length]);s&&(o=[i[a],i[(a+1)%i.length]])}if(o)return Bi(t,e,o[0],o[1])},ma=function(t,e){var n=void 0;return t.x===e.x?n=Ai.VERTICAL:t.y===e.y&&(n=Ai.HORIZONTAL),n},ba=function(t){var e=t.split(" "),n=[];return e&&e.forEach((function(t){var e=Wi(t.split(","),2),o=e[0],r=e[1];n.push({x:Number(o),y:Number(r)})})),n},xa=function(t,e,n,o){var r=[],i=ma(t,n),a=ma(e,o);if(i===a)t.y===n.y?(r.push({x:n.x,y:(n.y+o.y)/2}),r.push({x:o.x,y:(n.y+o.y)/2})):(r.push({x:(n.x+o.x)/2,y:n.y}),r.push({x:(n.x+o.x)/2,y:o.y}));else{var s={x:n.x,y:o.y},l=Hi(s,t,n),u=Hi(s,e,o);if(l||u)s={x:o.x,y:n.y};else{var c=wa(s,t,n),d=wa(s,e,o);c&&d&&(s={x:o.x,y:n.y})}r.push(s)}return r},wa=function(t,e,n){return t.x===e.x&&t.x===n.x||t.y===e.y&&t.y===n.y},_a=function(t){if(!t)return 0;for(var e=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);t.match(/[A-Z]/)?e+=1.5:e+=o>=1&&o<=126||o>=65376&&o<=65439?1:2}return e},Ea=function(t){var e,n=t.start,o=t.end;if(n.x===o.x&&n.y===o.y)e="";else{var r={start:n,end:o,offset:10,verticalLength:5},i=Fi(zi(zi({},r),{type:"start"})),a=Fi(zi(zi({},r),{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY,"\n    L").concat(i.rightX," ").concat(i.rightY,"\n    L").concat(a.rightX," ").concat(a.rightY,"\n    L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Aa=function(t){var e=t.start,n=t.end,o=t.sourceNode,r=t.targetNode,i=t.offset,a=ss(o),s=ss(r),l=Ui(a,i),u=Ui(s,i),c=Ki(l,a,e),d=Ki(u,s,n);return{sNext:c,ePre:d}},Sa=function(t){var e=t.replace(/M/g,"").replace(/C/g,",").split(","),n=Oa(e[0]),o=Oa(e[1]),r=Oa(e[2]),i=Oa(e[3]);return[n,o,r,i]},Oa=function(t){var e=Wi(t.replace(/(^\s*)/g,"").split(" "),2),n=e[0],o=e[1];return{x:+n,y:+o}},Ca=function(t,e){var n=Wi(t,4),o=n[0],r=n[1],i=n[2],a=n[3],s=Tl(o,r,i,a,e);return[s,t[3]]},Na=function(t,e){for(var n,o=t.x,r=t.y,i=ba(e),a=Number.MAX_SAFE_INTEGER,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach((function(t){var e=t.start,i=t.end;if(e.x===i.x){var s={x:e.x,y:r},l=Hi(s,e,i);if(l){var u=Math.abs(e.x-o);u<a&&(a=u,n=s)}}else if(e.y===i.y){s={x:o,y:e.y},l=Hi(s,e,i);if(l){u=Math.abs(e.y-r);u<a&&(a=u,n=s)}}})),!n){var u=s[0],c=u.start,d=u.end;n={x:c.x+(d.x-c.x)/2,y:c.y+(d.y-c.y)/2}}return n},Ma=function(t){return(0,Di.A)(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},Ta=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function Pa(t,e){return"function"!==typeof e?function(e,n,o){return Object.assign({type:t.edgeType},o)}:function(n,o,r){var i=e(n,o,r);return i?"string"===typeof i?Object.assign({},r,{type:i}):Object.assign({type:i},r):{type:t.edgeType}}}var Da=function(t){var e=t.rows,n=t.rowsLength,o=t.fontSize,r=0;return(0,ri.A)(e,(function(t){var e=_a(t);r=e>r?e:r})),{width:Math.ceil(r/2)*o+o/4,height:n*(o+2)+o/4}},ka=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Ra=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function Ia(t,e,n){return n&&e*Math.round(t/e)||t}function La(t,e,n){if(!t)return[];var o=Math.min.apply(Math,Ra([],ka(t.map((function(t){return t[0]}))),!1)),r=Math.max.apply(Math,Ra([],ka(t.map((function(t){return t[0]}))),!1)),i=Math.min.apply(Math,Ra([],ka(t.map((function(t){return t[1]}))),!1)),a=Math.max.apply(Math,Ra([],ka(t.map((function(t){return t[1]}))),!1)),s=-o,l=-i,u=t.map((function(t){var e=ka(t,2),n=e[0],o=e[1];return[n+s,o+l]})),c=r-o,d=a-i,h=e?e/c:1,p=n?n/d:1,f=Math.min(h,p);return u.map((function(t){var e=ka(t,2),n=e[0],o=e[1];return[n*f,o*f]}))}var ja=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Ba=function(t,e,n){var o=ja(t,2),r=o[0],i=o[1],a=ja(e,2),s=a[0],l=a[1],u=ja(n,2),c=u[0],d=u[1];return r>s&&r<c&&i>l&&i<d},Ha=function(t,e){var n=e.multipleSelectKey,o=!1;switch(n){case"meta":o=t.metaKey;break;case"alt":o=t.altKey;break;case"shift":o=t.shiftKey;break;case"ctrl":o=t.ctrlKey;break;default:o=!1;break}return o},Fa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function za(t,e){return!!(t instanceof Ya&&e instanceof Ya)}var Wa=function(t){function e(n,o,r){var i=t.call(this,3)||this;return i[0]=n,i[1]=o,i[2]=r,i.x=n,i.y=o,i.z=r,Object.setPrototypeOf(i,e.prototype),i}return Fa(e,t),e.prototype.add=function(t){if(za(this,t))return new Ya(this.x+t.x,this.y+t.y);var e=this.z+t.z;return new Ga((this.x+t.x)/e,(this.y+t.y)/e)},e.prototype.subtract=function(t){if(za(this,t))return new Ya(this.x-t.x,this.y-t.y);var e=this.z-t.z;return 0===e?new Ya(this.x-t.x,this.y-t.y):new Ga((this.x-t.x)/e,(this.y-t.y)/e)},e}(Array),Ya=function(t){function e(n,o,r){var i=t.call(this,n,o,null!==r&&void 0!==r?r:0)||this;return Object.setPrototypeOf(i,e.prototype),i}return Fa(e,t),e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(t){var e=this;return t.reduce((function(t,n,o){return t+n*e[o]}))},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var t=this.getLength();return new e(this.x/t,this.y/t)},e.prototype.crossZ=function(t){return this.x*t.y-this.y*t.x},e.prototype.angle=function(t){var e=this.crossZ(t),n=Math.acos(this.normalize().dot(t.normalize()));return e>=0?n:-n},e}(Wa),Ga=function(t){function e(n,o){var r=t.call(this,n,o,1)||this;return Object.setPrototypeOf(r,e.prototype),r}return Fa(e,t),e.prototype.toString=function(){return"Point"},e}(Wa),Xa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ua=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Va=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Ka=function(t){function e(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=t.call(this,n.length)||this;return r.fill(new Array(3)),n.forEach((function(t,e){r[e]=t})),r.columns=n[0].length,r.rows=n.length,Object.setPrototypeOf(r,e.prototype),r}return Xa(e,t),e.prototype.getRow=function(t){return this[t]},e.prototype.getColumn=function(t){return Va([],Ua(this.map((function(e){return e[t]}))),!1)},e.prototype.transpose=function(){for(var t=[],n=0;n<this.columns;n++)t.push(this.getColumn(n));return new(e.bind.apply(e,Va([void 0],Ua(t),!1)))},e.prototype.cross=function(t){var n=new Array(this.rows).fill("").map((function(){return[]}));if(this.columns===t.rows)for(var o=0;o<this.rows;o++)for(var r=this.getRow(o),i=function(e){var i=t.getColumn(e);n[o][e]=r.reduce((function(t,e,n){return t+e*i[n]}),0)},a=0;a<t.columns;a++)i(a);return new(e.bind.apply(e,Va([void 0],Ua(n),!1)))},e.prototype.to2D=function(){return this.map((function(t){return[t[0],t[1]]}))},e.prototype.toPoints=function(){return this.map((function(t){return new Ga(t[0],t[1])}))},e.prototype.toString=function(){var t=Ua(this[0],2),e=t[0],n=t[1],o=Ua(this[1],2),r=o[0],i=o[1],a=Ua(this[2],2),s=a[0],l=a[1];return"matrix(".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(s," ").concat(l,")")},e.prototype.translate=function(t,e){return this.cross(new $a(t,e))},e.prototype.rotate=function(t){return this.cross(new qa(t))},e.prototype.scale=function(t,e){return this.cross(new Za(t,e))},e}(Array),qa=function(t){function e(n){var o=t.call(this,new Ya(+Math.cos(n).toFixed(2),+Math.sin(n).toFixed(2),0),new Ya(-Math.sin(n).toFixed(2),+Math.cos(n).toFixed(2),0),new Ya(0,0,1))||this;return Object.setPrototypeOf(o,e.prototype),o}return Xa(e,t),e.prototype.inverse=function(){return this.transpose()},e}(Ka),Za=function(t){function e(n,o){var r=t.call(this,new Ya(n,0,0),new Ya(0,o,0),new Ya(0,0,1))||this;return r.sx=n,r.sy=o,Object.setPrototypeOf(r,e.prototype),r}return Xa(e,t),e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}(Ka),$a=function(t){function e(n,o){var r=t.call(this,new Ya(1,0,0),new Ya(0,1,0),new Ya(n,o,1))||this;return r.tx=n,r.ty=o,Object.setPrototypeOf(r,e.prototype),r}return Xa(e,t),e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}(Ka);je({isolateGlobalState:!0});var Ja=function(){return Ja=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ja.apply(this,arguments)},Qa=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},ts=function(t){var e=t.anchors;return e},es=function(t,e){for(var n,o=e.nodes,r=o.length-1;r>=0;r--){var i=o[r],a=as(t,i);if(a){var s=i.getTargetAnchor(t);if(s){var l={node:i,anchorIndex:s.index,anchor:s.anchor};n&&!ns(i,n.node,e)||(n=l)}}}return n},ns=function(t,e,n){return t.zIndex>e.zIndex||n.nodesMap[t.id].index>n.nodesMap[e.id].index},os=function(t,e){for(var n,o=ts(e),r=Number.MAX_SAFE_INTEGER,i=0;i<o.length;i++){var a=rs(t.x,t.y,o[i].x,o[i].y);a<r&&(r=a,n={index:i,anchor:Ja(Ja({},o[i]),{x:o[i].x,y:o[i].y,id:o[i].id})})}return n},rs=function(t,e,n,o){return Math.hypot(t-n,e-o)},is=function(t,e,n){void 0===n&&(n=0);var o=!1,r=ss(e),i=Qa(new Ka([t.x,t.y,1]).translate(-e.x,-e.y).rotate(-e.rotate).translate(e.x,e.y)[0],2),a=i[0],s=i[1],l={x:a,y:s};return l.x>=r.minX-n&&l.x<=r.maxX+n&&l.y>=r.minY-n&&l.y<=r.maxY+n&&(o=!0),o},as=function(t,e){return is(t,e,5)},ss=function(t){var e=t.x,n=t.y,o=t.width,r=t.height;return{minX:e-o/2,minY:n-r/2,maxX:e+o/2,maxY:n+r/2,x:e,y:n,width:o,height:r,centerX:e,centerY:n}},ls=function(t){var e=t,n=e.x,o=e.y,r=e.width,i=e.height,a=e.radius;return[{x:n-r/2+a,y:o-i/2+a,r:a},{x:n+r/2-a,y:o-i/2+a,r:a},{x:n-r/2+a,y:o+i/2-a,r:a},{x:n+r/2-a,y:o+i/2-a,r:a}]},us=function(t,e,n){var o,r=ls(n),i=Number.MAX_SAFE_INTEGER;return r.forEach((function(e){var n=rs(t.x,t.y,e.x,e.y);n<i&&(i=n,o=e)})),cs(t,e,o)},cs=function(t,e,n){var o,r=n.x,i=n.y,a=n.r;if(e===Ai.HORIZONTAL){var s=r-Math.sqrt(a*a-(t.y-i)*(t.y-i)),l=r+Math.sqrt(a*a-(t.y-i)*(t.y-i)),u=Math.abs(s-t.x)<Math.abs(l-t.x)?s:l;o={x:u,y:t.y}}else if(e===Ai.VERTICAL){var c=i-Math.sqrt(a*a-(t.x-r)*(t.x-r)),d=i+Math.sqrt(a*a-(t.x-r)*(t.x-r)),h=Math.abs(c-t.y)<Math.abs(d-t.y)?c:d;o={x:t.x,y:h}}return o},ds=function(t,e){var n=e,o=!1,r=n.x,i=n.y,a=n.width,s=n.height,l=n.radius,u={minX:r-a/2+l,maxX:r+a/2-l,minY:i-s/2+l,maxY:i+s/2-l};return t.y===i+s/2||t.y===i-s/2?o=t.x>u.minX&&t.x<u.maxX:t.x!==r+a/2&&t.x!==r-a/2||(o=t.y>u.minY&&t.y<u.maxY),o},hs=function(t,e,n){var o,r=n,i=r.x,a=r.y,s=r.rx,l=r.ry;if(e===Ai.HORIZONTAL){var u=i-Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(l*l)),c=i+Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(l*l)),d=Math.abs(u-t.x)<Math.abs(c-t.x)?u:c;o={x:d,y:t.y}}else if(e===Ai.VERTICAL){var h=a-Math.sqrt(l*l-(t.x-i)*(t.x-i)*l*l/(s*s)),p=a+Math.sqrt(l*l-(t.x-i)*(t.x-i)*l*l/(s*s)),f=Math.abs(h-t.y)<Math.abs(p-t.y)?h:p;o={x:t.x,y:f}}return o},ps=function(t,e,n){for(var o,r=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,a=[],s=0;s<r.length;s++)a.push({start:r[s],end:r[(s+1)%r.length]});return a.forEach((function(n){var r=n.start,a=n.end,s=r,l=a;r.x>a.x&&(s=a,l=r);var u={x:t.x,y:t.y};if(s.x===l.x&&e===Ai.HORIZONTAL&&(u={x:s.x,y:t.y}),s.y===l.y&&e===Ai.VERTICAL&&(u={x:t.x,y:s.y}),s.x!==l.x&&s.y!==l.y){var c=(l.y-s.y)/(l.x-s.x),d=(s.x*l.y-l.x*s.y)/(s.x-l.x);e===Ai.HORIZONTAL?u={x:(t.y-d)/c,y:t.y}:e===Ai.VERTICAL&&(u={x:t.x,y:c*t.x+d})}var h=Hi(u,r,a);if(h){var p=rs(u.x,u.y,t.x,t.y);p<i&&(i=p,o=u)}})),o},fs=function(t){var e=(0,Di.A)(t,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},vs=function(t,e,n,o){var r=t.x,i=t.y;return e.x>t.x?r=t.x+n/2:e.x<t.x&&(r=t.x-n/2),e.y>t.y?i=t.y+o/2:e.y<t.y&&(i=t.y-o/2),{x:r,y:i}},gs=function(t){var e=t.rows,n=t.style,o=t.rowsLength,r=t.className,i=document.createElement("div");i.className=r,i.style.fontSize="".concat(n.fontSize),i.style.width="".concat(n.width),i.style.lineHeight="".concat(n.lineHeight),i.style.padding="".concat(n.padding),n.fontFamily&&(i.style.fontFamily="".concat(n.fontFamily)),o>1?e.forEach((function(t){var e=document.createElement("div");e.textContent=t,i.appendChild(e)})):i.textContent=e[0],document.body.appendChild(i);var a=i.clientHeight;return document.body.removeChild(i),a},ys=function(t){var e=t.rows,n=t.rowsLength,o=t.fontSize,r=0;return e&&e.forEach((function(t){var e=_a(t);r=e>r?e:r})),{width:Math.ceil(r/2)*o+o/4,height:n*(o+2)+o/4}},ms=function(t){return"object"!==typeof t?{isAllPass:!!t,msg:t?"":""}:t};const bs="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var xs={randomUUID:bs};let ws;const _s=new Uint8Array(16);function Es(){if(!ws&&(ws="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ws))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ws(_s)}const As=[];for(let jp=0;jp<256;++jp)As.push((jp+256).toString(16).slice(1));function Ss(t,e=0){return As[t[e+0]]+As[t[e+1]]+As[t[e+2]]+As[t[e+3]]+"-"+As[t[e+4]]+As[t[e+5]]+"-"+As[t[e+6]]+As[t[e+7]]+"-"+As[t[e+8]]+As[t[e+9]]+"-"+As[t[e+10]]+As[t[e+11]]+As[t[e+12]]+As[t[e+13]]+As[t[e+14]]+As[t[e+15]]}function Os(t,e,n){if(xs.randomUUID&&!e&&!t)return xs.randomUUID();t=t||{};const o=t.random||(t.rng||Es)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=o[t];return e}return Ss(o)}var Cs=Os,Ns=function(){return Cs()},Ms=new Map,Ts=function(t){var e=Ns();function n(){t();var o=Ms.get(e);if(o){var r=window.requestAnimationFrame(n);Ms.set(e,r)}}var o=window.requestAnimationFrame(n);return Ms.set(e,o),e},Ps=function(t){var e=Ms.get(t);e&&(window.cancelAnimationFrame(e),Ms.delete(t))},Ds=n(45884),ks=n(28984),Rs=function(){return Rs=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Rs.apply(this,arguments)},Is=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function Ls(t){var e=t.x,n=void 0===e?0:e,o=t.y,r=void 0===o?0:o,i=t.value,a=t.fontSize,s=void 0===a?12:a,l=t.fill,u=void 0===l?"currentColor":l,c=t.overflowMode,d=void 0===c?"default":c,h=t.textWidth,p=void 0===h?void 0:h,f=t.model,v={x:n,y:r,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if((0,ri.A)((0,ks.A)(t),(function(t){var e=Is(t,2),n=e[0],o=e[1];"object"!==typeof o&&(v[n]=o)})),i){var g=String(i).split(/[\r\n]/g),y=g.length;if("default"!==d){var m=f.BaseType,b=f.modelType;if(m===xi.NODE&&b!==wi.TEXT_NODE||m===xi.EDGE&&p)return js(t)}if(y>1){var x=g.map((function(t,e){var o=s+2,i=(e-(y-1)/2)*o;return(0,oi.Y)("tspan",{className:"lf-text-tspan",x:n,y:r+i,children:t})}));return(0,oi.Y)("text",Rs({},v,{children:x}))}return(0,oi.Y)("text",Rs({},v,{children:i}))}return null}function js(t){var e=t.x,n=t.y,o=t.value,r=t.model,i=t.textWidth,a=t.fontSize,s=void 0===a?12:a,l=t.lineHeight,u=t.fontFamily,c=void 0===u?"":u,d=t.wrapPadding,h=void 0===d?"0, 0":d,p=t.overflowMode,f=r.width,v=r.height,g=r.textHeight,y=i||f,m=String(o).split(/[\r\n]/g),b=m.length,x=gs({rows:m,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:c,lineHeight:l,padding:h},rowsLength:b,className:"lf-get-text-height"}),w=v>x?v:x;g&&(w=g);var _="ellipsis"===p;return _&&(w=s+2),(0,oi.Y)("g",{children:(0,oi.Y)("foreignObject",{width:y,height:w,x:e-y/2,y:n-w/2,style:{overflow:"visible",textAlign:"left"},children:(0,oi.Y)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:w,width:y,padding:h},children:(0,oi.Y)("div",{className:_?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:_?m.join(""):"",style:Rs({},t),children:m.map((function(t){return(0,oi.Y)("div",{className:"lf-node-text--auto-wrap-inner",children:t})}))})})})})}var Bs=function(){return Bs=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Bs.apply(this,arguments)},Hs=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function Fs(t){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return(0,ri.A)((0,ks.A)(t),(function(t){var n=Hs(t,2),o=n[0],r=n[1];("style"===o||"object"!==typeof r)&&(e[o]=r)})),(0,oi.Y)("line",Bs({},e))}var zs=Fs,Ws=function(){return Ws=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ws.apply(this,arguments)},Ys=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function Gs(t){var e=t.x,n=t.y,o=t.width,r=t.height,i=t.className,a=t.strokeWidth,s=t.radius,l=void 0===s?0:s,u=e-o/2,c=n-r/2,d={};return d["stroke-width"]=a,(0,ri.A)((0,ks.A)(t),(function(t){var e=Ys(t,2),n=e[0],o=e[1];"object"!==typeof o&&(d[n]=o)})),d.className=i?"lf-basic-shape ".concat(i):"lf-basic-shape",l&&(d.rx=l,d.ry=l),d.x=u,d.y=c,(0,oi.Y)("rect",Ws({},d))}var Xs=Gs,Us=function(){return Us=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Us.apply(this,arguments)},Vs=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function Ks(t){var e={d:""};return(0,ri.A)((0,ks.A)(t),(function(t){var n=Vs(t,2),o=n[0],r=n[1];"style"!==o&&"object"===typeof r||(e[o]=r)})),(0,oi.Y)("path",Us({},e))}var qs=function(){return qs=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},qs.apply(this,arguments)},Zs=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function $s(t){var e=t.x,n=void 0===e?0:e,o=t.y,r=void 0===o?0:o,i=t.r,a=void 0===i?4:i,s=t.className,l={cx:n,cy:r,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return(0,ri.A)((0,ks.A)(t),(function(t){var e=Zs(t,2),n=e[0],o=e[1];"object"!==typeof o&&(l[n]=o)})),l.className=s?"lf-basic-shape ".concat(s):"lf-basic-shape",(0,oi.Y)("circle",qs({},l))}var Js=$s,Qs=function(){return Qs=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Qs.apply(this,arguments)},tl=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function el(t){var e=t.x,n=void 0===e?0:e,o=t.y,r=void 0===o?0:o,i=t.rx,a=void 0===i?4:i,s=t.ry,l=void 0===s?4:s,u=t.className,c={cx:n,cy:r,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return(0,ri.A)((0,ks.A)(t),(function(t){var e=tl(t,2),n=e[0],o=e[1];"object"!==typeof o&&(c[n]=o)})),c.className=u?"lf-basic-shape ".concat(u):"lf-basic-shape",(0,oi.Y)("ellipse",Qs({},c))}var nl=el,ol=function(){return ol=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ol.apply(this,arguments)},rl=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function il(t){var e=t.points,n=void 0===e?[]:e,o=t.className,r={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return(0,ri.A)((0,ks.A)(t),(function(t){var e=rl(t,2),n=e[0],o=e[1];"object"!==typeof o&&(r[n]=o)})),o?r.classNmae="lf-basic-shape ".concat(o):r.className="lf-basic-shape",r.points=n.map((function(t){return t.join(",")})).join(" "),(0,oi.Y)("polygon",ol({},r))}var al=il,sl=function(){return sl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},sl.apply(this,arguments)},ll=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};function ul(t){var e=t.className,n={points:"",fill:"none"};return(0,ri.A)((0,ks.A)(t),(function(t){var e=ll(t,2),o=e[0],r=e[1];("style"===o||"object"!==typeof r)&&(n[o]=r)})),e&&(n.className="".concat(e)),(0,oi.Y)("polyline",sl({},n))}var cl,dl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hl=function(){return hl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},hl.apply(this,arguments)},pl=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},fl=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};(function(t){t[t["LEFT_TOP"]=0]="LEFT_TOP",t[t["RIGHT_TOP"]=1]="RIGHT_TOP",t[t["RIGHT_BOTTOM"]=2]="RIGHT_BOTTOM",t[t["LEFT_BOTTOM"]=3]="LEFT_BOTTOM"})(cl||(cl={}));var vl=function(t){function e(e){var n=t.call(this)||this;n.updateEdgePointByAnchors=function(){var t=n.nodeModel,e=t.id,o=t.anchors,r=n.graphModel.getNodeEdges(e);(0,ri.A)(r,(function(t){if(t.sourceNodeId===e){var n=(0,ci.A)(o,(function(e){return e.id===t.sourceAnchorId}));n&&t.updateStartPoint({x:n.x,y:n.y})}else if(t.targetNodeId===e){n=(0,ci.A)(o,(function(e){return e.id===t.targetAnchorId}));n&&t.updateEndPoint({x:n.x,y:n.y})}}))},n.triggerResizeEvent=function(t,e,o,r,i,a){n.graphModel.eventCenter.emit(_i.NODE_RESIZE,{preData:t,data:e,deltaX:o,deltaY:r,index:i,model:a})},n.recalcResizeInfo=function(t,e,n,o,r){void 0===n&&(n=1),void 0===o&&(o=!1),void 0===r&&(r=!1);var i=(0,ai.A)(e),a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,c=i.PCTResizeInfo;if(c){var d=4,h=0,p=0;switch(t){case cl.LEFT_TOP:p=(-1*a-s)/d;break;case cl.RIGHT_TOP:p=(a-s)/d;break;case cl.RIGHT_BOTTOM:p=(a+s)/d;break;case cl.LEFT_BOTTOM:p=(-1*a+s)/d;break;default:break}0!==p&&(h=Math.round(p/c.ResizeBasis.basisHeight*1e5)/1e3),c.ResizePCT.widthPCT=Math.max(Math.min(c.ResizePCT.widthPCT+h,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit),c.ResizePCT.heightPCT=Math.max(Math.min(c.ResizePCT.heightPCT+h,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit);var f=Math.round(c.ResizePCT.widthPCT*c.ResizeBasis.basisWidth/100),v=Math.round(c.ResizePCT.heightPCT*c.ResizeBasis.basisHeight/100);switch(t){case cl.LEFT_TOP:a=l-f,s=u-v;break;case cl.RIGHT_TOP:a=f-l,s=u-v;break;case cl.RIGHT_BOTTOM:a=f-l,s=v-u;break;case cl.LEFT_BOTTOM:a=l-f,s=v-u;break;default:break}return i}switch(t){case cl.LEFT_TOP:i.width=o?l:l-a*n,i.height=r?u:u-s*n;break;case cl.RIGHT_TOP:i.width=o?l:l+a*n,i.height=r?u:u-s*n;break;case cl.RIGHT_BOTTOM:i.width=o?l:l+a*n,i.height=r?u:u+s*n;break;case cl.LEFT_BOTTOM:i.width=o?l:l-a*n,i.height=r?u:u+s*n;break;default:break}return i},n.resizeNode=function(t){var e=t.deltaX,o=t.deltaY,r=n.index,i=n.props,a=i.model,s=i.graphModel,l=i.x,u=i.y;Ol({x:l,y:u,deltaX:e,deltaY:o,index:r,nodeModel:a,graphModel:s,cancelCallback:function(){n.dragHandler.cancelDrag()}})},n.onDragging=function(t){var e=t.deltaX,o=t.deltaY,r=n.graphModel.transformModel,i=fl(r.fixDeltaXY(e,o),2),a=i[0],s=i[1];n.resizeNode({deltaX:a,deltaY:s})},n.onDragEnd=function(){var t=n.nodeModel.x,e=n.nodeModel.y;n.nodeModel.moveTo(t,e),n.updateEdgePointByAnchors()};var o=e.index,r=e.model,i=e.graphModel;return n.index=o,n.nodeModel=r,n.graphModel=i,n.dragHandler=new Pi({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:i.gridSize}),n}return dl(e,t),e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,o=t.direction,r=t.model,i=r.getResizeControlStyle(),a=i.width,s=i.height,l=pl(i,["width","height"]);return(0,oi.FD)("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[(0,oi.Y)(Gs,hl({className:"lf-resize-control-content",x:e,y:n,width:null!==a&&void 0!==a?a:7,height:null!==s&&void 0!==s?s:7},l)),(0,oi.Y)(Gs,{className:"lf-resize-control-content",x:e,y:n,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(r.uA),gl=function(t){function e(){return t.call(this)||this}return dl(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,o=ss(e),r=o.minX,i=o.minY,a=o.maxX,s=o.maxY,l=[{index:cl.LEFT_TOP,direction:"nw",x:r,y:i},{index:cl.RIGHT_TOP,direction:"ne",x:a,y:i},{index:cl.RIGHT_BOTTOM,direction:"se",x:a,y:s},{index:cl.LEFT_BOTTOM,direction:"sw",x:r,y:s}];return(0,Ds.A)(l,(function(t){return(0,oi.Y)(vl,hl({},t,{model:e,graphModel:n}))}))},e.prototype.getResizeOutline=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,i=t.getResizeOutlineStyle();return(0,oi.Y)(Gs,hl({},i,{x:e,y:n,width:o,height:r}))},e.prototype.render=function(){return(0,oi.FD)("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(r.uA),yl=gl;function ml(t,e){var n=t.x,o=t.y,r=e.x,i=e.y,a={x:n+(r-n)/2,y:o+(i-o)/2};return a}function bl(t,e,n){var o=xl(n),r=t.x-e.x,i=t.y-e.y,a=r*Math.cos(o)-i*Math.sin(o)+e.x,s=r*Math.sin(o)+i*Math.cos(o)+e.y;return{x:a,y:s}}function xl(t){return t*Math.PI/180}function wl(t){return t/Math.PI*180}function _l(t,e,n,o,r,i,a,s,l){void 0===s&&(s=!1),void 0===l&&(l=!1);var u=e.deltaX,c=e.deltaY,d=e.width,h=e.height,p=wl(n),f={x:o,y:r},v={x:i,y:a},g=bl(f,v,p),y={x:g.x+u,y:g.y+c},m=Cl(g,y,v,p,s,l,d,h),b=m.width,x=m.height,w=m.center;return e.width=b*t,e.height=x*t,e.deltaX=2*(w.x-v.x),e.deltaY=2*(w.y-v.y),e}var El=function(t,e,n,o,r,i,a,s,l,u){void 0===n&&(n=1),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===i&&(i=0);var c=(0,ai.A)(e),d=c.deltaX,h=c.deltaY,p=c.width,f=c.height,v=c.PCTResizeInfo;if(v){var g=4,y=0,m=0;switch(t){case cl.LEFT_TOP:m=(-1*d-h)/g;break;case cl.RIGHT_TOP:m=(d-h)/g;break;case cl.RIGHT_BOTTOM:m=(d+h)/g;break;case cl.LEFT_BOTTOM:m=(-1*d+h)/g;break;default:break}0!==m&&(y=Math.round(m/v.ResizeBasis.basisHeight*1e5)/1e3),v.ResizePCT.widthPCT=Math.max(Math.min(v.ResizePCT.widthPCT+y,v.ScaleLimit.maxScaleLimit),v.ScaleLimit.minScaleLimit),v.ResizePCT.heightPCT=Math.max(Math.min(v.ResizePCT.heightPCT+y,v.ScaleLimit.maxScaleLimit),v.ScaleLimit.minScaleLimit);var b=Math.round(v.ResizePCT.widthPCT*v.ResizeBasis.basisWidth/100),x=Math.round(v.ResizePCT.heightPCT*v.ResizeBasis.basisHeight/100);switch(t){case cl.LEFT_TOP:d=p-b,h=f-x;break;case cl.RIGHT_TOP:d=b-p,h=f-x;break;case cl.RIGHT_BOTTOM:d=b-p,h=x-f;break;case cl.LEFT_BOTTOM:d=p-b,h=x-f;break;default:break}return c}if(i%(2*Math.PI)!==0&&void 0!==a&&void 0!==s)return _l(n,c,i,a,s,l,u,o,r);switch(t){case cl.LEFT_TOP:c.width=o?p:p-d*n,c.height=r?f:f-h*n;break;case cl.RIGHT_TOP:c.width=o?p:p+d*n,c.height=r?f:f-h*n;break;case cl.RIGHT_BOTTOM:c.width=o?p:p+d*n,c.height=r?f:f+h*n;break;case cl.LEFT_BOTTOM:c.width=o?p:p-d*n,c.height=r?f:f+h*n;break;default:break}return c},Al=function(t,e){var n=t.id,o=t.anchors,r=e.getNodeEdges(n);(0,ri.A)(r,(function(t){if(t.sourceNodeId===n){var e=(0,ci.A)(o,(function(e){return e.id===t.sourceAnchorId}));e&&t.updateStartPoint({x:e.x,y:e.y})}else if(t.targetNodeId===n){e=(0,ci.A)(o,(function(e){return e.id===t.targetAnchorId}));e&&t.updateEndPoint({x:e.x,y:e.y})}}))},Sl=function(t,e,n,o,r,i,a){a.eventCenter.emit(_i.NODE_RESIZE,{preData:t,data:e,deltaX:n,deltaY:o,index:r,model:i})},Ol=function(t){var e=t.x,n=t.y,o=t.deltaX,r=t.deltaY,i=t.index,a=t.nodeModel,s=t.graphModel,l=t.cancelCallback,u=a.r,c=a.rx,d=a.ry,h=a.width,p=a.height,f=a.PCTResizeInfo,v=a.minWidth,g=a.minHeight,y=a.maxWidth,m=a.maxHeight,b=a.rotate,x=a.x,w=a.y,_=v===y,E=g===m,A={width:u||c||h,height:u||d||p,deltaX:o,deltaY:r,PCTResizeInfo:f},S=u||c&&d?.5:1,O=e,C=n,N=El(i,A,S,_,E,b,O,C,x,w);if(N.width<v||N.width>y||N.height<g||N.height>m)null===l||void 0===l||l();else{(b%(2*Math.PI)==0||f||void 0===O||void 0===C)&&(N.deltaX=_?0:N.deltaX,N.deltaY=E?0:N.deltaY);var M=a.getData(),T=a.resize(N);M.x===T.x&&M.y===T.y||(Al(a,s),Sl(M,T,o,r,i,a,s))}};function Cl(t,e,n,o,r,i,a,s){void 0===r&&(r=!1),void 0===i&&(i=!1);var l={x:n.x-(t.x-n.x),y:n.y-(t.y-n.y)},u=ml(l,e),c=bl(e,u,-o),d=bl(l,u,-o);if(r){var h=Math.abs(c.x-d.x),p=h-a;u.x>c.x?u.x=u.x+p/2:u.x=u.x-p/2}if(i){var f=Math.abs(c.y-d.y),v=f-s;u.y>c.y?u.y=u.y+v/2:u.y=u.y-v/2}if(r||i){var g=bl(d,u,o),y=g.x-l.x,m=g.y-l.y;u.x=u.x-y,u.y=u.y-m,d=bl(l,u,-o),c={x:u.x-(d.x-u.x),y:u.y-(d.y-u.y)}}var b=Math.abs(c.x-d.x),x=Math.abs(c.y-d.y);return r&&(b=a),i&&(x=s),{width:b,height:x,center:u}}var Nl=100,Ml={x:1,y:0,z:0};function Tl(t,e,n,o,r){var i=function(r){if(r<0||r>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:t.x*Math.pow(1-r,3)+3*e.x*r*Math.pow(1-r,2)+3*n.x*Math.pow(r,2)*(1-r)+o.x*Math.pow(r,3),y:t.y*Math.pow(1-r,3)+3*e.y*r*Math.pow(1-r,2)+3*n.y*Math.pow(r,2)*(1-r)+o.y*Math.pow(r,3)}},a=0,s=2,l=o.x,u=o.y,c=o;while(a<r&&s<50){c=i(1-s/Nl);var d=c.x,h=c.y;a=rs(l,u,d,h),s++}return c}function Pl(t,e){return t.x*e.y-t.y*e.x}function Dl(t,e){var n=[t.x,t.y,t.z],o=[e.x,e.y,e.z];return o.reduce((function(t,e,o){return t+e*n[o]}))}function kl(t,e){var n=Pl(t,e),o=Math.acos(Dl(Rl(t),Rl(e)));return n>=0?o:-o}function Rl(t){var e=Math.hypot(t.x,t.y);return{x:t.x/e,y:t.y/e,z:0}}function Il(t){return kl(Ml,t)}function Ll(t){return t*(180/Math.PI)}var jl={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},Bl=function(t){var e=(0,ai.A)(jl);return t&&(e=(0,hi.A)(e,t)),e},Hl=Bl,Fl=1e3,zl=999,Wl=function(){return++Fl},Yl=function(){return--zl},Gl=function(){return Gl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Gl.apply(this,arguments)},Xl=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ul=function(){function t(t,e){var n;this.BaseType=xi.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=Si.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=bi.DEFAULT,this.modelType=wi.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=e,this.properties=null!==(n=t.properties)&&void 0!==n?n:{},this.initEdgeData(t),this.setAttributes()}return t.prototype.initEdgeData=function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,n=e&&e(t.type),o=this.createId();t.id=o||n||Ns()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(t.id,")");var r=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=r,(0,li.A)(this,Ma(t));var i=this.graphModel.overlapMode;i===Ei.INCREASE&&(this.zIndex=t.zIndex||Wl()),this.setAnchors(),this.initPoints(),this.formatText(t)},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.getEdgeStyle=function(){return Gl(Gl({},this.graphModel.theme.baseEdge),this.style)},t.prototype.getAdjustPointStyle=function(){return Gl({},this.graphModel.theme.edgeAdjust)},t.prototype.getTextStyle=function(){var t=this.graphModel.theme.edgeText;return(0,ai.A)(t)},t.prototype.getEdgeAnimationStyle=function(){var t=this.graphModel.theme.edgeAnimation;return(0,ai.A)(t)},t.prototype.getArrowStyle=function(){var t=this.getEdgeStyle(),e=this.getEdgeAnimationStyle(),n=this.graphModel.theme.arrow,o=this.isAnimation?e.stroke:t.stroke;return Gl(Gl(Gl({},t),{fill:o,stroke:o}),n)},t.prototype.getOutlineStyle=function(){var t=this.graphModel,e=t.theme.outline;return(0,ai.A)(e)},t.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(t.prototype,"sourceNode",{get:function(){var t,e;return null===(e=null===(t=this.graphModel)||void 0===t?void 0:t.nodesMap[this.sourceNodeId])||void 0===e?void 0:e.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetNode",{get:function(){var t,e;return null===(e=null===(t=this.graphModel)||void 0===t?void 0:t.nodesMap[this.targetNodeId])||void 0===e?void 0:e.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),t.prototype.getBeginAnchor=function(t,e,n){var o,r,i=ts(t);if(n){if(o=(0,ci.A)(i,(function(t){return t.id===n})),o)return o;console.warn("".concat(n,""))}return i.forEach((function(t){var n=Ta(t,e);(void 0===r||n<r)&&(r=n,o=t)})),o},t.prototype.getEndAnchor=function(t,e){var n,o,r=this,i=ts(t);if(e){if(n=(0,ci.A)(i,(function(t){return t.id===e})),n)return n;console.warn("".concat(e,""))}return i.forEach((function(t){if(r.startPoint){var e=Ta(t,r.startPoint);(void 0===o||e<o)&&(o=e,n=t)}})),n},t.prototype.getProperties=function(){return an(this.properties)},t.prototype.getData=function(){var t=this.properties;Ke(t)&&(t=an(t));var e={id:this.id,type:this.type,properties:t,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:(0,li.A)({},this.startPoint),endPoint:(0,li.A)({},this.endPoint)};this.graphModel.overlapMode===Ei.INCREASE&&(e.zIndex=this.zIndex);var n=this.text,o=n.x,r=n.y,i=n.value;return i&&(e.text={x:o,y:r,value:i}),e},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.setProperty=function(t,e){Je(this.properties,t,mi(e)),this.setAttributes()},t.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},t.prototype.setProperties=function(t){this.properties=Gl(Gl({},an(this.properties)),mi(t)),this.setAttributes()},t.prototype.changeEdgeId=function(t){var e=this.arrowConfig,n=e.markerEnd,o=e.markerStart;o&&o==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),n&&n==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t},t.prototype.setStyle=function(t,e){var n;this.style=Gl(Gl({},this.style),(n={},n[t]=mi(e),n))},t.prototype.setStyles=function(t){this.style=Gl(Gl({},this.style),mi(t))},t.prototype.updateStyles=function(t){this.style=Gl({},mi(t))},t.prototype.setTextMode=function(t){this.textMode=t},t.prototype.formatText=function(t){var e,n,o,r=this.graphModel.editConfigModel,i=r.edgeTextDraggable,a=r.edgeTextEdit,s=this.textPosition,l=s.x,u=s.y,c=t.text,d={value:"",x:l,y:u,draggable:i,editable:a};c&&("string"===typeof c?d=Gl(Gl({},d),{value:c}):(d=Gl(Gl({},d),{x:null!==(e=c.x)&&void 0!==e?e:l,y:null!==(n=c.y)&&void 0!==n?n:u,value:null!==(o=c.value)&&void 0!==o?o:""}),(0,di.A)(c.draggable)||(d.draggable=c.draggable),(0,di.A)(c.editable)||(d.editable=c.editable))),this.text=d},t.prototype.resetTextPosition=function(){var t=this.textPosition,e=t.x,n=t.y;this.text.x=e,this.text.y=n},t.prototype.moveText=function(t,e){var n=this.text,o=n.x,r=n.y,i=n.value,a=n.draggable,s=n.editable;this.text={value:i,editable:s,draggable:a,x:o+t,y:r+e}},t.prototype.setText=function(t){t&&(0,li.A)(this.text,t)},t.prototype.updateText=function(t){this.text=Gl(Gl({},an(this.text)),{value:t})},t.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!t)throw new Error("beginAnchoranchorsanchors");this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){t=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!t)throw new Error("endAnchoranchorsanchors");this.endPoint||(this.endPoint={x:t.x,y:t.y}),this.targetAnchorId||(this.targetAnchorId=t.id)}},t.prototype.setSelected=function(t){void 0===t&&(t=!0),this.isSelected=t},t.prototype.setHovered=function(t){void 0===t&&(t=!0),this.isHovered=t},t.prototype.setHitable=function(t){void 0===t&&(t=!0),this.isHitable=t},t.prototype.setHittable=function(t){void 0===t&&(t=!0),this.isHittable=t},t.prototype.openEdgeAnimation=function(){this.isAnimation=!0},t.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},t.prototype.setElementState=function(t,e){this.state=t,this.additionStateData=e},t.prototype.updateStartPoint=function(t){this.startPoint=t},t.prototype.moveStartPoint=function(t,e){this.startPoint&&(this.startPoint.x+=t,this.startPoint.y+=e)},t.prototype.updateEndPoint=function(t){this.endPoint=t},t.prototype.moveEndPoint=function(t,e){this.endPoint&&(this.endPoint.x+=t,this.endPoint.y+=e)},t.prototype.setZIndex=function(t){void 0===t&&(t=0),this.zIndex=t},t.prototype.initPoints=function(){},t.prototype.updateAttributes=function(t){(0,li.A)(this,t)},t.prototype.getAdjustStart=function(){return this.startPoint},t.prototype.getAdjustEnd=function(){return this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint;this.updateStartPoint({x:e.x,y:e.y}),this.updateEndPoint({x:n.x,y:n.y})},t.BaseType=xi.EDGE,Xl([ht],t.prototype,"type",void 0),Xl([ht],t.prototype,"sourceNodeId",void 0),Xl([ht],t.prototype,"targetNodeId",void 0),Xl([ht],t.prototype,"startPoint",void 0),Xl([ht],t.prototype,"endPoint",void 0),Xl([ht],t.prototype,"textMode",void 0),Xl([ht],t.prototype,"text",void 0),Xl([ht],t.prototype,"properties",void 0),Xl([ht],t.prototype,"points",void 0),Xl([ht],t.prototype,"pointsList",void 0),Xl([ht],t.prototype,"isSelected",void 0),Xl([ht],t.prototype,"isHovered",void 0),Xl([ht],t.prototype,"isHitable",void 0),Xl([ht],t.prototype,"isHittable",void 0),Xl([ht],t.prototype,"draggable",void 0),Xl([ht],t.prototype,"visible",void 0),Xl([ht],t.prototype,"isAnimation",void 0),Xl([ht],t.prototype,"isShowAdjustPoint",void 0),Xl([ht],t.prototype,"zIndex",void 0),Xl([ht],t.prototype,"state",void 0),Xl([ht],t.prototype,"style",void 0),Xl([ht],t.prototype,"arrowConfig",void 0),Xl([mt],t.prototype,"sourceNode",null),Xl([mt],t.prototype,"targetNode",null),Xl([mt],t.prototype,"textPosition",null),Xl([Oe],t.prototype,"setProperty",null),Xl([Oe],t.prototype,"deleteProperty",null),Xl([Oe],t.prototype,"setProperties",null),Xl([Oe],t.prototype,"changeEdgeId",null),Xl([Oe],t.prototype,"setStyle",null),Xl([Oe],t.prototype,"setStyles",null),Xl([Oe],t.prototype,"updateStyles",null),Xl([Oe],t.prototype,"setTextMode",null),Xl([Oe],t.prototype,"formatText",null),Xl([Oe],t.prototype,"resetTextPosition",null),Xl([Oe],t.prototype,"moveText",null),Xl([Oe],t.prototype,"setText",null),Xl([Oe],t.prototype,"updateText",null),Xl([Oe],t.prototype,"setAnchors",null),Xl([Oe],t.prototype,"setSelected",null),Xl([Oe],t.prototype,"setHovered",null),Xl([Oe],t.prototype,"setHitable",null),Xl([Oe],t.prototype,"setHittable",null),Xl([Oe],t.prototype,"openEdgeAnimation",null),Xl([Oe],t.prototype,"closeEdgeAnimation",null),Xl([Oe],t.prototype,"setElementState",null),Xl([Oe],t.prototype,"updateStartPoint",null),Xl([Oe],t.prototype,"moveStartPoint",null),Xl([Oe],t.prototype,"updateEndPoint",null),Xl([Oe],t.prototype,"moveEndPoint",null),Xl([Oe],t.prototype,"setZIndex",null),Xl([Oe],t.prototype,"initPoints",null),Xl([Oe],t.prototype,"updateAttributes",null),Xl([Oe],t.prototype,"getAdjustStart",null),Xl([Oe],t.prototype,"getAdjustEnd",null),Xl([Oe],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(),Vl=Ul,Kl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ql=function(){return ql=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ql.apply(this,arguments)},Zl=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},$l=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Jl=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.BEZIER_EDGE,o.path="",o.initEdgeData(e),o.setAttributes(),o}return Kl(e,t),e.prototype.initEdgeData=function(e){this.offset=(0,gi.A)(e,"properties.offset",100),t.prototype.initEdgeData.call(this,e)},e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.bezier,n=t.prototype.getEdgeStyle.call(this),o=this.properties.style,r=void 0===o?{}:o;return ql(ql(ql({},n),(0,ai.A)(e)),(0,ai.A)(r))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var t=0,e=0;return this.pointsList.forEach((function(n){var o=n.x,r=n.y;t+=o,e+=r})),{x:t/this.pointsList.length,y:e/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var e=t.prototype.getData.call(this),n=this.pointsList.map((function(t){var e=t.x,n=t.y;return{x:e,y:n}}));return ql(ql({},e),{pointsList:n})},e.prototype.getControls=function(){var t=this.startPoint,e=this.endPoint,n=Aa({start:t,end:e,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return n},e.prototype.getPath=function(t){var e=$l(t,4),n=e[0],o=e[1],r=e[2],i=e[3];return"M ".concat(n.x," ").concat(n.y,"\n    C ").concat(o.x," ").concat(o.y,",\n    ").concat(r.x," ").concat(r.y,",\n    ").concat(i.x," ").concat(i.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=this.getControls(),e=t.sNext,n=t.ePre;this.updatePath(e,n)},e.prototype.updatePath=function(t,e){t=(0,ai.A)(t),e=(0,ai.A)(e);var n={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!t||!e){var r=this.getControls();t=r.sNext,e=r.ePre}this.pointsList=[n,t,e,o],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,e){this.startPoint.x+=t,this.startPoint.y+=e;var n=$l(this.pointsList,3),o=n[1],r=n[2];o.x+=t,o.y+=e,this.updatePath(o,r)},e.prototype.moveEndPoint=function(t,e){this.endPoint.x+=t,this.endPoint.y+=e;var n=$l(this.pointsList,3),o=n[1],r=n[2];r.x+=t,r.y+=e,this.updatePath(o,r)},e.prototype.updateAdjustAnchor=function(t,e){var n;"sNext"===e?this.pointsList[1]=t:"ePre"===e&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText((0,li.A)({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint,o=t.sourceNode,r=t.targetNode,i=Aa({start:e,end:n,sourceNode:o,targetNode:r,offset:this.offset}),a=i.sNext,s=i.ePre;this.pointsList=[e,a,s,n],this.initPoints()},Zl([ht],e.prototype,"path",void 0),Zl([Oe],e.prototype,"initPoints",null),Zl([Oe],e.prototype,"updatePoints",null),Zl([Oe],e.prototype,"updateStartPoint",null),Zl([Oe],e.prototype,"updateEndPoint",null),Zl([Oe],e.prototype,"moveStartPoint",null),Zl([Oe],e.prototype,"moveEndPoint",null),Zl([Oe],e.prototype,"updateAdjustAnchor",null),Zl([Oe],e.prototype,"getAdjustStart",null),Zl([Oe],e.prototype,"getAdjustEnd",null),Zl([Oe],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Vl),Ql=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tu=function(){return tu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tu.apply(this,arguments)},eu=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},nu=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},ou=function(t){function e(){var e=t.apply(this,nu([],eu(arguments),!1))||this;return e.modelType=wi.LINE_EDGE,e}return Ql(e,t),e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.line,n=t.prototype.getEdgeStyle.call(this),o=this.properties.style,r=void 0===o?{}:o;return tu(tu(tu({},n),(0,ai.A)(e)),(0,ai.A)(r))},e.prototype.initEdgeData=function(e){t.prototype.initEdgeData.call(this,e),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(t){var e=eu(t,2),n=e[0],o=e[1];return"".concat(n.x,",").concat(n.y," ").concat(o.x,",").concat(o.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(Vl),ru=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),iu=function(){return iu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},iu.apply(this,arguments)},au=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},su=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},lu=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},uu=function(t){function e(){var e=t.apply(this,lu([],su(arguments),!1))||this;return e.modelType=wi.POLYLINE_EDGE,e.draggingPointList=[],e}return ru(e,t),e.prototype.initEdgeData=function(e){this.offset=(0,gi.A)(e,"properties.offset",30),e.pointsList&&(this.pointsList=e.pointsList),t.prototype.initEdgeData.call(this,e)},e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.polyline,n=t.prototype.getEdgeStyle.call(this),o=this.properties.style,r=void 0===o?{}:o;return iu(iu(iu({},n),(0,ai.A)(e)),(0,ai.A)(r))},e.prototype.getTextPosition=function(){var t,e=null===(t=this.text)||void 0===t?void 0:t.value;if(this.dbClickPosition&&!e){var n=this.dbClickPosition,o=n.x,r=n.y;return{x:o,y:r}}var i=ba(this.points),a=su(fa(i),2),s=a[0],l=a[1];return{x:(s.x+l.x)/2,y:(s.y+l.y)/2}},e.prototype.getAfterAnchor=function(t,e,n){var o,r;return n.forEach((function(n){var i;t===Ai.HORIZONTAL?i=Math.abs(e.y-n.y):t===Ai.VERTICAL&&(i=Math.abs(e.x-n.x)),(!r||r>i)&&(r=i,o=n)})),o},e.prototype.getCrossPoint=function(t,e,n){var o;return t===Ai.HORIZONTAL?o={x:n.x,y:e.y}:t===Ai.VERTICAL&&(o={x:e.x,y:n.y}),o},e.prototype.removeCrossPoints=function(t,e,n){var o=n.map((function(t){return t}));if(1===t){var r=o[t],i=o[e],a=o[t-1],s=va(a,r,this.sourceNode);if(s){var l=ga(r,i,this.sourceNode);if(l){var u=ya(r,i,this.sourceNode);u&&(o[t]=u,o.splice(t-1,1),t--,e--)}}else{var c=this.sourceNode.anchors;c.forEach((function(e){if(e.x===a.x&&e.x===r.x||e.y===a.y&&e.y===r.y){var n=rs(e.x,e.y,r.x,r.y),i=rs(a.x,a.y,r.x,r.y);n<i&&(o[t-1]=e)}}))}}if(e===n.length-2){var d=o[t],h=o[e],p=o[e+1],f=va(h,p,this.targetNode);if(f){l=ga(d,h,this.targetNode);if(l){u=ya(d,h,this.targetNode);u&&(o[e]=u,o.splice(e+1,1))}}else{c=this.targetNode.anchors;c.forEach((function(t){if(t.x===p.x&&t.x===h.x||t.y===p.y&&t.y===h.y){var n=rs(t.x,t.y,h.x,h.y),r=rs(p.x,p.y,h.x,h.y);n<r&&(o[e+1]=t)}}))}}return o},e.prototype.getDraggingPoints=function(t,e,n,o,r){var i=r.map((function(t){return t})),a=this.getAfterAnchor(t,n,o),s=this.getCrossPoint(t,n,a);return"start"===e?(i.unshift(s),i.unshift(a)):(i.push(s),i.push(a)),i},e.prototype.updateCrossPoints=function(t){var e=t.map((function(t){return t})),n=t[0],o=t[1],r=t[e.length-2],i=t[e.length-1],a=this,s=a.sourceNode,l=a.targetNode,u=s.modelType,c=l.modelType,d=ma(n,o),h=e[0];switch(u){case wi.RECT_NODE:if(0!==s.radius){var p=ds(n,s);p||(h=us(n,d,s))}break;case wi.CIRCLE_NODE:h=cs(n,d,s);break;case wi.ELLIPSE_NODE:h=hs(n,d,s);break;case wi.DIAMOND_NODE:h=ps(n,d,s);break;case wi.POLYGON_NODE:h=ps(n,d,s);break;default:break}h&&(e[0]=h);var f=ma(r,i),v=e[e.length-1];switch(c){case wi.RECT_NODE:if(0!==l.radius){p=ds(i,l);p||(v=us(i,f,l))}break;case wi.CIRCLE_NODE:v=cs(i,f,l);break;case wi.ELLIPSE_NODE:v=hs(i,f,l);break;case wi.DIAMOND_NODE:v=ps(i,f,l);break;case wi.POLYGON_NODE:v=ps(i,f,l);break;default:break}return v&&(e[e.length-1]=v),e},e.prototype.updatePath=function(t){this.pointsList=t,this.points=this.getPath(this.pointsList)},e.prototype.getData=function(){var e=t.prototype.getData.call(this),n=this.pointsList.map((function(t){var e=t.x,n=t.y;return{x:e,y:n}}));return Object.assign({},e,{pointsList:n})},e.prototype.getPath=function(t){return t.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=pa({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,e){this.startPoint.x+=t,this.startPoint.y+=e,this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveEndPoint=function(t,e){this.endPoint.x+=t,this.endPoint.y+=e,this.updatePoints()},e.prototype.updatePointsList=function(t,e){this.pointsList.forEach((function(n){n.x+=t,n.y+=e}));var n=this.pointsList[0];this.startPoint=Object.assign({},n);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map((function(t){return t}))},e.prototype.dragAppendSimple=function(t,e){var n;this.isDragging=!0;var o=t.start,r=t.end,i=t.startIndex,a=t.endIndex,s=t.direction,l=this.pointsList,u=l;return s===Ai.HORIZONTAL?(l[i]={x:o.x,y:o.y+e.y},l[a]={x:r.x,y:r.y+e.y},u=this.pointsList.map((function(t){return t}))):s===Ai.VERTICAL&&(l[i]={x:o.x+e.x,y:o.y},l[a]={x:r.x+e.x,y:r.y},u=this.pointsList.map((function(t){return t}))),this.updatePointsAfterDrag(u),this.draggingPointList=u,(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText((0,li.A)({},this.text,this.textPosition)),{start:(0,li.A)({},l[i]),end:(0,li.A)({},l[a]),startIndex:i,endIndex:a,direction:s}},e.prototype.dragAppend=function(t,e){var n;this.isDragging=!0;var o=t.start,r=t.end,i=t.startIndex,a=t.endIndex,s=t.direction,l=this.pointsList;if(s===Ai.HORIZONTAL){l[i]={x:o.x,y:o.y+e.y},l[a]={x:r.x,y:r.y+e.y};var u=this.pointsList.map((function(t){return t}));if(0!==i&&a!==this.pointsList.length-1&&(u=this.removeCrossPoints(i,a,u)),0===i){var c={x:o.x,y:o.y+e.y},d=is(c,this.sourceNode);if(!d){var h=this.sourceNode.anchors;u=this.getDraggingPoints(s,"start",c,h,u)}}if(a===this.pointsList.length-1){var p={x:r.x,y:r.y+e.y};d=is(p,this.targetNode);if(!d){h=this.targetNode.anchors;u=this.getDraggingPoints(s,"end",p,h,u)}}this.updatePointsAfterDrag(u),this.draggingPointList=u}else if(s===Ai.VERTICAL){l[i]={x:o.x+e.x,y:o.y},l[a]={x:r.x+e.x,y:r.y};u=this.pointsList.map((function(t){return t}));if(0!==i&&a!==this.pointsList.length-1&&(u=this.removeCrossPoints(i,a,u)),0===i){c={x:o.x+e.x,y:o.y},d=is(c,this.sourceNode);if(!d){h=this.sourceNode.anchors;u=this.getDraggingPoints(s,"start",c,h,u)}}if(a===this.pointsList.length-1){p={x:r.x+e.x,y:r.y},d=is(p,this.targetNode);if(!d){h=this.targetNode.anchors;u=this.getDraggingPoints(s,"end",p,h,u)}}this.updatePointsAfterDrag(u),this.draggingPointList=u}return(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText((0,li.A)({},this.text,this.textPosition)),{start:(0,li.A)({},l[i]),end:(0,li.A)({},l[a]),startIndex:i,endIndex:a,direction:s}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var t=ha(ba(this.points));this.pointsList=t.map((function(t){return t})),this.draggingPointList=[];var e=t[0];this.startPoint=(0,li.A)({},e);var n=t[t.length-1];this.endPoint=(0,li.A)({},n)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(t){var e=this.updateCrossPoints(t);this.points=e.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint,o=t.sourceNode,r=t.targetNode;this.pointsList=pa({x:e.x,y:e.y},{x:n.x,y:n.y},o,r,this.offset||0),this.initPoints()},au([ht],e.prototype,"dbClickPosition",void 0),au([Oe],e.prototype,"initPoints",null),au([Oe],e.prototype,"updatePoints",null),au([Oe],e.prototype,"updateStartPoint",null),au([Oe],e.prototype,"moveStartPoint",null),au([Oe],e.prototype,"updateEndPoint",null),au([Oe],e.prototype,"moveEndPoint",null),au([Oe],e.prototype,"updatePointsList",null),au([Oe],e.prototype,"dragAppendStart",null),au([Oe],e.prototype,"dragAppendSimple",null),au([Oe],e.prototype,"dragAppend",null),au([Oe],e.prototype,"dragAppendEnd",null),au([Oe],e.prototype,"updatePointsAfterDrag",null),au([Oe],e.prototype,"getAdjustStart",null),au([Oe],e.prototype,"getAdjustEnd",null),au([Oe],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Ul),cu=n(32062),du=n(30596),hu=n(28023),pu=function(){return pu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},pu.apply(this,arguments)},fu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},vu=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gu=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},yu=function(){function t(t,e){var n;this.BaseType=xi.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=Si.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=bi.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=wi.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=e,this.properties=null!==(n=t.properties)&&void 0!==n?n:{},this.initNodeData(t),this.setAttributes()}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t;var e=this,n=e.x,o=void 0===n?0:n,r=e.y,i=void 0===r?0:r;this.transform=new $a(-o,-i).rotate(t).translate(o,i).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),t.prototype.initNodeData=function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,n=e&&e(t.type),o=this.createId();t.id=o||n||Ns()}this.formatText(t),(0,li.A)(this,fs(t));var r=this.graphModel.overlapMode;r===Ei.INCREASE&&(this.zIndex=t.zIndex||Wl())},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.setTextMode=function(t){this.textMode=t},t.prototype.formatText=function(t){var e,n,o,r=this.graphModel.editConfigModel,i=r.nodeTextDraggable,a=r.nodeTextEdit,s=t.x,l=t.y,u=t.text,c={value:"",x:s,y:l,draggable:i,editable:a};u&&("string"===typeof u?c.value=u:(c=pu(pu({},c),{x:null!==(e=u.x)&&void 0!==e?e:s,y:null!==(n=u.y)&&void 0!==n?n:l,value:null!==(o=u.value)&&void 0!==o?o:""}),(0,di.A)(u.draggable)||(c.draggable=u.draggable),(0,di.A)(u.editable)||(c.editable=u.editable))),t.text=c},t.prototype.resize=function(t){var e=t.width,n=t.height,o=t.deltaX,r=t.deltaY,i=this.isAllowResizeNode(o,r,e,n);return i?(this.move(o/2,r/2),this.width=e,this.height=n,this.setProperties({width:e,height:n}),this.getData()):this.getData()},t.prototype.proportionalResize=function(){},t.prototype.getData=function(){var t=this.text,e=t.x,n=t.y,o=t.value,r=this.properties;Ke(r)&&(r=an(r)),(0,ii.A)(r.width)&&(r.width=this.width),(0,ii.A)(r.height)&&(r.height=this.height);var i={id:this.id,type:this.type,x:this.x,y:this.y,properties:r};return this.rotate&&(i.rotate=this.rotate),this.graphModel.overlapMode===Ei.INCREASE&&(i.zIndex=this.zIndex),o&&(i.text={x:e,y:n,value:o}),i},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.getProperties=function(){return an(this.properties)},t.prototype.getOuterGAttributes=function(){return{className:""}},t.prototype.getNodeStyle=function(){return pu(pu({},this.graphModel.theme.baseNode),this.style)},t.prototype.getTextStyle=function(){var t=this.graphModel.theme.nodeText,e=this.properties.textStyle,n=void 0===e?{}:e;return pu(pu({},(0,ai.A)(t)),(0,ai.A)(n))},t.prototype.getRotateControlStyle=function(){var t=this.graphModel.theme.rotateControl;return(0,ai.A)(t)},t.prototype.getResizeControlStyle=function(){var t=this.graphModel.theme.resizeControl;return(0,ai.A)(t)},t.prototype.getResizeOutlineStyle=function(){var t=this.graphModel.theme.resizeOutline;return(0,ai.A)(t)},t.prototype.getAnchorStyle=function(t){var e=this.graphModel.theme.anchor;return(0,ai.A)(e)},t.prototype.getAnchorLineStyle=function(t){var e=this.graphModel.theme.anchorLine;return(0,ai.A)(e)},t.prototype.getOutlineStyle=function(){var t=this.graphModel.theme.outline;return(0,ai.A)(t)},t.prototype.isAllowConnectedAsSource=function(t,e,n,o){var r=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var i=!0,a="",s=0;s<r.length;s++){var l=r[s];if(!l.validate.call(this,this,t,e,n,o)){i=!1,a=l.message;break}}return{isAllPass:i,msg:a}},t.prototype.getConnectedSourceRules=function(){return this.sourceRules},t.prototype.isAllowConnectedAsTarget=function(t,e,n,o){var r=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var i=!0,a="",s=0;s<r.length;s++){var l=r[s];if(!l.validate.call(this,t,this,e,n,o)){i=!1,a=l.message;break}}return{isAllPass:i,msg:a}},t.prototype.isAllowMoveNode=function(t,e){var n,o,r=!0,i=!0,a=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var s=vu(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=u(this,t,e);if(!c)return!1;if("object"===typeof c){var d=c;if(!d.x&&!d.y)return!1;r=r&&d.x,i=i&&d.y}}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return{x:r,y:i}},t.prototype.getConnectedTargetRules=function(){return this.targetRules},t.prototype.getAnchorsByOffset=function(){var t=this,e=t.anchorsOffset,n=t.id,o=t.x,r=t.y;return e&&e.length>0?e.map((function(t,e){return t.length?{id:"".concat(n,"_").concat(e),x:o+t[0],y:r+t[1]}:pu(pu({},t),{x:o+t.x,y:r+t.y,id:t.id||"".concat(n,"_").concat(e)})})):this.getDefaultAnchor()},t.prototype.getDefaultAnchor=function(){return[]},t.prototype.getTargetAnchor=function(t){return os(t,this)},t.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(t.prototype,"anchors",{get:function(){var t=this.getAnchorsByOffset(),e=this,n=e.x,o=e.y,r=e.rotate;return t.forEach((function(t){var e=t.x,i=t.y,a=gu(new Ka([e,i,1]).translate(-n,-o).rotate(r).translate(n,o)[0],2),s=a[0],l=a[1];t.x=s,t.y=l})),t},enumerable:!1,configurable:!0}),t.prototype.getAnchorInfo=function(t){if(!(0,ii.A)(t))for(var e=0;e<this.anchors.length;e++){var n=this.anchors[e];if(n.id===t)return n}},t.prototype.addNodeMoveRules=function(t){this.moveRules.includes(t)||this.moveRules.push(t)},t.prototype.isAllowMoveByXORY=function(t,e,n){var o,r;if(n)o=!0,r=!0;else{var i=this.isAllowMoveNode(t,e);"boolean"===typeof i?(o=i,r=i):(o=i.x,r=i.y)}return{isAllowMoveX:o,isAllowMoveY:r}},t.prototype.move=function(t,e,n){void 0===n&&(n=!1);var o=this.isAllowMoveByXORY(t,e,n),r=o.isAllowMoveX,i=o.isAllowMoveY;return r&&(this.x=this.x+t,this.text&&this.moveText(t,0)),i&&(this.y=this.y+e,this.text&&this.moveText(0,e)),(r||i)&&(this.rotate=this._rotate),r||i},t.prototype.getMoveDistance=function(t,e,n){void 0===n&&(n=!1);var o=this.isAllowMoveByXORY(t,e,n),r=o.isAllowMoveX,i=o.isAllowMoveY,a=0,s=0;return r&&t&&(this.x=this.x+t,this.text&&this.moveText(t,0),a=t),i&&e&&(this.y=this.y+e,this.text&&this.moveText(0,e),s=e),this.transform=new $a(-this.x,-this.y).rotate(this.rotate).translate(this.x,this.y).toString(),[a,s]},t.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var o=t-this.x,r=e-this.y;return!(!n&&!this.isAllowMoveNode(o,r))&&(this.text&&this.moveText(o,r),this.x=t,this.y=e,!0)},t.prototype.moveText=function(t,e){var n=this.text,o=n.x,r=n.y,i=n.value,a=n.draggable,s=n.editable;this.text={value:i,editable:s,draggable:a,x:o+t,y:r+e}},t.prototype.updateText=function(t){this.text=pu(pu({},an(this.text)),{value:t})},t.prototype.addNodeResizeRules=function(t){this.resizeRules.includes(t)||this.resizeRules.push(t)},t.prototype.isAllowResizeNode=function(t,e,n,o){var r,i,a=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var s=vu(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=u(this,t,e,n,o);if(!c)return!1}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!0},t.prototype.setSelected=function(t){void 0===t&&(t=!0),this.isSelected=t},t.prototype.setHovered=function(t){void 0===t&&(t=!0),this.isHovered=t,this.setIsShowAnchor(t)},t.prototype.setIsShowAnchor=function(t){void 0===t&&(t=!0),this.isShowAnchor=t},t.prototype.setRotatable=function(t){void 0===t&&(t=!0),this.rotatable=t},t.prototype.setResizable=function(t){void 0===t&&(t=!0),this.resizable=t},t.prototype.setHitable=function(t){void 0===t&&(t=!0),this.isHitable=t},t.prototype.setHittable=function(t){void 0===t&&(t=!0),this.isHittable=t},t.prototype.setElementState=function(t,e){this.state=t,this.additionStateData=e},t.prototype.updateProperties=function(t,e){var n=an(this.properties);this.properties=t,this.setAttributes(),this.graphModel.eventCenter.emit(_i.NODE_PROPERTIES_CHANGE,{id:this.id,keys:e,preProperties:n,properties:t})},t.prototype.setProperty=function(t,e){var n=an(this.properties),o=(0,ai.A)(n);(0,cu.A)(o,t,mi(e)),this.updateProperties(o,[t])},t.prototype.setProperties=function(t){var e=an(this.properties),n=pu(pu({},e),mi(t)),o=[];(0,du.A)(t,(function(t,n){((0,hu.A)(e,n)&&e[n]!==t||!(0,hu.A)(e,n))&&o.push(n)})),this.updateProperties(n,o)},t.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},t.prototype.setStyle=function(t,e){var n;this.style=pu(pu({},this.style),(n={},n[t]=mi(e),n))},t.prototype.setStyles=function(t){this.style=pu(pu({},this.style),mi(t))},t.prototype.updateStyles=function(t){this.style=pu({},mi(t))},t.prototype.setZIndex=function(t){void 0===t&&(t=1),this.zIndex=t},t.prototype.updateAttributes=function(t){(0,li.A)(this,t)},t.BaseType=xi.NODE,fu([ht],t.prototype,"type",void 0),fu([ht],t.prototype,"x",void 0),fu([ht],t.prototype,"y",void 0),fu([ht],t.prototype,"textMode",void 0),fu([ht],t.prototype,"text",void 0),fu([ht],t.prototype,"properties",void 0),fu([ht],t.prototype,"_width",void 0),fu([ht],t.prototype,"_height",void 0),fu([ht],t.prototype,"anchorsOffset",void 0),fu([ht],t.prototype,"isSelected",void 0),fu([ht],t.prototype,"isHovered",void 0),fu([ht],t.prototype,"isShowAnchor",void 0),fu([ht],t.prototype,"isDragging",void 0),fu([ht],t.prototype,"isHitable",void 0),fu([ht],t.prototype,"isHittable",void 0),fu([ht],t.prototype,"draggable",void 0),fu([ht],t.prototype,"visible",void 0),fu([ht],t.prototype,"rotatable",void 0),fu([ht],t.prototype,"resizable",void 0),fu([ht],t.prototype,"zIndex",void 0),fu([ht],t.prototype,"state",void 0),fu([ht],t.prototype,"autoToFront",void 0),fu([ht],t.prototype,"style",void 0),fu([ht],t.prototype,"transform",void 0),fu([ht],t.prototype,"_rotate",void 0),fu([mt],t.prototype,"incoming",null),fu([mt],t.prototype,"outgoing",null),fu([Oe],t.prototype,"setTextMode",null),fu([Oe],t.prototype,"addNodeMoveRules",null),fu([Oe],t.prototype,"move",null),fu([Oe],t.prototype,"getMoveDistance",null),fu([Oe],t.prototype,"moveTo",null),fu([Oe],t.prototype,"moveText",null),fu([Oe],t.prototype,"updateText",null),fu([Oe],t.prototype,"addNodeResizeRules",null),fu([Oe],t.prototype,"setSelected",null),fu([Oe],t.prototype,"setHovered",null),fu([Oe],t.prototype,"setIsShowAnchor",null),fu([Oe],t.prototype,"setRotatable",null),fu([Oe],t.prototype,"setResizable",null),fu([Oe],t.prototype,"setHitable",null),fu([Oe],t.prototype,"setHittable",null),fu([Oe],t.prototype,"setElementState",null),fu([Oe],t.prototype,"setProperty",null),fu([Oe],t.prototype,"setProperties",null),fu([Oe],t.prototype,"deleteProperty",null),fu([Oe],t.prototype,"setStyle",null),fu([Oe],t.prototype,"setStyles",null),fu([Oe],t.prototype,"updateStyles",null),fu([Oe],t.prototype,"setZIndex",null),fu([Oe],t.prototype,"updateAttributes",null),t}(),mu=yu,bu=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xu=function(){return xu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xu.apply(this,arguments)},wu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},_u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.CIRCLE_NODE,o.r=50,o.initNodeData(e),o.setAttributes(),o}return bu(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.r},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties.r;e&&(this.r=e)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.circle,o=this.properties.style,r=void 0===o?{}:o;return xu(xu(xu({},e),(0,ai.A)(n)),(0,ai.A)(r))},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,o=t.r;return[{x:e,y:n-o,id:"".concat(this.id,"_0")},{x:e+o,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+o,id:"".concat(this.id,"_2")},{x:e-o,y:n,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var e=t.width,n=t.deltaX,o=t.deltaY;return this.move(n/2,o/2),this.r=e,this.setProperties({r:e}),this.getData()},wu([ht],e.prototype,"r",void 0),wu([mt],e.prototype,"width",null),wu([mt],e.prototype,"height",null),e}(mu),Eu=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Au=function(){return Au=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Au.apply(this,arguments)},Su=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ou=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Cu=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.DIAMOND_NODE,o.rx=30,o.ry=50,o.initNodeData(e),o.setAttributes(),o}return Eu(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.rx,o=e.ry;n&&(this.rx=n),o&&(this.ry=o)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.diamond,o=this.properties.style,r=void 0===o?{}:o;return Au(Au(Au({},e),(0,ai.A)(n)),(0,ai.A)(r))},Object.defineProperty(e.prototype,"points",{get:function(){var t=this,e=t.x,n=t.y,o=t.rx,r=t.ry;return[[e,n-r],[e+o,n],[e,n+r],[e-o,n]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return(0,Ds.A)(this.points,(function(t){var e=Ou(t,2),n=e[0],o=e[1];return{x:n,y:o}}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return(0,ri.A)(this.points,(function(n){var o=Ou(n,1),r=o[0];r<t&&(t=r),r>e&&(e=r)})),e-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return(0,ri.A)(this.points,(function(n){var o=Ou(n,2),r=o[1];r<t&&(t=r),r>e&&(e=r)})),e-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this;return(0,Ds.A)(this.points,(function(e,n){var o=Ou(e,2),r=o[0],i=o[1];return{x:r,y:i,id:"".concat(t.id,"_").concat(n)}}))},e.prototype.resize=function(t){var e=t.width,n=t.height,o=t.deltaX,r=t.deltaY;return this.move(o/2,r/2),this.rx=e,this.ry=n,this.setProperties({rx:e,ry:n}),this.getData()},Su([ht],e.prototype,"rx",void 0),Su([ht],e.prototype,"ry",void 0),Su([mt],e.prototype,"points",null),Su([mt],e.prototype,"pointsPosition",null),Su([mt],e.prototype,"width",null),Su([mt],e.prototype,"height",null),e}(mu),Nu=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mu=function(){return Mu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Mu.apply(this,arguments)},Tu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Pu=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.ELLIPSE_NODE,o.rx=30,o.ry=45,o.initNodeData(e),o.setAttributes(),o}return Nu(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.rx,o=e.ry;n&&(this.rx=n),o&&(this.ry=o)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.ellipse,o=this.properties.style,r=void 0===o?{}:o;return Mu(Mu(Mu({},e),(0,ai.A)(n)),(0,ai.A)(r))},Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.rx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.ry},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,o=t.rx,r=t.ry;return[{x:e,y:n-r,id:"".concat(this.id,"_0")},{x:e+o,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+r,id:"".concat(this.id,"_2")},{x:e-o,y:n,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var e=t.width,n=t.height,o=t.deltaX,r=t.deltaY;return this.move(o/2,r/2),this.rx=e,this.ry=n,this.setProperties({rx:e,ry:n}),this.getData()},Tu([ht],e.prototype,"rx",void 0),Tu([ht],e.prototype,"ry",void 0),Tu([mt],e.prototype,"width",null),Tu([mt],e.prototype,"height",null),e}(mu),Du=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ku=function(){return ku=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ku.apply(this,arguments)},Ru=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Iu=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Lu=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.POLYGON_NODE,o.points=[[50,0],[100,50],[50,100],[0,50]],o.initNodeData(e),o.setAttributes(),o}return Du(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.points,o=e.width,r=e.height,i=n||this.points;this.points=La(i,o,r)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.polygon,o=this.properties.style,r=void 0===o?{}:o;return ku(ku(ku({},e),(0,ai.A)(n)),(0,ai.A)(r))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var t=this,e=t.x,n=t.y,o=t.width,r=t.height;return this.points.map((function(t){return{x:t[0]+e-o/2,y:t[1]+n-r/2}}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(n){var o=Iu(n,1),r=o[0];r<t&&(t=r),r>e&&(e=r)})),e-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(n){var o=Iu(n,2),r=o[1];r<t&&(t=r),r>e&&(e=r)})),e-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,e=this,n=e.x,o=e.y,r=e.width,i=e.height,a=e.points;return a.map((function(e,a){var s=Iu(e,2),l=s[0],u=s[1];return{x:n+l-r/2,y:o+u-i/2,id:"".concat(t.id,"_").concat(a)}}))},e.prototype.resize=function(t){var e=this,n=t.width,o=t.height,r=t.deltaX,i=t.deltaY;this.move(r/2,i/2);var a=(0,Ds.A)(this.points,(function(t){var r=Iu(t,2),i=r[0],a=r[1];return[i*n/e.width,a*o/e.height]}));return this.points=a,this.properties.points=a,this.getData()},Ru([ht],e.prototype,"points",void 0),Ru([mt],e.prototype,"pointsPosition",null),Ru([mt],e.prototype,"width",null),Ru([mt],e.prototype,"height",null),e}(mu),ju=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bu=function(){return Bu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Bu.apply(this,arguments)},Hu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Fu=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.RECT_NODE,o.radius=0,o.initNodeData(e),o.setAttributes(),o}return ju(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.width,o=e.height,r=e.radius;(0,ii.A)(n)||(this.width=n),(0,ii.A)(o)||(this.height=o),(0,ii.A)(r)||(this.radius=r)},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,o=t.width,r=t.height;return[{x:e,y:n-r/2,id:"".concat(this.id,"_0")},{x:e+o/2,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+r/2,id:"".concat(this.id,"_2")},{x:e-o/2,y:n,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.rect,o=this.properties.style,r=void 0===o?{}:o;return Bu(Bu(Bu({},e),(0,ai.A)(n)),(0,ai.A)(r))},Hu([ht],e.prototype,"radius",void 0),e}(mu),zu=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wu=function(){return Wu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Wu.apply(this,arguments)},Yu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Gu=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Xu=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Uu=function(t){function e(){var e=t.apply(this,Xu([],Gu(arguments),!1))||this;return e.modelType=wi.TEXT_NODE,e}return zu(e,t),e.prototype.getTextStyle=function(){var e=t.prototype.getTextStyle.call(this),n=this.graphModel.theme.text,o=this.properties.textStyle;return Wu(Wu(Wu({},e),(0,ai.A)(n)),(0,ai.A)(o))},Object.defineProperty(e.prototype,"width",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize,n=ys({rows:t,fontSize:e,rowsLength:t.length}).width;return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize,n=ys({rows:t,fontSize:e,rowsLength:t.length}).height;return n},enumerable:!1,configurable:!0}),Yu([mt],e.prototype,"width",null),Yu([mt],e.prototype,"height",null),e}(mu),Vu=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ku=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.modelType=wi.HTML_NODE,o.setAttributes(),o}return Vu(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.width,o=e.height;n&&(this.width=n),o&&(this.height=o)},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,o=t.width,r=t.height;return[{x:e,y:n-r/2,id:"".concat(this.id,"_0")},{x:e+o/2,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+r/2,id:"".concat(this.id,"_2")},{x:e-o/2,y:n,id:"".concat(this.id,"_3")}]},e}(mu),qu=n(31226),Zu=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},$u={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Ju=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],Qu=function(){function t(t){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=Si.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=Si.TEXT,this.edgeTextMode=Si.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",(0,li.A)(this,this.computeConfig(t))}return t.prototype.updateEditConfig=function(t){var e=this.computeConfig(t);(0,li.A)(this,e)},t.prototype.computeConfig=function(t){var e=t.isSilentMode,n=t.textDraggable,o=t.textMode,r=t.textEdit,i=t.adjustEdgeStartAndEnd,a={};if(!1===e&&(0,li.A)(a,this.stagedConfig),!0===e&&e!==this.isSilentMode){var s=(0,Di.A)($u,Ju);this.stagedConfig=(0,Di.A)(this,Ju),(0,li.A)(a,s)}(0,di.A)(r)||(0,li.A)(a,{nodeTextEdit:r,edgeTextEdit:r}),(0,di.A)(n)||(0,li.A)(a,{nodeTextDraggable:n,edgeTextDraggable:n}),o&&(0,li.A)(a,{nodeTextMode:o,edgeTextMode:o}),(0,qu.A)(i)&&(0,li.A)(a,{adjustEdgeStart:i,adjustEdgeEnd:i});var l=(0,Di.A)(t,Ju);return(0,li.A)(a,l)},t.prototype.updateTextMode=function(t){this.textMode=t,this.edgeTextMode=t,this.nodeTextMode=t},t.prototype.getConfig=function(){return(0,Di.A)(this,Ju)},Zu([ht],t.prototype,"isSilentMode",void 0),Zu([ht],t.prototype,"stopZoomGraph",void 0),Zu([ht],t.prototype,"stopMoveGraph",void 0),Zu([ht],t.prototype,"stopScrollGraph",void 0),Zu([ht],t.prototype,"snapGrid",void 0),Zu([ht],t.prototype,"textMode",void 0),Zu([ht],t.prototype,"textEdit",void 0),Zu([ht],t.prototype,"textDraggable",void 0),Zu([ht],t.prototype,"nodeTextEdit",void 0),Zu([ht],t.prototype,"nodeTextDraggable",void 0),Zu([ht],t.prototype,"nodeTextMultiple",void 0),Zu([ht],t.prototype,"nodeTextVertical",void 0),Zu([ht],t.prototype,"nodeTextMode",void 0),Zu([ht],t.prototype,"edgeTextMode",void 0),Zu([ht],t.prototype,"edgeTextEdit",void 0),Zu([ht],t.prototype,"edgeTextDraggable",void 0),Zu([ht],t.prototype,"edgeTextMultiple",void 0),Zu([ht],t.prototype,"edgeTextVertical",void 0),Zu([ht],t.prototype,"hideAnchors",void 0),Zu([ht],t.prototype,"allowRotate",void 0),Zu([ht],t.prototype,"allowResize",void 0),Zu([ht],t.prototype,"hoverOutline",void 0),Zu([ht],t.prototype,"nodeSelectedOutline",void 0),Zu([ht],t.prototype,"adjustNodePosition",void 0),Zu([ht],t.prototype,"autoExpand",void 0),Zu([ht],t.prototype,"adjustEdge",void 0),Zu([ht],t.prototype,"adjustEdgeMiddle",void 0),Zu([ht],t.prototype,"adjustEdgeStartAndEnd",void 0),Zu([ht],t.prototype,"adjustEdgeStart",void 0),Zu([ht],t.prototype,"adjustEdgeEnd",void 0),Zu([ht],t.prototype,"edgeSelectedOutline",void 0),Zu([Oe],t.prototype,"updateEditConfig",null),Zu([Oe],t.prototype,"updateTextMode",null),t}(),tc=n(94235),ec="*",nc=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){var o=this;null===t||void 0===t||t.split(",").forEach((function(t){t=t.trim(),o._events[t]||(o._events[t]=[]),o._events[t].push({callback:e,once:!!n})}))},t.prototype.once=function(t,e){var n=this;null===t||void 0===t||t.split(",").forEach((function(t){t=t.trim(),n.on(t,e,!0)}))},t.prototype.emit=function(t,e){var n=this;null===t||void 0===t||t.split(",").forEach((function(t){var o=n._events[t]||[],r=n._events[ec]||[],i=function(o){for(var r=o.length,i=0;i<r;i++)if(o[i]){var a=o[i],s=a.callback,l=a.once;l&&(o.splice(i,1),0===o.length&&delete n._events[t],r--,i--),s.apply(n,[e])}};i(o),i(r)}))},t.prototype.off=function(t,e){var n=this;t||(this._events={}),t.split(",").forEach((function(t){if(e){for(var o=n._events[t]||[],r=o.length,i=0;i<r;i++)o[i].callback===e&&(o.splice(i,1),r--,i--);0===o.length&&delete n._events[t]}else delete n._events[t]}))},t.prototype.getEvents=function(){return this._events},t.prototype.destroy=function(){this._events={}},t}(),oc=nc,rc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ic=function(){return ic=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ic.apply(this,arguments)},ac=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},sc=function(t){function e(e){var n=t.call(this)||this;n.stepScrollX=0,n.stepScrollY=0,n.onDragging=function(t){var e=t.deltaX,o=t.deltaY;n.setState({isDragging:!0});var r=n.props.graphModel,i=r.transformModel,a=r.editConfigModel;!0!==a.stopMoveGraph&&i.translate(e,o)},n.onDragEnd=function(){n.setState({isDragging:!1})},n.zoomHandler=function(t){var e=n.props,o=e.graphModel,r=o.editConfigModel,i=o.transformModel,a=o.gridSize,s=e.graphModel,l=t.deltaX,u=t.deltaY,c=r.stopScrollGraph,d=r.stopZoomGraph;if(c||t.ctrlKey||t.metaKey){if(!d){t.preventDefault();var h=s.getPointByClient({x:t.clientX,y:t.clientY}),p=h.canvasOverlayPosition,f=p.x,v=p.y;i.zoom(t.deltaY<0,[f,v])}}else{if(t.preventDefault(),n.stepScrollX+=l,n.stepScrollY+=u,Math.abs(n.stepScrollX)>=a){var g=n.stepScrollX%a,y=n.stepScrollX-g;i.translate(-y*i.SCALE_X,0),n.stepScrollX=g}if(Math.abs(n.stepScrollY)>=a){var m=n.stepScrollY%a,b=n.stepScrollY-m;i.translate(0,-b*i.SCALE_Y),n.stepScrollY=m}}},n.clickHandler=function(t){var e=t.target;if("canvas-overlay"===e.getAttribute("name")){var o=n.props.graphModel,r=o.selectElements;r.size>0&&o.clearSelectElements(),o.eventCenter.emit(_i.BLANK_CLICK,{e:t})}},n.handleContextMenu=function(t){var e=t.target;if("canvas-overlay"===e.getAttribute("name")){t.preventDefault();var o=n.props.graphModel,r=o.getPointByClient({x:t.clientX,y:t.clientY});o.eventCenter.emit(_i.BLANK_CONTEXTMENU,{e:t,position:r})}},n.mouseDownHandler=function(t){var e=n.props.graphModel,o=e.eventCenter,r=e.editConfigModel,i=e.transformModel.SCALE_X,a=e.gridSize,s=r.adjustEdge,l=r.adjustNodePosition,u=r.stopMoveGraph,c=t.target,d=!s&&!l;("canvas-overlay"===c.getAttribute("name")||d)&&(!0!==u?(n.stepDrag.setStep(a*i),n.stepDrag.handleMouseDown(t)):o.emit(_i.BLANK_MOUSEDOWN,{e:t}),n.clickHandler(t))};var o=e.graphModel,r=o.gridSize,i=o.eventCenter;return n.stepDrag=new Pi({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:r,eventType:"BLANK",isStopPropagation:!1,eventCenter:i,model:void 0}),n.state={isDragging:!1},n}return rc(e,t),e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=t.getTransformStyle().transform,n=this.props,o=n.children,r=n.dnd,i=this.state.isDragging;return(0,oi.Y)("svg",ic({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:i?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},r.eventMap(),{children:(0,oi.Y)("g",{transform:e,children:o})}))},e=ac([Ip],e),e}(r.uA),lc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),uc=function(){return uc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},uc.apply(this,arguments)},cc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},dc=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},hc=function(t){function e(){var e=t.call(this)||this;return e.onDragging=function(t){var n=t.event,o=e.props,r=o.graphModel,i=o.bezierModel,a=o.type,s=r.getPointByClient({x:n.clientX,y:n.clientY}).canvasOverlayPosition,l=s.x,u=s.y;i.updateAdjustAnchor({x:l,y:u},a),r.eventCenter.emit(_i.EDGE_ADJUST,{data:i.getData()})},e.onDragEnd=function(){var t=e.props.bezierModel;t.isDragging=!1},e.dragHandler=new Pi({onDragging:e.onDragging,onDragEnd:e.onDragEnd}),e}return lc(e,t),e.prototype.render=function(){var t=this,e=this.props.position,n=e.x,o=e.y,r=this.props.bezierModel,i=r.getEdgeStyle().adjustAnchor;return(0,oi.Y)($s,uc({className:"lf-bezier-adjust-anchor",x:n,y:o},i,{onMouseDown:function(e){t.dragHandler.handleMouseDown(e)}}))},e}(r.uA),pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lc(e,t),e.prototype.getBezierAdjust=function(t,e){var n=t.path,o=t.id,r=Sa(n),i=dc(r,4),a=i[0],s=i[1],l=i[2],u=i[3],c=t.getEdgeStyle().adjustLine,d=[];return d.push((0,oi.Y)(Fs,uc({x1:a.x,y1:a.y,x2:s.x,y2:s.y},c))),d.push((0,oi.Y)(hc,{position:s,bezierModel:t,graphModel:e,type:"sNext"},"".concat(o,"_ePre"))),d.push((0,oi.Y)(Fs,uc({x1:u.x,y1:u.y,x2:l.x,y2:l.y},c))),d.push((0,oi.Y)(hc,{position:l,bezierModel:t,graphModel:e,type:"ePre"},"".concat(o,"_sNext"))),d},e.prototype.selectedBezierEdge=function(){for(var t=this.props.graphModel,e=t.edges,n=[],o=0;o<e.length;o++){var r=e[o];r.isSelected&&r.modelType===wi.BEZIER_EDGE&&r.draggable&&n.push(this.getBezierAdjust(r,t))}return n},e.prototype.render=function(){return(0,oi.Y)("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=cc([Ip],e),e}(r.uA),fc=n(72511),vc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vc(e,t),e.prototype.render=function(){var t=this.props.background;return(0,oi.Y)("div",{className:"lf-background",children:(0,oi.Y)("div",{style:(0,fc.A)(t)?t:{},className:"lf-background-area"})})},e=gc([Ip],e),e}(r.uA),mc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},xc=function(t){function e(e){var n=t.call(this,e)||this;return n.id=Ns(),n.gridOptions=n.props.graphModel.grid,n}return mc(e,t),e.prototype.renderDot=function(){var t=this.gridOptions,e=t.config,n=t.size,o=void 0===n?1:n,r=t.visible,i=null!==e&&void 0!==e?e:{},a=i.color,s=i.thickness,l=void 0===s?2:s,u=Math.min(Math.max(2,l),o/4),c=r?1:0;return(0,oi.FD)("g",{fill:a,opacity:c,children:[(0,oi.Y)("circle",{cx:0,cy:0,r:u/2}),(0,oi.Y)("circle",{cx:0,cy:o,r:u/2}),(0,oi.Y)("circle",{cx:o,cy:0,r:u/2}),(0,oi.Y)("circle",{cx:o,cy:o,r:u/2})]})},e.prototype.renderMesh=function(){var t=this.gridOptions,e=t.config,n=t.size,o=void 0===n?1:n,r=t.visible,i=null!==e&&void 0!==e?e:{},a=i.color,s=i.thickness,l=void 0===s?1:s,u=Math.min(Math.max(1,l),o/2),c="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),d=r?1:0;return(0,oi.Y)("path",{d:c,stroke:a,strokeWidth:u/2,opacity:d,fill:"transparent"})},e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=this.gridOptions,n=e.type,o=e.size,r=void 0===o?1:o,i=t.SCALE_X,a=t.SKEW_Y,s=t.SKEW_X,l=t.SCALE_Y,u=t.TRANSLATE_X,c=t.TRANSLATE_Y,d=[i,a,s,l,u,c].join(","),h="matrix(".concat(d,")");return(0,oi.Y)("div",{className:"lf-grid",children:(0,oi.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[(0,oi.Y)("defs",{children:(0,oi.FD)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:h,x:"0",y:"0",width:r,height:r,children:["dot"===n&&this.renderDot(),"mesh"===n&&this.renderMesh()]})}),(0,oi.Y)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=bc([Ip],e),e}(r.uA);(function(t){function e(e){var n=(0,ai.A)(t.defaultProps);return"number"===typeof e?(0,li.A)(n,{size:e}):"boolean"===typeof e?(0,li.A)(n,{visible:e}):(0,li.A)(n,e)}t.defaultProps={size:Mi,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},t.getGridOptions=e})(xc||(xc={}));var wc,_c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ec=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ac=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _c(e,t),e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=t.getTransformStyle().transform,n=this.props.children;return(0,oi.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:(0,oi.Y)("g",{transform:e,children:n})})},e=Ec([Ip],e),e}(r.uA),Sc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oc=function(){return Oc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Oc.apply(this,arguments)},Cc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sc(e,t),e.prototype.getNodesOutline=function(){var t=this.props.graphModel,e=t.nodes,n=t.editConfigModel,o=n.hoverOutline,r=n.nodeSelectedOutline,i=[];return e.forEach((function(t){if(t.isHovered||t.isSelected){var e=t.isHovered,n=t.isSelected,a=t.x,s=t.y,l=t.width,u=t.height;if(r&&n||o&&e){var c=t.getOutlineStyle(),d={};if(Object.keys(c).forEach((function(t){"hover"!==t&&(d[t]=c[t])})),e){var h=c.hover;d=Oc(Oc({},d),h)}i.push((0,oi.Y)(Gs,Oc({transform:t.transform,className:"lf-outline-node",x:a,y:s,width:l+10,height:u+10},d)))}}})),i},e.prototype.getEdgeOutline=function(){for(var t=this.props.graphModel,e=t.edges,n=t.editConfigModel,o=n.edgeSelectedOutline,r=n.hoverOutline,i=[],a=0;a<e.length;a++){var s=e[a];(o&&s.isSelected||r&&s.isHovered)&&(s.modelType===wi.LINE_EDGE?i.push(this.getLineOutline(s)):s.modelType===wi.POLYLINE_EDGE?i.push(this.getPolylineOutline(s)):s.modelType===wi.BEZIER_EDGE&&i.push(this.getBezierOutline(s)))}return i},e.prototype.getLineOutline=function(t){var e=t.startPoint,n=t.endPoint,o=(e.x+n.x)/2,r=(e.y+n.y)/2,i=Math.abs(e.x-n.x)+10,a=Math.abs(e.y-n.y)+10,s=t.getOutlineStyle();return(0,oi.Y)(Gs,Oc({className:"lf-outline-edge",x:o,y:r,width:i,height:a},s))},e.prototype.getPolylineOutline=function(t){var e=t.points,n=ba(e),o=Zi(n,8),r=o.x,i=o.y,a=o.width,s=o.height,l=t.getOutlineStyle();return(0,oi.Y)(Gs,Oc({className:"lf-outline",x:r,y:i,width:a,height:s},l))},e.prototype.getBezierOutline=function(t){var e=t.path,n=Sa(e),o=Zi(n,8),r=o.x,i=o.y,a=o.width,s=o.height,l=t.getOutlineStyle();return(0,oi.Y)(Gs,Oc({className:"lf-outline",x:r,y:i,width:a,height:s},l))},e.prototype.render=function(){return(0,oi.FD)("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=Cc([Ip],e),e}(r.uA),Mc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tc=function(){return Tc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Tc.apply(this,arguments)},Pc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Dc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mc(e,t),e.prototype.render=function(){var t=this.props.snaplineModel,e=null!==t&&void 0!==t?t:{},n=e.position,o=e.isShowHorizontal,r=e.isShowVertical,i=null===t||void 0===t?void 0:t.getStyle(),a=null!==n&&void 0!==n?n:{},s=a.x,l=void 0===s?0:s,u=a.y,c=void 0===u?0:u,d=Tc(Tc({x1:-1e5,y1:c,x2:1e5,y2:c},i),{stroke:o?null===i||void 0===i?void 0:i.stroke:"none"}),h=Tc(Tc({x1:l,y1:-1e5,x2:l,y2:1e5},i),{stroke:r?null===i||void 0===i?void 0:i.stroke:"none"});return(0,oi.FD)("g",{className:"lf-snapline",children:[(0,oi.Y)(zs,Tc({},d)),(0,oi.Y)(zs,Tc({},h))]})},e=Pc([Ip],e),e}(r.uA),kc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kc(e,t),e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var t=this.props,e=t.tool,n=t.graphModel,o=n.textEditElement,i=e.getTools(),a=i.map((function(t){return(0,r.n)(t,{textEditElement:o,graphModel:n,lf:e.instance})}));return e.components=a,a},e.prototype.triggerToolRender=function(){var t=this.props,e=t.tool,n=t.graphModel,o=document.querySelector("#ToolOverlay_".concat(n.flowId)),r=e.getInstance();r.components.forEach((function(t){return t(r,o)})),r.components=[]},e.prototype.render=function(){var t=this.props.graphModel;return(0,oi.Y)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(t.flowId),children:this.getTools()})},e=Rc([Ip],e),e}(r.uA),Lc=function(){return Lc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Lc.apply(this,arguments)},jc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Bc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hc=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Fc=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},zc=function(){function t(t){var e,n,o=this;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Ei.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var r=t.container,i=t.partial,a=t.background,s=void 0===a?{}:a,l=t.grid,u=t.idGenerator,c=t.edgeGenerator,d=t.animation,h=t.customTrajectory;this.rootEl=r,this.partial=!!i,this.background=s,"object"===typeof l&&t.snapGrid&&(this.gridSize=l.size||1),this.theme=Bl(t.style),this.grid=xc.getGridOptions(null!==l&&void 0!==l&&l),this.edgeType=t.edgeType||"polyline",this.animation=vi(d),this.overlapMode=t.overlapMode||Ei.DEFAULT,this.width=null!==(e=t.width)&&void 0!==e?e:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=(0,ii.A)(t.width),this.height=null!==(n=t.height)&&void 0!==n?n:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=(0,ii.A)(t.height);var p=new ResizeObserver((0,tc.A)((function(t){var e,n;try{for(var r=Bc(t),i=r.next();!i.done;i=r.next()){var a=i.value;a.target===o.rootEl&&(o.resize(),o.eventCenter.emit("graph:resize",{target:o.rootEl,contentRect:a.contentRect}))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}),16));p.observe(this.rootEl),this.waitCleanEffects.push((function(){p.disconnect()})),this.eventCenter=new oc,this.editConfigModel=new Qu(t),this.transformModel=new Kc(this.eventCenter,t),this.flowId=Ns(),this.idGenerator=u,this.edgeGenerator=Pa(this,c),this.customTrajectory=h}return Object.defineProperty(t.prototype,"nodesMap",{get:function(){return this.nodes.reduce((function(t,e,n){return t[e.id]={index:n,model:e},t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edgesMap",{get:function(){return this.edges.reduce((function(t,e,n){return t[e.id]={index:n,model:e},t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelsMap",{get:function(){return Fc(Fc([],Hc(this.nodes),!1),Hc(this.edges),!1).reduce((function(t,e){return t[e.id]=e,t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sortElements",{get:function(){for(var t=Fc(Fc([],Hc(this.nodes),!1),Hc(this.edges),!1).sort((function(t,e){return t.zIndex-e.zIndex})),e=[],n=[-Ci,-Ci],o=[this.width+Ci,this.height+Ci],r=0;r<t.length;r++){var i=t[r];i.visible&&(!this.partial||i.isSelected||this.isElementInArea(i,n,o,!1,!1))&&e.push(i)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textEditElement",{get:function(){var t=this.nodes.find((function(t){return t.state===bi.TEXT_EDIT})),e=this.edges.find((function(t){return t.state===bi.TEXT_EDIT}));return t||e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectElements",{get:function(){var t=new Map;return this.nodes.forEach((function(e){e.isSelected&&t.set(e.id,e)})),this.edges.forEach((function(e){e.isSelected&&t.set(e.id,e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectNodes",{get:function(){var t=[];return this.nodes.forEach((function(e){e.isSelected&&t.push(e)})),t},enumerable:!1,configurable:!0}),t.prototype.getAreaElement=function(t,e,n,o,r){var i=this;void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!1);var a=[];return(0,ri.A)(Fc(Fc([],Hc(this.nodes),!1),Hc(this.edges),!1),(function(s){var l=i.isElementInArea(s,t,e,n,o);r&&!s.visible||!l||a.push(s)})),a},t.prototype.getModel=function(t){return this.modelMap.get(t)},t.prototype.getNodeModelById=function(t){var e;return this.fakeNode&&t===this.fakeNode.id?this.fakeNode:null===(e=this.nodesMap[t])||void 0===e?void 0:e.model},t.prototype.getPointByClient=function(t){var e=t.x,n=t.y,o=this.rootEl.getBoundingClientRect(),r={x:e-o.left,y:n-o.top},i=Hc(this.transformModel.HtmlPointToCanvasPoint([r.x,r.y]),2),a=i[0],s=i[1],l={x:a,y:s};return{domOverlayPosition:r,canvasOverlayPosition:l}},t.prototype.isElementInArea=function(t,e,n,o,r){var i;if(void 0===o&&(o=!0),void 0===r&&(r=!0),t.BaseType===xi.NODE){for(var a=ss(t),s=a.minX,l=a.minY,u=a.maxX,c=a.maxY,d=[{x:s,y:l},{x:u,y:l},{x:u,y:c},{x:s,y:c}],h=r,p=0;p<d.length;p++){var f=d[p],v=f.x,g=f.y;if(i=Hc(this.transformModel.CanvasPointToHtmlPoint([v,g]),2),v=i[0],g=i[1],Ba([v,g],e,n)!==r){h=!r;break}}return h}if(t.BaseType===xi.EDGE){var y=t.startPoint,m=t.endPoint,b=this.transformModel.CanvasPointToHtmlPoint([y.x,y.y]),x=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),w=Ba(b,e,n),_=Ba(x,e,n);return o?w&&_:w||_}return!1},t.prototype.graphDataToModel=function(t){var e=this;if(t)if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),t.nodes?this.nodes=(0,Ds.A)(t.nodes,(function(t){var n=e.getModelAfterSnapToGrid(t);return e.elementsModelMap.set(n.id,n),e.nodeModelMap.set(n.id,n),n})):this.nodes=[],t.edges){var n=this.edgeType;this.edges=(0,Ds.A)(t.edges,(function(t){var o,r=e.getModel(null!==(o=t.type)&&void 0!==o?o:n);if(!r)throw new Error("".concat(t.type,""));var i=new r(t,e);return e.edgeModelMap.set(i.id,i),e.elementsModelMap.set(i.id,i),i}))}else this.edges=[];else this.clearData()},t.prototype.modelToGraphData=function(){var t=[];this.edges.forEach((function(e){var n=e.getData();n&&!e.virtual&&t.push(n)}));var e=[];return this.nodes.forEach((function(t){var n=t.getData();n&&!t.virtual&&e.push(n)})),{nodes:e,edges:t}},t.prototype.modelToHistoryData=function(){for(var t=!1,e=[],n=0;n<this.nodes.length;n++){var o=this.nodes[n];if(o.isDragging){t=!0;break}e.push(o.getHistoryData())}if(t)return!1;for(var r=!1,i=[],a=0;a<this.edges.length;a++){var s=this.edges[a];if(s.isDragging){r=!0;break}i.push(s.getHistoryData())}return!r&&{nodes:e,edges:i}},t.prototype.getEdgeModelById=function(t){var e;return null===(e=this.edgesMap[t])||void 0===e?void 0:e.model},t.prototype.getElement=function(t){return this.modelsMap[t]},t.prototype.getNodeEdges=function(t){for(var e=[],n=0;n<this.edges.length;n++){var o=this.edges[n],r=o.sourceNodeId===t,i=o.targetNodeId===t;(r||i)&&e.push(o)}return e},t.prototype.getSelectElements=function(t){void 0===t&&(t=!0);var e=this.selectElements,n={nodes:[],edges:[]};return e.forEach((function(o){if(o.BaseType===xi.NODE&&n.nodes.push(o.getData()),o.BaseType===xi.EDGE){var r=o.getData(),i=e.get(r.sourceNodeId)&&e.get(r.targetNodeId);(t||i)&&n.edges.push(r)}})),n},t.prototype.updateAttributes=function(t,e){var n=this.getElement(t);null===n||void 0===n||n.updateAttributes(e)},t.prototype.changeNodeId=function(t,e){return e||(e=Ns()),this.nodesMap[e]?(console.warn("".concat(e,", ")),""):this.nodesMap[t]?(this.edges.forEach((function(n){n.sourceNodeId===t&&(n.sourceNodeId=e),n.targetNodeId===t&&(n.targetNodeId=e)})),this.nodesMap[t].model.id=e,this.nodesMap[e]=this.nodesMap[t],e):(console.warn("".concat(t,", ")),"")},t.prototype.changeEdgeId=function(t,e){return e||(e=Ns()),this.edgesMap[e]?(console.warn(": ".concat(e,", ")),""):this.edgesMap[t]?(this.edges.forEach((function(n){n.id===t&&n.changeEdgeId(e)})),e):(console.warn(": ".concat(e,", ")),"")},t.prototype.getTextModel=function(t){var e=this.editConfigModel,n=e.textMode,o=e.nodeTextMode,r=e.edgeTextMode;return t.BaseType===xi.NODE?t.textMode||o||n||Si.TEXT:t.BaseType===xi.EDGE?t.textMode||r||n||Si.TEXT:void 0},t.prototype.setTextMode=function(t,e){this.editConfigModel.updateEditConfig({textMode:t})},t.prototype.setFakeNode=function(t){this.fakeNode=t},t.prototype.removeFakeNode=function(){this.fakeNode=null},t.prototype.setModel=function(t,e){return this.modelMap.set(t,e)},t.prototype.toFront=function(t){var e,n,o,r=(null===(e=this.nodesMap[t])||void 0===e?void 0:e.model)||(null===(n=this.edgesMap[t])||void 0===n?void 0:n.model);r&&(this.overlapMode===Ei.DEFAULT&&(null===(o=this.topElement)||void 0===o||o.setZIndex(),r.setZIndex(Ni),this.topElement=r),this.overlapMode===Ei.INCREASE&&this.setElementZIndex(t,"top"))},t.prototype.setElementZIndex=function(t,e){var n,o,r=(null===(n=this.nodesMap[t])||void 0===n?void 0:n.model)||(null===(o=this.edgesMap[t])||void 0===o?void 0:o.model);if(r){var i=void 0;"number"===typeof e?i=e:("top"===e&&(i=Wl()),"bottom"===e&&(i=Yl())),r.setZIndex(i)}},t.prototype.deleteNode=function(t){var e=this.nodesMap[t].model,n=e.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(_i.NODE_DELETE,{data:n,model:e})},t.prototype.addNode=function(t,e,n){void 0===e&&(e=_i.NODE_ADD);var o=mi(t),r=o.id;r&&this.nodesMap[r]&&delete o.id;var i=this.getModelAfterSnapToGrid(o);this.nodes.push(i);var a=i.getData(),s={data:a};return n&&(s.e=n),this.eventCenter.emit(e,s),i},t.prototype.getModelAfterSnapToGrid=function(t){var e=this.getModel(t.type),n=this.editConfigModel.snapGrid;if(!e)throw new Error("".concat(t.type,""));var o=t.x,r=t.y;o&&r&&(t.x=Ia(o,this.gridSize,n),t.y=Ia(r,this.gridSize,n),"object"===typeof t.text&&null!==t.text&&(t.text.x+=t.x-o,t.text.y+=t.y-r));var i=new e(t,this);return this.nodeModelMap.set(i.id,i),this.elementsModelMap.set(i.id,i),i},t.prototype.cloneNode=function(t){var e=this.getNodeModelById(t),n=null===e||void 0===e?void 0:e.getData();if(n){n.x+=30,n.y+=30,n.id="","object"===typeof n.text&&null!==n.text&&(n.text.x+=30,n.text.y+=30);var o=this.addNode(n);return o.setSelected(!0),null===e||void 0===e||e.setSelected(!1),o.getData()}},t.prototype.moveNode=function(t,e,n,o){var r;void 0===o&&(o=!1);var i=this.nodesMap[t];if(i){var a=i.model;r=Hc(a.getMoveDistance(e,n,o),2),e=r[0],n=r[1],this.moveEdge(t,e,n)}else console.warn("id".concat(t,""))},t.prototype.moveNode2Coordinate=function(t,e,n,o){void 0===o&&(o=!1);var r=this.nodesMap[t];if(r){var i=r.model,a=i.x,s=i.y,l=e-a,u=n-s;this.moveNode(t,l,u,o)}else console.warn("id".concat(t,""))},t.prototype.editText=function(t){this.setElementStateById(t,bi.TEXT_EDIT)},t.prototype.addEdge=function(t){var e=mi(t),n=e.type;n||(n=this.edgeType),e.id&&this.edgesMap[e.id]&&delete e.id;var o=this.getModel(n);if(!o)throw new Error("".concat(n,""));var r=new o(Lc(Lc({},e),{type:n}),this);this.edgeModelMap.set(r.id,r),this.elementsModelMap.set(r.id,r);var i=r.getData();return this.edges.push(r),this.eventCenter.emit(_i.EDGE_ADD,{data:i}),r},t.prototype.moveEdge=function(t,e,n){for(var o=0;o<this.edges.length;o++){var r=this.edges[o],i=r.textPosition,a=i.x,s=i.y,l=this.edges[o].sourceNodeId===t,u=this.edges[o].targetNodeId===t;l&&r.moveStartPoint(e,n),u&&r.moveEndPoint(e,n),(l||u)&&this.handleEdgeTextMove(r,a,s)}},t.prototype.handleEdgeTextMove=function(t,e,n){var o;if(t.customTextPosition)t.resetTextPosition();else{if(t.modelType===wi.POLYLINE_EDGE&&(null===(o=t.text)||void 0===o?void 0:o.value)){var r=t.text,i=Na(r,t.points);t.moveText(i.x-r.x,i.y-r.y)}var a=t.textPosition,s=a.x,l=a.y;t.moveText(s-e,l-n)}},t.prototype.deleteEdgeBySourceAndTarget=function(t,e){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===t&&this.edges[n].targetNodeId===e){var o=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(_i.EDGE_DELETE,{data:o})}},t.prototype.deleteEdgeById=function(t){var e=this.edgesMap[t];if(e){var n=this.edgesMap[t].index,o=this.edgesMap[t].model.getData();this.edges.splice(n,1),this.eventCenter.emit(_i.EDGE_DELETE,{data:o})}},t.prototype.deleteEdgeBySource=function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].sourceNodeId===t){var n=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(_i.EDGE_DELETE,{data:n})}},t.prototype.deleteEdgeByTarget=function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].targetNodeId===t){var n=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(_i.EDGE_DELETE,{data:n})}},t.prototype.setElementStateById=function(t,e,n){this.nodes.forEach((function(o){o.id===t?o.setElementState(e,n):o.setElementState(bi.DEFAULT)})),this.edges.forEach((function(o){o.id===t?o.setElementState(e,n):o.setElementState(bi.DEFAULT)}))},t.prototype.updateText=function(t,e){var n=(0,ci.A)(Fc(Fc([],Hc(this.nodes),!1),Hc(this.edges),!1),(function(e){return e.id===t}));null===n||void 0===n||n.updateText(e)},t.prototype.selectNodeById=function(t,e){var n;void 0===e&&(e=!1),e||this.clearSelectElements();var o=null===(n=this.nodesMap[t])||void 0===n?void 0:n.model;null===o||void 0===o||o.setSelected(!0)},t.prototype.selectEdgeById=function(t,e){var n;void 0===e&&(e=!1),e||this.clearSelectElements();var o=null===(n=this.edgesMap[t])||void 0===n?void 0:n.model;null===o||void 0===o||o.setSelected(!0)},t.prototype.selectElementById=function(t,e){void 0===e&&(e=!1),e||this.clearSelectElements();var n=this.getElement(t);null===n||void 0===n||n.setSelected(!0)},t.prototype.clearSelectElements=function(){var t;this.selectElements.forEach((function(t){null===t||void 0===t||t.setSelected(!1)})),this.selectElements.clear(),this.overlapMode===Ei.DEFAULT&&(null===(t=this.topElement)||void 0===t||t.setZIndex())},t.prototype.moveNodes=function(t,e,n,o){var r,i,a,s=this;void 0===o&&(o=!1);for(var l=t.reduce((function(t,r){var i,a=null===(i=s.nodesMap[r])||void 0===i?void 0:i.model;return a&&(t[r]=a.getMoveDistance(e,n,o)),t}),{}),u=0;u<this.edges.length;u++){var c=this.edges[u],d=c.textPosition,h=d.x,p=d.y,f=l[c.sourceNodeId],v=l[c.targetNodeId],g=void 0,y=void 0;f&&v&&c.modelType===wi.POLYLINE_EDGE?(r=Hc(f,2),g=r[0],y=r[1],c.updatePointsList(g,y)):(f&&(i=Hc(f,2),g=i[0],y=i[1],c.moveStartPoint(g,y)),v&&(a=Hc(v,2),g=a[0],y=a[1],c.moveEndPoint(g,y))),(f||v)&&this.handleEdgeTextMove(c,h,p)}},t.prototype.addNodeMoveRules=function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)},t.prototype.addNodeResizeRules=function(t){this.nodeResizeRules.includes(t)||this.nodeResizeRules.push(t)},t.prototype.setDefaultEdgeType=function(t){this.edgeType=t},t.prototype.changeNodeType=function(t,e){var n=this.getNodeModelById(t);if(n){var o=n.getData();o.type=e;var r=this.getModel(e);if(!r)throw new Error("".concat(e,""));var i=new r(o,this);this.nodes.splice(this.nodesMap[t].index,1,i);var a=this.getNodeEdges(t);a.forEach((function(e){if(e.sourceNodeId===t){var n=vs(i,e.startPoint,i.width,i.height);e.updateStartPoint(n)}if(e.targetNodeId===t){n=vs(i,e.endPoint,i.width,i.height);e.updateEndPoint(n)}}))}else console.warn("id".concat(t,""))},t.prototype.changeEdgeType=function(t,e){var n=this.getEdgeModelById(t);if(n){if(n.type!==e){var o=n.getData();o.type=e;var r=this.getModel(e);if(!r)throw new Error("".concat(e,""));delete o.pointsList;var i=new r(o,this);this.edges.splice(this.edgesMap[t].index,1,i)}}else console.warn("id".concat(t,""))},t.prototype.getNodeIncomingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.targetNodeId===t&&e.push(n)})),e},t.prototype.getNodeOutgoingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.sourceNodeId===t&&e.push(n)})),e},t.prototype.getAnchorIncomingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.targetAnchorId===t&&e.push(n)})),e},t.prototype.getAnchorOutgoingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.sourceAnchorId===t&&e.push(n)})),e},t.prototype.getNodeIncomingNode=function(t){var e=this,n=[];return this.edges.forEach((function(o){var r;o.targetNodeId===t&&n.push(null===(r=e.nodesMap[o.sourceNodeId])||void 0===r?void 0:r.model)})),n},t.prototype.getNodeOutgoingNode=function(t){var e=this,n=[];return this.edges.forEach((function(o){o.sourceNodeId===t&&n.push(e.nodesMap[o.targetNodeId].model)})),n},t.prototype.setTheme=function(t){this.theme=Hl(Lc(Lc({},this.theme),t))},t.prototype.updateGridOptions=function(t){(0,hi.A)(this.grid,t)},t.prototype.updateGridSize=function(t){this.gridSize=t},t.prototype.updateBackgroundOptions=function(t){(0,qu.A)(t)||(0,qu.A)(this.background)?this.background=t:this.background=Lc(Lc({},this.background),t)},t.prototype.resize=function(t,e){this.width=null!==t&&void 0!==t?t:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=(0,ii.A)(t),this.height=null!==e&&void 0!==e?e:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=(0,ii.A)(e),this.width&&this.height||console.warn("containerDOM@see https://github.com/didi/LogicFlow/issues/675")},t.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},t.prototype.getVirtualRectSize=function(){var t=this.nodes,e=[],n=[];t.forEach((function(t){var o=t.x,r=t.y,i=t.width,a=t.height,s=t.getNodeStyle().strokeWidth,l=void 0===s?0:s,u=o+i/2+l,c=o-i/2-l,d=r+a/2+l,h=r-a/2-l;e=e.concat([u,c].filter((function(t){return!Number.isNaN(t)}))),n=n.concat([d,h].filter((function(t){return!Number.isNaN(t)})))}));var o=Math.min.apply(Math,Fc([],Hc(e),!1)),r=Math.max.apply(Math,Fc([],Hc(e),!1)),i=Math.min.apply(Math,Fc([],Hc(n),!1)),a=Math.max.apply(Math,Fc([],Hc(n),!1)),s=r-o||0,l=a-i||0,u=o+s/2,c=i+l/2;return{width:s,height:l,x:u,y:c}},t.prototype.translateCenter=function(){var t=this,e=t.nodes,n=t.width,o=t.height,r=t.rootEl,i=t.transformModel;if(e.length){var a=n||r.clientWidth,s=o||r.clientHeight,l=this.getVirtualRectSize(),u=l.x,c=l.y;i.focusOn(u,c,a,s)}},t.prototype.fitView=function(t,e){void 0===t&&(t=20),void 0===e&&(e=20);var n=this,o=n.nodes,r=n.width,i=n.height,a=n.rootEl,s=n.transformModel;if(o.length){var l=r||a.clientWidth,u=i||a.clientHeight,c=this.getVirtualRectSize(),d=c.width,h=c.height,p=c.x,f=c.y,v=(d+e)/l,g=(h+t)/u,y=1/Math.max(v,g),m=[l/2,u/2];s.zoom(y,m),s.focusOn(p,f,l,u)}},t.prototype.openEdgeAnimation=function(t){var e=this.getEdgeModelById(t);null===e||void 0===e||e.openEdgeAnimation()},t.prototype.closeEdgeAnimation=function(t){var e=this.getEdgeModelById(t);null===e||void 0===e||e.closeEdgeAnimation()},t.prototype.getPartial=function(){return this.partial},t.prototype.setPartial=function(t){this.partial=t},t.prototype.destroy=function(){try{this.waitCleanEffects.forEach((function(t){t()}))}catch(t){console.warn("error on destroy GraphModel",t)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},jc([ht],t.prototype,"width",void 0),jc([ht],t.prototype,"height",void 0),jc([ht],t.prototype,"grid",void 0),jc([ht],t.prototype,"edgeType",void 0),jc([ht],t.prototype,"nodes",void 0),jc([ht],t.prototype,"edges",void 0),jc([ht],t.prototype,"fakeNode",void 0),jc([ht],t.prototype,"overlapMode",void 0),jc([ht],t.prototype,"background",void 0),jc([ht],t.prototype,"gridSize",void 0),jc([ht],t.prototype,"transformModel",void 0),jc([ht],t.prototype,"editConfigModel",void 0),jc([ht],t.prototype,"partial",void 0),jc([mt],t.prototype,"nodesMap",null),jc([mt],t.prototype,"edgesMap",null),jc([mt],t.prototype,"modelsMap",null),jc([mt],t.prototype,"sortElements",null),jc([mt],t.prototype,"textEditElement",null),jc([mt],t.prototype,"selectElements",null),jc([mt],t.prototype,"selectNodes",null),jc([Oe],t.prototype,"setTextMode",null),jc([Oe],t.prototype,"setFakeNode",null),jc([Oe],t.prototype,"removeFakeNode",null),jc([Oe],t.prototype,"setModel",null),jc([Oe],t.prototype,"toFront",null),jc([Oe],t.prototype,"setElementZIndex",null),jc([Oe],t.prototype,"deleteNode",null),jc([Oe],t.prototype,"addNode",null),jc([Oe],t.prototype,"cloneNode",null),jc([Oe],t.prototype,"moveNode",null),jc([Oe],t.prototype,"moveNode2Coordinate",null),jc([Oe],t.prototype,"editText",null),jc([Oe],t.prototype,"addEdge",null),jc([Oe],t.prototype,"moveEdge",null),jc([Oe],t.prototype,"deleteEdgeBySourceAndTarget",null),jc([Oe],t.prototype,"deleteEdgeById",null),jc([Oe],t.prototype,"deleteEdgeBySource",null),jc([Oe],t.prototype,"deleteEdgeByTarget",null),jc([Oe],t.prototype,"setElementStateById",null),jc([Oe],t.prototype,"updateText",null),jc([Oe],t.prototype,"selectNodeById",null),jc([Oe],t.prototype,"selectEdgeById",null),jc([Oe],t.prototype,"selectElementById",null),jc([Oe],t.prototype,"clearSelectElements",null),jc([Oe],t.prototype,"moveNodes",null),jc([Oe],t.prototype,"setDefaultEdgeType",null),jc([Oe],t.prototype,"changeNodeType",null),jc([Oe],t.prototype,"changeEdgeType",null),jc([Oe],t.prototype,"getNodeIncomingEdge",null),jc([Oe],t.prototype,"getNodeOutgoingEdge",null),jc([Oe],t.prototype,"getAnchorIncomingEdge",null),jc([Oe],t.prototype,"getAnchorOutgoingEdge",null),jc([Oe],t.prototype,"getNodeIncomingNode",null),jc([Oe],t.prototype,"getNodeOutgoingNode",null),jc([Oe],t.prototype,"setTheme",null),jc([Oe],t.prototype,"resize",null),jc([Oe],t.prototype,"clearData",null),jc([Oe],t.prototype,"translateCenter",null),jc([Oe],t.prototype,"fitView",null),jc([Oe],t.prototype,"openEdgeAnimation",null),jc([Oe],t.prototype,"closeEdgeAnimation",null),jc([Oe],t.prototype,"setPartial",null),t}(),Wc=function(){return Wc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Wc.apply(this,arguments)},Yc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Gc=function(){function t(t){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=t}return t.prototype.getStyle=function(){return Wc({},this.graphModel.theme.snapline)},t.prototype.getCenterSnapLine=function(t,e){for(var n=t.x,o=t.y,r=!1,i=!1,a=0;a<e.length;a++){var s=e[a];if(s.id!==t.id&&(n===s.x&&(r=!0),o===s.y&&(i=!0),r&&i))break}return{isShowVertical:r,isShowHorizontal:i,position:{x:n,y:o}}},t.prototype.getHorizontalSnapline=function(t,e){var n,o=!1,r=0,i=t.id;if(i){var a=this.graphModel.fakeNode;if(a&&a.id===i)n=ss(a);else{var s=this.graphModel.getNodeModelById(i);s&&(n=ss(s))}}for(var l=0;l<e.length;l++){var u=e[l];if(u.id!==t.id){var c=ss(u);if(c.minY===(null===n||void 0===n?void 0:n.minY)||c.maxY===(null===n||void 0===n?void 0:n.minY)){o=!0,r=n.minY;break}if(c.minY===(null===n||void 0===n?void 0:n.maxY)||c.maxY===(null===n||void 0===n?void 0:n.maxY)){o=!0,r=n.maxY;break}}}return{isShowHorizontal:o,isShowVertical:this.isShowVertical,position:Wc(Wc({},this.position),{y:r})}},t.prototype.getVerticalSnapline=function(t,e){var n,o=!1,r=0,i=t.id;if(i){var a=this.graphModel.fakeNode;if(a&&a.id===i)n=ss(a);else{var s=this.graphModel.getNodeModelById(i);s&&(n=ss(s))}}for(var l=0;l<e.length;l++){var u=e[l];if(u.id!==t.id){var c=ss(u);if(c.minX===(null===n||void 0===n?void 0:n.minX)||c.maxX===(null===n||void 0===n?void 0:n.minX)){o=!0,r=n.minX;break}if(c.minX===(null===n||void 0===n?void 0:n.maxX)||c.maxX===(null===n||void 0===n?void 0:n.maxX)){o=!0,r=n.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:o,position:Wc(Wc({},this.position),{x:r})}},t.prototype.getSnapLinePosition=function(t,e){var n=this.getCenterSnapLine(t,e),o=n.isShowHorizontal,r=n.isShowVertical;if(!o){var i=this.getHorizontalSnapline(t,e);i.isShowHorizontal&&(n.isShowHorizontal=i.isShowHorizontal,n.position.y=i.position.y)}if(!r){var a=this.getVerticalSnapline(t,e);a.isShowVertical&&(n.isShowVertical=a.isShowVertical,n.position.x=a.position.x)}return n},t.prototype.setSnaplineInfo=function(t){var e=t.isShowHorizontal,n=t.isShowVertical,o=t.position;this.position=o,this.isShowHorizontal=e,this.isShowVertical=n},t.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},t.prototype.setNodeSnapLine=function(t){var e=this.graphModel.nodes,n=this.getSnapLinePosition(t,e);this.setSnaplineInfo(n)},Yc([ht],t.prototype,"isShowHorizontal",void 0),Yc([ht],t.prototype,"isShowVertical",void 0),Yc([ht],t.prototype,"position",void 0),Yc([Oe],t.prototype,"clearSnapline",null),Yc([Oe],t.prototype,"setNodeSnapLine",null),t}(),Xc=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Uc=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Vc={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},Kc=function(){function t(t,e){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=t;var n=e.stopMoveGraph,o=void 0!==n&&n;this.updateTranslateLimits(o)}return t.prototype.setZoomMiniSize=function(t){this.MINI_SCALE_SIZE=t},t.prototype.setZoomMaxSize=function(t){this.MAX_SCALE_SIZE=t},t.prototype.HtmlPointToCanvasPoint=function(t){var e=Uc(t,2),n=e[0],o=e[1];return[(n-this.TRANSLATE_X)/this.SCALE_X,(o-this.TRANSLATE_Y)/this.SCALE_Y]},t.prototype.CanvasPointToHtmlPoint=function(t){var e=Uc(t,2),n=e[0],o=e[1];return[n*this.SCALE_X+this.TRANSLATE_X,o*this.SCALE_Y+this.TRANSLATE_Y]},t.prototype.moveCanvasPointByHtml=function(t,e,n){var o=Uc(t,2),r=o[0],i=o[1];return[r+e/this.SCALE_X,i+n/this.SCALE_Y]},t.prototype.fixDeltaXY=function(t,e){return[t/this.SCALE_X,e/this.SCALE_Y]},t.prototype.getTransformStyle=function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}},t.prototype.zoom=function(t,e){void 0===t&&(t=!1);var n=this.SCALE_X,o=this.SCALE_Y;return"number"===typeof t?(n=t,o=t):t?(n+=this.ZOOM_SIZE,o+=this.ZOOM_SIZE):(n-=this.ZOOM_SIZE,o-=this.ZOOM_SIZE),n<this.MINI_SCALE_SIZE||n>this.MAX_SCALE_SIZE||(e&&(this.TRANSLATE_X-=(n-this.SCALE_X)*e[0],this.TRANSLATE_Y-=(o-this.SCALE_Y)*e[1]),this.SCALE_X=n,this.SCALE_Y=o,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")},t.prototype.emitGraphTransform=function(t){this.eventCenter.emit(_i.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},t.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},t.prototype.translate=function(t,e){this.TRANSLATE_X+t<=this.translateLimitMaxX&&this.TRANSLATE_X+t>=this.translateLimitMinX&&(this.TRANSLATE_X+=t),this.TRANSLATE_Y+e<=this.translateLimitMaxY&&this.TRANSLATE_Y+e>=this.translateLimitMinY&&(this.TRANSLATE_Y+=e),this.emitGraphTransform("translate")},t.prototype.focusOn=function(t,e,n,o){var r=Uc(this.CanvasPointToHtmlPoint([t,e]),2),i=r[0],a=r[1],s=Uc([n/2-i,o/2-a],2),l=s[0],u=s[1];this.TRANSLATE_X+=l,this.TRANSLATE_Y+=u,this.emitGraphTransform("focusOn")},t.prototype.updateTranslateLimits=function(t){var e;e=Uc(Array.isArray(t)&&4===t.length?t:Vc[t.toString()],4),this.translateLimitMinX=e[0],this.translateLimitMinY=e[1],this.translateLimitMaxX=e[2],this.translateLimitMaxY=e[3]},Xc([ht],t.prototype,"SCALE_X",void 0),Xc([ht],t.prototype,"SKEW_Y",void 0),Xc([ht],t.prototype,"SKEW_X",void 0),Xc([ht],t.prototype,"SCALE_Y",void 0),Xc([ht],t.prototype,"TRANSLATE_X",void 0),Xc([ht],t.prototype,"TRANSLATE_Y",void 0),Xc([ht],t.prototype,"ZOOM_SIZE",void 0),Xc([Oe],t.prototype,"zoom",null),Xc([Oe],t.prototype,"resetZoom",null),Xc([Oe],t.prototype,"translate",null),Xc([Oe],t.prototype,"focusOn",null),t}(),qc=n(42068),Zc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$c=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Jc=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Qc=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},td=function(t){function e(){var e=t.apply(this,Qc([],Jc(arguments),!1))||this;return e.handleResize=function(){var t=e.props,n=t.graphModel,o=t.options,r=n.width,i=n.height,a=n.isContainerWidth,s=n.isContainerHeight,l=r,u=i,c=!1;a&&(l=void 0,c=!0),s&&(u=void 0,c=!0),c&&n.resize(l,u),o.width=r,o.height=i},e.throttleResize=(0,qc.A)(e.handleResize,200),e}return Zc(e,t),e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(_i.GRAPH_UPDATED,{data:t})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(t,e,n){void 0===n&&(n="canvas-overlay");var o=this.props.getView,r=o(t.type);return r?(0,oi.Y)(r,{model:t,graphModel:e,overlay:n},t.id):null},e.prototype.render=function(){var t=this,e=this.props,n=e.graphModel,o=e.tool,r=e.options,i=e.dnd,a=e.snaplineModel,s={};r.width&&(s.width="".concat(n.width,"px")),r.height&&(s.height="".concat(n.height,"px"));var l=n.fakeNode,u=n.editConfigModel,c=n.background,d=u.adjustEdge;return(0,oi.FD)("div",{className:"lf-graph","flow-id":n.flowId,style:s,children:[(0,oi.FD)(sc,{graphModel:n,dnd:i,children:[(0,oi.Y)("g",{className:"lf-base",children:(0,Ds.A)(n.sortElements,(function(e){return t.getComponent(e,n)}))}),l?this.getComponent(l,n):""]}),(0,oi.FD)(Ac,{graphModel:n,children:[(0,oi.Y)(Nc,{graphModel:n}),d?(0,oi.Y)(pc,{graphModel:n}):"",!1!==r.snapline?(0,oi.Y)(Dc,{snaplineModel:a}):""]}),(0,oi.Y)(Ic,{graphModel:n,tool:o}),c&&(0,oi.Y)(yc,{background:c}),(0,oi.Y)(xc,{graphModel:n})]})},e=$c([Ip],e),e}(r.uA),ed=td,nd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),od=function(){return od=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},od.apply(this,arguments)},rd=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},id=function(t){function e(){var e=t.call(this)||this;return e.onDragStart=function(t){var n=t.event,o=e.props,r=o.anchorData,i=o.nodeModel,a=o.graphModel;a.selectNodeById(i.id),i.autoToFront&&a.toFront(i.id),a.eventCenter.emit(_i.ANCHOR_DRAGSTART,{data:r,e:n,nodeModel:i}),e.setState({startX:r.x,startY:r.y,endX:r.x,endY:r.y})},e.onDragging=function(t){var n=t.event,o=e.props,r=o.graphModel,i=o.nodeModel,a=o.anchorData,s=r.transformModel,l=r.eventCenter,u=r.width,c=r.height,d=r.editConfigModel,h=d.autoExpand,p=d.stopMoveGraph;if(n){var f=n.clientX,v=n.clientY,g=r.getPointByClient({x:f,y:v}),y=g.domOverlayPosition,m=y.x,b=y.y,x=g.canvasOverlayPosition,w=x.x,_=x.y;e.t&&Ps(e.t);var E=[],A=10;m<10?E=[A,0]:m+10>u?E=[-A,0]:b<10?E=[0,A]:b+10>c&&(E=[0,-A]),e.setState({endX:w,endY:_,dragging:!0}),e.moveAnchorEnd(w,_),E.length>0&&!p&&h&&(e.t=Ts((function(){var t=rd(E,2),n=t[0],o=t[1];s.translate(n,o);var r=e.state,i=r.endX,a=r.endY;e.setState({endX:i-n,endY:a-o}),e.moveAnchorEnd(i-n,a-o)}))),l.emit(_i.ANCHOR_DRAG,{data:a,e:n,nodeModel:i})}},e.onDragEnd=function(t){var n=t.event;e.t&&Ps(e.t);var o=e.checkEnd(n);e.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),e.sourceRuleResults.clear(),e.targetRuleResults.clear();var r=e.props,i=r.graphModel,a=r.nodeModel,s=r.anchorData;i.eventCenter.emit(_i.ANCHOR_DRAGEND,{data:s,e:n,nodeModel:a,edgeModel:null!==o&&void 0!==o?o:void 0})},e.checkEnd=function(t){var n,o=e.props,r=o.graphModel,i=o.nodeModel,a=o.anchorData,s=a.x,l=a.y,u=a.id,c=e.state,d=c.endX,h=c.endY,p=c.dragging,f=es({x:d,y:h},r);if(e.preTargetNode&&e.preTargetNode.state!==bi.DEFAULT&&e.preTargetNode.setElementState(bi.DEFAULT),p&&f&&f.node){var v=f.node,g=f.anchor.id,y="".concat(i.id,"_").concat(v.id,"_").concat(g,"_").concat(u),m=e.sourceRuleResults.get(y)||{},b=m.isAllPass,x=m.msg,w=e.targetRuleResults.get(y)||{},_=w.isAllPass,E=w.msg;if(b&&_){v.setElementState(bi.DEFAULT);var A=r.getNodeModelById(f.node.id),S=null===(n=r.edgeGenerator)||void 0===n?void 0:n.call(r,i.getData(),null===A||void 0===A?void 0:A.getData()),O=r.addEdge(od(od({},S),{sourceNodeId:i.id,sourceAnchorId:u,startPoint:{x:s,y:l},targetNodeId:f.node.id,targetAnchorId:f.anchor.id,endPoint:{x:f.anchor.x,y:f.anchor.y}})),C=e.props.anchorData;return r.eventCenter.emit(_i.ANCHOR_DROP,{data:C,e:t,nodeModel:i,edgeModel:O}),O}var N=v.getData();return r.eventCenter.emit(_i.CONNECTION_NOT_ALLOWED,{data:N,msg:E||x||""}),null}},e.sourceRuleResults=new Map,e.targetRuleResults=new Map,e.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},e.dragHandler=new Pi({onDragStart:e.onDragStart,onDragging:e.onDragging,onDragEnd:e.onDragEnd}),e}return nd(e,t),e.prototype.getAnchorShape=function(){var t=this.props,e=t.anchorData,n=t.style,o=t.node,r=o.getAnchorShape(e);if(r)return r;var i=e.x,a=e.y,s=od(od({},n),null===n||void 0===n?void 0:n.hover);return(0,oi.FD)("g",{children:[(0,oi.Y)($s,od({className:"lf-node-anchor-hover"},s,{x:i,y:a})),(0,oi.Y)($s,od({className:"lf-node-anchor"},n,{x:i,y:a}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var t=this.props.graphModel.customTrajectory;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var t=this.props,e=t.graphModel,n=e.getAnchorIncomingEdge,o=e.getAnchorOutgoingEdge,r=t.anchorData.id;return{incomingEdgeList:n(r),outgoingEdgeList:o(r)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(t,e){var n,o,r=this.props,i=r.graphModel,a=r.nodeModel,s=r.anchorData,l=es({x:t,y:e},i);if(l){var u=l.node,c=l.anchor.id;if(this.preTargetNode&&this.preTargetNode!==l.node&&this.preTargetNode.setElementState(bi.DEFAULT),s.id===c)return;this.preTargetNode=u;var d="".concat(a.id,"_").concat(u.id,"_").concat(c,"_").concat(s.id);if(!this.targetRuleResults.has(d)){var h=l.anchor,p=a.isAllowConnectedAsSource(u,s,h),f=u.isAllowConnectedAsTarget(a,s,h);this.sourceRuleResults.set(d,ms(p)),this.targetRuleResults.set(d,ms(f))}var v=(null!==(n=this.sourceRuleResults.get(d))&&void 0!==n?n:{}).isAllPass,g=(null!==(o=this.targetRuleResults.get(d))&&void 0!==o?o:{}).isAllPass;v&&g?u.setElementState(bi.ALLOW_CONNECT):u.setElementState(bi.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==bi.DEFAULT&&this.preTargetNode.setElementState(bi.DEFAULT)},e.prototype.isShowLine=function(){var t=this.state,e=t.startX,n=t.startY,o=t.endX,r=t.endY,i=rs(e,n,o,r);return i>10},e.prototype.render=function(){var t=this,e=this.state,n=e.startX,o=e.startY,r=e.endX,i=e.endY,a=this.props,s=a.anchorData.edgeAddable,l=a.edgeStyle;return(0,oi.FD)("g",{className:"lf-anchor",children:[(0,oi.Y)("g",{onMouseDown:function(e){!1!==s&&t.dragHandler.handleMouseDown(e)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(od({sourcePoint:{x:n,y:o},targetPoint:{x:r,y:i}},l)):(0,oi.Y)(Fs,od({x1:n,y1:o,x2:r,y2:i},l,{"pointer-events":"none"})))]})},e}(r.uA),ad=id,sd=n(22714),ld=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ud=function(){return ud=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ud.apply(this,arguments)},cd=function(t){function e(e){var n=t.call(this,e)||this;return n.style={},n.onDragging=function(t){var e,o=t.event,r=n.props,i=r.graphModel,a=r.nodeModel,s=r.eventCenter,l=i.selectNodes,u=a.x,c=a.y,d=o.clientX,h=o.clientY,p=i.getPointByClient({x:d,y:h}).canvasOverlayPosition,f=p.x,v=p.y,g=new Ya(f-u,v-c),y=(null===(e=n.normal)||void 0===e?void 0:e.angle(g))-n.defaultAngle,m=new $a(-u,-c).rotate(y).translate(u,c).toString();a.transform=m,a.rotate=y;var b=(0,Ds.A)(l,(function(t){return t.id}));-1===b.indexOf(a.id)&&(b=[a.id]);var x=(0,sd.A)(b,(function(t,e){var n=i.getNodeModelById(e);return t[e]=null===n||void 0===n?void 0:n.getMoveDistance(0,0,!1),t}),{});b.forEach((function(t){var e=i.getNodeEdges(t);e.forEach((function(t){if(x[t.sourceNodeId]){var e=i.getNodeModelById(t.sourceNodeId),n=e.anchors.find((function(e){return e.id===t.sourceAnchorId}));t.updateStartPoint(n)}if(x[t.targetNodeId]){e=i.getNodeModelById(t.targetNodeId),n=e.anchors.find((function(e){return e.id===t.targetAnchorId}));t.updateEndPoint(n)}}))})),s.emit(_i.NODE_ROTATE,{e:o,model:a,data:a.getData()})},n.style=e.style,n.stepperDrag=new Pi({onDragging:n.onDragging}),n}return ld(e,t),e.prototype.render=function(){var t=this,e=this.props.nodeModel,n=e.x,o=e.y,r=e.width,i=e.height,a=n+r/2+20,s=o-i/2-20;return this.normal=new Ya(1,0),this.defaultAngle=this.normal.angle(new Ya(a-n,s-o)),e.defaultAngle=this.defaultAngle,(0,oi.Y)("g",{className:"lf-rotate-control",children:(0,oi.Y)("g",{onMouseDown:function(e){t.stepperDrag.handleMouseDown(e)},children:(0,oi.Y)(Js,ud({},this.style,{cx:a,cy:s}))})})},e}(r.uA),dd=cd,hd=n(95399),pd=n.n(hd),fd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vd=function(){return vd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},vd.apply(this,arguments)},gd=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},yd=function(t){function e(e){var n=t.call(this)||this;n.mouseDownHandler=function(t){var e=n.props,o=e.draggable,r=e.model,i=e.graphModel,a=i.editConfigModel.nodeTextDraggable;(null!==o&&void 0!==o?o:a)&&(t.stopPropagation(),n.stepperDrag.model=r,n.stepperDrag.handleMouseDown(t))},n.onDragging=function(t){var e=t.deltaX,o=t.deltaY,r=n.props,i=r.model,a=r.graphModel.transformModel;if(e||o){var s=gd(a.fixDeltaXY(e,o),2),l=s[0],u=s[1];i.moveText(l,u)}},n.dbClickHandler=function(){var t=n.props,e=t.editable,o=t.graphModel.eventCenter,r=t.model;e&&r.setElementState(bi.TEXT_EDIT),o.emit(_i.TEXT_DBCLICK,{data:r.text,model:r})};var o=e.draggable;return n.stepperDrag=new Pi({onDragging:n.onDragging,step:1,eventType:"TEXT",isStopPropagation:o}),n}return fd(e,t),e.prototype.getShape=function(){var t=this.props,e=t.model,n=t.graphModel,o=n.editConfigModel,r=e.text,i=r.value,a=r.x,s=r.y,l=r.editable,u=r.draggable,c={x:a,y:s,className:"",value:i},d=e.getTextStyle(),h=o.nodeTextDraggable||u;return(0,oi.Y)(Ls,vd({},c,d,{className:pd()({"lf-element-text":l,"lf-text-draggable":!l&&h,"lf-text-disabled":!l&&!h}),model:e}))},e.prototype.render=function(){var t=this.props.model.text;if(t)return(0,oi.Y)("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(r.uA),md=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bd=function(){return bd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},bd.apply(this,arguments)},xd=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},wd=function(t){function e(e){var n=t.call(this,e)||this;return n.setHoverOn=function(){n.setState({isHovered:!0})},n.setHoverOff=function(){n.setState({isHovered:!1})},n.state={isHovered:!1},n}return md(e,t),e.prototype.getBackground=function(){var t=this.state.isHovered,e=this.props.model,n=e.text,o=e.getTextStyle(),r=o.background||{};if(t&&o.hover&&o.hover.background&&(r=bd(bd({},r),o.hover.background)),(null===n||void 0===n?void 0:n.value)&&"transparent"!==(null===r||void 0===r?void 0:r.fill)){var i=o.fontSize,a=o.textWidth,s=o.lineHeight,l=o.overflowMode,u=r.wrapPadding,c=null===n||void 0===n?void 0:n.value.split(/[\r\n]/g),d=c.length,h=n.x,p=n.y,f={};if("autoWrap"===l&&a){var v=gs({rows:c,style:{fontSize:"".concat(i,"px"),width:"".concat(a,"px"),lineHeight:s,padding:u},rowsLength:d,className:"lf-get-text-height"});f=bd(bd({},r),{x:h,y:p,width:a,height:v})}else{var g=Da({rows:c,rowsLength:d,fontSize:i}),y=g.width,m=g.height;if("ellipsis"===l&&(y=a,m=i+2),"string"===typeof r.wrapPadding){var b=r.wrapPadding.split(",").filter((function(t){return t.trim()})).map((function(t){return parseFloat(t.trim())}));if(b.length>0&&b.length<=4){if(1===b.length){var x=xd(b,1),w=x[0];b=[w,w,w,w]}else if(2===b.length){var _=xd(b,2),E=_[0],A=_[1];b=[E,A,E,A]}else if(3===b.length){var S=xd(b,3),O=S[0],C=(A=S[1],S[2]);b=[O,A,C,A]}var N=xd(b,4),M=N[0],T=N[1],P=N[2],D=N[3];y+=T+D,m+=M+P,h+=(T-D)/2,p+=(P-M)/2}}f=bd(bd({},r),{x:h-1,y:p-1,width:y,height:m})}return(0,oi.Y)(Gs,bd({},f))}return null},e.prototype.getShape=function(){var t=this.props.model,e=t.text,n=e.x,o=e.y,r=e.value;if(!r)return null;var i=t.getTextStyle(),a=bd({x:n,y:o,value:r,model:t,className:"lf-element-text"},i);return(0,oi.FD)("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),(0,oi.Y)(Ls,bd({},a))]})},e}(yd),_d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ed=function(){return Ed=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ed.apply(this,arguments)},Ad=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},Sd=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Od=function(t){function e(e){var n=t.call(this)||this;n.onDragStart=function(t){var e=t.event,o=n.props,r=o.model,i=o.graphModel;if(e){var a=i.getPointByClient({x:e.clientX,y:e.clientY}).canvasOverlayPosition,s=a.x,l=a.y;n.moveOffset={dx:r.x-s,dy:r.y-l}}},n.onDragging=function(t){var e,o,r,i,a=t.event,s=n.props,l=s.model,u=s.graphModel,c=u.editConfigModel,d=c.stopMoveGraph,h=c.autoExpand,p=c.snapGrid,f=u.transformModel,v=u.selectNodes,g=u.width,y=u.height,m=u.gridSize;l.isDragging=!0;var b=a,x=b.clientX,w=b.clientY,_=u.getPointByClient({x:x,y:w}).canvasOverlayPosition,E=_.x,A=_.y,S=Sd(f.CanvasPointToHtmlPoint([E,A]),2),O=S[0],C=S[1];if(E+=null!==(o=null===(e=n.moveOffset)||void 0===e?void 0:e.dx)&&void 0!==o?o:0,A+=null!==(i=null===(r=n.moveOffset)||void 0===r?void 0:r.dy)&&void 0!==i?i:0,E=Ia(E,m,p),A=Ia(A,m,p),g&&y){var N=O<0||C<0||O>g||C>y;if(!h||d||!N){var M=Sd(f.CanvasPointToHtmlPoint([E-l.width/2,A-l.height/2]),2),T=M[0],P=M[1],D=Sd(f.CanvasPointToHtmlPoint([E+l.width/2,A+l.height/2]),2),k=D[0],R=D[1],I=Math.max(m,20),L=[];T<0?L=[I,0]:k>u.width?L=[-I,0]:P<0?L=[0,I]:R>u.height&&(L=[0,-I]),n.t&&Ps(n.t);var j=v.map((function(t){return t.id}));-1===j.indexOf(l.id)&&(j=[l.id]),L.length>0&&!d&&h?n.t=Ts((function(){var t=Sd(L,2),e=t[0],n=t[1];f.translate(null!==e&&void 0!==e?e:0,null!==n&&void 0!==n?n:0);var o=-(null!==e&&void 0!==e?e:0)/f.SCALE_X,r=-(null!==n&&void 0!==n?n:0)/f.SCALE_X;u.moveNodes(j,o,r)})):u.moveNodes(j,E-l.x,A-l.y)}}else u.moveNode2Coordinate(l.id,E,A)},n.onDragEnd=function(){n.t&&Ps(n.t);var t=n.props.model;t.isDragging=!1},n.onMouseOut=function(t){yi()&&n.setHoverOff(t)},n.handleMouseUp=function(){var t=n.props.model;n.mouseUpDrag=t.isDragging},n.handleClick=function(t){var e=!1===n.mouseUpDrag;if(n.startTime){var o=n.props,r=o.model,i=o.graphModel;if(e){var a=r.getData(),s=i.getPointByClient({x:t.clientX,y:t.clientY}),l={data:a,e:t,position:s,isSelected:!1,isMultiple:!1},u=2===t.button,c=2===t.detail;if(!u){var d=i.editConfigModel,h=Ha(t,d);l.isMultiple=h,r.isSelected&&!c&&h?(l.isSelected=!1,r.setSelected(!1)):(i.selectNodeById(r.id,h),l.isSelected=!0,d.isSilentMode||n.toFront()),c?(d.nodeTextEdit&&r.text.editable&&d.textMode===Si.TEXT&&(r.setSelected(!1),i.setElementStateById(r.id,bi.TEXT_EDIT)),i.eventCenter.emit(_i.NODE_DBCLICK,l)):(i.eventCenter.emit(_i.ELEMENT_CLICK,l),i.eventCenter.emit(_i.NODE_CLICK,l))}}}},n.handleContextMenu=function(t){t.preventDefault();var e=n.props,o=e.model,r=e.graphModel,i=r.editConfigModel,a=o.getData(),s=r.getPointByClient({x:t.clientX,y:t.clientY});r.setElementStateById(o.id,bi.SHOW_MENU,s.domOverlayPosition),o.isSelected||r.selectNodeById(o.id),r.eventCenter.emit(_i.NODE_CONTEXTMENU,{data:a,e:t,position:s}),i.isSilentMode||n.toFront()},n.handleMouseDown=function(t){var e=n.props,o=e.model,r=e.graphModel;n.startTime=(new Date).getTime();var i=r.editConfigModel;i.adjustNodePosition&&o.draggable&&n.stepDrag&&n.stepDrag.handleMouseDown(t)},n.handleFocus=function(){var t=n.props,e=t.model,o=t.graphModel;o.eventCenter.emit(_i.NODE_FOCUS,{data:e.getData()})},n.handleBlur=function(){var t=n.props,e=t.model,o=t.graphModel;o.eventCenter.emit(_i.NODE_BLUR,{data:e.getData()})},n.setHoverOn=function(t){var e=n.props,o=e.model,r=e.graphModel;if(!o.isHovered){var i=o.getData();o.setHovered(!0),r.eventCenter.emit(_i.NODE_MOUSEENTER,{data:i,e:t})}},n.setHoverOff=function(t){var e=n.props,o=e.model,r=e.graphModel,i=o.getData();o.isHovered&&(o.setHovered(!1),r.eventCenter.emit(_i.NODE_MOUSELEAVE,{data:i,e:t}))};var o=e.graphModel,r=o.gridSize,i=o.eventCenter,a=e.model;return n.stepDrag=new Pi({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:r,eventType:"NODE",isStopPropagation:!1,eventCenter:i,model:a}),n.modelDisposer=De((function(){return n.props}),(function(t){t&&t.model&&n.stepDrag.setModel(t.model)})),n}return _d(e,t),e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(t){return null},e.prototype.getAnchors=function(){var t=this,e=this.props,n=e.model,o=e.graphModel,r=n.isSelected,i=n.isHitable,a=n.isDragging,s=n.isShowAnchor;return i&&(r||s)&&!a?(0,Ds.A)(n.anchors,(function(e,r){var i=n.getAnchorLineStyle(e),a=n.getAnchorStyle(e);return(0,oi.Y)(ad,{anchorData:e,node:t,style:a,edgeStyle:i,anchorIndex:r,nodeModel:n,graphModel:o,setHoverOff:t.setHoverOff})})):[]},e.prototype.getRotateControl=function(){var t=this.props,e=t.model,n=t.graphModel,o=n.editConfigModel,r=o.isSilentMode,i=o.allowRotate,a=e.isSelected,s=e.isHitable,l=e.rotatable,u=e.isHovered,c=i&&l,d=e.getRotateControlStyle();if(!r&&s&&(a||u)&&c)return(0,oi.Y)(dd,{graphModel:n,nodeModel:e,eventCenter:n.eventCenter,style:d})},e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,o=n.editConfigModel,r=o.isSilentMode,i=o.allowResize,a=e.isSelected,s=e.isHitable,l=e.resizable,u=e.isHovered,c=i&&l,d=e.getResizeControlStyle();return!r&&s&&(a||u)&&c?(0,oi.Y)(yl,{style:d,model:e,graphModel:n}):null},e.prototype.getText=function(){var t,e=this.props,n=e.model,o=e.graphModel,r=o.editConfigModel;if(r.nodeTextMode!==Si.TEXT)return null;if(n.state===bi.TEXT_EDIT)return null;if(n.text){var i=!1;return r.nodeTextDraggable&&n.text.draggable&&(i=!0),(0,oi.Y)(yd,{editable:r.nodeTextEdit&&(null===(t=n.text.editable)||void 0===t||t),model:n,graphModel:o,draggable:i})}return null},e.prototype.getStateClassName=function(){var t=this.props.model,e=t.state,n=t.isDragging,o=t.isSelected,r="lf-node";switch(e){case bi.ALLOW_CONNECT:r+=" lf-node-allow";break;case bi.NOT_ALLOW_CONNECT:r+=" lf-node-not-allow";break;default:r+=" lf-node-default";break}return n&&(r+=" lf-dragging"),o&&(r+=" lf-node-selected"),r},e.prototype.toFront=function(){var t=this.props,e=t.model,n=t.graphModel;e.autoToFront&&n.toFront(e.id)},e.prototype.render=function(){var t,e=this.props,n=e.model,o=e.graphModel,r=o.editConfigModel,i=r.hideAnchors,a=r.adjustNodePosition,s=r.allowRotate,l=r.allowResize,u=o.gridSize,c=o.transformModel.SCALE_X,d=n.isHitable,h=n.draggable,p=n.transform,f=n.getOuterGAttributes(),v=f.className,g=void 0===v?"":v,y=Ad(f,["className"]),m=(0,oi.FD)("g",{className:"lf-node-content",children:[(0,oi.FD)("g",{transform:p,children:[this.getShape(),this.getText(),s&&this.getRotateControl(),l&&this.getResizeControl()]}),!i&&this.getAnchors()]});return d?(a&&h&&this.stepDrag.setStep(u*c),t=(0,oi.Y)("g",Ed({className:"".concat(this.getStateClassName()," ").concat(g),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},y,{children:m}))):t=(0,oi.Y)("g",Ed({className:"".concat(this.getStateClassName()," ").concat(g)},y,{children:m})),t},e.isObserved=!1,e}(r.uA),Cd=Od,Nd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Md=function(){return Md=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Md.apply(this,arguments)},Td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nd(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return(0,oi.Y)(Gs,Md({},e,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))},e}(Cd),Pd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dd=function(){return Dd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Dd.apply(this,arguments)},kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pd(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.r,r=t.getNodeStyle();return(0,oi.Y)(Js,Dd({},r,{x:e,y:n,r:o}))},e}(Cd),Rd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Id=function(){return Id=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Id.apply(this,arguments)},Ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rd(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t,n=e.x,o=e.y,r=e.width,i=e.height,a=e.points,s=t.getNodeStyle(),l={transform:"matrix(1 0 0 1 ".concat(n-r/2," ").concat(o-i/2,")")};return(0,oi.Y)("g",Id({},l,{children:(0,oi.Y)(il,Id({},s,{points:a,x:n,y:o}))}))},e}(Cd),jd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bd=function(){return Bd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Bd.apply(this,arguments)},Hd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jd(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return(0,oi.Y)("g",{children:(0,oi.Y)(al,Bd({},e,{points:t.points,x:t.x,y:t.y}))})},e}(Cd),Fd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zd=function(){return zd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},zd.apply(this,arguments)},Wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fd(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return(0,oi.Y)(nl,zd({},e,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))},e}(Cd),Yd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gd=function(){return Gd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Gd.apply(this,arguments)},Xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yd(e,t),e.prototype.getBackground=function(){var t=this.props.model,e=t.getTextStyle(),n=t.width,o=t.height,r=t.x,i=t.y,a=Gd(Gd({},e.background),{x:r,y:i,width:n,height:o});return(0,oi.Y)(Xs,Gd({},a))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return(0,oi.Y)("g",{children:this.getBackground()})},e}(Cd),Ud=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vd=function(){return Vd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Vd.apply(this,arguments)},Kd=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},qd=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Zd=function(t){function e(){var e=t.apply(this,qd([],Kd(arguments),!1))||this;return e.ref=(0,r._3)(),e}return Ud(e,t),Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(t){t.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(t){this.setHtml(t)},e.prototype.shouldUpdate=function(){return(!this.preProperties||this.preProperties!==this.currentProperties)&&(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.height,r=t.width,i=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),(0,oi.Y)("foreignObject",Vd({},i,{x:e-r/2,y:n-o/2,width:r,height:o,ref:this.ref}))},e}(Cd),$d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jd=function(){return Jd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Jd.apply(this,arguments)},Qd=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},th=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a};(function(t){t["SOURCE"]="SOURCE",t["TARGET"]="TARGET"})(wc||(wc={}));var eh=function(t){function e(e){var n=t.call(this)||this;n.handleMouseDown=function(t){n.stepDrag&&n.stepDrag.handleMouseDown(t)},n.onDragStart=function(){var t=n.props,e=t.x,o=t.y,r=t.edgeModel,i=r.startPoint,a=r.endPoint,s=r.pointsList;n.oldEdge={startPoint:i,endPoint:a,pointsList:s},n.setState({endX:e,endY:o,dragging:!0})},n.onDragging=function(t){var e=t.deltaX,o=t.deltaY,r=n.state,i=r.endX,a=r.endY,s=n.props,l=s.graphModel,u=s.type,c=l.transformModel,d=l.editConfigModel,h=th(c.moveCanvasPointByHtml([i,a],e,o),2),p=h[0],f=h[1];n.setState({endX:p,endY:f,dragging:!0});var v=n.props.edgeModel,g=es({x:i,y:a},l);if(g&&g.node&&n.isAllowAdjust(g).pass){var y=v.startPoint,m=v.endPoint,b=v.sourceNode,x=v.targetNode,w=u===wc.SOURCE?{startPoint:{x:g.anchor.x,y:g.anchor.y},endPoint:{x:m.x,y:m.y},sourceNode:g.node,targetNode:x}:{startPoint:{x:y.x,y:y.y},endPoint:{x:g.anchor.x,y:g.anchor.y},sourceNode:b,targetNode:g.node};v.updateAfterAdjustStartAndEnd(w)}else u===wc.SOURCE?v.updateStartPoint({x:p,y:f}):v.updateEndPoint({x:p,y:f});v.text.value&&d.adjustEdge&&v.setText(Object.assign({},v.text,v.textPosition))},n.onDragEnd=function(t){var e,o,r,i=t.event;try{n.setState({dragging:!1});var a=n.props,s=a.graphModel,l=a.edgeModel,u=a.type,c=n.state,d=c.endX,h=c.endY,p=c.dragging,f=es({x:d,y:h},s);if(!p)return;var v=!1,g=void 0;if(f&&f.node){var y=n.isAllowAdjust(f),m=y.pass,b=y.msg,x=y.newTargetNode;if(m){var w=l.getData(),_=w.text,E=w.sourceAnchorId,A=void 0===E?"":E,S=w.targetAnchorId,O=void 0===S?"":S,C=Qd(w,["text","sourceAnchorId","targetAnchorId"]);if(g=Jd(Jd({sourceAnchorId:A,targetAnchorId:O},C),{text:(null===_||void 0===_?void 0:_.value)||""}),u===wc.SOURCE){var N=s.getNodeModelById(f.node.id),M=s.getNodeModelById(l.targetNodeId),T=null===(e=s.edgeGenerator)||void 0===e?void 0:e.call(s,null===N||void 0===N?void 0:N.getData(),null===M||void 0===M?void 0:M.getData(),g);g=Jd(Jd({},T),{sourceNodeId:f.node.id,sourceAnchorId:f.anchor.id,startPoint:{x:f.anchor.x,y:f.anchor.y},targetNodeId:l.targetNodeId,endPoint:Jd({},l.endPoint)}),l.sourceNodeId===f.node.id&&l.sourceAnchorId===f.anchor.id&&(v=!0)}else if(u===wc.TARGET){N=s.getNodeModelById(l.sourceNodeId),M=s.getNodeModelById(f.node.id),T=null===(o=s.edgeGenerator)||void 0===o?void 0:o.call(s,null===N||void 0===N?void 0:N.getData(),null===M||void 0===M?void 0:M.getData(),g);g=Jd(Jd({},T),{sourceNodeId:l.sourceNodeId,startPoint:Jd({},l.startPoint),targetNodeId:f.node.id,targetAnchorId:f.anchor.id,endPoint:{x:f.anchor.x,y:f.anchor.y}}),l.targetNodeId===f.node.id&&l.targetAnchorId===f.anchor.id&&(v=!0)}}else{v=!0;var P=x.getData();s.eventCenter.emit(_i.CONNECTION_NOT_ALLOWED,{data:P,msg:b})}}else v=!0;if(v)n.recoveryEdge();else{var D=l.getData();s.deleteEdgeById(l.id);var k=s.addEdge(Jd({},g));s.eventCenter.emit(_i.EDGE_EXCHANGE_NODE,{data:{newEdge:k.getData(),oldEdge:D}})}null===(r=n.preTargetNode)||void 0===r||r.setElementState(bi.DEFAULT)}finally{s=n.props.graphModel;s.eventCenter.emit(_i.ADJUST_POINT_DRAGEND,{e:i,data:n.stepDragData})}},n.recoveryEdge=function(){var t=n.props.edgeModel,e=n.oldEdge,o=e.startPoint,r=e.endPoint,i=e.pointsList;t.updateStartPoint(o),t.updateEndPoint(r),t.modelType!==wi.LINE_EDGE&&(t.pointsList=null!==i&&void 0!==i?i:[],t.initPoints())},n.getAdjustPointStyle=function(){var t=n.props.graphModel.theme,e=t.edgeAdjust;return e},n.state={dragging:!1,endX:0,endY:0},n.targetRuleResults=new Map,n.sourceRuleResults=new Map;var o=e.type,r=e.edgeModel,i=e.graphModel,a=i.eventCenter;return n.stepDragData={type:o,edgeData:r.getData()},n.stepDrag=new Pi({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:a,data:n.stepDragData}),n}return $d(e,t),e.prototype.isAllowAdjust=function(t){var e,n,o,r,i=this.props,a=i.edgeModel,s=a.id,l=a.sourceNode,u=a.targetNode,c=a.sourceAnchorId,d=a.targetAnchorId,h=i.type;if(h===wc.SOURCE?(e=t.node,n=u,o=t.anchor,r=u.getAnchorInfo(d)):(e=l,n=t.node,r=t.anchor,o=l.getAnchorInfo(c)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(bi.DEFAULT),this.preTargetNode=t.node,r.id===o.id)return{pass:!1,msg:"",newTargetNode:n};var p="".concat(e.id,"_").concat(n.id,"_").concat(o.id,"_").concat(r.id);if(!this.targetRuleResults.has(p)){var f=e.isAllowConnectedAsSource(n,o,r,s),v=n.isAllowConnectedAsTarget(e,o,r,s);this.sourceRuleResults.set(p,ms(f)),this.targetRuleResults.set(p,ms(v))}var g=this.sourceRuleResults.get(p),y=g.isAllPass,m=g.msg,b=this.targetRuleResults.get(p),x=b.isAllPass,w=b.msg,_=y&&x?bi.ALLOW_CONNECT:bi.NOT_ALLOW_CONNECT;return h===wc.SOURCE?e.setElementState(_):n.setElementState(_),{pass:y&&x,msg:w||m,newTargetNode:n}},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,o=t.getAdjustPointShape,r=t.edgeModel,i=this.state.dragging;return(0,oi.Y)("g",{pointerEvents:i?"none":"",onMouseDown:this.handleMouseDown,children:i?"":o(e,n,r)})},e}(r.uA),nh=eh,oh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rh=function(){return rh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},rh.apply(this,arguments)},ih=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}oh(e,t),e.prototype.getArrowAttributes=function(){var t=this.props,e=t.arrowInfo,n=t.style,o=e.start,r=e.end,i={start:o,end:r,offset:n.offset,verticalLength:n.verticalLength,type:"end"},a=Fi(i),s=a.leftX,l=a.leftY,u=a.rightX,c=a.rightY;return rh({d:"M".concat(s," ").concat(l," L").concat(r.x," ").concat(r.y," L").concat(u," ").concat(c," z")},n)},e.prototype.getShape=function(){var t=this.getArrowAttributes(),e=t.d,n=t.strokeWidth,o=t.stroke,r=t.fill;return(0,oi.Y)(Ks,{d:e,fill:r,strokeWidth:n,stroke:o})},e.prototype.render=function(){return(0,oi.Y)("g",{className:"lf-arrow",children:this.getShape()})}}(r.uA),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),ah=function(){return ah=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ah.apply(this,arguments)},sh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},lh=function(t){function e(){var e=t.call(this)||this;return e.textRef=(0,r._3)(),e.handleHover=function(t,n){var o=e.props,r=o.model,i=o.graphModel.eventCenter;r.setHovered(t);var a=t?_i.EDGE_MOUSEENTER:_i.EDGE_MOUSELEAVE,s=r.getData();i.emit(a,{data:s,e:n})},e.setHoverOn=function(t){var n=e.props.model.isHovered;n||(e.textRef&&e.textRef.current&&e.textRef.current.setHoverOn(),e.handleHover(!0,t))},e.setHoverOff=function(t){var n=e.props.model.isHovered;n&&(e.textRef&&e.textRef.current&&e.textRef.current.setHoverOff(),e.handleHover(!1,t))},e.handleContextMenu=function(t){t.preventDefault(),e.contextMenuTime=(new Date).getTime(),e.clickTimer&&clearTimeout(e.clickTimer);var n=e.props,o=n.model,r=n.graphModel,i=r.editConfigModel,a=r.getPointByClient({x:t.clientX,y:t.clientY});r.setElementStateById(o.id,bi.SHOW_MENU,a.domOverlayPosition),i.isSilentMode||e.toFront(),o.isSelected||r.selectEdgeById(o.id);var s=null===o||void 0===o?void 0:o.getData();r.eventCenter.emit(_i.EDGE_CONTEXTMENU,{data:s,e:t,position:a})},e.handleMouseDown=function(t){t.stopPropagation(),e.startTime=(new Date).getTime()},e.handleMouseUp=function(){var t=e.props.model;e.mouseUpDrag=t.isDragging},e.handleClick=function(t){if(e.startTime&&!e.mouseUpDrag){var n=2===t.button;if(!n){var o=2===t.detail,r=e.props,i=r.model,a=r.graphModel,s=null===i||void 0===i?void 0:i.getData(),l=a.getPointByClient({x:t.clientX,y:t.clientY});if(o){var u=a.editConfigModel,c=a.textEditElement,d=i.id,h=i.text,p=i.modelType;if(c&&c.id===d&&a.setElementStateById(d,bi.DEFAULT),u.edgeTextEdit&&h.editable&&(i.setSelected(!1),a.setElementStateById(d,bi.TEXT_EDIT)),p===wi.POLYLINE_EDGE){var f=i,v=a.getPointByClient({x:t.x,y:t.y}).canvasOverlayPosition,g=v.x,y=v.y;f.dbClickPosition=Na({x:g,y:y},f.points)}a.eventCenter.emit(_i.EDGE_DBCLICK,{data:s,e:t,position:l})}else a.eventCenter.emit(_i.ELEMENT_CLICK,{data:s,e:t,position:l}),a.eventCenter.emit(_i.EDGE_CLICK,{data:s,e:t,position:l});var m=a.editConfigModel;a.selectEdgeById(i.id,Ha(t,m)),m.isSilentMode||e.toFront()}}},e.handleFocus=function(){var t=e.props,n=t.model,o=t.graphModel;o.eventCenter.emit(_i.EDGE_FOCUS,{data:n.getData()})},e.handleBlur=function(){var t=e.props,n=t.model,o=t.graphModel;o.eventCenter.emit(_i.EDGE_BLUR,{data:n.getData()})},e}return ih(e,t),e.prototype.getShape=function(){return(0,oi.Y)("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var t,e=this.props,n=e.model,o=e.graphModel,r=o.editConfigModel;if(r.edgeTextMode!==Si.TEXT)return null;if(n.state===bi.TEXT_EDIT)return null;if(n.text){var i=!1;return r.edgeTextDraggable&&n.text.draggable&&(i=!0),(0,oi.Y)(wd,{ref:this.textRef,editable:r.edgeTextEdit&&(null===(t=n.text.editable)||void 0===t||t),model:n,graphModel:o,draggable:i})}return null},e.prototype.getArrowInfo=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,o=t.isSelected,r=this.state.hover;return{start:e,end:n,hover:r,isSelected:o}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint;return[e,n]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var t=this.props.model,e=t.id,n=t.getArrowStyle(),o=n.refY,r=void 0===o?0:o,i=n.refX,a=void 0===i?2:i,s=sh(this.getLastTwoPoints(),2),l=s[0],u=s[1],c="auto";return null!==l&&null!==u&&(c=Ll(Il({x:u.x-l.x,y:u.y-l.y,z:0}))),(0,oi.Y)("g",{children:(0,oi.FD)("defs",{children:[(0,oi.Y)("marker",{id:"marker-start-".concat(e),refX:-a,refY:r,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),(0,oi.Y)("marker",{id:"marker-end-".concat(e),refX:a,refY:r,overflow:"visible",orient:c,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return(0,oi.Y)("path",{})},e.prototype.getEndArrow=function(){var t=this.props.model,e=t.getArrowStyle(),n=e.stroke,o=e.strokeWidth,r=e.offset,i=e.verticalLength;return(0,oi.Y)("path",{stroke:n,fill:n,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(r," -").concat(i," L ").concat(r," ").concat(i," Z")})},e.prototype.getAdjustPointShape=function(t,e,n){var o=n.getAdjustPointStyle();return(0,oi.Y)($s,ah({className:"lf-edge-adjust-point"},o,{x:t,y:e}))},e.prototype.getAdjustPoints=function(){var t=this.props,e=t.model,n=t.graphModel,o=n.editConfigModel,r=o.adjustEdgeStartAndEnd,i=o.adjustEdgeStart,a=o.adjustEdgeEnd,s=e.getAdjustStart(),l=e.getAdjustEnd();return(0,oi.FD)("g",{children:[r&&i&&(0,oi.Y)(nh,ah({type:wc.SOURCE},s,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:e,graphModel:n})),r&&a&&(0,oi.Y)(nh,ah({type:wc.TARGET},l,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:e,graphModel:n}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return(0,oi.Y)("g",{})},e.prototype.getAppend=function(){return(0,oi.Y)("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var t=this.props,e=t.graphModel,n=t.model;e.toFront(n.id)},e.prototype.render=function(){var t=this.props.model,e=t.isSelected,n=t.isHitable,o=t.isShowAdjustPoint;return(0,oi.FD)("g",{children:[(0,oi.FD)("g",{className:["lf-edge",!n&&"pointer-none",e&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&e?this.getAdjustPoints():""]})},e.isObserved=!1,e}(r.uA),uh=lh,ch=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dh=function(){return dh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},dh.apply(this,arguments)},hh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ch(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.getEdgeStyle(),n=t,o=n.path,r=n.isAnimation,i=n.arrowConfig,a=t.getEdgeAnimationStyle(),s=a.strokeDasharray,l=a.stroke,u=a.strokeDashoffset,c=a.animationName,d=a.animationDuration,h=a.animationIterationCount,p=a.animationTimingFunction,f=a.animationDirection;return(0,oi.Y)(Ks,dh({d:o},e,i,r?{strokeDasharray:s,stroke:l,style:{strokeDashoffset:u,animationName:c,animationDuration:d,animationIterationCount:h,animationTimingFunction:p,animationDirection:f}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model.path;return(0,oi.Y)(Ks,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var t=this.props.model,e=this.state.hover,n=t.isSelected,o=t.getArrowStyle().offset,r=t.pointsList.map((function(t){return{x:t.x,y:t.y}})),i=hh(Ca(r,o),2),a=i[0],s=i[1],l={start:a,end:s,hover:e,isSelected:n};return l},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.getArrowStyle().offset,n=t.pointsList.map((function(t){return{x:t.x,y:t.y}}));return Ca(n,e)},e}(uh),fh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vh=function(){return vh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},vh.apply(this,arguments)},gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fh(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,o=t.isAnimation,r=t.arrowConfig,i=t.getEdgeStyle(),a=t.getEdgeAnimationStyle(),s=a.strokeDasharray,l=a.stroke,u=a.strokeDashoffset,c=a.animationName,d=a.animationDuration,h=a.animationIterationCount,p=a.animationTimingFunction,f=a.animationDirection;return(0,oi.Y)(Fs,vh({},i,{x1:e.x,y1:e.y,x2:n.x,y2:n.y},r,o?{strokeDasharray:s,stroke:l,style:{strokeDashoffset:u,animationName:c,animationDuration:d,animationIterationCount:h,animationTimingFunction:p,animationDirection:f}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,o={start:e,end:n},r=Ea(o),i=r.d,a=r.strokeWidth,s=r.fill,l=r.strokeDasharray,u=r.stroke;return(0,oi.Y)(Ks,{d:i,fill:s,strokeWidth:a,stroke:u,strokeDasharray:l})},e}(uh),yh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mh=function(){return mh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},mh.apply(this,arguments)},bh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},xh=function(t){function e(){var e=t.call(this)||this;return e.onDragStart=function(){var t=e.props.model;t.dragAppendStart(),e.isShowAdjustPointTemp=t.isShowAdjustPoint,t.isShowAdjustPoint=!1},e.onDragging=function(t){var n=t.deltaX,o=t.deltaY,r=e.props,i=r.model,a=r.graphModel;e.isDragging=!0;var s=a.transformModel,l=a.editConfigModel,u=bh(s.fixDeltaXY(n,o),2),c=u[0],d=u[1],h=i,p=l.adjustEdgeMiddle;e.appendInfo=p?h.dragAppendSimple(e.appendInfo,{x:c,y:d}):h.dragAppend(e.appendInfo,{x:c,y:d})},e.onDragEnd=function(){var t,n=e.props,o=n.model,r=n.graphModel.eventCenter,i=o;i.dragAppendEnd(),e.isDragging=!1,i.isShowAdjustPoint=null!==(t=e.isShowAdjustPointTemp)&&void 0!==t&&t,e.appendInfo=void 0,r.emit(_i.EDGE_ADJUST,{data:i.getData()})},e.beforeDragStart=function(t,n){n.draggable&&e.drag.handleMouseDown(t),e.appendInfo=n},e.drag=new Pi({onDragStart:e.onDragStart,onDragging:e.onDragging,onDragEnd:e.onDragEnd,isStopPropagation:!1}),e}return yh(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.points,n=t.isAnimation,o=t.arrowConfig,r=t.getEdgeStyle(),i=t.getEdgeAnimationStyle(),a=i.strokeDasharray,s=i.stroke,l=i.strokeDashoffset,u=i.animationName,c=i.animationDuration,d=i.animationIterationCount,h=i.animationTimingFunction,p=i.animationDirection;return(0,oi.Y)(ul,mh({points:e},r,o,n?{strokeDasharray:a,stroke:s,style:{strokeDashoffset:l,animationName:u,animationDuration:c,animationIterationCount:d,animationTimingFunction:h,animationDirection:p}}:{}))},e.prototype.getArrowInfo=function(){var t=this.props.model,e=t.points,n=t.isSelected,o=this.state.hover,r=ba(e),i=r[0],a=r[0];return r.length>=2&&(i=r[r.length-2],a=r[r.length-1]),{start:i,end:a,hover:o,isSelected:n}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.points,n=ba(e),o=n[0],r=n[0];return n.length>=2&&(o=n[n.length-2],r=n[n.length-1]),[o,r]},e.prototype.getAppendAttributes=function(t){var e,n=t.start,o=t.end;if(n.x===o.x&&n.y===o.y)e="";else{var r={start:n,end:o,offset:10,verticalLength:5},i=Fi(mh(mh({},r),{type:"start"})),a=Fi(mh(mh({},r),{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY,"\n      L").concat(i.rightX," ").concat(i.rightY,"\n      L").concat(a.rightX," ").concat(a.rightY,"\n      L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(t){var e=this.getAppendAttributes(t),n=e.d,o=e.strokeWidth,r=e.fill,i=e.strokeDasharray,a=e.stroke;return(0,oi.Y)(Ks,{d:n,fill:r,strokeWidth:o,stroke:a,strokeDasharray:i})},e.prototype.getAppendWidth=function(){for(var t=this,e=this.props,n=e.model,o=e.graphModel,r=n.pointsList,i=n.draggable,a=[],s=r.length,l=function(e){var n="lf-polyline-append",l={start:{x:r[e].x,y:r[e].y},end:{x:r[e+1].x,y:r[e+1].y},startIndex:e,endIndex:e+1,direction:Ai.HORIZONTAL,draggable:!0},c=(0,oi.Y)("g",{className:n,children:u.getAppendShape(l)}),d=o.editConfigModel,h=d.adjustEdge,p=d.adjustEdgeMiddle;if(h&&i){var f=l.startIndex,v=l.endIndex,g=p&&(0===f||v===s-1);l.draggable=!g,l.start.x===l.end.x?(l.draggable&&(n+="-ew-resize"),l.direction=Ai.VERTICAL):l.start.y===l.end.y&&(l.draggable&&(n+="-ns-resize"),l.direction=Ai.HORIZONTAL),c=(0,oi.Y)("g",{className:u.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(e){return t.beforeDragStart(e,l)},children:(0,oi.Y)("g",{className:n,children:u.getAppendShape(l)})})}a.push(c)},u=this,c=0;c<s-1;c++)l(c);return(0,oi.Y)("g",{children:a})},e}(uh),wh=function(){return wh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},wh.apply(this,arguments)},_h=function(){function t(t){var e=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){e.nodeConfig=null,window.document.removeEventListener("mouseup",e.stopDrag)},this.dragEnter=function(t){e.nodeConfig&&!e.fakeNode&&(e.fakeNode=e.lf.createFakeNode(wh(wh({},e.nodeConfig),e.clientToLocalPoint({x:t.clientX,y:t.clientY}))))},this.onDragOver=function(t){if(t.preventDefault(),e.fakeNode){var n=e.clientToLocalPoint({x:t.clientX,y:t.clientY}),o=n.x,r=n.y;e.fakeNode.moveTo(o,r);var i=e.fakeNode.getData();e.lf.setNodeSnapLine(i),e.lf.graphModel.eventCenter.emit(_i.NODE_DND_DRAG,{data:i,e:t})}return!1},this.onDragLeave=function(){e.fakeNode&&(e.lf.removeNodeSnapLine(),e.lf.graphModel.removeFakeNode(),e.fakeNode=null)},this.onDrop=function(t){e.lf.graphModel&&t&&e.nodeConfig&&(e.lf.addNode(wh(wh({},e.nodeConfig),e.clientToLocalPoint({x:t.clientX,y:t.clientY})),_i.NODE_DND_ADD,t),t.preventDefault(),t.stopPropagation(),e.nodeConfig=null,e.lf.removeNodeSnapLine(),e.lf.graphModel.removeFakeNode(),e.fakeNode=null)};var n=t.lf;this.lf=n}return t.prototype.clientToLocalPoint=function(t){var e=t.x,n=t.y,o=(0,gi.A)(this.lf.options,["grid","size"]),r=this.lf.graphModel.getPointByClient({x:e,y:n}),i=r.canvasOverlayPosition,a=i.x,s=i.y,l=this.lf.graphModel.editConfigModel.snapGrid;return{x:Ia(a,o,l),y:Ia(s,o,l)}},t.prototype.startDrag=function(t){var e=this.lf.graphModel.editConfigModel;(null===e||void 0===e?void 0:e.isSilentMode)||(this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag))},t.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},t}();function Eh(t,e){t.on("node:mousemove",(function(t){var n=t.data;e.setNodeSnapLine(n)})),t.on("node:mouseup",(function(){e.clearSnapline()}))}var Ah=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sh=function(){return Sh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Sh.apply(this,arguments)},Oh=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ch=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Nh=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=(0,r._3)(),n.__prevText={type:"",text:"",id:""},n.keyupHandler=function(t){var e=n.props.graphModel.textEditElement;"Enter"===t.key&&t.altKey&&(null===e||void 0===e||e.setElementState(bi.DEFAULT))},n.inputHandler=function(t){var e=t.target.innerText,o=n.props.graphModel.textEditElement;o&&(n.__prevText={type:o.type,text:e.replace(/(\r\n)+$|(\n)+$/,""),id:o.id})},n.keydownHandler=function(t){t.stopPropagation()},n.state={style:{left:0,top:0}},n}return Ah(e,t),e.getDerivedStateFromProps=function(t){var e,n,o=t.textEditElement,r=t.graphModel,i=r.transformModel,a=r.theme,s=a.inputText;if(o){if(!(null===(e=o.text)||void 0===e?void 0:e.value)&&o.BaseType===xi.EDGE){var l=o.text,u=o.textPosition,c=u.x,d=u.y;l.x=c,l.y=d,o.setText(l)}var h={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(o.BaseType===xi.EDGE){var p=a.edgeText,f=p.overflowMode,v=p.lineHeight,g=p.wrapPadding,y=p.textWidth;y&&"autoWrap"===f&&(n=Sh(Sh({},h),{width:y,minWidth:y,lineHeight:v,padding:g}))}else if(o.BaseType===xi.NODE){var m=a.nodeText,b=(f=m.overflowMode,v=m.lineHeight,g=m.wrapPadding,y=m.textWidth,o.width),x=o.modelType,w=o.textWidth,_=w||y||b;(x!==wi.TEXT_NODE&&"autoWrap"===f||x===wi.TEXT_NODE&&y)&&(n=Sh(Sh({},h),{width:_,minWidth:_,lineHeight:v,padding:g}))}var E=o.text,A=E.x,S=E.y,O=Ch(i.CanvasPointToHtmlPoint([A,S]),2),C=O[0],N=O[1];return{style:Sh(Sh({left:C,top:N},n),s)}}return null},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),""!==this.__prevText.id){var e=this.__prevText,n=e.text,o=e.id;t.updateText(o,n),t.eventCenter.emit(_i.TEXT_UPDATE,{data:Sh({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(t){if(void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();null===n||void 0===n||n.removeAllRanges(),null===n||void 0===n||n.addRange(e)}},e.prototype.render=function(){var t,e=this.props.graphModel.textEditElement,n=this.state.style;return e?(0,oi.Y)("div",{contentEditable:!0,className:"lf-text-input",style:n,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:null===(t=e.text)||void 0===t?void 0:t.value},e.id):null},e.toolName="text-edit-tool",e=Oh([Ip],e),e}(r.uA),Mh=Nh,Th=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ph=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Dh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},kh=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Rh=function(t){function e(e){var n=t.call(this,e)||this;n.handleMouseDown=function(t){n.stepDrag.handleMouseDown(t)},n.handleWheelEvent=function(t){var e,o;t.preventDefault();var r=t.deltaX,i=t.deltaY,a=t.clientX,s=t.clientY,l=t.ctrlKey,u=new WheelEvent("wheel",{deltaX:r,deltaY:i,clientX:a,clientY:s,ctrlKey:l});null===(o=null===(e=n.props.lf.container)||void 0===e?void 0:e.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))||void 0===o||o.dispatchEvent(u)},n.onDragging=function(t){var e=t.deltaX,o=t.deltaY,r=n.props,i=r.graphModel,a=r.lf,s=a.getTransform(),l=s.SCALE_X,u=s.SCALE_Y,c=i.getSelectElements(!0);i.moveNodes(c.nodes.map((function(t){return t.id})),e/l,o/u)},n.handleContextMenu=function(t){t.preventDefault();var e=n.props,o=e.graphModel,r=e.graphModel,i=r.eventCenter,a=r.selectElements,s=o.getPointByClient({x:t.clientX,y:t.clientY}),l={nodes:[],edges:[]},u=kh([],Dh(a.values()),!1);u.forEach((function(t){t.BaseType===xi.NODE&&l.nodes.push(t.getData()),t.BaseType===xi.EDGE&&l.edges.push(t.getData())})),i.emit(_i.SELECTION_CONTEXTMENU,{data:l,e:t,position:s})};var o=e.graphModel,r=o.gridSize,i=o.eventCenter;return n.stepDrag=new Pi({onDragging:n.onDragging,step:r,eventType:"SELECTION",eventCenter:i}),n}return Th(e,t),e.prototype.render=function(){var t,e,n=this.props.graphModel,o=n.selectElements,r=n.transformModel,i=this.props.lf.getTransform(),a=i.SCALE_X,s=i.SCALE_Y;if(!(o.size<=1)){var l=Number.MAX_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;o.forEach((function(t){var e;t.BaseType===xi.NODE&&(e=ki(t)),t.BaseType===xi.EDGE&&(e=ji(t)),void 0!==e&&(l=Math.min(l,e.x),u=Math.min(u,e.y),c=Math.max(c,e.x1),d=Math.max(d,e.y1))})),t=Dh(r.CanvasPointToHtmlPoint([l,u]),2),l=t[0],u=t[1],e=Dh(r.CanvasPointToHtmlPoint([c,d]),2),c=e[0],d=e[1];var h={left:"".concat(l-20*a/2,"px"),top:"".concat(u-20*s/2,"px"),width:"".concat(c-l+20*a,"px"),height:"".concat(d-u+20*s,"px"),"border-width":"".concat(2*a,"px")};return(0,oi.Y)("div",{className:"lf-multiple-select",style:h,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=Ph([Ip],e),e}(r.uA),Ih=Rh,Lh=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},jh=[Mh,Ih],Bh=function(){function t(t){var e=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=t,(0,ri.A)(jh,(function(t){e.isDisabled(t.toolName)||e.registerTool(t.toolName,t)}));var n=t.graphModel,o=n.eventCenter;o.on("".concat(_i.GRAPH_TRANSFORM,",").concat(_i.NODE_CLICK,",").concat(_i.BLANK_CLICK," "),(function(){var t,e=n.textEditElement,o=n.editConfigModel,r=o.edgeTextEdit,i=o.nodeTextEdit;(r||i)&&e&&(null===(t=n.textEditElement)||void 0===t||t.setElementState(bi.DEFAULT))}))}return t.prototype.isDisabled=function(t){var e;return-1!==(null===(e=this.instance.options.disabledTools)||void 0===e?void 0:e.indexOf(t))},t.prototype.registerTool=function(t,e){this.toolMap.set(t,e)},t.prototype.disableTool=function(t){var e=this.toolMap.get(t);if(e)return this.disabledToolMap.set(t,e),this.toolMap.delete(t),!0;throw new Error(" ".concat(e," "))},t.prototype.enableTool=function(t){var e=this.disabledToolMap.get(t);if(e)return this.toolMap.set(t,e),this.disabledToolMap.delete(t),!0;throw new Error(" ".concat(e," "))},t.prototype.getTools=function(){return Array.from(this.toolMap.values())},t.prototype.getInstance=function(){return this.instance},t.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},Lh([ht],t.prototype,"toolMap",void 0),Lh([Oe],t.prototype,"disableTool",null),Lh([Oe],t.prototype,"enableTool",null),t}(),Hh=Bh,Fh=n(46018),zh=n(99100);function Wh(t){throw new Error("[mobx-utils] "+t)}function Yh(t,e){void 0===e&&(e="Illegal state"),t||Wh(e)}var Gh=function(t){return t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).concat(Gh(Object.getPrototypeOf(t))||[])},Xh=function(t){var e=Gh(t),n=e.filter((function(t,n){return e.indexOf(t)===n}));return n},Uh=function(t){return Xh(t).filter((function(t){return"constructor"!==t&&!~t.indexOf("__")}))},Vh="pending",Kh="fulfilled",qh="rejected";function Zh(t){switch(this.state){case Vh:return t.pending&&t.pending(this.value);case qh:return t.rejected&&t.rejected(this.value);case Kh:return t.fulfilled?t.fulfilled(this.value):this.value}}function $h(t,e){if(Yh(arguments.length<=2,"fromPromise expects up to two arguments"),Yh("function"===typeof t||"object"===typeof t&&t&&"function"===typeof t.then,"Please pass a promise or function to fromPromise"),!0===t.isPromiseBasedObservable)return t;"function"===typeof t&&(t=new Promise(t));var n=t;t.then(Oe("observableFromPromise-resolve",(function(t){n.value=t,n.state=Kh})),Oe("observableFromPromise-reject",(function(t){n.value=t,n.state=qh}))),n.isPromiseBasedObservable=!0,n.case=Zh;var o=e&&e.state===Kh?e.value:void 0;return Be(n,{value:o,state:Vh},{},{deep:!1}),n}(function(t){function e(e){void 0===e&&(e=void 0);var n=t(Promise.resolve(e));return n.state=Kh,n.value=e,n}t.reject=Oe("fromPromise.reject",(function(e){var n=t(Promise.reject(e));return n.state=qh,n.value=e,n})),t.resolve=Oe("fromPromise.resolve",e)})($h||($h={}));var Jh=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};(function(){function t(t,e){var n=this;Ce((function(){n.current=e,n.subscription=t.subscribe(n)}))}t.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.next=function(t){this.current=t},t.prototype.complete=function(){this.dispose()},t.prototype.error=function(t){this.current=t,this.dispose()},Jh([ht.ref],t.prototype,"current",void 0),Jh([Oe.bound],t.prototype,"next",null),Jh([Oe.bound],t.prototype,"complete",null),Jh([Oe.bound],t.prototype,"error",null)})();var Qh=function(){return Qh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Qh.apply(this,arguments)},tp=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ep=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function t(t){var e=this;this.model=t,this.localValues=ht.map({}),this.localComputedValues=ht.map({}),this.isPropertyDirty=function(t){return e.localValues.has(t)},Yh(Yn(t),"createViewModel expects an observable object"),Uh(t).forEach((function(n){if(n!==M&&"__mobxDidRunLazyInitializers"!==n){if(Yh(-1===ep.indexOf(n),"The propertyname "+n+" is reserved and cannot be used with viewModels"),Ue(t,n)){var o=Xn(t,n).derivation;e.localComputedValues.set(n,mt(o.bind(e)))}var r=Object.getOwnPropertyDescriptor(t,n),i=r?{enumerable:r.enumerable}:{};Object.defineProperty(e,n,Qh(Qh({},i),{configurable:!0,get:function(){return Ue(t,n)?e.localComputedValues.get(n).get():e.isPropertyDirty(n)?e.localValues.get(n):e.model[n]},set:Oe((function(t){t!==e.model[n]?e.localValues.set(n,t):e.localValues.delete(n)}))}))}}))}Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),t.prototype.submit=function(){var t=this;qe(this.localValues).forEach((function(e){var n=t.localValues.get(e),o=t.model[e];Cn(o)?o.replace(n):Pn(o)?(o.clear(),o.merge(n)):Xe(n)||(t.model[e]=n)})),this.localValues.clear()},t.prototype.reset=function(){this.localValues.clear()},t.prototype.resetProperty=function(t){this.localValues.delete(t)},tp([mt],t.prototype,"isDirty",null),tp([mt],t.prototype,"changedValues",null),tp([Oe.bound],t.prototype,"submit",null),tp([Oe.bound],t.prototype,"reset",null),tp([Oe.bound],t.prototype,"resetProperty",null)})();function np(t){if(!t)return"ROOT";var e=[];while(t.parent)e.push(t.path),t=t.parent;return e.reverse().join("/")}function op(t){return Yn(t)||Cn(t)||Pn(t)}function rp(t,e){var n=new WeakMap;function o(o){var i=n.get(o.object);r(o,i),e(o,np(i),t)}function r(t,e){switch(t.type){case"add":i(t.newValue,e,t.name);break;case"update":a(t.oldValue),i(t.newValue,e,t.name||""+t.index);break;case"remove":case"delete":a(t.oldValue);break;case"splice":t.removed.map(a),t.added.forEach((function(n,o){return i(n,e,""+(t.index+o))}));for(var o=t.index+t.addedCount;o<t.object.length;o++)if(op(t.object[o])){var r=n.get(t.object[o]);r&&(r.path=""+o)}break}}function i(t,e,r){if(op(t)){var a=n.get(t);if(a){if(a.parent!==e||a.path!==r)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+np(e)+"/"+r+"', but it already exists at '"+np(a.parent)+"/"+a.path+"'")}else{var s={parent:e,path:r,dispose:Qe(t,o)};n.set(t,s),$e(t).forEach((function(t){var e=t[0],n=t[1];return i(n,s,e)}))}}}function a(t){if(op(t)){var e=n.get(t);if(!e)return;n.delete(t),e.dispose(),Ze(t).forEach(a)}}return i(t,void 0,""),function(){a(t)}}var ip=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ap=(function(t){function e(e,n,o){var r=void 0===o?{}:o,i=r.name,a=void 0===i?"ogm"+(1e3*Math.random()|0):i,s=r.keyToName,l=void 0===s?function(t){return""+t}:s,u=t.call(this)||this;u._keyToName=l,u._groupBy=n,u._ogmInfoKey=Symbol("ogmInfo"+a),u._base=e;for(var c=0;c<e.length;c++)u._addItem(e[c]);return u._disposeBaseObserver=Qe(u._base,(function(t){if("splice"===t.type)un((function(){for(var e=0,n=t.removed;e<n.length;e++){var o=n[e];u._removeItem(o)}for(var r=0,i=t.added;r<i.length;r++){var a=i[r];u._addItem(a)}}));else{if("update"!==t.type)throw new Error("illegal state");un((function(){u._removeItem(t.oldValue),u._addItem(t.newValue)}))}})),u}ip(e,t),e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,e){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var e=this._base[t],n=e[this._ogmInfoKey];n.reaction(),delete e[this._ogmInfoKey]}},e.prototype._getGroupArr=function(e){var n=t.prototype.get.call(this,e);return void 0===n&&(n=ht([],{name:"GroupArray["+this._keyToName(e)+"]",deep:!1}),t.prototype.set.call(this,e,n)),n},e.prototype._removeFromGroupArr=function(e,n){var o=t.prototype.get.call(this,e);1===o.length?t.prototype.delete.call(this,e):(n===o.length-1||(o[n]=o[o.length-1],o[n][this._ogmInfoKey].groupArrIndex=n),o.length--)},e.prototype._addItem=function(t){var e=this,n=this._groupBy(t),o=this._getGroupArr(n),r={groupByValue:n,groupArrIndex:o.length,reaction:De((function(){return e._groupBy(t)}),(function(n,o){var r=t[e._ogmInfoKey];e._removeFromGroupArr(r.groupByValue,r.groupArrIndex);var i=e._getGroupArr(n),a=i.length;i.push(t),r.groupByValue=n,r.groupArrIndex=a}))};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:r}),o.push(t)},e.prototype._removeItem=function(t){var e=t[this._ogmInfoKey];this._removeFromGroupArr(e.groupByValue,e.groupArrIndex),e.reaction(),delete t[this._ogmInfoKey]}}(Tn),function(){function t(t,e){this.base=t,this.args=e,this.closestIdx=0,this.isDisposed=!1;for(var n=this.closest=this.root=t,o=0;o<this.args.length-1;o++){if(n=n.get(e[o]),!n)break;this.closest=n}this.closestIdx=o}return t.prototype.exists=function(){this.assertNotDisposed();var t=this.args.length;return this.closestIdx>=t-1&&this.closest.has(this.args[t-1])},t.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},t.prototype.set=function(t){this.assertNotDisposed();for(var e=this.args.length,n=this.closest,o=this.closestIdx;o<e-1;o++){var r=new Map;n.set(this.args[o],r),n=r}this.closestIdx=e-1,this.closest=n,n.set(this.args[e-1],t)},t.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var t=this.args.length;this.closest.delete(this.args[t-1]);for(var e=this.root,n=[e],o=0;o<t-1;o++)e=e.get(this.args[o]),n.push(e);for(o=n.length-1;o>0;o--)0===n[o].size&&n[o-1].delete(this.args[o-1]);this.isDisposed=!0},t.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},t}());(function(){function t(){this.store=new Map,this.argsLength=-1}t.prototype.entry=function(t){if(-1===this.argsLength)this.argsLength=t.length;else if(this.argsLength!==t.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+t.length);return this.last&&(this.last.isDisposed=!0),this.last=new ap(this.store,t)}})();new Set,new Set;var sp,lp=Promise.resolve();sp="undefined"!==typeof queueMicrotask?queueMicrotask:"undefined"!==typeof process&&process.nextTick?function(t){process.nextTick(t)}:function(t){setTimeout(t,0)};var up=function(){return new Promise((function(t){sp(t)}))};var cp=function(){return cp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},cp.apply(this,arguments)},dp=function(){function t(t){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=t}return t.prototype.add=function(t){(0,Fh.A)((0,zh.A)(this.undos),t)||(this.undos.push(t),(0,Fh.A)(this.curData,t)||(this.redos=[]),this.eventCenter.emit(_i.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},t.prototype.undoAble=function(){return this.undos.length>1},t.prototype.undo=function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var e=this.undos.pop();return this.curData=(0,ai.A)(e),e}},t.prototype.redoAble=function(){return this.redos.length>0},t.prototype.redo=function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=(0,ai.A)(t),t}},t.prototype.watch=function(t){var e=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=rp(t,(0,tc.A)((function(){var n=t.modelToHistoryData();n&&e.add(cp({},n))}),this.waitTime))},t.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},t}(),hp=dp,pp=n(93791),fp=n(53012),vp=n.n(fp),gp=n(72863),yp=function(){return yp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},yp.apply(this,arguments)},mp=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},bp=null;function xp(t,e){return t.x+=e,t.y+=e,(0,gp.A)(t.text)||(t.text.x+=e,t.text.y+=e),t}function wp(t,e){return t.startPoint&&(t.startPoint.x+=e,t.startPoint.y+=e),t.endPoint&&(t.endPoint.x+=e,t.endPoint.y+=e),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach((function(t){t.x+=e,t.y+=e})),(0,gp.A)(t.text)||(t.text.x+=e,t.text.y+=e),t}function _p(t,e){var n=t.x,o=t.y,r=t.text,i=r?{x:r.x+e,y:r.y+e,value:r.value}:void 0;return yp(yp({},t),{id:"",x:n+e,y:o+e,text:i})}function Ep(t,e){var n=t.startPoint,o=t.endPoint,r=t.pointsList,i=t.text,a=mp(t,["startPoint","endPoint","pointsList","text"]);a.id="";var s={x:n.x+e,y:n.y+e},l={x:o.x+e,y:o.y+e},u=(0,Ds.A)(r,(function(t){return{x:t.x+e,y:t.y+e}})),c=i?yp(yp({},i),{x:i.x+e,y:i.y+e}):void 0;return yp(yp({},a),{startPoint:s,endPoint:l,pointsList:u,text:c})}var Ap=40,Sp=40;function Op(t,e){var n=t.keyboard,o=n.options.keyboard;n.on(["cmd + c","ctrl + c"],(function(){if(Sp=Ap,!(null===o||void 0===o?void 0:o.enabled))return!0;if(e.textEditElement)return!0;var n=t.options.guards,r=e.getSelectElements(!1),i=!n||!n.beforeClone||n.beforeClone(r);return!i||0===r.nodes.length&&0===r.edges.length?(bp=null,!0):(bp=r,bp.nodes.forEach((function(t){return xp(t,Ap)})),bp.edges.forEach((function(t){return wp(t,Ap)})),!1)})),n.on(["cmd + v","ctrl + v"],(function(){if(!(null===o||void 0===o?void 0:o.enabled))return!0;if(e.textEditElement)return!0;if(bp&&(bp.nodes||bp.edges)){t.clearSelectElements();var n=t.addElements(bp,Sp);if(!n)return!0;n.nodes.forEach((function(e){return t.selectElementById(e.id,!0)})),n.edges.forEach((function(e){return t.selectElementById(e.id,!0)})),bp.nodes.forEach((function(t){return xp(t,Ap)})),bp.edges.forEach((function(t){return wp(t,Ap)})),Sp+=Ap}return!1})),n.on(["cmd + z","ctrl + z"],(function(){return!(null===o||void 0===o?void 0:o.enabled)||(!!e.textEditElement||(t.undo(),!1))})),n.on(["cmd + y","ctrl + y"],(function(){return!(null===o||void 0===o?void 0:o.enabled)||(!!e.textEditElement||(t.redo(),!1))})),n.on(["backspace"],(function(){if(!(null===o||void 0===o?void 0:o.enabled))return!0;if(e.textEditElement)return!0;var n=e.getSelectElements(!0);return t.clearSelectElements(),n.edges.forEach((function(e){return e.id&&t.deleteEdge(e.id)})),n.nodes.forEach((function(e){return e.id&&t.deleteNode(e.id)})),!1}))}var Cp=function(){function t(t){t.keyboard||(t.keyboard={enabled:!1}),this.options=t;var e=t.lf;this.target=e.container,this.mousetrap=new(vp())(this.target),t.keyboard.enabled&&!e.options.isSilentMode&&this.enable(!0)}return t.prototype.initShortcuts=function(){var t,e=this,n=(null!==(t=this.options.keyboard)&&void 0!==t?t:{}).shortcuts;if(n)if((0,pp.A)(n))n.forEach((function(t){var n=t.keys,o=t.callback,r=t.action;return e.on(n,o,r)}));else{var o=n.keys,r=n.callback,i=n.action;this.on(o,r,i)}},t.prototype.on=function(t,e,n){this.mousetrap.bind(this.getKeys(t),e,n)},Object.defineProperty(t.prototype,"disabled",{get:function(){var t,e;return!0!==(null===(e=null===(t=this.options)||void 0===t?void 0:t.keyboard)||void 0===e?void 0:e.enabled)},enumerable:!1,configurable:!0}),t.prototype.off=function(t,e){this.mousetrap.unbind(this.getKeys(t),e)},t.prototype.enable=function(t){(this.disabled||t)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},t.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},t.prototype.destroy=function(){this.mousetrap.reset()},t.prototype.getKeys=function(t){var e=this;return(Array.isArray(t)?t:[t]).map((function(t){return e.formatKey(t)}))},t.prototype.formatKey=function(t){return t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},t}(),Np=Cp,Mp=function(){return Mp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Mp.apply(this,arguments)},Tp=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(o=i.next()).done)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},Pp=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Dp=Symbol("plugin registered by Logicflow.use"),kp=function(){function t(t){var e,n=this;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(t,e){return n.viewMap.set(t,e)},this.getView=function(t){return n.viewMap.get(t)};var o=Jr.get(t),r=o.container,i=o.width,a=o.height;this.options=o,this.container=this.initContainer(r,i,a),this.graphModel=new zc(Mp(Mp({},o),{container:this.container})),this.plugins=null!==(e=o.plugins)&&void 0!==e?e:[];var s=this.graphModel.eventCenter;this.tool=new Hh(this),this.dnd=new _h({lf:this}),this.history=new hp(s),this.keyboard=new Np({lf:this,keyboard:o.keyboard}),!1!==o.snapline&&(this.snaplineModel=new Gc(this.graphModel),Eh(s,this.snaplineModel)),o.isSilentMode||(Op(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(o.disabledPlugins)}return t.prototype.initContainer=function(t,e,n){var o=document.createElement("div");return o.style.position="relative",o.style.width=e?"".concat(e,"px"):"100%",o.style.height=n?"".concat(n,"px"):"100%",t.innerHTML="",t.appendChild(o),o},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return t.toStringTag},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e,n){if(void 0===n&&(n=!0),"string"===typeof t){var o={BaseEdge:lh,BaseEdgeModel:Ul,BaseNode:Od,BaseNodeModel:yu,RectNode:Td,RectNodeModel:Fu,CircleNode:kd,CircleNodeModel:_u,PolygonNode:Ld,PolygonNodeModel:Lu,TextNode:Xd,TextNodeModel:Uu,LineEdge:gh,LineEdgeModel:ou,DiamondNode:Hd,DiamondNodeModel:Cu,PolylineEdge:xh,PolylineEdgeModel:uu,BezierEdge:ph,BezierEdgeModel:Jl,EllipseNode:Wd,EllipseNodeModel:Pu,HtmlNode:Zd,HtmlNodeModel:Ku,h:r.n,type:t};if(this.viewMap.forEach((function(t){var e=t.extendKey;e&&(o[e]=t)})),this.graphModel.modelMap.forEach((function(t){var e=t.extendKey;e&&(o[e]=t)})),e){var i=e(o),a=i.view,s=i.model,l=a;n&&!l.isObserved&&(l.isObserved=!0,l=Ip(l)),this.setView(t,l),this.graphModel.setModel(t,s)}}else this.registerElement(t)},t.prototype.registerElement=function(t){var e=t.view;!1===t.isObserverView||e.isObserved||(e.isObserved=!0,e=Ip(e)),this.setView(t.type,e),this.graphModel.setModel(t.type,t.model)},t.prototype.batchRegister=function(t){var e=this;void 0===t&&(t=[]),(0,ri.A)(t,(function(t){e.registerElement(t)}))},t.prototype.defaultRegister=function(){var t=[{type:"rect",view:Td,model:Fu},{type:"circle",view:kd,model:_u},{type:"polygon",view:Ld,model:Lu},{type:"text",view:Xd,model:Uu},{type:"ellipse",view:Wd,model:Pu},{type:"diamond",view:Hd,model:Cu},{type:"html",view:Zd,model:Ku},{type:"line",view:gh,model:ou},{type:"polyline",view:xh,model:uu},{type:"bezier",view:ph,model:Jl}];this.batchRegister(t)},t.prototype.addNode=function(t,e,n){return void 0===e&&(e=_i.NODE_ADD),this.graphModel.addNode(t,e,n)},t.prototype.deleteNode=function(t){var e=this.graphModel.getNodeModelById(t);if(!e)return!1;var n=e.getData(),o=this.options.guards,r=!(null===o||void 0===o?void 0:o.beforeDelete)||o.beforeDelete(n);return r&&this.graphModel.deleteNode(t),r},t.prototype.cloneNode=function(t){var e=this.graphModel.getNodeModelById(t),n=null===e||void 0===e?void 0:e.getData();if(n){var o=this.options.guards,r=!(null===o||void 0===o?void 0:o.beforeClone)||o.beforeClone(n);if(r)return this.graphModel.cloneNode(t)}},t.prototype.changeNodeId=function(t,e){return this.graphModel.changeNodeId(t,e)},t.prototype.changeNodeType=function(t,e){this.graphModel.changeNodeType(t,e)},t.prototype.getNodeModelById=function(t){return this.graphModel.getNodeModelById(t)},t.prototype.getNodeDataById=function(t){var e=this.getNodeModelById(t);return null===e||void 0===e?void 0:e.getData()},t.prototype.getNodeIncomingEdge=function(t){return this.graphModel.getNodeIncomingEdge(t)},t.prototype.getNodeOutgoingEdge=function(t){return this.graphModel.getNodeOutgoingEdge(t)},t.prototype.getNodeIncomingNode=function(t){return this.graphModel.getNodeIncomingNode(t)},t.prototype.getNodeOutgoingNode=function(t){return this.graphModel.getNodeOutgoingNode(t)},t.prototype.createFakeNode=function(t){var e=this.graphModel.modelMap.get(t.type);if(!e)return console.warn("".concat(t.type,"")),null;var n=new e(Mp(Mp({},t),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(n),n},t.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},t.prototype.setNodeSnapLine=function(t){var e;null===(e=this.snaplineModel)||void 0===e||e.setNodeSnapLine(t)},t.prototype.removeNodeSnapLine=function(){var t;null===(t=this.snaplineModel)||void 0===t||t.clearSnapline()},t.prototype.setDefaultEdgeType=function(t){this.graphModel.setDefaultEdgeType(t)},t.prototype.addEdge=function(t){return this.graphModel.addEdge(t)},t.prototype.getEdgeDataById=function(t){var e=this.getEdgeModelById(t);return null===e||void 0===e?void 0:e.getData()},t.prototype.getEdgeModelById=function(t){return this.graphModel.getEdgeModelById(t)},t.prototype.getEdgeModels=function(t){var e=t.sourceNodeId,n=t.targetNodeId,o=[],r=this.graphModel.edges;return e&&n?(0,ri.A)(r,(function(t){t.sourceNodeId===e&&t.targetNodeId===n&&o.push(t)})):e?(0,ri.A)(r,(function(t){t.sourceNodeId===e&&o.push(t)})):n&&(0,ri.A)(r,(function(t){t.targetNodeId===n&&o.push(t)})),o},t.prototype.changeEdgeId=function(t,e){return this.graphModel.changeEdgeId(t,e)},t.prototype.changeEdgeType=function(t,e){this.graphModel.changeEdgeType(t,e)},t.prototype.deleteEdge=function(t){var e=this.graphModel.getEdgeModelById(t);if(!e)return!1;var n=e.getData(),o=this.options.guards,r=!(null===o||void 0===o?void 0:o.beforeDelete)||o.beforeDelete(n);return r&&this.graphModel.deleteEdgeById(t),r},t.prototype.deleteEdgeByNodeId=function(t){var e=t.sourceNodeId,n=t.targetNodeId;e&&n?this.graphModel.deleteEdgeBySourceAndTarget(e,n):e?this.graphModel.deleteEdgeBySource(e):n&&this.graphModel.deleteEdgeByTarget(n)},t.prototype.getNodeEdges=function(t){return this.graphModel.getNodeEdges(t)},t.prototype.addElements=function(t,e){var n=this,o=t.nodes,r=t.edges;void 0===e&&(e=40),console.log("distance",e);var i={},a={nodes:[],edges:[]};return(0,ri.A)(o,(function(t){var e=t.id,o=n.addNode(t);e&&(i[e]=o.id),a.nodes.push(o)})),(0,ri.A)(r,(function(t){var e=t.sourceNodeId,o=t.targetNodeId;i[e]&&(e=i[e]),i[o]&&(o=i[o]);var r=n.graphModel.addEdge(Mp(Mp({},t),{sourceNodeId:e,targetNodeId:o}));a.edges.push(r)})),a},t.prototype.selectElementById=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),this.graphModel.selectElementById(t,e),!e&&n&&this.graphModel.toFront(t)},t.prototype.getSelectElements=function(t){return void 0===t&&(t=!0),this.graphModel.getSelectElements(t)},t.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},t.prototype.getModelById=function(t){return this.graphModel.getElement(t)},t.prototype.getDataById=function(t){var e;return null===(e=this.graphModel.getElement(t))||void 0===e?void 0:e.getData()},t.prototype.deleteElement=function(t){var e,n,o,r=this.getModelById(t);if(!r)return!1;var i=(e={},e[xi.NODE]=this.deleteNode,e[xi.EDGE]=this.deleteEdge,e);return null!==(o=null===(n=i[r.BaseType])||void 0===n?void 0:n.call(this,t))&&void 0!==o&&o},t.prototype.setElementZIndex=function(t,e){return this.graphModel.setElementZIndex(t,e)},t.prototype.getAreaElement=function(t,e,n,o,r){return void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!1),this.graphModel.getAreaElement(t,e,n,o,r).map((function(t){return t.getData()}))},t.prototype.setProperties=function(t,e){var n;null===(n=this.graphModel.getElement(t))||void 0===n||n.setProperties(mi(e))},t.prototype.getProperties=function(t){var e;return null===(e=this.graphModel.getElement(t))||void 0===e?void 0:e.getProperties()},t.prototype.deleteProperty=function(t,e){var n;null===(n=this.graphModel.getElement(t))||void 0===n||n.deleteProperty(e)},t.prototype.updateAttributes=function(t,e){this.graphModel.updateAttributes(t,e)},t.prototype.editText=function(t){this.graphModel.editText(t)},t.prototype.updateText=function(t,e){this.graphModel.updateText(t,e)},t.prototype.updateEditConfig=function(t){var e=this.graphModel,n=e.editConfigModel,o=e.transformModel,r=n.snapGrid;if(n.updateEditConfig(t),void 0!==(null===t||void 0===t?void 0:t.stopMoveGraph)&&o.updateTranslateLimits(t.stopMoveGraph),(null===t||void 0===t?void 0:t.isSilentMode)?this.keyboard.disable():this.keyboard.enable(!0),!(0,ii.A)(null===t||void 0===t?void 0:t.snapGrid)&&t.snapGrid!==r){var i=this.graphModel.grid.size,a=void 0===i?1:i;this.graphModel.updateGridSize(t.snapGrid?a:1)}},t.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},t.prototype.setTheme=function(t){this.graphModel.setTheme(t)},t.prototype.focusByElement=function(t){var e=void 0,n=this.getNodeModelById(t);if(n){var o=n.getData(),r=o.x,i=o.y;e={x:r,y:i}}var a=this.getEdgeModelById(t);if(a){var s=a.textPosition;r=s.x,i=s.y;e={x:r,y:i}}e&&this.focusByCoordinate(e)},t.prototype.focusByCoordinate=function(t){var e=this.graphModel,n=e.transformModel,o=e.width,r=e.height,i=t.x,a=t.y;n.focusOn(i,a,o,r)},t.prototype.focusOn=function(t){if("string"===typeof t)this.focusByElement(t);else if("x"in t&&"y"in t)this.focusByCoordinate(t);else{var e=t.id,n=t.coordinate;e&&this.focusByElement(e),n&&this.focusByCoordinate(n)}},t.prototype.resize=function(t,e){this.graphModel.resize(t,e),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},t.prototype.toFront=function(t){this.graphModel.toFront(t)},t.prototype.getPointByClient=function(t,e){return"object"===typeof t?this.graphModel.getPointByClient(t):"number"===typeof e?this.graphModel.getPointByClient({x:t,y:e}):void 0},t.prototype.getGraphData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,Pp([n],Tp(t),!1)):n},t.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},t.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},t.prototype.renderRawData=function(t){this.graphModel.graphDataToModel(mi(t)),!1!==this.options.history&&this.history.watch(this.graphModel),kr((0,oi.Y)(ed,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(_i.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},t.prototype.render=function(t){var e=(0,ai.A)(t);this.adapterIn&&(e=this.adapterIn(e)),this.renderRawData(e)},t.prototype.undo=function(){if(this.history.undoAble()){var t=mi(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},t.prototype.redo=function(){if(this.history.redoAble()){var t=mi(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},t.prototype.zoom=function(t,e){var n=this.graphModel.transformModel;return n.zoom(t,e)},t.prototype.resetZoom=function(){var t=this.graphModel.transformModel;t.resetZoom()},t.prototype.setZoomMiniSize=function(t){var e=this.graphModel.transformModel;e.setZoomMiniSize(t)},t.prototype.setZoomMaxSize=function(t){var e=this.graphModel.transformModel;e.setZoomMaxSize(t)},t.prototype.getTransform=function(){var t=this.graphModel.transformModel,e=t.SCALE_X,n=t.SCALE_Y,o=t.TRANSLATE_X,r=t.TRANSLATE_Y;return{SCALE_X:e,SCALE_Y:n,TRANSLATE_X:o,TRANSLATE_Y:r}},t.prototype.translate=function(t,e){var n=this.graphModel.transformModel;n.translate(t,e)},t.prototype.resetTranslate=function(){var t=this.graphModel.transformModel,e=t.TRANSLATE_X,n=t.TRANSLATE_Y;this.translate(-e,-n)},t.prototype.translateCenter=function(){this.graphModel.translateCenter()},t.prototype.fitView=function(t,e){void 0===e&&(e=t),this.graphModel.fitView(t,e)},t.prototype.openEdgeAnimation=function(t){this.graphModel.openEdgeAnimation(t)},t.prototype.closeEdgeAnimation=function(t){this.graphModel.closeEdgeAnimation(t)},t.prototype.on=function(t,e){this.graphModel.eventCenter.on(t,e)},t.prototype.off=function(t,e){this.graphModel.eventCenter.off(t,e)},t.prototype.once=function(t,e){this.graphModel.eventCenter.once(t,e)},t.prototype.emit=function(t,e){this.graphModel.eventCenter.emit(t,e)},t.use=function(t,e){var n,o=t.pluginName;if(!o)throw new Error(" pluginName!");this.extensions.set(o,(n={},n[Dp]=Dp,n.extension=t,n.props=e,n))},t.prototype.installPlugins=function(e){var n=this;void 0===e&&(e=[]);var o=Array.from(t.extensions,(function(t){var e=Tp(t,2),n=e[1];return n})),r=Pp(Pp([],Tp(this.plugins),!1),Tp(o),!1);(0,ri.A)(r,(function(t){var o,r;Dp in t?(o=t.extension,r=t.props):o=t;var i=null===o||void 0===o?void 0:o.pluginName;-1===(0,si.A)(e,i)&&n.installPlugin(o,r)}))},t.prototype.installPlugin=function(e,n){var o,r;if("pluginName"in e&&"install"in e){var i=e.pluginName,a=e.install,s=e.render;i&&(a&&a.call(e,this,t),s&&this.components.push(s.bind(e)),this.extension[i]=e)}else{var l=e,u=l.pluginName,c=new l({lf:this,LogicFlow:t,props:n,options:null!==(r=null===(o=this.options.pluginsOptions)||void 0===o?void 0:o[u])&&void 0!==r?r:{}});c.render&&this.components.push(c.render.bind(c)),this.extension[u]=c}},t.prototype.destroy=function(){var t;for(var e in this.clearData(),kr(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy(),this.extension){var n=this.extension[e];"destroy"in n&&(null===(t=n.destroy)||void 0===t||t.call(n))}},t.extensions=new Map,t}();(function(t){t.toStringTag="LF.".concat(t.name)})(kp||(kp={}));var Rp=kp;function Ip(t){return go(t)}var Lp=Rp}}]);