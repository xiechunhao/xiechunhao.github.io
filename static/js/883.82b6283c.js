/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2025-03-11 22:54:54
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[883],{30883:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var o=l(34641),a=l(27386);const n={class:"roles-container"},r={key:0},i={key:0},s={key:0},d={key:0},u={key:0},m={key:0};function p(e,t,l,p,b,c){const f=(0,o.g2)("el-alert"),k=(0,o.g2)("el-radio-button"),y=(0,o.g2)("el-radio-group"),g=(0,o.g2)("el-form-item"),_=(0,o.g2)("el-button"),v=(0,o.g2)("el-tag"),w=(0,o.g2)("el-descriptions-item"),h=(0,o.g2)("el-descriptions"),W=(0,o.g2)("el-form"),F=(0,o.g2)("el-table-column"),C=(0,o.g2)("vab-icon"),X=(0,o.g2)("el-table"),E=(0,o.g2)("el-col"),A=(0,o.g2)("el-row"),Q=(0,o.gN)("permissions");return(0,o.uX)(),(0,o.CE)("div",n,[e.loginInterception?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(f,{key:0,closable:!1,"show-icon":"",title:"检测到您当前的登录拦截已关闭，无法模拟切换角色功能，请在src/config/setting.config.js中配置loginInterception为ture，开启登录拦截",type:"success"})),(0,o.bF)(f,{closable:!1,"show-icon":"",title:`当前路由模式为：{ authentication:${e.authentication} }，是否开启角色权限控制功能：{ rolesControl:${e.rolesControl} }`,type:"success"},null,8,["title"]),(0,o.bF)(W,{"label-position":"top","label-width":"140px",model:e.form},{default:(0,o.k6)((()=>[(0,o.bF)(g,{label:"账号切换"},{default:(0,o.k6)((()=>[(0,o.bF)(y,{modelValue:e.form.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.account=t),onChange:e.handleChangeRole},{default:(0,o.k6)((()=>[(0,o.bF)(k,{label:"admin"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("admin")]))),_:1}),(0,o.bF)(k,{label:"editor"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("editor")]))),_:1}),(0,o.bF)(k,{label:"test"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("test")]))),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,o.bF)(g,{label:"过期Token模拟访问(令牌失效5s)"},{default:(0,o.k6)((()=>[(0,o.bF)(_,{type:"primary",onClick:e.handleRefreshToken},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)(" 点击模拟token过期访问接口，无痛刷新 ")]))),_:1},8,["onClick"])])),_:1}),(0,o.bF)(g,{label:"当前账号"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{border:"",column:3,direction:"vertical"},{default:(0,o.k6)((()=>[(0,o.bF)(w,null,{label:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("角色")]))),default:(0,o.k6)((()=>[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(JSON.stringify(e.role)),1)])),_:1})])),_:1}),(0,o.bF)(w,null,{label:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("权限点")]))),default:(0,o.k6)((()=>[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(JSON.stringify(e.permission)),1)])),_:1})])),_:1}),(0,o.bF)(w,null,{label:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("token")]))),default:(0,o.k6)((()=>[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.token),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(g,{label:"按钮级角色"},{default:(0,o.k6)((()=>[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)(' 拥有["Admin"]角色的按钮 ')]))),_:1})),[[Q,["Admin"]]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)(' 未拥有["Admin"]角色的按钮 ')]))),_:1})),[[Q,{role:["Admin"],mode:"except"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.eW)(' 拥有["Editor"]角色的按钮 ')]))),_:1})),[[Q,["Editor"]]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)(' 未拥有["Editor"]角色的按钮 ')]))),_:1})),[[Q,{role:["Editor"],mode:"except"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)(' 同时拥有["Admin","Editor"]角色的按钮 ')]))),_:1})),[[Q,{role:["Admin","Editor"],mode:"allOf"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)(' 拥有["Test"]角色的按钮 ')]))),_:1})),[[Q,["Test"]]])])),_:1}),(0,o.bF)(g,{label:"按钮级权限点"},{default:(0,o.k6)((()=>[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)(' 拥有["read:system"]权限点的按钮 ')]))),_:1})),[[Q,{permission:["read:system"]}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" 未拥有[\"'read:system'\"]权限点的按钮 ")]))),_:1})),[[Q,{permission:["read:system"],mode:"except"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)(' 拥有["write:system"]权限点的按钮 ')]))),_:1})),[[Q,{permission:["write:system"]}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)(' 未拥有["write:system"]权限点的按钮 ')]))),_:1})),[[Q,{permission:["write:system"],mode:"except"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(' 拥有["delete:system"]权限点的按钮 ')]))),_:1})),[[Q,{permission:["delete:system"]}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[19]||(t[19]=[(0,o.eW)(' 未拥有["delete:system"]权限点的按钮 ')]))),_:1})),[[Q,{permission:["delete:system"],mode:"except"}]])])),_:1}),(0,o.bF)(g,{label:"按钮级角色&权限点"},{default:(0,o.k6)((()=>[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[20]||(t[20]=[(0,o.eW)(' 拥有["Admin"]角色或者["delete:system"]权限点的按钮 ')]))),_:1})),[[Q,{role:["Admin"],permission:["delete:system"]}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"primary"},{default:(0,o.k6)((()=>t[21]||(t[21]=[(0,o.eW)(' 拥有["Editor"]角色和["read:system"]权限点的按钮 ')]))),_:1})),[[Q,{role:["Editor"],permission:["read:system"],mode:"allOf"}]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(_,{type:"danger"},{default:(0,o.k6)((()=>t[22]||(t[22]=[(0,o.eW)(' 未拥有["Admin"]和["delete:system"]权限点的按钮 ')]))),_:1})),[[Q,{role:["Admin"],permission:["delete:system"],mode:"except"}]])])),_:1}),(0,o.bF)(g,{label:"路由"})])),_:1},8,["model"]),(0,o.bF)(A,{gutter:20},{default:(0,o.k6)((()=>[(0,o.bF)(E,{span:24},{default:(0,o.k6)((()=>[(0,o.bF)(X,{border:"",data:e.tableData,"default-expand-all":"","row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:(0,o.k6)((()=>[(0,o.bF)(F,{align:"center",label:"name",prop:"name","show-overflow-tooltip":"",width:"220"}),(0,o.bF)(F,{align:"center",label:"path",prop:"path","show-overflow-tooltip":"",width:"220"}),(0,o.bF)(F,{align:"center",label:"component",prop:"component","show-overflow-tooltip":"",width:"220"}),(0,o.bF)(F,{align:"center",label:"redirect",prop:"redirect","show-overflow-tooltip":"",width:"220"}),(0,o.bF)(F,{align:"center",label:"title",prop:"meta.title","show-overflow-tooltip":""}),(0,o.bF)(F,{align:"center",label:"icon","show-overflow-tooltip":""},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",r,[e.meta.icon?((0,o.uX)(),(0,o.Wv)(C,{key:0,icon:e.meta.icon},null,8,["icon"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(F,{align:"center",label:"noClosable","show-overflow-tooltip":""},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",i,(0,a.v_)(e.meta.noClosable||!1),1)):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(F,{align:"center",label:"noKeepAlive","show-overflow-tooltip":"",width:"100"},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",s,[e.meta.noKeepAlive?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("true")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)("false")],64))])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(F,{align:"center",label:"badge","show-overflow-tooltip":""},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",d,(0,a.v_)(e.meta.badge),1)):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(F,{align:"center",label:"isCustomSvg","show-overflow-tooltip":"",width:"140"},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",u,(0,a.v_)(e.meta.isCustomSvg||!1),1)):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(F,{align:"center",label:"tabHidden","show-overflow-tooltip":""},{default:(0,o.k6)((({row:e})=>[e.meta?((0,o.uX)(),(0,o.CE)("span",m,[e.meta.tabHidden?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("true")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)("false")],64))])):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})])}var b=l(26423),c=l(26157),f=l(85230),k=l(67787),y=l(25967),g=l(28814),_=l(2063),v=l(37489),w=(0,o.pM)({name:"Permission",setup(){const e=(0,o.WQ)("$baseLoading"),t=(0,o.WQ)("$baseMessage"),l=(0,b.D)(),{role:a,permission:n}=storeToRefs(l),r=(0,c.k)(),{username:i,token:s}=storeToRefs(r),d=(0,v.Kh)({form:{account:i.value},tableData:[],res:[],authentication:f.authentication,loginInterception:f.loginInterception,rolesControl:f.rolesControl}),u=async()=>{const{data:{list:e}}=await(0,k.v)();d.tableData=(0,y.Jo)([...e])},m=async()=>{e(0,"正在切换账号请稍后..."),await localStorage.setItem(f.tokenTableName,`${d.form.account}-token-${_.Random.guid()}-${(new Date).getTime()}`),await location.reload()},p=async()=>{const{msg:e}=await(0,g.x)();t(`${e}: [${s.value}] `,"success","vab-hey-message-success")};return u(),{...(0,v.QW)(d),role:a,permission:n,username:i,token:s,fetchData:u,handleChangeRole:m,handleRefreshToken:p}}});function h(e){e.__source="src/views/vab/permission/index.vue"}var W=l(48499);"function"===typeof h&&h(w);const F=(0,W.A)(w,[["render",p],["__scopeId","data-v-53426a40"]]);var C=F}}]);