/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{a as L}from"./roleManagement-D_3aucP0.js";import{D as E,_ as M}from"./index-DXRDwnmL.js";import{d as B,C as D,V as l,u as a,G as N,D as d,o as U,L as s,e as x,Z as j,_ as F}from"./vsv-element-plus-DQNbQgVr.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";const O={class:"vab-tree-border"},T=B({name:"RoleManagementEdit",__name:"RoleManagementEdit",emits:["fetch-data"],setup(q,{expose:y,emit:v}){const k=v,c=ref(),p=ref(null),o=reactive({role:"",btnRolesCheckedList:["read:system","write:system","delete:system","read:index","write:index","delete:index","read:index","write:index","delete:index"]}),w=reactive({role:[{required:!0,trigger:"blur",message:"请输入角色码"}]}),m=ref(""),r=ref(!1),_=ref([]);y({showEdit:t=>{r.value=!0,nextTick(()=>{t?(m.value="编辑",Object.assign(o,t)):(m.value="添加",o.btnRolesCheckedList=["read:system","write:system","delete:system","read:index","write:index","delete:index","read:index","write:index","delete:index"])})}});const b=()=>{var t,e;(t=c.value)==null||t.clearValidate(),(e=c.value)==null||e.resetFields(),k("fetch-data")},g=async()=>{const{data:t}=await E();_.value=t.list},V=()=>{var t;(t=c.value)==null||t.validate(async e=>{if(e){const i={"treeArray:":p.value.getCheckedKeys()},{msg:f}=await L({...o,...i});await $baseMessage(f,"success","hey"),await b(),r.value=!1}})};return onBeforeMount(()=>{g()}),(t,e)=>{const u=d("el-input"),i=d("el-form-item"),f=d("el-tree"),h=d("el-form"),C=d("el-button"),R=d("vab-dialog");return U(),D(R,{modelValue:a(r),"onUpdate:modelValue":e[2]||(e[2]=n=>N(r)?r.value=n:null),"append-to-body":"",title:a(m),width:"500px",onClose:b},{footer:l(()=>[s(C,{type:"primary",onClick:V},{default:l(()=>e[3]||(e[3]=[F("保存")])),_:1})]),default:l(()=>[s(h,{ref_key:"formRef",ref:c,"label-width":"80px",model:a(o),rules:a(w)},{default:l(()=>[s(i,{label:"角色码",prop:"role"},{default:l(()=>[s(u,{modelValue:a(o).role,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).role=n),clearable:""},null,8,["modelValue"])]),_:1}),s(i,{label:"菜单"},{default:l(()=>[x("div",O,[s(f,{ref_key:"treeRef",ref:p,data:a(_),"default-checked-keys":a(o).menuCheckedList,"default-expanded-keys":[],"node-key":"path","show-checkbox":""},{default:l(({data:n})=>[x("span",null,j(n.meta.title),1)]),_:1},8,["data","default-checked-keys"])])]),_:1}),s(i,{label:"按钮权限"},{default:l(()=>[s(u,{modelValue:a(o).btnRolesCheckedList,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).btnRolesCheckedList=n),clearable:"",rows:3,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),$=M(T,[["__scopeId","data-v-09484dba"]]);export{$ as default};
