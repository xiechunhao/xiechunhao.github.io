/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{d as X,b as k,L as t,Q as Y,V as o,D as a,X as Z,u as l,C as D,o as m,a7 as G,_ as u,ac as H,Y as J,a0 as K,Z as S,I as O,a9 as P}from"./vsv-element-plus-DQNbQgVr.js";import{g as W,d as $}from"./roleManagement-D_3aucP0.js";import"./index-DXRDwnmL.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";const ee={class:"role-management-container auto-height-container"},se=X({name:"RoleManagement",__name:"index",setup(te){const v=ref(),_=ref(null),b=ref([]),c=ref(!0),y=ref(0),f=ref([]),i=reactive({pageNo:1,pageSize:20,role:""}),q=n=>{f.value=n},w=(n={})=>{n.id?_.value.showEdit(n):_.value.showEdit()},C=(n={})=>{if(n.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:e}=await $({ids:n.id});$baseMessage(e,"success","hey"),await d()});else if(f.value.length>0){const e=f.value.map(r=>r.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:r}=await $({ids:e});$baseMessage(r,"success","hey"),await d()})}else $baseMessage("您未选中任何行","warning","hey")},R=n=>{i.pageNo=1,i.pageSize=n,d()},x=n=>{i.pageNo=n,d()},z=()=>{i.pageNo=1,d()},d=async()=>{c.value=!0;const{data:n}=await W(i);b.value=n.list,y.value=n.total,c.value=!1};return onActivated(()=>{var n;(n=v.value)==null||n.doLayout()}),onBeforeMount(()=>{d()}),(n,e)=>{const r=a("el-button"),M=a("vab-query-form-left-panel"),N=a("el-input"),h=a("el-form-item"),L=a("el-form"),V=a("vab-query-form-right-panel"),B=a("vab-query-form"),p=a("el-table-column"),E=a("el-tag"),F=a("el-space"),j=a("el-empty"),A=a("el-table"),I=a("vab-pagination"),Q=a("role-management-edit"),T=Z("loading");return m(),k("div",ee,[t(B,null,{default:o(()=>[t(M,{span:12},{default:o(()=>[t(r,{icon:l(G),type:"primary",onClick:e[0]||(e[0]=s=>w())},{default:o(()=>e[4]||(e[4]=[u("添加")])),_:1},8,["icon"]),t(r,{icon:l(H),type:"danger",onClick:e[1]||(e[1]=s=>C())},{default:o(()=>e[5]||(e[5]=[u("批量删除")])),_:1},8,["icon"])]),_:1}),t(V,{span:12},{default:o(()=>[t(L,{inline:"",model:l(i),onSubmit:e[3]||(e[3]=J(()=>{},["prevent"]))},{default:o(()=>[t(h,null,{default:o(()=>[t(N,{modelValue:l(i).role,"onUpdate:modelValue":e[2]||(e[2]=s=>l(i).role=s),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入角色"},null,8,["modelValue"])]),_:1}),t(h,null,{default:o(()=>[t(r,{icon:l(K),loading:l(c),type:"primary",onClick:z},{default:o(()=>e[6]||(e[6]=[u("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),Y((m(),D(A,{ref_key:"tableRef",ref:v,border:"",data:l(b),onSelectionChange:q},{empty:o(()=>[t(j,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(p,{type:"selection",width:"38"}),t(p,{align:"center",label:"序号","show-overflow-tooltip":"",width:"55"},{default:o(({$index:s})=>[u(S(s+1),1)]),_:1}),t(p,{align:"center",label:"id","min-width":"180",prop:"id","show-overflow-tooltip":""}),t(p,{align:"center",label:"角色码",prop:"role","show-overflow-tooltip":""}),t(p,{align:"center",label:"按钮权限","min-width":"320"},{default:o(({row:s})=>[t(F,{wrap:""},{default:o(()=>[(m(!0),k(O,null,P(s.btnRolesCheckedList,(g,U)=>(m(),D(E,{key:U},{default:o(()=>[u(S(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(p,{align:"center",label:"操作",width:"150"},{default:o(({row:s})=>[t(r,{text:"",type:"primary",onClick:g=>w(s)},{default:o(()=>e[7]||(e[7]=[u("编辑")])),_:2},1032,["onClick"]),t(r,{text:"",type:"danger",onClick:g=>C(s)},{default:o(()=>e[8]||(e[8]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,l(c)]]),t(I,{"current-page":l(i).pageNo,"page-size":l(i).pageSize,total:l(y),onCurrentChange:x,onSizeChange:R},null,8,["current-page","page-size","total"]),t(Q,{ref_key:"editRef",ref:_,onFetchData:d},null,512)])}}});export{se as default};
