/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 16:00:51 
 */
import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CsTYoAB6.js";import{_ as O}from"./index-CxTxnLLm.js";import{_ as W}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BToSE4-Z.js";import{_ as A}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DxKnGS_H.js";import{d as P,r as p,p as j,Q as H,a7 as J,o as h,b as Q,W as e,T as t,u as l,bq as U,a8 as _,aA as Z,aS as G,Z as K,S as X,a1 as w,a9 as Y,aO as ee,aq as te,au as ae,aP as ne,bD as oe,aH as le,aJ as se,aR as ie,a0 as re}from"./vsv-element-plus-DDEqdpLt.js";import{g as ce,a as C}from"./workOrder-DMW3CeLZ.js";import{$ as k,f as d}from"./index-CxtKn6OH.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const pe={class:"work-order-container auto-height-container"},Ce=P({name:"WorkOrder",__name:"WorkOrder",setup(_e){const f=p(),g=p([]),u=p(!0),b=p(0),m=p([]),s=j({pageNo:1,pageSize:20});H(()=>{var a;(a=f.value)==null||a.doLayout()});const c=async()=>{u.value=!0;const{data:a}=await ce(s);g.value=a.list,b.value=a.total,u.value=!1},E=a=>{s.pageNo=1,s.pageSize=a,c()},S=a=>{s.pageNo=a,c()},q=()=>{s.pageNo=1,c()},z=a=>{m.value=a},y=a=>{if(a.id)k("您确定要删除当前项吗",null,async()=>{const{msg:n}=await C({ids:a.id});d(n,"success","hey"),await c()});else if(m.value.length>0){const n=m.value.map(r=>r.id).join(",");k("您确定要删除选中项吗",null,async()=>{const{msg:r}=await C({ids:n});d(r,"success","hey"),await c()})}else d("您未选中任何行","warning","hey")};return J(()=>{c()}),(a,n)=>{const r=Y,D=A,N=ee,v=te,$=ae,x=W,B=O,i=ne,R=oe,T=le,V=se,L=ie,F=M,I=re;return h(),Q("div",pe,[e(B,null,{default:t(()=>[e(D,null,{default:t(()=>[e(r,{icon:l(U),type:"danger",onClick:y},{default:t(()=>n[2]||(n[2]=[_("删除")])),_:1},8,["icon"])]),_:1}),e(x,null,{default:t(()=>[e($,{inline:"",model:l(s),onSubmit:n[1]||(n[1]=Z(()=>{},["prevent"]))},{default:t(()=>[e(v,{label:"工单标题"},{default:t(()=>[e(N,{modelValue:l(s).title,"onUpdate:modelValue":n[0]||(n[0]=o=>l(s).title=o),clearable:"",placeholder:"请输入工单标题"},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(r,{icon:l(G),loading:l(u),"native-type":"submit",type:"primary",onClick:q},{default:t(()=>n[3]||(n[3]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),K((h(),X(L,{ref_key:"tableRef",ref:f,border:"",data:l(g),onSelectionChange:z},{empty:t(()=>[e(V,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:t(({$index:o})=>[_(w(o+1),1)]),_:1}),e(i,{align:"center",label:"工单号","min-width":"200",prop:"uuid","show-overflow-tooltip":""}),e(i,{align:"center",label:"标题","min-width":"200",prop:"title","show-overflow-tooltip":""}),e(i,{align:"center",label:"进度","min-width":"180"},{default:t(({row:o})=>[e(R,{percentage:parseInt(o.progress),status:o.progress=="100"?"success":""},null,8,["percentage","status"])]),_:1}),e(i,{align:"center",label:"提交者",prop:"submit"}),e(i,{align:"center",label:"受理人员","min-width":"90",prop:"accept","show-overflow-tooltip":""}),e(i,{align:"center",label:"工单状态","min-width":"90"},{default:t(({row:o})=>[e(T,{effect:"dark",type:o.status=="处理中"?"warning":o.status=="已处理"?"success":"primary"},{default:t(()=>[_(w(o.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"操作",width:"80"},{default:t(({row:o})=>[e(r,{text:"",type:"danger",onClick:ue=>y(o)},{default:t(()=>n[4]||(n[4]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,l(u)]]),e(F,{"current-page":l(s).pageNo,"page-size":l(s).pageSize,total:l(b),onCurrentChange:S,onSizeChange:E},null,8,["current-page","page-size","total"])])}}});export{Ce as default};
