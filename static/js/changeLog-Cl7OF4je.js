/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-11 00:13:46 
 */
import{d as j,a5 as B,a as p,J as a,U as o,A as n,z as m,u as l,G as D,a2 as S,Z as y,o as c,a6 as H,b as Y}from"./vsv-element-plus-CWjYVfvE.js";import{d as N,v as h,_ as R}from"./index-D_keMk_X.js";import"./vsv-icon-CzoHxvAi.js";import"./vsv-nprogress-D-M_H-zP.js";const z=()=>N({url:"https://api.vuejs-core.cn/getShopChangeLog",method:"get"}),A={class:"change-log-container no-background-container auto-height-container"},U=["innerHTML"],E=["innerHTML"],F="https://vuejs-core.cn",G=j({name:"ChangeLog",__name:"changeLog",setup(I){const f=B().format("YYYY-M-D"),v=ref([]),d=ref(h),i=ref(!1),w=e=>e.sort((t,_)=>{const u=new Date(t.timestamp),r=new Date(_.timestamp);return u<r?1:u>r?-1:0});onBeforeMount(async()=>{const{data:e}=await z(),t=w(e);t[0].timestamp=f,t.unshift({timestamp:f,content:`
    小版本更新日志及bug修复日志演示地址不做展示，具体更新内容请购买后前往绑定仓库查看，
    <a href='${F}/authorization/shop-vite.html' target='_blank'>点我购买</a>
    `,waver:"success"}),v.value=t}),onMounted(()=>{["localhost","127","192","vuejs-core"].some(e=>location.hostname.includes(e))||$baseMessage("检测到当前演示地址非官方演示地址，即将为您跳转，请稍后","warning","hey",()=>{location.href="https://vuejs-core.cn/shop-vite/#/changeLog"})});const k=async()=>{i.value=!0;const{data:{version:e}}=await axios({url:`./vue-shop-vite-version.json?t=${Date.now()}`,method:"get"});return d.value=e,setTimeout(()=>{i.value=!1},300),e},g=async()=>{const e=await k();h===e?$baseMessage("当前已是最新版本","success","hey"):$baseAlert("请手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容",`检测到新版本V${e}`,()=>{$pub("update-website",e)})};return onBeforeMount(()=>{location.hostname!=="localhost"&&!location.hostname.includes("127")&&!location.hostname.includes("192")&&g()}),(e,t)=>{const _=n("vab-icon"),u=n("el-button"),r=n("vab-alert"),C=n("vab-dot"),b=n("vab-card"),L=n("el-timeline-item"),M=n("el-timeline"),x=n("el-scrollbar"),$=n("el-col"),T=n("el-row");return c(),p("div",A,[a(T,{gutter:20},{default:o(()=>[a($,{lg:15,md:24,sm:24,xl:12,xs:24},{default:o(()=>[a(b,{class:"auto-height-card has-header",skeleton:"","skeleton-rows":16},{header:o(()=>[a(_,{icon:"file-word-line"}),t[1]||(t[1]=y(" 更新日志 ")),a(u,{class:"card-header-button",type:"primary",onClick:g},{default:o(()=>t[0]||(t[0]=[y("检查更新")])),_:1})]),default:o(()=>[l(d)===l(h)?(c(),m(r,{key:0,title:l(i)?"正在检查更新...":"当前已是最新版本，您可以手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容",type:"info"},null,8,["title"])):(c(),m(r,{key:1,title:l(i)?"正在检查更新...":`检测到新版本V${l(d)}！请手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容`,type:"info"},null,8,["title"])),a(x,{style:{height:"calc(100% - 60px)"}},{default:o(()=>[a(M,null,{default:o(()=>[(c(!0),p(D,null,S(l(v),(s,V)=>(c(),m(L,{key:V,color:s.color,timestamp:s.timestamp},H({default:o(()=>[s.card?(c(),m(b,{key:0},{default:o(()=>[Y("div",{class:"change-log-item",innerHTML:s.content},null,8,U)]),_:2},1024)):(c(),p("div",{key:1,class:"change-log-item",innerHTML:s.content},null,8,E))]),_:2},[s.waver?{name:"dot",fn:o(()=>[a(C,{type:s.waver},null,8,["type"])]),key:"0"}:void 0]),1032,["color","timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),O=R(G,[["__scopeId","data-v-0571e0b3"]]);export{O as default};
