/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-10 23:35:01 
 */
import{k as _,C as S,f as T,_ as h}from"./index-8bsmFSvN.js";import{d as B,r as m,h as V,a6 as F,S as U,o as j,T as s,Z as o,ao as q,u as a,ap as I,aS as L,aL as O,a8 as R,a7 as N,i as $,p as z}from"./vsv-element-plus-BKBbsRMj.js";function P(r){return _({url:"/departmentManagement/getList",method:"get",params:r})}const Z=r=>_({url:"/departmentManagement/doEdit",method:"post",data:r}),Q=r=>_({url:"/departmentManagement/doDelete",method:"post",data:r}),A=B({name:"DepartmentManagementEdit",__name:"DepartmentManagementEdit",emits:["fetch-data"],setup(r,{expose:v,emit:E}){const x=E,u=m(),f=m([]),l=V({parentValue:""}),y=V({parentValue:[{required:!0,trigger:"blur",message:"请选择父节点"}],label:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]}),i=m(""),d=m(!1),M=async()=>{const{data:t}=await P();f.value=t.list};v({showEdit:t=>{d.value=!0,z(()=>{t?(delete t.value,i.value="编辑",Object.assign(l,t)):i.value="添加"})}});const g=()=>{var t,e;(t=u.value)==null||t.clearValidate(),(e=u.value)==null||e.resetFields(),x("fetch-data")},D=()=>{var t;(t=u.value)==null||t.validate(async e=>{if(e){const{msg:p}=await Z(l);await T(p,"success","hey"),await g(),d.value=!1}})};return F(()=>{M()}),(t,e)=>{const p=L,c=I,b=O,w=q,k=R,C=S;return j(),U(C,{modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=n=>$(d)?d.value=n:null),"append-to-body":"",title:a(i),width:"500px",onClose:g},{footer:s(()=>[o(k,{type:"primary",onClick:D},{default:s(()=>e[4]||(e[4]=[N("保存")])),_:1})]),default:s(()=>[o(w,{ref_key:"formRef",ref:u,"label-width":"80px",model:a(l),rules:a(y)},{default:s(()=>[o(c,{label:"父节点",prop:"parentValue"},{default:s(()=>[o(p,{modelValue:a(l).parentValue,"onUpdate:modelValue":e[0]||(e[0]=n=>a(l).parentValue=n),data:a(f)},null,8,["modelValue","data"])]),_:1}),o(c,{label:"名称",prop:"label"},{default:s(()=>[o(b,{modelValue:a(l).label,"onUpdate:modelValue":e[1]||(e[1]=n=>a(l).label=n),clearable:""},null,8,["modelValue"])]),_:1}),o(c,{label:"排序",prop:"order"},{default:s(()=>[o(b,{modelValue:a(l).order,"onUpdate:modelValue":e[2]||(e[2]=n=>a(l).order=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),G=h(A,[["__scopeId","data-v-70c178fd"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{W as D,G as _,Q as d,P as g};
