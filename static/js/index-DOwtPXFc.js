/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{aI as rt,aJ as Re,aK as ki,aL as ll,aM as za,aN as Tr,aO as Qe,aP as Vn,aQ as Rn,aR as hr,aS as Lr,aT as un,aU as Lc,aV as kc,aW as cs,aX as hs,aY as jc,aZ as $d,t as Ic,a_ as Bc,g as ba,a$ as Ll,b0 as Hc,b1 as Yd,b2 as Ud,b3 as Fc,b4 as Gd,b5 as zc,c as Xa,b as Xc,o as Qi,L as ii,C as Wa,S as $a,e as Wc,D as kn,ad as $c,V as kl}from"./vsv-element-plus-DQNbQgVr.js";import{c as Yc,_ as Uc,g as Gc}from"./index-DXRDwnmL.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";var xa,Le,Vd,or,jl,Kd,ps,qd,ul,gs,vs,ji={},Zd=[],Vc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ea=Array.isArray;function zn(r,e){for(var t in e)r[t]=e[t];return r}function dl(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function _e(r,e,t){var n,i,o,a={};for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?xa.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(o in r.defaultProps)a[o]===void 0&&(a[o]=r.defaultProps[o]);return So(r,a,n,i,null)}function So(r,e,t,n,i){var o={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Vd,__i:-1,__u:0};return i==null&&Le.vnode!=null&&Le.vnode(o),o}function wa(){return{current:null}}function kr(r){return r.children}function He(r,e){this.props=r,this.context=e}function jr(r,e){if(e==null)return r.__?jr(r.__,r.__i+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?jr(r):null}function Jd(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return Jd(r)}}function Il(r){(!r.__d&&(r.__d=!0)&&or.push(r)&&!Po.__r++||jl!==Le.debounceRendering)&&((jl=Le.debounceRendering)||Kd)(Po)}function Po(){var r,e,t,n,i,o,a,s;for(or.sort(ps);r=or.shift();)r.__d&&(e=or.length,n=void 0,o=(i=(t=r).__v).__e,a=[],s=[],t.__P&&((n=zn({},i)).__v=i.__v+1,Le.vnode&&Le.vnode(n),fl(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,a,o??jr(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,tf(a,n,s),n.__e!=o&&Jd(n)),or.length>e&&or.sort(ps));Po.__r=0}function Qd(r,e,t,n,i,o,a,s,l,u,d){var f,c,h,g,p,v,y=n&&n.__k||Zd,b=e.length;for(l=Kc(t,e,y,l,b),f=0;f<b;f++)(h=t.__k[f])!=null&&(c=h.__i===-1?ji:y[h.__i]||ji,h.__i=f,v=fl(r,h,c,i,o,a,s,l,u,d),g=h.__e,h.ref&&c.ref!=h.ref&&(c.ref&&cl(c.ref,null,h),d.push(h.ref,h.__c||g,h)),p==null&&g!=null&&(p=g),4&h.__u||c.__k===h.__k?l=ef(h,l,r):typeof h.type=="function"&&v!==void 0?l=v:g&&(l=g.nextSibling),h.__u&=-7);return t.__e=p,l}function Kc(r,e,t,n,i){var o,a,s,l,u,d=t.length,f=d,c=0;for(r.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+c,(a=r.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?So(null,a,null,null,null):Ea(a)?So(kr,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?So(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=r,a.__b=r.__b+1,s=null,(u=a.__i=qc(a,t,l,f))!==-1&&(f--,(s=t[u])&&(s.__u|=2)),s==null||s.__v===null?(u==-1&&c--,typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?c--:u==l+1?c++:(u>l?c--:c++,a.__u|=4))):r.__k[o]=null;if(f)for(o=0;o<d;o++)(s=t[o])!=null&&!(2&s.__u)&&(s.__e==n&&(n=jr(s)),nf(s,s));return n}function ef(r,e,t){var n,i;if(typeof r.type=="function"){for(n=r.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=r,e=ef(n[i],e,t));return e}r.__e!=e&&(e&&r.type&&!t.contains(e)&&(e=jr(r)),t.insertBefore(r.__e,e||null),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Do(r,e){return e=e||[],r==null||typeof r=="boolean"||(Ea(r)?r.some(function(t){Do(t,e)}):e.push(r)),e}function qc(r,e,t,n){var i,o,a=r.key,s=r.type,l=e[t];if(l===null||l&&a==l.key&&s===l.type&&!(2&l.__u))return t;if(n>(l!=null&&!(2&l.__u)?1:0))for(i=t-1,o=t+1;i>=0||o<e.length;){if(i>=0){if((l=e[i])&&!(2&l.__u)&&a==l.key&&s===l.type)return i;i--}if(o<e.length){if((l=e[o])&&!(2&l.__u)&&a==l.key&&s===l.type)return o;o++}}return-1}function Bl(r,e,t){e[0]=="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||Vc.test(e)?t:t+"px"}function eo(r,e,t,n,i){var o;e:if(e=="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||Bl(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Bl(r.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(qd,"$1")),e=e.toLowerCase()in r||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+o]=t,t?n?t.u=n.u:(t.u=ul,r.addEventListener(e,o?vs:gs,o)):r.removeEventListener(e,o?vs:gs,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&t==1?"":t))}}function Hl(r){return function(e){if(this.l){var t=this.l[e.type+r];if(e.t==null)e.t=ul++;else if(e.t<t.u)return;return t(Le.event?Le.event(e):e)}}}function fl(r,e,t,n,i,o,a,s,l,u){var d,f,c,h,g,p,v,y,b,C,R,j,D,w,A,z,Z,oe=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),o=[s=e.__e=t.__e]),(d=Le.__b)&&d(e);e:if(typeof oe=="function")try{if(y=e.props,b="prototype"in oe&&oe.prototype.render,C=(d=oe.contextType)&&n[d.__c],R=d?C?C.props.value:d.__:n,t.__c?v=(f=e.__c=t.__c).__=f.__E:(b?e.__c=f=new oe(y,R):(e.__c=f=new He(y,R),f.constructor=oe,f.render=Jc),C&&C.sub(f),f.props=y,f.state||(f.state={}),f.context=R,f.__n=n,c=f.__d=!0,f.__h=[],f._sb=[]),b&&f.__s==null&&(f.__s=f.state),b&&oe.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=zn({},f.__s)),zn(f.__s,oe.getDerivedStateFromProps(y,f.__s))),h=f.props,g=f.state,f.__v=e,c)b&&oe.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),b&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(b&&oe.getDerivedStateFromProps==null&&y!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,R),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,R)===!1||e.__v==t.__v)){for(e.__v!=t.__v&&(f.props=y,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(se){se&&(se.__=e)}),j=0;j<f._sb.length;j++)f.__h.push(f._sb[j]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,R),b&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,g,p)})}if(f.context=R,f.props=y,f.__P=r,f.__e=!1,D=Le.__r,w=0,b){for(f.state=f.__s,f.__d=!1,D&&D(e),d=f.render(f.props,f.state,f.context),A=0;A<f._sb.length;A++)f.__h.push(f._sb[A]);f._sb=[]}else do f.__d=!1,D&&D(e),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++w<25);f.state=f.__s,f.getChildContext!=null&&(n=zn(zn({},n),f.getChildContext())),b&&!c&&f.getSnapshotBeforeUpdate!=null&&(p=f.getSnapshotBeforeUpdate(h,g)),s=Qd(r,Ea(z=d!=null&&d.type===kr&&d.key==null?d.props.children:d)?z:[z],e,t,n,i,o,a,s,l,u),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),v&&(f.__E=f.__=null)}catch(se){if(e.__v=null,l||o!=null)if(se.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else for(Z=o.length;Z--;)dl(o[Z]);else e.__e=t.__e,e.__k=t.__k;Le.__e(se,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):s=e.__e=Zc(t.__e,e,t,n,i,o,a,l,u);return(d=Le.diffed)&&d(e),128&e.__u?void 0:s}function tf(r,e,t){for(var n=0;n<t.length;n++)cl(t[n],t[++n],t[++n]);Le.__c&&Le.__c(e,r),r.some(function(i){try{r=i.__h,i.__h=[],r.some(function(o){o.call(i)})}catch(o){Le.__e(o,i.__v)}})}function Zc(r,e,t,n,i,o,a,s,l){var u,d,f,c,h,g,p,v=t.props,y=e.props,b=e.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){r=h,o[u]=null;break}}if(r==null){if(b==null)return document.createTextNode(y);r=document.createElementNS(i,b,y.is&&y),s&&(Le.__m&&Le.__m(e,o),s=!1),o=null}if(b===null)v===y||s&&r.data===y||(r.data=y);else{if(o=o&&xa.call(r.childNodes),v=t.props||ji,!s&&o!=null)for(v={},u=0;u<r.attributes.length;u++)v[(h=r.attributes[u]).name]=h.value;for(u in v)if(h=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=h;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;eo(r,u,null,h,i)}}for(u in y)h=y[u],u=="children"?c=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?g=h:u=="checked"?p=h:s&&typeof h!="function"||v[u]===h||eo(r,u,h,v[u],i);if(d)s||f&&(d.__html===f.__html||d.__html===r.innerHTML)||(r.innerHTML=d.__html),e.__k=[];else if(f&&(r.innerHTML=""),Qd(r,Ea(c)?c:[c],e,t,n,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:t.__k&&jr(t,0),s,l),o!=null)for(u=o.length;u--;)dl(o[u]);s||(u="value",b=="progress"&&g==null?r.removeAttribute("value"):g!==void 0&&(g!==r[u]||b=="progress"&&!g||b=="option"&&g!==v[u])&&eo(r,u,g,v[u],i),u="checked",p!==void 0&&p!==r[u]&&eo(r,u,p,v[u],i))}return r}function cl(r,e,t){try{if(typeof r=="function"){var n=typeof r.__u=="function";n&&r.__u(),n&&e==null||(r.__u=r(e))}else r.current=e}catch(i){Le.__e(i,t)}}function nf(r,e,t){var n,i;if(Le.unmount&&Le.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||cl(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){Le.__e(o,e)}n.base=n.__P=null}if(n=r.__k)for(i=0;i<n.length;i++)n[i]&&nf(n[i],e,t||typeof r.type!="function");t||dl(r.__e),r.__c=r.__=r.__e=void 0}function Jc(r,e,t){return this.constructor(r,t)}function Qc(r,e,t){var n,i,o,a;e==document&&(e=document.documentElement),Le.__&&Le.__(r,e),i=(n=!1)?null:e.__k,o=[],a=[],fl(e,r=e.__k=_e(kr,null,[r]),i||ji,ji,e.namespaceURI,i?null:e.firstChild?xa.call(e.childNodes):null,o,i?i.__e:e.firstChild,n,a),tf(o,r,a)}xa=Zd.slice,Le={__e:function(r,e,t,n){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(r)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(r,n||{}),a=i.__d),a)return i.__E=i}catch(s){r=s}throw r}},Vd=0,He.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=zn({},this.state),typeof r=="function"&&(r=r(zn({},t),this.props)),r&&zn(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),Il(this))},He.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Il(this))},He.prototype.render=kr,or=[],Kd=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ps=function(r,e){return r.__v.__b-e.__v.__b},Po.__r=0,qd=/(PointerCapture)$|Capture$/i,ul=0,gs=Hl(!1),vs=Hl(!0);var eh="An invariant failed, however the error is obfuscated because this is a production build.",Ro=[];Object.freeze(Ro);var hl={};Object.freeze(hl);function Bt(){return++le.mobxGuid}function Ke(r){throw dr(!1,r),"X"}function dr(r,e){if(!r)throw new Error("[mobx] "+(e||eh))}function rf(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var to=function(){};function th(r){var e=[];return r.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function pl(r){return r!==null&&typeof r=="object"}function Gr(r){if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function nh(r){if(Kr(r)||Ht(r))return r;if(Array.isArray(r))return new Map(r);if(Gr(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return Ke("Cannot convert to map from '"+r+"'")}function Vr(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function rh(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function ih(r,e){var t=Object.getOwnPropertyDescriptor(r,e);return!t||t.configurable!==!1&&t.writable!==!1}function Kn(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return pl(n)&&n[t]===!0}}function Kr(r){return r instanceof Map}function Vi(r){return r instanceof Set}function of(r){var e=new Set;for(var t in r)e.add(t);return Object.getOwnPropertySymbols(r).forEach(function(n){Object.getOwnPropertyDescriptor(r,n).enumerable&&e.add(n)}),Array.from(e)}function Xn(r){return r&&r.toString?r.toString():new String(r).toString()}function af(r){return r===null?null:typeof r=="object"?""+r:r}var oh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,Ae=Symbol("mobx administration"),qr=function(){function r(e){e===void 0&&(e="Atom@"+Bt()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Ze.NOT_TRACKING}return r.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},r.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},r.prototype.reportObserved=function(){return yf(this)},r.prototype.reportChanged=function(){fn(),Ah(this),cn()},r.prototype.toString=function(){return this.name},r}(),gl=Kn("Atom",qr);function vl(r,e,t){e===void 0&&(e=to),t===void 0&&(t=to);var n=new qr(r);return e!==to&&Fh(n,e),t!==to&&wf(n,t),n}function ah(r,e){return Rf(r,e)}function sh(r,e){return Object.is(r,e)}var Ir={structural:ah,default:sh};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ys=function(r,e){return ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ys(r,e)};function lh(r,e){ys(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Lo=function(){return Lo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Lo.apply(this,arguments)};function En(r){var e=typeof Symbol=="function"&&r[Symbol.iterator],t=0;return e?e.call(r):{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}}}function Nr(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o}function yl(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Nr(arguments[e]));return r}var ko=Symbol("mobx did run lazy initializers"),pi=Symbol("mobx pending decorators"),uh={},dh={};function fh(r,e){var t=e?uh:dh;return t[r]||(t[r]={configurable:!0,enumerable:e,get:function(){return pr(this),this[r]},set:function(n){pr(this),this[r]=n}})}function pr(r){var e,t;if(r[ko]!==!0){var n=r[pi];if(n){Vr(r,ko,!0);var i=yl(Object.getOwnPropertySymbols(n),Object.keys(n));try{for(var o=En(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=n[s];l.propertyCreator(r,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}}}function sf(r,e){return function(){var n,i=function(a,s,l,u){if(u===!0)return e(a,s,l,a,n),null;if(!Object.prototype.hasOwnProperty.call(a,pi)){var d=a[pi];Vr(a,pi,Lo({},d))}return a[pi][s]={prop:s,propertyCreator:e,descriptor:l,decoratorTarget:a,decoratorArguments:n},fh(s,r)};return ch(arguments)?(n=Ro,i.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),i)}}function ch(r){return(r.length===2||r.length===3)&&(typeof r[1]=="string"||typeof r[1]=="symbol")||r.length===4&&r[3]===!0}function Ki(r,e,t){return zr(r)?r:Array.isArray(r)?F.array(r,{name:t}):Gr(r)?F.object(r,void 0,{name:t}):Kr(r)?F.map(r,{name:t}):Vi(r)?F.set(r,{name:t}):r}function hh(r,e,t){return r==null||gn(r)||An(r)||Ht(r)||Zt(r)?r:Array.isArray(r)?F.array(r,{name:t,deep:!1}):Gr(r)?F.object(r,void 0,{name:t,deep:!1}):Kr(r)?F.map(r,{name:t,deep:!1}):Vi(r)?F.set(r,{name:t,deep:!1}):Ke(!1)}function Sa(r){return r}function ph(r,e,t){return Rf(r,e)?e:r}function Ca(r){dr(r);var e=sf(!0,function(n,i,o,a,s){var l=o?o.initializer?o.initializer.call(n):o.value:void 0;El(n).addObservableProp(i,l,r)}),t=e;return t.enhancer=r,t}var lf={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(lf);function Mr(r){return r==null?lf:typeof r=="string"?{name:r,deep:!0,proxy:!0}:r}var ml=Ca(Ki),gh=Ca(hh),uf=Ca(Sa),vh=Ca(ph);function no(r){return r.defaultDecorator?r.defaultDecorator.enhancer:r.deep===!1?Sa:Ki}function yh(r,e,t){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ml.apply(null,arguments);if(zr(r))return r;var n=Gr(r)?F.object(r,e,t):Array.isArray(r)?F.array(r,e):Kr(r)?F.map(r,e):Vi(r)?F.set(r,e):r;if(n!==r)return n;Ke(!1)}var Fl={box:function(r,e){arguments.length>2&&oi("box");var t=Mr(e);return new cr(r,no(t),t.name,!0,t.equals)},array:function(r,e){arguments.length>2&&oi("array");var t=Mr(e);return tp(r,no(t),t.name)},map:function(r,e){arguments.length>2&&oi("map");var t=Mr(e);return new xl(r,no(t),t.name)},set:function(r,e){arguments.length>2&&oi("set");var t=Mr(e);return new Pf(r,no(t),t.name)},object:function(r,e,t){typeof arguments[1]=="string"&&oi("object");var n=Mr(t);if(n.proxy===!1)return ws({},r,e,n);var i=Cf(n),o=ws({},void 0,void 0,n),a=Jh(o);return Of(a,r,e,i),a},ref:uf,shallow:gh,deep:ml,struct:vh},F=yh;Object.keys(Fl).forEach(function(r){return F[r]=Fl[r]});function oi(r){Ke("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}var jo=sf(!1,function(r,e,t,n,i){var o=t.get,a=t.set,s=i[0]||{};El(r).addComputedProp(r,e,Lo({get:o,set:a,context:r},s))}),mh=jo({equals:Ir.structural}),ot=function(e,t,n){if(typeof t=="string"||e!==null&&typeof e=="object"&&arguments.length===1)return jo.apply(null,arguments);var i=typeof t=="object"?t:{};return i.get=e,i.set=typeof t=="function"?t:i.set,i.name=i.name||e.name||"",new Hr(i)};ot.struct=mh;var Ze;(function(r){r[r.NOT_TRACKING=-1]="NOT_TRACKING",r[r.UP_TO_DATE=0]="UP_TO_DATE",r[r.POSSIBLY_STALE=1]="POSSIBLY_STALE",r[r.STALE=2]="STALE"})(Ze||(Ze={}));var wn;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(wn||(wn={}));var Io=function(){function r(e){this.cause=e}return r}();function gi(r){return r instanceof Io}function ms(r){switch(r.dependenciesState){case Ze.UP_TO_DATE:return!1;case Ze.NOT_TRACKING:case Ze.STALE:return!0;case Ze.POSSIBLY_STALE:{for(var e=_l(!0),t=Zr(),n=r.observing,i=n.length,o=0;o<i;o++){var a=n[o];if(Fr(a)){if(le.disableErrorBoundaries)a.get();else try{a.get()}catch{return Yn(t),mi(e),!0}if(r.dependenciesState===Ze.STALE)return Yn(t),mi(e),!0}}return cf(r),Yn(t),mi(e),!1}}}function Br(r){var e=r.observers.size>0;le.computationDepth>0&&e&&Ke(!1),!le.allowStateChanges&&(e||le.enforceActions==="strict")&&Ke(!1)}function df(r,e,t){var n=_l(!0);cf(r),r.newObserving=new Array(r.observing.length+100),r.unboundDepsCount=0,r.runId=++le.runId;var i=le.trackingDerivation;le.trackingDerivation=r;var o;if(le.disableErrorBoundaries===!0)o=e.call(t);else try{o=e.call(t)}catch(a){o=new Io(a)}return le.trackingDerivation=i,_h(r),mi(n),o}function _h(r){for(var e=r.observing,t=r.observing=r.newObserving,n=Ze.UP_TO_DATE,i=0,o=r.unboundDepsCount,a=0;a<o;a++){var s=t[a];s.diffValue===0&&(s.diffValue=1,i!==a&&(t[i]=s),i++),s.dependenciesState>n&&(n=s.dependenciesState)}for(t.length=i,r.newObserving=null,o=e.length;o--;){var s=e[o];s.diffValue===0&&gf(s,r),s.diffValue=0}for(;i--;){var s=t[i];s.diffValue===1&&(s.diffValue=0,Oh(s,r))}n!==Ze.UP_TO_DATE&&(r.dependenciesState=n,r.onBecomeStale())}function _s(r){var e=r.observing;r.observing=[];for(var t=e.length;t--;)gf(e[t],r);r.dependenciesState=Ze.NOT_TRACKING}function ff(r){var e=Zr();try{return r()}finally{Yn(e)}}function Zr(){var r=le.trackingDerivation;return le.trackingDerivation=null,r}function Yn(r){le.trackingDerivation=r}function _l(r){var e=le.allowStateReads;return le.allowStateReads=r,e}function mi(r){le.allowStateReads=r}function cf(r){if(r.dependenciesState!==Ze.UP_TO_DATE){r.dependenciesState=Ze.UP_TO_DATE;for(var e=r.observing,t=e.length;t--;)e[t].lowestObserverState=Ze.UP_TO_DATE}}var Bo=0,bh=1,zl=Object.getOwnPropertyDescriptor(function(){},"name");zl&&zl.configurable;function fr(r,e,t){var n=function(){return hf(r,e,t||this,arguments)};return n.isMobxAction=!0,n}function hf(r,e,t,n){var i=xh();try{return e.apply(t,n)}catch(o){throw i.error=o,o}finally{Eh(i)}}function xh(r,e,t){var n=Kt(),i=0,o=Zr();fn();var a=Oa(!0),s=_l(!0),l={prevDerivation:o,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:n,startTime:i,actionId:bh++,parentActionId:Bo};return Bo=l.actionId,l}function Eh(r){Bo!==r.actionId&&Ke("invalid action stack. did you forget to finish an action?"),Bo=r.parentActionId,r.error!==void 0&&(le.suppressReactionErrors=!0),Aa(r.prevAllowStateChanges),mi(r.prevAllowStateReads),cn(),Yn(r.prevDerivation),le.suppressReactionErrors=!1}function Oa(r){var e=le.allowStateChanges;return le.allowStateChanges=r,e}function Aa(r){le.allowStateChanges=r}var cr=function(r){lh(e,r);function e(t,n,i,o,a){i===void 0&&(i="ObservableValue@"+Bt()),a===void 0&&(a=Ir.default);var s=r.call(this,i)||this;return s.enhancer=n,s.name=i,s.equals=a,s.hasUnreportedChange=!1,s.value=n(t,void 0,i),s}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){this.value,t=this.prepareNewValue(t),t!==le.UNCHANGED&&this.setNewValue(t)},e.prototype.prepareNewValue=function(t){if(Br(this),Sn(this)){var n=Cn(this,{object:this,type:"update",newValue:t});if(!n)return le.UNCHANGED;t=n.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?le.UNCHANGED:t},e.prototype.setNewValue=function(t){var n=this.value;this.value=t,this.reportChanged(),hn(this)&&pn(this,{type:"update",object:this,newValue:t,oldValue:n})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return qi(this,t)},e.prototype.observe=function(t,n){return n&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Zi(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return af(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(qr),wh=Kn("ObservableValue",cr),Hr=function(){function r(e){this.dependenciesState=Ze.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Ze.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Bt(),this.value=new Io(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=wn.NONE,dr(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+Bt(),e.set&&(this.setter=fr(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Ir.structural:Ir.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return r.prototype.onBecomeStale=function(){Th(this)},r.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},r.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},r.prototype.get=function(){this.isComputing&&Ke("Cycle detected in computation "+this.name+": "+this.derivation),le.inBatch===0&&this.observers.size===0&&!this.keepAlive?ms(this)&&(this.warnAboutUntrackedRead(),fn(),this.value=this.computeValue(!1),cn()):(yf(this),ms(this)&&this.trackAndCompute()&&Mh(this));var e=this.value;if(gi(e))throw e.cause;return e},r.prototype.peek=function(){var e=this.computeValue(!1);if(gi(e))throw e.cause;return e},r.prototype.set=function(e){if(this.setter){dr(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else dr(!1,!1)},r.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===Ze.NOT_TRACKING,n=this.computeValue(!0),i=t||gi(e)||gi(n)||!this.equals(e,n);return i&&(this.value=n),i},r.prototype.computeValue=function(e){this.isComputing=!0,le.computationDepth++;var t;if(e)t=df(this,this.derivation,this.scope);else if(le.disableErrorBoundaries===!0)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new Io(n)}return le.computationDepth--,this.isComputing=!1,t},r.prototype.suspend=function(){this.keepAlive||(_s(this),this.value=void 0)},r.prototype.observe=function(e,t){var n=this,i=!0,o=void 0;return Ih(function(){var a=n.get();if(!i||t){var s=Zr();e({type:"update",object:n,newValue:a,oldValue:o}),Yn(s)}i=!1,o=a})},r.prototype.warnAboutUntrackedRead=function(){},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},r.prototype.valueOf=function(){return af(this.get())},r.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},r}(),Fr=Kn("ComputedValue",Hr),Co=function(){function r(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return r}(),Sh={};function bs(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Sh}var Oo=!0,pf=!1,le=function(){var r=bs();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(Oo=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new Co().version&&(Oo=!1),Oo?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new Co):(setTimeout(function(){pf||Ke("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Co)}();function Ch(){(le.pendingReactions.length||le.inBatch||le.isRunningReactions)&&Ke("isolateGlobalState should be called before MobX is running any reactions"),pf=!0,Oo&&(--bs().__mobxInstanceCount===0&&(bs().__mobxGlobals=void 0),le=new Co)}function xs(){return le}function Oh(r,e){r.observers.add(e),r.lowestObserverState>e.dependenciesState&&(r.lowestObserverState=e.dependenciesState)}function gf(r,e){r.observers.delete(e),r.observers.size===0&&vf(r)}function vf(r){r.isPendingUnobservation===!1&&(r.isPendingUnobservation=!0,le.pendingUnobservations.push(r))}function fn(){le.inBatch++}function cn(){if(--le.inBatch===0){bf();for(var r=le.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=!1,t.observers.size===0&&(t.isBeingObserved&&(t.isBeingObserved=!1,t.onBecomeUnobserved()),t instanceof Hr&&t.suspend())}le.pendingUnobservations=[]}}function yf(r){var e=le.trackingDerivation;return e!==null?(e.runId!==r.lastAccessedBy&&(r.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=r,r.isBeingObserved||(r.isBeingObserved=!0,r.onBecomeObserved())),!0):(r.observers.size===0&&le.inBatch>0&&vf(r),!1)}function Ah(r){r.lowestObserverState!==Ze.STALE&&(r.lowestObserverState=Ze.STALE,r.observers.forEach(function(e){e.dependenciesState===Ze.UP_TO_DATE&&(e.isTracing!==wn.NONE&&mf(e,r),e.onBecomeStale()),e.dependenciesState=Ze.STALE}))}function Mh(r){r.lowestObserverState!==Ze.STALE&&(r.lowestObserverState=Ze.STALE,r.observers.forEach(function(e){e.dependenciesState===Ze.POSSIBLY_STALE?e.dependenciesState=Ze.STALE:e.dependenciesState===Ze.UP_TO_DATE&&(r.lowestObserverState=Ze.UP_TO_DATE)}))}function Th(r){r.lowestObserverState===Ze.UP_TO_DATE&&(r.lowestObserverState=Ze.POSSIBLY_STALE,r.observers.forEach(function(e){e.dependenciesState===Ze.UP_TO_DATE&&(e.dependenciesState=Ze.POSSIBLY_STALE,e.isTracing!==wn.NONE&&mf(e,r),e.onBecomeStale())}))}function mf(r,e){if(console.log("[mobx.trace] '"+r.name+"' is invalidated due to a change in: '"+e.name+"'"),r.isTracing===wn.BREAK){var t=[];_f(Xh(r),t,1),new Function(`debugger;
/*
Tracing '`+r.name+`'

You are entering this break point because derivation '`+r.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(r instanceof Hr?r.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function _f(r,e,t){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(t).join("	")+r.name),r.dependencies&&r.dependencies.forEach(function(n){return _f(n,e,t+1)})}var Ii=function(){function r(e,t,n,i){e===void 0&&(e="Reaction@"+Bt()),i===void 0&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=Ze.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Bt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=wn.NONE}return r.prototype.onBecomeStale=function(){this.schedule()},r.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,le.pendingReactions.push(this),bf())},r.prototype.isScheduled=function(){return this._isScheduled},r.prototype.runReaction=function(){if(!this.isDisposed){if(fn(),this._isScheduled=!1,ms(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Kt()}catch(e){this.reportExceptionInDerivation(e)}}cn()}},r.prototype.track=function(e){if(!this.isDisposed){fn(),this._isRunning=!0;var t=df(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&_s(this),gi(t)&&this.reportExceptionInDerivation(t.cause),cn()}},r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(le.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";le.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),le.globalReactionErrorHandlers.forEach(function(i){return i(e,t)})},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(fn(),_s(this),cn()))},r.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[Ae]=this,e},r.prototype.toString=function(){return"Reaction["+this.name+"]"},r.prototype.trace=function(e){e===void 0&&(e=!1),Kh(this,e)},r}(),Xl=100,Es=function(r){return r()};function bf(){le.inBatch>0||le.isRunningReactions||Es(Nh)}function Nh(){le.isRunningReactions=!0;for(var r=le.pendingReactions,e=0;r.length>0;){++e===Xl&&(console.error("Reaction doesn't converge to a stable state after "+Xl+" iterations."+(" Probably there is a cycle in the reactive function: "+r[0])),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction()}le.isRunningReactions=!1}var Ho=Kn("Reaction",Ii);function Ph(r){var e=Es;Es=function(t){return r(function(){return e(t)})}}function Kt(){return!1}function Dh(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Rh(){Ke(!1)}function Wl(r){return function(e,t,n){if(n){if(n.value)return{value:fr(r,n.value),enumerable:!1,configurable:!0,writable:!0};var i=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return fr(r,i.call(this))}}}return Lh(r).apply(this,arguments)}}function Lh(r){return function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){},set:function(i){Vr(this,t,B(r,i))}})}}function kh(r,e,t,n){return n===!0?(Ya(r,e,t.value),null):t?{configurable:!0,enumerable:!1,get:function(){return Ya(this,e,t.value||t.initializer.call(this)),this[e]},set:Rh}:{enumerable:!1,configurable:!0,set:function(i){Ya(this,e,i)},get:function(){}}}var B=function(e,t,n,i){if(arguments.length===1&&typeof e=="function")return fr(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof t=="function")return fr(e,t);if(arguments.length===1&&typeof e=="string")return Wl(e);if(i===!0)Vr(e,t,fr(e.name||t,n.value,this));else return Wl(t).apply(null,arguments)};B.bound=kh;function jh(r,e){var t=typeof r=="string"?r:r.name||"<unnamed action>",n=typeof r=="function"?r:e;return hf(t,n,this,void 0)}function Ya(r,e,t){Vr(r,e,fr(e,t.bind(r)))}function Ih(r,e){e===void 0&&(e=hl);var t=e&&e.name||r.name||"Autorun@"+Bt(),n=!e.scheduler&&!e.delay,i;if(n)i=new Ii(t,function(){this.track(s)},e.onError,e.requiresObservable);else{var o=xf(e),a=!1;i=new Ii(t,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(s)}))},e.onError,e.requiresObservable)}function s(){r(i)}return i.schedule(),i.getDisposer()}var Bh=function(r){return r()};function xf(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:Bh}function Ef(r,e,t){t===void 0&&(t=hl);var n=t.name||"Reaction@"+Bt(),i=B(n,t.onError?Hh(t.onError,e):e),o=!t.scheduler&&!t.delay,a=xf(t),s=!0,l=!1,u,d=t.compareStructural?Ir.structural:t.equals||Ir.default,f=new Ii(n,function(){s||o?c():l||(l=!0,a(c))},t.onError,t.requiresObservable);function c(){if(l=!1,!f.isDisposed){var h=!1;f.track(function(){var g=r(f);h=s||!d(u,g),u=g}),s&&t.fireImmediately&&i(u,f),!s&&h===!0&&i(u,f),s&&(s=!1)}}return f.schedule(),f.getDisposer()}function Hh(r,e){return function(){try{return e.apply(this,arguments)}catch(t){r.call(this,t)}}}function Fh(r,e,t){return Sf("onBecomeObserved",r,e)}function wf(r,e,t){return Sf("onBecomeUnobserved",r,e)}function Sf(r,e,t,n){var i=Gn(e),o=t,a=r+"Listeners";i[a]?i[a].add(o):i[a]=new Set([o]);var s=i[r];return typeof s!="function"?Ke(!1):function(){var l=i[a];l&&(l.delete(o),l.size===0&&delete i[a])}}function zh(r){var e=r.enforceActions,t=r.computedRequiresReaction,n=r.computedConfigurable,i=r.disableErrorBoundaries,o=r.reactionScheduler,a=r.reactionRequiresObservable,s=r.observableRequiresReaction;if(Ch(),e!==void 0){var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:Ke("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}le.enforceActions=l,le.allowStateChanges=!(l===!0||l==="strict")}t!==void 0&&(le.computedRequiresReaction=!!t),a!==void 0&&(le.reactionRequiresObservable=!!a),s!==void 0&&(le.observableRequiresReaction=!!s,le.allowStateReads=!le.observableRequiresReaction),n!==void 0&&(le.computedConfigurable=!!n),i!==void 0&&(i===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),le.disableErrorBoundaries=!!i),o&&Ph(o)}function ws(r,e,t,n){n=Mr(n);var i=Cf(n);return pr(r),El(r,n.name,i.enhancer),e&&Of(r,e,t,i),r}function Cf(r){return r.defaultDecorator||(r.deep===!1?uf:ml)}function Of(r,e,t,n){var i,o,a,s,l,u;fn();try{var a=oh(e);try{for(var d=En(a),f=d.next();!f.done;f=d.next()){var u=f.value,c=Object.getOwnPropertyDescriptor(e,u),h=t&&u in t?t[u]:c.get?jo:n,g=h(r,u,c,!0);g&&Object.defineProperty(r,u,g)}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}finally{cn()}}function Xh(r,e){return Af(Gn(r,e))}function Af(r){var e={name:r.name};return r.observing&&r.observing.length>0&&(e.dependencies=th(r.observing).map(Af)),e}function Mf(r,e){if(r==null)return!1;if(e!==void 0){if(gn(r)===!1||!r[Ae].values.has(e))return!1;var t=Gn(r,e);return Fr(t)}return Fr(r)}function Wh(r){return arguments.length>1?Ke(!1):Mf(r)}function $l(r,e){return typeof e!="string"?Ke(!1):Mf(r,e)}function $h(r,e){return r==null?!1:gn(r)||!!r[Ae]||gl(r)||Ho(r)||Fr(r)}function zr(r){return arguments.length!==1&&Ke(!1),$h(r)}function Xr(r){return gn(r)?r[Ae].getKeys():Ht(r)||Zt(r)?Array.from(r.keys()):An(r)?r.map(function(e,t){return t}):Ke(!1)}function Yh(r){return gn(r)?Xr(r).map(function(e){return r[e]}):Ht(r)?Xr(r).map(function(e){return r.get(e)}):Zt(r)?Array.from(r.values()):An(r)?r.slice():Ke(!1)}function Uh(r){return gn(r)?Xr(r).map(function(e){return[e,r[e]]}):Ht(r)?Xr(r).map(function(e){return[e,r.get(e)]}):Zt(r)?Array.from(r.entries()):An(r)?r.map(function(e,t){return[t,e]}):Ke(!1)}function bl(r,e,t){if(arguments.length===2&&!Zt(r)){fn();var n=e;try{for(var i in n)bl(r,i,n[i])}finally{cn()}return}if(gn(r)){var o=r[Ae],a=o.values.get(e);a?o.write(e,t):o.addObservableProp(e,t,o.defaultEnhancer)}else if(Ht(r))r.set(e,t);else if(Zt(r))r.add(e);else if(An(r))typeof e!="number"&&(e=parseInt(e,10)),dr(e>=0,"Not a valid index: '"+e+"'"),fn(),e>=r.length&&(r.length=e+1),r[e]=t,cn();else return Ke(!1)}function Tf(r,e,t,n){return Gh(r,e,t)}function Gh(r,e,t){return Ma(r).observe(e,t)}var Vh={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function xr(r,e,t,n){return n.detectCycles&&r.set(e,t),t}function jn(r,e,t){if(!e.recurseEverything&&!zr(r)||typeof r!="object")return r;if(r===null)return null;if(r instanceof Date)return r;if(wh(r))return jn(r.get(),e,t);zr(r)&&Xr(r);var n=e.detectCycles===!0;if(n&&r!==null&&t.has(r))return t.get(r);if(An(r)||Array.isArray(r)){var i=xr(t,r,[],e),o=r.map(function(h){return jn(h,e,t)});i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(Zt(r)||Object.getPrototypeOf(r)===Set.prototype)if(e.exportMapsAsObjects===!1){var l=xr(t,r,new Set,e);return r.forEach(function(h){l.add(jn(h,e,t))}),l}else{var u=xr(t,r,[],e);return r.forEach(function(h){u.push(jn(h,e,t))}),u}if(Ht(r)||Object.getPrototypeOf(r)===Map.prototype)if(e.exportMapsAsObjects===!1){var d=xr(t,r,new Map,e);return r.forEach(function(h,g){d.set(g,jn(h,e,t))}),d}else{var f=xr(t,r,{},e);return r.forEach(function(h,g){f[g]=jn(h,e,t)}),f}var c=xr(t,r,{},e);return of(r).forEach(function(h){c[h]=jn(r[h],e,t)}),c}function on(r,e){typeof e=="boolean"&&(e={detectCycles:e}),e||(e=Vh),e.detectCycles=e.detectCycles===void 0?e.recurseEverything===!0:e.detectCycles===!0;var t;return e.detectCycles&&(t=new Map),jn(r,e,t)}function Kh(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=!1;typeof r[r.length-1]=="boolean"&&(t=r.pop());var n=qh(r);if(!n)return Ke(!1);n.isTracing===wn.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled"),n.isTracing=t?wn.BREAK:wn.LOG}function qh(r){switch(r.length){case 0:return le.trackingDerivation;case 1:return Gn(r[0]);case 2:return Gn(r[0],r[1])}}function sn(r,e){e===void 0&&(e=void 0),fn();try{return r.apply(e)}finally{cn()}}function ro(r){return r[Ae]}function io(r){return typeof r=="string"||typeof r=="number"||typeof r=="symbol"}var Zh={has:function(r,e){if(e===Ae||e==="constructor"||e===ko)return!0;var t=ro(r);return io(e)?t.has(e):e in r},get:function(r,e){if(e===Ae||e==="constructor"||e===ko)return r[e];var t=ro(r),n=t.values.get(e);if(n instanceof qr){var i=n.get();return i===void 0&&t.has(e),i}return io(e)&&t.has(e),r[e]},set:function(r,e,t){return io(e)?(bl(r,e,t),!0):!1},deleteProperty:function(r,e){if(!io(e))return!1;var t=ro(r);return t.remove(e),!0},ownKeys:function(r){var e=ro(r);return e.keysAtom.reportObserved(),Reflect.ownKeys(r)},preventExtensions:function(r){return Ke("Dynamic observable objects cannot be frozen"),!1}};function Jh(r){var e=new Proxy(r,Zh);return r[Ae].proxy=e,e}function Sn(r){return r.interceptors!==void 0&&r.interceptors.length>0}function qi(r,e){var t=r.interceptors||(r.interceptors=[]);return t.push(e),rf(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Cn(r,e){var t=Zr();try{for(var n=yl(r.interceptors||[]),i=0,o=n.length;i<o&&(e=n[i](e),dr(!e||e.type,"Intercept handlers should return nothing or a change object"),!!e);i++);return e}finally{Yn(t)}}function hn(r){return r.changeListeners!==void 0&&r.changeListeners.length>0}function Zi(r,e){var t=r.changeListeners||(r.changeListeners=[]);return t.push(e),rf(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function pn(r,e){var t=Zr(),n=r.changeListeners;if(n){n=n.slice();for(var i=0,o=n.length;i<o;i++)n[i](e);Yn(t)}}var Qh=1e4,ep={get:function(r,e){return e===Ae?r[Ae]:e==="length"?r[Ae].getArrayLength():typeof e=="number"?Dn.get.call(r,e):typeof e=="string"&&!isNaN(e)?Dn.get.call(r,parseInt(e)):Dn.hasOwnProperty(e)?Dn[e]:r[e]},set:function(r,e,t){return e==="length"&&r[Ae].setArrayLength(t),typeof e=="number"&&Dn.set.call(r,e,t),typeof e=="symbol"||isNaN(e)?r[e]=t:Dn.set.call(r,parseInt(e),t),!0},preventExtensions:function(r){return Ke("Observable arrays cannot be frozen"),!1}};function tp(r,e,t,n){t===void 0&&(t="ObservableArray@"+Bt()),n===void 0&&(n=!1);var i=new Nf(t,e,n);rh(i.values,Ae,i);var o=new Proxy(i.values,ep);if(i.proxy=o,r&&r.length){var a=Oa(!0);i.spliceWithArray(0,0,r),Aa(a)}return o}var Nf=function(){function r(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new qr(e||"ObservableArray@"+Bt()),this.enhancer=function(i,o){return t(i,o,e+"[..]")}}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.dehanceValues=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},r.prototype.intercept=function(e){return qi(this,e)},r.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Zi(this,e)},r.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},r.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},r.prototype.spliceWithArray=function(e,t,n){var i=this;Br(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),arguments.length===1?t=o-e:t==null?t=0:t=Math.max(0,Math.min(t,o-e)),n===void 0&&(n=Ro),Sn(this)){var a=Cn(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!a)return Ro;t=a.removedCount,n=a.added}n=n.length===0?n:n.map(function(l){return i.enhancer(l,void 0)});var s=this.spliceItemsIntoValues(e,t,n);return(t!==0||n.length!==0)&&this.notifyArraySplice(e,n,s),this.dehanceValues(s)},r.prototype.spliceItemsIntoValues=function(e,t,n){var i;if(n.length<Qh)return(i=this.values).splice.apply(i,yl([e,t],n));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},r.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&Kt(),o=hn(this),a=o||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),o&&pn(this,a)},r.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&Kt(),o=hn(this),a=o||i?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&pn(this,a)},r}(),Dn={intercept:function(r){return this[Ae].intercept(r)},observe:function(r,e){e===void 0&&(e=!1);var t=this[Ae];return t.observe(r,e)},clear:function(){return this.splice(0)},replace:function(r){var e=this[Ae];return e.spliceWithArray(0,e.values.length,r)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=this[Ae];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(r);case 2:return i.spliceWithArray(r,e)}return i.spliceWithArray(r,e,t)},spliceWithArray:function(r,e,t){var n=this[Ae];return n.spliceWithArray(r,e,t)},push:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=this[Ae];return t.spliceWithArray(t.values.length,0,r),t.values.length},pop:function(){return this.splice(Math.max(this[Ae].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=this[Ae];return t.spliceWithArray(0,0,r),t.values.length},reverse:function(){var r=this.slice();return r.reverse.apply(r,arguments)},sort:function(r){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(r){var e=this[Ae],t=e.dehanceValues(e.values).indexOf(r);return t>-1?(this.splice(t,1),!0):!1},get:function(r){var e=this[Ae];if(e){if(r<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[r]);console.warn("[mobx.array] Attempt to read an array index ("+r+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(r,e){var t=this[Ae],n=t.values;if(r<n.length){Br(t.atom);var i=n[r];if(Sn(t)){var o=Cn(t,{type:"update",object:t.proxy,index:r,newValue:e});if(!o)return;e=o.newValue}e=t.enhancer(e,i);var a=e!==i;a&&(n[r]=e,t.notifyArrayChildUpdate(r,e,i))}else if(r===n.length)t.spliceWithArray(r,0,[e]);else throw new Error("[mobx.array] Index out of bounds, "+r+" is larger than "+n.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(r){typeof Array.prototype[r]=="function"&&(Dn[r]=function(){var e=this[Ae];e.atom.reportObserved();var t=e.dehanceValues(e.values);return t[r].apply(t,arguments)})});["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(r){typeof Array.prototype[r]=="function"&&(Dn[r]=function(e,t){var n=this,i=this[Ae];i.atom.reportObserved();var o=i.dehanceValues(i.values);return o[r](function(a,s){return e.call(t,a,s,n)},t)})});["reduce","reduceRight"].forEach(function(r){Dn[r]=function(){var e=this,t=this[Ae];t.atom.reportObserved();var n=arguments[0];return arguments[0]=function(i,o,a){return o=t.dehanceValue(o),n(i,o,a,e)},t.values[r].apply(t.values,arguments)}});var np=Kn("ObservableArrayAdministration",Nf);function An(r){return pl(r)&&np(r[Ae])}var Yl,rp={},xl=function(){function r(e,t,n){if(t===void 0&&(t=Ki),n===void 0&&(n="ObservableMap@"+Bt()),this.enhancer=t,this.name=n,this[Yl]=rp,this._keysAtom=vl(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return r.prototype._has=function(e){return this._data.has(e)},r.prototype.has=function(e){var t=this;if(!le.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var i=n=new cr(this._has(e),Sa,this.name+"."+Xn(e)+"?",!1);this._hasMap.set(e,i),wf(i,function(){return t._hasMap.delete(e)})}return n.get()},r.prototype.set=function(e,t){var n=this._has(e);if(Sn(this)){var i=Cn(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},r.prototype.delete=function(e){var t=this;if(Br(this._keysAtom),Sn(this)){var n=Cn(this,{type:"delete",object:this,name:e});if(!n)return!1}if(this._has(e)){var i=Kt(),o=hn(this),n=o||i?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return sn(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1);var s=t._data.get(e);s.setNewValue(void 0),t._data.delete(e)}),o&&pn(this,n),!0}return!1},r.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},r.prototype._updateValue=function(e,t){var n=this._data.get(e);if(t=n.prepareNewValue(t),t!==le.UNCHANGED){var i=Kt(),o=hn(this),a=o||i?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;n.setNewValue(t),o&&pn(this,a)}},r.prototype._addValue=function(e,t){var n=this;Br(this._keysAtom),sn(function(){var s=new cr(t,n.enhancer,n.name+"."+Xn(e),!1);n._data.set(e,s),t=s.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()});var i=Kt(),o=hn(this),a=o||i?{type:"add",object:this,name:e,newValue:t}:null;o&&pn(this,a)},r.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},r.prototype.values=function(){var e=this,t=this.keys();return Fo({next:function(){var n=t.next(),i=n.done,o=n.value;return{done:i,value:i?void 0:e.get(o)}}})},r.prototype.entries=function(){var e=this,t=this.keys();return Fo({next:function(){var n=t.next(),i=n.done,o=n.value;return{done:i,value:i?void 0:[o,e.get(o)]}}})},r.prototype[Yl=Ae,Symbol.iterator]=function(){return this.entries()},r.prototype.forEach=function(e,t){var n,i;try{for(var o=En(this),a=o.next();!a.done;a=o.next()){var s=Nr(a.value,2),l=s[0],u=s[1];e.call(t,u,l,this)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},r.prototype.merge=function(e){var t=this;return Ht(e)&&(e=e.toJS()),sn(function(){var n=Oa(!0);try{Gr(e)?of(e).forEach(function(i){return t.set(i,e[i])}):Array.isArray(e)?e.forEach(function(i){var o=Nr(i,2),a=o[0],s=o[1];return t.set(a,s)}):Kr(e)?(e.constructor!==Map&&Ke("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach(function(i,o){return t.set(o,i)})):e!=null&&Ke("Cannot initialize map from "+e)}finally{Aa(n)}}),this},r.prototype.clear=function(){var e=this;sn(function(){ff(function(){var t,n;try{for(var i=En(e.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}})})},r.prototype.replace=function(e){var t=this;return sn(function(){var n,i,o,a,s=nh(e),l=new Map,u=!1;try{for(var d=En(t._data.keys()),f=d.next();!f.done;f=d.next()){var c=f.value;if(!s.has(c)){var h=t.delete(c);if(h)u=!0;else{var g=t._data.get(c);l.set(c,g)}}}}catch(A){n={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var p=En(s.entries()),v=p.next();!v.done;v=p.next()){var y=Nr(v.value,2),c=y[0],g=y[1],b=t._data.has(c);if(t.set(c,g),t._data.has(c)){var C=t._data.get(c);l.set(c,C),b||(u=!0)}}}catch(A){o={error:A}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(!u)if(t._data.size!==l.size)t._keysAtom.reportChanged();else for(var R=t._data.keys(),j=l.keys(),D=R.next(),w=j.next();!D.done;){if(D.value!==w.value){t._keysAtom.reportChanged();break}D=R.next(),w=j.next()}t._data=l}),this},Object.defineProperty(r.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),r.prototype.toPOJO=function(){var e,t,n={};try{for(var i=En(this),o=i.next();!o.done;o=i.next()){var a=Nr(o.value,2),s=a[0],l=a[1];n[typeof s=="symbol"?s:Xn(s)]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.toJS=function(){return new Map(this)},r.prototype.toJSON=function(){return this.toPOJO()},r.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(t){return Xn(t)+": "+(""+e.get(t))}).join(", ")+" }]"},r.prototype.observe=function(e,t){return Zi(this,e)},r.prototype.intercept=function(e){return qi(this,e)},r}(),Ht=Kn("ObservableMap",xl),Ul,ip={},Pf=function(){function r(e,t,n){if(t===void 0&&(t=Ki),n===void 0&&(n="ObservableSet@"+Bt()),this.name=n,this[Ul]=ip,this._data=new Set,this._atom=vl(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return t(i,o,n)},e&&this.replace(e)}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.clear=function(){var e=this;sn(function(){ff(function(){var t,n;try{for(var i=En(e._data.values()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}})})},r.prototype.forEach=function(e,t){var n,i;try{for(var o=En(this),a=o.next();!a.done;a=o.next()){var s=a.value;e.call(t,s,s,this)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},Object.defineProperty(r.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),r.prototype.add=function(e){var t=this;if(Br(this._atom),Sn(this)){var n=Cn(this,{type:"add",object:this,newValue:e});if(!n)return this}if(!this.has(e)){sn(function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()});var i=Kt(),o=hn(this),n=o||i?{type:"add",object:this,newValue:e}:null;o&&pn(this,n)}return this},r.prototype.delete=function(e){var t=this;if(Sn(this)){var n=Cn(this,{type:"delete",object:this,oldValue:e});if(!n)return!1}if(this.has(e)){var i=Kt(),o=hn(this),n=o||i?{type:"delete",object:this,oldValue:e}:null;return sn(function(){t._atom.reportChanged(),t._data.delete(e)}),o&&pn(this,n),!0}return!1},r.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},r.prototype.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Fo({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},r.prototype.keys=function(){return this.values()},r.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,n=Array.from(this._data.values());return Fo({next:function(){return t<n.length?{value:e.dehanceValue(n[t++]),done:!1}:{done:!0}}})},r.prototype.replace=function(e){var t=this;return Zt(e)&&(e=e.toJS()),sn(function(){var n=Oa(!0);try{Array.isArray(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):Vi(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):e!=null&&Ke("Cannot initialize set from "+e)}finally{Aa(n)}}),this},r.prototype.observe=function(e,t){return Zi(this,e)},r.prototype.intercept=function(e){return qi(this,e)},r.prototype.toJS=function(){return new Set(this)},r.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},r.prototype[Ul=Ae,Symbol.iterator]=function(){return this.values()},r}(),Zt=Kn("ObservableSet",Pf),Df=function(){function r(e,t,n,i){t===void 0&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=i,this.keysAtom=new qr(n+".keys")}return r.prototype.read=function(e){return this.values.get(e).get()},r.prototype.write=function(e,t){var n=this.target,i=this.values.get(e);if(i instanceof Hr){i.set(t);return}if(Sn(this)){var o=Cn(this,{type:"update",object:this.proxy||n,name:e,newValue:t});if(!o)return;t=o.newValue}if(t=i.prepareNewValue(t),t!==le.UNCHANGED){var a=hn(this),s=Kt(),o=a||s?{type:"update",object:this.proxy||n,oldValue:i.value,name:e,newValue:t}:null;i.setNewValue(t),a&&pn(this,o)}},r.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var i=!!this.values.get(e);return n=new cr(i,Sa,this.name+"."+Xn(e)+"?",!1),t.set(e,n),n.get()},r.prototype.addObservableProp=function(e,t,n){n===void 0&&(n=this.defaultEnhancer);var i=this.target;if(Sn(this)){var o=Cn(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var a=new cr(t,n,this.name+"."+Xn(e),!1);this.values.set(e,a),t=a.value,Object.defineProperty(i,e,op(e)),this.notifyPropertyAddition(e,t)},r.prototype.addComputedProp=function(e,t,n){var i=this.target;n.name=n.name||this.name+"."+Xn(t),this.values.set(t,new Hr(n)),(e===i||ih(e,t))&&Object.defineProperty(e,t,ap(t))},r.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(Sn(this)){var n=Cn(this,{object:this.proxy||t,name:e,type:"remove"});if(!n)return}try{fn();var i=hn(this),o=Kt(),a=this.values.get(e),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var l=this.pendingKeys.get(e);l&&l.set(!1)}delete this.target[e];var n=i||o?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;i&&pn(this,n)}finally{cn()}}},r.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},r.prototype.observe=function(e,t){return Zi(this,e)},r.prototype.intercept=function(e){return qi(this,e)},r.prototype.notifyPropertyAddition=function(e,t){var n=hn(this),i=Kt(),o=n||i?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&pn(this,o),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},r.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var i=En(this.values),o=i.next();!o.done;o=i.next()){var a=Nr(o.value,2),s=a[0],l=a[1];l instanceof cr&&n.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r}();function El(r,e,t){if(e===void 0&&(e=""),t===void 0&&(t=Ki),Object.prototype.hasOwnProperty.call(r,Ae))return r[Ae];Gr(r)||(e=(r.constructor.name||"ObservableObject")+"@"+Bt()),e||(e="ObservableObject@"+Bt());var n=new Df(r,new Map,Xn(e),t);return Vr(r,Ae,n),n}var Gl=Object.create(null),Vl=Object.create(null);function op(r){return Gl[r]||(Gl[r]={configurable:!0,enumerable:!0,get:function(){return this[Ae].read(r)},set:function(e){this[Ae].write(r,e)}})}function Kl(r){var e=r[Ae];return e||(pr(r),r[Ae])}function ap(r){return Vl[r]||(Vl[r]={configurable:le.computedConfigurable,enumerable:!1,get:function(){return Kl(this).read(r)},set:function(e){Kl(this).write(r,e)}})}var sp=Kn("ObservableObjectAdministration",Df);function gn(r){return pl(r)?(pr(r),sp(r[Ae])):!1}function Gn(r,e){if(typeof r=="object"&&r!==null){if(An(r))return e!==void 0&&Ke(!1),r[Ae].atom;if(Zt(r))return r[Ae];if(Ht(r)){var t=r;if(e===void 0)return t._keysAtom;var n=t._data.get(e)||t._hasMap.get(e);return n||Ke(!1),n}if(pr(r),e&&!r[Ae]&&r[e],gn(r)){if(!e)return Ke(!1);var n=r[Ae].values.get(e);return n||Ke(!1),n}if(gl(r)||Fr(r)||Ho(r))return r}else if(typeof r=="function"&&Ho(r[Ae]))return r[Ae];return Ke(!1)}function Ma(r,e){if(r||Ke("Expecting some object"),e!==void 0)return Ma(Gn(r,e));if(gl(r)||Fr(r)||Ho(r)||Ht(r)||Zt(r))return r;if(pr(r),r[Ae])return r[Ae];Ke(!1)}function lp(r,e){var t;return e!==void 0?t=Gn(r,e):gn(r)||Ht(r)||Zt(r)?t=Ma(r):t=Gn(r),t.name}var ql=Object.prototype.toString;function Rf(r,e,t){return t===void 0&&(t=-1),Ss(r,e,t)}function Ss(r,e,t,n,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var o=typeof r;if(o!=="function"&&o!=="object"&&typeof e!="object")return!1;var a=ql.call(r);if(a!==ql.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=Zl(r),e=Zl(e);var s=a==="[object Array]";if(!s){if(typeof r!="object"||typeof e!="object")return!1;var l=r.constructor,u=e.constructor;if(l!==u&&!(typeof l=="function"&&l instanceof l&&typeof u=="function"&&u instanceof u)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),n=n||[],i=i||[];for(var d=n.length;d--;)if(n[d]===r)return i[d]===e;if(n.push(r),i.push(e),s){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!Ss(r[d],e[d],t-1,n,i))return!1}else{var f=Object.keys(r),c=void 0;if(d=f.length,Object.keys(e).length!==d)return!1;for(;d--;)if(c=f[d],!(up(e,c)&&Ss(r[c],e[c],t-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Zl(r){return An(r)?r.slice():Kr(r)||Ht(r)||Vi(r)||Zt(r)?Array.from(r.entries()):r}function up(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Fo(r){return r[Symbol.iterator]=dp,r}function dp(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Dh,extras:{getDebugName:lp},$mobx:Ae});function fp(r){return!(r.prototype&&r.prototype.render)&&!He.isPrototypeOf(r)}function Lf(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.prefix,n=t===void 0?"":t,i=e.suffix,o=i===void 0?"":i,a=r.displayName||r.name||r.constructor&&r.constructor.name||"<component>";return n+a+o}var Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kf=function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")},jf=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),If=function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)},Bf=function(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r},Ql=console;function cp(r){var e=xs().allowStateChanges;return xs().allowStateChanges=r,e}function hp(r){xs().allowStateChanges=r}function pp(r,e,t,n,i){var o=cp(r),a=void 0;try{a=e(t,n,i)}finally{hp(o)}return a}function eu(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=r[e],i=Hf[e],o=n?t===!0?function(){i.apply(this,arguments),n.apply(this,arguments)}:function(){n.apply(this,arguments),i.apply(this,arguments)}:i;r[e]=o}function tu(r,e){if(r==null||e==null||(typeof r>"u"?"undefined":Jl(r))!=="object"||(typeof e>"u"?"undefined":Jl(e))!=="object")return r!==e;var t=Object.keys(r);if(t.length!==Object.keys(e).length)return!0;for(var n=void 0,i=t.length-1;n=t[i];i--)if(e[n]!==r[n])return!0;return!1}var Hf={componentWillMount:function(){var e=this,t=Lf(this),n=!1,i=!1;function o(f){var c=this[f],h=vl("reactive "+f);Object.defineProperty(this,f,{configurable:!0,enumerable:!0,get:function(){return h.reportObserved(),c},set:function(p){!i&&tu(c,p)?(c=p,n=!0,h.reportChanged(),n=!1):c=p}})}o.call(this,"props"),o.call(this,"state");var a=this.render.bind(this),s=null,l=!1,u=function(){return s=new Ii(t+".render()",function(){if(!l&&(l=!0,typeof e.componentWillReact=="function"&&e.componentWillReact(),e.__$mobxIsUnmounted!==!0)){var c=!0;try{i=!0,n||He.prototype.forceUpdate.call(e),c=!1}finally{i=!1,c&&s.dispose()}}}),s.reactComponent=e,d.$mobx=s,e.render=d,d(e.props,e.state,e.context)},d=function(c,h,g){l=!1;var p=void 0,v=void 0;if(s.track(function(){try{v=pp(!1,a,c,h,g)}catch(y){p=y}}),p)throw p;return v};this.render=u},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(e,t){return this.state!==t?!0:tu(this.props,e)}};function wl(r){if(arguments.length>1&&Ql.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),r.isMobxInjector===!0&&Ql.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),fp(r)){var e,t;return wl((t=e=function(i){If(o,i);function o(){return kf(this,o),Bf(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return jf(o,[{key:"render",value:function(){return r.call(this,this.props,this.context)}}]),o}(He),e.displayName=Lf(r),t))}if(!r)throw new Error("Please pass a valid component to 'observer'");var n=r.prototype||r;return gp(n),r.isMobXReactObserver=!0,r}function gp(r){eu(r,"componentWillMount",!0),eu(r,"componentDidMount"),r.shouldComponentUpdate||(r.shouldComponentUpdate=Hf.shouldComponentUpdate)}var vp=wl(function(r){var e=r.children;return e[0]()});vp.displayName="Observer";var yp=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mp(r,e){return e={exports:{}},r(e,e.exports),e.exports}mp(function(r,e){(function(t,n){r.exports=n()})(yp,function(){var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);return function d(f,c,h){if(typeof c!="string"){if(u){var g=l(c);g&&g!==u&&d(f,g,h)}var p=o(c);a&&(p=p.concat(a(c)));for(var v=0;v<p.length;++v){var y=p[v];if(!t[y]&&!n[y]&&(!h||!h[y])){var b=s(c,y);try{i(f,y,b)}catch{}}}return f}return f}})});var nu={children:!0,key:!0,ref:!0},ru=console;(function(r){If(e,r);function e(){return kf(this,e),Bf(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return jf(e,[{key:"render",value:function(n){var i=n.children;return i.length>1?_e("div",null," ",i," "):i[0]}},{key:"getChildContext",value:function(){var n={},i=this.context.mobxStores;if(i)for(var o in i)n[o]=i[o];for(var a in this.props)!nu[a]&&a!=="suppressChangedStoreWarning"&&(n[a]=this.props[a]);return{mobxStores:n}}},{key:"componentWillReceiveProps",value:function(n){if(Object.keys(n).length!==Object.keys(this.props).length&&ru.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!n.suppressChangedStoreWarning)for(var i in n)!nu[i]&&this.props[i]!==n[i]&&ru.warn("MobX Provider: Provided store '"+i+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),e})(He);if(!He)throw new Error("mobx-preact requires Preact to be available");var bn,Ua,iu,Ff=[],Et=Le,ou=Et.__b,au=Et.__r,su=Et.diffed,lu=Et.__c,uu=Et.unmount,du=Et.__;function _p(){for(var r;r=Ff.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Ao),r.__H.__h.forEach(Cs),r.__H.__h=[]}catch(e){r.__H.__h=[],Et.__e(e,r.__v)}}Et.__b=function(r){bn=null,ou&&ou(r)},Et.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),du&&du(r,e)},Et.__r=function(r){au&&au(r);var e=(bn=r.__c).__H;e&&(Ua===bn?(e.__h=[],bn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(Ao),e.__h.forEach(Cs),e.__h=[])),Ua=bn},Et.diffed=function(r){su&&su(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Ff.push(e)!==1&&iu===Et.requestAnimationFrame||((iu=Et.requestAnimationFrame)||bp)(_p)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),Ua=bn=null},Et.__c=function(r,e){e.some(function(t){try{t.__h.forEach(Ao),t.__h=t.__h.filter(function(n){return!n.__||Cs(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Et.__e(n,t.__v)}}),lu&&lu(r,e)},Et.unmount=function(r){uu&&uu(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Ao(n)}catch(i){e=i}}),t.__H=void 0,e&&Et.__e(e,t.__v))};var fu=typeof requestAnimationFrame=="function";function bp(r){var e,t=function(){clearTimeout(n),fu&&cancelAnimationFrame(e),setTimeout(r)},n=setTimeout(t,100);fu&&(e=requestAnimationFrame(t))}function Ao(r){var e=bn,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),bn=e}function Cs(r){var e=bn;r.__c=r.__(),bn=e}function xp(r,e){for(var t in e)r[t]=e[t];return r}function cu(r,e){for(var t in r)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&r[n]!==e[n])return!0;return!1}function hu(r,e){this.props=r,this.context=e}(hu.prototype=new He).isPureReactComponent=!0,hu.prototype.shouldComponentUpdate=function(r,e){return cu(this.props,r)||cu(this.state,e)};var pu=Le.__b;Le.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),pu&&pu(r)};var Ep=Le.__e;Le.__e=function(r,e,t,n){if(r.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(r,e)}Ep(r,e,t,n)};var gu=Le.unmount;function zf(r,e,t){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),r.__c.__H=null),(r=xp({},r)).__c!=null&&(r.__c.__P===t&&(r.__c.__P=e),r.__c=null),r.__k=r.__k&&r.__k.map(function(n){return zf(n,e,t)})),r}function Xf(r,e,t){return r&&t&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(n){return Xf(n,e,t)}),r.__c&&r.__c.__P===e&&(r.__e&&t.appendChild(r.__e),r.__c.__e=!0,r.__c.__P=t)),r}function Ga(){this.__u=0,this.o=null,this.__b=null}function Wf(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function oo(){this.i=null,this.l=null}Le.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&32&r.__u&&(r.type=null),gu&&gu(r)},(Ga.prototype=new He).__c=function(r,e){var t=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(t);var i=Wf(n.__v),o=!1,a=function(){o||(o=!0,t.__R=null,i?i(s):s())};t.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=Xf(l,l.__c.__P,l.__c.__O)}var u;for(n.setState({__a:n.__b=null});u=n.o.pop();)u.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),r.then(a,a)},Ga.prototype.componentWillUnmount=function(){this.o=[]},Ga.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=zf(this.__b,t,n.__O=n.__P)}this.__b=null}var i=e.__a&&_e(kr,null,r.fallback);return i&&(i.__u&=-33),[_e(kr,null,e.__a?null:r.children),i]};var vu=function(r,e,t){if(++t[1]===t[0]&&r.l.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.l.size))for(t=r.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;r.i=t=t[2]}};(oo.prototype=new He).__a=function(r){var e=this,t=Wf(e.__v),n=e.l.get(r);return n[0]++,function(i){var o=function(){e.props.revealOrder?(n.push(i),vu(e,r,n)):i()};t?t(o):o()}},oo.prototype.render=function(r){this.i=null,this.l=new Map;var e=Do(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return r.children},oo.prototype.componentDidUpdate=oo.prototype.componentDidMount=function(){var r=this;this.l.forEach(function(e,t){vu(r,t,e)})};var wp=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Sp=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Cp=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Op=/[A-Z0-9]/g,Ap=typeof document<"u",Mp=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(r)};function yu(r,e,t){return e.__k==null&&(e.textContent=""),Qc(r,e),typeof t=="function"&&t(),r?r.__c:null}He.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(He.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var mu=Le.event;function Tp(){}function Np(){return this.cancelBubble}function Pp(){return this.defaultPrevented}Le.event=function(r){return mu&&(r=mu(r)),r.persist=Tp,r.isPropagationStopped=Np,r.isDefaultPrevented=Pp,r.nativeEvent=r};var Dp={enumerable:!1,configurable:!0,get:function(){return this.class}},_u=Le.vnode;Le.vnode=function(r){typeof r.type=="string"&&function(e){var t=e.props,n=e.type,i={},o=n.indexOf("-")===-1;for(var a in t){var s=t[a];if(!(a==="value"&&"defaultValue"in t&&s==null||Ap&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||Mp(t.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Cp.test(a)&&(a=l):l=a="oninput":o&&Sp.test(a)?a=a.replace(Op,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=s}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Do(t.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Do(t.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",Dp)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(r),r.$$typeof=wp,_u&&_u(r)};var bu=Le.__r;Le.__r=function(r){bu&&bu(r),r.__c};var xu=Le.diffed;Le.diffed=function(r){xu&&xu(r);var e=r.props,t=r.__e;t!=null&&r.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};var Rp=0;function I(r,e,t,n,i,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?a=e[s]:l[s]=e[s];var u={type:r,props:l,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Rp,__i:-1,__u:0,__source:i,__self:o};if(typeof r=="function"&&(a=r.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return Le.vnode&&Le.vnode(u),u}var Lp=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},Bi;(function(r){function e(t){var n=Lp(t,[]),i=t.container;if(!i)throw new Error("Ensure the container of LogicFlow is specified and valid.");return rt({},r.defaults,n)}r.get=e})(Bi||(Bi={}));(function(r){r.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}})(Bi||(Bi={}));var Eu={node:!1,edge:!1},kp={node:!0,edge:!0},jp=function(r){return!r||typeof r=="boolean"?r===!0?Re(kp):Re(Eu):ki(Re(Eu),r)},Ip=function(){return ll(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function At(r){try{return JSON.parse(JSON.stringify(r))}catch{return r}}var wu=200,Bp=9999,Hp=10,We;(function(r){r[r.DEFAULT=1]="DEFAULT",r[r.TEXT_EDIT=2]="TEXT_EDIT",r[r.SHOW_MENU=3]="SHOW_MENU",r[r.ALLOW_CONNECT=4]="ALLOW_CONNECT",r[r.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(We||(We={}));var ut;(function(r){r.NODE="node",r.EDGE="edge",r.GRAPH="graph"})(ut||(ut={}));var De;(function(r){r.NODE="node",r.CIRCLE_NODE="circle-node",r.POLYGON_NODE="polygon-node",r.RECT_NODE="rect-node",r.TEXT_NODE="text-node",r.ELLIPSE_NODE="ellipse-node",r.DIAMOND_NODE="diamond-node",r.HTML_NODE="html-node",r.CUSTOM_HTML_NODE="custom-html-node",r.EDGE="edge",r.LINE_EDGE="line-edge",r.POLYLINE_EDGE="polyline-edge",r.BEZIER_EDGE="bezier-edge",r.GRAPH="graph"})(De||(De={}));var fe;(function(r){r.ELEMENT_CLICK="element:click",r.NODE_ADD="node:add",r.NODE_DELETE="node:delete",r.NODE_CLICK="node:click",r.NODE_DBCLICK="node:dbclick",r.NODE_GROUP_COPY="node:group-copy-add",r.NODE_DND_ADD="node:dnd-add",r.NODE_DND_DRAG="node:dnd-drag",r.NODE_MOUSEDOWN="node:mousedown",r.NODE_DRAGSTART="node:dragstart",r.NODE_DRAG="node:drag",r.NODE_DROP="node:drop",r.NODE_MOUSEUP="node:mouseup",r.NODE_MOUSEMOVE="node:mousemove",r.NODE_MOUSEENTER="node:mouseenter",r.NODE_MOUSELEAVE="node:mouseleave",r.NODE_CONTEXTMENU="node:contextmenu",r.NODE_ROTATE="node:rotate",r.NODE_RESIZE="node:resize",r.NODE_FOCUS="node:focus",r.NODE_BLUR="node:blur",r.NODE_PROPERTIES_CHANGE="node:properties-change",r.NODE_PROPERTIES_DELETE="node:properties-delete",r.EDGE_ADD="edge:add",r.EDGE_DELETE="edge:delete",r.EDGE_CLICK="edge:click",r.EDGE_DBCLICK="edge:dbclick",r.EDGE_FOCUS="edge:focus",r.EDGE_BLUR="edge:blur",r.EDGE_MOUSEENTER="edge:mouseenter",r.EDGE_MOUSELEAVE="edge:mouseleave",r.EDGE_CONTEXTMENU="edge:contextmenu",r.EDGE_ADJUST="edge:adjust",r.EDGE_EXCHANGE_NODE="edge:exchange-node",r.ANCHOR_DRAGSTART="anchor:dragstart",r.ANCHOR_DRAG="anchor:drag",r.ANCHOR_DROP="anchor:drop",r.ANCHOR_DRAGEND="anchor:dragend",r.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",r.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",r.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",r.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",r.ADJUST_POINT_DRAG="adjustPoint:drag",r.ADJUST_POINT_DROP="adjustPoint:drop",r.ADJUST_POINT_DRAGEND="adjustPoint:dragend",r.BLANK_MOUSEDOWN="blank:mousedown",r.BLANK_DRAGSTART="blank:dragstart",r.BLANK_DRAG="blank:drag",r.BLANK_DROP="blank:drop",r.BLANK_MOUSEMOVE="blank:mousemove",r.BLANK_MOUSEUP="blank:mouseup",r.BLANK_CLICK="blank:click",r.BLANK_CONTEXTMENU="blank:contextmenu",r.SELECTION_MOUSEDOWN="selection:mousedown",r.SELECTION_DRAGSTART="selection:dragstart",r.SELECTION_DRAG="selection:drag",r.SELECTION_DROP="selection:drop",r.SELECTION_MOUSEMOVE="selection:mousemove",r.SELECTION_MOUSEUP="selection:mouseup",r.SELECTION_CONTEXTMENU="selection:contextmenu",r.CONNECTION_NOT_ALLOWED="connection:not-allowed",r.TEXT_MOUSEDOWN="text:mousedown",r.TEXT_DRAGSTART="text:dragstart",r.TEXT_DRAG="text:drag",r.TEXT_DROP="text:drop",r.TEXT_CLICK="text:click",r.TEXT_DBCLICK="text:dbclick",r.TEXT_BLUR="text:blur",r.TEXT_MOUSEMOVE="text:mousemove",r.TEXT_MOUSEUP="text:mouseup",r.TEXT_FOCUS="text:focus",r.TEXT_ADD="text:add",r.TEXT_UPDATE="text:update",r.TEXT_CLEAR="text:clear",r.LABEL_MOUSEDOWN="label:mousedown",r.LABEL_DRAGSTART="label:dragstart",r.LABEL_DRAG="label:drag",r.LABEL_DROP="label:drop",r.LABEL_CLICK="label:click",r.LABEL_DBCLICK="label:dbclick",r.LABEL_BLUR="label:blur",r.LABEL_MOUSEMOVE="label:mousemove",r.LABEL_MOUSEUP="label:mouseup",r.LABEL_FOCUS="label:focus",r.LABEL_ADD="label:add",r.LABEL_UPDATE="label:update",r.LABEL_CLEAR="label:clear",r.LABEL_DELETE="label:delete",r.LABEL_SHOULD_ADD="label:should-add",r.LABEL_BATCH_ADD="label:batch-add",r.LABEL_SHOULD_UPDATE="label:should-update",r.LABEL_SHOULD_DELETE="label:should-delete",r.LABEL_BATCH_DELETE="label:batch-delete",r.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",r.HISTORY_CHANGE="history:change",r.GRAPH_TRANSFORM="graph:transform",r.GRAPH_RENDERED="graph:rendered",r.GRAPH_UPDATED="graph:updated"})(fe||(fe={}));var ln;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.INCREASE=1]="INCREASE"})(ln||(ln={}));var at;(function(r){r.HORIZONTAL="horizontal",r.VERTICAL="vertical"})(at||(at={}));var qt;(function(r){r.TEXT="text",r.LABEL="label"})(qt||(qt={}));var Fp=0,Jt=function(){function r(e){var t=e.onDragStart,n=t===void 0?za:t,i=e.onDragging,o=i===void 0?za:i,a=e.onDragEnd,s=a===void 0?za:a,l=e.eventType,u=l===void 0?"":l,d=e.eventCenter,f=e.step,c=f===void 0?1:f,h=e.isStopPropagation,g=h===void 0?!0:h,p=e.model,v=e.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(b){var C,R,j=window==null?void 0:window.document;if(b.button===Fp){y.isStopPropagation&&b.stopPropagation(),y.isStartDragging=!0,y.startX=b.clientX,y.startY=b.clientY,j.addEventListener("mousemove",y.handleMouseMove,!1),j.addEventListener("mouseup",y.handleMouseUp,!1);var D=(C=y.model)===null||C===void 0?void 0:C.getData();(R=y.eventCenter)===null||R===void 0||R.emit(fe["".concat(y.eventType,"_MOUSEDOWN")],{e:b,data:y.data||D}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(b){var C,R;if(y.isStopPropagation&&b.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=b.clientX-y.startX,y.sumDeltaY+=b.clientY-y.startY,y.startX=b.clientX,y.startY=b.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var j=y.sumDeltaX%y.step,D=y.sumDeltaY%y.step,w=y.sumDeltaX-j,A=y.sumDeltaY-D;y.sumDeltaX=j,y.sumDeltaY=D;var z=(C=y.model)===null||C===void 0?void 0:C.getData();y.isDragging||((R=y.eventCenter)===null||R===void 0||R.emit(fe["".concat(y.eventType,"_DRAGSTART")],{e:b,data:y.data||z}),y.onDragStart({event:b})),y.isDragging=!0,Promise.resolve().then(function(){var Z,oe;y.onDragging({deltaX:w,deltaY:A,event:b}),(Z=y.eventCenter)===null||Z===void 0||Z.emit(fe["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:w,deltaY:A,e:b,data:y.data||z}),(oe=y.eventCenter)===null||oe===void 0||oe.emit(fe["".concat(y.eventType,"_DRAG")],{e:b,data:y.data||z})})}},this.handleMouseUp=function(b){var C=window.document;y.isStartDragging=!1,y.isStopPropagation&&b.stopPropagation(),Promise.resolve().then(function(){var R,j,D;C.removeEventListener("mousemove",y.handleMouseMove,!1),C.removeEventListener("mouseup",y.handleMouseUp,!1);var w=(R=y.model)===null||R===void 0?void 0:R.getData();(j=y.eventCenter)===null||j===void 0||j.emit(fe["".concat(y.eventType,"_MOUSEUP")],{e:b,data:y.data||w}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:b}),(D=y.eventCenter)===null||D===void 0||D.emit(fe["".concat(y.eventType,"_DROP")],{e:b,data:y.data||w}))})},this.cancelDrag=function(){var b=window==null?void 0:window.document;b.removeEventListener("mousemove",y.handleMouseMove,!1),b.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.destroy=function(){y.isStartDragging&&y.cancelDrag()},this.onDragStart=n,this.onDragging=o,this.onDragEnd=s,this.step=c,this.isStopPropagation=g,this.eventType=u,this.eventCenter=d,this.model=p,this.data=v}return r.prototype.setStep=function(e){this.step=e},r.prototype.setModel=function(e){this.model=e},r}(),zp=function(r){var e=r.x,t=r.y,n=r.width,i=r.height;return{x:e-n/2,y:t-i/2,x1:e+n/2,y1:t+i/2}},Xp=function(r){var e=r.startPoint,t=r.endPoint,n=(e.x+t.x)/2,i=(e.y+t.y)/2,o=Math.abs(e.x-t.x)+10,a=Math.abs(e.y-t.y)+10;return{x:n-o/2,y:i-a/2,x1:n+o/2,y1:i+a/2}},Wp=function(r){var e=r.points,t=gr(e),n=zi(t,8),i=n.x,o=n.y,a=n.width,s=n.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},$p=function(r){var e=r.path,t=Sl(e),n=zi(t,8),i=n.x,o=n.y,a=n.width,s=n.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},Yp=function(r){if(r.modelType===De.LINE_EDGE)return Xp(r);if(r.modelType===De.POLYLINE_EDGE)return Wp(r);if(r.modelType===De.BEZIER_EDGE)return $p(r)},Up=function(r,e,t,n){var i=(e.y-r.y)*(n.x-t.x)-(r.x-e.x)*(t.y-n.y);if(i===0)return!1;var o=((e.x-r.x)*(n.x-t.x)*(t.y-r.y)+(e.y-r.y)*(n.x-t.x)*r.x-(n.y-t.y)*(e.x-r.x)*t.x)/i,a=-((e.y-r.y)*(n.y-t.y)*(t.x-r.x)+(e.x-r.x)*(n.y-t.y)*r.y-(n.x-t.x)*(e.y-r.y)*t.y)/i;return(o-r.x)*(o-e.x)<=0&&(a-r.y)*(a-e.y)<=0&&(o-t.x)*(o-n.x)<=0&&(a-t.y)*(a-n.y)<=0?{x:o,y:a}:!1},Hi=function(r,e,t){var n=r.x,i=r.y,o=e.x,a=e.y,s=t.x,l=t.y,u=(l-a)/(s-o),d=a-u*o;return(n>=o&&n<=s||n<=o&&n>=s)&&(i>=a&&i<=l||i<=a&&i>=l)&&Math.abs(i-u*n-d)<Number.EPSILON},Fi=function(r){var e=r.start,t=r.end,n=r.offset,i=r.verticalLength,o=r.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((t.y-e.y)/(t.x-e.x)),l=Math.atan(n/i),u=Math.sqrt(i*i+n*n);return o==="start"?t.x>=e.x?(a.leftX=e.x+u*Math.sin(s+l),a.leftY=e.y-u*Math.cos(s+l),a.rightX=e.x-u*Math.sin(s-l),a.rightY=e.y+u*Math.cos(s-l)):(a.leftX=e.x-u*Math.sin(s+l),a.leftY=e.y+u*Math.cos(s+l),a.rightX=e.x+u*Math.sin(s-l),a.rightY=e.y-u*Math.cos(s-l)):o==="end"&&(t.x>=e.x?(a.leftX=t.x+u*Math.sin(s-l),a.leftY=t.y-u*Math.cos(s-l),a.rightX=t.x-u*Math.sin(s+l),a.rightY=t.y+u*Math.cos(s+l)):(a.leftX=t.x-u*Math.sin(s-l),a.leftY=t.y+u*Math.cos(s-l),a.rightX=t.x+u*Math.sin(s+l),a.rightY=t.y-u*Math.cos(s+l))),a},Pr=function(){return Pr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Pr.apply(this,arguments)},Gt=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Wn=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Gp=function(r,e){return Math.abs(r.centerX-e.centerX)*2<r.width+e.width&&Math.abs(r.centerY-e.centerY)*2<r.height+e.height},Os=function(r){var e=[],t={};return r.forEach(function(n){var i="".concat(n.x,"-").concat(n.y);n.id=i,t[i]=n}),Object.keys(t).forEach(function(n){e.push(t[n])}),e},zo=function(r,e){return r.width===0&&r.height===0?r:{x:r.x,y:r.y,centerX:r.centerX,centerY:r.centerY,minX:r.minX-e,minY:r.minY-e,maxX:r.maxX+e,maxY:r.maxY+e,height:r.height+2*e,width:r.width+2*e}},Vp=function(r,e){var t=Math.abs(r.x-e.centerX),n=Math.abs(r.y-e.centerY);return t/e.width>n/e.height?at.HORIZONTAL:at.VERTICAL},Xo=function(r,e,t){var n=Vp(t,e);return n===at.HORIZONTAL?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},Su=function(r,e){var t=Math.min(r.minX,e.minX),n=Math.min(r.minY,e.minY),i=Math.max(r.maxX,e.maxX),o=Math.max(r.maxY,e.maxY);return{x:(t+i)/2,y:(n+o)/2,centerX:(t+i)/2,centerY:(n+o)/2,minX:t,minY:n,maxX:i,maxY:o,height:o-n,width:i-t}},zi=function(r,e){r===void 0&&(r=[]);var t=[],n=[];r.forEach(function(d){t.push(d.x),n.push(d.y)});var i=Math.min.apply(Math,Wn([],Gt(t),!1)),o=Math.max.apply(Math,Wn([],Gt(t),!1)),a=Math.min.apply(Math,Wn([],Gt(n),!1)),s=Math.max.apply(Math,Wn([],Gt(n),!1)),l=o-i,u=s-a;return e&&(l+=e,u+=e),{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,x:(i+o)/2,y:(a+s)/2,height:u,width:l}},Wo=function(r){var e=r.minX,t=r.minY,n=r.maxX,i=r.maxY;return[{x:e,y:t},{x:n,y:t},{x:n,y:i},{x:e,y:i}]},ao=function(r,e){var t=r.x,n=r.y;return t<e.minX||t>e.maxX||n<e.minY||n>e.maxY},Kp=function(r,e){return e<r.minX||e>r.maxX?[]:[{x:e,y:r.minY},{x:e,y:r.maxY}]},qp=function(r,e){return e<r.minY||e>r.maxY?[]:[{x:r.minX,y:e},{x:r.maxX,y:e}]},Zp=function(r,e){return Wn(Wn([],Gt(Kp(r,e.x)),!1),Gt(qp(r,e.y)),!1)},As=function(r,e){return Math.abs(r.x-e.x)+Math.abs(r.y-e.y)},Jp=function(r,e){var t=-2,n=0;return e.forEach(function(i){i&&(r.x===i.x&&(n+=t),r.y===i.y&&(n+=t))}),n},Cu=function(r,e,t,n,i){return As(r,e)+As(r,t)+Jp(r,[e,t,n,i])},$f=function(r,e,t,n,i){i||(i=0),r.unshift(e[n]),t[n]&&t[n]!==n&&i<=100&&$f(r,e,t,t[n],i+1)},Qp=function(r,e){var t=r.indexOf(e);t>-1&&r.splice(t,1)},vi=function(r,e,t,n){var i=e.x-r.x,o=e.y-r.y,a=n.x-t.x,s=n.y-t.y,l=(-o*(r.x-t.x)+i*(r.y-t.y))/(-a*o+i*s),u=(a*(r.y-t.y)-s*(r.x-t.x))/(-a*o+i*s);return l>=0&&l<=1&&u>=0&&u<=1},Ou=function(r,e,t){if(t.width===0&&t.height===0)return!1;var n=Gt(Wo(t),4),i=n[0],o=n[1],a=n[2],s=n[3];return vi(r,e,i,o)||vi(r,e,i,s)||vi(r,e,o,a)||vi(r,e,a,s)},eg=function(r,e,t,n){var i=[];return r.forEach(function(o){o!==e&&(o.x===e.x||o.y===e.y)&&!Ou(o,e,t)&&!Ou(o,e,n)&&i.push(o)}),Os(i)},tg=function(r,e,t,n,i,o,a){var s=[],l=[e],u={},d={},f={};e.id&&(d[e.id]=0,f[e.id]=Cu(e,t,e));var c={};r.forEach(function(p){p.id&&(c[p.id]=p)});for(var h=function(){var p,v=1/0;if(l.forEach(function(b){b.id&&f[b.id]<v&&(v=f[b.id],p=b)}),p===t&&t.id){var y=[];return $f(y,c,u,t.id),{value:y}}if(!p)return{value:[e,t]};Qp(l,p),s.push(p),eg(r,p,n,i).forEach(function(b){if(s.indexOf(b)===-1&&(l.indexOf(b)===-1&&l.push(b),p!=null&&p.id&&(b!=null&&b.id))){var C=f[p.id]+As(p,b);if(d[b.id]&&C>=d[b.id])return;u[b.id]=p.id,d[b.id]=C,f[b.id]=d[b.id]+Cu(b,t,e,o,a)}})};l.length;){var g=h();if(typeof g=="object")return g.value}return[e,t]},Au=function(r){return It(r)},Yf=function(r){for(var e=1;e<r.length-1;){var t=r[e-1],n=r[e],i=r[e+1];t.x===n.x&&n.x===i.x||t.y===n.y&&n.y===i.y?r.splice(e,1):e++}return r},Mu=function(r,e,t,n,i){var o=Au(t),a=Au(n),s=zo(o,i),l=zo(a,i),u=Xo(s,o,r),d=Xo(l,a,e);if(Gp(s,l)){var f=rg(r,e,u,d);return Wn(Wn([r,u],Gt(f),!1),[d,e],!1)}var c=zi([u,d]),h=Su(s,c),g=Su(l,c),p=[];p=p.concat(Wo(h)),p=p.concat(Wo(g));var v={x:(r.x+e.x)/2,y:(r.y+e.y)/2};[c,h,g].forEach(function(b){p=p.concat(Zp(b,v).filter(function(C){return ao(C,s)&&ao(C,l)}))}),[{x:u.x,y:d.y},{x:d.x,y:u.y}].forEach(function(b){ao(b,s)&&ao(b,l)&&p.push(b)}),p.unshift(u),p.push(d),p=Os(p);var y=tg(p,u,d,o,a,r,e);return y.unshift(r),y.push(e),y.length>2&&(y=Yf(y)),Os(y)},ng=function(r){if(r.length===1){var e=Gt(r,1),t=e[0];return[t,t]}else{for(var n=r[0],i=r[1],o=dn(n.x,n.y,i.x,i.y),a=1;a<r.length-1;a++){var s=r[a],l=r[a+1],u=dn(s.x,s.y,l.x,l.y);u>o&&(o=u,n=s,i=l)}return[n,i]}},Tu=function(r,e,t){var n=$n(r,t),i=$n(e,t);return n&&i},Nu=function(r,e,t){var n=$n(r,t),i=$n(e,t),o=n&&i,a=n||i;return!o&&a},Pu=function(r,e,t){for(var n=void 0,i=It(t),o=Wo(i),a=0;a<o.length;a++){var s=vi(r,e,o[a],o[(a+1)%o.length]);s&&(n=[o[a],o[(a+1)%o.length]])}if(n)return Up(r,e,n[0],n[1])},$o=function(r,e){var t=void 0;return r.x===e.x?t=at.VERTICAL:r.y===e.y&&(t=at.HORIZONTAL),t},gr=function(r){var e=r.split(" "),t=[];return e&&e.forEach(function(n){var i=Gt(n.split(","),2),o=i[0],a=i[1];t.push({x:Number(o),y:Number(a)})}),t},rg=function(r,e,t,n){var i=[],o=$o(r,t),a=$o(e,n);if(o===a)r.y===t.y?(i.push({x:t.x,y:(t.y+n.y)/2}),i.push({x:n.x,y:(t.y+n.y)/2})):(i.push({x:(t.x+n.x)/2,y:t.y}),i.push({x:(t.x+n.x)/2,y:n.y}));else{var s={x:t.x,y:n.y},l=Hi(s,r,t),u=Hi(s,e,n);if(l||u)s={x:n.x,y:t.y};else{var d=Du(s,r,t),f=Du(s,e,n);d&&f&&(s={x:n.x,y:t.y})}i.push(s)}return i},Du=function(r,e,t){return r.x===e.x&&r.x===t.x||r.y===e.y&&r.y===t.y},Uf=function(r){if(!r)return 0;for(var e=0,t=0;t<r.length;t++){var n=r.charCodeAt(t);r.match(/[A-Z]/)?e+=1.5:n>=1&&n<=126||n>=65376&&n<=65439?e+=1:e+=2}return e},ig=function(r){var e=r.start,t=r.end,n;if(e.x===t.x&&e.y===t.y)n="";else{var i={start:e,end:t,offset:10,verticalLength:5},o=Fi(Pr(Pr({},i),{type:"start"})),a=Fi(Pr(Pr({},i),{type:"end"}));n="M".concat(o.leftX," ").concat(o.leftY,`
    L`).concat(o.rightX," ").concat(o.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:n,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Ru=function(r){var e=r.start,t=r.end,n=r.sourceNode,i=r.targetNode,o=r.offset,a=It(n),s=It(i),l=zo(a,o),u=zo(s,o),d=Xo(l,a,e),f=Xo(u,s,t);return{sNext:d,ePre:f}},Sl=function(r){var e=r.replace(/M/g,"").replace(/C/g,",").split(","),t=so(e[0]),n=so(e[1]),i=so(e[2]),o=so(e[3]);return[t,n,i,o]},so=function(r){var e=Gt(r.replace(/(^\s*)/g,"").split(" "),2),t=e[0],n=e[1];return{x:+t,y:+n}},Lu=function(r,e){var t=Gt(r,4),n=t[0],i=t[1],o=t[2],a=t[3],s=Ug(n,i,o,a,e);return[s,r[3]]},Gf=function(r,e){for(var t=r.x,n=r.y,i=gr(e),o=Number.MAX_SAFE_INTEGER,a,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach(function(c){var h=c.start,g=c.end;if(h.x===g.x){var p={x:h.x,y:n},v=Hi(p,h,g);if(v){var y=Math.abs(h.x-t);y<o&&(o=y,a=p)}}else if(h.y===g.y){var p={x:t,y:h.y},v=Hi(p,h,g);if(v){var y=Math.abs(h.y-n);y<o&&(o=y,a=p)}}}),!a){var u=s[0],d=u.start,f=u.end;a={x:d.x+(f.x-d.x)/2,y:d.y+(f.y-d.y)/2}}return a},og=function(r){return Tr(r,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},ku=function(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))};function ag(r,e){return typeof e!="function"?function(t,n,i){return Object.assign({type:r.edgeType},i)}:function(t,n,i){var o=e(t,n,i);return o?typeof o=="string"?Object.assign({},i,{type:o}):Object.assign({type:o},i):{type:r.edgeType}}}var sg=function(r){var e=r.rows,t=r.rowsLength,n=r.fontSize,i=0;return Qe(e,function(o){var a=Uf(o);i=a>i?a:i}),{width:Math.ceil(i/2)*n+n/4,height:t*(n+2)+n/4}},Er=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},lo=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};function Wr(r,e,t){return t&&e*Math.round(r/e)||r}function lg(r,e,t){if(!r)return[];var n=Math.min.apply(Math,lo([],Er(r.map(function(p){return p[0]})),!1)),i=Math.max.apply(Math,lo([],Er(r.map(function(p){return p[0]})),!1)),o=Math.min.apply(Math,lo([],Er(r.map(function(p){return p[1]})),!1)),a=Math.max.apply(Math,lo([],Er(r.map(function(p){return p[1]})),!1)),s=-n,l=-o,u=r.map(function(p){var v=Er(p,2),y=v[0],b=v[1];return[y+s,b+l]}),d=i-n,f=a-o,c=e?e/d:1,h=t?t/f:1,g=Math.min(c,h);return u.map(function(p){var v=Er(p,2),y=v[0],b=v[1];return[y*g,b*g]})}var Va=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ka=function(r,e,t){var n=Va(r,2),i=n[0],o=n[1],a=Va(e,2),s=a[0],l=a[1],u=Va(t,2),d=u[0],f=u[1];return i>s&&i<d&&o>l&&o<f},Vf=function(r,e){var t=e.multipleSelectKey,n=!1;switch(t){case"meta":n=r.metaKey;break;case"alt":n=r.altKey;break;case"shift":n=r.shiftKey;break;case"ctrl":n=r.ctrlKey;break;default:n=!1;break}return n},Cl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function ju(r,e){return r instanceof wt&&e instanceof wt}var Kf=function(r){Cl(e,r);function e(t,n,i){var o=r.call(this,3)||this;return o[0]=t,o[1]=n,o[2]=i,o.x=t,o.y=n,o.z=i,Object.setPrototypeOf(o,e.prototype),o}return e.prototype.add=function(t){if(ju(this,t))return new wt(this.x+t.x,this.y+t.y);var n=this.z+t.z;return new Ms((this.x+t.x)/n,(this.y+t.y)/n)},e.prototype.subtract=function(t){if(ju(this,t))return new wt(this.x-t.x,this.y-t.y);var n=this.z-t.z;return n===0?new wt(this.x-t.x,this.y-t.y):new Ms((this.x-t.x)/n,(this.y-t.y)/n)},e}(Array),wt=function(r){Cl(e,r);function e(t,n,i){var o=r.call(this,t,n,i??0)||this;return Object.setPrototypeOf(o,e.prototype),o}return e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(t){var n=this;return t.reduce(function(i,o,a){return i+o*n[a]})},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var t=this.getLength();return new e(this.x/t,this.y/t)},e.prototype.crossZ=function(t){return this.x*t.y-this.y*t.x},e.prototype.angle=function(t){var n=this.crossZ(t),i=Math.acos(this.normalize().dot(t.normalize()));return n>=0?i:-i},e}(Kf),Ms=function(r){Cl(e,r);function e(t,n){var i=r.call(this,t,n,1)||this;return Object.setPrototypeOf(i,e.prototype),i}return e.prototype.toString=function(){return"Point"},e}(Kf),Ta=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wr=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},qa=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Na=function(r){Ta(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.call(this,t.length)||this;return i.fill(new Array(3)),t.forEach(function(o,a){i[a]=o}),i.columns=t[0].length,i.rows=t.length,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.getRow=function(t){return this[t]},e.prototype.getColumn=function(t){return qa([],wr(this.map(function(n){return n[t]})),!1)},e.prototype.transpose=function(){for(var t=[],n=0;n<this.columns;n++)t.push(this.getColumn(n));return new(e.bind.apply(e,qa([void 0],wr(t),!1)))},e.prototype.cross=function(t){var n=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===t.rows)for(var i=0;i<this.rows;i++)for(var o=this.getRow(i),a=function(l){var u=t.getColumn(l);n[i][l]=o.reduce(function(d,f,c){return d+f*u[c]},0)},s=0;s<t.columns;s++)a(s);return new(e.bind.apply(e,qa([void 0],wr(n),!1)))},e.prototype.to2D=function(){return this.map(function(t){return[t[0],t[1]]})},e.prototype.toPoints=function(){return this.map(function(t){return new Ms(t[0],t[1])})},e.prototype.toString=function(){var t=wr(this[0],2),n=t[0],i=t[1],o=wr(this[1],2),a=o[0],s=o[1],l=wr(this[2],2),u=l[0],d=l[1];return"matrix(".concat(n," ").concat(i," ").concat(a," ").concat(s," ").concat(u," ").concat(d,")")},e.prototype.translate=function(t,n){return this.cross(new Pa(t,n))},e.prototype.rotate=function(t){return this.cross(new ug(t))},e.prototype.scale=function(t,n){return this.cross(new dg(t,n))},e}(Array),ug=function(r){Ta(e,r);function e(t){var n=r.call(this,new wt(+Math.cos(t).toFixed(2),+Math.sin(t).toFixed(2),0),new wt(-Math.sin(t).toFixed(2),+Math.cos(t).toFixed(2),0),new wt(0,0,1))||this;return Object.setPrototypeOf(n,e.prototype),n}return e.prototype.inverse=function(){return this.transpose()},e}(Na),dg=function(r){Ta(e,r);function e(t,n){var i=r.call(this,new wt(t,0,0),new wt(0,n,0),new wt(0,0,1))||this;return i.sx=t,i.sy=n,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}(Na),Pa=function(r){Ta(e,r);function e(t,n){var i=r.call(this,new wt(1,0,0),new wt(0,1,0),new wt(t,n,1))||this;return i.tx=t,i.ty=n,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}(Na);zh({});var Yo=function(){return Yo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Yo.apply(this,arguments)},Ts=function(r){var e=r.anchors;return e},Uo=function(r,e){for(var t=e.nodes,n,i=t.length-1;i>=0;i--){var o=t[i],a=hg(r,o);if(a){var s=o.getTargetAnchor(r);if(s){var l={node:o,anchorIndex:s.index,anchor:s.anchor};(!n||fg(o,n.node,e))&&(n=l)}}}return n},fg=function(r,e,t){return r.zIndex>e.zIndex?!0:t.nodesMap[r.id].index>t.nodesMap[e.id].index},cg=function(r,e){for(var t=Ts(e),n,i=Number.MAX_SAFE_INTEGER,o=0;o<t.length;o++){var a=dn(r.x,r.y,t[o].x,t[o].y);a<i&&(i=a,n={index:o,anchor:Yo(Yo({},t[o]),{x:t[o].x,y:t[o].y,id:t[o].id})})}return n},dn=function(r,e,t,n){return Math.hypot(r-t,e-n)},$n=function(r,e){var t=!1,n=0,i=It(e);return r.x>=i.minX-n&&r.x<=i.maxX+n&&r.y>=i.minY-n&&r.y<=i.maxY+n&&(t=!0),t},hg=function(r,e){var t=!1,n=5,i=It(e);return r.x>=i.minX-n&&r.x<=i.maxX+n&&r.y>=i.minY-n&&r.y<=i.maxY+n&&(t=!0),t},It=function(r){var e=r.x,t=r.y,n=r.width,i=r.height;return{minX:e-n/2,minY:t-i/2,maxX:e+n/2,maxY:t+i/2,x:e,y:t,width:n,height:i,centerX:e,centerY:t}},pg=function(r){var e=r,t=e.x,n=e.y,i=e.width,o=e.height,a=e.radius;return[{x:t-i/2+a,y:n-o/2+a,r:a},{x:t+i/2-a,y:n-o/2+a,r:a},{x:t-i/2+a,y:n+o/2-a,r:a},{x:t+i/2-a,y:n+o/2-a,r:a}]},Iu=function(r,e,t){var n=pg(t),i,o=Number.MAX_SAFE_INTEGER;return n.forEach(function(a){var s=dn(r.x,r.y,a.x,a.y);s<o&&(o=s,i=a)}),Ns(r,e,i)},Ns=function(r,e,t){var n,i=t.x,o=t.y,a=t.r;if(e===at.HORIZONTAL){var s=i-Math.sqrt(a*a-(r.y-o)*(r.y-o)),l=i+Math.sqrt(a*a-(r.y-o)*(r.y-o)),u=Math.abs(s-r.x)<Math.abs(l-r.x)?s:l;n={x:u,y:r.y}}else if(e===at.VERTICAL){var d=o-Math.sqrt(a*a-(r.x-i)*(r.x-i)),f=o+Math.sqrt(a*a-(r.x-i)*(r.x-i)),c=Math.abs(d-r.y)<Math.abs(f-r.y)?d:f;n={x:r.x,y:c}}return n},Bu=function(r,e){var t=e,n=!1,i=t.x,o=t.y,a=t.width,s=t.height,l=t.radius,u={minX:i-a/2+l,maxX:i+a/2-l,minY:o-s/2+l,maxY:o+s/2-l};return r.y===o+s/2||r.y===o-s/2?n=r.x>u.minX&&r.x<u.maxX:(r.x===i+a/2||r.x===i-a/2)&&(n=r.y>u.minY&&r.y<u.maxY),n},Hu=function(r,e,t){var n,i=t,o=i.x,a=i.y,s=i.rx,l=i.ry;if(e===at.HORIZONTAL){var u=o-Math.sqrt(s*s-(r.y-a)*(r.y-a)*s*s/(l*l)),d=o+Math.sqrt(s*s-(r.y-a)*(r.y-a)*s*s/(l*l)),f=Math.abs(u-r.x)<Math.abs(d-r.x)?u:d;n={x:f,y:r.y}}else if(e===at.VERTICAL){var c=a-Math.sqrt(l*l-(r.x-o)*(r.x-o)*l*l/(s*s)),h=a+Math.sqrt(l*l-(r.x-o)*(r.x-o)*l*l/(s*s)),g=Math.abs(c-r.y)<Math.abs(h-r.y)?c:h;n={x:r.x,y:g}}return n},uo=function(r,e,t){for(var n=t.pointsPosition,i=Number.MAX_SAFE_INTEGER,o,a=[],s=0;s<n.length;s++)a.push({start:n[s],end:n[(s+1)%n.length]});return a.forEach(function(l){var u=l.start,d=l.end,f=u,c=d;u.x>d.x&&(f=d,c=u);var h={x:r.x,y:r.y};if(f.x===c.x&&e===at.HORIZONTAL&&(h={x:f.x,y:r.y}),f.y===c.y&&e===at.VERTICAL&&(h={x:r.x,y:f.y}),f.x!==c.x&&f.y!==c.y){var g=(c.y-f.y)/(c.x-f.x),p=(f.x*c.y-c.x*f.y)/(f.x-c.x);e===at.HORIZONTAL?h={x:(r.y-p)/g,y:r.y}:e===at.VERTICAL&&(h={x:r.x,y:g*r.x+p})}var v=Hi(h,u,d);if(v){var y=dn(h.x,h.y,r.x,r.y);y<i&&(i=y,o=h)}}),o},gg=function(r){var e=Tr(r,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},Fu=function(r,e,t,n){var i=r.x,o=r.y;return e.x>r.x?i=r.x+t/2:e.x<r.x&&(i=r.x-t/2),e.y>r.y?o=r.y+n/2:e.y<r.y&&(o=r.y-n/2),{x:i,y:o}},qf=function(r){var e=r.rows,t=r.style,n=r.rowsLength,i=r.className,o=document.createElement("div");o.className=i,o.style.fontSize="".concat(t.fontSize),o.style.width="".concat(t.width),o.style.lineHeight="".concat(t.lineHeight),o.style.padding="".concat(t.padding),t.fontFamily&&(o.style.fontFamily="".concat(t.fontFamily)),n>1?e.forEach(function(s){var l=document.createElement("div");l.textContent=s,o.appendChild(l)}):o.textContent=e[0],document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},zu=function(r){var e=r.rows,t=r.rowsLength,n=r.fontSize,i=0;return e&&e.forEach(function(o){var a=Uf(o);i=a>i?a:i}),{width:Math.ceil(i/2)*n+n/4,height:t*(n+2)+n/4}},Go=function(r){return typeof r!="object"?{isAllPass:!!r,msg:r?"":"不允许连接"}:r};let fo;const vg=new Uint8Array(16);function yg(){if(!fo&&(fo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fo(vg)}const xt=[];for(let r=0;r<256;++r)xt.push((r+256).toString(16).slice(1));function mg(r,e=0){return xt[r[e+0]]+xt[r[e+1]]+xt[r[e+2]]+xt[r[e+3]]+"-"+xt[r[e+4]]+xt[r[e+5]]+"-"+xt[r[e+6]]+xt[r[e+7]]+"-"+xt[r[e+8]]+xt[r[e+9]]+"-"+xt[r[e+10]]+xt[r[e+11]]+xt[r[e+12]]+xt[r[e+13]]+xt[r[e+14]]+xt[r[e+15]]}const _g=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xu={randomUUID:_g};function bg(r,e,t){if(Xu.randomUUID&&!r)return Xu.randomUUID();r=r||{};const n=r.random||(r.rng||yg)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,mg(n)}var Un=function(){return bg()},_i=new Map,Zf=function(r){var e=Un();function t(){r();var i=_i.get(e);if(i){var o=window.requestAnimationFrame(t);_i.set(e,o)}}var n=window.requestAnimationFrame(t);return _i.set(e,n),e},Vo=function(r){var e=_i.get(r);e&&(window.cancelAnimationFrame(e),_i.delete(r))},Xi=function(){return Xi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Xi.apply(this,arguments)},xg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Jf(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,o=r.value,a=r.fontSize,s=a===void 0?12:a,l=r.fill,u=l===void 0?"currentColor":l,d=r.overflowMode,f=d===void 0?"default":d,c=r.textWidth,h=c===void 0?void 0:c,g=r.model,p={x:t,y:i,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(Qe(Vn(r),function(j){var D=xg(j,2),w=D[0],A=D[1];typeof A!="object"&&(p[w]=A)}),o){var v=String(o).split(/[\r\n]/g),y=v.length;if(f!=="default"){var b=g.BaseType,C=g.modelType;if(b===ut.NODE&&C!==De.TEXT_NODE||b===ut.EDGE&&h)return Eg(r)}if(y>1){var R=v.map(function(j,D){var w=s+2,A=(D-(y-1)/2)*w;return I("tspan",{className:"lf-text-tspan",x:t,y:i+A,children:j})});return I("text",Xi({},p,{children:R}))}return I("text",Xi({},p,{children:o}))}return null}function Eg(r){var e=r.x,t=r.y,n=r.value,i=r.model,o=r.textWidth,a=r.fontSize,s=a===void 0?12:a,l=r.lineHeight,u=r.fontFamily,d=u===void 0?"":u,f=r.wrapPadding,c=f===void 0?"0, 0":f,h=r.overflowMode,g=i.width,p=i.height,v=i.textHeight,y=o||g,b=String(n).split(/[\r\n]/g),C=b.length,R=qf({rows:b,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:d,lineHeight:l,padding:c},rowsLength:C,className:"lf-get-text-height"}),j=p>R?p:R;v&&(j=v);var D=h==="ellipsis";return D&&(j=s+2),I("g",{children:I("foreignObject",{width:y,height:j,x:e-y/2,y:t-j/2,style:{overflow:"visible",textAlign:"left"},children:I("div",{className:"lf-node-text-auto-wrap",style:{minHeight:j,width:y,padding:c},children:I("div",{className:D?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:D?b.join(""):"",style:Xi({},r),children:b.map(function(w){return I("div",{className:"lf-node-text--auto-wrap-inner",children:w})})})})})})}var Ps=function(){return Ps=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ps.apply(this,arguments)},wg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function $r(r){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Qe(Vn(r),function(t){var n=wg(t,2),i=n[0],o=n[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),I("line",Ps({},e))}var Ds=function(){return Ds=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ds.apply(this,arguments)},Sg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Vt(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=r.className,a=r.strokeWidth,s=r.radius,l=s===void 0?0:s,u=e-n/2,d=t-i/2,f={};return f["stroke-width"]=a,Qe(Vn(r),function(c){var h=Sg(c,2),g=h[0],p=h[1];typeof p!="object"&&(f[g]=p)}),o?f.className="lf-basic-shape ".concat(o):f.className="lf-basic-shape",l&&(f.rx=l,f.ry=l),f.x=u,f.y=d,I("rect",Ds({},f))}var Rs=function(){return Rs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Rs.apply(this,arguments)},Cg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Wi(r){var e={d:""};return Qe(Vn(r),function(t){var n=Cg(t,2),i=n[0],o=n[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),I("path",Rs({},e))}var Ls=function(){return Ls=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ls.apply(this,arguments)},Og=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Yr(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,o=r.r,a=o===void 0?4:o,s=r.className,l={cx:t,cy:i,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return Qe(Vn(r),function(u){var d=Og(u,2),f=d[0],c=d[1];typeof c!="object"&&(l[f]=c)}),s?l.className="lf-basic-shape ".concat(s):l.className="lf-basic-shape",I("circle",Ls({},l))}var ks=function(){return ks=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ks.apply(this,arguments)},Ag=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Mg(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,o=r.rx,a=o===void 0?4:o,s=r.ry,l=s===void 0?4:s,u=r.className,d={cx:t,cy:i,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return Qe(Vn(r),function(f){var c=Ag(f,2),h=c[0],g=c[1];typeof g!="object"&&(d[h]=g)}),u?d.className="lf-basic-shape ".concat(u):d.className="lf-basic-shape",I("ellipse",ks({},d))}var js=function(){return js=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},js.apply(this,arguments)},Tg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Ol(r){var e=r.points,t=e===void 0?[]:e,n=r.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Qe(Vn(r),function(o){var a=Tg(o,2),s=a[0],l=a[1];typeof l!="object"&&(i[s]=l)}),n?i.classNmae="lf-basic-shape ".concat(n):i.className="lf-basic-shape",i.points=t.map(function(o){return o.join(",")}).join(" "),I("polygon",js({},i))}var Is=function(){return Is=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Is.apply(this,arguments)},Ng=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};function Pg(r){var e=r.className,t={points:"",fill:"none"};return Qe(Vn(r),function(n){var i=Ng(n,2),o=i[0],a=i[1];(o==="style"||typeof a!="object")&&(t[o]=a)}),e&&(t.className="".concat(e)),I("polyline",Is({},t))}var Qf=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$i=function(){return $i=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},$i.apply(this,arguments)},Dg=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},Rg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},nt;(function(r){r[r.LEFT_TOP=0]="LEFT_TOP",r[r.RIGHT_TOP=1]="RIGHT_TOP",r[r.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",r[r.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(nt||(nt={}));var Lg=function(r){Qf(e,r);function e(t){var n=r.call(this)||this;n.updateEdgePointByAnchors=function(){var s=n.nodeModel,l=s.id,u=s.anchors,d=n.graphModel.getNodeEdges(l);Qe(d,function(f){if(f.sourceNodeId===l){var c=hr(u,function(h){return h.id===f.sourceAnchorId});c&&f.updateStartPoint({x:c.x,y:c.y})}else if(f.targetNodeId===l){var c=hr(u,function(g){return g.id===f.targetAnchorId});c&&f.updateEndPoint({x:c.x,y:c.y})}})},n.triggerResizeEvent=function(s,l,u,d,f,c){n.graphModel.eventCenter.emit(fe.NODE_RESIZE,{preData:s,data:l,deltaX:u,deltaY:d,index:f,model:c})},n.recalcResizeInfo=function(s,l,u,d,f){u===void 0&&(u=1),d===void 0&&(d=!1),f===void 0&&(f=!1);var c=Re(l),h=c.deltaX,g=c.deltaY,p=c.width,v=c.height,y=c.PCTResizeInfo;if(y){var b=4,C=0,R=0;switch(s){case nt.LEFT_TOP:R=(h*-1-g)/b;break;case nt.RIGHT_TOP:R=(h-g)/b;break;case nt.RIGHT_BOTTOM:R=(h+g)/b;break;case nt.LEFT_BOTTOM:R=(h*-1+g)/b;break}R!==0&&(C=Math.round(R/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+C,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+C,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var j=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),D=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case nt.LEFT_TOP:h=p-j,g=v-D;break;case nt.RIGHT_TOP:h=j-p,g=v-D;break;case nt.RIGHT_BOTTOM:h=j-p,g=D-v;break;case nt.LEFT_BOTTOM:h=p-j,g=D-v;break}return c}switch(s){case nt.LEFT_TOP:c.width=d?p:p-h*u,c.height=f?v:v-g*u;break;case nt.RIGHT_TOP:c.width=d?p:p+h*u,c.height=f?v:v-g*u;break;case nt.RIGHT_BOTTOM:c.width=d?p:p+h*u,c.height=f?v:v+g*u;break;case nt.LEFT_BOTTOM:c.width=d?p:p-h*u,c.height=f?v:v+g*u;break}return c},n.resizeNode=function(s){var l=s.deltaX,u=s.deltaY,d=n.index,f=n.props,c=f.model,h=f.graphModel,g=f.x,p=f.y;ec({x:g,y:p,deltaX:l,deltaY:u,index:d,nodeModel:c,graphModel:h,cancelCallback:function(){n.dragHandler.cancelDrag()}})},n.onDragging=function(s){var l=s.deltaX,u=s.deltaY,d=n.graphModel.transformModel,f=Rg(d.fixDeltaXY(l,u),2),c=f[0],h=f[1];n.resizeNode({deltaX:c,deltaY:h})},n.onDragEnd=function(){var s=n.nodeModel.x,l=n.nodeModel.y;n.nodeModel.moveTo(s,l),n.updateEdgePointByAnchors()};var i=t.index,o=t.model,a=t.graphModel;return n.index=i,n.nodeModel=o,n.graphModel=a,n.dragHandler=new Jt({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:a.gridSize}),n}return e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var t=this.props,n=t.x,i=t.y,o=t.direction,a=t.model,s=a.getResizeControlStyle(),l=s.width,u=s.height,d=Dg(s,["width","height"]);return I("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[I(Vt,$i({className:"lf-resize-control-content",x:n,y:i,width:l??7,height:u??7},d)),I(Vt,{className:"lf-resize-control-content",x:n,y:i,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(He),kg=function(r){Qf(e,r);function e(){return r.call(this)||this}return e.prototype.getResizeControl=function(){var t=this.props,n=t.model,i=t.graphModel,o=It(n),a=o.minX,s=o.minY,l=o.maxX,u=o.maxY,d=[{index:nt.LEFT_TOP,direction:"nw",x:a,y:s},{index:nt.RIGHT_TOP,direction:"ne",x:l,y:s},{index:nt.RIGHT_BOTTOM,direction:"se",x:l,y:u},{index:nt.LEFT_BOTTOM,direction:"sw",x:a,y:u}];return Rn(d,function(f){return I(Lg,$i({},f,{model:n,graphModel:i}))})},e.prototype.getResizeOutline=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return I(Vt,$i({},s,{x:n,y:i,width:o,height:a}))},e.prototype.render=function(){return I("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(He);function jg(r,e){var t=r.x,n=r.y,i=e.x,o=e.y,a={x:t+(i-t)/2,y:n+(o-n)/2};return a}function yi(r,e,t){var n=Ig(t),i=r.x-e.x,o=r.y-e.y,a=i*Math.cos(n)-o*Math.sin(n)+e.x,s=i*Math.sin(n)+o*Math.cos(n)+e.y;return{x:a,y:s}}function Ig(r){return r*Math.PI/180}function Bg(r){return r/Math.PI*180}function Hg(r,e,t,n,i,o,a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!1);var u=e.deltaX,d=e.deltaY,f=e.width,c=e.height,h=Bg(t),g={x:n,y:i},p={x:o,y:a},v=yi(g,p,h),y={x:v.x+u,y:v.y+d},b=Wg(v,y,p,h,s,l,f,c),C=b.width,R=b.height,j=b.center;return e.width=C*r,e.height=R*r,e.deltaX=(j.x-p.x)*2,e.deltaY=(j.y-p.y)*2,e}var Fg=function(r,e,t,n,i,o,a,s,l,u){t===void 0&&(t=1),n===void 0&&(n=!1),i===void 0&&(i=!1),o===void 0&&(o=0);var d=Re(e),f=d.deltaX,c=d.deltaY,h=d.width,g=d.height,p=d.PCTResizeInfo;if(p){var v=4,y=0,b=0;switch(r){case nt.LEFT_TOP:b=(f*-1-c)/v;break;case nt.RIGHT_TOP:b=(f-c)/v;break;case nt.RIGHT_BOTTOM:b=(f+c)/v;break;case nt.LEFT_BOTTOM:b=(f*-1+c)/v;break}b!==0&&(y=Math.round(b/p.ResizeBasis.basisHeight*1e5)/1e3),p.ResizePCT.widthPCT=Math.max(Math.min(p.ResizePCT.widthPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit),p.ResizePCT.heightPCT=Math.max(Math.min(p.ResizePCT.heightPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit);var C=Math.round(p.ResizePCT.widthPCT*p.ResizeBasis.basisWidth/100),R=Math.round(p.ResizePCT.heightPCT*p.ResizeBasis.basisHeight/100);switch(r){case nt.LEFT_TOP:f=h-C,c=g-R;break;case nt.RIGHT_TOP:f=C-h,c=g-R;break;case nt.RIGHT_BOTTOM:f=C-h,c=R-g;break;case nt.LEFT_BOTTOM:f=h-C,c=R-g;break}return d}if(o%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return Hg(t,d,o,a,s,l,u,n,i);switch(r){case nt.LEFT_TOP:d.width=n?h:h-f*t,d.height=i?g:g-c*t;break;case nt.RIGHT_TOP:d.width=n?h:h+f*t,d.height=i?g:g-c*t;break;case nt.RIGHT_BOTTOM:d.width=n?h:h+f*t,d.height=i?g:g+c*t;break;case nt.LEFT_BOTTOM:d.width=n?h:h-f*t,d.height=i?g:g+c*t;break}return d},zg=function(r,e){var t=r.id,n=r.anchors,i=e.getNodeEdges(t);Qe(i,function(o){if(o.sourceNodeId===t){var a=hr(n,function(s){return s.id===o.sourceAnchorId});a&&o.updateStartPoint({x:a.x,y:a.y})}else if(o.targetNodeId===t){var a=hr(n,function(l){return l.id===o.targetAnchorId});a&&o.updateEndPoint({x:a.x,y:a.y})}})},Xg=function(r,e,t,n,i,o,a){a.eventCenter.emit(fe.NODE_RESIZE,{preData:r,data:e,deltaX:t,deltaY:n,index:i,model:o})},ec=function(r){var e=r.x,t=r.y,n=r.deltaX,i=r.deltaY,o=r.index,a=r.nodeModel,s=r.graphModel,l=r.cancelCallback,u=a.r,d=a.rx,f=a.ry,c=a.width,h=a.height,g=a.PCTResizeInfo,p=a.minWidth,v=a.minHeight,y=a.maxWidth,b=a.maxHeight,C=a.rotate,R=a.x,j=a.y,D=p===y,w=v===b,A={width:u||d||c,height:u||f||h,deltaX:n,deltaY:i,PCTResizeInfo:g},z=u||d&&f?1/2:1,Z=e,oe=t,se=Fg(o,A,z,D,w,C,Z,oe,R,j);if(se.width<p||se.width>y||se.height<v||se.height>b){l==null||l();return}(C%(2*Math.PI)==0||g||Z===void 0||oe===void 0)&&(se.deltaX=D?0:se.deltaX,se.deltaY=w?0:se.deltaY);var E=a.getData(),M=a.resize(se);E.x===M.x&&E.y===M.y||(zg(a,s),Xg(E,M,n,i,o,a,s))};function Wg(r,e,t,n,i,o,a,s){i===void 0&&(i=!1),o===void 0&&(o=!1);var l={x:t.x-(r.x-t.x),y:t.y-(r.y-t.y)},u=jg(l,e),d=yi(e,u,-n),f=yi(l,u,-n);if(i){var c=Math.abs(d.x-f.x),h=c-a;u.x>d.x?u.x=u.x+h/2:u.x=u.x-h/2}if(o){var g=Math.abs(d.y-f.y),p=g-s;u.y>d.y?u.y=u.y+p/2:u.y=u.y-p/2}if(i||o){var v=yi(f,u,n),y=v.x-l.x,b=v.y-l.y;u.x=u.x-y,u.y=u.y-b,f=yi(l,u,-n),d={x:u.x-(f.x-u.x),y:u.y-(f.y-u.y)}}var C=Math.abs(d.x-f.x),R=Math.abs(d.y-f.y);return i&&(C=a),o&&(R=s),{width:C,height:R,center:u}}var $g=100,Yg={x:1,y:0};function Ug(r,e,t,n,i){for(var o=function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:r.x*Math.pow(1-h,3)+3*e.x*h*Math.pow(1-h,2)+3*t.x*Math.pow(h,2)*(1-h)+n.x*Math.pow(h,3),y:r.y*Math.pow(1-h,3)+3*e.y*h*Math.pow(1-h,2)+3*t.y*Math.pow(h,2)*(1-h)+n.y*Math.pow(h,3)}},a=0,s=2,l=n.x,u=n.y,d=n;a<i&&s<50;){d=o(1-s/$g);var f=d.x,c=d.y;a=dn(l,u,f,c),s++}return d}function Gg(r,e){return r.x*e.y-r.y*e.x}function Vg(r,e){var t=[r.x,r.y,r.z],n=[e.x,e.y,e.z];return n.reduce(function(i,o,a){return i+o*t[a]})}function Kg(r,e){var t=Gg(r,e),n=Math.acos(Vg(Wu(r),Wu(e)));return t>=0?n:-n}function Wu(r){var e=Math.hypot(r.x,r.y);return{x:r.x/e,y:r.y/e,z:0}}function qg(r){return Kg(Yg,r)}function Zg(r){return r*(180/Math.PI)}var Jg={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},tc=function(r){var e=Re(Jg);return r&&(e=ki(e,r)),e},Qg=tc,ev=1e3,tv=999,Al=function(){return++ev},nv=function(){return--tv},dt=function(){return dt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},dt.apply(this,arguments)},me=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Da=function(){function r(e,t){var n;this.BaseType=ut.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=qt.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=We.DEFAULT,this.modelType=De.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=t,this.properties=(n=e.properties)!==null&&n!==void 0?n:{},this.initEdgeData(e),this.setAttributes()}return r.prototype.initEdgeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,n=t&&t(e.type),i=this.createId();e.id=i||n||Un()}this.arrowConfig.markerEnd="url(#marker-end-".concat(e.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(e.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,rt(this,og(e));var a=this.graphModel.overlapMode;a===ln.INCREASE&&(this.zIndex=e.zIndex||Al()),this.setAnchors(),this.initPoints(),this.formatText(e)},r.prototype.setAttributes=function(){},r.prototype.createId=function(){return null},r.prototype.getEdgeStyle=function(){return dt(dt({},this.graphModel.theme.baseEdge),this.style)},r.prototype.getAdjustPointStyle=function(){return dt({},this.graphModel.theme.edgeAdjust)},r.prototype.getTextStyle=function(){var e=this.graphModel.theme.edgeText;return Re(e)},r.prototype.getEdgeAnimationStyle=function(){var e=this.graphModel.theme.edgeAnimation;return Re(e)},r.prototype.getArrowStyle=function(){var e=this.getEdgeStyle(),t=this.getEdgeAnimationStyle(),n=this.graphModel.theme.arrow,i=this.isAnimation?t.stroke:e.stroke;return dt(dt(dt({},e),{fill:i,stroke:i}),n)},r.prototype.getOutlineStyle=function(){var e=this.graphModel,t=e.theme.outline;return Re(t)},r.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(r.prototype,"sourceNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.sourceNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"targetNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.targetNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),r.prototype.getBeginAnchor=function(e,t,n){var i,o,a=Ts(e);if(n){if(i=hr(a,function(s){return s.id===n}),i)return i;console.warn("未在节点上找到指定的起点锚点".concat(n,"，已使用默认锚点作为起点"))}return a.forEach(function(s){var l=ku(s,t);(o===void 0||l<o)&&(o=l,i=s)}),i},r.prototype.getEndAnchor=function(e,t){var n=this,i,o,a=Ts(e);if(t){if(i=hr(a,function(s){return s.id===t}),i)return i;console.warn("未在节点上找到指定的终点锚点".concat(t,"，已使用默认锚点作为终点"))}return a.forEach(function(s){if(n.startPoint){var l=ku(s,n.startPoint);(o===void 0||l<o)&&(o=l,i=s)}}),i},r.prototype.getProperties=function(){return on(this.properties)},r.prototype.getData=function(){var e=this.properties;zr(e)&&(e=on(e));var t={id:this.id,type:this.type,properties:e,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:rt({},this.startPoint),endPoint:rt({},this.endPoint)};this.graphModel.overlapMode===ln.INCREASE&&(t.zIndex=this.zIndex);var n=this.text,i=n.x,o=n.y,a=n.value;return a&&(t.text={x:i,y:o,value:a}),t},r.prototype.getHistoryData=function(){return this.getData()},r.prototype.setProperty=function(e,t){bl(this.properties,e,At(t)),this.setAttributes()},r.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},r.prototype.setProperties=function(e){this.properties=dt(dt({},on(this.properties)),At(e)),this.setAttributes()},r.prototype.changeEdgeId=function(e){var t=this.arrowConfig,n=t.markerEnd,i=t.markerStart;i&&i==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(e,")")),n&&n==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(e,")")),this.id=e},r.prototype.setStyle=function(e,t){var n;this.style=dt(dt({},this.style),(n={},n[e]=At(t),n))},r.prototype.setStyles=function(e){this.style=dt(dt({},this.style),At(e))},r.prototype.updateStyles=function(e){this.style=dt({},At(e))},r.prototype.setTextMode=function(e){this.textMode=e},r.prototype.formatText=function(e){var t,n,i,o=this.graphModel.editConfigModel,a=o.edgeTextDraggable,s=o.edgeTextEdit,l=this.textPosition,u=l.x,d=l.y,f=e.text,c={value:"",x:u,y:d,draggable:a,editable:s};f&&(typeof f=="string"?c=dt(dt({},c),{value:f}):(c=dt(dt({},c),{x:(t=f.x)!==null&&t!==void 0?t:u,y:(n=f.y)!==null&&n!==void 0?n:d,value:(i=f.value)!==null&&i!==void 0?i:""}),Lr(f.draggable)||(c.draggable=f.draggable),Lr(f.editable)||(c.editable=f.editable))),this.text=c},r.prototype.resetTextPosition=function(){var e=this.textPosition,t=e.x,n=e.y;this.text.x=t,this.text.y=n},r.prototype.moveText=function(e,t){var n=this.text,i=n.x,o=n.y,a=n.value,s=n.draggable,l=n.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},r.prototype.setText=function(e){e&&rt(this.text,e)},r.prototype.updateText=function(e){this.text=dt(dt({},on(this.text)),{value:e})},r.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var e=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!e)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:e.x,y:e.y}),this.sourceAnchorId||(this.sourceAnchorId=e.id)}if(!this.targetAnchorId||!this.endPoint){var e=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!e)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:e.x,y:e.y}),this.targetAnchorId||(this.targetAnchorId=e.id)}},r.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},r.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e},r.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},r.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},r.prototype.openEdgeAnimation=function(){this.isAnimation=!0},r.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},r.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},r.prototype.updateStartPoint=function(e){this.startPoint=e},r.prototype.moveStartPoint=function(e,t){this.startPoint&&(this.startPoint.x+=e,this.startPoint.y+=t)},r.prototype.updateEndPoint=function(e){this.endPoint=e},r.prototype.moveEndPoint=function(e,t){this.endPoint&&(this.endPoint.x+=e,this.endPoint.y+=t)},r.prototype.setZIndex=function(e){e===void 0&&(e=0),this.zIndex=e},r.prototype.initPoints=function(){},r.prototype.updateAttributes=function(e){rt(this,e)},r.prototype.getAdjustStart=function(){return this.startPoint},r.prototype.getAdjustEnd=function(){return this.endPoint},r.prototype.updateAfterAdjustStartAndEnd=function(e){var t=e.startPoint,n=e.endPoint;this.updateStartPoint({x:t.x,y:t.y}),this.updateEndPoint({x:n.x,y:n.y})},r.BaseType=ut.EDGE,me([F],r.prototype,"type",void 0),me([F],r.prototype,"sourceNodeId",void 0),me([F],r.prototype,"targetNodeId",void 0),me([F],r.prototype,"startPoint",void 0),me([F],r.prototype,"endPoint",void 0),me([F],r.prototype,"textMode",void 0),me([F],r.prototype,"text",void 0),me([F],r.prototype,"properties",void 0),me([F],r.prototype,"points",void 0),me([F],r.prototype,"pointsList",void 0),me([F],r.prototype,"isSelected",void 0),me([F],r.prototype,"isHovered",void 0),me([F],r.prototype,"isHitable",void 0),me([F],r.prototype,"isHittable",void 0),me([F],r.prototype,"draggable",void 0),me([F],r.prototype,"visible",void 0),me([F],r.prototype,"isAnimation",void 0),me([F],r.prototype,"isShowAdjustPoint",void 0),me([F],r.prototype,"zIndex",void 0),me([F],r.prototype,"state",void 0),me([F],r.prototype,"style",void 0),me([F],r.prototype,"arrowConfig",void 0),me([ot],r.prototype,"sourceNode",null),me([ot],r.prototype,"targetNode",null),me([ot],r.prototype,"textPosition",null),me([B],r.prototype,"setProperty",null),me([B],r.prototype,"deleteProperty",null),me([B],r.prototype,"setProperties",null),me([B],r.prototype,"changeEdgeId",null),me([B],r.prototype,"setStyle",null),me([B],r.prototype,"setStyles",null),me([B],r.prototype,"updateStyles",null),me([B],r.prototype,"setTextMode",null),me([B],r.prototype,"formatText",null),me([B],r.prototype,"resetTextPosition",null),me([B],r.prototype,"moveText",null),me([B],r.prototype,"setText",null),me([B],r.prototype,"updateText",null),me([B],r.prototype,"setAnchors",null),me([B],r.prototype,"setSelected",null),me([B],r.prototype,"setHovered",null),me([B],r.prototype,"setHitable",null),me([B],r.prototype,"setHittable",null),me([B],r.prototype,"openEdgeAnimation",null),me([B],r.prototype,"closeEdgeAnimation",null),me([B],r.prototype,"setElementState",null),me([B],r.prototype,"updateStartPoint",null),me([B],r.prototype,"moveStartPoint",null),me([B],r.prototype,"updateEndPoint",null),me([B],r.prototype,"moveEndPoint",null),me([B],r.prototype,"setZIndex",null),me([B],r.prototype,"initPoints",null),me([B],r.prototype,"updateAttributes",null),me([B],r.prototype,"getAdjustStart",null),me([B],r.prototype,"getAdjustEnd",null),me([B],r.prototype,"updateAfterAdjustStartAndEnd",null),r}(),rv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ar=function(){return ar=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ar.apply(this,arguments)},en=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Za=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},$u=function(r){rv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.BEZIER_EDGE,i.path="",i.initEdgeData(t),i.setAttributes(),i}return e.prototype.initEdgeData=function(t){this.offset=100,r.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.bezier,n=r.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return ar(ar(ar({},n),Re(t)),Re(o))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var t=0,n=0;return this.pointsList.forEach(function(i){var o=i.x,a=i.y;t+=o,n+=a}),{x:t/this.pointsList.length,y:n/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var t=r.prototype.getData.call(this),n=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return ar(ar({},t),{pointsList:n})},e.prototype.getControls=function(){var t=this.startPoint,n=this.endPoint,i=Ru({start:t,end:n,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return i},e.prototype.getPath=function(t){var n=Za(t,4),i=n[0],o=n[1],a=n[2],s=n[3];return"M ".concat(i.x," ").concat(i.y,`
    C `).concat(o.x," ").concat(o.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=this.getControls(),n=t.sNext,i=t.ePre;this.updatePath(n,i)},e.prototype.updatePath=function(t,n){t=Re(t),n=Re(n);var i={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!t||!n){var a=this.getControls();t=a.sNext,n=a.ePre}this.pointsList=[i,t,n,o],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,n){this.startPoint.x+=t,this.startPoint.y+=n;var i=Za(this.pointsList,3),o=i[1],a=i[2];o.x+=t,o.y+=n,this.updatePath(o,a)},e.prototype.moveEndPoint=function(t,n){this.endPoint.x+=t,this.endPoint.y+=n;var i=Za(this.pointsList,3),o=i[1],a=i[2];a.x+=t,a.y+=n,this.updatePath(o,a)},e.prototype.updateAdjustAnchor=function(t,n){var i;n==="sNext"?this.pointsList[1]=t:n==="ePre"&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),!((i=this.text)===null||i===void 0)&&i.value&&this.setText(rt({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var n=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode,s=Ru({start:n,end:i,sourceNode:o,targetNode:a,offset:this.offset}),l=s.sNext,u=s.ePre;this.pointsList=[n,l,u,i],this.initPoints()},en([F],e.prototype,"path",void 0),en([B],e.prototype,"initPoints",null),en([B],e.prototype,"updatePoints",null),en([B],e.prototype,"updateStartPoint",null),en([B],e.prototype,"updateEndPoint",null),en([B],e.prototype,"moveStartPoint",null),en([B],e.prototype,"moveEndPoint",null),en([B],e.prototype,"updateAdjustAnchor",null),en([B],e.prototype,"getAdjustStart",null),en([B],e.prototype,"getAdjustEnd",null),en([B],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Da),iv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bi=function(){return bi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},bi.apply(this,arguments)},Yu=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ov=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Uu=function(r){iv(e,r);function e(){var t=r.apply(this,ov([],Yu(arguments),!1))||this;return t.modelType=De.LINE_EDGE,t}return e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.line,n=r.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return bi(bi(bi({},n),Re(t)),Re(o))},e.prototype.initEdgeData=function(t){r.prototype.initEdgeData.call(this,t),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(t){var n=Yu(t,2),i=n[0],o=n[1];return"".concat(i.x,",").concat(i.y," ").concat(o.x,",").concat(o.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(Da),av=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xi=function(){return xi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},xi.apply(this,arguments)},Ct=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gu=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},sv=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Yi=function(r){av(e,r);function e(){var t=r.apply(this,sv([],Gu(arguments),!1))||this;return t.modelType=De.POLYLINE_EDGE,t.draggingPointList=[],t}return e.prototype.initEdgeData=function(t){this.offset=30,t.pointsList&&(this.pointsList=t.pointsList),r.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.polyline,n=r.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return xi(xi(xi({},n),Re(t)),Re(o))},e.prototype.getTextPosition=function(){var t,n=(t=this.text)===null||t===void 0?void 0:t.value;if(this.dbClickPosition&&!n){var i=this.dbClickPosition,o=i.x,a=i.y;return{x:o,y:a}}var s=gr(this.points),l=Gu(ng(s),2),u=l[0],d=l[1];return{x:(u.x+d.x)/2,y:(u.y+d.y)/2}},e.prototype.getAfterAnchor=function(t,n,i){var o,a;return i.forEach(function(s){var l;t===at.HORIZONTAL?l=Math.abs(n.y-s.y):t===at.VERTICAL&&(l=Math.abs(n.x-s.x)),(!a||a>l)&&(a=l,o=s)}),o},e.prototype.getCrossPoint=function(t,n,i){var o;return t===at.HORIZONTAL?o={x:i.x,y:n.y}:t===at.VERTICAL&&(o={x:n.x,y:i.y}),o},e.prototype.removeCrossPoints=function(t,n,i){var o=i.map(function(y){return y});if(t===1){var a=o[t],s=o[n],l=o[t-1],u=Tu(l,a,this.sourceNode);if(u){var d=Nu(a,s,this.sourceNode);if(d){var f=Pu(a,s,this.sourceNode);f&&(o[t]=f,o.splice(t-1,1),t--,n--)}}else{var c=this.sourceNode.anchors;c.forEach(function(y){if(y.x===l.x&&y.x===a.x||y.y===l.y&&y.y===a.y){var b=dn(y.x,y.y,a.x,a.y),C=dn(l.x,l.y,a.x,a.y);b<C&&(o[t-1]=y)}})}}if(n===i.length-2){var h=o[t],g=o[n],p=o[n+1],v=Tu(g,p,this.targetNode);if(v){var d=Nu(h,g,this.targetNode);if(d){var f=Pu(h,g,this.targetNode);f&&(o[n]=f,o.splice(n+1,1))}}else{var c=this.targetNode.anchors;c.forEach(function(b){if(b.x===p.x&&b.x===g.x||b.y===p.y&&b.y===g.y){var C=dn(b.x,b.y,g.x,g.y),R=dn(p.x,p.y,g.x,g.y);C<R&&(o[n+1]=b)}})}}return o},e.prototype.getDraggingPoints=function(t,n,i,o,a){var s=a.map(function(d){return d}),l=this.getAfterAnchor(t,i,o),u=this.getCrossPoint(t,i,l);return n==="start"?(s.unshift(u),s.unshift(l)):(s.push(u),s.push(l)),s},e.prototype.updateCrossPoints=function(t){var n=t.map(function(b){return b}),i=t[0],o=t[1],a=t[n.length-2],s=t[n.length-1],l=this,u=l.sourceNode,d=l.targetNode,f=u.modelType,c=d.modelType,h=$o(i,o),g=n[0];switch(f){case De.RECT_NODE:if(u.radius!==0){var p=Bu(i,u);p||(g=Iu(i,h,u))}break;case De.CIRCLE_NODE:g=Ns(i,h,u);break;case De.ELLIPSE_NODE:g=Hu(i,h,u);break;case De.DIAMOND_NODE:g=uo(i,h,u);break;case De.POLYGON_NODE:g=uo(i,h,u);break}g&&(n[0]=g);var v=$o(a,s),y=n[n.length-1];switch(c){case De.RECT_NODE:if(d.radius!==0){var p=Bu(s,d);p||(y=Iu(s,v,d))}break;case De.CIRCLE_NODE:y=Ns(s,v,d);break;case De.ELLIPSE_NODE:y=Hu(s,v,d);break;case De.DIAMOND_NODE:y=uo(s,v,d);break;case De.POLYGON_NODE:y=uo(s,v,d);break}return y&&(n[n.length-1]=y),n},e.prototype.updatePath=function(t){this.pointsList=t,this.points=this.getPath(this.pointsList)},e.prototype.getData=function(){var t=r.prototype.getData.call(this),n=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Object.assign({},t,{pointsList:n})},e.prototype.getPath=function(t){return t.map(function(n){return"".concat(n.x,",").concat(n.y)}).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=Mu({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map(function(n){return"".concat(n.x,",").concat(n.y)}).join(" ")},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,n){this.startPoint.x+=t,this.startPoint.y+=n,this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveEndPoint=function(t,n){this.endPoint.x+=t,this.endPoint.y+=n,this.updatePoints()},e.prototype.updatePointsList=function(t,n){this.pointsList.forEach(function(a){a.x+=t,a.y+=n});var i=this.pointsList[0];this.startPoint=Object.assign({},i);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(t){return t})},e.prototype.dragAppendSimple=function(t,n){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,d=this.pointsList,f=d;return u===at.HORIZONTAL?(d[s]={x:o.x,y:o.y+n.y},d[l]={x:a.x,y:a.y+n.y},f=this.pointsList.map(function(c){return c})):u===at.VERTICAL&&(d[s]={x:o.x+n.x,y:o.y},d[l]={x:a.x+n.x,y:a.y},f=this.pointsList.map(function(c){return c})),this.updatePointsAfterDrag(f),this.draggingPointList=f,!((i=this.text)===null||i===void 0)&&i.value&&this.setText(rt({},this.text,this.textPosition)),{start:rt({},d[s]),end:rt({},d[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppend=function(t,n){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,d=this.pointsList;if(u===at.HORIZONTAL){d[s]={x:o.x,y:o.y+n.y},d[l]={x:a.x,y:a.y+n.y};var f=this.pointsList.map(function(v){return v});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var c={x:o.x,y:o.y+n.y},h=$n(c,this.sourceNode);if(!h){var g=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",c,g,f)}}if(l===this.pointsList.length-1){var p={x:a.x,y:a.y+n.y},h=$n(p,this.targetNode);if(!h){var g=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,g,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}else if(u===at.VERTICAL){d[s]={x:o.x+n.x,y:o.y},d[l]={x:a.x+n.x,y:a.y};var f=this.pointsList.map(function(y){return y});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var c={x:o.x+n.x,y:o.y},h=$n(c,this.sourceNode);if(!h){var g=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",c,g,f)}}if(l===this.pointsList.length-1){var p={x:a.x+n.x,y:a.y},h=$n(p,this.targetNode);if(!h){var g=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,g,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}return!((i=this.text)===null||i===void 0)&&i.value&&this.setText(rt({},this.text,this.textPosition)),{start:rt({},d[s]),end:rt({},d[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var t=Yf(gr(this.points));this.pointsList=t.map(function(o){return o}),this.draggingPointList=[];var n=t[0];this.startPoint=rt({},n);var i=t[t.length-1];this.endPoint=rt({},i)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(t){var n=this.updateCrossPoints(t);this.points=n.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var n=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode;this.pointsList=Mu({x:n.x,y:n.y},{x:i.x,y:i.y},o,a,this.offset||0),this.initPoints()},Ct([F],e.prototype,"dbClickPosition",void 0),Ct([B],e.prototype,"initPoints",null),Ct([B],e.prototype,"updatePoints",null),Ct([B],e.prototype,"updateStartPoint",null),Ct([B],e.prototype,"moveStartPoint",null),Ct([B],e.prototype,"updateEndPoint",null),Ct([B],e.prototype,"moveEndPoint",null),Ct([B],e.prototype,"updatePointsList",null),Ct([B],e.prototype,"dragAppendStart",null),Ct([B],e.prototype,"dragAppendSimple",null),Ct([B],e.prototype,"dragAppend",null),Ct([B],e.prototype,"dragAppendEnd",null),Ct([B],e.prototype,"updatePointsAfterDrag",null),Ct([B],e.prototype,"getAdjustStart",null),Ct([B],e.prototype,"getAdjustEnd",null),Ct([B],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Da),pt=function(){return pt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},pt.apply(this,arguments)},Oe=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Vu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lv=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},qn=function(){function r(e,t){var n;this.BaseType=ut.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=qt.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=We.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=De.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=t,this.properties=(n=e.properties)!==null&&n!==void 0?n:{},this.initNodeData(e),this.setAttributes()}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e;var t=this,n=t.x,i=n===void 0?0:n,o=t.y,a=o===void 0?0:o;this.transform=new Pa(-i,-a).rotate(e).translate(i,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),r.prototype.initNodeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,n=t&&t(e.type),i=this.createId();e.id=i||n||Un()}this.formatText(e),rt(this,gg(e));var o=this.graphModel.overlapMode;o===ln.INCREASE&&(this.zIndex=e.zIndex||Al())},r.prototype.setAttributes=function(){},r.prototype.createId=function(){return null},r.prototype.setTextMode=function(e){this.textMode=e},r.prototype.formatText=function(e){var t,n,i,o=this.graphModel.editConfigModel,a=o.nodeTextDraggable,s=o.nodeTextEdit,l=e.x,u=e.y,d=e.text,f={value:"",x:l,y:u,draggable:a,editable:s};d&&(typeof d=="string"?f.value=d:(f=pt(pt({},f),{x:(t=d.x)!==null&&t!==void 0?t:l,y:(n=d.y)!==null&&n!==void 0?n:u,value:(i=d.value)!==null&&i!==void 0?i:""}),Lr(d.draggable)||(f.draggable=d.draggable),Lr(d.editable)||(f.editable=d.editable))),e.text=f},r.prototype.resize=function(e){var t=e.width,n=e.height,i=e.deltaX,o=e.deltaY,a=this.isAllowResizeNode(i,o,t,n);return a?(this.move(i/2,o/2),this.width=t,this.height=n,this.setProperties({width:t,height:n}),this.getData()):this.getData()},r.prototype.proportionalResize=function(){},r.prototype.getData=function(){var e=this.text,t=e.x,n=e.y,i=e.value,o=this.properties;zr(o)&&(o=on(o)),un(o.width)&&(o.width=this.width),un(o.height)&&(o.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===ln.INCREASE&&(a.zIndex=this.zIndex),i&&(a.text={x:t,y:n,value:i}),a},r.prototype.getHistoryData=function(){return this.getData()},r.prototype.getProperties=function(){return on(this.properties)},r.prototype.getOuterGAttributes=function(){return{className:""}},r.prototype.getNodeStyle=function(){return pt(pt({},this.graphModel.theme.baseNode),this.style)},r.prototype.getTextStyle=function(){var e=this.graphModel.theme.nodeText,t=this.properties.textStyle,n=t===void 0?{}:t;return pt(pt({},Re(e)),Re(n))},r.prototype.getRotateControlStyle=function(){var e=this.graphModel.theme.rotateControl;return Re(e)},r.prototype.getResizeControlStyle=function(){var e=this.graphModel.theme.resizeControl;return Re(e)},r.prototype.getResizeOutlineStyle=function(){var e=this.graphModel.theme.resizeOutline;return Re(e)},r.prototype.getAnchorStyle=function(e){var t=this.graphModel.theme.anchor;return Re(t)},r.prototype.getAnchorLineStyle=function(e){var t=this.graphModel.theme.anchorLine;return Re(t)},r.prototype.getOutlineStyle=function(){var e=this.graphModel.theme.outline;return Re(e)},r.prototype.isAllowConnectedAsSource=function(e,t,n,i){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,this,e,t,n,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},r.prototype.getConnectedSourceRules=function(){return this.sourceRules},r.prototype.isAllowConnectedAsTarget=function(e,t,n,i){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,e,this,t,n,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},r.prototype.isAllowMoveNode=function(e,t){var n,i,o=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var l=Vu(s),u=l.next();!u.done;u=l.next()){var d=u.value,f=d(this,e,t);if(!f)return!1;if(typeof f=="object"){var c=f;if(!c.x&&!c.y)return!1;o=o&&c.x,a=a&&c.y}}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return{x:o,y:a}},r.prototype.getConnectedTargetRules=function(){return this.targetRules},r.prototype.getAnchorsByOffset=function(){var e=this,t=e.anchorsOffset,n=e.id,i=e.x,o=e.y;return t&&t.length>0?t.map(function(a,s){return a.length?(a=a,{id:"".concat(n,"_").concat(s),x:i+a[0],y:o+a[1]}):(a=a,pt(pt({},a),{x:i+a.x,y:o+a.y,id:a.id||"".concat(n,"_").concat(s)}))}):this.getDefaultAnchor()},r.prototype.getDefaultAnchor=function(){return[]},r.prototype.getTargetAnchor=function(e){return cg(e,this)},r.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(r.prototype,"anchors",{get:function(){var e=this.getAnchorsByOffset(),t=this,n=t.x,i=t.y,o=t.rotate;return e.forEach(function(a){var s=a.x,l=a.y,u=lv(new Na([s,l,1]).translate(-n,-i).rotate(o).translate(n,i)[0],2),d=u[0],f=u[1];a.x=d,a.y=f}),e},enumerable:!1,configurable:!0}),r.prototype.getAnchorInfo=function(e){if(!un(e))for(var t=0;t<this.anchors.length;t++){var n=this.anchors[t];if(n.id===e)return n}},r.prototype.addNodeMoveRules=function(e){this.moveRules.includes(e)||this.moveRules.push(e)},r.prototype.isAllowMoveByXORY=function(e,t,n){var i,o;if(n)i=!0,o=!0;else{var a=this.isAllowMoveNode(e,t);typeof a=="boolean"?(i=a,o=a):(i=a.x,o=a.y)}return{isAllowMoveX:i,isAllowMoveY:o}},r.prototype.move=function(e,t,n){n===void 0&&(n=!1);var i=this.isAllowMoveByXORY(e,t,n),o=i.isAllowMoveX,a=i.isAllowMoveY;return o&&(this.x=this.x+e,this.text&&this.moveText(e,0)),a&&(this.y=this.y+t,this.text&&this.moveText(0,t)),(o||a)&&(this.rotate=this._rotate),o||a},r.prototype.getMoveDistance=function(e,t,n){n===void 0&&(n=!1);var i=this.isAllowMoveByXORY(e,t,n),o=i.isAllowMoveX,a=i.isAllowMoveY,s=0,l=0;return o&&e&&(this.x=this.x+e,this.text&&this.moveText(e,0),s=e),a&&t&&(this.y=this.y+t,this.text&&this.moveText(0,t),l=t),[s,l]},r.prototype.moveTo=function(e,t,n){n===void 0&&(n=!1);var i=e-this.x,o=t-this.y;return!n&&!this.isAllowMoveNode(i,o)?!1:(this.text&&this.moveText(i,o),this.x=e,this.y=t,!0)},r.prototype.moveText=function(e,t){var n=this.text,i=n.x,o=n.y,a=n.value,s=n.draggable,l=n.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},r.prototype.updateText=function(e){this.text=pt(pt({},on(this.text)),{value:e})},r.prototype.addNodeResizeRules=function(e){this.resizeRules.includes(e)||this.resizeRules.push(e)},r.prototype.isAllowResizeNode=function(e,t,n,i){var o,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var l=Vu(s),u=l.next();!u.done;u=l.next()){var d=u.value,f=d(this,e,t,n,i);if(!f)return!1}}catch(c){o={error:c}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0},r.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},r.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e,this.setIsShowAnchor(e)},r.prototype.setIsShowAnchor=function(e){e===void 0&&(e=!0),this.isShowAnchor=e},r.prototype.setRotatable=function(e){e===void 0&&(e=!0),this.rotatable=e},r.prototype.setResizable=function(e){e===void 0&&(e=!0),this.resizable=e},r.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},r.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},r.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},r.prototype.updateProperties=function(e,t){var n=on(this.properties);this.properties=e,this.setAttributes(),this.graphModel.eventCenter.emit(fe.NODE_PROPERTIES_CHANGE,{id:this.id,keys:t,preProperties:n,properties:e})},r.prototype.setProperty=function(e,t){var n=on(this.properties),i=Re(n);Lc(i,e,At(t)),this.updateProperties(i,[e])},r.prototype.setProperties=function(e){var t=on(this.properties),n=pt(pt({},t),At(e)),i=[];kc(e,function(o,a){(cs(t,a)&&t[a]!==o||!cs(t,a))&&i.push(a)}),this.updateProperties(n,i)},r.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},r.prototype.setStyle=function(e,t){var n;this.style=pt(pt({},this.style),(n={},n[e]=At(t),n))},r.prototype.setStyles=function(e){this.style=pt(pt({},this.style),At(e))},r.prototype.updateStyles=function(e){this.style=pt({},At(e))},r.prototype.setZIndex=function(e){e===void 0&&(e=1),this.zIndex=e},r.prototype.updateAttributes=function(e){rt(this,e)},r.BaseType=ut.NODE,Oe([F],r.prototype,"type",void 0),Oe([F],r.prototype,"x",void 0),Oe([F],r.prototype,"y",void 0),Oe([F],r.prototype,"textMode",void 0),Oe([F],r.prototype,"text",void 0),Oe([F],r.prototype,"properties",void 0),Oe([F],r.prototype,"_width",void 0),Oe([F],r.prototype,"_height",void 0),Oe([F],r.prototype,"anchorsOffset",void 0),Oe([F],r.prototype,"isSelected",void 0),Oe([F],r.prototype,"isHovered",void 0),Oe([F],r.prototype,"isShowAnchor",void 0),Oe([F],r.prototype,"isDragging",void 0),Oe([F],r.prototype,"isHitable",void 0),Oe([F],r.prototype,"isHittable",void 0),Oe([F],r.prototype,"draggable",void 0),Oe([F],r.prototype,"visible",void 0),Oe([F],r.prototype,"rotatable",void 0),Oe([F],r.prototype,"resizable",void 0),Oe([F],r.prototype,"zIndex",void 0),Oe([F],r.prototype,"state",void 0),Oe([F],r.prototype,"autoToFront",void 0),Oe([F],r.prototype,"style",void 0),Oe([F],r.prototype,"transform",void 0),Oe([F],r.prototype,"_rotate",void 0),Oe([ot],r.prototype,"incoming",null),Oe([ot],r.prototype,"outgoing",null),Oe([B],r.prototype,"setTextMode",null),Oe([B],r.prototype,"addNodeMoveRules",null),Oe([B],r.prototype,"move",null),Oe([B],r.prototype,"getMoveDistance",null),Oe([B],r.prototype,"moveTo",null),Oe([B],r.prototype,"moveText",null),Oe([B],r.prototype,"updateText",null),Oe([B],r.prototype,"addNodeResizeRules",null),Oe([B],r.prototype,"setSelected",null),Oe([B],r.prototype,"setHovered",null),Oe([B],r.prototype,"setIsShowAnchor",null),Oe([B],r.prototype,"setRotatable",null),Oe([B],r.prototype,"setResizable",null),Oe([B],r.prototype,"setHitable",null),Oe([B],r.prototype,"setHittable",null),Oe([B],r.prototype,"setElementState",null),Oe([B],r.prototype,"setProperty",null),Oe([B],r.prototype,"setProperties",null),Oe([B],r.prototype,"deleteProperty",null),Oe([B],r.prototype,"setStyle",null),Oe([B],r.prototype,"setStyles",null),Oe([B],r.prototype,"updateStyles",null),Oe([B],r.prototype,"setZIndex",null),Oe([B],r.prototype,"updateAttributes",null),r}(),uv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ei=function(){return Ei=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ei.apply(this,arguments)},Ja=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ko=function(r){uv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.CIRCLE_NODE,i.r=50,i.initNodeData(t),i.setAttributes(),i}return Object.defineProperty(e.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties.r;t&&(this.r=t)},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this),n=this.graphModel.theme.circle,i=this.properties.style,o=i===void 0?{}:i;return Ei(Ei(Ei({},t),Re(n)),Re(o))},e.prototype.getDefaultAnchor=function(){var t=this,n=t.x,i=t.y,o=t.r;return[{x:n,y:i-o,id:"".concat(this.id,"_0")},{x:n+o,y:i,id:"".concat(this.id,"_1")},{x:n,y:i+o,id:"".concat(this.id,"_2")},{x:n-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var n=t.width,i=t.deltaX,o=t.deltaY;return this.move(i/2,o/2),this.r=n,this.setProperties({r:n}),this.getData()},Ja([F],e.prototype,"r",void 0),Ja([ot],e.prototype,"width",null),Ja([ot],e.prototype,"height",null),e}(qn),dv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wi=function(){return wi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wi.apply(this,arguments)},Sr=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},co=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Bs=function(r){dv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.DIAMOND_NODE,i.rx=30,i.ry=50,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties,n=t.rx,i=t.ry;n&&(this.rx=n),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this),n=this.graphModel.theme.diamond,i=this.properties.style,o=i===void 0?{}:i;return wi(wi(wi({},t),Re(n)),Re(o))},Object.defineProperty(e.prototype,"points",{get:function(){var t=this,n=t.x,i=t.y,o=t.rx,a=t.ry;return[[n,i-a],[n+o,i],[n,i+a],[n-o,i]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return Rn(this.points,function(t){var n=co(t,2),i=n[0],o=n[1];return{x:i,y:o}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return Qe(this.points,function(i){var o=co(i,1),a=o[0];a<t&&(t=a),a>n&&(n=a)}),n-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return Qe(this.points,function(i){var o=co(i,2),a=o[1];a<t&&(t=a),a>n&&(n=a)}),n-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this;return Rn(this.points,function(n,i){var o=co(n,2),a=o[0],s=o[1];return{x:a,y:s,id:"".concat(t.id,"_").concat(i)}})},e.prototype.resize=function(t){var n=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=n,this.ry=i,this.setProperties({rx:n,ry:i}),this.getData()},Sr([F],e.prototype,"rx",void 0),Sr([F],e.prototype,"ry",void 0),Sr([ot],e.prototype,"points",null),Sr([ot],e.prototype,"pointsPosition",null),Sr([ot],e.prototype,"width",null),Sr([ot],e.prototype,"height",null),e}(qn),fv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Si=function(){return Si=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Si.apply(this,arguments)},ho=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Hs=function(r){fv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.ELLIPSE_NODE,i.rx=30,i.ry=45,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties,n=t.rx,i=t.ry;n&&(this.rx=n),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this),n=this.graphModel.theme.ellipse,i=this.properties.style,o=i===void 0?{}:i;return Si(Si(Si({},t),Re(n)),Re(o))},Object.defineProperty(e.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,n=t.x,i=t.y,o=t.rx,a=t.ry;return[{x:n,y:i-a,id:"".concat(this.id,"_0")},{x:n+o,y:i,id:"".concat(this.id,"_1")},{x:n,y:i+a,id:"".concat(this.id,"_2")},{x:n-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var n=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=n,this.ry=i,this.setProperties({rx:n,ry:i}),this.getData()},ho([F],e.prototype,"rx",void 0),ho([F],e.prototype,"ry",void 0),ho([ot],e.prototype,"width",null),ho([ot],e.prototype,"height",null),e}(qn),cv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ci=function(){return Ci=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ci.apply(this,arguments)},po=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},go=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},qo=function(r){cv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.POLYGON_NODE,i.points=[[50,0],[100,50],[50,100],[0,50]],i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties,n=t.points,i=t.width,o=t.height,a=n||this.points;this.points=lg(a,i,o)},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this),n=this.graphModel.theme.polygon,i=this.properties.style,o=i===void 0?{}:i;return Ci(Ci(Ci({},t),Re(n)),Re(o))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var t=this,n=t.x,i=t.y,o=t.width,a=t.height;return this.points.map(function(s){return{x:s[0]+n-o/2,y:s[1]+i-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=go(i,1),a=o[0];a<t&&(t=a),a>n&&(n=a)}),n-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=go(i,2),a=o[1];a<t&&(t=a),a>n&&(n=a)}),n-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,n=this,i=n.x,o=n.y,a=n.width,s=n.height,l=n.points;return l.map(function(u,d){var f=go(u,2),c=f[0],h=f[1];return{x:i+c-a/2,y:o+h-s/2,id:"".concat(t.id,"_").concat(d)}})},e.prototype.resize=function(t){var n=this,i=t.width,o=t.height,a=t.deltaX,s=t.deltaY;this.move(a/2,s/2);var l=Rn(this.points,function(u){var d=go(u,2),f=d[0],c=d[1];return[f*i/n.width,c*o/n.height]});return this.points=l,this.properties.points=l,this.getData()},po([F],e.prototype,"points",void 0),po([ot],e.prototype,"pointsPosition",null),po([ot],e.prototype,"width",null),po([ot],e.prototype,"height",null),e}(qn),hv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oi=function(){return Oi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Oi.apply(this,arguments)},pv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ur=function(r){hv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.RECT_NODE,i.radius=0,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties,n=t.width,i=t.height,o=t.radius;un(n)||(this.width=n),un(i)||(this.height=i),un(o)||(this.radius=o)},e.prototype.getDefaultAnchor=function(){var t=this,n=t.x,i=t.y,o=t.width,a=t.height;return[{x:n,y:i-a/2,id:"".concat(this.id,"_0")},{x:n+o/2,y:i,id:"".concat(this.id,"_1")},{x:n,y:i+a/2,id:"".concat(this.id,"_2")},{x:n-o/2,y:i,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this),n=this.graphModel.theme.rect,i=this.properties.style,o=i===void 0?{}:i;return Oi(Oi(Oi({},t),Re(n)),Re(o))},pv([F],e.prototype,"radius",void 0),e}(qn),gv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ai=function(){return Ai=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ai.apply(this,arguments)},Ku=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vv=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},yv=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},qu=function(r){gv(e,r);function e(){var t=r.apply(this,yv([],vv(arguments),!1))||this;return t.modelType=De.TEXT_NODE,t}return e.prototype.getTextStyle=function(){var t=r.prototype.getTextStyle.call(this),n=this.graphModel.theme.text,i=this.properties.textStyle;return Ai(Ai(Ai({},t),Re(n)),Re(i))},Object.defineProperty(e.prototype,"width",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),n=this.getTextStyle().fontSize,i=zu({rows:t,fontSize:n,rowsLength:t.length}).width;return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),n=this.getTextStyle().fontSize,i=zu({rows:t,fontSize:n,rowsLength:t.length}).height;return i},enumerable:!1,configurable:!0}),Ku([ot],e.prototype,"width",null),Ku([ot],e.prototype,"height",null),e}(qn),mv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fs=function(r){mv(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.modelType=De.HTML_NODE,i.setAttributes(),i}return e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this);var t=this.properties,n=t.width,i=t.height;n&&(this.width=n),i&&(this.height=i)},e.prototype.getDefaultAnchor=function(){var t=this,n=t.x,i=t.y,o=t.width,a=t.height;return[{x:n,y:i-a/2,id:"".concat(this.id,"_0")},{x:n+o/2,y:i,id:"".concat(this.id,"_1")},{x:n,y:i+a/2,id:"".concat(this.id,"_2")},{x:n-o/2,y:i,id:"".concat(this.id,"_3")}]},e}(qn),Ve=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_v={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},vo=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],bv=function(){function r(e){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=qt.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=qt.TEXT,this.edgeTextMode=qt.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",rt(this,this.computeConfig(e))}return r.prototype.updateEditConfig=function(e){var t=this.computeConfig(e);rt(this,t)},r.prototype.computeConfig=function(e){var t=e.isSilentMode,n=e.textDraggable,i=e.textMode,o=e.textEdit,a=e.adjustEdgeStartAndEnd,s={};if(t===!1&&rt(s,this.stagedConfig),t===!0&&t!==this.isSilentMode){var l=Tr(_v,vo);this.stagedConfig=Tr(this,vo),rt(s,l)}Lr(o)||rt(s,{nodeTextEdit:o,edgeTextEdit:o}),Lr(n)||rt(s,{nodeTextDraggable:n,edgeTextDraggable:n}),i&&rt(s,{nodeTextMode:i,edgeTextMode:i}),hs(a)&&rt(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var u=Tr(e,vo);return rt(s,u)},r.prototype.updateTextMode=function(e){this.textMode=e,this.edgeTextMode=e,this.nodeTextMode=e},r.prototype.getConfig=function(){return Tr(this,vo)},Ve([F],r.prototype,"isSilentMode",void 0),Ve([F],r.prototype,"stopZoomGraph",void 0),Ve([F],r.prototype,"stopMoveGraph",void 0),Ve([F],r.prototype,"stopScrollGraph",void 0),Ve([F],r.prototype,"snapGrid",void 0),Ve([F],r.prototype,"textMode",void 0),Ve([F],r.prototype,"textEdit",void 0),Ve([F],r.prototype,"textDraggable",void 0),Ve([F],r.prototype,"nodeTextEdit",void 0),Ve([F],r.prototype,"nodeTextDraggable",void 0),Ve([F],r.prototype,"nodeTextMultiple",void 0),Ve([F],r.prototype,"nodeTextVertical",void 0),Ve([F],r.prototype,"nodeTextMode",void 0),Ve([F],r.prototype,"edgeTextMode",void 0),Ve([F],r.prototype,"edgeTextEdit",void 0),Ve([F],r.prototype,"edgeTextDraggable",void 0),Ve([F],r.prototype,"edgeTextMultiple",void 0),Ve([F],r.prototype,"edgeTextVertical",void 0),Ve([F],r.prototype,"hideAnchors",void 0),Ve([F],r.prototype,"allowRotate",void 0),Ve([F],r.prototype,"allowResize",void 0),Ve([F],r.prototype,"hoverOutline",void 0),Ve([F],r.prototype,"nodeSelectedOutline",void 0),Ve([F],r.prototype,"adjustNodePosition",void 0),Ve([F],r.prototype,"autoExpand",void 0),Ve([F],r.prototype,"adjustEdge",void 0),Ve([F],r.prototype,"adjustEdgeMiddle",void 0),Ve([F],r.prototype,"adjustEdgeStartAndEnd",void 0),Ve([F],r.prototype,"adjustEdgeStart",void 0),Ve([F],r.prototype,"adjustEdgeEnd",void 0),Ve([F],r.prototype,"edgeSelectedOutline",void 0),Ve([B],r.prototype,"updateEditConfig",null),Ve([B],r.prototype,"updateTextMode",null),r}(),xv="*",Ev=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){var i=this;e==null||e.split(",").forEach(function(o){o=o.trim(),i._events[o]||(i._events[o]=[]),i._events[o].push({callback:t,once:!!n})})},r.prototype.once=function(e,t){var n=this;e==null||e.split(",").forEach(function(i){i=i.trim(),n.on(i,t,!0)})},r.prototype.emit=function(e,t){var n=this;e==null||e.split(",").forEach(function(i){var o=n._events[i]||[],a=n._events[xv]||[],s=function(l){for(var u=l.length,d=0;d<u;d++)if(l[d]){var f=l[d],c=f.callback,h=f.once;h&&(l.splice(d,1),l.length===0&&delete n._events[i],u--,d--),c.apply(n,[t])}};s(o),s(a)})},r.prototype.off=function(e,t){var n=this;e||(this._events={}),e.split(",").forEach(function(i){if(!t)delete n._events[i];else{for(var o=n._events[i]||[],a=o.length,s=0;s<a;s++)o[s].callback===t&&(o.splice(s,1),a--,s--);o.length===0&&delete n._events[i]}})},r.prototype.getEvents=function(){return this._events},r.prototype.destroy=function(){this._events={}},r}(),wv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zs=function(){return zs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},zs.apply(this,arguments)},Sv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Cv=function(r){wv(e,r);function e(t){var n=r.call(this)||this;n.stepScrollX=0,n.stepScrollY=0,n.onDragging=function(s){var l=s.deltaX,u=s.deltaY;n.setState({isDragging:!0});var d=n.props.graphModel,f=d.transformModel,c=d.editConfigModel;c.stopMoveGraph!==!0&&f.translate(l,u)},n.onDragEnd=function(){n.setState({isDragging:!1})},n.zoomHandler=function(s){var l=n.props,u=l.graphModel,d=u.editConfigModel,f=u.transformModel,c=u.gridSize,h=l.graphModel,g=s.deltaX,p=s.deltaY,v=d.stopScrollGraph,y=d.stopZoomGraph;if(!v&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),n.stepScrollX+=g,n.stepScrollY+=p,Math.abs(n.stepScrollX)>=c){var b=n.stepScrollX%c,C=n.stepScrollX-b;f.translate(-C*f.SCALE_X,0),n.stepScrollX=b}if(Math.abs(n.stepScrollY)>=c){var R=n.stepScrollY%c,j=n.stepScrollY-R;f.translate(0,-j*f.SCALE_Y),n.stepScrollY=R}return}if(!y){s.preventDefault();var D=h.getPointByClient({x:s.clientX,y:s.clientY}),w=D.canvasOverlayPosition,A=w.x,z=w.y;f.zoom(s.deltaY<0,[A,z])}},n.clickHandler=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){var u=n.props.graphModel,d=u.selectElements;d.size>0&&u.clearSelectElements(),u.eventCenter.emit(fe.BLANK_CLICK,{e:s})}},n.handleContextMenu=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){s.preventDefault();var u=n.props.graphModel,d=u.getPointByClient({x:s.clientX,y:s.clientY});u.eventCenter.emit(fe.BLANK_CONTEXTMENU,{e:s,position:d})}},n.mouseDownHandler=function(s){var l=n.props.graphModel,u=l.eventCenter,d=l.editConfigModel,f=l.transformModel.SCALE_X,c=l.gridSize,h=d.adjustEdge,g=d.adjustNodePosition,p=d.stopMoveGraph,v=s.target,y=!h&&!g;(v.getAttribute("name")==="canvas-overlay"||y)&&(p!==!0?(n.stepDrag.setStep(c*f),n.stepDrag.handleMouseDown(s)):u.emit(fe.BLANK_MOUSEDOWN,{e:s}),n.clickHandler(s))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return n.stepDrag=new Jt({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),n.state={isDragging:!1},n}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,n=t.getTransformStyle().transform,i=this.props,o=i.children,a=i.dnd,s=this.state.isDragging;return I("svg",zs({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:I("g",{transform:n,children:o})}))},e=Sv([Pt],e),e}(He),nc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ui=function(){return Ui=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ui.apply(this,arguments)},Ov=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Av=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Zu=function(r){nc(e,r);function e(){var t=r.call(this)||this;return t.onDragging=function(n){var i=n.event,o=t.props,a=o.graphModel,s=o.bezierModel,l=o.type,u=a.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,d=u.x,f=u.y;s.updateAdjustAnchor({x:d,y:f},l),a.eventCenter.emit(fe.EDGE_ADJUST,{data:s.getData()})},t.onDragEnd=function(){var n=t.props.bezierModel;n.isDragging=!1},t.dragHandler=new Jt({onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.render=function(){var t=this,n=this.props.position,i=n.x,o=n.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return I(Yr,Ui({className:"lf-bezier-adjust-anchor",x:i,y:o},s,{onMouseDown:function(l){t.dragHandler.handleMouseDown(l)}}))},e}(He),Mv=function(r){nc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getBezierAdjust=function(t,n){var i=t.path,o=t.id,a=Sl(i),s=Av(a,4),l=s[0],u=s[1],d=s[2],f=s[3],c=t.getEdgeStyle().adjustLine,h=[];return h.push(I($r,Ui({x1:l.x,y1:l.y,x2:u.x,y2:u.y},c))),h.push(I(Zu,{position:u,bezierModel:t,graphModel:n,type:"sNext"},"".concat(o,"_ePre"))),h.push(I($r,Ui({x1:f.x,y1:f.y,x2:d.x,y2:d.y},c))),h.push(I(Zu,{position:d,bezierModel:t,graphModel:n,type:"ePre"},"".concat(o,"_sNext"))),h},e.prototype.selectedBezierEdge=function(){for(var t=this.props.graphModel,n=t.edges,i=[],o=0;o<n.length;o++){var a=n[o];a.isSelected&&a.modelType===De.BEZIER_EDGE&&a.draggable&&i.push(this.getBezierAdjust(a,t))}return i},e.prototype.render=function(){return I("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=Ov([Pt],e),e}(He),Tv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Pv=function(r){Tv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.background;return I("div",{className:"lf-background",children:I("div",{style:jc(t)?t:{},className:"lf-background-area"})})},e=Nv([Pt],e),e}(He),Dv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Zo=function(r){Dv(e,r);function e(t){var n=r.call(this,t)||this;return n.id=Un(),n.gridOptions=n.props.graphModel.grid,n}return e.prototype.renderDot=function(){var t=this.gridOptions,n=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=n??{},l=s.color,u=s.thickness,d=u===void 0?2:u,f=Math.min(Math.max(2,d),o/4),c=a?1:0;return I("g",{fill:l,opacity:c,children:[I("circle",{cx:0,cy:0,r:f/2}),I("circle",{cx:0,cy:o,r:f/2}),I("circle",{cx:o,cy:0,r:f/2}),I("circle",{cx:o,cy:o,r:f/2})]})},e.prototype.renderMesh=function(){var t=this.gridOptions,n=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=n??{},l=s.color,u=s.thickness,d=u===void 0?1:u,f=Math.min(Math.max(1,d),o/2),c="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),h=a?1:0;return I("path",{d:c,stroke:l,strokeWidth:f/2,opacity:h,fill:"transparent"})},e.prototype.render=function(){var t=this.props.graphModel.transformModel,n=this.gridOptions,i=n.type,o=n.size,a=o===void 0?1:o,s=t.SCALE_X,l=t.SKEW_Y,u=t.SKEW_X,d=t.SCALE_Y,f=t.TRANSLATE_X,c=t.TRANSLATE_Y,h=[s,l,u,d,f,c].join(","),g="matrix(".concat(h,")");return I("div",{className:"lf-grid",children:I("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[I("defs",{children:I("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:g,x:"0",y:"0",width:a,height:a,children:[i==="dot"&&this.renderDot(),i==="mesh"&&this.renderMesh()]})}),I("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=Rv([Pt],e),e}(He);(function(r){r.defaultProps={size:Hp,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function e(t){var n=Re(r.defaultProps);return typeof t=="number"?rt(n,{size:t}):typeof t=="boolean"?rt(n,{visible:t}):rt(n,t)}r.getGridOptions=e})(Zo||(Zo={}));var Lv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jv=function(r){Lv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,n=t.getTransformStyle().transform,i=this.props.children;return I("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:I("g",{transform:n,children:i})})},e=kv([Pt],e),e}(He),Iv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),In=function(){return In=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},In.apply(this,arguments)},Bv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Hv=function(r){Iv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getNodesOutline=function(){var t=this.props.graphModel,n=t.nodes,i=t.editConfigModel,o=i.hoverOutline,a=i.nodeSelectedOutline,s=[];return n.forEach(function(l){if(l.isHovered||l.isSelected){var u=l.isHovered,d=l.isSelected,f=l.x,c=l.y,h=l.width,g=l.height;if(a&&d||o&&u){var p=l.getOutlineStyle(),v={};if(Object.keys(p).forEach(function(b){b!=="hover"&&(v[b]=p[b])}),u){var y=p.hover;v=In(In({},v),y)}s.push(I(Vt,In({transform:l.transform,className:"lf-outline-node",x:f,y:c,width:h+10,height:g+10},v)))}}}),s},e.prototype.getEdgeOutline=function(){for(var t=this.props.graphModel,n=t.edges,i=t.editConfigModel,o=i.edgeSelectedOutline,a=i.hoverOutline,s=[],l=0;l<n.length;l++){var u=n[l];(o&&u.isSelected||a&&u.isHovered)&&(u.modelType===De.LINE_EDGE?s.push(this.getLineOutline(u)):u.modelType===De.POLYLINE_EDGE?s.push(this.getPolylineOutline(u)):u.modelType===De.BEZIER_EDGE&&s.push(this.getBezierOutline(u)))}return s},e.prototype.getLineOutline=function(t){var n=t.startPoint,i=t.endPoint,o=(n.x+i.x)/2,a=(n.y+i.y)/2,s=Math.abs(n.x-i.x)+10,l=Math.abs(n.y-i.y)+10,u=t.getOutlineStyle();return I(Vt,In({className:"lf-outline-edge",x:o,y:a,width:s,height:l},u))},e.prototype.getPolylineOutline=function(t){var n=t.points,i=gr(n),o=zi(i,8),a=o.x,s=o.y,l=o.width,u=o.height,d=t.getOutlineStyle();return I(Vt,In({className:"lf-outline",x:a,y:s,width:l,height:u},d))},e.prototype.getBezierOutline=function(t){var n=t.path,i=Sl(n),o=zi(i,8),a=o.x,s=o.y,l=o.width,u=o.height,d=t.getOutlineStyle();return I(Vt,In({className:"lf-outline",x:a,y:s,width:l,height:u},d))},e.prototype.render=function(){return I("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=Bv([Pt],e),e}(He),Fv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bn=function(){return Bn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Bn.apply(this,arguments)},zv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Xv=function(r){Fv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.snaplineModel,n=t??{},i=n.position,o=n.isShowHorizontal,a=n.isShowVertical,s=t==null?void 0:t.getStyle(),l=i??{},u=l.x,d=u===void 0?0:u,f=l.y,c=f===void 0?0:f,h=Bn(Bn({x1:-1e5,y1:c,x2:1e5,y2:c},s),{stroke:o?s==null?void 0:s.stroke:"none"}),g=Bn(Bn({x1:d,y1:-1e5,x2:d,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return I("g",{className:"lf-snapline",children:[I($r,Bn({},h)),I($r,Bn({},g))]})},e=zv([Pt],e),e}(He),Wv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$v=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Yv=function(r){Wv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var t=this.props,n=t.tool,i=t.graphModel,o=i.textEditElement,a=n.getTools(),s=a.map(function(l){return _e(l,{textEditElement:o,graphModel:i,lf:n.instance})});return n.components=s,s},e.prototype.triggerToolRender=function(){var t=this.props,n=t.tool,i=t.graphModel,o=document.querySelector("#ToolOverlay_".concat(i.flowId)),a=n.getInstance();a.components.forEach(function(s){return s(a,o)}),a.components=[]},e.prototype.render=function(){var t=this.props.graphModel;return I("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(t.flowId),children:this.getTools()})},e=$v([Pt],e),e}(He),Hn=function(){return Hn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Hn.apply(this,arguments)},ue=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Uv=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},$t=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Gv=function(){function r(e){var t=this,n,i;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=ln.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var o=e.container,a=e.partial,s=e.background,l=s===void 0?{}:s,u=e.grid,d=e.idGenerator,f=e.edgeGenerator,c=e.animation,h=e.customTrajectory;this.rootEl=o,this.partial=!!a,this.background=l,typeof u=="object"&&e.snapGrid&&(this.gridSize=u.size||1),this.theme=tc(e.style),this.grid=Zo.getGridOptions(u??!1),this.edgeType=e.edgeType||"polyline",this.animation=jp(c),this.overlapMode=e.overlapMode||ln.DEFAULT,this.width=(n=e.width)!==null&&n!==void 0?n:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=un(e.width),this.height=(i=e.height)!==null&&i!==void 0?i:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=un(e.height);var g=new ResizeObserver($d(function(p){var v,y;try{for(var b=Uv(p),C=b.next();!C.done;C=b.next()){var R=C.value;R.target===t.rootEl&&(t.resize(),t.eventCenter.emit("graph:resize",{target:t.rootEl,contentRect:R.contentRect}))}}catch(j){v={error:j}}finally{try{C&&!C.done&&(y=b.return)&&y.call(b)}finally{if(v)throw v.error}}},16));g.observe(this.rootEl),this.waitCleanEffects.push(function(){g.disconnect()}),this.eventCenter=new Ev,this.editConfigModel=new bv(e),this.transformModel=new qv(this.eventCenter,e),this.flowId=Un(),this.idGenerator=d,this.edgeGenerator=ag(this,f),this.customTrajectory=h}return Object.defineProperty(r.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(e,t,n){return e[t.id]={index:n,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(e,t,n){return e[t.id]={index:n,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modelsMap",{get:function(){return $t($t([],vt(this.nodes),!1),vt(this.edges),!1).reduce(function(e,t){return e[t.id]=t,e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sortElements",{get:function(){for(var e=$t($t([],vt(this.nodes),!1),vt(this.edges),!1).sort(function(s,l){return s.zIndex-l.zIndex}),t=[],n=[-200,-200],i=[this.width+wu,this.height+wu],o=0;o<e.length;o++){var a=e[o];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,n,i,!1,!1))&&t.push(a)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textEditElement",{get:function(){var e=this.nodes.find(function(n){return n.state===We.TEXT_EDIT}),t=this.edges.find(function(n){return n.state===We.TEXT_EDIT});return e||t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selectElements",{get:function(){var e=new Map;return this.nodes.forEach(function(t){t.isSelected&&e.set(t.id,t)}),this.edges.forEach(function(t){t.isSelected&&e.set(t.id,t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selectNodes",{get:function(){var e=[];return this.nodes.forEach(function(t){t.isSelected&&e.push(t)}),e},enumerable:!1,configurable:!0}),r.prototype.getAreaElement=function(e,t,n,i,o){var a=this;n===void 0&&(n=!0),i===void 0&&(i=!0),o===void 0&&(o=!1);var s=[];return Qe($t($t([],vt(this.nodes),!1),vt(this.edges),!1),function(l){var u=a.isElementInArea(l,e,t,n,i);(!o||l.visible)&&u&&s.push(l)}),s},r.prototype.getModel=function(e){return this.modelMap.get(e)},r.prototype.getNodeModelById=function(e){var t;return this.fakeNode&&e===this.fakeNode.id?this.fakeNode:(t=this.nodesMap[e])===null||t===void 0?void 0:t.model},r.prototype.getPointByClient=function(e){var t=e.x,n=e.y,i=this.rootEl.getBoundingClientRect(),o={x:t-i.left,y:n-i.top},a=vt(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),s=a[0],l=a[1],u={x:s,y:l};return{domOverlayPosition:o,canvasOverlayPosition:u}},r.prototype.isElementInArea=function(e,t,n,i,o){var a;if(i===void 0&&(i=!0),o===void 0&&(o=!0),e.BaseType===ut.NODE){e=e;for(var s=It(e),l=s.minX,u=s.minY,d=s.maxX,f=s.maxY,c=[{x:l,y:u},{x:d,y:u},{x:d,y:f},{x:l,y:f}],h=o,g=0;g<c.length;g++){var p=c[g],v=p.x,y=p.y;if(a=vt(this.transformModel.CanvasPointToHtmlPoint([v,y]),2),v=a[0],y=a[1],Ka([v,y],t,n)!==o){h=!o;break}}return h}if(e.BaseType===ut.EDGE){e=e;var b=e.startPoint,C=e.endPoint,R=this.transformModel.CanvasPointToHtmlPoint([b.x,b.y]),j=this.transformModel.CanvasPointToHtmlPoint([C.x,C.y]),D=Ka(R,t,n),w=Ka(j,t,n);return i?D&&w:D||w}return!1},r.prototype.graphDataToModel=function(e){var t=this;if(!e){this.clearData();return}if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),e.nodes?this.nodes=Rn(e.nodes,function(i){var o=t.getModelAfterSnapToGrid(i);return t.elementsModelMap.set(o.id,o),t.nodeModelMap.set(o.id,o),o}):this.nodes=[],e.edges){var n=this.edgeType;this.edges=Rn(e.edges,function(i){var o,a=t.getModel((o=i.type)!==null&&o!==void 0?o:n);if(!a)throw new Error("找不到".concat(i.type,"对应的边。"));var s=new a(i,t);return t.edgeModelMap.set(s.id,s),t.elementsModelMap.set(s.id,s),s})}else this.edges=[]},r.prototype.modelToGraphData=function(){var e=[];this.edges.forEach(function(n){var i=n.getData();i&&!n.virtual&&e.push(i)});var t=[];return this.nodes.forEach(function(n){var i=n.getData();i&&!n.virtual&&t.push(i)}),{nodes:t,edges:e}},r.prototype.modelToHistoryData=function(){for(var e=!1,t=[],n=0;n<this.nodes.length;n++){var i=this.nodes[n];if(i.isDragging){e=!0;break}else t.push(i.getHistoryData())}if(e)return!1;for(var o=!1,a=[],s=0;s<this.edges.length;s++){var l=this.edges[s];if(l.isDragging){o=!0;break}else a.push(l.getHistoryData())}return o?!1:{nodes:t,edges:a}},r.prototype.getEdgeModelById=function(e){var t;return(t=this.edgesMap[e])===null||t===void 0?void 0:t.model},r.prototype.getElement=function(e){return this.modelsMap[e]},r.prototype.getNodeEdges=function(e){for(var t=[],n=0;n<this.edges.length;n++){var i=this.edges[n],o=i.sourceNodeId===e,a=i.targetNodeId===e;(o||a)&&t.push(i)}return t},r.prototype.getSelectElements=function(e){e===void 0&&(e=!0);var t=this.selectElements,n={nodes:[],edges:[]};return t.forEach(function(i){if(i.BaseType===ut.NODE&&n.nodes.push(i.getData()),i.BaseType===ut.EDGE){var o=i.getData(),a=t.get(o.sourceNodeId)&&t.get(o.targetNodeId);(e||a)&&n.edges.push(o)}}),n},r.prototype.updateAttributes=function(e,t){var n=this.getElement(e);n==null||n.updateAttributes(t)},r.prototype.changeNodeId=function(e,t){return t||(t=Un()),this.nodesMap[t]?(console.warn("当前流程图已存在节点".concat(t,", 修改失败")),""):this.nodesMap[e]?(this.edges.forEach(function(n){n.sourceNodeId===e&&(n.sourceNodeId=t),n.targetNodeId===e&&(n.targetNodeId=t)}),this.nodesMap[e].model.id=t,this.nodesMap[t]=this.nodesMap[e],t):(console.warn("当前流程图找不到节点".concat(e,", 修改失败")),"")},r.prototype.changeEdgeId=function(e,t){return t||(t=Un()),this.edgesMap[t]?(console.warn("当前流程图已存在边: ".concat(t,", 修改失败")),""):this.edgesMap[e]?(this.edges.forEach(function(n){n.id===e&&n.changeEdgeId(t)}),t):(console.warn("当前流程图找不到边: ".concat(t,", 修改失败")),"")},r.prototype.getTextModel=function(e){var t=this.editConfigModel,n=t.textMode,i=t.nodeTextMode,o=t.edgeTextMode;if(e.BaseType===ut.NODE)return e.textMode||i||n||qt.TEXT;if(e.BaseType===ut.EDGE)return e.textMode||o||n||qt.TEXT},r.prototype.setTextMode=function(e,t){this.editConfigModel.updateEditConfig({textMode:e})},r.prototype.setFakeNode=function(e){this.fakeNode=e},r.prototype.removeFakeNode=function(){this.fakeNode=null},r.prototype.setModel=function(e,t){return this.modelMap.set(e,t)},r.prototype.toFront=function(e){var t,n,i,o=((t=this.nodesMap[e])===null||t===void 0?void 0:t.model)||((n=this.edgesMap[e])===null||n===void 0?void 0:n.model);o&&(this.overlapMode===ln.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex(),o.setZIndex(Bp),this.topElement=o),this.overlapMode===ln.INCREASE&&this.setElementZIndex(e,"top"))},r.prototype.setElementZIndex=function(e,t){var n,i,o=((n=this.nodesMap[e])===null||n===void 0?void 0:n.model)||((i=this.edgesMap[e])===null||i===void 0?void 0:i.model);if(o){var a=void 0;typeof t=="number"?a=t:(t==="top"&&(a=Al()),t==="bottom"&&(a=nv())),o.setZIndex(a)}},r.prototype.deleteNode=function(e){var t=this.nodesMap[e].model,n=t.getData();this.deleteEdgeBySource(e),this.deleteEdgeByTarget(e),this.nodes.splice(this.nodesMap[e].index,1),this.eventCenter.emit(fe.NODE_DELETE,{data:n,model:t})},r.prototype.addNode=function(e,t,n){t===void 0&&(t=fe.NODE_ADD);var i=At(e),o=i.id;o&&this.nodesMap[o]&&delete i.id;var a=this.getModelAfterSnapToGrid(i);this.nodes.push(a);var s=a.getData(),l={data:s};return n&&(l.e=n),this.eventCenter.emit(t,l),a},r.prototype.getModelAfterSnapToGrid=function(e){var t=this.getModel(e.type),n=this.editConfigModel.snapGrid;if(!t)throw new Error("找不到".concat(e.type,"对应的节点，请确认是否已注册此类型节点。"));var i=e.x,o=e.y;i&&o&&(e.x=Wr(i,this.gridSize,n),e.y=Wr(o,this.gridSize,n),typeof e.text=="object"&&e.text!==null&&(e.text.x+=e.x-i,e.text.y+=e.y-o));var a=new t(e,this);return this.nodeModelMap.set(a.id,a),this.elementsModelMap.set(a.id,a),a},r.prototype.cloneNode=function(e){var t=this.getNodeModelById(e),n=t==null?void 0:t.getData();if(n){n.x+=30,n.y+=30,n.id="",typeof n.text=="object"&&n.text!==null&&(n.text.x+=30,n.text.y+=30);var i=this.addNode(n);return i.setSelected(!0),t==null||t.setSelected(!1),i.getData()}},r.prototype.moveNode=function(e,t,n,i){var o;i===void 0&&(i=!1);var a=this.nodesMap[e];if(!a){console.warn("不存在id为".concat(e,"的节点"));return}var s=a.model;o=vt(s.getMoveDistance(t,n,i),2),t=o[0],n=o[1],this.moveEdge(e,t,n)},r.prototype.moveNode2Coordinate=function(e,t,n,i){i===void 0&&(i=!1);var o=this.nodesMap[e];if(!o){console.warn("不存在id为".concat(e,"的节点"));return}var a=o.model,s=a.x,l=a.y,u=t-s,d=n-l;this.moveNode(e,u,d,i)},r.prototype.editText=function(e){this.setElementStateById(e,We.TEXT_EDIT)},r.prototype.addEdge=function(e){var t=At(e),n=t.type;n||(n=this.edgeType),t.id&&this.edgesMap[t.id]&&delete t.id;var i=this.getModel(n);if(!i)throw new Error("找不到".concat(n,"对应的边，请确认是否已注册此类型边。"));var o=new i(Hn(Hn({},t),{type:n}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var a=o.getData();return this.edges.push(o),this.eventCenter.emit(fe.EDGE_ADD,{data:a}),o},r.prototype.moveEdge=function(e,t,n){for(var i=0;i<this.edges.length;i++){var o=this.edges[i],a=o.textPosition,s=a.x,l=a.y,u=this.edges[i].sourceNodeId===e,d=this.edges[i].targetNodeId===e;u&&o.moveStartPoint(t,n),d&&o.moveEndPoint(t,n),(u||d)&&this.handleEdgeTextMove(o,s,l)}},r.prototype.handleEdgeTextMove=function(e,t,n){var i;if(e.customTextPosition){e.resetTextPosition();return}if(e.modelType===De.POLYLINE_EDGE&&(!((i=e.text)===null||i===void 0)&&i.value)){var o=e.text,a=Gf(o,e.points);e.moveText(a.x-o.x,a.y-o.y)}var s=e.textPosition,l=s.x,u=s.y;e.moveText(l-t,u-n)},r.prototype.deleteEdgeBySourceAndTarget=function(e,t){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===e&&this.edges[n].targetNodeId===t){var i=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(fe.EDGE_DELETE,{data:i})}},r.prototype.deleteEdgeById=function(e){var t=this.edgesMap[e];if(t){var n=this.edgesMap[e].index,i=this.edgesMap[e].model.getData();this.edges.splice(n,1),this.eventCenter.emit(fe.EDGE_DELETE,{data:i})}},r.prototype.deleteEdgeBySource=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].sourceNodeId===e){var n=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(fe.EDGE_DELETE,{data:n})}},r.prototype.deleteEdgeByTarget=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].targetNodeId===e){var n=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(fe.EDGE_DELETE,{data:n})}},r.prototype.setElementStateById=function(e,t,n){this.nodes.forEach(function(i){i.id===e?i.setElementState(t,n):i.setElementState(We.DEFAULT)}),this.edges.forEach(function(i){i.id===e?i.setElementState(t,n):i.setElementState(We.DEFAULT)})},r.prototype.updateText=function(e,t){var n=hr($t($t([],vt(this.nodes),!1),vt(this.edges),!1),function(i){return i.id===e});n==null||n.updateText(t)},r.prototype.selectNodeById=function(e,t){var n;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(n=this.nodesMap[e])===null||n===void 0?void 0:n.model;i==null||i.setSelected(!0)},r.prototype.selectEdgeById=function(e,t){var n;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(n=this.edgesMap[e])===null||n===void 0?void 0:n.model;i==null||i.setSelected(!0)},r.prototype.selectElementById=function(e,t){t===void 0&&(t=!1),t||this.clearSelectElements();var n=this.getElement(e);n==null||n.setSelected(!0)},r.prototype.clearSelectElements=function(){var e;this.selectElements.forEach(function(t){t==null||t.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===ln.DEFAULT&&((e=this.topElement)===null||e===void 0||e.setZIndex())},r.prototype.moveNodes=function(e,t,n,i){var o,a,s,l=this;i===void 0&&(i=!1);for(var u=e.reduce(function(C,R){var j,D=(j=l.nodesMap[R])===null||j===void 0?void 0:j.model;return D&&(C[R]=D.getMoveDistance(t,n,i)),C},{}),d=0;d<this.edges.length;d++){var f=this.edges[d],c=f.textPosition,h=c.x,g=c.y,p=u[f.sourceNodeId],v=u[f.targetNodeId],y=void 0,b=void 0;p&&v&&f.modelType===De.POLYLINE_EDGE?(o=vt(p,2),y=o[0],b=o[1],f.updatePointsList(y,b)):(p&&(a=vt(p,2),y=a[0],b=a[1],f.moveStartPoint(y,b)),v&&(s=vt(v,2),y=s[0],b=s[1],f.moveEndPoint(y,b))),(p||v)&&this.handleEdgeTextMove(f,h,g)}},r.prototype.addNodeMoveRules=function(e){this.nodeMoveRules.includes(e)||this.nodeMoveRules.push(e)},r.prototype.addNodeResizeRules=function(e){this.nodeResizeRules.includes(e)||this.nodeResizeRules.push(e)},r.prototype.setDefaultEdgeType=function(e){this.edgeType=e},r.prototype.changeNodeType=function(e,t){var n=this.getNodeModelById(e);if(!n){console.warn("找不到id为".concat(e,"的节点"));return}var i=n.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));var a=new o(i,this);this.nodes.splice(this.nodesMap[e].index,1,a);var s=this.getNodeEdges(e);s.forEach(function(l){if(l.sourceNodeId===e){var u=Fu(a,l.startPoint,a.width,a.height);l.updateStartPoint(u)}if(l.targetNodeId===e){var u=Fu(a,l.endPoint,a.width,a.height);l.updateEndPoint(u)}})},r.prototype.changeEdgeType=function(e,t){var n=this.getEdgeModelById(e);if(!n){console.warn("找不到id为".concat(e,"的边"));return}if(n.type!==t){var i=n.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));delete i.pointsList;var a=new o(i,this);this.edges.splice(this.edgesMap[e].index,1,a)}},r.prototype.getNodeIncomingEdge=function(e){var t=[];return this.edges.forEach(function(n){n.targetNodeId===e&&t.push(n)}),t},r.prototype.getNodeOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(n){n.sourceNodeId===e&&t.push(n)}),t},r.prototype.getAnchorIncomingEdge=function(e){var t=[];return this.edges.forEach(function(n){n.targetAnchorId===e&&t.push(n)}),t},r.prototype.getAnchorOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(n){n.sourceAnchorId===e&&t.push(n)}),t},r.prototype.getNodeIncomingNode=function(e){var t=this,n=[];return this.edges.forEach(function(i){var o;i.targetNodeId===e&&n.push((o=t.nodesMap[i.sourceNodeId])===null||o===void 0?void 0:o.model)}),n},r.prototype.getNodeOutgoingNode=function(e){var t=this,n=[];return this.edges.forEach(function(i){i.sourceNodeId===e&&n.push(t.nodesMap[i.targetNodeId].model)}),n},r.prototype.setTheme=function(e){this.theme=Qg(Hn(Hn({},this.theme),e))},r.prototype.updateGridOptions=function(e){ki(this.grid,e)},r.prototype.updateGridSize=function(e){this.gridSize=e},r.prototype.updateBackgroundOptions=function(e){hs(e)||hs(this.background)?this.background=e:this.background=Hn(Hn({},this.background),e)},r.prototype.resize=function(e,t){this.width=e??this.rootEl.getBoundingClientRect().width,this.isContainerWidth=un(e),this.height=t??this.rootEl.getBoundingClientRect().height,this.isContainerHeight=un(t),(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},r.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},r.prototype.getVirtualRectSize=function(){var e=this.nodes,t=[],n=[];e.forEach(function(c){var h=c.x,g=c.y,p=c.width,v=c.height,y=c.getNodeStyle().strokeWidth,b=y===void 0?0:y,C=h+p/2+b,R=h-p/2-b,j=g+v/2+b,D=g-v/2-b;t=t.concat([C,R].filter(function(w){return!Number.isNaN(w)})),n=n.concat([j,D].filter(function(w){return!Number.isNaN(w)}))});var i=Math.min.apply(Math,$t([],vt(t),!1)),o=Math.max.apply(Math,$t([],vt(t),!1)),a=Math.min.apply(Math,$t([],vt(n),!1)),s=Math.max.apply(Math,$t([],vt(n),!1)),l=o-i||0,u=s-a||0,d=i+l/2,f=a+u/2;return{width:l,height:u,x:d,y:f}},r.prototype.translateCenter=function(){var e=this,t=e.nodes,n=e.width,i=e.height,o=e.rootEl,a=e.transformModel;if(t.length){var s=n||o.clientWidth,l=i||o.clientHeight,u=this.getVirtualRectSize(),d=u.x,f=u.y;a.focusOn(d,f,s,l)}},r.prototype.fitView=function(e,t){e===void 0&&(e=20),t===void 0&&(t=20);var n=this,i=n.nodes,o=n.width,a=n.height,s=n.rootEl,l=n.transformModel;if(i.length){var u=o||s.clientWidth,d=a||s.clientHeight,f=this.getVirtualRectSize(),c=f.width,h=f.height,g=f.x,p=f.y,v=(c+t)/u,y=(h+e)/d,b=1/Math.max(v,y),C=[u/2,d/2];l.zoom(b,C),l.focusOn(g,p,u,d)}},r.prototype.openEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.openEdgeAnimation()},r.prototype.closeEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.closeEdgeAnimation()},r.prototype.getPartial=function(){return this.partial},r.prototype.setPartial=function(e){this.partial=e},r.prototype.destroy=function(){try{this.waitCleanEffects.forEach(function(e){e()})}catch(e){console.warn("error on destroy GraphModel",e)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},ue([F],r.prototype,"width",void 0),ue([F],r.prototype,"height",void 0),ue([F],r.prototype,"grid",void 0),ue([F],r.prototype,"edgeType",void 0),ue([F],r.prototype,"nodes",void 0),ue([F],r.prototype,"edges",void 0),ue([F],r.prototype,"fakeNode",void 0),ue([F],r.prototype,"overlapMode",void 0),ue([F],r.prototype,"background",void 0),ue([F],r.prototype,"gridSize",void 0),ue([F],r.prototype,"transformModel",void 0),ue([F],r.prototype,"editConfigModel",void 0),ue([F],r.prototype,"partial",void 0),ue([ot],r.prototype,"nodesMap",null),ue([ot],r.prototype,"edgesMap",null),ue([ot],r.prototype,"modelsMap",null),ue([ot],r.prototype,"sortElements",null),ue([ot],r.prototype,"textEditElement",null),ue([ot],r.prototype,"selectElements",null),ue([ot],r.prototype,"selectNodes",null),ue([B],r.prototype,"setTextMode",null),ue([B],r.prototype,"setFakeNode",null),ue([B],r.prototype,"removeFakeNode",null),ue([B],r.prototype,"setModel",null),ue([B],r.prototype,"toFront",null),ue([B],r.prototype,"setElementZIndex",null),ue([B],r.prototype,"deleteNode",null),ue([B],r.prototype,"addNode",null),ue([B],r.prototype,"cloneNode",null),ue([B],r.prototype,"moveNode",null),ue([B],r.prototype,"moveNode2Coordinate",null),ue([B],r.prototype,"editText",null),ue([B],r.prototype,"addEdge",null),ue([B],r.prototype,"moveEdge",null),ue([B],r.prototype,"deleteEdgeBySourceAndTarget",null),ue([B],r.prototype,"deleteEdgeById",null),ue([B],r.prototype,"deleteEdgeBySource",null),ue([B],r.prototype,"deleteEdgeByTarget",null),ue([B],r.prototype,"setElementStateById",null),ue([B],r.prototype,"updateText",null),ue([B],r.prototype,"selectNodeById",null),ue([B],r.prototype,"selectEdgeById",null),ue([B],r.prototype,"selectElementById",null),ue([B],r.prototype,"clearSelectElements",null),ue([B],r.prototype,"moveNodes",null),ue([B],r.prototype,"setDefaultEdgeType",null),ue([B],r.prototype,"changeNodeType",null),ue([B],r.prototype,"changeEdgeType",null),ue([B],r.prototype,"getNodeIncomingEdge",null),ue([B],r.prototype,"getNodeOutgoingEdge",null),ue([B],r.prototype,"getAnchorIncomingEdge",null),ue([B],r.prototype,"getAnchorOutgoingEdge",null),ue([B],r.prototype,"getNodeIncomingNode",null),ue([B],r.prototype,"getNodeOutgoingNode",null),ue([B],r.prototype,"setTheme",null),ue([B],r.prototype,"resize",null),ue([B],r.prototype,"clearData",null),ue([B],r.prototype,"translateCenter",null),ue([B],r.prototype,"fitView",null),ue([B],r.prototype,"openEdgeAnimation",null),ue([B],r.prototype,"closeEdgeAnimation",null),ue([B],r.prototype,"setPartial",null),r}(),sr=function(){return sr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},sr.apply(this,arguments)},ai=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Vv=function(){function r(e){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=e}return r.prototype.getStyle=function(){return sr({},this.graphModel.theme.snapline)},r.prototype.getCenterSnapLine=function(e,t){for(var n=e.x,i=e.y,o=!1,a=!1,s=0;s<t.length;s++){var l=t[s];if(l.id!==e.id&&(n===l.x&&(o=!0),i===l.y&&(a=!0),o&&a))break}return{isShowVertical:o,isShowHorizontal:a,position:{x:n,y:i}}},r.prototype.getHorizontalSnapline=function(e,t){var n=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=It(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=It(l))}}for(var u=0;u<t.length;u++){var d=t[u];if(d.id!==e.id){var f=It(d);if(f.minY===(a==null?void 0:a.minY)||f.maxY===(a==null?void 0:a.minY)){n=!0,i=a.minY;break}if(f.minY===(a==null?void 0:a.maxY)||f.maxY===(a==null?void 0:a.maxY)){n=!0,i=a.maxY;break}}}return{isShowHorizontal:n,isShowVertical:this.isShowVertical,position:sr(sr({},this.position),{y:i})}},r.prototype.getVerticalSnapline=function(e,t){var n=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=It(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=It(l))}}for(var u=0;u<t.length;u++){var d=t[u];if(d.id!==e.id){var f=It(d);if(f.minX===(a==null?void 0:a.minX)||f.maxX===(a==null?void 0:a.minX)){n=!0,i=a.minX;break}if(f.minX===(a==null?void 0:a.maxX)||f.maxX===(a==null?void 0:a.maxX)){n=!0,i=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:n,position:sr(sr({},this.position),{x:i})}},r.prototype.getSnapLinePosition=function(e,t){var n=this.getCenterSnapLine(e,t),i=n.isShowHorizontal,o=n.isShowVertical;if(!i){var a=this.getHorizontalSnapline(e,t);a.isShowHorizontal&&(n.isShowHorizontal=a.isShowHorizontal,n.position.y=a.position.y)}if(!o){var s=this.getVerticalSnapline(e,t);s.isShowVertical&&(n.isShowVertical=s.isShowVertical,n.position.x=s.position.x)}return n},r.prototype.setSnaplineInfo=function(e){var t=e.isShowHorizontal,n=e.isShowVertical,i=e.position;this.position=i,this.isShowHorizontal=t,this.isShowVertical=n},r.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},r.prototype.setNodeSnapLine=function(e){var t=this.graphModel.nodes,n=this.getSnapLinePosition(e,t);this.setSnaplineInfo(n)},ai([F],r.prototype,"isShowHorizontal",void 0),ai([F],r.prototype,"isShowVertical",void 0),ai([F],r.prototype,"position",void 0),ai([B],r.prototype,"clearSnapline",null),ai([B],r.prototype,"setNodeSnapLine",null),r}(),tn=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Cr=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Kv={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},qv=function(){function r(e,t){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=e;var n=t.stopMoveGraph,i=n===void 0?!1:n;this.updateTranslateLimits(i)}return r.prototype.setZoomMiniSize=function(e){this.MINI_SCALE_SIZE=e},r.prototype.setZoomMaxSize=function(e){this.MAX_SCALE_SIZE=e},r.prototype.HtmlPointToCanvasPoint=function(e){var t=Cr(e,2),n=t[0],i=t[1];return[(n-this.TRANSLATE_X)/this.SCALE_X,(i-this.TRANSLATE_Y)/this.SCALE_Y]},r.prototype.CanvasPointToHtmlPoint=function(e){var t=Cr(e,2),n=t[0],i=t[1];return[n*this.SCALE_X+this.TRANSLATE_X,i*this.SCALE_Y+this.TRANSLATE_Y]},r.prototype.moveCanvasPointByHtml=function(e,t,n){var i=Cr(e,2),o=i[0],a=i[1];return[o+t/this.SCALE_X,a+n/this.SCALE_Y]},r.prototype.fixDeltaXY=function(e,t){return[e/this.SCALE_X,t/this.SCALE_Y]},r.prototype.getTransformStyle=function(){var e=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(e,")")}},r.prototype.zoom=function(e,t){e===void 0&&(e=!1);var n=this.SCALE_X,i=this.SCALE_Y;return typeof e=="number"?(n=e,i=e):e?(n+=this.ZOOM_SIZE,i+=this.ZOOM_SIZE):(n-=this.ZOOM_SIZE,i-=this.ZOOM_SIZE),n<this.MINI_SCALE_SIZE||n>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(t&&(this.TRANSLATE_X-=(n-this.SCALE_X)*t[0],this.TRANSLATE_Y-=(i-this.SCALE_Y)*t[1]),this.SCALE_X=n,this.SCALE_Y=i,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},r.prototype.emitGraphTransform=function(e){this.eventCenter.emit(fe.GRAPH_TRANSFORM,{type:e,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},r.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},r.prototype.translate=function(e,t){this.TRANSLATE_X+e<=this.translateLimitMaxX&&this.TRANSLATE_X+e>=this.translateLimitMinX&&(this.TRANSLATE_X+=e),this.TRANSLATE_Y+t<=this.translateLimitMaxY&&this.TRANSLATE_Y+t>=this.translateLimitMinY&&(this.TRANSLATE_Y+=t),this.emitGraphTransform("translate")},r.prototype.focusOn=function(e,t,n,i){var o=Cr(this.CanvasPointToHtmlPoint([e,t]),2),a=o[0],s=o[1],l=Cr([n/2-a,i/2-s],2),u=l[0],d=l[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=d,this.emitGraphTransform("focusOn")},r.prototype.updateTranslateLimits=function(e){var t;t=Cr(Array.isArray(e)&&e.length===4?e:Kv[e.toString()],4),this.translateLimitMinX=t[0],this.translateLimitMinY=t[1],this.translateLimitMaxX=t[2],this.translateLimitMaxY=t[3]},tn([F],r.prototype,"SCALE_X",void 0),tn([F],r.prototype,"SKEW_Y",void 0),tn([F],r.prototype,"SKEW_X",void 0),tn([F],r.prototype,"SCALE_Y",void 0),tn([F],r.prototype,"TRANSLATE_X",void 0),tn([F],r.prototype,"TRANSLATE_Y",void 0),tn([F],r.prototype,"ZOOM_SIZE",void 0),tn([B],r.prototype,"zoom",null),tn([B],r.prototype,"resetZoom",null),tn([B],r.prototype,"translate",null),tn([B],r.prototype,"focusOn",null),r}(),Zv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jv=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Qv=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ey=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},ty=function(r){Zv(e,r);function e(){var t=r.apply(this,ey([],Qv(arguments),!1))||this;return t.handleResize=function(){var n=t.props,i=n.graphModel,o=n.options,a=i.width,s=i.height,l=i.isContainerWidth,u=i.isContainerHeight,d=a,f=s,c=!1;l&&(d=void 0,c=!0),u&&(f=void 0,c=!0),c&&i.resize(d,f),o.width=a,o.height=s},t.throttleResize=Ic(t.handleResize,200),t}return e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(fe.GRAPH_UPDATED,{data:t})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(t,n,i){i===void 0&&(i="canvas-overlay");var o=this.props.getView,a=o(t.type);return a?I(a,{model:t,graphModel:n,overlay:i},t.id):null},e.prototype.render=function(){var t=this,n=this.props,i=n.graphModel,o=n.tool,a=n.options,s=n.dnd,l=n.snaplineModel,u={};a.width&&(u.width="".concat(i.width,"px")),a.height&&(u.height="".concat(i.height,"px"));var d=i.fakeNode,f=i.editConfigModel,c=i.background,h=f.adjustEdge;return I("div",{className:"lf-graph","flow-id":i.flowId,style:u,children:[I(Cv,{graphModel:i,dnd:s,children:[I("g",{className:"lf-base",children:Rn(i.sortElements,function(g){return t.getComponent(g,i)})}),d?this.getComponent(d,i):""]}),I(jv,{graphModel:i,children:[I(Hv,{graphModel:i}),h?I(Mv,{graphModel:i}):"",a.snapline!==!1?I(Xv,{snaplineModel:l}):""]}),I(Yv,{graphModel:i,tool:o}),c&&I(Pv,{background:c}),I(Zo,{graphModel:i})]})},e=Jv([Pt],e),e}(He),ny=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_n=function(){return _n=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_n.apply(this,arguments)},ry=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},iy=function(r){ny(e,r);function e(){var t=r.call(this)||this;return t.onDragStart=function(n){var i=n.event,o=t.props,a=o.anchorData,s=o.nodeModel,l=o.graphModel;l.selectNodeById(s.id),s.autoToFront&&l.toFront(s.id),l.eventCenter.emit(fe.ANCHOR_DRAGSTART,{data:a,e:i,nodeModel:s}),t.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},t.onDragging=function(n){var i=n.event,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=a.transformModel,d=a.eventCenter,f=a.width,c=a.height,h=a.editConfigModel,g=h.autoExpand,p=h.stopMoveGraph;if(i){var v=i.clientX,y=i.clientY,b=a.getPointByClient({x:v,y}),C=b.domOverlayPosition,R=C.x,j=C.y,D=b.canvasOverlayPosition,w=D.x,A=D.y;t.t&&Vo(t.t);var z=[],Z=10;R<10?z=[Z,0]:R+10>f?z=[-10,0]:j<10?z=[0,Z]:j+10>c&&(z=[0,-10]),t.setState({endX:w,endY:A,dragging:!0}),t.moveAnchorEnd(w,A),z.length>0&&!p&&g&&(t.t=Zf(function(){var oe=ry(z,2),se=oe[0],E=oe[1];u.translate(se,E);var M=t.state,P=M.endX,V=M.endY;t.setState({endX:P-se,endY:V-E}),t.moveAnchorEnd(P-se,V-E)})),d.emit(fe.ANCHOR_DRAG,{data:l,e:i,nodeModel:s})}},t.onDragEnd=function(n){var i=n.event;t.t&&Vo(t.t);var o=t.checkEnd(i);t.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),t.sourceRuleResults.clear(),t.targetRuleResults.clear();var a=t.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData;s.eventCenter.emit(fe.ANCHOR_DRAGEND,{data:u,e:i,nodeModel:l,edgeModel:o??void 0})},t.checkEnd=function(n){var i,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=l.x,d=l.y,f=l.id,c=t.state,h=c.endX,g=c.endY,p=c.dragging,v=Uo({x:h,y:g},a);if(t.preTargetNode&&t.preTargetNode.state!==We.DEFAULT&&t.preTargetNode.setElementState(We.DEFAULT),!!p&&v&&v.node){var y=v.node,b=v.anchor.id,C="".concat(s.id,"_").concat(y.id,"_").concat(b,"_").concat(f),R=t.sourceRuleResults.get(C)||{},j=R.isAllPass,D=R.msg,w=t.targetRuleResults.get(C)||{},A=w.isAllPass,z=w.msg;if(j&&A){y.setElementState(We.DEFAULT);var Z=a.getNodeModelById(v.node.id),oe=(i=a.edgeGenerator)===null||i===void 0?void 0:i.call(a,s.getData(),Z==null?void 0:Z.getData()),se=a.addEdge(_n(_n({},oe),{sourceNodeId:s.id,sourceAnchorId:f,startPoint:{x:u,y:d},targetNodeId:v.node.id,targetAnchorId:v.anchor.id,endPoint:{x:v.anchor.x,y:v.anchor.y}})),E=t.props.anchorData;return a.eventCenter.emit(fe.ANCHOR_DROP,{data:E,e:n,nodeModel:s,edgeModel:se}),se}var M=y.getData();return a.eventCenter.emit(fe.CONNECTION_NOT_ALLOWED,{data:M,msg:z||D||"不允许添加连线"}),null}},t.sourceRuleResults=new Map,t.targetRuleResults=new Map,t.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},t.dragHandler=new Jt({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.getAnchorShape=function(){var t=this.props,n=t.anchorData,i=t.style,o=t.node,a=o.getAnchorShape(n);if(a)return a;var s=n.x,l=n.y,u=_n(_n({},i),i==null?void 0:i.hover);return I("g",{children:[I(Yr,_n({className:"lf-node-anchor-hover"},u,{x:s,y:l})),I(Yr,_n({className:"lf-node-anchor"},i,{x:s,y:l}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var t=this.props.graphModel.customTrajectory;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var t=this.props,n=t.graphModel,i=n.getAnchorIncomingEdge,o=n.getAnchorOutgoingEdge,a=t.anchorData.id;return{incomingEdgeList:i(a),outgoingEdgeList:o(a)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(t,n){var i,o,a=this.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData,d=Uo({x:t,y:n},s);if(d){var f=d.node,c=d.anchor.id;if(this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(We.DEFAULT),u.id===c)return;this.preTargetNode=f;var h="".concat(l.id,"_").concat(f.id,"_").concat(c,"_").concat(u.id);if(!this.targetRuleResults.has(h)){var g=d.anchor,p=l.isAllowConnectedAsSource(f,u,g),v=f.isAllowConnectedAsTarget(l,u,g);this.sourceRuleResults.set(h,Go(p)),this.targetRuleResults.set(h,Go(v))}var y=((i=this.sourceRuleResults.get(h))!==null&&i!==void 0?i:{}).isAllPass,b=((o=this.targetRuleResults.get(h))!==null&&o!==void 0?o:{}).isAllPass;y&&b?f.setElementState(We.ALLOW_CONNECT):f.setElementState(We.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==We.DEFAULT&&this.preTargetNode.setElementState(We.DEFAULT)},e.prototype.isShowLine=function(){var t=this.state,n=t.startX,i=t.startY,o=t.endX,a=t.endY,s=dn(n,i,o,a);return s>10},e.prototype.render=function(){var t=this,n=this.state,i=n.startX,o=n.startY,a=n.endX,s=n.endY,l=this.props,u=l.anchorData.edgeAddable,d=l.edgeStyle;return I("g",{className:"lf-anchor",children:[I("g",{onMouseDown:function(f){u!==!1&&t.dragHandler.handleMouseDown(f)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(_n({sourcePoint:{x:i,y:o},targetPoint:{x:a,y:s}},d)):I($r,_n({x1:i,y1:o,x2:a,y2:s},d,{"pointer-events":"none"})))]})},e}(He),oy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xs=function(){return Xs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Xs.apply(this,arguments)},ay=function(r){oy(e,r);function e(t){var n=r.call(this,t)||this;return n.style={},n.onDragging=function(i){var o,a=i.event,s=n.props,l=s.graphModel,u=s.nodeModel,d=s.eventCenter,f=l.selectNodes,c=u.x,h=u.y,g=a.clientX,p=a.clientY,v=l.getPointByClient({x:g,y:p}).canvasOverlayPosition,y=v.x,b=v.y,C=new wt(y-c,b-h),R=((o=n.normal)===null||o===void 0?void 0:o.angle(C))-n.defaultAngle,j=new Pa(-c,-h).rotate(R).translate(c,h).toString();u.transform=j,u.rotate=R;var D=Rn(f,function(A){return A.id});D.indexOf(u.id)===-1&&(D=[u.id]);var w=Bc(D,function(A,z){var Z=l.getNodeModelById(z);return A[z]=Z==null?void 0:Z.getMoveDistance(0,0,!1),A},{});D.forEach(function(A){var z=l.getNodeEdges(A);z.forEach(function(Z){if(w[Z.sourceNodeId]){var oe=l.getNodeModelById(Z.sourceNodeId),se=oe.anchors.find(function(E){return E.id===Z.sourceAnchorId});Z.updateStartPoint(se)}if(w[Z.targetNodeId]){var oe=l.getNodeModelById(Z.targetNodeId),se=oe.anchors.find(function(P){return P.id===Z.targetAnchorId});Z.updateEndPoint(se)}})}),d.emit(fe.NODE_ROTATE,{e:a,model:u,data:u.getData()})},n.style=t.style,n.stepperDrag=new Jt({onDragging:n.onDragging}),n}return e.prototype.render=function(){var t=this,n=this.props.nodeModel,i=n.x,o=n.y,a=n.width,s=n.height,l=i+a/2+20,u=o-s/2-20;return this.normal=new wt(1,0),this.defaultAngle=this.normal.angle(new wt(l-i,u-o)),n.defaultAngle=this.defaultAngle,I("g",{className:"lf-rotate-control",children:I("g",{onMouseDown:function(d){t.stepperDrag.handleMouseDown(d)},children:I(Yr,Xs({},this.style,{cx:l,cy:u}))})})},e}(He),rc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,n(s)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(rc);var sy=rc.exports;const Ws=ba(sy);var ly=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$s=function(){return $s=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},$s.apply(this,arguments)},uy=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ic=function(r){ly(e,r);function e(t){var n=r.call(this)||this;n.mouseDownHandler=function(o){var a=n.props,s=a.draggable,l=a.model,u=a.graphModel,d=u.editConfigModel.nodeTextDraggable;(s??d)&&(o.stopPropagation(),n.stepperDrag.model=l,n.stepperDrag.handleMouseDown(o))},n.onDragging=function(o){var a=o.deltaX,s=o.deltaY,l=n.props,u=l.model,d=l.graphModel.transformModel;if(a||s){var f=uy(d.fixDeltaXY(a,s),2),c=f[0],h=f[1];u.moveText(c,h)}},n.dbClickHandler=function(){var o=n.props,a=o.editable,s=o.graphModel.eventCenter,l=o.model;a&&l.setElementState(We.TEXT_EDIT),s.emit(fe.TEXT_DBCLICK,{data:l.text,model:l})};var i=t.draggable;return n.stepperDrag=new Jt({onDragging:n.onDragging,step:1,eventType:"TEXT",isStopPropagation:i}),n}return e.prototype.getShape=function(){var t=this.props,n=t.model,i=t.graphModel,o=i.editConfigModel,a=n.text,s=a.value,l=a.x,u=a.y,d=a.editable,f=a.draggable,c={x:l,y:u,className:"",value:s},h=n.getTextStyle(),g=o.nodeTextDraggable||f;return I(Jf,$s({},c,h,{className:Ws({"lf-element-text":d,"lf-text-draggable":!d&&g,"lf-text-disabled":!d&&!g}),model:n}))},e.prototype.render=function(){var t=this.props.model.text;if(t)return I("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(He),dy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nn=function(){return nn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},nn.apply(this,arguments)},yo=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},fy=function(r){dy(e,r);function e(t){var n=r.call(this,t)||this;return n.setHoverOn=function(){n.setState({isHovered:!0})},n.setHoverOff=function(){n.setState({isHovered:!1})},n.state={isHovered:!1},n}return e.prototype.getBackground=function(){var t=this.state.isHovered,n=this.props.model,i=n.text,o=n.getTextStyle(),a=o.background||{};if(t&&o.hover&&o.hover.background&&(a=nn(nn({},a),o.hover.background)),i!=null&&i.value&&(a==null?void 0:a.fill)!=="transparent"){var s=o.fontSize,l=o.textWidth,u=o.lineHeight,d=o.overflowMode,f=a.wrapPadding,c=i==null?void 0:i.value.split(/[\r\n]/g),h=c.length,g=i.x,p=i.y,v={};if(d==="autoWrap"&&l){var y=qf({rows:c,style:{fontSize:"".concat(s,"px"),width:"".concat(l,"px"),lineHeight:u,padding:f},rowsLength:h,className:"lf-get-text-height"});v=nn(nn({},a),{x:g,y:p,width:l,height:y})}else{var b=sg({rows:c,rowsLength:h,fontSize:s}),C=b.width,R=b.height;if(d==="ellipsis"&&(C=l,R=s+2),typeof a.wrapPadding=="string"){var j=a.wrapPadding.split(",").filter(function(Ue){return Ue.trim()}).map(function(Ue){return parseFloat(Ue.trim())});if(j.length>0&&j.length<=4){if(j.length===1){var D=yo(j,1),w=D[0];j=[w,w,w,w]}else if(j.length===2){var A=yo(j,2),z=A[0],Z=A[1];j=[z,Z,z,Z]}else if(j.length===3){var oe=yo(j,3),se=oe[0],Z=oe[1],E=oe[2];j=[se,Z,E,Z]}var M=yo(j,4),P=M[0],V=M[1],ce=M[2],be=M[3];C+=V+be,R+=P+ce,g=g+(V-be)/2,p=p+(ce-P)/2}}v=nn(nn({},a),{x:g-1,y:p-1,width:C,height:R})}return I(Vt,nn({},v))}return null},e.prototype.getShape=function(){var t=this.props.model,n=t.text,i=n.x,o=n.y,a=n.value;if(!a)return null;var s=t.getTextStyle(),l=nn({x:i,y:o,value:a,model:t,className:"lf-element-text"},s);return I("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),I(Jf,nn({},l))]})},e}(ic),cy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jo=function(){return Jo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Jo.apply(this,arguments)},hy=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},mo=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Zn=function(r){cy(e,r);function e(t){var n=r.call(this)||this;n.onDragStart=function(l){var u=l.event,d=n.props,f=d.model,c=d.graphModel;if(u){var h=c.getPointByClient({x:u.clientX,y:u.clientY}).canvasOverlayPosition,g=h.x,p=h.y;n.moveOffset={dx:f.x-g,dy:f.y-p}}},n.onDragging=function(l){var u,d,f,c,h=l.event,g=n.props,p=g.model,v=g.graphModel,y=v.editConfigModel,b=y.stopMoveGraph,C=y.autoExpand,R=y.snapGrid,j=v.transformModel,D=v.selectNodes,w=v.width,A=v.height,z=v.gridSize;p.isDragging=!0;var Z=h,oe=Z.clientX,se=Z.clientY,E=v.getPointByClient({x:oe,y:se}).canvasOverlayPosition,M=E.x,P=E.y,V=mo(j.CanvasPointToHtmlPoint([M,P]),2),ce=V[0],be=V[1];if(M=M+((d=(u=n.moveOffset)===null||u===void 0?void 0:u.dx)!==null&&d!==void 0?d:0),P=P+((c=(f=n.moveOffset)===null||f===void 0?void 0:f.dy)!==null&&c!==void 0?c:0),M=Wr(M,z,R),P=Wr(P,z,R),!w||!A){v.moveNode2Coordinate(p.id,M,P);return}var Ue=ce<0||be<0||ce>w||be>A;if(!(C&&!b&&Ue)){var Ge=mo(j.CanvasPointToHtmlPoint([M-p.width/2,P-p.height/2]),2),ge=Ge[0],Ne=Ge[1],ke=mo(j.CanvasPointToHtmlPoint([M+p.width/2,P+p.height/2]),2),Ce=ke[0],je=ke[1],T=Math.max(z,20),X=[];ge<0?X=[T,0]:Ce>v.width?X=[-T,0]:Ne<0?X=[0,T]:je>v.height&&(X=[0,-T]),n.t&&Vo(n.t),p.transform=new Pa(-M,-P).rotate(p.rotate).translate(M,P).toString();var $=D.map(function(Q){return Q.id});$.indexOf(p.id)===-1&&($=[p.id]),X.length>0&&!b&&C?n.t=Zf(function(){var Q=mo(X,2),ne=Q[0],pe=Q[1];j.translate(ne??0,pe??0);var Ee=-(ne??0)/j.SCALE_X,et=-(pe??0)/j.SCALE_X;v.moveNodes($,Ee,et)}):v.moveNodes($,M-p.x,P-p.y)}},n.onDragEnd=function(){n.t&&Vo(n.t);var l=n.props.model;l.isDragging=!1},n.onMouseOut=function(l){Ip()&&n.setHoverOff(l)},n.handleMouseUp=function(){var l=n.props.model;n.mouseUpDrag=l.isDragging},n.handleClick=function(l){var u=n.mouseUpDrag===!1;if(n.startTime){var d=n.props,f=d.model,c=d.graphModel;if(u){var h=f.getData(),g=c.getPointByClient({x:l.clientX,y:l.clientY}),p={data:h,e:l,position:g,isSelected:!1,isMultiple:!1},v=l.button===2,y=l.detail===2;if(!v){var b=c.editConfigModel,C=Vf(l,b);p.isMultiple=C,f.isSelected&&!y&&C?(p.isSelected=!1,f.setSelected(!1)):(c.selectNodeById(f.id,C),p.isSelected=!0,b.isSilentMode||n.toFront()),y?(b.nodeTextEdit&&f.text.editable&&b.textMode===qt.TEXT&&(f.setSelected(!1),c.setElementStateById(f.id,We.TEXT_EDIT)),c.eventCenter.emit(fe.NODE_DBCLICK,p)):(c.eventCenter.emit(fe.ELEMENT_CLICK,p),c.eventCenter.emit(fe.NODE_CLICK,p))}}}},n.handleContextMenu=function(l){l.preventDefault();var u=n.props,d=u.model,f=u.graphModel,c=f.editConfigModel,h=d.getData(),g=f.getPointByClient({x:l.clientX,y:l.clientY});f.setElementStateById(d.id,We.SHOW_MENU,g.domOverlayPosition),d.isSelected||f.selectNodeById(d.id),f.eventCenter.emit(fe.NODE_CONTEXTMENU,{data:h,e:l,position:g}),c.isSilentMode||n.toFront()},n.handleMouseDown=function(l){var u=n.props,d=u.model,f=u.graphModel;n.startTime=new Date().getTime();var c=f.editConfigModel;c.adjustNodePosition&&d.draggable&&n.stepDrag&&n.stepDrag.handleMouseDown(l)},n.handleFocus=function(){var l=n.props,u=l.model,d=l.graphModel;d.eventCenter.emit(fe.NODE_FOCUS,{data:u.getData()})},n.handleBlur=function(){var l=n.props,u=l.model,d=l.graphModel;d.eventCenter.emit(fe.NODE_BLUR,{data:u.getData()})},n.setHoverOn=function(l){var u=n.props,d=u.model,f=u.graphModel;if(!d.isHovered){var c=d.getData();d.setHovered(!0),f.eventCenter.emit(fe.NODE_MOUSEENTER,{data:c,e:l})}},n.setHoverOff=function(l){var u=n.props,d=u.model,f=u.graphModel,c=d.getData();d.isHovered&&(d.setHovered(!1),f.eventCenter.emit(fe.NODE_MOUSELEAVE,{data:c,e:l}))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter,s=t.model;return n.stepDrag=new Jt({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),n.modelDisposer=Ef(function(){return n.props},function(l){l&&l.model&&n.stepDrag.setModel(l.model)}),n}return e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(t){return null},e.prototype.getAnchors=function(){var t=this,n=this.props,i=n.model,o=n.graphModel,a=i.isSelected,s=i.isHitable,l=i.isDragging,u=i.isShowAnchor;return s&&(a||u)&&!l?Rn(i.anchors,function(d,f){var c=i.getAnchorLineStyle(d),h=i.getAnchorStyle(d);return I(iy,{anchorData:d,node:t,style:h,edgeStyle:c,anchorIndex:f,nodeModel:i,graphModel:o,setHoverOff:t.setHoverOff})}):[]},e.prototype.getRotateControl=function(){var t=this.props,n=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowRotate,l=n.isSelected,u=n.isHitable,d=n.rotatable,f=n.isHovered,c=s&&d,h=n.getRotateControlStyle();if(!a&&u&&(l||f)&&c)return I(ay,{graphModel:i,nodeModel:n,eventCenter:i.eventCenter,style:h})},e.prototype.getResizeControl=function(){var t=this.props,n=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowResize,l=n.isSelected,u=n.isHitable,d=n.resizable,f=n.isHovered,c=s&&d,h=n.getResizeControlStyle();return!a&&u&&(l||f)&&c?I(kg,{style:h,model:n,graphModel:i}):null},e.prototype.getText=function(){var t,n=this.props,i=n.model,o=n.graphModel,a=o.editConfigModel;if(a.nodeTextMode!==qt.TEXT||i.state===We.TEXT_EDIT)return null;if(i.text){var s=!1;return a.nodeTextDraggable&&i.text.draggable&&(s=!0),I(ic,{editable:a.nodeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getStateClassName=function(){var t=this.props.model,n=t.state,i=t.isDragging,o=t.isSelected,a="lf-node";switch(n){case We.ALLOW_CONNECT:a+=" lf-node-allow";break;case We.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return i&&(a+=" lf-dragging"),o&&(a+=" lf-node-selected"),a},e.prototype.toFront=function(){var t=this.props,n=t.model,i=t.graphModel;n.autoToFront&&i.toFront(n.id)},e.prototype.render=function(){var t=this.props,n=t.model,i=t.graphModel,o=i.editConfigModel,a=o.hideAnchors,s=o.adjustNodePosition,l=o.allowRotate,u=o.allowResize,d=i.gridSize,f=i.transformModel.SCALE_X,c=n.isHitable,h=n.draggable,g=n.transform,p=n.getOuterGAttributes(),v=p.className,y=v===void 0?"":v,b=hy(p,["className"]),C=I("g",{className:"lf-node-content",children:[I("g",{transform:g,children:[this.getShape(),this.getText(),l&&this.getRotateControl(),u&&this.getResizeControl()]}),!a&&this.getAnchors()]}),R;return c?(s&&h&&this.stepDrag.setStep(d*f),R=I("g",Jo({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},b,{children:C}))):R=I("g",Jo({className:"".concat(this.getStateClassName()," ").concat(y)},b,{children:C})),R},e.isObserved=!1,e}(He),py=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ys=function(){return Ys=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ys.apply(this,arguments)},vr=function(r){py(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t.getNodeStyle();return I(Vt,Ys({},n,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))},e}(Zn),gy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Us=function(){return Us=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Us.apply(this,arguments)},Qo=function(r){gy(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.r,a=t.getNodeStyle();return I(Yr,Us({},a,{x:n,y:i,r:o}))},e}(Zn),vy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ea=function(){return ea=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ea.apply(this,arguments)},ta=function(r){vy(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t,i=n.x,o=n.y,a=n.width,s=n.height,l=n.points,u=t.getNodeStyle(),d={transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")};return I("g",ea({},d,{children:I(Ol,ea({},u,{points:l,x:i,y:o}))}))},e}(Zn),yy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gs=function(){return Gs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Gs.apply(this,arguments)},Vs=function(r){yy(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t.getNodeStyle();return I("g",{children:I(Ol,Gs({},n,{points:t.points,x:t.x,y:t.y}))})},e}(Zn),my=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ks=function(){return Ks=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ks.apply(this,arguments)},qs=function(r){my(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t.getNodeStyle();return I(Mg,Ks({},n,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))},e}(Zn),_y=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mi=function(){return Mi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Mi.apply(this,arguments)},Ju=function(r){_y(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getBackground=function(){var t=this.props.model,n=t.getTextStyle(),i=t.width,o=t.height,a=t.x,s=t.y,l=Mi(Mi({},n.background),{x:a,y:s,width:i,height:o});return I(Vt,Mi({},l))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return I("g",{children:this.getBackground()})},e}(Zn),by=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zs=function(){return Zs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Zs.apply(this,arguments)},xy=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ey=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Js=function(r){by(e,r);function e(){var t=r.apply(this,Ey([],xy(arguments),!1))||this;return t.ref=wa(),t}return Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(t){t.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(t){this.setHtml(t)},e.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){r.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.height,a=t.width,s=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),I("foreignObject",Zs({},s,{x:n-a/2,y:i-o/2,width:a,height:o,ref:this.ref}))},e}(Zn),wy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rn=function(){return rn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},rn.apply(this,arguments)},Sy=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},Cy=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},xn;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(xn||(xn={}));var Qu=function(r){wy(e,r);function e(t){var n=r.call(this)||this;n.handleMouseDown=function(l){n.stepDrag&&n.stepDrag.handleMouseDown(l)},n.onDragStart=function(){var l=n.props,u=l.x,d=l.y,f=l.edgeModel,c=f.startPoint,h=f.endPoint,g=f.pointsList;n.oldEdge={startPoint:c,endPoint:h,pointsList:g},n.setState({endX:u,endY:d,dragging:!0})},n.onDragging=function(l){var u=l.deltaX,d=l.deltaY,f=n.state,c=f.endX,h=f.endY,g=n.props,p=g.graphModel,v=g.type,y=p.transformModel,b=p.editConfigModel,C=Cy(y.moveCanvasPointByHtml([c,h],u,d),2),R=C[0],j=C[1];n.setState({endX:R,endY:j,dragging:!0});var D=n.props.edgeModel,w=Uo({x:c,y:h},p);if(w&&w.node&&n.isAllowAdjust(w).pass){var A=D.startPoint,z=D.endPoint,Z=D.sourceNode,oe=D.targetNode,se=v===xn.SOURCE?{startPoint:{x:w.anchor.x,y:w.anchor.y},endPoint:{x:z.x,y:z.y},sourceNode:w.node,targetNode:oe}:{startPoint:{x:A.x,y:A.y},endPoint:{x:w.anchor.x,y:w.anchor.y},sourceNode:Z,targetNode:w.node};D.updateAfterAdjustStartAndEnd(se)}else v===xn.SOURCE?D.updateStartPoint({x:R,y:j}):D.updateEndPoint({x:R,y:j});D.text.value&&b.adjustEdge&&D.setText(Object.assign({},D.text,D.textPosition))},n.onDragEnd=function(l){var u,d,f,c=l.event;try{n.setState({dragging:!1});var h=n.props,g=h.graphModel,p=h.edgeModel,v=h.type,y=n.state,b=y.endX,C=y.endY,R=y.dragging,j=Uo({x:b,y:C},g);if(!R)return;var D=!1,w=void 0;if(j&&j.node){var A=n.isAllowAdjust(j),z=A.pass,Z=A.msg,oe=A.newTargetNode;if(z){var se=p.getData(),E=se.text,M=se.sourceAnchorId,P=M===void 0?"":M,V=se.targetAnchorId,ce=V===void 0?"":V,be=Sy(se,["text","sourceAnchorId","targetAnchorId"]);if(w=rn(rn({sourceAnchorId:P,targetAnchorId:ce},be),{text:(E==null?void 0:E.value)||""}),v===xn.SOURCE){var Ue=g.getNodeModelById(j.node.id),Ge=g.getNodeModelById(p.targetNodeId),ge=(u=g.edgeGenerator)===null||u===void 0?void 0:u.call(g,Ue==null?void 0:Ue.getData(),Ge==null?void 0:Ge.getData(),w);w=rn(rn({},ge),{sourceNodeId:j.node.id,sourceAnchorId:j.anchor.id,startPoint:{x:j.anchor.x,y:j.anchor.y},targetNodeId:p.targetNodeId,endPoint:rn({},p.endPoint)}),p.sourceNodeId===j.node.id&&p.sourceAnchorId===j.anchor.id&&(D=!0)}else if(v===xn.TARGET){var Ue=g.getNodeModelById(p.sourceNodeId),Ge=g.getNodeModelById(j.node.id),ge=(d=g.edgeGenerator)===null||d===void 0?void 0:d.call(g,Ue==null?void 0:Ue.getData(),Ge==null?void 0:Ge.getData(),w);w=rn(rn({},ge),{sourceNodeId:p.sourceNodeId,startPoint:rn({},p.startPoint),targetNodeId:j.node.id,targetAnchorId:j.anchor.id,endPoint:{x:j.anchor.x,y:j.anchor.y}}),p.targetNodeId===j.node.id&&p.targetAnchorId===j.anchor.id&&(D=!0)}}else{D=!0;var Ne=oe.getData();g.eventCenter.emit(fe.CONNECTION_NOT_ALLOWED,{data:Ne,msg:Z})}}else D=!0;if(D)n.recoveryEdge();else{var ke=p.getData();g.deleteEdgeById(p.id);var Ce=g.addEdge(rn({},w));g.eventCenter.emit(fe.EDGE_EXCHANGE_NODE,{data:{newEdge:Ce.getData(),oldEdge:ke}})}(f=n.preTargetNode)===null||f===void 0||f.setElementState(We.DEFAULT)}finally{var g=n.props.graphModel;g.eventCenter.emit(fe.ADJUST_POINT_DRAGEND,{e:c,data:n.stepDragData})}},n.recoveryEdge=function(){var l=n.props.edgeModel,u=n.oldEdge,d=u.startPoint,f=u.endPoint,c=u.pointsList;l.updateStartPoint(d),l.updateEndPoint(f),l.modelType!==De.LINE_EDGE&&(l.pointsList=c??[],l.initPoints())},n.getAdjustPointStyle=function(){var l=n.props.graphModel.theme,u=l.edgeAdjust;return u},n.state={dragging:!1,endX:0,endY:0},n.targetRuleResults=new Map,n.sourceRuleResults=new Map;var i=t.type,o=t.edgeModel,a=t.graphModel,s=a.eventCenter;return n.stepDragData={type:i,edgeData:o.getData()},n.stepDrag=new Jt({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:n.stepDragData}),n}return e.prototype.isAllowAdjust=function(t){var n=this.props,i=n.edgeModel,o=i.id,a=i.sourceNode,s=i.targetNode,l=i.sourceAnchorId,u=i.targetAnchorId,d=n.type,f,c,h,g;if(d===xn.SOURCE?(f=t.node,c=s,h=t.anchor,g=s.getAnchorInfo(u)):(f=a,c=t.node,g=t.anchor,h=a.getAnchorInfo(l)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(We.DEFAULT),this.preTargetNode=t.node,g.id===h.id)return{pass:!1,msg:"",newTargetNode:c};var p="".concat(f.id,"_").concat(c.id,"_").concat(h.id,"_").concat(g.id);if(!this.targetRuleResults.has(p)){var v=f.isAllowConnectedAsSource(c,h,g,o),y=c.isAllowConnectedAsTarget(f,h,g,o);this.sourceRuleResults.set(p,Go(v)),this.targetRuleResults.set(p,Go(y))}var b=this.sourceRuleResults.get(p),C=b.isAllPass,R=b.msg,j=this.targetRuleResults.get(p),D=j.isAllPass,w=j.msg,A=C&&D?We.ALLOW_CONNECT:We.NOT_ALLOW_CONNECT;return d===xn.SOURCE?f.setElementState(A):c.setElementState(A),{pass:C&&D,msg:w||R,newTargetNode:c}},e.prototype.render=function(){var t=this.props,n=t.x,i=t.y,o=t.getAdjustPointShape,a=t.edgeModel,s=this.state.dragging;return I("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":o(n,i,a)})},e}(He),Oy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qs=function(){return Qs=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Qs.apply(this,arguments)};(function(r){Oy(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getArrowAttributes=function(){var t=this.props,n=t.arrowInfo,i=t.style,o=n.start,a=n.end,s={start:o,end:a,offset:i.offset,verticalLength:i.verticalLength,type:"end"},l=Fi(s),u=l.leftX,d=l.leftY,f=l.rightX,c=l.rightY;return Qs({d:"M".concat(u," ").concat(d," L").concat(a.x," ").concat(a.y," L").concat(f," ").concat(c," z")},i)},e.prototype.getShape=function(){var t=this.getArrowAttributes(),n=t.d,i=t.strokeWidth,o=t.stroke,a=t.fill;return I(Wi,{d:n,fill:a,strokeWidth:i,stroke:o})},e.prototype.render=function(){return I("g",{className:"lf-arrow",children:this.getShape()})},e})(He);var Ay=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ti=function(){return Ti=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ti.apply(this,arguments)},My=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ra=function(r){Ay(e,r);function e(){var t=r.call(this)||this;return t.textRef=wa(),t.handleHover=function(n,i){var o=t.props,a=o.model,s=o.graphModel.eventCenter;a.setHovered(n);var l=n?fe.EDGE_MOUSEENTER:fe.EDGE_MOUSELEAVE,u=a.getData();s.emit(l,{data:u,e:i})},t.setHoverOn=function(n){var i=t.props.model.isHovered;i||(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOn(),t.handleHover(!0,n))},t.setHoverOff=function(n){var i=t.props.model.isHovered;i&&(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOff(),t.handleHover(!1,n))},t.handleContextMenu=function(n){n.preventDefault(),t.contextMenuTime=new Date().getTime(),t.clickTimer&&clearTimeout(t.clickTimer);var i=t.props,o=i.model,a=i.graphModel,s=a.editConfigModel,l=a.getPointByClient({x:n.clientX,y:n.clientY});a.setElementStateById(o.id,We.SHOW_MENU,l.domOverlayPosition),s.isSilentMode||t.toFront(),o.isSelected||a.selectEdgeById(o.id);var u=o==null?void 0:o.getData();a.eventCenter.emit(fe.EDGE_CONTEXTMENU,{data:u,e:n,position:l})},t.handleMouseDown=function(n){n.stopPropagation(),t.startTime=new Date().getTime()},t.handleMouseUp=function(){var n=t.props.model;t.mouseUpDrag=n.isDragging},t.handleClick=function(n){if(t.startTime&&!t.mouseUpDrag){var i=n.button===2;if(!i){var o=n.detail===2,a=t.props,s=a.model,l=a.graphModel,u=s==null?void 0:s.getData(),d=l.getPointByClient({x:n.clientX,y:n.clientY});if(o){var f=l.editConfigModel,c=l.textEditElement,h=s.id,g=s.text,p=s.modelType;if(c&&c.id===h&&l.setElementStateById(h,We.DEFAULT),f.edgeTextEdit&&g.editable&&(s.setSelected(!1),l.setElementStateById(h,We.TEXT_EDIT)),p===De.POLYLINE_EDGE){var v=s,y=l.getPointByClient({x:n.x,y:n.y}).canvasOverlayPosition,b=y.x,C=y.y;v.dbClickPosition=Gf({x:b,y:C},v.points)}l.eventCenter.emit(fe.EDGE_DBCLICK,{data:u,e:n,position:d})}else l.eventCenter.emit(fe.ELEMENT_CLICK,{data:u,e:n,position:d}),l.eventCenter.emit(fe.EDGE_CLICK,{data:u,e:n,position:d});var R=l.editConfigModel;l.selectEdgeById(s.id,Vf(n,R)),R.isSilentMode||t.toFront()}}},t.handleFocus=function(){var n=t.props,i=n.model,o=n.graphModel;o.eventCenter.emit(fe.EDGE_FOCUS,{data:i.getData()})},t.handleBlur=function(){var n=t.props,i=n.model,o=n.graphModel;o.eventCenter.emit(fe.EDGE_BLUR,{data:i.getData()})},t}return e.prototype.getShape=function(){return I("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var t,n=this.props,i=n.model,o=n.graphModel,a=o.editConfigModel;if(a.edgeTextMode!==qt.TEXT||i.state===We.TEXT_EDIT)return null;if(i.text){var s=!1;return a.edgeTextDraggable&&i.text.draggable&&(s=!0),I(fy,{ref:this.textRef,editable:a.edgeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getArrowInfo=function(){var t=this.props.model,n=t.startPoint,i=t.endPoint,o=t.isSelected,a=this.state.hover;return{start:n,end:i,hover:a,isSelected:o}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,n=t.startPoint,i=t.endPoint;return[n,i]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var t=this.props.model,n=t.id,i=t.getArrowStyle(),o=i.refY,a=o===void 0?0:o,s=i.refX,l=s===void 0?2:s,u=My(this.getLastTwoPoints(),2),d=u[0],f=u[1],c="auto";return d!==null&&f!==null&&(c=Zg(qg({x:f.x-d.x,y:f.y-d.y}))),I("g",{children:I("defs",{children:[I("marker",{id:"marker-start-".concat(n),refX:-l,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),I("marker",{id:"marker-end-".concat(n),refX:l,refY:a,overflow:"visible",orient:c,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return I("path",{})},e.prototype.getEndArrow=function(){var t=this.props.model,n=t.getArrowStyle(),i=n.stroke,o=n.strokeWidth,a=n.offset,s=n.verticalLength;return I("path",{stroke:i,fill:i,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},e.prototype.getAdjustPointShape=function(t,n,i){var o=i.getAdjustPointStyle();return I(Yr,Ti({className:"lf-edge-adjust-point"},o,{x:t,y:n}))},e.prototype.getAdjustPoints=function(){var t=this.props,n=t.model,i=t.graphModel,o=i.editConfigModel,a=o.adjustEdgeStartAndEnd,s=o.adjustEdgeStart,l=o.adjustEdgeEnd,u=n.getAdjustStart(),d=n.getAdjustEnd();return I("g",{children:[a&&s&&I(Qu,Ti({type:xn.SOURCE},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:n,graphModel:i})),a&&l&&I(Qu,Ti({type:xn.TARGET},d,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:n,graphModel:i}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return I("g",{})},e.prototype.getAppend=function(){return I("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var t=this.props,n=t.graphModel,i=t.model;n.toFront(i.id)},e.prototype.render=function(){var t=this.props.model,n=t.isSelected,i=t.isHitable,o=t.isShowAdjustPoint;return I("g",{children:[I("g",{className:["lf-edge",!i&&"pointer-none",n&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&n?this.getAdjustPoints():""]})},e.isObserved=!1,e}(He),Ty=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),el=function(){return el=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},el.apply(this,arguments)},Ny=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ed=function(r){Ty(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,n=t.getEdgeStyle(),i=t,o=i.path,a=i.isAnimation,s=i.arrowConfig,l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,d=l.stroke,f=l.strokeDashoffset,c=l.animationName,h=l.animationDuration,g=l.animationIterationCount,p=l.animationTimingFunction,v=l.animationDirection;return I(Wi,el({d:o},n,s,a?{strokeDasharray:u,stroke:d,style:{strokeDashoffset:f,animationName:c,animationDuration:h,animationIterationCount:g,animationTimingFunction:p,animationDirection:v}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model.path;return I(Wi,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var t=this.props.model,n=this.state.hover,i=t.isSelected,o=t.getArrowStyle().offset,a=t.pointsList.map(function(f){return{x:f.x,y:f.y}}),s=Ny(Lu(a,o),2),l=s[0],u=s[1],d={start:l,end:u,hover:n,isSelected:i};return d},e.prototype.getLastTwoPoints=function(){var t=this.props.model,n=t.getArrowStyle().offset,i=t.pointsList.map(function(o){return{x:o.x,y:o.y}});return Lu(i,n)},e}(Ra),Py=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tl=function(){return tl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tl.apply(this,arguments)},td=function(r){Py(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,n=t.startPoint,i=t.endPoint,o=t.isAnimation,a=t.arrowConfig,s=t.getEdgeStyle(),l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,d=l.stroke,f=l.strokeDashoffset,c=l.animationName,h=l.animationDuration,g=l.animationIterationCount,p=l.animationTimingFunction,v=l.animationDirection;return I($r,tl({},s,{x1:n.x,y1:n.y,x2:i.x,y2:i.y},a,o?{strokeDasharray:u,stroke:d,style:{strokeDashoffset:f,animationName:c,animationDuration:h,animationIterationCount:g,animationTimingFunction:p,animationDirection:v}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model,n=t.startPoint,i=t.endPoint,o={start:n,end:i},a=ig(o),s=a.d,l=a.strokeWidth,u=a.fill,d=a.strokeDasharray,f=a.stroke;return I(Wi,{d:s,fill:u,strokeWidth:l,stroke:f,strokeDasharray:d})},e}(Ra),Dy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lr=function(){return lr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},lr.apply(this,arguments)},Ry=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Gi=function(r){Dy(e,r);function e(){var t=r.call(this)||this;return t.onDragStart=function(){var n=t.props.model;n.dragAppendStart(),t.isShowAdjustPointTemp=n.isShowAdjustPoint,n.isShowAdjustPoint=!1},t.onDragging=function(n){var i=n.deltaX,o=n.deltaY,a=t.props,s=a.model,l=a.graphModel;t.isDragging=!0;var u=l.transformModel,d=l.editConfigModel,f=Ry(u.fixDeltaXY(i,o),2),c=f[0],h=f[1],g=s,p=d.adjustEdgeMiddle;p?t.appendInfo=g.dragAppendSimple(t.appendInfo,{x:c,y:h}):t.appendInfo=g.dragAppend(t.appendInfo,{x:c,y:h})},t.onDragEnd=function(){var n,i=t.props,o=i.model,a=i.graphModel.eventCenter,s=o;s.dragAppendEnd(),t.isDragging=!1,s.isShowAdjustPoint=(n=t.isShowAdjustPointTemp)!==null&&n!==void 0?n:!1,t.appendInfo=void 0,a.emit(fe.EDGE_ADJUST,{data:s.getData()})},t.beforeDragStart=function(n,i){i.draggable&&t.drag.handleMouseDown(n),t.appendInfo=i},t.drag=new Jt({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd,isStopPropagation:!1}),t}return e.prototype.getEdge=function(){var t=this.props.model,n=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.getEdgeStyle(),s=t.getEdgeAnimationStyle(),l=s.strokeDasharray,u=s.stroke,d=s.strokeDashoffset,f=s.animationName,c=s.animationDuration,h=s.animationIterationCount,g=s.animationTimingFunction,p=s.animationDirection;return I(Pg,lr({points:n},a,o,i?{strokeDasharray:l,stroke:u,style:{strokeDashoffset:d,animationName:f,animationDuration:c,animationIterationCount:h,animationTimingFunction:g,animationDirection:p}}:{}))},e.prototype.getArrowInfo=function(){var t=this.props.model,n=t.points,i=t.isSelected,o=this.state.hover,a=gr(n),s=a[0],l=a[0];return a.length>=2&&(s=a[a.length-2],l=a[a.length-1]),{start:s,end:l,hover:o,isSelected:i}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,n=t.points,i=gr(n),o=i[0],a=i[0];return i.length>=2&&(o=i[i.length-2],a=i[i.length-1]),[o,a]},e.prototype.getAppendAttributes=function(t){var n=t.start,i=t.end,o;if(n.x===i.x&&n.y===i.y)o="";else{var a={start:n,end:i,offset:10,verticalLength:5},s=Fi(lr(lr({},a),{type:"start"})),l=Fi(lr(lr({},a),{type:"end"}));o="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(l.rightX," ").concat(l.rightY,`
      L`).concat(l.leftX," ").concat(l.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(t){var n=this.getAppendAttributes(t),i=n.d,o=n.strokeWidth,a=n.fill,s=n.strokeDasharray,l=n.stroke;return I(Wi,{d:i,fill:a,strokeWidth:o,stroke:l,strokeDasharray:s})},e.prototype.getAppendWidth=function(){for(var t=this,n=this.props,i=n.model,o=n.graphModel,a=i.pointsList,s=i.draggable,l=[],u=a.length,d=function(h){var g="lf-polyline-append",p={start:{x:a[h].x,y:a[h].y},end:{x:a[h+1].x,y:a[h+1].y},startIndex:h,endIndex:h+1,direction:at.HORIZONTAL,draggable:!0},v=I("g",{className:g,children:f.getAppendShape(p)}),y=o.editConfigModel,b=y.adjustEdge,C=y.adjustEdgeMiddle;if(b&&s){var R=p.startIndex,j=p.endIndex,D=C&&(R===0||j===u-1);p.draggable=!D,p.start.x===p.end.x?(p.draggable&&(g+="-ew-resize"),p.direction=at.VERTICAL):p.start.y===p.end.y&&(p.draggable&&(g+="-ns-resize"),p.direction=at.HORIZONTAL),v=I("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(w){return t.beforeDragStart(w,p)},children:I("g",{className:g,children:f.getAppendShape(p)})})}l.push(v)},f=this,c=0;c<u-1;c++)d(c);return I("g",{children:l})},e}(Ra),Dr=function(){return Dr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Dr.apply(this,arguments)},Ly=function(){function r(e){var t=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)},this.dragEnter=function(i){!t.nodeConfig||t.fakeNode||(t.fakeNode=t.lf.createFakeNode(Dr(Dr({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY}))))},this.onDragOver=function(i){if(i.preventDefault(),t.fakeNode){var o=t.clientToLocalPoint({x:i.clientX,y:i.clientY}),a=o.x,s=o.y;t.fakeNode.moveTo(a,s);var l=t.fakeNode.getData();t.lf.setNodeSnapLine(l),t.lf.graphModel.eventCenter.emit(fe.NODE_DND_DRAG,{data:l,e:i})}return!1},this.onDragLeave=function(){t.fakeNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)},this.onDrop=function(i){!t.lf.graphModel||!i||!t.nodeConfig||(t.lf.addNode(Dr(Dr({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY})),fe.NODE_DND_ADD,i),i.preventDefault(),i.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)};var n=e.lf;this.lf=n}return r.prototype.clientToLocalPoint=function(e){var t=e.x,n=e.y,i=ll(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:t,y:n}),a=o.canvasOverlayPosition,s=a.x,l=a.y,u=this.lf.graphModel.editConfigModel.snapGrid;return{x:Wr(s,i,u),y:Wr(l,i,u)}},r.prototype.startDrag=function(e){var t=this.lf.graphModel.editConfigModel;t!=null&&t.isSilentMode||(this.nodeConfig=e,window.document.addEventListener("mouseup",this.stopDrag))},r.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},r}();function ky(r,e){r.on("node:mousemove",function(t){var n=t.data;e.setNodeSnapLine(n)}),r.on("node:mouseup",function(){e.clearSnapline()})}var jy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pn=function(){return Pn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Pn.apply(this,arguments)},Iy=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},By=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Hy=function(r){jy(e,r);function e(t){var n=r.call(this,t)||this;return n.ref=wa(),n.__prevText={type:"",text:"",id:""},n.keyupHandler=function(i){var o=n.props.graphModel.textEditElement;i.key==="Enter"&&i.altKey&&(o==null||o.setElementState(We.DEFAULT))},n.inputHandler=function(i){var o=i.target.innerText,a=n.props.graphModel.textEditElement;a&&(n.__prevText={type:a.type,text:o.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},n.keydownHandler=function(i){i.stopPropagation()},n.state={style:{left:0,top:0}},n}return e.getDerivedStateFromProps=function(t){var n,i=t.textEditElement,o=t.graphModel,a=o.transformModel,s=o.theme,l=s.inputText,u;if(i){if(!(!((n=i.text)===null||n===void 0)&&n.value)&&i.BaseType===ut.EDGE){var d=i.text,f=i.textPosition,c=f.x,h=f.y;d.x=c,d.y=h,i.setText(d)}var g={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===ut.EDGE){var p=s.edgeText,v=p.overflowMode,y=p.lineHeight,b=p.wrapPadding,C=p.textWidth;C&&v==="autoWrap"&&(u=Pn(Pn({},g),{width:C,minWidth:C,lineHeight:y,padding:b}))}else if(i.BaseType===ut.NODE){var R=s.nodeText,v=R.overflowMode,y=R.lineHeight,b=R.wrapPadding,C=R.textWidth,j=i.width,D=i.modelType,w=i.textWidth,A=w||C||j;(D!==De.TEXT_NODE&&v==="autoWrap"||D===De.TEXT_NODE&&C)&&(u=Pn(Pn({},g),{width:A,minWidth:A,lineHeight:y,padding:b}))}var z=i.text,Z=z.x,oe=z.y,se=By(a.CanvasPointToHtmlPoint([Z,oe]),2),E=se[0],M=se[1];return{style:Pn(Pn({left:E,top:M},u),l)}}return null},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var n=this.__prevText,i=n.text,o=n.id;t.updateText(o,i),t.eventCenter.emit(fe.TEXT_UPDATE,{data:Pn({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(t){if(window.getSelection!==void 0&&document.createRange!==void 0){var n=document.createRange();n.selectNodeContents(t),n.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(n)}},e.prototype.render=function(){var t,n=this.props.graphModel.textEditElement,i=this.state.style;return n?I("div",{contentEditable:!0,className:"lf-text-input",style:i,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(t=n.text)===null||t===void 0?void 0:t.value},n.id):null},e.toolName="text-edit-tool",e=Iy([Pt],e),e}(He),Fy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zy=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Qa=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Xy=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Wy=function(r){Fy(e,r);function e(t){var n=r.call(this,t)||this;n.handleMouseDown=function(s){n.stepDrag.handleMouseDown(s)},n.handleWheelEvent=function(s){var l,u;s.preventDefault();var d=s.deltaX,f=s.deltaY,c=s.clientX,h=s.clientY,g=s.ctrlKey,p=new WheelEvent("wheel",{deltaX:d,deltaY:f,clientX:c,clientY:h,ctrlKey:g});(u=(l=n.props.lf.container)===null||l===void 0?void 0:l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||u===void 0||u.dispatchEvent(p)},n.onDragging=function(s){var l=s.deltaX,u=s.deltaY,d=n.props,f=d.graphModel,c=d.lf,h=c.getTransform(),g=h.SCALE_X,p=h.SCALE_Y,v=f.getSelectElements(!0);f.moveNodes(v.nodes.map(function(y){return y.id}),l/g,u/p)},n.handleContextMenu=function(s){s.preventDefault();var l=n.props,u=l.graphModel,d=l.graphModel,f=d.eventCenter,c=d.selectElements,h=u.getPointByClient({x:s.clientX,y:s.clientY}),g={nodes:[],edges:[]},p=Xy([],Qa(c.values()),!1);p.forEach(function(v){v.BaseType===ut.NODE&&g.nodes.push(v.getData()),v.BaseType===ut.EDGE&&g.edges.push(v.getData())}),f.emit(fe.SELECTION_CONTEXTMENU,{data:g,e:s,position:h})};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return n.stepDrag=new Jt({onDragging:n.onDragging,step:o,eventType:"SELECTION",eventCenter:a}),n}return e.prototype.render=function(){var t,n,i=this.props.graphModel,o=i.selectElements,a=i.transformModel,s=this.props.lf.getTransform(),l=s.SCALE_X,u=s.SCALE_Y;if(!(o.size<=1)){var d=Number.MAX_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;o.forEach(function(p){var v;p.BaseType===ut.NODE&&(v=zp(p)),p.BaseType===ut.EDGE&&(v=Yp(p)),v!==void 0&&(d=Math.min(d,v.x),f=Math.min(f,v.y),c=Math.max(c,v.x1),h=Math.max(h,v.y1))}),t=Qa(a.CanvasPointToHtmlPoint([d,f]),2),d=t[0],f=t[1],n=Qa(a.CanvasPointToHtmlPoint([c,h]),2),c=n[0],h=n[1];var g={left:"".concat(d-20*l/2,"px"),top:"".concat(f-20*u/2,"px"),width:"".concat(c-d+20*l,"px"),height:"".concat(h-f+20*u,"px"),"border-width":"".concat(2*l,"px")};return I("div",{className:"lf-multiple-select",style:g,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=zy([Pt],e),e}(He),es=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$y=[Hy,Wy],Yy=function(){function r(e){var t=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=e,Qe($y,function(o){t.isDisabled(o.toolName)||t.registerTool(o.toolName,o)});var n=e.graphModel,i=n.eventCenter;i.on("".concat(fe.GRAPH_TRANSFORM,",").concat(fe.NODE_CLICK,",").concat(fe.BLANK_CLICK," "),function(){var o,a=n.textEditElement,s=n.editConfigModel,l=s.edgeTextEdit,u=s.nodeTextEdit;(l||u)&&a&&((o=n.textEditElement)===null||o===void 0||o.setElementState(We.DEFAULT))})}return r.prototype.isDisabled=function(e){var t;return((t=this.instance.options.disabledTools)===null||t===void 0?void 0:t.indexOf(e))!==-1},r.prototype.registerTool=function(e,t){this.toolMap.set(e,t)},r.prototype.disableTool=function(e){var t=this.toolMap.get(e);if(t)return this.disabledToolMap.set(e,t),this.toolMap.delete(e),!0;throw new Error("禁用失败，不存在名为 ${tool} 的工具")},r.prototype.enableTool=function(e){var t=this.disabledToolMap.get(e);if(t)return this.toolMap.set(e,t),this.disabledToolMap.delete(e),!0;throw new Error("不存在名为 ${tool} 的工具")},r.prototype.getTools=function(){return Array.from(this.toolMap.values())},r.prototype.getInstance=function(){return this.instance},r.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},es([F],r.prototype,"toolMap",void 0),es([B],r.prototype,"disableTool",null),es([B],r.prototype,"enableTool",null),r}();function Uy(r){throw new Error("[mobx-utils] "+r)}function na(r,e){e===void 0&&(e="Illegal state"),r||Uy(e)}var oc=function(r){return r&&r!==Object.prototype&&Object.getOwnPropertyNames(r).concat(oc(Object.getPrototypeOf(r))||[])},Gy=function(r){var e=oc(r),t=e.filter(function(n,i){return e.indexOf(n)===i});return t},Vy=function(r){return Gy(r).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},ac="pending",ra="fulfilled",Ml="rejected";function Ky(r){switch(this.state){case ac:return r.pending&&r.pending(this.value);case Ml:return r.rejected&&r.rejected(this.value);case ra:return r.fulfilled?r.fulfilled(this.value):this.value}}function nd(r,e){if(na(arguments.length<=2,"fromPromise expects up to two arguments"),na(typeof r=="function"||typeof r=="object"&&r&&typeof r.then=="function","Please pass a promise or function to fromPromise"),r.isPromiseBasedObservable===!0)return r;typeof r=="function"&&(r=new Promise(r));var t=r;r.then(B("observableFromPromise-resolve",function(i){t.value=i,t.state=ra}),B("observableFromPromise-reject",function(i){t.value=i,t.state=Ml})),t.isPromiseBasedObservable=!0,t.case=Ky;var n=e&&e.state===ra?e.value:void 0;return ws(t,{value:n,state:ac},{},{deep:!1}),t}(function(r){r.reject=B("fromPromise.reject",function(t){var n=r(Promise.reject(t));return n.state=Ml,n.value=t,n});function e(t){t===void 0&&(t=void 0);var n=r(Promise.resolve(t));return n.state=ra,n.value=t,n}r.resolve=B("fromPromise.resolve",e)})(nd||(nd={}));var _o=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};(function(){function r(e,t){var n=this;jh(function(){n.current=t,n.subscription=e.subscribe(n)})}return r.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},r.prototype.next=function(e){this.current=e},r.prototype.complete=function(){this.dispose()},r.prototype.error=function(e){this.current=e,this.dispose()},_o([F.ref],r.prototype,"current",void 0),_o([B.bound],r.prototype,"next",null),_o([B.bound],r.prototype,"complete",null),_o([B.bound],r.prototype,"error",null),r})();var ia=function(){return ia=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ia.apply(this,arguments)},si=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qy=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function r(e){var t=this;this.model=e,this.localValues=F.map({}),this.localComputedValues=F.map({}),this.isPropertyDirty=function(n){return t.localValues.has(n)},na(gn(e),"createViewModel expects an observable object"),Vy(e).forEach(function(n){if(!(n===Ae||n==="__mobxDidRunLazyInitializers")){if(na(qy.indexOf(n)===-1,"The propertyname "+n+" is reserved and cannot be used with viewModels"),$l(e,n)){var i=Ma(e,n).derivation;t.localComputedValues.set(n,ot(i.bind(t)))}var o=Object.getOwnPropertyDescriptor(e,n),a=o?{enumerable:o.enumerable}:{};Object.defineProperty(t,n,ia(ia({},a),{configurable:!0,get:function(){return $l(e,n)?t.localComputedValues.get(n).get():t.isPropertyDirty(n)?t.localValues.get(n):t.model[n]},set:B(function(s){s!==t.model[n]?t.localValues.set(n,s):t.localValues.delete(n)})}))}})}return Object.defineProperty(r.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),r.prototype.submit=function(){var e=this;Xr(this.localValues).forEach(function(t){var n=e.localValues.get(t),i=e.model[t];An(i)?i.replace(n):Ht(i)?(i.clear(),i.merge(n)):Wh(n)||(e.model[t]=n)}),this.localValues.clear()},r.prototype.reset=function(){this.localValues.clear()},r.prototype.resetProperty=function(e){this.localValues.delete(e)},si([ot],r.prototype,"isDirty",null),si([ot],r.prototype,"changedValues",null),si([B.bound],r.prototype,"submit",null),si([B.bound],r.prototype,"reset",null),si([B.bound],r.prototype,"resetProperty",null),r})();function ts(r){if(!r)return"ROOT";for(var e=[];r.parent;)e.push(r.path),r=r.parent;return e.reverse().join("/")}function ns(r){return gn(r)||An(r)||Ht(r)}function Zy(r,e){var t=new WeakMap;function n(s){var l=t.get(s.object);i(s,l),e(s,ts(l),r)}function i(s,l){switch(s.type){case"add":o(s.newValue,l,s.name);break;case"update":a(s.oldValue),o(s.newValue,l,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(f,c){return o(f,l,""+(s.index+c))});for(var u=s.index+s.addedCount;u<s.object.length;u++)if(ns(s.object[u])){var d=t.get(s.object[u]);d&&(d.path=""+u)}break}}function o(s,l,u){if(ns(s)){var d=t.get(s);if(d){if(d.parent!==l||d.path!==u)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+ts(l)+"/"+u+"',")+(" but it already exists at '"+ts(d.parent)+"/"+d.path+"'"))}else{var f={parent:l,path:u,dispose:Tf(s,n)};t.set(s,f),Uh(s).forEach(function(c){var h=c[0],g=c[1];return o(g,f,h)})}}}function a(s){if(ns(s)){var l=t.get(s);if(!l)return;t.delete(s),l.dispose(),Yh(s).forEach(a)}}return o(r,void 0,""),function(){a(r)}}var Jy=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Jy(e,r);function e(t,n,i){var o=i===void 0?{}:i,a=o.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=o.keyToName,u=l===void 0?function(c){return""+c}:l,d=r.call(this)||this;d._keyToName=u,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+s),d._base=t;for(var f=0;f<t.length;f++)d._addItem(t[f]);return d._disposeBaseObserver=Tf(d._base,function(c){if(c.type==="splice")sn(function(){for(var h=0,g=c.removed;h<g.length;h++){var p=g[h];d._removeItem(p)}for(var v=0,y=c.added;v<y.length;v++){var b=y[v];d._addItem(b)}});else if(c.type==="update")sn(function(){d._removeItem(c.oldValue),d._addItem(c.newValue)});else throw new Error("illegal state")}),d}return e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,n){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var n=this._base[t],i=n[this._ogmInfoKey];i.reaction(),delete n[this._ogmInfoKey]}},e.prototype._getGroupArr=function(t){var n=r.prototype.get.call(this,t);return n===void 0&&(n=F([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),r.prototype.set.call(this,t,n)),n},e.prototype._removeFromGroupArr=function(t,n){var i=r.prototype.get.call(this,t);i.length===1?r.prototype.delete.call(this,t):(n===i.length-1||(i[n]=i[i.length-1],i[n][this._ogmInfoKey].groupArrIndex=n),i.length--)},e.prototype._addItem=function(t){var n=this,i=this._groupBy(t),o=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:o.length,reaction:Ef(function(){return n._groupBy(t)},function(s,l){var u=t[n._ogmInfoKey];n._removeFromGroupArr(u.groupByValue,u.groupArrIndex);var d=n._getGroupArr(s),f=d.length;d.push(t),u.groupByValue=s,u.groupArrIndex=f})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),o.push(t)},e.prototype._removeItem=function(t){var n=t[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete t[this._ogmInfoKey]},e})(xl);Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;var nl=function(){return nl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},nl.apply(this,arguments)},Qy=function(){function r(e){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=e}return r.prototype.add=function(e){Ll(Hc(this.undos),e)||(this.undos.push(e),Ll(this.curData,e)||(this.redos=[]),this.eventCenter.emit(fe.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},r.prototype.undoAble=function(){return this.undos.length>1},r.prototype.undo=function(){if(this.undoAble()){var e=this.undos.pop();this.redos.push(e);var t=this.undos.pop();return this.curData=Re(t),t}},r.prototype.redoAble=function(){return this.redos.length>0},r.prototype.redo=function(){if(this.redoAble()){var e=this.redos.pop();return this.curData=Re(e),e}},r.prototype.watch=function(e){var t=this;this.stopWatch&&this.stopWatch(),this.undos.push(e.modelToGraphData()),this.stopWatch=Zy(e,$d(function(){var n=e.modelToHistoryData();n&&t.add(nl({},n))},this.waitTime))},r.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},r}(),sc={exports:{}};(function(r){(function(e,t,n){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function d(w,A,z){if(w.addEventListener){w.addEventListener(A,z,!1);return}w.attachEvent("on"+A,z)}function f(w){if(w.type=="keypress"){var A=String.fromCharCode(w.which);return w.shiftKey||(A=A.toLowerCase()),A}return i[w.which]?i[w.which]:o[w.which]?o[w.which]:String.fromCharCode(w.which).toLowerCase()}function c(w,A){return w.sort().join(",")===A.sort().join(",")}function h(w){var A=[];return w.shiftKey&&A.push("shift"),w.altKey&&A.push("alt"),w.ctrlKey&&A.push("ctrl"),w.metaKey&&A.push("meta"),A}function g(w){if(w.preventDefault){w.preventDefault();return}w.returnValue=!1}function p(w){if(w.stopPropagation){w.stopPropagation();return}w.cancelBubble=!0}function v(w){return w=="shift"||w=="ctrl"||w=="alt"||w=="meta"}function y(){if(!l){l={};for(var w in i)w>95&&w<112||i.hasOwnProperty(w)&&(l[i[w]]=w)}return l}function b(w,A,z){return z||(z=y()[w]?"keydown":"keypress"),z=="keypress"&&A.length&&(z="keydown"),z}function C(w){return w==="+"?["+"]:(w=w.replace(/\+{2}/g,"+plus"),w.split("+"))}function R(w,A){var z,Z,oe,se=[];for(z=C(w),oe=0;oe<z.length;++oe)Z=z[oe],s[Z]&&(Z=s[Z]),A&&A!="keypress"&&a[Z]&&(Z=a[Z],se.push("shift")),v(Z)&&se.push(Z);return A=b(Z,se,A),{key:Z,modifiers:se,action:A}}function j(w,A){return w===null||w===t?!1:w===A?!0:j(w.parentNode,A)}function D(w){var A=this;if(w=w||t,!(A instanceof D))return new D(w);A.target=w,A._callbacks={},A._directMap={};var z={},Z,oe=!1,se=!1,E=!1;function M(ge){ge=ge||{};var Ne=!1,ke;for(ke in z){if(ge[ke]){Ne=!0;continue}z[ke]=0}Ne||(E=!1)}function P(ge,Ne,ke,Ce,je,T){var X,$,Q=[],ne=ke.type;if(!A._callbacks[ge])return[];for(ne=="keyup"&&v(ge)&&(Ne=[ge]),X=0;X<A._callbacks[ge].length;++X)if($=A._callbacks[ge][X],!(!Ce&&$.seq&&z[$.seq]!=$.level)&&ne==$.action&&(ne=="keypress"&&!ke.metaKey&&!ke.ctrlKey||c(Ne,$.modifiers))){var pe=!Ce&&$.combo==je,Ee=Ce&&$.seq==Ce&&$.level==T;(pe||Ee)&&A._callbacks[ge].splice(X,1),Q.push($)}return Q}function V(ge,Ne,ke,Ce){A.stopCallback(Ne,Ne.target||Ne.srcElement,ke,Ce)||ge(Ne,ke)===!1&&(g(Ne),p(Ne))}A._handleKey=function(ge,Ne,ke){var Ce=P(ge,Ne,ke),je,T={},X=0,$=!1;for(je=0;je<Ce.length;++je)Ce[je].seq&&(X=Math.max(X,Ce[je].level));for(je=0;je<Ce.length;++je){if(Ce[je].seq){if(Ce[je].level!=X)continue;$=!0,T[Ce[je].seq]=1,V(Ce[je].callback,ke,Ce[je].combo,Ce[je].seq);continue}$||V(Ce[je].callback,ke,Ce[je].combo)}var Q=ke.type=="keypress"&&se;ke.type==E&&!v(ge)&&!Q&&M(T),se=$&&ke.type=="keydown"};function ce(ge){typeof ge.which!="number"&&(ge.which=ge.keyCode);var Ne=f(ge);if(Ne){if(ge.type=="keyup"&&oe===Ne){oe=!1;return}A.handleKey(Ne,h(ge),ge)}}function be(){clearTimeout(Z),Z=setTimeout(M,1e3)}function Ue(ge,Ne,ke,Ce){z[ge]=0;function je(ne){return function(){E=ne,++z[ge],be()}}function T(ne){V(ke,ne,ge),Ce!=="keyup"&&(oe=f(ne)),setTimeout(M,10)}for(var X=0;X<Ne.length;++X){var $=X+1===Ne.length,Q=$?T:je(Ce||R(Ne[X+1]).action);Ge(Ne[X],Q,Ce,ge,X)}}function Ge(ge,Ne,ke,Ce,je){A._directMap[ge+":"+ke]=Ne,ge=ge.replace(/\s+/g," ");var T=ge.split(" "),X;if(T.length>1){Ue(ge,T,Ne,ke);return}X=R(ge,ke),A._callbacks[X.key]=A._callbacks[X.key]||[],P(X.key,X.modifiers,{type:X.action},Ce,ge,je),A._callbacks[X.key][Ce?"unshift":"push"]({callback:Ne,modifiers:X.modifiers,action:X.action,seq:Ce,level:je,combo:ge})}A._bindMultiple=function(ge,Ne,ke){for(var Ce=0;Ce<ge.length;++Ce)Ge(ge[Ce],Ne,ke)},d(w,"keypress",ce),d(w,"keydown",ce),d(w,"keyup",ce)}D.prototype.bind=function(w,A,z){var Z=this;return w=w instanceof Array?w:[w],Z._bindMultiple.call(Z,w,A,z),Z},D.prototype.unbind=function(w,A){var z=this;return z.bind.call(z,w,function(){},A)},D.prototype.trigger=function(w,A){var z=this;return z._directMap[w+":"+A]&&z._directMap[w+":"+A]({},w),z},D.prototype.reset=function(){var w=this;return w._callbacks={},w._directMap={},w},D.prototype.stopCallback=function(w,A){var z=this;if((" "+A.className+" ").indexOf(" mousetrap ")>-1||j(A,z.target))return!1;if("composedPath"in w&&typeof w.composedPath=="function"){var Z=w.composedPath()[0];Z!==w.target&&(A=Z)}return A.tagName=="INPUT"||A.tagName=="SELECT"||A.tagName=="TEXTAREA"||A.isContentEditable},D.prototype.handleKey=function(){var w=this;return w._handleKey.apply(w,arguments)},D.addKeycodes=function(w){for(var A in w)w.hasOwnProperty(A)&&(i[A]=w[A]);l=null},D.init=function(){var w=D(t);for(var A in w)A.charAt(0)!=="_"&&(D[A]=function(z){return function(){return w[z].apply(w,arguments)}}(A))},D.init(),e.Mousetrap=D,r.exports&&(r.exports=D)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(sc);var em=sc.exports;const tm=ba(em);var yn=null;function rd(r,e){return r.x+=e,r.y+=e,Yd(r.text)||(r.text.x+=e,r.text.y+=e),r}function id(r,e){return r.startPoint&&(r.startPoint.x+=e,r.startPoint.y+=e),r.endPoint&&(r.endPoint.x+=e,r.endPoint.y+=e),r.pointsList&&r.pointsList.length>0&&r.pointsList.forEach(function(t){t.x+=e,t.y+=e}),Yd(r.text)||(r.text.x+=e,r.text.y+=e),r}var Or=40,bo=40;function nm(r,e){var t=r.keyboard,n=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(bo=Or,!(n!=null&&n.enabled)||e.textEditElement)return!0;var i=r.options.guards,o=e.getSelectElements(!1),a=i&&i.beforeClone?i.beforeClone(o):!0;return!a||o.nodes.length===0&&o.edges.length===0?(yn=null,!0):(yn=o,yn.nodes.forEach(function(s){return rd(s,Or)}),yn.edges.forEach(function(s){return id(s,Or)}),!1)}),t.on(["cmd + v","ctrl + v"],function(){if(!(n!=null&&n.enabled)||e.textEditElement)return!0;if(yn&&(yn.nodes||yn.edges)){r.clearSelectElements();var i=r.addElements(yn,bo);if(!i)return!0;i.nodes.forEach(function(o){return r.selectElementById(o.id,!0)}),i.edges.forEach(function(o){return r.selectElementById(o.id,!0)}),yn.nodes.forEach(function(o){return rd(o,Or)}),yn.edges.forEach(function(o){return id(o,Or)}),bo=bo+Or}return!1}),t.on(["cmd + z","ctrl + z"],function(){return!(n!=null&&n.enabled)||e.textEditElement?!0:(r.undo(),!1)}),t.on(["cmd + y","ctrl + y"],function(){return!(n!=null&&n.enabled)||e.textEditElement?!0:(r.redo(),!1)}),t.on(["backspace"],function(){if(!(n!=null&&n.enabled)||e.textEditElement)return!0;var i=e.getSelectElements(!0);return r.clearSelectElements(),i.edges.forEach(function(o){return o.id&&r.deleteEdge(o.id)}),i.nodes.forEach(function(o){return o.id&&r.deleteNode(o.id)}),!1})}var rm=function(){function r(e){e.keyboard||(e.keyboard={enabled:!1}),this.options=e;var t=e.lf;this.target=t.container,this.mousetrap=new tm(this.target),e.keyboard.enabled&&!t.options.isSilentMode&&this.enable(!0)}return r.prototype.initShortcuts=function(){var e=this,t,n=((t=this.options.keyboard)!==null&&t!==void 0?t:{}).shortcuts;if(n)if(Ud(n))n.forEach(function(s){var l=s.keys,u=s.callback,d=s.action;return e.on(l,u,d)});else{var i=n.keys,o=n.callback,a=n.action;this.on(i,o,a)}},r.prototype.on=function(e,t,n){this.mousetrap.bind(this.getKeys(e),t,n)},Object.defineProperty(r.prototype,"disabled",{get:function(){var e,t;return((t=(e=this.options)===null||e===void 0?void 0:e.keyboard)===null||t===void 0?void 0:t.enabled)!==!0},enumerable:!1,configurable:!0}),r.prototype.off=function(e,t){this.mousetrap.unbind(this.getKeys(e),t)},r.prototype.enable=function(e){(this.disabled||e)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},r.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},r.prototype.destroy=function(){this.mousetrap.reset()},r.prototype.getKeys=function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(n){return t.formatKey(n)})},r.prototype.formatKey=function(e){return e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},r}(),Fn=function(){return Fn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Fn.apply(this,arguments)},xo=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},rs=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},is=Symbol("plugin registered by Logicflow.use"),Ni=function(){function r(e){var t=this,n;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(u,d){return t.viewMap.set(u,d)},this.getView=function(u){return t.viewMap.get(u)};var i=Bi.get(e),o=i.container,a=i.width,s=i.height;this.options=i,this.container=this.initContainer(o,a,s),this.graphModel=new Gv(Fn(Fn({},i),{container:this.container})),this.plugins=(n=i.plugins)!==null&&n!==void 0?n:[];var l=this.graphModel.eventCenter;this.tool=new Yy(this),this.dnd=new Ly({lf:this}),this.history=new Qy(l),this.keyboard=new rm({lf:this,keyboard:i.keyboard}),i.snapline!==!1&&(this.snaplineModel=new Vv(this.graphModel),ky(l,this.snaplineModel)),i.isSilentMode||(nm(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(i.disabledPlugins)}return r.prototype.initContainer=function(e,t,n){var i=document.createElement("div");return i.style.position="relative",i.style.width=t?"".concat(t,"px"):"100%",i.style.height=n?"".concat(n,"px"):"100%",e.innerHTML="",e.appendChild(i),i},Object.defineProperty(r.prototype,Symbol.toStringTag,{get:function(){return r.toStringTag},enumerable:!1,configurable:!0}),r.prototype.register=function(e,t,n){if(n===void 0&&(n=!0),typeof e!="string"){this.registerElement(e);return}var i={BaseEdge:Ra,BaseEdgeModel:Da,BaseNode:Zn,BaseNodeModel:qn,RectNode:vr,RectNodeModel:Ur,CircleNode:Qo,CircleNodeModel:Ko,PolygonNode:ta,PolygonNodeModel:qo,TextNode:Ju,TextNodeModel:qu,LineEdge:td,LineEdgeModel:Uu,DiamondNode:Vs,DiamondNodeModel:Bs,PolylineEdge:Gi,PolylineEdgeModel:Yi,BezierEdge:ed,BezierEdgeModel:$u,EllipseNode:qs,EllipseNodeModel:Hs,HtmlNode:Js,HtmlNodeModel:Fs,h:_e,type:e};if(this.viewMap.forEach(function(u){var d=u.extendKey;d&&(i[d]=u)}),this.graphModel.modelMap.forEach(function(u){var d=u.extendKey;d&&(i[d]=u)}),t){var o=t(i),a=o.view,s=o.model,l=a;n&&!l.isObserved&&(l.isObserved=!0,l=Pt(l)),this.setView(e,l),this.graphModel.setModel(e,s)}},r.prototype.registerElement=function(e){var t=e.view;e.isObserverView!==!1&&!t.isObserved&&(t.isObserved=!0,t=Pt(t)),this.setView(e.type,t),this.graphModel.setModel(e.type,e.model)},r.prototype.batchRegister=function(e){var t=this;e===void 0&&(e=[]),Qe(e,function(n){t.registerElement(n)})},r.prototype.defaultRegister=function(){var e=[{type:"rect",view:vr,model:Ur},{type:"circle",view:Qo,model:Ko},{type:"polygon",view:ta,model:qo},{type:"text",view:Ju,model:qu},{type:"ellipse",view:qs,model:Hs},{type:"diamond",view:Vs,model:Bs},{type:"html",view:Js,model:Fs},{type:"line",view:td,model:Uu},{type:"polyline",view:Gi,model:Yi},{type:"bezier",view:ed,model:$u}];this.batchRegister(e)},r.prototype.addNode=function(e,t,n){return t===void 0&&(t=fe.NODE_ADD),this.graphModel.addNode(e,t,n)},r.prototype.deleteNode=function(e){var t=this.graphModel.getNodeModelById(e);if(!t)return!1;var n=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(n):!0;return o&&this.graphModel.deleteNode(e),o},r.prototype.cloneNode=function(e){var t=this.graphModel.getNodeModelById(e),n=t==null?void 0:t.getData();if(n){var i=this.options.guards,o=i!=null&&i.beforeClone?i.beforeClone(n):!0;if(o)return this.graphModel.cloneNode(e)}},r.prototype.changeNodeId=function(e,t){return this.graphModel.changeNodeId(e,t)},r.prototype.changeNodeType=function(e,t){this.graphModel.changeNodeType(e,t)},r.prototype.getNodeModelById=function(e){return this.graphModel.getNodeModelById(e)},r.prototype.getNodeDataById=function(e){var t=this.getNodeModelById(e);return t==null?void 0:t.getData()},r.prototype.getNodeIncomingEdge=function(e){return this.graphModel.getNodeIncomingEdge(e)},r.prototype.getNodeOutgoingEdge=function(e){return this.graphModel.getNodeOutgoingEdge(e)},r.prototype.getNodeIncomingNode=function(e){return this.graphModel.getNodeIncomingNode(e)},r.prototype.getNodeOutgoingNode=function(e){return this.graphModel.getNodeOutgoingNode(e)},r.prototype.createFakeNode=function(e){var t=this.graphModel.modelMap.get(e.type);if(!t)return console.warn("不存在为".concat(e.type,"类型的节点")),null;var n=new t(Fn(Fn({},e),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(n),n},r.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},r.prototype.setNodeSnapLine=function(e){var t;(t=this.snaplineModel)===null||t===void 0||t.setNodeSnapLine(e)},r.prototype.removeNodeSnapLine=function(){var e;(e=this.snaplineModel)===null||e===void 0||e.clearSnapline()},r.prototype.setDefaultEdgeType=function(e){this.graphModel.setDefaultEdgeType(e)},r.prototype.addEdge=function(e){return this.graphModel.addEdge(e)},r.prototype.getEdgeDataById=function(e){var t=this.getEdgeModelById(e);return t==null?void 0:t.getData()},r.prototype.getEdgeModelById=function(e){return this.graphModel.getEdgeModelById(e)},r.prototype.getEdgeModels=function(e){var t=e.sourceNodeId,n=e.targetNodeId,i=[],o=this.graphModel.edges;return t&&n?Qe(o,function(a){a.sourceNodeId===t&&a.targetNodeId===n&&i.push(a)}):t?Qe(o,function(a){a.sourceNodeId===t&&i.push(a)}):n&&Qe(o,function(a){a.targetNodeId===n&&i.push(a)}),i},r.prototype.changeEdgeId=function(e,t){return this.graphModel.changeEdgeId(e,t)},r.prototype.changeEdgeType=function(e,t){this.graphModel.changeEdgeType(e,t)},r.prototype.deleteEdge=function(e){var t=this.graphModel.getEdgeModelById(e);if(!t)return!1;var n=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(n):!0;return o&&this.graphModel.deleteEdgeById(e),o},r.prototype.deleteEdgeByNodeId=function(e){var t=e.sourceNodeId,n=e.targetNodeId;t&&n?this.graphModel.deleteEdgeBySourceAndTarget(t,n):t?this.graphModel.deleteEdgeBySource(t):n&&this.graphModel.deleteEdgeByTarget(n)},r.prototype.getNodeEdges=function(e){return this.graphModel.getNodeEdges(e)},r.prototype.addElements=function(e,t){var n=this,i=e.nodes,o=e.edges;t===void 0&&(t=40),console.log("distance",t);var a={},s={nodes:[],edges:[]};return Qe(i,function(l){var u=l.id,d=n.addNode(l);u&&(a[u]=d.id),s.nodes.push(d)}),Qe(o,function(l){var u=l.sourceNodeId,d=l.targetNodeId;a[u]&&(u=a[u]),a[d]&&(d=a[d]);var f=n.graphModel.addEdge(Fn(Fn({},l),{sourceNodeId:u,targetNodeId:d}));s.edges.push(f)}),s},r.prototype.selectElementById=function(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),this.graphModel.selectElementById(e,t),!t&&n&&this.graphModel.toFront(e)},r.prototype.getSelectElements=function(e){return e===void 0&&(e=!0),this.graphModel.getSelectElements(e)},r.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},r.prototype.getModelById=function(e){return this.graphModel.getElement(e)},r.prototype.getDataById=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getData()},r.prototype.deleteElement=function(e){var t,n,i,o=this.getModelById(e);if(!o)return!1;var a=(t={},t[ut.NODE]=this.deleteNode,t[ut.EDGE]=this.deleteEdge,t);return(i=(n=a[o.BaseType])===null||n===void 0?void 0:n.call(this,e))!==null&&i!==void 0?i:!1},r.prototype.setElementZIndex=function(e,t){return this.graphModel.setElementZIndex(e,t)},r.prototype.getAreaElement=function(e,t,n,i,o){return n===void 0&&(n=!0),i===void 0&&(i=!0),o===void 0&&(o=!1),this.graphModel.getAreaElement(e,t,n,i,o).map(function(a){return a.getData()})},r.prototype.setProperties=function(e,t){var n;(n=this.graphModel.getElement(e))===null||n===void 0||n.setProperties(At(t))},r.prototype.getProperties=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getProperties()},r.prototype.deleteProperty=function(e,t){var n;(n=this.graphModel.getElement(e))===null||n===void 0||n.deleteProperty(t)},r.prototype.updateAttributes=function(e,t){this.graphModel.updateAttributes(e,t)},r.prototype.editText=function(e){this.graphModel.editText(e)},r.prototype.updateText=function(e,t){this.graphModel.updateText(e,t)},r.prototype.updateEditConfig=function(e){var t=this.graphModel,n=t.editConfigModel,i=t.transformModel,o=n.snapGrid;if(n.updateEditConfig(e),(e==null?void 0:e.stopMoveGraph)!==void 0&&i.updateTranslateLimits(e.stopMoveGraph),e!=null&&e.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0),!un(e==null?void 0:e.snapGrid)&&e.snapGrid!==o){var a=this.graphModel.grid.size,s=a===void 0?1:a;this.graphModel.updateGridSize(e.snapGrid?s:1)}},r.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},r.prototype.setTheme=function(e){this.graphModel.setTheme(e)},r.prototype.focusByElement=function(e){var t=void 0,n=this.getNodeModelById(e);if(n){var i=n.getData(),o=i.x,a=i.y;t={x:o,y:a}}var s=this.getEdgeModelById(e);if(s){var l=s.textPosition,o=l.x,a=l.y;t={x:o,y:a}}t&&this.focusByCoordinate(t)},r.prototype.focusByCoordinate=function(e){var t=this.graphModel,n=t.transformModel,i=t.width,o=t.height,a=e.x,s=e.y;n.focusOn(a,s,i,o)},r.prototype.focusOn=function(e){if(typeof e=="string")this.focusByElement(e);else if("x"in e&&"y"in e)this.focusByCoordinate(e);else{var t=e.id,n=e.coordinate;t&&this.focusByElement(t),n&&this.focusByCoordinate(n)}},r.prototype.resize=function(e,t){this.graphModel.resize(e,t),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},r.prototype.toFront=function(e){this.graphModel.toFront(e)},r.prototype.getPointByClient=function(e,t){if(typeof e=="object")return this.graphModel.getPointByClient(e);if(typeof t=="number")return this.graphModel.getPointByClient({x:e,y:t})},r.prototype.getGraphData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,rs([n],xo(e),!1)):n},r.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},r.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},r.prototype.renderRawData=function(e){this.graphModel.graphDataToModel(At(e)),this.options.history!==!1&&this.history.watch(this.graphModel),yu(I(ty,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(fe.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},r.prototype.render=function(e){var t=Re(e);this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)},r.prototype.undo=function(){if(this.history.undoAble()){var e=At(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},r.prototype.redo=function(){if(this.history.redoAble()){var e=At(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},r.prototype.zoom=function(e,t){var n=this.graphModel.transformModel;return n.zoom(e,t)},r.prototype.resetZoom=function(){var e=this.graphModel.transformModel;e.resetZoom()},r.prototype.setZoomMiniSize=function(e){var t=this.graphModel.transformModel;t.setZoomMiniSize(e)},r.prototype.setZoomMaxSize=function(e){var t=this.graphModel.transformModel;t.setZoomMaxSize(e)},r.prototype.getTransform=function(){var e=this.graphModel.transformModel,t=e.SCALE_X,n=e.SCALE_Y,i=e.TRANSLATE_X,o=e.TRANSLATE_Y;return{SCALE_X:t,SCALE_Y:n,TRANSLATE_X:i,TRANSLATE_Y:o}},r.prototype.translate=function(e,t){var n=this.graphModel.transformModel;n.translate(e,t)},r.prototype.resetTranslate=function(){var e=this.graphModel.transformModel,t=e.TRANSLATE_X,n=e.TRANSLATE_Y;this.translate(-t,-n)},r.prototype.translateCenter=function(){this.graphModel.translateCenter()},r.prototype.fitView=function(e,t){t===void 0&&(t=e),this.graphModel.fitView(e,t)},r.prototype.openEdgeAnimation=function(e){this.graphModel.openEdgeAnimation(e)},r.prototype.closeEdgeAnimation=function(e){this.graphModel.closeEdgeAnimation(e)},r.prototype.on=function(e,t){this.graphModel.eventCenter.on(e,t)},r.prototype.off=function(e,t){this.graphModel.eventCenter.off(e,t)},r.prototype.once=function(e,t){this.graphModel.eventCenter.once(e,t)},r.prototype.emit=function(e,t){this.graphModel.eventCenter.emit(e,t)},r.use=function(e,t){var n,i=e.pluginName;if(!i)throw new Error("请给插件指定 pluginName!");this.extensions.set(i,(n={},n[is]=is,n.extension=e,n.props=t,n))},r.prototype.installPlugins=function(e){var t=this;e===void 0&&(e=[]);var n=Array.from(r.extensions,function(o){var a=xo(o,2),s=a[1];return s}),i=rs(rs([],xo(this.plugins),!1),xo(n),!1);Qe(i,function(o){var a,s;is in o?(a=o.extension,s=o.props):a=o;var l=a==null?void 0:a.pluginName;Fc(e,l)===-1&&t.installPlugin(a,s)})},r.prototype.installPlugin=function(e,t){var n,i;if("pluginName"in e&&"install"in e){var o=e.pluginName,a=e.install,s=e.render;o&&(a&&a.call(e,this,r),s&&this.components.push(s.bind(e)),this.extension[o]=e);return}var l=e,u=l.pluginName,d=new l({lf:this,LogicFlow:r,props:t,options:(i=(n=this.options.pluginsOptions)===null||n===void 0?void 0:n[u])!==null&&i!==void 0?i:{}});d.render&&this.components.push(d.render.bind(d)),this.extension[u]=d},r.prototype.destroy=function(){this.clearData(),yu(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy()},r.extensions=new Map,r}();(function(r){r.toStringTag="LF.".concat(r.name)})(Ni||(Ni={}));function Pt(r){return wl(r)}var od={width:40,height:40},ad={width:40,height:40},sd={width:40,height:40},ld={width:100,height:80},ud={width:100,height:80},im=function(){function r(){globalThis._ids=this,this._ids=new Set}return r.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},r.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},r}(),om=(globalThis==null?void 0:globalThis._ids)||new im;function Jr(){return om.next()}var lc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){lc(e,r);function e(t,n){return t.id||(t.id="Event_".concat(Jr())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),r.call(this,t,n)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var t=r.prototype.getConnectedTargetRules.call(this),n={message:"起始节点不能作为边的终点",validate:function(){return!1}};return t.push(n),t},e.extendKey="StartEventModel",e})(Ko);(function(r){lc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.extendKey="StartEventNode",e})(Qo);var uc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oa=function(){return oa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},oa.apply(this,arguments)};(function(r){uc(e,r);function e(t,n){return t.id||(t.id="Event_".concat(Jr())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),r.call(this,t,n)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var t=r.prototype.getConnectedSourceRules.call(this),n={message:"结束节点不能作为边的起点",validate:function(){return!1}};return t.push(n),t},e.extendKey="EndEventModel",e})(Ko);(function(r){uc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t=this.props.model,n=t.getNodeStyle(),i=t,o=i.x,a=i.y,s=i.r,l=r.prototype.getShape.call(this);return _e("g",{},l,_e("circle",oa(oa({},n),{cx:o,cy:a,r:s-5})))},e.extendKey="EndEventView",e})(Qo);var dc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){dc(e,r);function e(t,n){return t.id||(t.id="Flow_".concat(Jr())),r.call(this,t,n)||this}return e.extendKey="SequenceFlowModel",e})(Yi);(function(r){dc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.extendKey="SequenceFlowEdge",e})(Gi);var fc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pi=function(){return Pi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Pi.apply(this,arguments)};(function(r){fc(e,r);function e(t,n){var i=this;return t.id||(t.id="Gateway_".concat(Jr())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=r.call(this,t,n)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return e.extendKey="ExclusiveGatewayModel",e})(qo);(function(r){fc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,n=t,i=n.x,o=n.y,a=n.width,s=n.height,l=n.points,u=t.getNodeStyle();return _e("g",{transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")},_e("polygon",Pi(Pi({},u),{x:i,y:o,points:l})),_e("path",Pi({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},u)))},e.extendKey="ExclusiveGatewayNode",e})(ta);var cc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rl=function(){return rl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},rl.apply(this,arguments)};(function(r){cc(e,r);function e(t,n){return t.id||(t.id="Activity_".concat(Jr())),r.call(this,t,n)||this}return e.extendKey="ServiceTaskModel",e})(Ur);(function(r){cc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return _e("svg",{x:n-o/2+5,y:i-a/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},_e("path",{fill:s.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return _e("g",{},[_e("rect",rl({x:n-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a},l)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e})(vr);var hc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aa=function(){return aa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},aa.apply(this,arguments)};(function(r){hc(e,r);function e(t,n){return t.id||(t.id="Activity_".concat(Jr())),r.call(this,t,n)||this}return e.extendKey="UserTaskModel",e})(Ur);(function(r){hc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return _e("svg",{x:n-o/2+5,y:i-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},_e("path",{fill:s.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return _e("g",{},[_e("rect",aa(aa({},l),{x:n-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a})),this.getLabelShape()])},e.extendKey="UserTaskNode",e})(vr);var am=function(){function r(){globalThis._ids=this,this._ids=new Set}return r.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},r.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},r}(),sm=(globalThis==null?void 0:globalThis._ids)||new am;function dd(){return sm.next()}function pc(r){return Object.prototype.toString.call(r)}function lm(r){return"  ".repeat(r)}function sa(r){var e=r;return pc(r)==="[object Object]"?(e={},Object.keys(r).forEach(function(t){var n=t;t.charAt(0)==="-"&&(n=t.substring(1)),e[n]=sa(r[t])})):Array.isArray(r)&&(e=[],r.forEach(function(t,n){e[n]=sa(t)})),e}function um(r){var e=r;try{typeof e!="string"&&(e=JSON.parse(r))}catch{e=JSON.stringify(sa(r)).replace(/"/g,"'")}return e}var nr=`	
`;function Mo(r,e,t){var n=lm(t);if(r!==0&&r!==!1&&!r)return nr+n+"<".concat(e," />");var i="";if(e==="#text")return nr+n+r;if(e==="#cdata-section")return nr+n+"<![CDATA["+r+"]]>";if(e==="#comment")return nr+n+"<!--"+r+"-->";if("".concat(e).charAt(0)==="-")return" "+e.substring(1)+'="'+um(r)+'"';if(Array.isArray(r))r.forEach(function(l){i+=Mo(l,e,t+1)});else if(pc(r)==="[object Object]"){var o=Object.keys(r),a="",s="";i+=(t===0?"":nr+n)+"<"+e,o.forEach(function(l){l.charAt(0)==="-"?a+=Mo(r[l],l,t+1):s+=Mo(r[l],l,t+1)}),i+=a+(s!==""?">".concat(s).concat(nr+n,"</").concat(e,">"):" />")}else i+=nr+n+"<".concat(e,">").concat(r.toString(),"</").concat(e,">");return i}function dm(r){var e="";for(var t in r)e+=Mo(r[t],t,0);return e}var Rt=function(){};Rt.ObjTree=function(){return this};Rt.ObjTree.VERSION="0.23";Rt.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Rt.ObjTree.prototype.attr_prefix="-";Rt.ObjTree.prototype.parseXML=function(r){var e;if(window.DOMParser){var t=new DOMParser,n=t.parseFromString(r,"application/xml");if(!n)return;e=n.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(r),e=t.documentElement);if(e)return this.parseDOM(e)};Rt.ObjTree.prototype.parseHTTP=function(r,e,t){var n={};for(var i in e)n[i]=e[i];if(n.method||(typeof n.postBody>"u"&&typeof n.postbody>"u"&&typeof n.parameters>"u"?n.method="get":n.method="post"),t){n.asynchronous=!0;var o=this,a=t,s=n.onComplete;n.onComplete=function(d){var f;d&&d.responseXML&&d.responseXML.documentElement&&(f=o.parseDOM(d.responseXML.documentElement)),a(f,d),s&&s(d)}}else n.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){n.uri=r;var u=new HTTP.Request(n);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(r,n);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};Rt.ObjTree.prototype.parseDOM=function(r){if(r){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(r);if(this.__force_array[r.nodeName]&&(t=[t]),r.nodeType!=11){var n={};n[r.nodeName]=t,t=n}return t}};Rt.ObjTree.prototype.parseElement=function(r){if(r.nodeType!=7){if(r.nodeType==3||r.nodeType==4||r.nodeType==8){var e=r.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:r.nodeValue}var t=null,n={};if(r.attributes&&r.attributes.length){t={};for(var i=0;i<r.attributes.length;i++){var o=r.attributes[i].nodeName;if(typeof o=="string"){var a=r.attributes[i].nodeValue;try{a=JSON.parse(r.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=r.attributes[i].nodeValue}a&&(o=this.attr_prefix+o,typeof n[o]>"u"&&(n[o]=0),n[o]++,this.addNode(t,o,n[o],a))}}}if(r.childNodes&&r.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<r.childNodes.length&&s;i++){var l=r.childNodes[i].nodeType;l==3||l==4||l==8||(s=!1)}if(s){t||(t="");for(var i=0;i<r.childNodes.length;i++)t+=r.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<r.childNodes.length;i++){var o=r.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(r.childNodes[i]);a&&(typeof n[o]>"u"&&(n[o]=0),n[o]++,this.addNode(t,o,n[o],a))}}}}else t===null&&(t={});return t}};Rt.ObjTree.prototype.addNode=function(r,e,t,n){this.__force_array[e]?(t==1&&(r[e]=[]),r[e][r[e].length]=n):t==1?r[e]=n:t==2?r[e]=[r[e],n]:r[e][r[e].length]=n};Rt.ObjTree.prototype.writeXML=function(r){var e=this.hash_to_xml(null,r);return this.xmlDecl+e};Rt.ObjTree.prototype.hash_to_xml=function(r,e){var t=[],n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];i.charAt(0)!=this.attr_prefix?typeof o>"u"||o==null?t[t.length]="<"+i+" />":typeof o=="object"&&o.constructor==Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):n[n.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=n.join(""),s=t.join("");return typeof r>"u"||r==null||(t.length>0?s.match(/\n/)?s="<"+r+a+`>
`+s+"</"+r+`>
`:s="<"+r+a+">"+s+"</"+r+`>
`:s="<"+r+a+` />
`),s};Rt.ObjTree.prototype.array_to_xml=function(r,e){for(var t=[],n=0;n<e.length;n++){var i=e[n];typeof i>"u"||i==null?t[t.length]="<"+r+" />":typeof i=="object"&&i.constructor==Array?t[t.length]=this.array_to_xml(r,i):typeof i=="object"?t[t.length]=this.hash_to_xml(r,i):t[t.length]=this.scalar_to_xml(r,i)}return t.join("")};Rt.ObjTree.prototype.scalar_to_xml=function(r,e){return r=="#text"?this.xml_escape(e):"<"+r+">"+this.xml_escape(e)+"</"+r+`>
`};Rt.ObjTree.prototype.xml_escape=function(r){return r.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var fm=function(r){return new Rt.ObjTree().parseXML(r)},cm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),il=function(){return il=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},il.apply(this,arguments)},La=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},On;(function(r){r.START="bpmn:startEvent",r.END="bpmn:endEvent",r.GATEWAY="bpmn:exclusiveGateway",r.USER="bpmn:userTask",r.SYSTEM="bpmn:serviceTask",r.FLOW="bpmn:sequenceFlow"})(On||(On={}));var gc=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],fd=["properties","startPoint","endPoint","pointsList"];function cd(r){var e=r?fd.concat(r):fd;return function(t){function n(i){var o={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(a){return n(a)}):(Object.entries(i).forEach(function(a){var s=La(a,2),l=s[0],u=s[1];typeof u!="object"?l.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(l)?o[l]=u:o["-".concat(l)]=u:e.includes(l)?o["-".concat(l)]=n(u):o[l]=n(u)}),o)}return n(t)}}function la(r){var e={};return Object.entries(r).forEach(function(t){var n=La(t,2),i=n[0],o=n[1];i.indexOf("-")===0?e[i.substring(1)]=sa(o):typeof o=="string"?e[i]=o:Object.prototype.toString.call(o)==="[object Object]"?e[i]=la(o):Array.isArray(o)?e[i]=o.map(function(a){return la(a)}):e[i]=o}),e}function hm(r,e,t){var n=new Map;e.nodes.forEach(function(o){var a,s={"-id":o.id};if(!((a=o.text)===null||a===void 0)&&a.value&&(s["-name"]=o.text.value),o.properties){var l=cd(t)(o.properties);Object.assign(s,l)}n.set(o.id,s),r[o.type]?Array.isArray(r[o.type])?r[o.type].push(s):r[o.type]=[r[o.type],s]:r[o.type]=s});var i=e.edges.map(function(o){var a,s,l=n.get(o.targetNodeId);l["bpmn:incoming"]?Array.isArray(l["bpmn:incoming"])?l["bpmn:incoming"].push(o.id):l["bpmn:incoming"]=[l["bpmn:incoming"],o.id]:l["bpmn:incoming"]=o.id;var u={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((a=o.text)===null||a===void 0)&&a.value&&(u["-name"]=(s=o.text)===null||s===void 0?void 0:s.value),o.properties){var d=cd(t)(o.properties);Object.assign(u,d)}return u});e.edges.forEach(function(o){var a=n.get(o.sourceNodeId);a["bpmn:outgoing"]?Array.isArray(a["bpmn:outgoing"])?a["bpmn:outgoing"].push(o.id):a["bpmn:outgoing"]=[a["bpmn:outgoing"],o.id]:a["bpmn:outgoing"]=o.id}),r[On.FLOW]=i}function pm(r,e){r["bpmndi:BPMNEdge"]=e.edges.map(function(t){var n,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((n=t.text)===null||n===void 0)&&n.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),r["bpmndi:BPMNShape"]=e.nodes.map(function(t){var n,i=t.id,o=100,a=80,s=t.x,l=t.y,u=Jn.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var d={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((n=t.text)===null||n===void 0)&&n.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),d})}function gm(r){var e=[],t=[],n=r["bpmn:definitions"];if(n){var i=n["bpmn:process"];Object.keys(i).forEach(function(o){if(o.indexOf("bpmn:")===0){var a=i[o];if(o===On.FLOW){var s=n["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];t=ym(a,s)}else{var l=n["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(vm(a,l,o))}}})}return{nodes:e,edges:t}}function vm(r,e,t){var n=[];if(Array.isArray(r))r.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=hd(s,t,a);n.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===r["-id"]}):i=e;var o=hd(i,t,r);n.push(o)}return n}function hd(r,e,t){var n=Number(r["dc:Bounds"]["-x"]),i=Number(r["dc:Bounds"]["-y"]),o=t["-name"],a=Jn.shapeConfigMap.get(e);a&&(n+=a.width/2,i+=a.height/2);var s;Object.entries(t).forEach(function(f){var c=La(f,2),h=c[0],g=c[1];gc.indexOf(h)===-1&&(s||(s={}),s[h]=g)}),s&&(s=la(s));var l;if(o&&(l={x:n,y:i,value:o},r["bpmndi:BPMNLabel"]&&r["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=r["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(u["-x"])+Number(u["-width"])/2,l.y=Number(u["-y"])+Number(u["-height"])/2}var d={id:r["-bpmnElement"],type:e,x:n,y:i,properties:s};return l&&(d.text=l),d}function ym(r,e){var t=[];if(Array.isArray(r))r.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push(pd(o,i))});else{var n=void 0;Array.isArray(e)?n=e.find(function(i){return i["-bpmnElement"]===r["-id"]}):n=e,t.push(pd(n,r))}return t}function pd(r,e){var t,n=e["-name"]?"".concat(e["-name"]):"";if(n){var i=r["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;n.split(`
`).forEach(function(l){o<l.length&&(o=l.length)}),t={value:n,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a;Object.entries(e).forEach(function(l){var u=La(l,2),d=u[0],f=u[1];gc.indexOf(d)===-1&&(a||(a={}),a[d]=f)}),a&&(a=la(a));var s={id:e["-id"],type:On.FLOW,pointsList:r["di:waypoint"].map(function(l){return{x:Number(l["-x"]),y:Number(l["-y"])}}),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(s.text=t),s}var Jn=function(){function r(e){var t=e.lf,n=this;this.adapterOut=function(i,o){var a=il({},n.processAttributes);hm(a,i,o);var s={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};pm(s,i);var l=n.definitionAttributes;l["bpmn:process"]=a,l["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":s};var u={"bpmn:definitions":l};return u},this.adapterIn=function(i){if(i)return gm(i)},t.adapterIn=function(i){return n.adapterIn(i)},t.adapterOut=function(i,o){return n.adapterOut(i,o)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(dd())},this.definitionAttributes={"-id":"Definitions_".concat(dd()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return r.prototype.setCustomShape=function(e,t){r.shapeConfigMap.set(e,t)},r.pluginName="bpmn-adapter",r.shapeConfigMap=new Map,r}();Jn.shapeConfigMap.set(On.START,{width:od.width,height:od.height});Jn.shapeConfigMap.set(On.END,{width:ad.width,height:ad.height});Jn.shapeConfigMap.set(On.GATEWAY,{width:sd.width,height:sd.height});Jn.shapeConfigMap.set(On.SYSTEM,{width:ld.width,height:ld.height});Jn.shapeConfigMap.set(On.USER,{width:ud.width,height:ud.height});(function(r){cm(e,r);function e(t){var n=r.call(this,t)||this;n.adapterXmlIn=function(o){var a=fm(o);return n.adapterIn(a)},n.adapterXmlOut=function(o,a){var s=n.adapterOut(o,a);return dm(s)};var i=t.lf;return i.adapterIn=n.adapterXmlIn,i.adapterOut=n.adapterXmlOut,n}return e.pluginName="bpmnXmlAdapter",e})(Jn);var mm=function(){function r(){globalThis._ids=this,this._ids=new Set}return r.prototype.generateId=function(){var e="xxxxxxx".replace(/[x]/g,function(t){var n=Math.random()*16|0,i=t==="x"?n:n&3|8;return i.toString(16)});return e},r.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},r}(),_m=(globalThis==null?void 0:globalThis._ids)||new mm;function bm(){return _m.next()}_e("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),_e("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),_e("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});_e("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});_e("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var xm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ur=function(){return ur=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ur.apply(this,arguments)},Em=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},wm=Jt,Sm=function(r){xm(e,r);function e(t){var n=r.call(this)||this;return n.updatePosition=function(i){var o=i.deltaX,a=i.deltaY,s=n.nodeModel,l=s.x,u=s.y;n.nodeModel.x=l+o/2,n.nodeModel.y=u+a/2,n.nodeModel.moveText(o/2,a/2)},n.getResize=function(i){var o=i.index,a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,d=i.PCTResizeInfo,f=i.pct,c=f===void 0?1:f,h=i.freezeWidth,g=h===void 0?!1:h,p=i.freezeHeight,v=p===void 0?!1:p,y={width:l,height:u,deltaX:a,deltaY:s};if(d){var b=4,C=0,R=0;switch(o){case 0:R=(a*-1-s)/b;break;case 1:R=(a-s)/b;break;case 2:R=(a+s)/b;break;case 3:R=(a*-1+s)/b;break}R!==0&&(C=Math.round(R/d.ResizeBasis.basisHeight*1e5)/1e3),d.ResizePCT.widthPCT=Math.max(Math.min(d.ResizePCT.widthPCT+C,d.ScaleLimit.maxScaleLimit),d.ScaleLimit.minScaleLimit),d.ResizePCT.heightPCT=Math.max(Math.min(d.ResizePCT.heightPCT+C,d.ScaleLimit.maxScaleLimit),d.ScaleLimit.minScaleLimit);var j=Math.round(d.ResizePCT.widthPCT*d.ResizeBasis.basisWidth/100),D=Math.round(d.ResizePCT.heightPCT*d.ResizeBasis.basisHeight/100);switch(o){case 0:a=l-j,s=u-D;break;case 1:a=j-l,s=u-D;break;case 2:a=j-l,s=D-u;break;case 3:a=l-j,s=D-u;break}return y.width=j,y.height=D,y.deltaX=a/c,y.deltaY=s/c,y}switch(o){case 0:y.width=g?l:l-a*c,y.height=v?u:u-s*c;break;case 1:y.width=g?l:l+a*c,y.height=v?u:u-s*c;break;case 2:y.width=g?l:l+a*c,y.height=v?u:u+s*c;break;case 3:y.width=g?l:l-a*c,y.height=v?u:u+s*c;break}return y},n.updateEdgePointByAnchors=function(){var i=n.nodeModel,o=i.id,a=i.anchors,s=n.getNodeEdges(o);s.sourceEdges.forEach(function(l){var u=a.find(function(d){return d.id===l.sourceAnchorId});u&&l.updateStartPoint({x:u.x,y:u.y})}),s.targetEdges.forEach(function(l){var u=a.find(function(d){return d.id===l.targetAnchorId});u&&l.updateEndPoint({x:u.x,y:u.y})})},n.updateRect=function(i){var o=i.deltaX,a=i.deltaY,s=n.nodeModel,l=s.x,u=s.y,d=s.width,f=s.height,c=s.radius,h=s.PCTResizeInfo,g=n.nodeModel,p=g.minWidth,v=g.minHeight,y=g.maxWidth,b=g.maxHeight,C=n.index,R=p===y,j=v===b,D=n.getResize({index:C,deltaX:o,deltaY:a,width:d,height:f,PCTResizeInfo:h,pct:1,freezeWidth:R,freezeHeight:j});if(D.width<p||D.width>y||D.height<v||D.height>b){n.dragHandler.cancelDrag();return}n.updatePosition({deltaX:R?0:D.deltaX,deltaY:j?0:D.deltaY}),n.nodeModel.width=D.width,n.nodeModel.height=D.height,n.nodeModel.setProperties({nodeSize:{width:D.width,height:D.height}});var w={x:l,y:u,width:d,height:f,radius:c},A={x:n.nodeModel.x,y:n.nodeModel.y,width:n.nodeModel.width,height:n.nodeModel.height,radius:c};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:o,deltaY:a,beforeNode:w,afterNode:A})},n.updateEllipse=function(i){var o=i.deltaX,a=i.deltaY,s=n.nodeModel,l=s.rx,u=s.ry,d=s.x,f=s.y,c=s.PCTResizeInfo,h=n.index,g=n.nodeModel,p=g.minWidth,v=g.minHeight,y=g.maxWidth,b=g.maxHeight,C=p===y,R=v===b,j=l,D=u,w=n.getResize({index:h,deltaX:o,deltaY:a,width:j,height:D,PCTResizeInfo:c,pct:1/2,freezeWidth:C,freezeHeight:R});if(w.width<p/2||w.width>y/2||w.height<v/2||w.height>b/2){n.dragHandler.cancelDrag();return}n.updatePosition({deltaX:C?0:w.deltaX,deltaY:R?0:w.deltaY}),n.nodeModel.rx=w.width,n.nodeModel.ry=w.height,n.nodeModel.setProperties({nodeSize:{rx:w.width,ry:w.height}});var A={x:d,y:f},z={rx:w.width,ry:w.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:o,deltaY:a,beforeNode:ur(ur({},A),{rx:l,ry:u}),afterNode:z})},n.updateDiamond=function(i){var o=i.deltaX,a=i.deltaY,s=n.nodeModel,l=s.rx,u=s.ry,d=s.x,f=s.y,c=s.PCTResizeInfo,h=n.index,g=n.nodeModel,p=g.minWidth,v=g.minHeight,y=g.maxWidth,b=g.maxHeight,C=p===y,R=v===b,j=l,D=u,w=n.getResize({index:h,deltaX:o,deltaY:a,width:j,height:D,PCTResizeInfo:c,pct:1/2,freezeWidth:C,freezeHeight:R});if(w.width<p/2||w.width>y/2||w.height<v/2||w.height>b/2){n.dragHandler.cancelDrag();return}n.updatePosition({deltaX:C?0:w.deltaX,deltaY:R?0:w.deltaY}),n.nodeModel.rx=w.width,n.nodeModel.ry=w.height,n.nodeModel.setProperties({nodeSize:{rx:w.width,ry:w.height}});var A={x:d,y:f,rx:l,ry:u},z={rx:w.width,ry:w.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({deltaX:o,deltaY:a,beforeNode:A,afterNode:z})},n.eventEmit=function(i){var o=i.deltaX,a=i.deltaY,s=i.beforeNode,l=i.afterNode,u=n.nodeModel,d=u.id,f=u.modelType,c=u.type,h=ur({id:d,modelType:f,type:c},s),g=ur({id:d,modelType:f,type:c},l);n.graphModel.eventCenter.emit("node:resize",{preData:h,data:g,deltaX:o,deltaY:a,index:n.index,model:n.nodeModel})},n.onDragging=function(i){var o,a=i.deltaX,s=i.deltaY,l=n.graphModel.transformModel,u=n.nodeModel.modelType;o=Em(l.fixDeltaXY(a,s),2),a=o[0],s=o[1],u===De.RECT_NODE||u===De.HTML_NODE?n.updateRect({deltaX:a,deltaY:s}):u===De.ELLIPSE_NODE?n.updateEllipse({deltaX:a,deltaY:s}):u===De.DIAMOND_NODE&&n.updateDiamond({deltaX:a,deltaY:s})},n.onDragEnd=function(){var i=n.graphModel.gridSize,o=i===void 0?1:i,a=o*Math.round(n.nodeModel.x/o),s=o*Math.round(n.nodeModel.y/o);n.nodeModel.moveTo(a,s),n.updateEdgePointByAnchors()},n.index=t.index,n.nodeModel=t.model,n.graphModel=t.graphModel,n.dragHandler=new wm({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:1}),n}return e.prototype.getNodeEdges=function(t){for(var n=this.graphModel,i=n.edges,o=[],a=[],s=0;s<i.length;s++){var l=i[s];l.sourceNodeId===t?o.push(l):i[s].targetNodeId===t&&a.push(l)}return{sourceEdges:o,targetEdges:a}},e.prototype.render=function(){var t=this.props,n=t.x,i=t.y,o=t.index,a=t.model,s=a.getControlPointStyle();return I("g",{className:"lf-resize-control-".concat(o),children:I(Vt,ur({className:"lf-node-control",x:n,y:i},s,{onMouseDown:this.dragHandler.handleMouseDown}))})},e}(He),Cm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ua=function(){return ua=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ua.apply(this,arguments)},ka=function(r){Cm(e,r);function e(){var t=r.call(this)||this;return t.state={},t}return e.prototype.getResizeControl=function(){var t=this.props,n=t.model,i=t.graphModel,o=n.x,a=n.y,s=n.width,l=n.height,u={minX:o-s/2,minY:a-l/2,maxX:o+s/2,maxY:a+l/2},d=u.minX,f=u.minY,c=u.maxX,h=u.maxY,g=[{x:d,y:f},{x:c,y:f},{x:c,y:h},{x:d,y:h}];return g.map(function(p,v){return I(Sm,ua({index:v},p,{model:n,graphModel:i}))})},e.prototype.getGroupSolid=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return I(Vt,ua({},s,{x:n,y:i,width:o,height:a}))},e.prototype.render=function(){return I("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},e}(He),vc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){vc(e,r);function e(t,n){var i=r.call(this,t,n)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){r.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=r.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var n={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:n,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Hs);(function(r){vc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,n=t.model,i=t.graphModel;return I(ka,{model:n,graphModel:i})},e.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,n=t.model,i=t.graphModel.editConfigModel.isSilentMode;return I("g",{children:[this.getResizeShape(),n.isSelected&&!i?this.getControlGroup():""]})},e})(qs);var yc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ol=function(){return ol=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ol.apply(this,arguments)};(function(r){yc(e,r);function e(t,n){var i=r.call(this,t,n)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){r.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var t=r.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var n={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:n,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Bs);(function(r){yc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,n=t.model,i=t.graphModel;return I(ka,{model:n,graphModel:i})},e.prototype.getResizeShape=function(){var t=this.props.model,n=t.points,i=t.getNodeStyle();return I("g",{children:I(Ol,ol({},i,{points:n}))})},e.prototype.getShape=function(){var t=this.props,n=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return I("g",{children:[this.getResizeShape(),n&&!i?this.getControlGroup():""]})},e})(Vs);var mc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){mc(e,r);function e(t,n){var i=r.call(this,t,n)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){r.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=r.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var n={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:n,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Fs);(function(r){mc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,n=t.model,i=t.graphModel;return I(ka,{model:n,graphModel:i})},e.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,n=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return I("g",{children:[this.getResizeShape(),n&&!i?this.getControlGroup():""]})},e})(Js);var _c=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Om=function(r){_c(e,r);function e(t,n){var i=r.call(this,t,n)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){r.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=r.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var n={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:n,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e}(Ur),Am=function(r){_c(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,n=t.model,i=t.graphModel;return I(ka,{model:n,graphModel:i})},e.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,n=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return I("g",{children:[this.getResizeShape(),n&&!i?this.getControlGroup():""]})},e}(vr),bc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),da=function(){return da=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},da.apply(this,arguments)},rr=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ir=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},gd=500,vd=300,Mm=-1e4;(function(r){bc(e,r);function e(){var t=r.apply(this,ir([],rr(arguments),!1))||this;return t.isGroup=!0,t.isFolded=!1,t.unfoldedWidth=gd,t.unfoldedHeight=vd,t.childrenLastFoldStatus={},t}return e.prototype.initNodeData=function(t){var n=this;r.prototype.initNodeData.call(this,t);var i=[];Ud(t.children)&&(i=t.children),this.children=new Set(i),this.width=gd,this.height=vd,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=Mm,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout(function(){n.isFolded&&n.foldGroup(n.isFolded)})},e.prototype.getResizeOutlineStyle=function(){var t=r.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.foldGroup=function(t){var n=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=ir(ir([],rr(this.incoming.edges),!1),rr(this.outgoing.edges),!1);this.children.forEach(function(o){var a=n.graphModel.getElement(o);if(a){var s=a.isFolded;if(a.isGroup&&!a.isFolded&&a.foldGroup(t),a.isGroup&&!t){var l=n.childrenLastFoldStatus[o];l!==void 0&&l!==a.isFolded&&a.foldGroup(l)}n.childrenLastFoldStatus[o]=!!s,a.visible=!t;var u=a.incoming.edges,d=a.outgoing.edges;i=ir(ir(ir([],rr(i),!1),rr(u),!1),rr(d),!1)}}),this.foldEdge(t,i)}},e.prototype.getAnchorStyle=function(t){var n=r.prototype.getAnchorStyle.call(this,t);return n.stroke="transparent",n.fill="transparent",n.hover.fill="transparent",n.hover.stroke="transparent",n},e.prototype.foldEdge=function(t,n){var i=this;n.forEach(function(o,a){var s=o.id,l=o.sourceNodeId,u=o.targetNodeId,d=o.startPoint,f=o.endPoint,c=o.type,h=o.text,g=o.getProperties(),p={id:"".concat(s,"__").concat(a),sourceNodeId:l,targetNodeId:u,startPoint:d,endPoint:f,type:c,properties:g,text:h==null?void 0:h.value};o.virtual&&i.graphModel.deleteEdgeById(o.id);var v=i.graphModel.group.getNodeGroup(u);v||(v=i.graphModel.getNodeModelById(u));var y=i.graphModel.group.getNodeGroup(l);y||(y=i.graphModel.getNodeModelById(l)),t&&o.visible!==!1&&(i.children.has(l)||i.id===l?(p.startPoint=void 0,p.sourceNodeId=i.id):(p.endPoint=void 0,p.targetNodeId=i.id),(v.id!==i.id||y.id!==i.id)&&i.createVirtualEdge(p),o.visible=!1),!t&&o.visible===!1&&(v&&v.isGroup&&v.isFolded?(p.targetNodeId=v.id,p.endPoint=void 0,i.createVirtualEdge(p)):y&&y.isGroup&&y.isFolded?(p.sourceNodeId=y.id,p.startPoint=void 0,i.createVirtualEdge(p)):o.visible=!0)})},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var n=this.graphModel.addEdge(t);n.virtual=!0,n.text.editable=!1,n.isFoldedEdge=!0},e.prototype.isInRange=function(t){var n=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return n>=this.x-this.width/2&&o<=this.x+this.width/2&&i>=this.y-this.height/2&&a<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var n=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return{x:n>=this.x-this.width/2&&o<=this.x+this.width/2,y:i>=this.y-this.height/2&&a<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var t=this,n=r.prototype.getData.call(this);n.children=[],console.log("this.children",this.children),this.children.forEach(function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&n.children.push(o)});var i=n.properties;return i==null||delete i.groupAddable,i==null||delete i.isFolded,n},e.prototype.getHistoryData=function(){var t=r.prototype.getData.call(this);t.children=ir([],rr(this.children),!1),t.isGroup=!0;var n=t.properties;return n==null||delete n.groupAddable,n!=null&&n.isFolded&&(t.x=t.x+this.unfoldedWidth/2-this.foldedWidth/2,t.y=t.y+this.unfoldedHeight/2-this.foldedHeight/2),t},e.prototype.isAllowAppendIn=function(t){return console.info("_nodeData",t),!0},e.prototype.toBack=function(){this.zIndex--},e})(Om);(function(r){bc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props.model,n=t.resizable,i=t.properties;return n&&!i.isFolded?r.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,n=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.properties,u=t.getAddableOutlineStyle;if(!l.groupAddable)return null;var d=this.props.model.getNodeStyle().strokeWidth,f=d===void 0?0:d,c=u(),h=n+f+8,g=i+f+8;return _e("rect",da(da({},c),{width:h,height:g,x:o-h/2,y:a-g/2,rx:s,ry:s}))},e.prototype.getFoldIcon=function(){var t=this.props.model,n=t.x-t.width/2+5,i=t.y-t.height/2+5;if(!t.foldable)return null;var o=_e("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M ".concat(n+3,",").concat(i+6," ").concat(n+11,",").concat(i+6," M").concat(n+7,",").concat(i+2," ").concat(n+7,",").concat(i+10):"M ".concat(n+3,",").concat(i+6," ").concat(n+11,",").concat(i+6," ")});return _e("g",{},[_e("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return _e("g",{},[this.getAddableShape(),r.prototype.getResizeShape.call(this),this.getFoldIcon()])},e})(Am);var yd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Di=function(){return Di=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Di.apply(this,arguments)};function Tm(r){var e=function(n){yd(i,n);function i(o,a){o.id||(o.id="Flow_".concat(bm()));var s=Di(Di(Di({},{}),o.properties),{isDefaultFlow:!1});return o.properties=s,n.call(this,o,a)||this}return i.extendKey="SequenceFlowModel",i}(Yi),t=function(n){yd(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getStartArrow=function(){var o=this.props.model,a=o.properties.isDefaultFlow;return a?_e("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):_e("path",{d:""})},i.extendKey="SequenceFlowEdge",i}(Gi);return{type:"bpmn:sequenceFlow",view:t,model:e}}Tm();var md={width:40,height:40},_d={width:40,height:40},bd={width:100,height:80},fa={width:100,height:80},xd={width:100,height:80},Ed={width:100,height:80},wd={width:100,height:80},Sd={width:100,height:80},Cd={width:100,height:80},Od={width:100,height:80},Lt=function(){};Lt.ObjTree=function(){return this};Lt.ObjTree.VERSION="0.23";Lt.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Lt.ObjTree.prototype.attr_prefix="-";Lt.ObjTree.prototype.parseXML=function(r){var e;if(window.DOMParser){var t=new DOMParser,n=t.parseFromString(r,"application/xml");if(!n)return;e=n.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(r),e=t.documentElement);if(e){var i=this.parseDOM(e);return i}};Lt.ObjTree.prototype.parseHTTP=function(r,e,t){var n={};for(var i in e)n[i]=e[i];if(n.method||(typeof n.postBody>"u"&&typeof n.postbody>"u"&&typeof n.parameters>"u"?n.method="get":n.method="post"),t){n.asynchronous=!0;var o=this,a=t,s=n.onComplete;n.onComplete=function(d){var f;d&&d.responseXML&&d.responseXML.documentElement&&(f=o.parseDOM(d.responseXML.documentElement)),a(f,d),s&&s(d)}}else n.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){n.uri=r;var u=new HTTP.Request(n);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(r,n);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};Lt.ObjTree.prototype.parseDOM=function(r){if(r){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(r);if(this.__force_array[r.nodeName]&&(t=[t]),r.nodeType!==11){var n={};n[r.nodeName]=t,t=n}return t}};Lt.ObjTree.prototype.parseElement=function(r){if(r.nodeType!==7){if(r.nodeType===3||r.nodeType===4||r.nodeType===8){var e=r.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:r.nodeValue}var t=null,n={};if(r.attributes&&r.attributes.length){t={};for(var i=0;i<r.attributes.length;i++){var o=r.attributes[i].nodeName;if(typeof o=="string"){var a=r.attributes[i].nodeValue;try{a=JSON.parse(r.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=r.attributes[i].nodeValue}a!=null&&(o=this.attr_prefix+o,typeof n[o]>"u"&&(n[o]=0),n[o]++,this.addNode(t,o,n[o],a))}}}if(r.childNodes&&r.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<r.childNodes.length&&s;i++){var l=r.childNodes[i].nodeType;l===3||l===4||l===8||(s=!1)}if(s){t||(t="");for(var i=0;i<r.childNodes.length;i++)t+=r.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<r.childNodes.length;i++){var o=r.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(r.childNodes[i]);a&&(typeof n[o]>"u"&&(n[o]=0),n[o]++,this.addNode(t,o,n[o],a))}}}}else t===null&&(t={});return t}};Lt.ObjTree.prototype.addNode=function(r,e,t,n){this.__force_array[e]?(t===1&&(r[e]=[]),r[e][r[e].length]=n):t===1?r[e]=n:t===2?r[e]=[r[e],n]:r[e][r[e].length]=n};Lt.ObjTree.prototype.writeXML=function(r){var e=this.hash_to_xml(null,r);return this.xmlDecl+e};Lt.ObjTree.prototype.hash_to_xml=function(r,e){var t=[],n=[];for(var i in e)if(cs(e,i)){var o=e[i];i.charAt(0)!==this.attr_prefix?typeof o>"u"||o==null?t[t.length]="<".concat(i," />"):typeof o=="object"&&o.constructor===Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):n[n.length]=" ".concat(i.substring(1),'="').concat(this.xml_escape(o),'"')}var a=n.join(""),s=t.join("");return typeof r>"u"||r==null||(t.length>0?s.match(/\n/)?s="<".concat(r).concat(a,`>
`).concat(s,"</").concat(r,`>
`):s="<".concat(r).concat(a,">").concat(s,"</").concat(r,`>
`):s="<".concat(r).concat(a,` />
`)),s};Lt.ObjTree.prototype.array_to_xml=function(r,e){for(var t=[],n=0;n<e.length;n++){var i=e[n];typeof i>"u"||i==null?t[t.length]="<".concat(r," />"):typeof i=="object"&&i.constructor===Array?t[t.length]=this.array_to_xml(r,i):typeof i=="object"?t[t.length]=this.hash_to_xml(r,i):t[t.length]=this.scalar_to_xml(r,i)}return t.join("")};Lt.ObjTree.prototype.scalar_to_xml=function(r,e){return r==="#text"?this.xml_escape(e):"<".concat(r,">").concat(this.xml_escape(e),"</").concat(r,`>
`)};Lt.ObjTree.prototype.xml_escape=function(r){return r.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Nm=function(r){return new Lt.ObjTree().parseXML(r)};function xc(r){return Object.prototype.toString.call(r)}function Ad(r){return"  ".repeat(r)}function ca(r){return xc(r)==="[object Object]"?Object.keys(r).reduce(function(e,t){var n=t;return t.charAt(0)==="-"&&(n=t.substring(1)),e[n]=ca(r[t]),e},{}):Array.isArray(r)?r.map(function(e){return ca(e)}):r}function Pm(r){var e=r;try{typeof e!="string"&&(e=JSON.parse(r))}catch{e=JSON.stringify(ca(r)).replace(/"/g,"'")}return e}var Md=`	
`;function To(r,e,t){var n=Ad(t),i="",o=Md+n;if(e==="-json")return"";if(e==="#text")return o+r;if(e==="#cdata-section")return"".concat(o,"<![CDATA[").concat(r,"]]>");if(e==="#comment")return"".concat(o,"<!--").concat(r,"-->");if("".concat(e).charAt(0)==="-")return" ".concat(e.substring(1),'="').concat(Pm(r),'"');if(Array.isArray(r))i+=r.map(function(u){return To(u,e,t+1)}).join("");else if(xc(r)==="[object Object]"){var a=Object.keys(r),s="",l=r["-json"]?Md+Ad(t+1)+r["-json"]:"";i+="".concat(t===0?"":o,"<").concat(e),a.forEach(function(u){u.charAt(0)==="-"?s+=To(r[u],u,t+1):l+=To(r[u],u,t+1)}),i+=s+(l!==""?">".concat(l).concat(o,"</").concat(e,">"):" />")}else i+="".concat(o,"<").concat(e,">").concat(r.toString(),"</").concat(e,">");return i}function Dm(r){var e="";for(var t in r)e+=To(r[t],t,0);return e}var Rm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),al=function(){return al=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},al.apply(this,arguments)},Td=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},Tl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},an=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Dt;(function(r){r.START="bpmn:startEvent",r.END="bpmn:endEvent",r.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",r.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",r.BOUNDARY="bpmn:boundaryEvent",r.PARALLEL_GATEWAY="bpmn:parallelGateway",r.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",r.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",r.USER="bpmn:userTask",r.SYSTEM="bpmn:serviceTask",r.FLOW="bpmn:sequenceFlow",r.SUBPROCESS="bpmn:subProcess"})(Dt||(Dt={}));var Ec=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],Lm=["properties","startPoint","endPoint","pointsList"],ha={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},wc=function(r,e){var t=Object.keys(e||{});return t.forEach(function(n){if(r[n]){var i=e[n],o=i.in,a=i.out;o&&(r[n].in=o),a&&(r[n].out=a)}else r[n]=e[n]}),r},Ut={"bpmn:startEvent":{out:function(r){var e,t,n=r.properties;return((t=(e=Ut[n.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,r))||{}}},"bpmn:intermediateCatchEvent":{out:function(r){var e,t,n=r.properties;return((t=(e=Ut[n.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,r))||{}}},"bpmn:intermediateThrowEvent":{out:function(r){var e,t,n=r.properties;return((t=(e=Ut[n.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,r))||{}}},"bpmn:boundaryEvent":{out:function(r){var e,t,n=r.properties;return((t=(e=Ut[n.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,r))||{}}},"bpmn:sequenceFlow":{out:function(r){var e=r.properties,t=e.expressionType,n=e.condition;return n?t==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(n,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(n,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(r){var e=r.properties,t=e.timerType,n=e.timerValue,i=e.definitionId,o=function(){return"<bpmn:".concat(t,' xsi:type="bpmn:tFormalExpression">').concat(n,"</bpmn:").concat(t,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(i,'"').concat(t&&n?">".concat(o(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(r,e){var t,n,i,o,a=r,s=e["-id"],l="",u="";try{for(var d=Tl(Object.keys(e)),f=d.next();!f.done;f=d.next()){var c=f.value;c.includes("bpmn:")&&(i=Ot(c.split(":"),2),l=i[1],u=(o=e[c])===null||o===void 0?void 0:o["#text"])}}catch(h){t={error:h}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(r,e){var t,n="",i="";return e["#cdata-section"]?(i="cdata",n=((t=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))===null||t===void 0?void 0:t[1])||""):e["#text"]&&(i="normal",n=e["#text"]),{"-condition":n,"-expressionType":i}}}};function km(r){var e=r??{},t=e.retainedAttrsFields,n=e.excludeFields,i=e.transformer,o=new Set(an(an([],Ot(Lm),!1),Ot(t||[]),!1)),a={in:new Set(an(an([],Ot(ha.in),!1),Ot((n==null?void 0:n.in)||[]),!1)),out:new Set(an(an([],Ot(ha.out),!1),Ot((n==null?void 0:n.out)||[]),!1))};return Ut=wc(Ut,i),function(s){var l=s.nodes,u=s.edges;function d(f,c){var h,g;if((f==null?void 0:f.flag)!==1){var p;if((p=Ut[f.type])&&p.out){var v=p.out(f),y=Object.keys(v);y.length>0&&y.forEach(function(z){f[z]=v[z]})}f!=null&&f.children&&(f.children=f.children.map(function(z){var Z=l.find(function(oe){return oe.id===z})||u.find(function(oe){return oe.id===z});return Z||{}}));var b={};if(typeof f=="string")return f;if(Array.isArray(f))return f.map(function(z){return d(z,"")}).filter(function(z){return z!=null});try{for(var C=Tl(Object.entries(f)),R=C.next();!R.done;R=C.next()){var j=Ot(R.value,2),D=j[0],w=j[1];if((w==null?void 0:w.flag)===1)return;var A=[c,D].filter(function(z){return z}).join(".");a.out.has(A)||(typeof w!="object"?D.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(D)?b[D]=w:b["-".concat(D)]=w:o.has(A)?b["-".concat(D)]=d(w,A):b[D]=d(w,A))}}catch(z){h={error:z}}finally{try{R&&!R.done&&(g=C.return)&&g.call(C)}finally{if(h)throw h.error}}return b}}return d(s,"")}}function pa(r){var e,t,n={};try{for(var i=Tl(Object.entries(r)),o=i.next();!o.done;o=i.next()){var a=Ot(o.value,2),s=a[0],l=a[1];s.indexOf("-")===0?n[s.substring(1)]=ca(l):typeof l=="string"?n[s]=l:Object.prototype.toString.call(l)==="[object Object]"?n[s]=pa(l):Array.isArray(l)?n[s]=l.map(function(u){return pa(u)}):n[s]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function jm(r,e,t){var n,i=new Map,o=km(t)(e);o.nodes.forEach(function(s){var l=s["-id"],u=s["-type"],d=s.text,f=s.children,c=Td(s,["-id","-type","text","children"]),h={"-id":l};d!=null&&d["-value"]&&(h["-name"]=d["-value"]),c["-json"]&&(h["-json"]=c["-json"]),c["-properties"]&&Object.assign(h,c["-properties"]),f&&(h.children=f),r[u]||(r[u]=[]),r[u].push(h),i.set(l,h)});var a=o.edges.map(function(s){var l=s["-id"],u=s["-sourceNodeId"],d=s["-targetNodeId"],f=s.text,c=Td(s,["-id","-sourceNodeId","-targetNodeId","text"]),h=i.get(d);h["bpmn:incoming"]||(h["bpmn:incoming"]=[]),h["bpmn:incoming"].push(l);var g={"-id":l,"-sourceRef":u,"-targetRef":d};return f!=null&&f["-value"]&&(g["-name"]=f["-value"]),c["-json"]&&(g["-json"]=c["-json"]),c["-properties"]&&Object.assign(g,c["-properties"]),g});return e.edges.forEach(function(s){var l=s.sourceNodeId,u=s.id,d=i.get(l);d["bpmn:outgoing"]||(d["bpmn:outgoing"]=[]),d["bpmn:outgoing"].push(u)}),(n=r["bpmn:subProcess"])===null||n===void 0||n.forEach(function(s){var l={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},u=[];s.children.forEach(function(p){var v,y=i.get(p["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(C){y[C]&&y[C].forEach(function(R){l[C].add(R)})});var b=(v=r[p["-type"]])===null||v===void 0?void 0:v.findIndex(function(C){return C["-id"]===p["-id"]});b>=0&&r[p["-type"]].splice(b,1),i.delete(p["-id"]),s[p["-type"]]||(s[p["-type"]]=[]),s[p["-type"]].push(y)});var d=l["bpmn:incoming"],f=l["bpmn:outgoing"];f.forEach(function(p){d.has(p)&&u.push(p)});for(var c=function(p){var v=a.findIndex(function(y){return y["-id"]===u[p]});v>=0?(s["bpmn:sequenceFlow"]||(s["bpmn:sequenceFlow"]=[]),s["bpmn:sequenceFlow"].push(a[v]),a.splice(v,1)):p++,h=p},h,g=0;g<u.length;)c(g),g=h;delete s.children}),r[Dt.FLOW]=a,r}function Im(r,e){r["bpmndi:BPMNEdge"]=e.edges.map(function(t){var n,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((n=t.text)===null||n===void 0)&&n.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),r["bpmndi:BPMNShape"]=e.nodes.map(function(t){var n,i=t.id,o=100,a=80,s=t.x,l=t.y,u=Ft.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var d={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((n=t.text)===null||n===void 0)&&n.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),d})}var Bm=["bpmn:incoming","bpmn:outgoing"];function Hm(r,e){var t=[],n=[],i=new Map,o=e??{},a=o.transformer,s=o.excludeFields,l={in:new Set(an(an([],Ot(ha.in),!1),Ot((s==null?void 0:s.in)||[]),!1)),out:new Set(an(an([],Ot(ha.out),!1),Ot((s==null?void 0:s.out)||[]),!1))};Ut=wc(Ut,a);var u=r["bpmn:definitions"];if(u){var d=u["bpmn:process"];(function(c,h){h.forEach(function(g){try{Object.keys(c).forEach(function(p){try{g(p)}catch(v){console.error(v)}})}catch(p){console.error(p)}})})(d,[function(c){function h(p){p["-children"]||(p["-children"]=[]),Object.keys(p).forEach(function(v){var y;v.indexOf("bpmn:")===0&&!Bm.includes(v)&&(d[v]||(d[v]=[]),!Array.isArray(d[v])&&(d[v]=[d[v]]),Array.isArray(p[v])?(y=d[v]).push.apply(y,an([],Ot(p[v]),!1)):d[v].push(p[v]),Array.isArray(p[v])?p[v].forEach(function(b){!v.includes("Flow")&&p["-children"].push(b["-id"])}):!v.includes("Flow")&&p["-children"].push(p[v]["-id"]),delete p[v])})}if(c==="bpmn:subProcess"){var g=d[c];Array.isArray(g)?g.forEach(function(p){c==="bpmn:subProcess"&&h(p)}):h(g)}},function(c){var h=function(p){Object.keys(p).forEach(function(v){var y,b;if(v.includes("bpmn:")){var C={};Ut[v]&&Ut[v].in?(C=(b=(y=Ut[v]).in)===null||b===void 0?void 0:b.call(y,v,Gd.cloneDeep(p[v])),delete p[v]):g(p[v]);var R=void 0;(R=Reflect.ownKeys(C)).length>0&&R.forEach(function(j){Reflect.set(p,j,C[j])})}})};function g(p){i.set(p["-id"],p),Array.isArray(p)?p.forEach(function(v){g(v)}):typeof p=="object"&&h(p)}g(d[c])},function(c){if(c.indexOf("bpmn:")===0){var h=d[c];if(c==="bpmn:sequenceFlow"){var g=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=zm(h,g)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(c==="bpmn:boundaryEvent"){var v=d[c],y=function(b){var C=b["-attachedToRef"],R=i.get(C);R["-boundaryEvents"]||(R["-boundaryEvents"]=[]),R["-boundaryEvents"].push(b["-id"])};Array.isArray(v)?v.forEach(function(b){y(b)}):y(v)}t=t.concat(Fm(h,p,c))}}}])}var f=function(c,h,g){Object.keys(c).forEach(function(p){var v=g?"".concat(g,".").concat(p):p;h.has(v)?delete c[p]:typeof c[p]=="object"&&f(c[p],h,v)})};return t.forEach(function(c){var h,g;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(g=e==null?void 0:e.mapping)===null||g===void 0?void 0:g.in,v=c.type;p[v]&&(c.type=p[v])}f(c,l.in,"")}),n.forEach(function(c){var h,g;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(g=e==null?void 0:e.mapping)===null||g===void 0?void 0:g.in,v=c.type;p[v]&&(c.type=p[v])}f(c,l.in,"")}),{nodes:t,edges:n}}function Fm(r,e,t){var n=[];if(Array.isArray(r))r.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=Nd(s,t,a);n.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===r["-id"]}):i=e;var o=Nd(i,t,r);n.push(o)}return n}function Nd(r,e,t){var n=Number(r["dc:Bounds"]["-x"]),i=Number(r["dc:Bounds"]["-y"]),o=t["-children"],a=t["-name"],s=Ft.shapeConfigMap.get(e);s&&(n+=s.width/2,i+=s.height/2);var l={};Object.entries(t).forEach(function(c){var h=Ot(c,2),g=h[0],p=h[1];Ec.includes(g)||(l[g]=p)}),l=pa(l);var u;if(a&&(u={x:n,y:i,value:a},r["bpmndi:BPMNLabel"]&&r["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=r["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(d["-x"])+Number(d["-width"])/2,u.y=Number(d["-y"])+Number(d["-height"])/2}var f={id:r["-bpmnElement"],type:e,x:n,y:i,properties:l};return o&&(f.children=o),u&&(f.text=u),f}function zm(r,e){var t=[];if(Array.isArray(r))r.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push(Pd(o,i))});else{var n=void 0;Array.isArray(e)?n=e.find(function(i){return i["-bpmnElement"]===r["-id"]}):n=e,t.push(Pd(n,r))}return t}function Pd(r,e){var t,n=e["-name"]?"".concat(e["-name"]):"";if(n){var i=r["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;n.split(`
`).forEach(function(u){o<u.length&&(o=u.length)}),t={value:n,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a={};Object.entries(e).forEach(function(u){var d=Ot(u,2),f=d[0],c=d[1];Ec.includes(f)||(a[f]=c)}),a=pa(a);var s=r["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),l={id:e["-id"],type:Dt.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(l.text=t),l}var Ft=function(){function r(e){var t=e.lf,n=this;this.adapterOut=function(i,o){var a,s,l=al({},n.processAttributes);jm(l,i,o);var u={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};Im(u,i);var d=n.definitionAttributes;d["bpmn:process"]=l,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":u};var f={"bpmn:definitions":d};if(!((a=o==null?void 0:o.mapping)===null||a===void 0)&&a.out){var c=(s=o==null?void 0:o.mapping)===null||s===void 0?void 0:s.out,h=function(g){Array.isArray(g)&&g.forEach(function(p){return h(p)}),typeof g=="object"&&Object.keys(g).forEach(function(p){var v;(v=c[p])?(g[v]=Gd.cloneDeep(g[p]),delete g[p],h(g[v])):h(g[p])})};h(f)}return f},this.adapterIn=function(i,o){if(i)return Hm(i,o)},t.adapterIn=this.adapterIn,t.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return r.prototype.setCustomShape=function(e,t){r.shapeConfigMap.set(e,t)},r.pluginName="bpmn-adapter",r.shapeConfigMap=new Map,r}();Ft.shapeConfigMap.set(Dt.START,{width:md.width,height:md.height});Ft.shapeConfigMap.set(Dt.END,{width:_d.width,height:_d.height});Ft.shapeConfigMap.set(Dt.INTERMEDIATE_CATCH,{width:fa.width,height:fa.height});Ft.shapeConfigMap.set(Dt.INTERMEDIATE_THROW,{width:fa.width,height:fa.height});Ft.shapeConfigMap.set(Dt.BOUNDARY,{width:bd.width,height:bd.height});Ft.shapeConfigMap.set(Dt.PARALLEL_GATEWAY,{width:xd.width,height:xd.height});Ft.shapeConfigMap.set(Dt.INCLUSIVE_GATEWAY,{width:Ed.width,height:Ed.height});Ft.shapeConfigMap.set(Dt.EXCLUSIVE_GATEWAY,{width:wd.width,height:wd.height});Ft.shapeConfigMap.set(Dt.SYSTEM,{width:Sd.width,height:Sd.height});Ft.shapeConfigMap.set(Dt.USER,{width:Cd.width,height:Cd.height});Ft.shapeConfigMap.set(Dt.SUBPROCESS,{width:Od.width,height:Od.height});(function(r){Rm(e,r);function e(t){var n=r.call(this,t)||this;n.adapterXmlIn=function(a){var s=Nm(a);return n.adapterIn(s,n.props)},n.adapterXmlOut=function(a){var s=n.adapterOut(a,n.props);return Dm(s)};var i=t.lf,o=t.props;return i.adapterIn=n.adapterXmlIn,i.adapterOut=n.adapterXmlOut,n.props=o,n}return e.pluginName="BPMNAdapter",e})(Ft);function Xm(r,e,t){var n=e.x,i=e.y,o=r.x,a=r.y,s=o-n,l=a-i,u=s*Math.cos(t)-l*Math.sin(t),d=s*Math.sin(t)+l*Math.cos(t),f=u+n,c=d+i;return{x:f,y:c}}var Wm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ga=function(){return ga=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ga.apply(this,arguments)},$m=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ym=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};(function(r){Wm(e,r);function e(){var t=r.apply(this,Ym([],$m(arguments),!1))||this;return t.childrenPositionMap=new Map,t.onNodeRotate=function(n){var i=n.model,o=t.props,a=o.model,s=o.graphModel,l=a.transformWithContainer,u=a.isRestrict,d=t.childrenPositionMap;if(!(!l||u)&&i.id===a.id){var f={x:a.x,y:a.y};Qe(Array.from(a.children),function(c){var h=s.getNodeModelById(c);if(h){var g={x:h.x,y:h.y};d.has(h.id)?g=d.get(h.id):d.set(h.id,g);var p=i.rotate*(180/Math.PI);p<0&&(p+=360);var v=p*(Math.PI/180),y=Xm(g,f,v);h.moveTo(y.x,y.y),h.rotate=i.rotate}})}},t.onNodeResize=function(n){var i=n.deltaX,o=n.deltaY,a=n.index,s=n.model,l=n.preData,u=t.props,d=u.model,f=u.graphModel,c=d.transformWithContainer,h=d.isRestrict;if(!(!c||h)&&s.id===d.id){var g=l.properties,p=g||{},v=p.width,y=p.height;Qe(Array.from(d.children),function(b){var C=f.getNodeModelById(b);if(C){var R=C.width/v*i,j=C.height/y*o;ec({deltaX:R,deltaY:j,index:a,nodeModel:C,graphModel:f,cancelCallback:function(){}})}})}},t.onNodeMouseMove=function(){},t.graphRendered=function(){var n=t.props.model;n.isCollapsed&&n.toggleCollapse(!0)},t}return e.prototype.componentDidMount=function(){r.prototype.componentDidMount.call(this);var t=this.props.graphModel.eventCenter;t.on("node:rotate",this.onNodeRotate),t.on("node:resize",this.onNodeResize),t.on("node:mousemove",this.onNodeMouseMove),t.on("graph:rendered",this.graphRendered)},e.prototype.componentWillUnmount=function(){r.prototype.componentWillUnmount.call(this);var t=this.props.graphModel.eventCenter;t.off("node:rotate",this.onNodeRotate),t.off("node:resize",this.onNodeResize),t.off("node:mousemove",this.onNodeMouseMove),t.off("graph:rendered",this.graphRendered)},e.prototype.getNodesInGroup=function(t,n){var i=this,o=[];return t.isGroup&&Qe(Array.from(t.children),function(a){o.push(a);var s=n.getNodeModelById(a);s!=null&&s.isGroup&&(o=o.concat(i.getNodesInGroup(s,n)))}),o},e.prototype.getResizeControl=function(){var t=this.props.model,n=t.resizable,i=t.isCollapsed,o=n&&!i;return o?r.prototype.getResizeControl.call(this):null},e.prototype.getAppendAreaShape=function(){var t=this.props.model,n=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.groupAddable;if(!l)return null;var u=t.getNodeStyle().strokeWidth,d=u===void 0?0:u,f=t.getAddableOutlineStyle(),c=n+d+8,h=i+d+8;return _e("rect",ga(ga({},f),{width:c,height:h,x:o-c/2,y:a-h/2,rx:s,ry:s}))},e.prototype.getCollapseIcon=function(t,n){return"M ".concat(t+3,",").concat(n+6," ").concat(t+11,",").concat(n+6," M").concat(t+7,",").concat(n+2," ").concat(t+7,",").concat(n+10)},e.prototype.getExpandIcon=function(t,n){return"M ".concat(t+3,",").concat(n+6," ").concat(t+11,",").concat(n+6," ")},e.prototype.getOperateIcon=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=n-o/2+10,l=i-a/2+10;if(!t.collapsible)return null;var u=t!=null&&t.isCollapsed?this.getCollapseIcon(s,l):this.getExpandIcon(s,l),d=_e("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:u});return _e("g",{},[_e("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:s,y:l,onClick:function(){t.toggleCollapse(!t.isCollapsed)}}),d])},e.prototype.getShape=function(){return _e("g",{},[this.getAppendAreaShape(),r.prototype.getShape.call(this),this.getOperateIcon()])},e})(vr);var Um=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),va=function(){return va=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},va.apply(this,arguments)},os=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ar=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},li=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Gm=400,Vm=230,Km=80,qm=60,Zm=-1e4;(function(r){Um(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.isGroup=!0,i.isRestrict=!1,i.autoResize=!1,i.collapsible=!0,i.isCollapsed=!1,i.groupAddable=!1,i.transformWithContainer=!1,i.childrenLastCollapseStateDict=new Map,i.childrenLastCollapseStateDict=new Map,i.initNodeData(t),i.setAttributes(),i}return e.prototype.initNodeData=function(t){var n;r.prototype.initNodeData.call(this,t);var i=(n=t.properties)!==null&&n!==void 0?n:{},o=i.children,a=i.width,s=i.height,l=i.collapsedWidth,u=i.collapsedHeight,d=i.collapsible,f=i.isCollapsed,c=i.zIndex,h=i.isRestrict,g=i.autoResize,p=i.autoToFront,v=i.transformWithContainer;this.children=o?new Set(o):new Set,this.zIndex=c??Zm,this.isCollapsed=f??!1;var y=a??Gm,b=s??Vm;this.width=y,this.height=b,this.expandWidth=y,this.expandHeight=b,this.collapsedWidth=l??Km,this.collapsedHeight=u??qm,this.isRestrict=h??!1,this.transformWithContainer=v??!1,this.autoResize=g??!1,this.collapsible=d??!0,this.autoToFront=p??!1,this.text.editable=!1,this.text.draggable=!1},e.prototype.setAttributes=function(){r.prototype.setAttributes.call(this)},e.prototype.getData=function(){var t=this,n=r.prototype.getData.call(this),i=[];return Qe(Array.from(this.children),function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&i.push(o)}),n.children=i,n.properties&&(n.properties.children=i,n.properties.isCollapsed=this.isCollapsed),n},e.prototype.getNodesInGroup=function(t){var n=[];return t.isGroup&&Qe(Array.from(t.children),function(i){n.push(i)}),n},e.prototype.getMoveDistance=function(t,n,i){i===void 0&&(i=!1);var o=Ar(r.prototype.getMoveDistance.call(this,t,n,i),2),a=o[0],s=o[1],l=this.getNodesInGroup(this);return this.graphModel.moveNodes(l,t,n,i),[a,s]},e.prototype.getHistoryData=function(){var t=r.prototype.getHistoryData.call(this);t.children=Array.from(this.children),t.isGroup=!0;var n=this,i=n.x,o=n.y,a=n.collapsedWidth,s=n.collapsedHeight,l=n.expandWidth,u=n.expandHeight,d=n.isCollapsed;return d&&(t.x=i+l/2-a/2,t.y=o+u/2-s/2,t.text&&(t.text.x=t.text.x+l/2-a/2,t.text.y=t.text.y+u/2-s/2)),t},e.prototype.toggleCollapse=function(t){var n=this,i=!!t;this.isCollapsed=i,i?this.collapse():this.expand();var o=li(li([],Ar(this.incoming.edges),!1),Ar(this.outgoing.edges),!1),a=Array.from(this.children);Qe(a,function(s){var l,u,d=n.graphModel.elementsModelMap.get(s);if(d){var f=d.isCollapsed;if(d.isGroup){var c=d;if(c.isCollapsed||c.toggleCollapse(t),!t){var h=(l=n.childrenLastCollapseStateDict)===null||l===void 0?void 0:l.get(s);h!==void 0&&h!==d.isCollapsed&&c.toggleCollapse(h)}}if((u=n.childrenLastCollapseStateDict)===null||u===void 0||u.set(s,!!f),d.visible=!t,d.BaseType===ut.NODE){var g=d.incoming.edges,p=d.outgoing.edges;o=li(li(li([],Ar(o),!1),Ar(g),!1),Ar(p),!1)}}}),this.collapseEdge(i,o)},e.prototype.collapse=function(){var t=this,n=t.x,i=t.y,o=t.text,a=t.width,s=t.height,l=t.collapsedWidth,u=t.collapsedHeight;this.x=n-a/2+l/2,this.y=i-s/2+u/2,this.text.x=o.x-a/2+l/2,this.text.y=o.y-s/2+u/2,this.expandWidth=a,this.expandHeight=s,this.width=l,this.height=u},e.prototype.expand=function(){var t=this,n=t.x,i=t.y,o=t.text,a=t.expandWidth,s=t.expandHeight,l=t.collapsedWidth,u=t.collapsedHeight;this.width=a,this.height=s,this.x=n+this.width/2-l/2,this.y=i+this.height/2-u/2,this.text.x=o.x+this.width/2-l/2,this.text.y=o.y+this.height/2-u/2},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var n=this.graphModel.addEdge(t);n.virtual=!0,n.text.editable=!1,n.isCollapsedEdge=!0},e.prototype.collapseEdge=function(t,n){var i=this,o=this.graphModel;Qe(n,function(a,s){var l,u=a.getData(),d=u.targetNodeId,f=u.sourceNodeId,c=va(va({},u),{id:"".concat(u.id,"__").concat(s),text:(l=u.text)===null||l===void 0?void 0:l.value});a.virtual&&o.deleteEdgeById(a.id);var h=o.dynamicGroup.getGroupByNodeId(d);h||(h=o.getNodeModelById(d));var g=o.dynamicGroup.getGroupByNodeId(f);g||(g=o.getNodeModelById(f)),t&&a.visible&&(i.children.has(f)||i.id===f?(c.startPoint=void 0,c.sourceNodeId=i.id):(c.endPoint=void 0,c.targetNodeId=i.id),(h.id!==i.id||g.id!==i.id)&&i.createVirtualEdge(c),a.visible=!1),!t&&!a.visible&&(h&&h.isGroup&&h.isCollapsed?(c.targetNodeId=h.id,c.endPoint=void 0,i.createVirtualEdge(c)):g&&g.isGroup&&g.isCollapsed?(c.sourceNodeId=g.id,c.startPoint=void 0,i.createVirtualEdge(c)):a.visible=!0)})},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.setAllowAppendChild=function(t){this.groupAddable=t},e.prototype.addChild=function(t){this.children.add(t);var n=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:n})},e.prototype.removeChild=function(t){this.children.delete(t);var n=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:n})},e.prototype.toBack=function(){this.zIndex--},e.prototype.getResizeOutlineStyle=function(){var t=r.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.getAnchorStyle=function(){var t=r.prototype.getAnchorStyle.call(this);return t.stroke="transparent",t.fill="transparent",t.hover&&(t.hover.fill="transparent",t.hover.stroke="transparent"),t},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},os([F],e.prototype,"isCollapsed",void 0),os([F],e.prototype,"groupAddable",void 0),os([F],e.prototype,"transformWithContainer",void 0),e})(Ur);var Dd;(function(r){r.HORIZONTAL="horizontal",r.VERTICAL="vertical"})(Dd||(Dd={}));var Jm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ri=function(){return Ri=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ri.apply(this,arguments)},Qm=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},e_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},t_=function(r){Jm(e,r);function e(t){var n=r.call(this,t)||this;n.textRef=wa(),n.setHoverOn=function(){var l=n.props.element;l.isDragging||n.state.isHovered||(n.setState({isHovered:!0}),l.setHovered(!0))},n.setHoverOff=function(){var l=n.props.element;n.state.isHovered&&(n.setState({isHovered:!1}),l.setHovered(!1))},n.handleMouseDown=function(l){var u,d=n.props,f=d.label,c=d.graphModel,h=c.editConfigModel.nodeTextDraggable;((u=f.draggable)!==null&&u!==void 0?u:h)&&!n.state.isDragging&&!n.state.isEditing&&n.stepDrag.handleMouseDown(l)},n.handleMouseUp=function(l){n.state.isDragging&&n.stepDrag.handleMouseUp(l)},n.handleDragging=function(l){var u=l.deltaX,d=l.deltaY;n.state.isDragging||n.setState({isDragging:!0});var f=n.props,c=f.label,h=f.graphModel,g=h.transformModel,p=e_(g.fixDeltaXY(u,d),2),v=p[0],y=p[1];n.setElementModelLabelInfo({x:c.x+v,y:c.y+y}),h.eventCenter.emit("label:drag",{data:c.getData(),model:c})},n.handleDragEnd=function(){n.setState({isDragging:!1})},n.handleClick=function(l){var u=n.props,d=u.label,f=u.element,c=u.graphModel;f.setSelected(!n.state.isSelected),n.setState({isSelected:!n.state.isSelected}),n.setElementModelLabelInfo({isSelected:!0}),c.eventCenter.emit("label:click",{data:d.getData(),e:l,model:f})},n.handleDbClick=function(l){var u=n.props,d=u.label,f=u.element,c=u.graphModel;if(c.eventCenter.emit("label:dblclick",{data:d.getData(),e:l,model:f}),!d.editable){f.setSelected(!0);return}if(f.setSelected(),f.setElementState(We.TEXT_EDIT),n.setState({isEditing:!0}),n.textRef.current){n.textRef.current.contentEditable="true",n.textRef.current.focus();var h=document.createRange(),g=window.getSelection();h.selectNodeContents(n.textRef.current),h.collapse(!1),g==null||g.removeAllRanges(),g==null||g.addRange(h)}},n.handleBlur=function(l){var u=n.props,d=u.label,f=u.element,c=u.graphModel.eventCenter;c.emit("label:blur",{e:l,model:f,data:d.getData(),element:n.textRef.current}),n.setState({isDragging:!1,isHovered:!1,isSelected:!1})},n.handleInput=function(l){var u=n.props,d=u.label,f=u.graphModel;f.eventCenter.emit("label:input",{e:l,data:d.getData()})},n.reCalcLabelSize=function(){};var i=t.label,o=t.graphModel,a=o.gridSize,s=o.eventCenter;return n.stepDrag=new Jt({onDragging:n.handleDragging,onDragEnd:n.handleDragEnd,step:a,eventType:"LABEL",model:i,eventCenter:s}),n.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},n}return e.prototype.setElementModelLabelInfo=function(t){var n=this.props,i=n.label,o=n.element,a=n.graphModel,s=o.properties._label,l=s,u=zc(l,function(c){return c.id===i.id}),d=l[u];l[u]=Ri(Ri({},d),t);var f=a.getElement(o.id);f==null||f.setProperty("_label",l)},e.prototype.componentDidMount=function(){var t=this,n=this.props,i=n.label,o=n.element,a=n.graphModel;a.eventCenter.on("blank:click,node:click,edge:click,label:click",function(s){var l,u,d,f,c=s.data;if(((c==null?void 0:c.type)!=="label"||c.type==="label"&&c.id!==i.id||t.state.isSelected)&&t.setState({isSelected:!1}),((c==null?void 0:c.type)!=="label"||c.type=="label"&&c.id!==i.id)&&t.state.isEditing){t.setState({isEditing:!1});var h=(u=(l=t.textRef.current)===null||l===void 0?void 0:l.innerText)!==null&&u!==void 0?u:"",g=(f=(d=t.textRef.current)===null||d===void 0?void 0:d.innerHTML)!==null&&f!==void 0?f:"";t.setElementModelLabelInfo({value:h,content:g,isSelected:!1}),o.setElementState(We.DEFAULT)}((c==null?void 0:c.type)!=="label"||c.type=="label"&&c.id!==i.id)&&t.textRef.current&&(t.textRef.current.contentEditable="false")})},e.prototype.componentDidUpdate=function(){},e.prototype.componentWillUnmount=function(){var t=this.props.graphModel;t.eventCenter.off("blank:click,node:click,edge:click")},e.prototype.render=function(){var t,n=this.props,i=n.label,o=n.element,a=n.graphModel,s=this.state,l=s.isDragging,u=s.isHovered,d=s.isSelected,f=s.isEditing,c=a.transformModel,h=c.getTransformStyle().transform,g=i.id,p=i.x,v=i.y,y=i.zIndex,b=i.vertical,C=i.style,R=i.rotate,j=i.content,D=i.labelWidth,w=i.textOverflowMode,A=D??(o.BaseType==="node"?o.width-20:80),z={left:"".concat(p-A/2,"px"),top:"".concat(v-10,"px"),width:"".concat(A,"px"),height:"20px",zIndex:y??1,transform:R?"".concat(h," rotate(").concat(R,"deg)"):"".concat(h," rotate(").concat(b?-.25:0,"turn)")};return I("div",{id:"element-container-".concat(g),className:Ws("lf-label-editor-container"),style:z,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:I("div",{ref:this.textRef,id:"editor-container-".concat(g),className:Ws("lf-label-editor",(t={"lf-label-editor-dragging":l,"lf-label-editor-editing":f,"lf-label-editor-hover":!f&&(u||d)},t["lf-label-editor-".concat(w)]=!f,t)),onInput:this.handleInput,style:Ri({maxWidth:"".concat(A,"px"),boxSizing:"border-box",display:"inline-block",background:f||o.BaseType==="edge"?"#fff":"transparent"},C),dangerouslySetInnerHTML:{__html:j}})})},e=Qm([Pt],e),e}(He),Yt=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},n_=Un,r_=function(){function r(e,t,n){var i;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=t,this.graphModel=n,this.id=(i=e.id)!==null&&i!==void 0?i:n_(),this.initLabelData(e)}return r.prototype.initLabelData=function(e){rt(this,e)},r.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:on(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},Yt([F],r.prototype,"x",void 0),Yt([F],r.prototype,"y",void 0),Yt([F],r.prototype,"content",void 0),Yt([F],r.prototype,"value",void 0),Yt([F],r.prototype,"rotate",void 0),Yt([F],r.prototype,"style",void 0),Yt([F],r.prototype,"zIndex",void 0),Yt([F],r.prototype,"vertical",void 0),Yt([F],r.prototype,"editable",void 0),Yt([F],r.prototype,"draggable",void 0),Yt([F],r.prototype,"labelWidth",void 0),Yt([F],r.prototype,"textOverflowMode",void 0),r}(),Sc={exports:{}};(function(r){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(e){if("Element"in e){var t="classList",n="prototype",i=e.Element[n],o=Object,a=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(g){for(var p=0,v=this.length;p<v;p++)if(p in this&&this[p]===g)return p;return-1},l=function(g,p){this.name=g,this.code=DOMException[g],this.message=p},u=function(g,p){if(p==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(p))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(g,p)},d=function(g){for(var p=a.call(g.getAttribute("class")||""),v=p?p.split(/\s+/):[],y=0,b=v.length;y<b;y++)this.push(v[y]);this._updateClassName=function(){g.setAttribute("class",this.toString())}},f=d[n]=[],c=function(){return new d(this)};if(l[n]=Error[n],f.item=function(g){return this[g]||null},f.contains=function(g){return g+="",u(this,g)!==-1},f.add=function(){var g=arguments,p=0,v=g.length,y,b=!1;do y=g[p]+"",u(this,y)===-1&&(this.push(y),b=!0);while(++p<v);b&&this._updateClassName()},f.remove=function(){var g=arguments,p=0,v=g.length,y,b=!1,C;do for(y=g[p]+"",C=u(this,y);C!==-1;)this.splice(C,1),b=!0,C=u(this,y);while(++p<v);b&&this._updateClassName()},f.toggle=function(g,p){g+="";var v=this.contains(g),y=v?p!==!0&&"remove":p!==!1&&"add";return y&&this[y](g),p===!0||p===!1?p:!v},f.toString=function(){return this.join(" ")},o.defineProperty){var h={get:c,enumerable:!0,configurable:!0};try{o.defineProperty(i,t,h)}catch(g){g.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,t,h))}}else o[n].__defineGetter__&&i.__defineGetter__(t,c)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{new Blob;return}catch{}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(i){var o=function(w){return Object.prototype.toString.call(w).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},s=function(A,z,Z){this.data=A,this.size=A.length,this.type=z,this.encoding=Z},l=a.prototype,u=s.prototype,d=i.FileReaderSync,f=function(w){this.code=this[this.name=w]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=c.length,g=i.URL||i.webkitURL||i,p=g.createObjectURL,v=g.revokeObjectURL,y=g,b=i.btoa,C=i.atob,R=i.ArrayBuffer,j=i.Uint8Array,D=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=u.fake=!0;h--;)f.prototype[c[h]]=h+1;return g.createObjectURL||(y=i.URL=function(w){var A=document.createElementNS("http://www.w3.org/1999/xhtml","a"),z;return A.href=w,"origin"in A||(A.protocol.toLowerCase()==="data:"?A.origin=null:(z=w.match(D),A.origin=z&&z[1])),A}),y.createObjectURL=function(w){var A=w.type,z;if(A===null&&(A="application/octet-stream"),w instanceof s)return z="data:"+A,w.encoding==="base64"?z+";base64,"+w.data:w.encoding==="URI"?z+","+decodeURIComponent(w.data):b?z+";base64,"+b(w.data):z+","+encodeURIComponent(w.data);if(p)return p.call(g,w)},y.revokeObjectURL=function(w){w.substring(0,5)!=="data:"&&v&&v.call(g,w)},l.append=function(w){var A=this.data;if(j&&(w instanceof R||w instanceof j)){for(var z="",Z=new j(w),oe=0,se=Z.length;oe<se;oe++)z+=String.fromCharCode(Z[oe]);A.push(z)}else if(o(w)==="Blob"||o(w)==="File")if(d){var E=new d;A.push(E.readAsBinaryString(w))}else throw new f("NOT_READABLE_ERR");else w instanceof s?w.encoding==="base64"&&C?A.push(C(w.data)):w.encoding==="URI"?A.push(decodeURIComponent(w.data)):w.encoding==="raw"&&A.push(w.data):(typeof w!="string"&&(w+=""),A.push(unescape(encodeURIComponent(w))))},l.getBlob=function(w){return arguments.length||(w=null),new s(this.data.join(""),w,"raw")},l.toString=function(){return"[object BlobBuilder]"},u.slice=function(w,A,z){var Z=arguments.length;return Z<3&&(z=null),new s(this.data.slice(w,Z>1?A:this.data.length),z,this.encoding)},u.toString=function(){return"[object Blob]"},u.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(i,o){var a=o&&o.type||"",s=new t;if(i)for(var l=0,u=i.length;l<u;l++)Uint8Array&&i[l]instanceof Uint8Array?s.append(i[l].buffer):s.append(i[l]);var d=s.getBlob(a);return!d.slice&&d.webkitSlice&&(d.slice=d.webkitSlice),d};var n=Object.getPrototypeOf||function(i){return i.__proto__};e.Blob.prototype=n(new e.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||Xa.content||Xa),function(e,t){var n=typeof process<"u"&&process&&process.versions&&process.versions.electron;n?e.MediumEditor=t:r.exports=t}(Xa,function(){function e(t,n){return this.init(t,n)}return e.extensions={},function(t){function n(l,u){var d,f=Array.prototype.slice.call(arguments,2);u=u||{};for(var c=0;c<f.length;c++){var h=f[c];if(h)for(d in h)h.hasOwnProperty(d)&&typeof h[d]<"u"&&(l||u.hasOwnProperty(d)===!1)&&(u[d]=h[d])}return u}var i=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),i=o.contains(a)}catch{}var s={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(l){return!!(s.isMac&&l.metaKey||!s.isMac&&l.ctrlKey)},isKey:function(l,u){var d=s.getKeyCode(l);return Array.isArray(u)===!1?d===u:u.indexOf(d)!==-1},getKeyCode:function(l){var u=l.which;return u===null&&(u=l.charCode!==null?l.charCode:l.keyCode),u},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var u=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,u)},defaults:function(){var u=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,u)},createLink:function(l,u,d,f){var c=l.createElement("a");return s.moveTextRangeIntoElement(u[0],u[u.length-1],c),c.setAttribute("href",d),f&&(f==="_blank"&&c.setAttribute("rel","noopener noreferrer"),c.setAttribute("target",f)),c},findOrCreateMatchingTextNodes:function(l,u,d){for(var f=l.createTreeWalker(u,NodeFilter.SHOW_ALL,null,!1),c=[],h=0,g=!1,p=null,v=null;(p=f.nextNode())!==null;)if(!(p.nodeType>3))if(p.nodeType===3){if(!g&&d.start<h+p.nodeValue.length&&(g=!0,v=s.splitStartNodeIfNeeded(p,d.start,h)),g&&s.splitEndNodeIfNeeded(p,v,d.end,h),g&&h===d.end)break;if(g&&h>d.end+1)throw new Error("PerformLinking overshot the target!");g&&c.push(v||p),h+=p.nodeValue.length,v!==null&&(h+=v.nodeValue.length,f.nextNode()),v=null}else p.tagName.toLowerCase()==="img"&&(!g&&d.start<=h&&(g=!0),g&&c.push(p));return c},splitStartNodeIfNeeded:function(l,u,d){return u!==d?l.splitText(u-d):null},splitEndNodeIfNeeded:function(l,u,d,f){var c,h;c=f+l.nodeValue.length+(u?u.nodeValue.length:0)-1,h=d-f-(u?l.nodeValue.length:0),c>=d&&f!==c&&h!==0&&(u||l).splitText(h)},splitByBlockElements:function(l){if(l.nodeType!==3&&l.nodeType!==1)return[];var u=[],d=e.util.blockContainerElementNames.join(",");if(l.nodeType===3||l.querySelectorAll(d).length===0)return[l];for(var f=0;f<l.childNodes.length;f++){var c=l.childNodes[f];if(c.nodeType===3)u.push(c);else if(c.nodeType===1){var h=c.querySelectorAll(d);h.length===0?u.push(c):u=u.concat(e.util.splitByBlockElements(c))}}return u},findAdjacentTextNodeWithContent:function(u,d,f){var c=!1,h,g=f.createNodeIterator(u,NodeFilter.SHOW_TEXT,null,!1);for(h=g.nextNode();h;){if(h===d)c=!0;else if(c&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=g.nextNode()}return h},findPreviousSibling:function(l){if(!l||s.isMediumEditorElement(l))return!1;for(var u=l.previousSibling;!u&&!s.isMediumEditorElement(l.parentNode);)l=l.parentNode,u=l.previousSibling;return u},isDescendant:function(u,d,f){if(!u||!d)return!1;if(u===d)return!!f;if(u.nodeType!==1)return!1;if(i||d.nodeType!==3)return u.contains(d);for(var c=d.parentNode;c!==null;){if(c===u)return!0;c=c.parentNode}return!1},isElement:function(u){return!!(u&&u.nodeType===1)},throttle:function(l,u){var d=50,f,c,h,g=null,p=0,v=function(){p=Date.now(),g=null,h=l.apply(f,c),g||(f=c=null)};return!u&&u!==0&&(u=d),function(){var y=Date.now(),b=u-(y-p);return f=this,c=arguments,b<=0||b>u?(g&&(clearTimeout(g),g=null),p=y,h=l.apply(f,c),g||(f=c=null)):g||(g=setTimeout(v,b)),h}},traverseUp:function(l,u){if(!l)return!1;do{if(l.nodeType===1){if(u(l))return l;if(s.isMediumEditorElement(l))return!1}l=l.parentNode}while(l);return!1},htmlEntities:function(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(l,u){var d,f,c,h,g,p,v,y=!1,b=["insertHTML",!1,u];if(!e.util.isEdge&&l.queryCommandSupported("insertHTML"))try{return l.execCommand.apply(l,b)}catch{}if(d=l.getSelection(),d.rangeCount){if(f=d.getRangeAt(0),v=f.commonAncestorContainer,s.isMediumEditorElement(v)&&!v.firstChild)f.selectNode(v.appendChild(l.createTextNode("")));else if(v.nodeType===3&&f.startOffset===0&&f.endOffset===v.nodeValue.length||v.nodeType!==3&&v.innerHTML===f.toString()){for(;!s.isMediumEditorElement(v)&&v.parentNode&&v.parentNode.childNodes.length===1&&!s.isMediumEditorElement(v.parentNode);)v=v.parentNode;f.selectNode(v)}for(f.deleteContents(),c=l.createElement("div"),c.innerHTML=u,h=l.createDocumentFragment();c.firstChild;)g=c.firstChild,p=h.appendChild(g);f.insertNode(h),p&&(f=f.cloneRange(),f.setStartAfter(p),f.collapse(!0),e.selection.selectRange(l,f)),y=!0}return l.execCommand.callListeners&&l.execCommand.callListeners(b,y),y},execFormatBlock:function(l,u){var d=s.getTopBlockContainer(e.selection.getSelectionStart(l)),f;if(u==="blockquote"){if(d&&(f=Array.prototype.slice.call(d.childNodes),f.some(function(c){return s.isBlockContainer(c)})))return l.execCommand("outdent",!1,null);if(s.isIE)return l.execCommand("indent",!1,u)}if(d&&u===d.nodeName.toLowerCase()&&(u="p"),s.isIE&&(u="<"+u+">"),d&&d.nodeName.toLowerCase()==="blockquote"){if(s.isIE&&u==="<p>")return l.execCommand("outdent",!1,u);if((s.isFF||s.isEdge)&&u==="p")return f=Array.prototype.slice.call(d.childNodes),f.some(function(c){return!s.isBlockContainer(c)})&&l.execCommand("formatBlock",!1,u),l.execCommand("outdent",!1,u)}return l.execCommand("formatBlock",!1,u)},setTargetBlank:function(l,u){var d,f=u||!1;if(l.nodeName.toLowerCase()==="a")l.target="_blank",l.rel="noopener noreferrer";else for(l=l.getElementsByTagName("a"),d=0;d<l.length;d+=1)(f===!1||f===l[d].attributes.href.value)&&(l[d].target="_blank",l[d].rel="noopener noreferrer")},removeTargetBlank:function(l,u){var d;if(l.nodeName.toLowerCase()==="a")l.removeAttribute("target"),l.removeAttribute("rel");else for(l=l.getElementsByTagName("a"),d=0;d<l.length;d+=1)u===l[d].attributes.href.value&&(l[d].removeAttribute("target"),l[d].removeAttribute("rel"))},addClassToAnchors:function(l,u){var d=u.split(" "),f,c;if(l.nodeName.toLowerCase()==="a")for(c=0;c<d.length;c+=1)l.classList.add(d[c]);else{var h=l.getElementsByTagName("a");if(h.length===0){var g=s.getClosestTag(l,"a");l=g?[g]:[]}else l=h;for(f=0;f<l.length;f+=1)for(c=0;c<d.length;c+=1)l[f].classList.add(d[c])}},isListItem:function(l){if(!l)return!1;if(l.nodeName.toLowerCase()==="li")return!0;for(var u=l.parentNode,d=u.nodeName.toLowerCase();d==="li"||!s.isBlockContainer(u)&&d!=="div";){if(d==="li")return!0;if(u=u.parentNode,u)d=u.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(l,u){if(u.nodeName.toLowerCase()==="li"){var d=u.parentElement;d.parentElement.nodeName.toLowerCase()==="p"&&(s.unwrap(d.parentElement,l),e.selection.moveCursor(l,u.firstChild,u.firstChild.textContent.length))}},splitOffDOMTree:function(l,u,d){for(var f=u,c=null,h=!d;f!==l;){var g=f.parentNode,p=g.cloneNode(!1),v=h?f:g.firstChild,y;for(c&&(h?p.appendChild(c):y=c),c=p;v;){var b=v.nextSibling;v===f?(v.hasChildNodes()?v=v.cloneNode(!1):v.parentNode.removeChild(v),v.textContent&&c.appendChild(v),v=h?b:null):(v.parentNode.removeChild(v),(v.hasChildNodes()||v.textContent)&&c.appendChild(v),v=b)}y&&c.appendChild(y),f=g}return c},moveTextRangeIntoElement:function(l,u,d){if(!l||!u)return!1;var f=s.findCommonRoot(l,u);if(!f)return!1;if(u===l){var c=l.parentNode,h=l.nextSibling;return c.removeChild(l),d.appendChild(l),h?c.insertBefore(d,h):c.appendChild(d),d.hasChildNodes()}for(var g=[],p,v,y,b=0;b<f.childNodes.length;b++)if(y=f.childNodes[b],!p)s.isDescendant(y,l,!0)&&(p=y);else if(s.isDescendant(y,u,!0)){v=y;break}else g.push(y);var C=v.nextSibling,R=f.ownerDocument.createDocumentFragment();return p===l?(p.parentNode.removeChild(p),R.appendChild(p)):R.appendChild(s.splitOffDOMTree(p,l)),g.forEach(function(j){j.parentNode.removeChild(j),R.appendChild(j)}),v===u?(v.parentNode.removeChild(v),R.appendChild(v)):R.appendChild(s.splitOffDOMTree(v,u,!0)),d.appendChild(R),v.parentNode===f?f.insertBefore(d,v):C?f.insertBefore(d,C):f.appendChild(d),d.hasChildNodes()},depthOfNode:function(l){for(var u=0,d=l;d.parentNode!==null;)d=d.parentNode,u++;return u},findCommonRoot:function(l,u){for(var d=s.depthOfNode(l),f=s.depthOfNode(u),c=l,h=u;d!==f;)d>f?(c=c.parentNode,d-=1):(h=h.parentNode,f-=1);for(;c!==h;)c=c.parentNode,h=h.parentNode;return c},isElementAtBeginningOfBlock:function(l){for(var u,d;!s.isBlockContainer(l)&&!s.isMediumEditorElement(l);){for(d=l;d=d.previousSibling;)if(u=d.nodeType===3?d.nodeValue:d.textContent,u.length>0)return!1;l=l.parentNode}return!0},isMediumEditorElement:function(l){return l&&l.getAttribute&&!!l.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(l){return s.traverseUp(l,function(u){return s.isMediumEditorElement(u)})},isBlockContainer:function(l){return l&&l.nodeType!==3&&s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(l){return s.traverseUp(l,function(u){return s.isBlockContainer(u)||s.isMediumEditorElement(u)})},getTopBlockContainer:function(l){var u=s.isBlockContainer(l)?l:!1;return s.traverseUp(l,function(d){return s.isBlockContainer(d)&&(u=d),!u&&s.isMediumEditorElement(d)?(u=d,!0):!1}),u},getFirstSelectableLeafNode:function(l){for(;l&&l.firstChild;)l=l.firstChild;if(l=s.traverseUp(l,function(d){return s.emptyElementNames.indexOf(d.nodeName.toLowerCase())===-1}),l.nodeName.toLowerCase()==="table"){var u=l.querySelector("th, td");u&&(l=u)}return l},getFirstTextNode:function(l){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(l)},_getFirstTextNode:function(l){if(l.nodeType===3)return l;for(var u=0;u<l.childNodes.length;u++){var d=s._getFirstTextNode(l.childNodes[u]);if(d!==null)return d}return null},ensureUrlHasProtocol:function(l){return l.indexOf("://")===-1?"http://"+l:l},warn:function(){t.console!==void 0&&typeof t.console.warn=="function"&&t.console.warn.apply(t.console,arguments)},deprecated:function(l,u,d){var f=l+" is deprecated, please use "+u+" instead.";d&&(f+=" Will be removed in "+d),s.warn(f)},deprecatedMethod:function(l,u,d,f){s.deprecated(l,u,f),typeof this[u]=="function"&&this[u].apply(this,d)},cleanupAttrs:function(l,u){u.forEach(function(d){l.removeAttribute(d)})},cleanupTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&l.parentNode.removeChild(l)},unwrapTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&e.util.unwrap(l,document)},getClosestTag:function(l,u){return s.traverseUp(l,function(d){return d.nodeName.toLowerCase()===u.toLowerCase()})},unwrap:function(l,u){for(var d=u.createDocumentFragment(),f=Array.prototype.slice.call(l.childNodes),c=0;c<f.length;c++)d.appendChild(f[c]);d.childNodes.length?l.parentNode.replaceChild(d,l):l.parentNode.removeChild(l)},guid:function(){function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}};e.util=s}(window),function(){var t=function(n){e.util.extend(this,n)};t.extend=function(n){var i=this,o;n&&n.hasOwnProperty("constructor")?o=n.constructor:o=function(){return i.apply(this,arguments)},e.util.extend(o,i);var a=function(){this.constructor=o};return a.prototype=i.prototype,o.prototype=new a,n&&e.util.extend(o.prototype,n),o},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(n){return this.base.options[n]}},["execAction","on","off","subscribe","trigger"].forEach(function(n){t.prototype[n]=function(){return this.base[n].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(i){return e.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(i,o){var a=o.getSelection(),s,l;return a.rangeCount===0?!1:(s=a.getRangeAt(0),l=s.commonAncestorContainer,e.util.traverseUp(l,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(o){return e.util.isMediumEditorElement(o)},i)},exportSelection:function(i,o){if(!i)return null;var a=null,s=o.getSelection();if(s.rangeCount>0){var l=s.getRangeAt(0),u=l.cloneRange(),d;u.selectNodeContents(i),u.setEnd(l.startContainer,l.startOffset),d=u.toString().length,a={start:d,end:d+l.toString().length},this.doesRangeStartWithImages(l,o)&&(a.startsWithImage=!0);var f=this.getTrailingImageCount(i,a,l.endContainer,l.endOffset);if(f&&(a.trailingImageCount=f),d!==0){var c=this.getIndexRelativeToAdjacentEmptyBlocks(o,i,l.startContainer,l.startOffset);c!==-1&&(a.emptyBlocksIndex=c)}}return a},importSelection:function(i,o,a,s){if(!(!i||!o)){var l=a.createRange();l.setStart(o,0),l.collapse(!0);var u=o,d=[],f=0,c=!1,h=!1,g=0,p=!1,v,y=!1,b=null;for((s||i.startsWithImage||typeof i.emptyBlocksIndex<"u")&&(y=!0);!p&&u;){if(u.nodeType>3){u=d.pop();continue}if(u.nodeType===3&&!h)v=f+u.length,!c&&i.start>=f&&i.start<=v&&(y||i.start<v?(l.setStart(u,i.start-f),c=!0):b=u),c&&i.end>=f&&i.end<=v&&(i.trailingImageCount?h=!0:(l.setEnd(u,i.end-f),p=!0)),f=v;else{if(i.trailingImageCount&&h&&(u.nodeName.toLowerCase()==="img"&&g++,g===i.trailingImageCount)){for(var C=0;u.parentNode.childNodes[C]!==u;)C++;l.setEnd(u.parentNode,C+1),p=!0}if(!p&&u.nodeType===1)for(var R=u.childNodes.length-1;R>=0;)d.push(u.childNodes[R]),R-=1}p||(u=d.pop())}!c&&b&&(l.setStart(b,b.length),l.setEnd(b,b.length)),typeof i.emptyBlocksIndex<"u"&&(l=this.importSelectionMoveCursorPastBlocks(a,o,i.emptyBlocksIndex,l)),s&&(l=this.importSelectionMoveCursorPastAnchor(i,l)),this.selectRange(a,l)}},importSelectionMoveCursorPastAnchor:function(i,o){var a=function(f){return f.nodeName.toLowerCase()==="a"};if(i.start===i.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&e.util.traverseUp(o.startContainer,a)){for(var s=o.startContainer,l=o.startContainer.parentNode;l!==null&&l.nodeName.toLowerCase()!=="a";)l.childNodes[l.childNodes.length-1]!==s?l=null:(s=l,l=l.parentNode);if(l!==null&&l.nodeName.toLowerCase()==="a"){for(var u=null,d=0;u===null&&d<l.parentNode.childNodes.length;d++)l.parentNode.childNodes[d]===l&&(u=d);o.setStart(l.parentNode,u+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(i,o,a,s){var l=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),u=s.startContainer,d,f,c=0;for(a=a||1,u.nodeType===3&&e.util.isBlockContainer(u.previousSibling)?d=u.previousSibling:d=e.util.getClosestBlockContainer(u);l.nextNode();)if(!f)d===l.currentNode&&(f=l.currentNode);else if(f=l.currentNode,c++,c===a||f.textContent.length>0)break;return f||(f=d),s.setStart(e.util.getFirstSelectableLeafNode(f),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,o,a,s){if(a.textContent.length>0&&s>0)return-1;var l=a;if(l.nodeType!==3&&(l=a.childNodes[s]),l){if(!e.util.isElementAtBeginningOfBlock(l))return-1;var u=e.util.findPreviousSibling(l);if(u){if(u.nodeValue)return-1}else return-1}for(var d=e.util.getClosestBlockContainer(a),f=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),c=0;f.nextNode();){var h=f.currentNode.textContent==="";if((h||c>0)&&(c+=1),f.currentNode===d)return c;h||(c=0)}return c},doesRangeStartWithImages:function(i,o){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var a=i.startContainer.querySelector("img");if(!a)return!1;for(var s=o.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);s.nextNode();){var l=s.currentNode;if(l===a)break;if(l.nodeValue)return!1}return!0},getTrailingImageCount:function(i,o,a,s){if(s===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var l=a.childNodes[s-1];l.hasChildNodes();)l=l.lastChild;for(var u=i,d=[],f=0,c=!1,h=!1,g=!1,p,v=0;!g&&u;){if(u.nodeType>3){u=d.pop();continue}if(u.nodeType===3&&!h)v=0,p=f+u.length,!c&&o.start>=f&&o.start<=p&&(c=!0),c&&o.end>=f&&o.end<=p&&(h=!0),f=p;else if(u.nodeName.toLowerCase()==="img"&&v++,u===l)g=!0;else if(u.nodeType===1)for(var y=u.childNodes.length-1;y>=0;)d.push(u.childNodes[y]),y-=1;g||(u=d.pop())}return v},selectionContainsContent:function(i){var o=i.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(i){var o,a=this.findMatchingSelectionParent(function(s){var l=s&&s.getAttribute("contenteditable");return l==="true"&&(o=!0),s.nodeName!=="#text"&&l==="false"},i);return!o&&a},getSelectionHtml:function(o){var a,s="",l=o.getSelection(),u,d;if(l.rangeCount){for(d=o.createElement("div"),a=0,u=l.rangeCount;a<u;a+=1)d.appendChild(l.getRangeAt(a).cloneContents());s=d.innerHTML}return s},getCaretOffsets:function(o,a){var s,l;return a||(a=window.getSelection().getRangeAt(0)),s=a.cloneRange(),l=a.cloneRange(),s.selectNodeContents(o),s.setEnd(a.endContainer,a.endOffset),l.selectNodeContents(o),l.setStart(a.endContainer,a.endOffset),{left:s.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(i){var o=i.startContainer;return o===i.endContainer&&o.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var o=i.getSelection(),a,s,l;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(s=[],l=a.commonAncestorContainer;l.parentNode&&l.parentNode.childNodes.length===1;)s.push(l.parentNode),l=l.parentNode;return s}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(u){return typeof o.containsNode=="function"?o.containsNode(u,!0):!0})},selectNode:function(i,o){var a=o.createRange();a.selectNodeContents(i),this.selectRange(o,a)},select:function(i,o,a,s,l){var u=i.createRange();return u.setStart(o,a),s?u.setEnd(s,l):u.collapse(!0),this.selectRange(i,u),u},clearSelection:function(i,o){o?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,o,a){this.select(i,o,a)},getSelectionRange:function(i){var o=i.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(i,o){var a=i.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(i){var o=i.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};e.selection=n}(),function(){function t(i,o){return i?i.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var s=a.getInteractionElements();return s?(Array.isArray(s)||(s=[s]),s.some(function(l){return e.util.isDescendant(l,o,!0)})):!1}):!1}var n=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(i,o,a,s){var l=this.base.options.contentWindow,u=this.base.options.ownerDocument;i=e.util.isElement(i)||[l,u].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(d){d.addEventListener(o,a,s),this.events.push([d,o,a,s])}).bind(this))},detachDOMEvent:function(i,o,a,s){var l,u,d=this.base.options.contentWindow,f=this.base.options.ownerDocument;i&&(i=e.util.isElement(i)||[d,f].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(c){l=this.indexOfListener(c,o,a,s),l!==-1&&(u=this.events.splice(l,1)[0],u[0].removeEventListener(u[1],u[2],u[3]))}).bind(this)))},indexOfListener:function(i,o,a,s){var l,u,d;for(l=0,u=this.events.length;l<u;l=l+1)if(d=this.events[l],d[0]===i&&d[1]===o&&d[2]===a&&d[3]===s)return l;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var o=this.events.filter(function(u){return u&&u[0].getAttribute&&u[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),a=0,s=o.length;a<s;a++){var l=o[a];this.detachDOMEvent(l[0],l[1],l[2],l[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(i,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,o){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(o)},detachCustomEvent:function(i,o){var a=this.indexOfCustomListener(i,o);a!==-1&&this.customEvents[i].splice(a,1)},indexOfCustomListener:function(i,o){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,o,a){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(s){s(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=(function(i){this.handleDocumentExecCommand(i)}).bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var o=i.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&i.execCommand.listeners.splice(o,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var o=function(s,l){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(u){u({command:s[0],value:s[2],args:s,result:l})})},a=function(){var s=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return s;var l=Array.prototype.slice.call(arguments);return o(l,s),s};a.orig=i.execCommand,a.listeners=[],a.callListeners=o,i.execCommand=a}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,i,o.bind(this))},this),this.eventsCache.push({name:i,handler:o})},cleanupElement:function(i){var o=i.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[o])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,o){var a=this.base.getFocusedElement(),s;a&&o.type==="click"&&this.lastMousedownTarget&&(e.util.isDescendant(a,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(s=a),s||this.base.elements.some(function(u){return!s&&e.util.isDescendant(u,i,!0)&&(s=u),!!s},this);var l=!e.util.isDescendant(a,i,!0)&&!t(this.base.extensions,i);s!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),s&&(s.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,s))),l&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(i,o){if(this.contentCache){var a=i.getAttribute("medium-editor-index"),s=i.innerHTML;s!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,i),this.contentCache[a]=s}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var o=i.currentTarget.activeElement,a;this.base.elements.some(function(s){return e.util.isDescendant(s,o,!0)?(a=s,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var o={target:i.target,currentTarget:i.currentTarget};setTimeout((function(){this.updateInput(o.currentTarget,o)}).bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),e.util.isKey(i,e.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.ENTER)||i.ctrlKey&&e.util.isKey(i,e.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(e.util.isKey(i,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var n=this.document.createElement("button"),i=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return n.classList.add("medium-editor-action"),n.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(s){n.classList.add(s)}),n.setAttribute("data-action",this.getAction()),o&&(n.setAttribute("title",o),n.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(s){n.setAttribute(s,this.attrs[s])},this),a==="fontawesome"&&this.contentFA&&(i=this.contentFA),n.innerHTML=i,n},handleClick:function(n){n.preventDefault(),n.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var n=null;return this.useQueryState&&(n=this.base.queryCommandState(this.getAction())),n},isAlreadyApplied:function(n){var i=!1,o=this.getTagNames(),a,s;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(n.nodeName.toLowerCase())!==-1),!i&&this.style&&(a=this.style.value.split("|"),s=this.window.getComputedStyle(n,null).getPropertyValue(this.style.prop),a.forEach(function(l){this.knownState||(i=s.indexOf(l)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(n){return typeof n=="string"&&e.extensions.button.prototype.defaults.hasOwnProperty(n)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.hideToolbarDefaultActions()},setToolbarPosition:function(){var n=this.base.getExtensionByName("toolbar");n&&n.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(n){n.preventDefault(),n.stopPropagation();var i=e.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(n){e.util.isKey(n,e.util.keyCode.K)&&e.util.isMetaCtrlKey(n)&&!n.shiftKey&&this.handleClick(n)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var n=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return n.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),n.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),n.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(n){var i=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(n=n||{value:""},typeof n=="string"&&(n={value:n}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=n.value,i.focus(),o&&(o.checked=n.target==="_blank"),a){var s=n.buttonClass?n.buttonClass.split(" "):[];a.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var n=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",n&&n.checked&&(o.target="_blank"),i&&i.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var n=this.getFormOpts();this.completeFormSave(n)},completeFormSave:function(n){this.base.restoreSelection(),this.execAction(this.action,n),this.base.checkSelection()},ensureEncodedUri:function(n){return n===decodeURI(n)?encodeURI(n):n},ensureEncodedUriComponent:function(n){return n===decodeURIComponent(n)?encodeURIComponent(n):n},ensureEncodedParam:function(n){var i=n.split("="),o=i[0],a=i[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(n){return n.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(n){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=i.test(n),a="",s=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,l=n.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),u=l[1],d=l[2],f=l[3];if(s.test(n))return"tel:"+n;if(!o){var c=u.split("/")[0];(c.match(/.+(\.|:).+/)||c==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(u)+(d===void 0?"":"?"+this.ensureEncodedQuery(d))+(f===void 0?"":"#"+f)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(n){var i=n.querySelector(".medium-editor-toolbar-close"),o=n.querySelector(".medium-editor-toolbar-save"),a=n.querySelector(".medium-editor-toolbar-input");this.on(n,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var n=this.document,i=n.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(n){if(n.keyCode===e.util.keyCode.ENTER){n.preventDefault(),this.doFormSave();return}n.keyCode===e.util.keyCode.ESCAPE&&(n.preventDefault(),this.doFormCancel())},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var n=this.document.createElement("div");return n.id="medium-editor-anchor-preview-"+this.getEditorId(),n.className="medium-editor-anchor-preview",n.innerHTML=this.getTemplate(),this.on(n,"click",this.handleClick.bind(this)),n},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(n){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||n.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=n.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=n.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=n,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(n){n=n||this.activeAnchor;var i=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=n.getBoundingClientRect(),s=this.diffLeft,l=this.diffTop,u=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,f={},c,h,g,p,v;c=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(s=y.diffLeft,l=y.diffTop),h=s-c,d?(p=u.getBoundingClientRect(),["top","left"].forEach(function(b){f[b]=a[b]-p[b]}),f.width=a.width,f.height=a.height,a=f,i=p.width,v=u.scrollTop):v=this.window.pageYOffset,g=a.left+a.width/2,v+=o+a.top+a.height-l-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(v)+"px",this.anchorPreview.style.right="initial",g<c?(this.anchorPreview.style.left=h+c+"px",this.anchorPreview.style.right="initial"):i-g<c?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+g+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(n){var i=this.base.getExtensionByName("anchor"),o=this.activeAnchor;i&&o&&(n.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay((function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};i.showForm(a),o=null}}).bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(n){var i=e.util.getClosestTag(n.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay((function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}).bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(n){(!n.relatedTarget||!/anchor-preview/.test(n.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var n=new Date().getTime()-this.lastOver;n>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){var t,n,i,o,a;t=[" ","	",`
`,"\r"," "," "," "," "," ","\u2028","\u2029"],n="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+n+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+n+"))",o=new RegExp("^("+n+")$","i"),a=new RegExp(i,"gi");function s(u){return!e.util.getClosestTag(u,"a")}var l=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var u=0,d=0;d<this.window._mediumEditors.length;d++){var f=this.window._mediumEditors[d];f!==null&&f.getExtensionByName("autoLink")!==void 0&&u++}return u===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(u,d){this.performLinking(d)},onKeypress:function(u){this.disableEventHandling||e.util.isKey(u,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout((function(){try{var d=this.base.exportSelection();this.performLinking(u.target)&&this.base.importSelection(d,!0)}catch(f){window.console&&window.console.error("Failed to perform linking",f),this.disableEventHandling=!0}}).bind(this),0))},performLinking:function(u){var d=e.util.splitByBlockElements(u),f=!1;d.length===0&&(d=[u]);for(var c=0;c<d.length;c++)f=this.removeObsoleteAutoLinkSpans(d[c])||f,f=this.performLinkingWithinElement(d[c])||f;return this.base.events.updateInput(u,{target:u,currentTarget:u}),f},removeObsoleteAutoLinkSpans:function(u){if(!u||u.nodeType===3)return!1;for(var d=u.querySelectorAll('span[data-auto-link="true"]'),f=!1,c=0;c<d.length;c++){var h=d[c].textContent;if(h.indexOf("://")===-1&&(h=e.util.ensureUrlHasProtocol(h)),d[c].getAttribute("data-href")!==h&&s(d[c])){f=!0;var g=h.replace(/\s+$/,"");if(d[c].getAttribute("data-href")===g){var p=h.length-g.length,v=e.util.splitOffDOMTree(d[c],this.splitTextBeforeEnd(d[c],p));d[c].parentNode.insertBefore(v,d[c].nextSibling)}else e.util.unwrap(d[c],this.document)}}return f},splitTextBeforeEnd:function(u,d){for(var f=this.document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null,!1),c=!0;c;)c=f.lastChild()!==null;for(var h,g,p;d>0&&p!==null;)h=f.currentNode,g=h.nodeValue,g.length>d?(p=h.splitText(g.length-d),d=0):(p=f.previousNode(),d-=g.length);return p},performLinkingWithinElement:function(u){for(var d=this.findLinkableText(u),f=!1,c=0;c<d.length;c++){var h=e.util.findOrCreateMatchingTextNodes(this.document,u,d[c]);this.shouldNotLink(h)||this.createAutoLink(h,d[c].href)}return f},shouldNotLink:function(u){for(var d=!1,f=0;f<u.length&&d===!1;f++)d=!!e.util.traverseUp(u[f],function(c){return c.nodeName.toLowerCase()==="a"||c.getAttribute&&c.getAttribute("data-auto-link")==="true"});return d},findLinkableText:function(u){for(var d=u.textContent,f=null,c=[];(f=a.exec(d))!==null;){var h=!0,g=f.index+f[0].length;h=(f.index===0||t.indexOf(d[f.index-1])!==-1)&&(g===d.length||t.indexOf(d[g])!==-1),h=h&&(f[0].indexOf("/")!==-1||o.test(f[0].split(".").pop().split("?").shift())),h&&c.push({href:f[0],start:f.index,end:g})}return c},createAutoLink:function(u,d){d=e.util.ensureUrlHasProtocol(d);var f=e.util.createLink(this.document,u,d,this.getEditorOption("targetBlank")?"_blank":null),c=this.document.createElement("span");for(c.setAttribute("data-auto-link","true"),c.setAttribute("data-href",d),f.insertBefore(c,f.firstChild);f.childNodes.length>1;)c.appendChild(f.childNodes[1])}});e.extensions.autoLink=l}(),function(){var t="medium-editor-dragover";function n(o){var a=e.util.getContainerEditorElement(o),s=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+t));s.forEach(function(l){l.classList.remove(t)})}var i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;n(a),o.type==="dragover"&&a.classList.add(t)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s){this.isAllowedFile(s)&&s.type.match("image")&&this.insertImageFile(s)},this),n(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",(function(s){var l=this.document.createElement("img");l.src=s.target.result,e.util.insertHTMLCommand(this.document,l.outerHTML)}).bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(n){var i=n.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(n)},this)},handleKeydown:function(n){var i=e.util.getKeyCode(n);if(this.keys[i]){var o=e.util.isMetaCtrlKey(n),a=!!n.shiftKey,s=!!n.altKey;this.keys[i].forEach(function(l){l.meta===o&&l.shift===a&&(l.alt===s||l.alt===void 0)&&(n.preventDefault(),n.stopPropagation(),typeof l.command=="function"?l.command.apply(this):l.command!==!1&&this.execAction(l.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(n){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=n||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var n=this.document,i=n.createElement("div"),o=n.createElement("select"),a=n.createElement("a"),s=n.createElement("a"),l;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var u=0;u<this.fonts.length;u++)l=n.createElement("option"),l.innerHTML=this.fonts[u],l.value=this.fonts[u],o.appendChild(l);return o.className="medium-editor-toolbar-select",i.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("face")&&n.removeAttribute("face")})},handleFontChange:function(){var n=this.getSelect().value;n===""?this.clearFontName():this.execAction("fontName",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(n){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=n||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var n=this.document,i=n.createElement("div"),o=n.createElement("input"),a=n.createElement("a"),s=n.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",i.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("size")&&n.removeAttribute("size")})},handleSliderChange:function(){var n=this.getInput().value;n==="4"?this.clearFontSize():this.execAction("fontSize",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){var t="%ME_PASTEBIN%",n=null,i=null,o=function(u){u.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function s(u,d,f){var c=u.clipboardData||d.clipboardData||f.dataTransfer,h={};if(!c)return h;if(c.getData){var g=c.getData("Text");g&&g.length>0&&(h["text/plain"]=g)}if(c.types)for(var p=0;p<c.types.length;p++){var v=c.types[p];h[v]=c.getData(v)}return h}var l=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(u){this.on(u,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(u,d){this.on(d,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(u,d){if(!u.defaultPrevented){var f=s(u,this.window,this.document),c=f["text/html"],h=f["text/plain"];this.window.clipboardData&&u.clipboardData===void 0&&!c&&(c=h),(c||h)&&(u.preventDefault(),this.doPaste(c,h,d))}},doPaste:function(u,d,f){var c,h="",g;if(this.cleanPastedHTML&&u)return this.cleanPaste(u);if(d){if(this.getEditorOption("disableReturn")||f&&f.getAttribute("data-disable-return"))h=e.util.htmlEntities(d);else if(c=d.split(/[\r\n]+/g),c.length>1)for(g=0;g<c.length;g+=1)c[g]!==""&&(h+="<p>"+e.util.htmlEntities(c[g])+"</p>");else h=e.util.htmlEntities(c[0]);e.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(u){if(u.defaultPrevented){this.removePasteBin();return}var d=s(u,this.window,this.document),f=d["text/html"],c=d["text/plain"],h=i;if(!this.cleanPastedHTML||f){u.preventDefault(),this.removePasteBin(),this.doPaste(f,c,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout((function(){this.cleanPastedHTML&&(f=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(f,c,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}).bind(this),0)},handleKeydown:function(u,d){e.util.isKey(u,e.util.keyCode.V)&&e.util.isMetaCtrlKey(u)&&(u.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(d))},createPasteBin:function(u){var d,f=e.selection.getSelectionRange(this.document),c=this.window.pageYOffset;i=u,f&&(d=f.getClientRects(),d.length?c+=d[0].top:f.startContainer.getBoundingClientRect!==void 0?c+=f.startContainer.getBoundingClientRect().top:c+=f.getBoundingClientRect().top),n=f;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+c+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=t,this.document.body.appendChild(h),this.on(h,"focus",o),this.on(h,"focusin",o),this.on(h,"focusout",o),h.focus(),e.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){n!==null&&(e.selection.selectRange(this.document,n),n=null),i!==null&&(i=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",o),this.off(u,"focusin",o),this.off(u,"focusout",o),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var u=this.getPasteBin();if(!u||u.firstChild&&u.firstChild.id==="mcepastebin")return!1;var d=u.innerHTML;return!d||d===t?!1:d},cleanPaste:function(u){var d,f,c,h,g=/<p|<br|<div/.test(u),p=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(d=0;d<p.length;d+=1)u=u.replace(p[d][0],p[d][1]);if(!g)return this.pasteHTML(u);for(c=this.document.createElement("div"),c.innerHTML="<p>"+u.split("<br><br>").join("</p><p>")+"</p>",f=c.querySelectorAll("a,p,div,br"),d=0;d<f.length;d+=1)switch(h=f[d],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(c.innerHTML)},pasteHTML:function(u,d){d=e.util.defaults({},d,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var f,c,h,g,p=this.document.createDocumentFragment();for(p.appendChild(this.document.createElement("body")),g=p.querySelector("body"),g.innerHTML=u,this.cleanupSpans(g),f=g.querySelectorAll("*"),h=0;h<f.length;h+=1)c=f[h],c.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(c),e.util.cleanupAttrs(c,d.cleanAttrs),e.util.cleanupTags(c,d.cleanTags),e.util.unwrapTags(c,d.unwrapTags);e.util.insertHTMLCommand(this.document,g.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(u){return u&&(u.nodeName.toLowerCase()==="p"||u.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(u){/^\s*$/.test(u.textContent)&&u.parentNode&&u.parentNode.removeChild(u)},filterLineBreak:function(u){this.isCommonBlock(u.previousElementSibling)?this.removeWithParent(u):this.isCommonBlock(u.parentNode)&&(u.parentNode.firstChild===u||u.parentNode.lastChild===u)?this.removeWithParent(u):u.parentNode&&u.parentNode.childElementCount===1&&u.parentNode.textContent===""&&this.removeWithParent(u)},removeWithParent:function(u){u&&u.parentNode&&(u.parentNode.parentNode&&u.parentNode.childElementCount===1?u.parentNode.parentNode.removeChild(u.parentNode):u.parentNode.removeChild(u))},cleanupSpans:function(u){var d,f,c,h=u.querySelectorAll(".replace-with"),g=function(p){return p&&p.nodeName!=="#text"&&p.getAttribute("contenteditable")==="false"};for(d=0;d<h.length;d+=1)f=h[d],c=this.document.createElement(f.classList.contains("bold")?"b":"i"),f.classList.contains("bold")&&f.classList.contains("italic")?c.innerHTML="<i>"+f.innerHTML+"</i>":c.innerHTML=f.innerHTML,f.parentNode.replaceChild(c,f);for(h=u.querySelectorAll("span"),d=0;d<h.length;d+=1){if(f=h[d],e.util.traverseUp(f,g))return!1;e.util.unwrap(f,this.document)}}});e.extensions.paste=l}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(n,i){this.initElement(i)},initElement:function(n){n.getAttribute("data-placeholder")||n.setAttribute("data-placeholder",this.text),this.updatePlaceholder(n)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(n,i){this.cleanupElement(i)},cleanupElement:function(n){n.getAttribute("data-placeholder")===this.text&&n.removeAttribute("data-placeholder")},showPlaceholder:function(n){n&&(e.util.isFF&&n.childNodes.length===0?(n.classList.add("medium-editor-placeholder-relative"),n.classList.remove("medium-editor-placeholder")):(n.classList.add("medium-editor-placeholder"),n.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(n){n&&(n.classList.remove("medium-editor-placeholder"),n.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(n,i){if(n.querySelector("img, blockquote, ul, ol, table")||n.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(n);i||this.showPlaceholder(n)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(n,i){var o=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,o)},handleFocus:function(n,i){this.hidePlaceholder(i)},handleBlur:function(n,i){this.updatePlaceholder(i)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(n,i){return this.base.extensions.forEach(function(o){if(o!==this)return n.apply(i||this,arguments)},this)},createToolbar:function(){var n=this.document.createElement("div");return n.id="medium-editor-toolbar-"+this.getEditorId(),n.className="medium-editor-toolbar",this.static?n.className+=" static-toolbar":this.relativeContainer?n.className+=" medium-editor-relative-toolbar":n.className+=" medium-editor-stalker-toolbar",n.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&n.appendChild(i.getForm())}),this.attachEventHandlers(),n},createToolbarButtons:function(){var n=this.document.createElement("ul"),i,o,a,s,l,u;return n.id="medium-editor-toolbar-actions"+this.getEditorId(),n.className="medium-editor-toolbar-actions",n.style.display="block",this.buttons.forEach(function(d){typeof d=="string"?(l=d,u=null):(l=d.name,u=d),s=this.base.addBuiltInExtension(l,u),s&&typeof s.getButton=="function"&&(o=s.getButton(this.base),i=this.document.createElement("li"),e.util.isElement(o)?i.appendChild(o):i.innerHTML=o,n.appendChild(i))},this),a=n.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),n},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle((function(){this.base.isActive&&this.positionToolbarIfShown()}).bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(n){if(n&&n.target&&e.util.isDescendant(this.getToolbarElement(),n.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout((function(){this.checkState()}).bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout((function(){this.hideToolbar()}).bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay((function(){this.showToolbar()}).bind(this))},hideExtensionForms:function(){this.forEachExtension(function(n){n.hasForm&&n.isDisplayed()&&n.hideForm()})},multipleBlockElementsSelected:function(){var n=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=e.selection.getSelectionHtml(this.document).replace(n,""),a=o.match(i);return!!a&&a.length>1},modifySelection:function(){var n=this.window.getSelection(),i=n.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var o=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;i=e.selection.select(this.document,o,a,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var n=e.selection.getSelectionElement(this.window);if(!n||this.getEditorElements().indexOf(n)===-1||n.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(n){typeof n.isActive=="function"&&typeof n.setInactive=="function"&&n.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var n=[],i=null,o=e.selection.getSelectionRange(this.document),a,s=function(l){typeof l.checkState=="function"?l.checkState(a):typeof l.isActive=="function"&&typeof l.isAlreadyApplied=="function"&&typeof l.setActive=="function"&&!l.isActive()&&l.isAlreadyApplied(a)&&l.setActive()};if(o&&(this.forEachExtension(function(l){if(typeof l.queryCommandState=="function"&&(i=l.queryCommandState(),i!==null)){i&&typeof l.setActive=="function"&&l.setActive();return}n.push(l)}),a=e.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(l){return e.util.isDescendant(l,a,!0)})))for(;a&&(n.forEach(s),!e.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var n=this.base.getFocusedElement(),i=this.window.getSelection();if(!n)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(n):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(n){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),s=n.getBoundingClientRect(),l=s.top+i,u=s.left+s.width/2,d=a.offsetHeight,f=a.offsetWidth,c=f/2,h;switch(this.sticky?i>l+n.offsetHeight-d-this.stickyTopOffset?(a.style.top=l+n.offsetHeight-d+"px",a.classList.remove("medium-editor-sticky-toolbar")):i>l-d-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=l-d+"px"):a.style.top=l-d+"px",this.align){case"left":h=s.left;break;case"right":h=s.right-f;break;case"center":h=u-c;break}h<0?h=0:h+f>o&&(h=o-Math.ceil(f)-1),a.style.left=h+"px"},positionToolbar:function(n){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=n.getRangeAt(0),o=i.getBoundingClientRect();(!o||o.height===0&&o.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?o=i.startContainer.querySelector("img").getBoundingClientRect():o=i.startContainer.getBoundingClientRect());var a=this.window.innerWidth,s=this.getToolbarElement(),l=s.offsetHeight,u=s.offsetWidth,d=u/2,f=50,c=this.diffLeft-d,h=this.getEditorOption("elementsContainer"),g=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,p={},v={},y,b;g?(b=h.getBoundingClientRect(),["top","left"].forEach(function(C){v[C]=o[C]-b[C]}),v.width=o.width,v.height=o.height,o=v,a=b.width,p.top=h.scrollTop):p.top=this.window.pageYOffset,y=o.left+o.width/2,p.top+=o.top-l,o.top<f?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),p.top+=f+o.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),p.top+=this.diffTop),y<d?(p.left=c+d,p.right="initial"):a-y<d?(p.left="auto",p.right=0):(p.left=c+y,p.right="initial"),["top","left","right"].forEach(function(C){s.style[C]=p[C]+(isNaN(p[C])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(n){var i="medium-editor-dragover";n.preventDefault(),n.dataTransfer.dropEffect="copy",n.type==="dragover"?n.target.classList.add(i):n.type==="dragleave"&&n.target.classList.remove(i)},handleDrop:function(n){var i="medium-editor-dragover",o;n.preventDefault(),n.stopPropagation(),n.dataTransfer.files&&(o=Array.prototype.slice.call(n.dataTransfer.files,0),o.some((function(a){if(a.type.match("image")){var s,l;s=new FileReader,s.readAsDataURL(a),l="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+l+'" />'),s.onload=(function(){var u=this.document.getElementById(l);u&&(u.removeAttribute("id"),u.removeAttribute("class"),u.src=s.result)}).bind(this)}}).bind(this))),n.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(E){var M=e.selection.getSelectionStart(this.options.ownerDocument),P=M.textContent,V=e.selection.getCaretOffsets(M);(P[V.left-1]===void 0||P[V.left-1].trim()===""||P[V.left]!==void 0&&P[V.left].trim()==="")&&E.preventDefault()}function n(E,M){if(this.options.disableReturn||M.getAttribute("data-disable-return"))E.preventDefault();else if(this.options.disableDoubleReturn||M.getAttribute("data-disable-double-return")){var P=e.selection.getSelectionStart(this.options.ownerDocument);(P&&P.textContent.trim()===""&&P.nodeName.toLowerCase()!=="li"||P.previousElementSibling&&P.previousElementSibling.nodeName.toLowerCase()!=="br"&&P.previousElementSibling.textContent.trim()==="")&&E.preventDefault()}}function i(E){var M=e.selection.getSelectionStart(this.options.ownerDocument),P=M&&M.nodeName.toLowerCase();P==="pre"&&(E.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(M)&&(E.preventDefault(),E.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(E){var M,P=e.selection.getSelectionStart(this.options.ownerDocument),V=P.nodeName.toLowerCase(),ce=/^(\s+|<br\/?>)?$/i,be=/h\d/i;e.util.isKey(E,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&P.previousElementSibling&&be.test(V)&&e.selection.getCaretOffsets(P).left===0?e.util.isKey(E,e.util.keyCode.BACKSPACE)&&ce.test(P.previousElementSibling.innerHTML)?(P.previousElementSibling.parentNode.removeChild(P.previousElementSibling),E.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(E,e.util.keyCode.ENTER)&&(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",P.previousElementSibling.parentNode.insertBefore(M,P),E.preventDefault()):e.util.isKey(E,e.util.keyCode.DELETE)&&P.nextElementSibling&&P.previousElementSibling&&!be.test(V)&&ce.test(P.innerHTML)&&be.test(P.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,P.nextElementSibling),P.previousElementSibling.parentNode.removeChild(P),E.preventDefault()):e.util.isKey(E,e.util.keyCode.BACKSPACE)&&V==="li"&&ce.test(P.innerHTML)&&!P.previousElementSibling&&!P.parentElement.previousElementSibling&&P.nextElementSibling&&P.nextElementSibling.nodeName.toLowerCase()==="li"?(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",P.parentElement.parentElement.insertBefore(M,P.parentElement),e.selection.moveCursor(this.options.ownerDocument,M),P.parentElement.removeChild(P),E.preventDefault()):e.util.isKey(E,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(P,"blockquote")!==!1&&e.selection.getCaretOffsets(P).left===0?(E.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(E,e.util.keyCode.ENTER)&&e.util.getClosestTag(P,"blockquote")!==!1&&e.selection.getCaretOffsets(P).right===0?(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",P.parentElement.insertBefore(M,P.nextSibling),e.selection.moveCursor(this.options.ownerDocument,M),E.preventDefault()):e.util.isKey(E,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(P.parentElement)&&!P.previousElementSibling&&P.nextElementSibling&&ce.test(P.innerHTML)&&(E.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,P.nextSibling),P.parentElement.removeChild(P))}function a(E){var M=e.selection.getSelectionStart(this.options.ownerDocument),P;M&&(e.util.isMediumEditorElement(M)&&M.children.length===0&&!e.util.isBlockContainer(M)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.util.isKey(E,e.util.keyCode.ENTER)&&!e.util.isListItem(M)&&!e.util.isBlockContainer(M)&&(P=M.nodeName.toLowerCase(),P==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!E.shiftKey&&!E.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(E,M){var P=M.parentNode.querySelector('textarea[medium-editor-textarea-id="'+M.getAttribute("medium-editor-textarea-id")+'"]');P&&(P.value=M.innerHTML.trim())}function l(E){E._mediumEditors||(E._mediumEditors=[null]),this.id||(this.id=E._mediumEditors.length),E._mediumEditors[this.id]=this}function u(E){!E._mediumEditors||!E._mediumEditors[this.id]||(E._mediumEditors[this.id]=null)}function d(E,M,P){var V=[];if(E||(E=[]),typeof E=="string"&&(E=M.querySelectorAll(E)),e.util.isElement(E)&&(E=[E]),P)for(var ce=0;ce<E.length;ce++){var be=E[ce];e.util.isElement(be)&&!be.getAttribute("data-medium-editor-element")&&!be.getAttribute("medium-editor-textarea-id")&&V.push(be)}else V=Array.prototype.slice.apply(E);return V}function f(E){var M=E.parentNode.querySelector('textarea[medium-editor-textarea-id="'+E.getAttribute("medium-editor-textarea-id")+'"]');M&&(M.classList.remove("medium-editor-hidden"),M.removeAttribute("medium-editor-textarea-id")),E.parentNode&&E.parentNode.removeChild(E)}function c(E,M){return Object.keys(M).forEach(function(P){E[P]===void 0&&(E[P]=M[P])}),E}function h(E,M,P){var V={window:P.options.contentWindow,document:P.options.ownerDocument,base:P};return E=c(E,V),typeof E.init=="function"&&E.init(),E.name||(E.name=M),E}function g(){return this.elements.every(function(E){return!!E.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function p(){return g.call(this)?this.options.anchorPreview!==!1:!1}function v(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function b(){return this.options.imageDragging!==!1}function C(){return this.options.keyboardCommands!==!1}function R(){return!this.options.extensions.imageDragging}function j(E){for(var M=this.options.ownerDocument.createElement("div"),P=Date.now(),V="medium-editor-"+P,ce=E.attributes;this.options.ownerDocument.getElementById(V);)P++,V="medium-editor-"+P;M.className=E.className,M.id=V,M.innerHTML=E.value,E.setAttribute("medium-editor-textarea-id",V);for(var be=0,Ue=ce.length;be<Ue;be++)M.hasAttribute(ce[be].nodeName)||M.setAttribute(ce[be].nodeName,ce[be].value);return E.form&&this.on(E.form,"reset",(function(Ge){Ge.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(V))}).bind(this)),E.classList.add("medium-editor-hidden"),E.parentNode.insertBefore(M,E),M}function D(E,M){if(!E.getAttribute("data-medium-editor-element")){E.nodeName.toLowerCase()==="textarea"&&(E=j.call(this,E),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!E.getAttribute("data-disable-editing")&&(E.setAttribute("contentEditable",!0),E.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(E.getAttribute("data-disable-return")||E.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!E.getAttribute("data-disable-return")&&this.on(E,"keyup",a.bind(this));var P=e.util.guid();E.setAttribute("data-medium-editor-element",!0),E.classList.add("medium-editor-element"),E.setAttribute("role","textbox"),E.setAttribute("aria-multiline",!0),E.setAttribute("data-medium-editor-editor-index",M),E.setAttribute("medium-editor-index",P),se[P]=E.innerHTML,this.events.attachAllEventsToElement(E)}return E}function w(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function A(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(ce){ce!=="toolbar"&&this.options.extensions[ce]&&this.extensions.push(h(this.options.extensions[ce],ce,this))},this),R.call(this)){var E=this.options.fileDragging;E||(E={},b.call(this)||(E.allowedTypes=[])),this.addBuiltInExtension("fileDragging",E)}var M={paste:!0,"anchor-preview":p.call(this),autoLink:y.call(this),keyboardCommands:C.call(this),placeholder:v.call(this)};Object.keys(M).forEach(function(ce){M[ce]&&this.addBuiltInExtension(ce)},this);var P=this.options.extensions.toolbar;if(!P&&g.call(this)){var V=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});P=new e.extensions.toolbar(V)}P&&this.extensions.push(h(P,"toolbar",this))}function z(E,M){var P=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return M&&P.forEach(function(V){M.hasOwnProperty(V[0])&&M[V[0]]!==void 0&&e.util.deprecated(V[0],V[1],"v6.0.0")}),e.util.defaults({},M,E)}function Z(E,M){var P=/^append-(.+)$/gi,V=/justify([A-Za-z]*)$/g,ce,be;if(ce=P.exec(E),ce)return e.util.execFormatBlock(this.options.ownerDocument,ce[1]);if(E==="fontSize")return M.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),be=M.value||M.size,this.options.ownerDocument.execCommand("fontSize",!1,be);if(E==="fontName")return M.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),be=M.value||M.name,this.options.ownerDocument.execCommand("fontName",!1,be);if(E==="createLink")return this.createLink(M);if(E==="image"){var Ue=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,Ue)}if(E==="html"){var Ge=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,Ge)}if(V.exec(E)){var ge=this.options.ownerDocument.execCommand(E,!1,null),Ne=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return Ne&&oe.call(this,e.util.getTopBlockContainer(Ne)),ge}return be=M&&M.value,this.options.ownerDocument.execCommand(E,!1,be)}function oe(E){if(E){var M,P=Array.prototype.slice.call(E.childNodes).filter(function(V){var ce=V.nodeName.toLowerCase()==="div";return ce&&!M&&(M=V.style.textAlign),ce});P.length&&(this.saveSelection(),P.forEach(function(V){if(V.style.textAlign===M){var ce=V.lastChild;if(ce){e.util.unwrap(V,this.options.ownerDocument);var be=this.options.ownerDocument.createElement("BR");ce.parentNode.insertBefore(be,ce.nextSibling)}}},this),E.style.textAlign=M,this.restoreSelection())}}var se={};e.prototype={init:function(E,M){return this.options=z.call(this,this.defaults,M),this.origElements=E,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,A.call(this),w.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(E){typeof E.destroy=="function"&&E.destroy()},this),this.events.destroy(),this.elements.forEach(function(E){this.options.spellcheck&&(E.innerHTML=E.innerHTML),E.removeAttribute("contentEditable"),E.removeAttribute("spellcheck"),E.removeAttribute("data-medium-editor-element"),E.classList.remove("medium-editor-element"),E.removeAttribute("role"),E.removeAttribute("aria-multiline"),E.removeAttribute("medium-editor-index"),E.removeAttribute("data-medium-editor-editor-index"),E.getAttribute("medium-editor-textarea-id")&&f(E)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(E,M,P,V){return this.events.attachDOMEvent(E,M,P,V),this},off:function(E,M,P,V){return this.events.detachDOMEvent(E,M,P,V),this},subscribe:function(E,M){return this.events.attachCustomEvent(E,M),this},unsubscribe:function(E,M){return this.events.detachCustomEvent(E,M),this},trigger:function(E,M,P){return this.events.triggerCustomEvent(E,M,P),this},delay:function(E){var M=this;return setTimeout(function(){M.isActive&&E()},this.options.delay)},serialize:function(){var E,M,P={},V=this.elements.length;for(E=0;E<V;E+=1)M=this.elements[E].id!==""?this.elements[E].id:"element-"+E,P[M]={value:this.elements[E].innerHTML.trim()};return P},getExtensionByName:function(E){var M;return this.extensions&&this.extensions.length&&this.extensions.some(function(P){return P.name===E?(M=P,!0):!1}),M},addBuiltInExtension:function(E,M){var P=this.getExtensionByName(E),V;if(P)return P;switch(E){case"anchor":V=e.util.extend({},this.options.anchor,M),P=new e.extensions.anchor(V);break;case"anchor-preview":P=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":P=new e.extensions.autoLink;break;case"fileDragging":P=new e.extensions.fileDragging(M);break;case"fontname":P=new e.extensions.fontName(this.options.fontName);break;case"fontsize":P=new e.extensions.fontSize(M);break;case"keyboardCommands":P=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":P=new e.extensions.paste(this.options.paste);break;case"placeholder":P=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(E)&&(M?(V=e.util.defaults({},M,e.extensions.button.prototype.defaults[E]),P=new e.extensions.button(V)):P=new e.extensions.button(E))}return P&&this.extensions.push(h(P,E,this)),P},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var E=this.getExtensionByName("toolbar");return E&&E.checkState(),this},queryCommandState:function(E){var M=/^full-(.+)$/gi,P,V=null;P=M.exec(E),P&&(E=P[1]);try{V=this.options.ownerDocument.queryCommandState(E)}catch{V=null}return V},execAction:function(E,M){var P=/^full-(.+)$/gi,V,ce;return V=P.exec(E),V?(this.saveSelection(),this.selectAllContents(),ce=Z.call(this,V[1],M),this.restoreSelection()):ce=Z.call(this,E,M),(E==="insertunorderedlist"||E==="insertorderedlist")&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),ce},getSelectedParentElement:function(E){return E===void 0&&(E=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(E)},selectAllContents:function(){var E=e.selection.getSelectionElement(this.options.contentWindow);if(E){for(;E.children.length===1;)E=E.children[0];this.selectElement(E)}},selectElement:function(E){e.selection.selectNode(E,this.options.ownerDocument);var M=e.selection.getSelectionElement(this.options.contentWindow);M&&this.events.focusElement(M)},getFocusedElement:function(){var E;return this.elements.some(function(M){return!E&&M.getAttribute("data-medium-focused")&&(E=M),!!E},this),E},exportSelection:function(){var E=e.selection.getSelectionElement(this.options.contentWindow),M=this.elements.indexOf(E),P=null;return M>=0&&(P=e.selection.exportSelection(E,this.options.ownerDocument)),P!==null&&M!==0&&(P.editableElementIndex=M),P},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(E,M){if(E){var P=this.elements[E.editableElementIndex||0];e.selection.importSelection(E,P,this.options.ownerDocument,M)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(E){var M=e.selection.getSelectionElement(this.options.contentWindow),P={},V;if(this.elements.indexOf(M)!==-1){try{if(this.events.disableCustomEvent("editableInput"),E.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),V=E.url||E.value,V&&V.trim().length>0){var ce=this.options.contentWindow.getSelection();if(ce){var be=ce.getRangeAt(0),Ue=be.commonAncestorContainer,Ge,ge,Ne,ke;if(be.endContainer.nodeType===3&&be.startContainer.nodeType!==3&&be.startOffset===0&&be.startContainer.firstChild===be.endContainer&&(Ue=be.endContainer),ge=e.util.getClosestBlockContainer(be.startContainer),Ne=e.util.getClosestBlockContainer(be.endContainer),Ue.nodeType!==3&&Ue.textContent.length!==0&&ge===Ne){var Ce=ge||M,je=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),Ge=this.exportSelection(),je.appendChild(Ce.cloneNode(!0)),M===Ce?e.selection.select(this.options.ownerDocument,Ce.firstChild,0,Ce.lastChild,Ce.lastChild.nodeType===3?Ce.lastChild.nodeValue.length:Ce.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,Ce,0,Ce,Ce.childNodes.length);var T=this.exportSelection();ke=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,je,{start:Ge.start-T.start,end:Ge.end-T.start,editableElementIndex:Ge.editableElementIndex}),ke.length===0&&(je=this.options.ownerDocument.createDocumentFragment(),je.appendChild(Ue.cloneNode(!0)),ke=[je.firstChild.firstChild,je.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,ke,V.trim());var X=(je.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,je.firstChild.innerHTML.replace(/^\s+/,"")),Ge.start-=X,Ge.end-=X,this.importSelection(Ge)}else this.options.ownerDocument.execCommand("createLink",!1,V);this.options.targetBlank||E.target==="_blank"?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),V):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),V),E.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),E.buttonClass)}}if(this.options.targetBlank||E.target==="_blank"||E.buttonClass){P=this.options.ownerDocument.createEvent("HTMLEvents"),P.initEvent("input",!0,!0,this.options.contentWindow);for(var $=0,Q=this.elements.length;$<Q;$+=1)this.elements[$].dispatchEvent(P)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",P,M)}},cleanPaste:function(E){this.getExtensionByName("paste").cleanPaste(E)},pasteHTML:function(E,M){this.getExtensionByName("paste").pasteHTML(E,M)},setContent:function(E,M){if(M=M||0,this.elements[M]){var P=this.elements[M];P.innerHTML=E,this.checkContentChanged(P)}},getContent:function(E){return E=E||0,this.elements[E]?this.elements[E].innerHTML.trim():null},checkContentChanged:function(E){E=E||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(E,{target:E,currentTarget:E})},resetContent:function(E){if(E){var M=this.elements.indexOf(E);M!==-1&&this.setContent(se[E.getAttribute("medium-editor-index")],M);return}this.elements.forEach(function(P,V){this.setContent(se[P.getAttribute("medium-editor-index")],V)},this)},addElements:function(E){var M=d(E,this.options.ownerDocument,!0);if(M.length===0)return!1;M.forEach(function(P){P=D.call(this,P,this.id),this.elements.push(P),this.trigger("addElement",{target:P,currentTarget:P},P)},this)},removeElements:function(E){var M=d(E,this.options.ownerDocument),P=M.map(function(V){return V.getAttribute("medium-editor-textarea-id")&&V.parentNode?V.parentNode.querySelector('div[medium-editor-textarea-id="'+V.getAttribute("medium-editor-textarea-id")+'"]'):V});this.elements=this.elements.filter(function(V){return P.indexOf(V)!==-1?(this.events.cleanupElement(V),V.getAttribute("medium-editor-textarea-id")&&f(V),this.trigger("removeElement",{target:V,currentTarget:V},V),!1):!0},this)}},e.getEditorFromElement=function(E){var M=E.getAttribute("data-medium-editor-editor-index"),P=E&&E.ownerDocument&&(E.ownerDocument.defaultView||E.ownerDocument.parentWindow);return P&&P._mediumEditors&&P._mediumEditors[M]?P._mediumEditors[M]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(t){var n=t.split("-"),i=n[0].split("."),o=n.length>1?n[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:o,toString:function(){return[i[0],i[1],i[2]].join(".")+(o?"-"+o:"")}}},e.version=e.parseVersionString.call(this,"5.23.3"),e}())})(Sc);var i_=Sc.exports;const ya=ba(i_);/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var Nl=function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")},Pl=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),Eo=function(){function r(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(u){o=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(r){return this.indexOf(r)===0};String.prototype.padStart=String.prototype.padStart||function(r,e){for(var t=this;t.length<r;)t=e+t;return t};var o_={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Rd(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=e>0?r.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):r.toString();return t||"0"}var a_=function(){function r(e,t,n,i){Nl(this,r);var o=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),d=Eo(u,4),f=d[0],c=d[1],h=d[2],g=d[3];g===void 0&&(g=1),f/=360,c/=100,h/=100,o.hsla=[f,c,h,g]}else if(l.startsWith("rgb")){var p=l.match(/([\-\d\.e]+)/g).map(Number),v=Eo(p,4),y=v[0],b=v[1],C=v[2],R=v[3];R===void 0&&(R=1),o.rgba=[y,b,C,R]}else l.startsWith("#")?o.rgba=r.hexToRgb(l):o.rgba=r.nameToRgb(l)||r.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(n===void 0){var s=e&&""+e;s&&a(s.toLowerCase())}else this.rgba=[e,t,n,i===void 0?1:i]}return Pl(r,[{key:"printRGB",value:function(t){var n=t?this.rgba:this.rgba.slice(0,3),i=n.map(function(o,a){return Rd(o,a===3?3:0)});return t?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(t){var n=[360,100,100,1],i=["","%","%",""],o=t?this.hsla:this.hsla.slice(0,3),a=o.map(function(s,l){return Rd(s*n[l],l===3?3:1)+i[l]});return t?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(t){var n=this.hex;return t?n:n.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=r.hslToRgb(this._hsla)},set:function(t){t.length===3&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=r.rgbToHsl(this._rgba)},set:function(t){t.length===3&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,n=t.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+n.map(function(i){return i.padStart(2,"0")}).join("")},set:function(t){this.rgba=r.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var n=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!n.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=n.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(t){var n=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=o_[n];return i===void 0?i:r.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var n=Eo(t,4),i=n[0],o=n[1],a=n[2],s=n[3];i/=255,o/=255,a/=255;var l=Math.max(i,o,a),u=Math.min(i,o,a),d=void 0,f=void 0,c=(l+u)/2;if(l===u)d=f=0;else{var h=l-u;switch(f=c>.5?h/(2-l-u):h/(l+u),l){case i:d=(o-a)/h+(o<a?6:0);break;case o:d=(a-i)/h+2;break;case a:d=(i-o)/h+4;break}d/=6}return[d,f,c,s]}},{key:"hslToRgb",value:function(t){var n=Eo(t,4),i=n[0],o=n[1],a=n[2],s=n[3],l=void 0,u=void 0,d=void 0;if(o===0)l=u=d=a;else{var f=function(v,y,b){return b<0&&(b+=1),b>1&&(b-=1),b<.16666666666666666?v+(y-v)*6*b:b<.5?y:b<.6666666666666666?v+(y-v)*(.6666666666666666-b)*6:v},c=a<.5?a*(1+o):a+o-a*o,h=2*a-c;l=f(h,c,i+1/3),u=f(h,c,i),d=f(h,c,i-1/3)}var g=[l*255,u*255,d*255].map(Math.round);return g[3]=s,g}}]),r}(),s_=function(){function r(){Nl(this,r),this._events=[]}return Pl(r,[{key:"add",value:function(t,n,i){t.addEventListener(n,i,!1),this._events.push({target:t,type:n,handler:i})}},{key:"remove",value:function(t,n,i){this._events=this._events.filter(function(o){var a=!0;return t&&t!==o.target&&(a=!1),n&&n!==o.type&&(a=!1),i&&i!==o.handler&&(a=!1),a&&r._doRemove(o.target,o.type,o.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(t){return r._doRemove(t.target,t.type,t.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,n,i){t.removeEventListener(n,i,!1)}}]),r}();function l_(r){var e=document.createElement("div");return e.innerHTML=r,e.firstElementChild}function as(r,e,t){var n=!1;function i(l,u,d){return Math.max(u,Math.min(l,d))}function o(l,u,d){if(d&&(n=!0),!!n){l.preventDefault();var f=e.getBoundingClientRect(),c=f.width,h=f.height,g=u.clientX,p=u.clientY,v=i(g-f.left,0,c),y=i(p-f.top,0,h);t(v/c,y/h)}}function a(l,u){var d=l.buttons===void 0?l.which:l.buttons;d===1?o(l,l,u):n=!1}function s(l,u){l.touches.length===1?o(l,l.touches[0],u):n=!1}r.add(e,"mousedown",function(l){a(l,!0)}),r.add(e,"touchstart",function(l){s(l,!0)}),r.add(window,"mousemove",a),r.add(e,"touchmove",s),r.add(window,"mouseup",function(l){n=!1}),r.add(e,"touchend",function(l){n=!1}),r.add(e,"touchcancel",function(l){n=!1})}var u_=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,d_=360,Cc="keydown",wo="mousedown",ss="focusin";function mn(r,e){return(e||document).querySelector(r)}function f_(r){r.preventDefault(),r.stopPropagation()}function ls(r,e,t,n,i){r.add(e,Cc,function(o){t.indexOf(o.key)>=0&&n(o)})}var Oc=function(){function r(e){Nl(this,r),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new s_,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Pl(r,[{key:"setOptions",value:function(t){var n=this;if(!t)return;var i=this.settings;function o(u,d,f){for(var c in u)d[c]=u[c]}if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var a=t.color||t.colour;a&&this._setColor(a)}var s=i.parent;if(s&&i.popup&&!this._popupInited){var l=function(d){return n.openHandler(d)};this._events.add(s,"click",l),ls(this._events,s,[" ","Spacebar","Enter"],l),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var n=t&&t.type===Cc?this._domEdit:this.domElement;setTimeout(function(){return n.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var n=t&&t.type,i=!1;if(!t)i=!0;else if(n===wo||n===ss){var o=(this.__containedEvent||0)+100;t.timeStamp>o&&(i=!0)}else f_(t),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",n!==wo&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,n){this.closeHandler(),this.setOptions(t),n&&this.openHandler()}},{key:"setColor",value:function(t,n){this._setColor(t,{silent:n})}},{key:"_setColor",value:function(t,n){if(typeof t=="string"&&(t=t.trim()),!!t){n=n||{};var i=void 0;try{i=new a_(t)}catch(a){if(n.failSilently)return;throw a}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,n)}}},{key:"setColour",value:function(t,n){this.setColor(t,n)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var n=this._toggleDOM(!0);return this._setPosition(),n}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=l_(i);return this.domElement=o,this._domH=mn(".picker_hue",o),this._domSL=mn(".picker_sl",o),this._domA=mn(".picker_alpha",o),this._domEdit=mn(".picker_editor input",o),this._domSample=mn(".picker_sample",o),this._domOkay=mn(".picker_done button",o),this._domCancel=mn(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,n=this,i=this.domElement,o=this._events;function a(u,d,f){o.add(u,d,f)}a(i,"click",function(u){return u.preventDefault()}),as(o,this._domH,function(u,d){return n._setHSLA(u)}),as(o,this._domSL,function(u,d){return n._setHSLA(null,u,1-d)}),this.settings.alpha&&as(o,this._domA,function(u,d){return n._setHSLA(null,null,null,1-d)});var s=this._domEdit;a(s,"input",function(u){n._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(s,"focus",function(u){var d=this;d.selectionStart===d.selectionEnd&&d.select()}),this._ifPopup(function(){var u=function(c){return t.closeHandler(c)};a(window,wo,u),a(window,ss,u),ls(o,i,["Esc","Escape"],u);var d=function(c){t.__containedEvent=c.timeStamp};a(i,wo,d),a(i,ss,d),a(t._domCancel,"click",u)});var l=function(d){t._ifPopup(function(){return t.closeHandler(d)}),t.onDone&&t.onDone(t.colour)};a(this._domOkay,"click",l),ls(o,i,["Enter"],l)}},{key:"_setPosition",value:function(){var t=this.settings.parent,n=this.domElement;t!==n.parentNode&&t.appendChild(n),this._ifPopup(function(i){getComputedStyle(t).position==="static"&&(t.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===o?n.classList.add(a):n.classList.remove(a)}),n.classList.add(o)})}},{key:"_setHSLA",value:function(t,n,i,o,a){a=a||{};var s=this.colour,l=s.hsla;[t,n,i,o].forEach(function(u,d){(u||u===0)&&(l[d]=u)}),s.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(s)}},{key:"_updateUI",value:function(t){if(!this.domElement)return;t=t||{};var n=this.colour,i=n.hsla,o="hsl("+i[0]*d_+", 100%, 50%)",a=n.hslString,s=n.hslaString,l=this._domH,u=this._domSL,d=this._domA,f=mn(".picker_selector",l),c=mn(".picker_selector",u),h=mn(".picker_selector",d);function g(D,w,A){w.style.left=A*100+"%"}function p(D,w,A){w.style.top=A*100+"%"}g(l,f,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,g(u,c,i[1]),p(u,c,1-i[2]),u.style.color=a,p(d,h,1-i[3]);var v=a,y=v.replace("hsl","hsla").replace(")",", 0)"),b="linear-gradient("+[v,y]+")";if(this._domA.style.background=b+", "+u_,!t.fromEditor){var C=this.settings.editorFormat,R=this.settings.alpha,j=void 0;switch(C){case"rgb":j=n.printRGB(R);break;case"hsl":j=n.printHSL(R);break;default:j=n.printHex(R)}this._domEdit.value=j}this._domSample.style.color=s}},{key:"_ifPopup",value:function(t,n){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):n&&n()}},{key:"_toggleDOM",value:function(t){var n=this.domElement;if(!n)return!1;var i=t?"":"none",o=n.style.display!==i;return o&&(n.style.display=i),o}}]),r}();{var us=document.createElement("style");us.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(us),Oc.StyleElement=us}var Ac={exports:{}};(function(r,e){(function(t,n){r.exports=t()})(function(){var t="object",n="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function u(T,X){var $=typeof T[X];return $==n||!!($==t&&T[X])||$=="unknown"}function d(T,X){return!!(typeof T[X]==t&&T[X])}function f(T,X){return typeof T[X]!=i}function c(T){return function(X,$){for(var Q=$.length;Q--;)if(!T(X,$[Q]))return!1;return!0}}var h=c(u),g=c(d),p=c(f);function v(T){return T&&h(T,l)&&p(T,s)}function y(T){return d(T,"body")?T.body:T.getElementsByTagName("body")[0]}var b=[].forEach?function(T,X){T.forEach(X)}:function(T,X){for(var $=0,Q=T.length;$<Q;++$)X(T[$],$)},C={},R=typeof window!=i&&typeof document!=i,j={isHostMethod:u,isHostObject:d,isHostProperty:f,areHostMethods:h,areHostObjects:g,areHostProperties:p,isTextRange:v,getBody:y,forEach:b},D={version:"1.3.2",initialized:!1,isBrowser:R,supported:!0,util:j,features:{},modules:C,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function w(T){typeof console!=i&&u(console,"log")&&console.log(T)}function A(T,X){R&&X?alert(T):w(T)}function z(T){D.initialized=!0,D.supported=!1,A("Rangy is not supported in this environment. Reason: "+T,D.config.alertOnFail)}D.fail=z;function Z(T){A("Rangy warning: "+T,D.config.alertOnWarn)}D.warn=Z;var oe;({}).hasOwnProperty?(j.extend=oe=function(T,X,$){var Q,ne;for(var pe in X)pe==="__proto__"||pe==="constructor"||pe==="prototype"||X.hasOwnProperty(pe)&&(Q=T[pe],ne=X[pe],$&&Q!==null&&typeof Q=="object"&&ne!==null&&typeof ne=="object"&&oe(Q,ne,!0),T[pe]=ne);return X.hasOwnProperty("toString")&&(T.toString=X.toString),T},j.createOptions=function(T,X){var $={};return oe($,X),T&&oe($,T),$}):z("hasOwnProperty not supported"),R||z("Rangy can only run in a browser"),function(){var T;if(R){var X=document.createElement("div");X.appendChild(document.createElement("span"));var $=[].slice;try{$.call(X.childNodes,0)[0].nodeType==1&&(T=function(Q){return $.call(Q,0)})}catch{}}T||(T=function(Q){for(var ne=[],pe=0,Ee=Q.length;pe<Ee;++pe)ne[pe]=Q[pe];return ne}),j.toArray=T}();var se;R&&(u(document,"addEventListener")?se=function(T,X,$){T.addEventListener(X,$,!1)}:u(document,"attachEvent")?se=function(T,X,$){T.attachEvent("on"+X,$)}:z("Document does not have required addEventListener or attachEvent method"),j.addListener=se);var E=[];function M(T){return T.message||T.description||String(T)}function P(){if(!(!R||D.initialized)){var T,X=!1,$=!1;u(document,"createRange")&&(T=document.createRange(),h(T,a)&&p(T,o)&&(X=!0));var Q=y(document);if(!Q||Q.nodeName.toLowerCase()!="body"){z("No body element found");return}if(Q&&u(Q,"createTextRange")&&(T=Q.createTextRange(),v(T)&&($=!0)),!X&&!$){z("Neither Range nor TextRange are available");return}D.initialized=!0,D.features={implementsDomRange:X,implementsTextRange:$};var ne,pe;for(var Ee in C)(ne=C[Ee])instanceof Ge&&ne.init(ne,D);for(var et=0,lt=E.length;et<lt;++et)try{E[et](D)}catch(ft){pe="Rangy init listener threw an exception. Continuing. Detail: "+M(ft),w(pe)}}}function V(T,X,$){$&&(T+=" in module "+$.name),D.warn("DEPRECATED: "+T+" is deprecated. Please use "+X+" instead.")}function ce(T,X,$,Q){T[X]=function(){return V(X,$,Q),T[$].apply(T,j.toArray(arguments))}}j.deprecationNotice=V,j.createAliasForDeprecatedMethod=ce,D.init=P,D.addInitListener=function(T){D.initialized?T(D):E.push(T)};var be=[];D.addShimListener=function(T){be.push(T)};function Ue(T){T=T||window,P();for(var X=0,$=be.length;X<$;++X)be[X](T)}R&&(D.shim=D.createMissingNativeApi=Ue,ce(D,"createMissingNativeApi","shim"));function Ge(T,X,$){this.name=T,this.dependencies=X,this.initialized=!1,this.supported=!1,this.initializer=$}Ge.prototype={init:function(){for(var T=this.dependencies||[],X=0,$=T.length,Q,ne;X<$;++X){if(ne=T[X],Q=C[ne],!Q||!(Q instanceof Ge))throw new Error("required module '"+ne+"' not found");if(Q.init(),!Q.supported)throw new Error("required module '"+ne+"' not supported")}this.initializer(this)},fail:function(T){throw this.initialized=!0,this.supported=!1,new Error(T)},warn:function(T){D.warn("Module "+this.name+": "+T)},deprecationNotice:function(T,X){D.warn("DEPRECATED: "+T+" in module "+this.name+" is deprecated. Please use "+X+" instead")},createError:function(T){return new Error("Error in Rangy "+this.name+" module: "+T)}};function ge(T,X,$){var Q=new Ge(T,X,function(ne){if(!ne.initialized){ne.initialized=!0;try{$(D,ne),ne.supported=!0}catch(Ee){var pe="Module '"+T+"' failed to load: "+M(Ee);w(pe),Ee.stack&&w(Ee.stack)}}});return C[T]=Q,Q}D.createModule=function(T){var X,$;arguments.length==2?(X=arguments[1],$=[]):(X=arguments[2],$=arguments[1]);var Q=ge(T,$,X);D.initialized&&D.supported&&Q.init()},D.createCoreModule=function(T,X,$){ge(T,X,$)};function Ne(){}D.RangePrototype=Ne,D.rangePrototype=new Ne;function ke(){}D.selectionPrototype=new ke,D.createCoreModule("DomUtil",[],function(T,X){var $="undefined",Q=T.util,ne=Q.getBody;Q.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||X.fail("document missing a Node creation method"),Q.isHostMethod(document,"getElementsByTagName")||X.fail("document missing getElementsByTagName method");var pe=document.createElement("div");Q.areHostMethods(pe,["insertBefore","appendChild","cloneNode"])||X.fail("Incomplete Element implementation"),Q.isHostProperty(pe,"innerHTML")||X.fail("Element is missing innerHTML property");var Ee=document.createTextNode("test");Q.areHostMethods(Ee,["splitText","deleteData","insertData","appendData","cloneNode"])||X.fail("Incomplete Text Node implementation");var et=function(H,te){for(var Te=H.length;Te--;)if(H[Te]===te)return!0;return!1};function lt(H){var te;return typeof H.namespaceURI==$||(te=H.namespaceURI)===null||te=="http://www.w3.org/1999/xhtml"}function ft(H){var te=H.parentNode;return te.nodeType==1?te:null}function qe(H){for(var te=0;H=H.previousSibling;)++te;return te}function gt(H){switch(H.nodeType){case 7:case 10:return 0;case 3:case 8:return H.length;default:return H.childNodes.length}}function yt(H,te){var Te=[],xe;for(xe=H;xe;xe=xe.parentNode)Te.push(xe);for(xe=te;xe;xe=xe.parentNode)if(et(Te,xe))return xe;return null}function x(H,te,Te){for(var xe=Te?te:te.parentNode;xe;){if(xe===H)return!0;xe=xe.parentNode}return!1}function S(H,te){return x(H,te,!0)}function O(H,te,Te){for(var xe,st=Te?H:H.parentNode;st;){if(xe=st.parentNode,xe===te)return st;st=xe}return null}function W(H){var te=H.nodeType;return te==3||te==4||te==8}function N(H){if(!H)return!1;var te=H.nodeType;return te==3||te==8}function K(H,te){var Te=te.nextSibling,xe=te.parentNode;return Te?xe.insertBefore(H,Te):xe.appendChild(H),H}function U(H,te,Te){var xe=H.cloneNode(!1);if(xe.deleteData(0,te),H.deleteData(te,H.length-te),K(xe,H),Te)for(var st=0,Je;Je=Te[st++];)Je.node==H&&Je.offset>te?(Je.node=xe,Je.offset-=te):Je.node==H.parentNode&&Je.offset>qe(H)&&++Je.offset;return xe}function q(H){if(H.nodeType==9)return H;if(typeof H.ownerDocument!=$)return H.ownerDocument;if(typeof H.document!=$)return H.document;if(H.parentNode)return q(H.parentNode);throw X.createError("getDocument: no document found for node")}function we(H){var te=q(H);if(typeof te.defaultView!=$)return te.defaultView;if(typeof te.parentWindow!=$)return te.parentWindow;throw X.createError("Cannot get a window object for node")}function he(H){if(typeof H.contentDocument!=$)return H.contentDocument;if(typeof H.contentWindow!=$)return H.contentWindow.document;throw X.createError("getIframeDocument: No Document object found for iframe element")}function re(H){if(typeof H.contentWindow!=$)return H.contentWindow;if(typeof H.contentDocument!=$)return H.contentDocument.defaultView;throw X.createError("getIframeWindow: No Window object found for iframe element")}function Xe(H){return H&&Q.isHostMethod(H,"setTimeout")&&Q.isHostObject(H,"document")}function Ie(H,te,Te){var xe;if(H?Q.isHostProperty(H,"nodeType")?xe=H.nodeType==1&&H.tagName.toLowerCase()=="iframe"?he(H):q(H):Xe(H)&&(xe=H.document):xe=document,!xe)throw te.createError(Te+"(): Parameter must be a Window object or DOM node");return xe}function Fe(H){for(var te;te=H.parentNode;)H=te;return H}function mt(H,te,Te,xe){var st,Je,Qt,Xt,Tt;if(H==Te)return te===xe?0:te<xe?-1:1;if(st=O(Te,H,!0))return te<=qe(st)?-1:1;if(st=O(H,Te,!0))return qe(st)<xe?-1:1;if(Je=yt(H,Te),!Je)throw new Error("comparePoints error: nodes have no common ancestor");if(Qt=H===Je?Je:O(H,Je,!0),Xt=Te===Je?Je:O(Te,Je,!0),Qt===Xt)throw X.createError("comparePoints got to case 4 and childA and childB are the same!");for(Tt=Je.firstChild;Tt;){if(Tt===Qt)return-1;if(Tt===Xt)return 1;Tt=Tt.nextSibling}}var ie=!1;function ve(H){var te;try{return te=H.parentNode,!1}catch{return!0}}(function(){var H=document.createElement("b");H.innerHTML="1";var te=H.firstChild;H.innerHTML="<br />",ie=ve(te),T.features.crashyTextNodes=ie})();function $e(H){if(!H)return"[No node]";if(ie&&ve(H))return"[Broken node]";if(W(H))return'"'+H.data+'"';if(H.nodeType==1){var te=H.id?' id="'+H.id+'"':"";return"<"+H.nodeName+te+">[index:"+qe(H)+",length:"+H.childNodes.length+"]["+(H.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return H.nodeName}function it(H){for(var te=q(H).createDocumentFragment(),Te;Te=H.firstChild;)te.appendChild(Te);return te}var ct;typeof window.getComputedStyle!=$?ct=function(H,te){return we(H).getComputedStyle(H,null)[te]}:typeof document.documentElement.currentStyle!=$?ct=function(H,te){return H.currentStyle?H.currentStyle[te]:""}:X.fail("No means of obtaining computed style properties found");function zt(H,te,Te){var xe=ne(H),st=H.createElement("div");st.contentEditable=""+!!Te,te&&(st.innerHTML=te);var Je=xe.firstChild;return Je?xe.insertBefore(st,Je):xe.appendChild(st),st}function Mt(H){return H.parentNode.removeChild(H)}function _t(H){this.root=H,this._next=H}_t.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var H=this._current=this._next,te,Te;if(this._current)if(te=H.firstChild,te)this._next=te;else{for(Te=null;H!==this.root&&!(Te=H.nextSibling);)H=H.parentNode;this._next=Te}return this._current},detach:function(){this._current=this._next=this.root=null}};function bt(H){return new _t(H)}function St(H,te){this.node=H,this.offset=te}St.prototype={equals:function(H){return!!H&&this.node===H.node&&this.offset==H.offset},inspect:function(){return"[DomPosition("+$e(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function kt(H){this.code=this[H],this.codeName=H,this.message="DOMException: "+this.codeName}kt.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},kt.prototype.toString=function(){return this.message},T.dom={arrayContains:et,isHtmlNamespace:lt,parentElement:ft,getNodeIndex:qe,getNodeLength:gt,getCommonAncestor:yt,isAncestorOf:x,isOrIsAncestorOf:S,getClosestAncestorIn:O,isCharacterDataNode:W,isTextOrCommentNode:N,insertAfter:K,splitDataNode:U,getDocument:q,getWindow:we,getIframeWindow:re,getIframeDocument:he,getBody:ne,isWindow:Xe,getContentDocument:Ie,getRootContainer:Fe,comparePoints:mt,isBrokenNode:ve,inspectNode:$e,getComputedStyleProperty:ct,createTestElement:zt,removeNode:Mt,fragmentFromNodeChildren:it,createIterator:bt,DomPosition:St},T.DOMException=kt}),D.createCoreModule("DomRange",["DomUtil"],function(T,X){var $=T.dom,Q=T.util,ne=$.DomPosition,pe=T.DOMException,Ee=$.isCharacterDataNode,et=$.getNodeIndex,lt=$.isOrIsAncestorOf,ft=$.getDocument,qe=$.comparePoints,gt=$.splitDataNode,yt=$.getClosestAncestorIn,x=$.getNodeLength,S=$.arrayContains,O=$.getRootContainer,W=T.features.crashyTextNodes,N=$.removeNode;function K(_,L){return _.nodeType!=3&&(lt(_,L.startContainer)||lt(_,L.endContainer))}function U(_){return _.document||ft(_.startContainer)}function q(_){return O(_.startContainer)}function we(_){return new ne(_.parentNode,et(_))}function he(_){return new ne(_.parentNode,et(_)+1)}function re(_,L,Y){var ee=_.nodeType==11?_.firstChild:_;return Ee(L)?Y==L.length?$.insertAfter(_,L):L.parentNode.insertBefore(_,Y==0?L:gt(L,Y)):Y>=L.childNodes.length?L.appendChild(_):L.insertBefore(_,L.childNodes[Y]),ee}function Xe(_,L,Y){if(tt(_),tt(L),U(L)!=U(_))throw new pe("WRONG_DOCUMENT_ERR");var ee=qe(_.startContainer,_.startOffset,L.endContainer,L.endOffset),ye=qe(_.endContainer,_.endOffset,L.startContainer,L.startOffset);return Y?ee<=0&&ye>=0:ee<0&&ye>0}function Ie(_){for(var L,Y,ee=U(_.range).createDocumentFragment(),ye;Y=_.next();){if(L=_.isPartiallySelectedSubtree(),Y=Y.cloneNode(!L),L&&(ye=_.getSubtreeIterator(),Y.appendChild(Ie(ye)),ye.detach()),Y.nodeType==10)throw new pe("HIERARCHY_REQUEST_ERR");ee.appendChild(Y)}return ee}function Fe(_,L,Y){var ee,ye;Y=Y||{stop:!1};for(var ze,J;ze=_.next();)if(_.isPartiallySelectedSubtree()){if(L(ze)===!1){Y.stop=!0;return}else if(J=_.getSubtreeIterator(),Fe(J,L,Y),J.detach(),Y.stop)return}else for(ee=$.createIterator(ze);ye=ee.next();)if(L(ye)===!1){Y.stop=!0;return}}function mt(_){for(var L;_.next();)_.isPartiallySelectedSubtree()?(L=_.getSubtreeIterator(),mt(L),L.detach()):_.remove()}function ie(_){for(var L,Y=U(_.range).createDocumentFragment(),ee;L=_.next();){if(_.isPartiallySelectedSubtree()?(L=L.cloneNode(!1),ee=_.getSubtreeIterator(),L.appendChild(ie(ee)),ee.detach()):_.remove(),L.nodeType==10)throw new pe("HIERARCHY_REQUEST_ERR");Y.appendChild(L)}return Y}function ve(_,L,Y){var ee=!!(L&&L.length),ye,ze=!!Y;ee&&(ye=new RegExp("^("+L.join("|")+")$"));var J=[];return Fe(new it(_,!1),function(de){if(!(ee&&!ye.test(de.nodeType))&&!(ze&&!Y(de))){var Se=_.startContainer;if(!(de==Se&&Ee(Se)&&_.startOffset==Se.length)){var Be=_.endContainer;de==Be&&Ee(Be)&&_.endOffset==0||J.push(de)}}}),J}function $e(_){var L=typeof _.getName>"u"?"Range":_.getName();return"["+L+"("+$.inspectNode(_.startContainer)+":"+_.startOffset+", "+$.inspectNode(_.endContainer)+":"+_.endOffset+")]"}function it(_,L){if(this.range=_,this.clonePartiallySelectedTextNodes=L,!_.collapsed){this.sc=_.startContainer,this.so=_.startOffset,this.ec=_.endContainer,this.eo=_.endOffset;var Y=_.commonAncestorContainer;this.sc===this.ec&&Ee(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===Y&&!Ee(this.sc)?this.sc.childNodes[this.so]:yt(this.sc,Y,!0),this._last=this.ec===Y&&!Ee(this.ec)?this.ec.childNodes[this.eo-1]:yt(this.ec,Y,!0))}}it.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var _=this._current=this._next;return _&&(this._next=_!==this._last?_.nextSibling:null,Ee(_)&&this.clonePartiallySelectedTextNodes&&(_===this.ec&&(_=_.cloneNode(!0)).deleteData(this.eo,_.length-this.eo),this._current===this.sc&&(_=_.cloneNode(!0)).deleteData(0,this.so))),_},remove:function(){var _=this._current,L,Y;Ee(_)&&(_===this.sc||_===this.ec)?(L=_===this.sc?this.so:0,Y=_===this.ec?this.eo:_.length,L!=Y&&_.deleteData(L,Y-L)):_.parentNode&&N(_)},isPartiallySelectedSubtree:function(){var _=this._current;return K(_,this.range)},getSubtreeIterator:function(){var _;if(this.isSingleCharacterDataNode)_=this.range.cloneRange(),_.collapse(!1);else{_=new ht(U(this.range));var L=this._current,Y=L,ee=0,ye=L,ze=x(L);lt(L,this.sc)&&(Y=this.sc,ee=this.so),lt(L,this.ec)&&(ye=this.ec,ze=this.eo),Ye(_,Y,ee,ye,ze)}return new it(_,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var ct=[1,3,4,5,7,8,10],zt=[2,9,11],Mt=[5,6,10,12],_t=[1,3,4,5,7,8,10,11],bt=[1,3,4,5,7,8];function St(_){return function(L,Y){for(var ee,ye=Y?L:L.parentNode;ye;){if(ee=ye.nodeType,S(_,ee))return ye;ye=ye.parentNode}return null}}var kt=St([9,11]),H=St(Mt),te=St([6,10,12]),Te=St([1]);function xe(_,L){if(te(_,L))throw new pe("INVALID_NODE_TYPE_ERR")}function st(_,L){if(!S(L,_.nodeType))throw new pe("INVALID_NODE_TYPE_ERR")}function Je(_,L){if(L<0||L>(Ee(_)?_.length:_.childNodes.length))throw new pe("INDEX_SIZE_ERR")}function Qt(_,L){if(kt(_,!0)!==kt(L,!0))throw new pe("WRONG_DOCUMENT_ERR")}function Xt(_){if(H(_,!0))throw new pe("NO_MODIFICATION_ALLOWED_ERR")}function Tt(_,L){if(!_)throw new pe(L)}function Qr(_,L){return L<=(Ee(_)?_.length:_.childNodes.length)}function Qn(_){return!!_.startContainer&&!!_.endContainer&&!(W&&($.isBrokenNode(_.startContainer)||$.isBrokenNode(_.endContainer)))&&O(_.startContainer)==O(_.endContainer)&&Qr(_.startContainer,_.startOffset)&&Qr(_.endContainer,_.endOffset)}function tt(_){if(!Qn(_))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+_.inspect()+")")}var ei=document.createElement("style"),Mn=!1;try{ei.innerHTML="<b>x</b>",Mn=ei.firstChild.nodeType==3}catch{}T.features.htmlParsingConforms=Mn;var ti=Mn?function(_){var L=this.startContainer,Y=ft(L);if(!L)throw new pe("INVALID_STATE_ERR");var ee=null;return L.nodeType==1?ee=L:Ee(L)&&(ee=$.parentElement(L)),ee===null||ee.nodeName=="HTML"&&$.isHtmlNamespace(ft(ee).documentElement)&&$.isHtmlNamespace(ee)?ee=Y.createElement("body"):ee=ee.cloneNode(!1),ee.innerHTML=_,$.fragmentFromNodeChildren(ee)}:function(_){var L=U(this),Y=L.createElement("body");return Y.innerHTML=_,$.fragmentFromNodeChildren(Y)};function yr(_,L){tt(_);var Y=_.startContainer,ee=_.startOffset,ye=_.endContainer,ze=_.endOffset,J=Y===ye;Ee(ye)&&ze>0&&ze<ye.length&&gt(ye,ze,L),Ee(Y)&&ee>0&&ee<Y.length&&(Y=gt(Y,ee,L),J?(ze-=ee,ye=Y):ye==Y.parentNode&&ze>=et(Y)&&ze++,ee=0),_.setStartAndEnd(Y,ee,ye,ze)}function Pe(_){tt(_);var L=_.commonAncestorContainer.parentNode.cloneNode(!1);return L.appendChild(_.cloneContents()),L.innerHTML}var mr=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_r=0,er=1,Ji=2,Ln=3,tr=0,ni=1,ri=2,br=3;Q.extend(T.rangePrototype,{compareBoundaryPoints:function(_,L){tt(this),Qt(this.startContainer,L.startContainer);var Y,ee,ye,ze,J=_==Ln||_==_r?"start":"end",de=_==er||_==_r?"start":"end";return Y=this[J+"Container"],ee=this[J+"Offset"],ye=L[de+"Container"],ze=L[de+"Offset"],qe(Y,ee,ye,ze)},insertNode:function(_){if(tt(this),st(_,_t),Xt(this.startContainer),lt(_,this.startContainer))throw new pe("HIERARCHY_REQUEST_ERR");var L=re(_,this.startContainer,this.startOffset);this.setStartBefore(L)},cloneContents:function(){tt(this);var _,L;if(this.collapsed)return U(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Ee(this.startContainer))return _=this.startContainer.cloneNode(!0),_.data=_.data.slice(this.startOffset,this.endOffset),L=U(this).createDocumentFragment(),L.appendChild(_),L;var Y=new it(this,!0);return _=Ie(Y),Y.detach(),_},canSurroundContents:function(){tt(this),Xt(this.startContainer),Xt(this.endContainer);var _=new it(this,!0),L=_._first&&K(_._first,this)||_._last&&K(_._last,this);return _.detach(),!L},surroundContents:function(_){if(st(_,bt),!this.canSurroundContents())throw new pe("INVALID_STATE_ERR");var L=this.extractContents();if(_.hasChildNodes())for(;_.lastChild;)_.removeChild(_.lastChild);re(_,this.startContainer,this.startOffset),_.appendChild(L),this.selectNode(_)},cloneRange:function(){tt(this);for(var _=new ht(U(this)),L=mr.length,Y;L--;)Y=mr[L],_[Y]=this[Y];return _},toString:function(){tt(this);var _=this.startContainer;if(_===this.endContainer&&Ee(_))return _.nodeType==3||_.nodeType==4?_.data.slice(this.startOffset,this.endOffset):"";var L=[],Y=new it(this,!0);return Fe(Y,function(ee){(ee.nodeType==3||ee.nodeType==4)&&L.push(ee.data)}),Y.detach(),L.join("")},compareNode:function(_){tt(this);var L=_.parentNode,Y=et(_);if(!L)throw new pe("NOT_FOUND_ERR");var ee=this.comparePoint(L,Y),ye=this.comparePoint(L,Y+1);return ee<0?ye>0?ri:tr:ye>0?ni:br},comparePoint:function(_,L){return tt(this),Tt(_,"HIERARCHY_REQUEST_ERR"),Qt(_,this.startContainer),qe(_,L,this.startContainer,this.startOffset)<0?-1:qe(_,L,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ti,toHtml:function(){return Pe(this)},intersectsNode:function(_,L){if(tt(this),O(_)!=q(this))return!1;var Y=_.parentNode,ee=et(_);if(!Y)return!0;var ye=qe(Y,ee,this.endContainer,this.endOffset),ze=qe(Y,ee+1,this.startContainer,this.startOffset);return L?ye<=0&&ze>=0:ye<0&&ze>0},isPointInRange:function(_,L){return tt(this),Tt(_,"HIERARCHY_REQUEST_ERR"),Qt(_,this.startContainer),qe(_,L,this.startContainer,this.startOffset)>=0&&qe(_,L,this.endContainer,this.endOffset)<=0},intersectsRange:function(_){return Xe(this,_,!1)},intersectsOrTouchesRange:function(_){return Xe(this,_,!0)},intersection:function(_){if(this.intersectsRange(_)){var L=qe(this.startContainer,this.startOffset,_.startContainer,_.startOffset),Y=qe(this.endContainer,this.endOffset,_.endContainer,_.endOffset),ee=this.cloneRange();return L==-1&&ee.setStart(_.startContainer,_.startOffset),Y==1&&ee.setEnd(_.endContainer,_.endOffset),ee}return null},union:function(_){if(this.intersectsOrTouchesRange(_)){var L=this.cloneRange();return qe(_.startContainer,_.startOffset,this.startContainer,this.startOffset)==-1&&L.setStart(_.startContainer,_.startOffset),qe(_.endContainer,_.endOffset,this.endContainer,this.endOffset)==1&&L.setEnd(_.endContainer,_.endOffset),L}else throw new pe("Ranges do not intersect")},containsNode:function(_,L){return L?this.intersectsNode(_,!1):this.compareNode(_)==br},containsNodeContents:function(_){return this.comparePoint(_,0)>=0&&this.comparePoint(_,x(_))<=0},containsRange:function(_){var L=this.intersection(_);return L!==null&&_.equals(L)},containsNodeText:function(_){var L=this.cloneRange();L.selectNode(_);var Y=L.getNodes([3]);if(Y.length>0){L.setStart(Y[0],0);var ee=Y.pop();return L.setEnd(ee,ee.length),this.containsRange(L)}else return this.containsNodeContents(_)},getNodes:function(_,L){return tt(this),ve(this,_,L)},getDocument:function(){return U(this)},collapseBefore:function(_){this.setEndBefore(_),this.collapse(!1)},collapseAfter:function(_){this.setStartAfter(_),this.collapse(!0)},getBookmark:function(_){var L=U(this),Y=T.createRange(L);_=_||$.getBody(L),Y.selectNodeContents(_);var ee=this.intersection(Y),ye=0,ze=0;return ee&&(Y.setEnd(ee.startContainer,ee.startOffset),ye=Y.toString().length,ze=ye+ee.toString().length),{start:ye,end:ze,containerNode:_}},moveToBookmark:function(_){var L=_.containerNode,Y=0;this.setStart(L,0),this.collapse(!0);for(var ee=[L],ye,ze=!1,J=!1,de,Se,Be;!J&&(ye=ee.pop());)if(ye.nodeType==3)de=Y+ye.length,!ze&&_.start>=Y&&_.start<=de&&(this.setStart(ye,_.start-Y),ze=!0),ze&&_.end>=Y&&_.end<=de&&(this.setEnd(ye,_.end-Y),J=!0),Y=de;else for(Be=ye.childNodes,Se=Be.length;Se--;)ee.push(Be[Se])},getName:function(){return"DomRange"},equals:function(_){return ht.rangesEqual(this,_)},isValid:function(){return Qn(this)},inspect:function(){return $e(this)},detach:function(){}});function m(_){_.START_TO_START=_r,_.START_TO_END=er,_.END_TO_END=Ji,_.END_TO_START=Ln,_.NODE_BEFORE=tr,_.NODE_AFTER=ni,_.NODE_BEFORE_AND_AFTER=ri,_.NODE_INSIDE=br}function k(_){m(_),m(_.prototype)}function G(_,L){return function(){tt(this);var Y=this.startContainer,ee=this.startOffset,ye=this.commonAncestorContainer,ze=new it(this,!0),J,de;Y!==ye&&(J=yt(Y,ye,!0),de=he(J),Y=de.node,ee=de.offset),Fe(ze,Xt),ze.reset();var Se=_(ze);return ze.detach(),L(this,Y,ee,Y,ee),Se}}function ae(_,L){function Y(J,de){return function(Se){st(Se,ct),st(O(Se),zt);var Be=(J?we:he)(Se);(de?ee:ye)(this,Be.node,Be.offset)}}function ee(J,de,Se){var Be=J.endContainer,Nt=J.endOffset;(de!==J.startContainer||Se!==J.startOffset)&&((O(de)!=O(Be)||qe(de,Se,Be,Nt)==1)&&(Be=de,Nt=Se),L(J,de,Se,Be,Nt))}function ye(J,de,Se){var Be=J.startContainer,Nt=J.startOffset;(de!==J.endContainer||Se!==J.endOffset)&&((O(de)!=O(Be)||qe(de,Se,Be,Nt)==-1)&&(Be=de,Nt=Se),L(J,Be,Nt,de,Se))}var ze=function(){};ze.prototype=T.rangePrototype,_.prototype=new ze,Q.extend(_.prototype,{setStart:function(J,de){xe(J,!0),Je(J,de),ee(this,J,de)},setEnd:function(J,de){xe(J,!0),Je(J,de),ye(this,J,de)},setStartAndEnd:function(){var J=arguments,de=J[0],Se=J[1],Be=de,Nt=Se;switch(J.length){case 3:Nt=J[2];break;case 4:Be=J[2],Nt=J[3];break}xe(de,!0),Je(de,Se),xe(Be,!0),Je(Be,Nt),L(this,de,Se,Be,Nt)},setBoundary:function(J,de,Se){this["set"+(Se?"Start":"End")](J,de)},setStartBefore:Y(!0,!0),setStartAfter:Y(!1,!0),setEndBefore:Y(!0,!1),setEndAfter:Y(!1,!1),collapse:function(J){tt(this),J?L(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):L(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(J){xe(J,!0),L(this,J,0,J,x(J))},selectNode:function(J){xe(J,!1),st(J,ct);var de=we(J),Se=he(J);L(this,de.node,de.offset,Se.node,Se.offset)},extractContents:G(ie,L),deleteContents:G(mt,L),canSurroundContents:function(){tt(this),Xt(this.startContainer),Xt(this.endContainer);var J=new it(this,!0),de=J._first&&K(J._first,this)||J._last&&K(J._last,this);return J.detach(),!de},splitBoundaries:function(){yr(this)},splitBoundariesPreservingPositions:function(J){yr(this,J)},normalizeBoundaries:function(){tt(this);var J=this.startContainer,de=this.startOffset,Se=this.endContainer,Be=this.endOffset,Nt=function(jt){var vn=jt.nextSibling;vn&&vn.nodeType==jt.nodeType&&(Se=jt,Be=jt.length,jt.appendData(vn.data),N(vn))},Dl=function(jt){var vn=jt.previousSibling;if(vn&&vn.nodeType==jt.nodeType){J=jt;var Rc=jt.length;if(de=vn.length,jt.insertData(0,vn.data),N(vn),J==Se)Be+=de,Se=J;else if(Se==jt.parentNode){var Rl=et(jt);Be==Rl?(Se=jt,Be=Rc):Be>Rl&&Be--}}},Ba=!0,Wt;if(Ee(Se))Be==Se.length?Nt(Se):Be==0&&(Wt=Se.previousSibling,Wt&&Wt.nodeType==Se.nodeType&&(Be=Wt.length,J==Se&&(Ba=!1),Wt.appendData(Se.data),N(Se),Se=Wt));else{if(Be>0){var Ha=Se.childNodes[Be-1];Ha&&Ee(Ha)&&Nt(Ha)}Ba=!this.collapsed}if(Ba){if(Ee(J))de==0?Dl(J):de==J.length&&(Wt=J.nextSibling,Wt&&Wt.nodeType==J.nodeType&&(Se==Wt&&(Se=J,Be+=J.length),J.appendData(Wt.data),N(Wt)));else if(de<J.childNodes.length){var Fa=J.childNodes[de];Fa&&Ee(Fa)&&Dl(Fa)}}else J=Se,de=Be;L(this,J,de,Se,Be)},collapseToPoint:function(J,de){xe(J,!0),Je(J,de),this.setStartAndEnd(J,de)},parentElement:function(){tt(this);var J=this.commonAncestorContainer;return J?Te(this.commonAncestorContainer,!0):null}}),k(_)}function Me(_){_.collapsed=_.startContainer===_.endContainer&&_.startOffset===_.endOffset,_.commonAncestorContainer=_.collapsed?_.startContainer:$.getCommonAncestor(_.startContainer,_.endContainer)}function Ye(_,L,Y,ee,ye){_.startContainer=L,_.startOffset=Y,_.endContainer=ee,_.endOffset=ye,_.document=$.getDocument(L),Me(_)}function ht(_){Ye(this,_,0,_,0)}ae(ht,Ye),Q.extend(ht,{rangeProperties:mr,RangeIterator:it,copyComparisonConstants:k,createPrototypeRange:ae,inspect:$e,toHtml:Pe,getRangeDocument:U,rangesEqual:function(_,L){return _.startContainer===L.startContainer&&_.startOffset===L.startOffset&&_.endContainer===L.endContainer&&_.endOffset===L.endOffset}}),T.DomRange=ht}),D.createCoreModule("WrappedRange",["DomRange"],function(T,X){var $,Q,ne=T.dom,pe=T.util,Ee=ne.DomPosition,et=T.DomRange,lt=ne.getBody,ft=ne.getContentDocument,qe=ne.isCharacterDataNode;if(T.features.implementsDomRange&&function(){var N,K=et.rangeProperties;function U(ie){for(var ve=K.length,$e;ve--;)$e=K[ve],ie[$e]=ie.nativeRange[$e];ie.collapsed=ie.startContainer===ie.endContainer&&ie.startOffset===ie.endOffset}function q(ie,ve,$e,it,ct){var zt=ie.startContainer!==ve||ie.startOffset!=$e,Mt=ie.endContainer!==it||ie.endOffset!=ct,_t=!ie.equals(ie.nativeRange);(zt||Mt||_t)&&(ie.setEnd(it,ct),ie.setStart(ve,$e))}var we;$=function(ie){if(!ie)throw X.createError("WrappedRange: Range must be specified");this.nativeRange=ie,U(this)},et.createPrototypeRange($,q),N=$.prototype,N.selectNode=function(ie){this.nativeRange.selectNode(ie),U(this)},N.cloneContents=function(){return this.nativeRange.cloneContents()},N.surroundContents=function(ie){this.nativeRange.surroundContents(ie),U(this)},N.collapse=function(ie){this.nativeRange.collapse(ie),U(this)},N.cloneRange=function(){return new $(this.nativeRange.cloneRange())},N.refresh=function(){U(this)},N.toString=function(){return this.nativeRange.toString()};var he=document.createTextNode("test");lt(document).appendChild(he);var re=document.createRange();re.setStart(he,0),re.setEnd(he,0);try{re.setStart(he,1),N.setStart=function(ie,ve){this.nativeRange.setStart(ie,ve),U(this)},N.setEnd=function(ie,ve){this.nativeRange.setEnd(ie,ve),U(this)},we=function(ie){return function(ve){this.nativeRange[ie](ve),U(this)}}}catch{N.setStart=function(ve,$e){try{this.nativeRange.setStart(ve,$e)}catch{this.nativeRange.setEnd(ve,$e),this.nativeRange.setStart(ve,$e)}U(this)},N.setEnd=function(ve,$e){try{this.nativeRange.setEnd(ve,$e)}catch{this.nativeRange.setStart(ve,$e),this.nativeRange.setEnd(ve,$e)}U(this)},we=function(ve,$e){return function(it){try{this.nativeRange[ve](it)}catch{this.nativeRange[$e](it),this.nativeRange[ve](it)}U(this)}}}N.setStartBefore=we("setStartBefore","setEndBefore"),N.setStartAfter=we("setStartAfter","setEndAfter"),N.setEndBefore=we("setEndBefore","setStartBefore"),N.setEndAfter=we("setEndAfter","setStartAfter"),N.selectNodeContents=function(ie){this.setStartAndEnd(ie,0,ne.getNodeLength(ie))},re.selectNodeContents(he),re.setEnd(he,3);var Xe=document.createRange();Xe.selectNodeContents(he),Xe.setEnd(he,4),Xe.setStart(he,2),re.compareBoundaryPoints(re.START_TO_END,Xe)==-1&&re.compareBoundaryPoints(re.END_TO_START,Xe)==1?N.compareBoundaryPoints=function(ie,ve){return ve=ve.nativeRange||ve,ie==ve.START_TO_END?ie=ve.END_TO_START:ie==ve.END_TO_START&&(ie=ve.START_TO_END),this.nativeRange.compareBoundaryPoints(ie,ve)}:N.compareBoundaryPoints=function(ie,ve){return this.nativeRange.compareBoundaryPoints(ie,ve.nativeRange||ve)};var Ie=document.createElement("div");Ie.innerHTML="123";var Fe=Ie.firstChild,mt=lt(document);mt.appendChild(Ie),re.setStart(Fe,1),re.setEnd(Fe,2),re.deleteContents(),Fe.data=="13"&&(N.deleteContents=function(){this.nativeRange.deleteContents(),U(this)},N.extractContents=function(){var ie=this.nativeRange.extractContents();return U(this),ie}),mt.removeChild(Ie),mt=null,pe.isHostMethod(re,"createContextualFragment")&&(N.createContextualFragment=function(ie){return this.nativeRange.createContextualFragment(ie)}),lt(document).removeChild(he),N.getName=function(){return"WrappedRange"},T.WrappedRange=$,T.createNativeRange=function(ie){return ie=ft(ie,X,"createNativeRange"),ie.createRange()}}(),T.features.implementsTextRange){var gt=function(N){var K=N.parentElement(),U=N.duplicate();U.collapse(!0);var q=U.parentElement();U=N.duplicate(),U.collapse(!1);var we=U.parentElement(),he=q==we?q:ne.getCommonAncestor(q,we);return he==K?he:ne.getCommonAncestor(K,he)},yt=function(N){return N.compareEndPoints("StartToEnd",N)==0},x=function(N,K,U,q,we){var he=N.duplicate();he.collapse(U);var re=he.parentElement();if(ne.isOrIsAncestorOf(K,re)||(re=K),!re.canHaveHTML){var Xe=new Ee(re.parentNode,ne.getNodeIndex(re));return{boundaryPosition:Xe,nodeInfo:{nodeIndex:Xe.offset,containerElement:Xe.node}}}var Ie=ne.getDocument(re).createElement("span");Ie.parentNode&&ne.removeNode(Ie);for(var Fe,mt=U?"StartToStart":"StartToEnd",ie,ve,$e,it,ct=we&&we.containerElement==re?we.nodeIndex:0,zt=re.childNodes.length,Mt=zt,_t=Mt;_t==zt?re.appendChild(Ie):re.insertBefore(Ie,re.childNodes[_t]),he.moveToElementText(Ie),Fe=he.compareEndPoints(mt,N),!(Fe==0||ct==Mt);){if(Fe==-1){if(Mt==ct+1)break;ct=_t}else Mt=Mt==ct+1?ct:_t;_t=Math.floor((ct+Mt)/2),re.removeChild(Ie)}if(it=Ie.nextSibling,Fe==-1&&it&&qe(it)){he.setEndPoint(U?"EndToStart":"EndToEnd",N);var bt;if(/[\r\n]/.test(it.data)){var St=he.duplicate(),kt=St.text.replace(/\r\n/g,"\r").length;for(bt=St.moveStart("character",kt);(Fe=St.compareEndPoints("StartToEnd",St))==-1;)bt++,St.moveStart("character",1)}else bt=he.text.length;$e=new Ee(it,bt)}else ie=(q||!U)&&Ie.previousSibling,ve=(q||U)&&Ie.nextSibling,ve&&qe(ve)?$e=new Ee(ve,0):ie&&qe(ie)?$e=new Ee(ie,ie.data.length):$e=new Ee(re,ne.getNodeIndex(Ie));return ne.removeNode(Ie),{boundaryPosition:$e,nodeInfo:{nodeIndex:_t,containerElement:re}}},S=function(N,K){var U,q,we=N.offset,he=ne.getDocument(N.node),re,Xe,Ie=lt(he).createTextRange(),Fe=qe(N.node);return Fe?(U=N.node,q=U.parentNode):(Xe=N.node.childNodes,U=we<Xe.length?Xe[we]:null,q=N.node),re=he.createElement("span"),re.innerHTML="&#feff;",U?q.insertBefore(re,U):q.appendChild(re),Ie.moveToElementText(re),Ie.collapse(!K),q.removeChild(re),Fe&&Ie[K?"moveStart":"moveEnd"]("character",we),Ie};Q=function(N){this.textRange=N,this.refresh()},Q.prototype=new et(document),Q.prototype.refresh=function(){var N,K,U,q=gt(this.textRange);yt(this.textRange)?K=N=x(this.textRange,q,!0,!0).boundaryPosition:(U=x(this.textRange,q,!0,!1),N=U.boundaryPosition,K=x(this.textRange,q,!1,!1,U.nodeInfo).boundaryPosition),this.setStart(N.node,N.offset),this.setEnd(K.node,K.offset)},Q.prototype.getName=function(){return"WrappedTextRange"},et.copyComparisonConstants(Q);var O=function(N){if(N.collapsed)return S(new Ee(N.startContainer,N.startOffset),!0);var K=S(new Ee(N.startContainer,N.startOffset),!0),U=S(new Ee(N.endContainer,N.endOffset),!1),q=lt(et.getRangeDocument(N)).createTextRange();return q.setEndPoint("StartToStart",K),q.setEndPoint("EndToEnd",U),q};if(Q.rangeToTextRange=O,Q.prototype.toTextRange=function(){return O(this)},T.WrappedTextRange=Q,!T.features.implementsDomRange||T.config.preferTextRange){var W=function(N){return N("return this;")()}(Function);typeof W.Range>"u"&&(W.Range=Q),T.createNativeRange=function(N){return N=ft(N,X,"createNativeRange"),lt(N).createTextRange()},T.WrappedRange=Q}}T.createRange=function(N){return N=ft(N,X,"createRange"),new T.WrappedRange(T.createNativeRange(N))},T.createRangyRange=function(N){return N=ft(N,X,"createRangyRange"),new et(N)},pe.createAliasForDeprecatedMethod(T,"createIframeRange","createRange"),pe.createAliasForDeprecatedMethod(T,"createIframeRangyRange","createRangyRange"),T.addShimListener(function(N){var K=N.document;typeof K.createRange>"u"&&(K.createRange=function(){return T.createRange(K)}),K=N=null})}),D.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(T,X){T.config.checkSelectionRanges=!0;var $="boolean",Q="number",ne=T.dom,pe=T.util,Ee=pe.isHostMethod,et=T.DomRange,lt=T.WrappedRange,ft=T.DOMException,qe=ne.DomPosition,gt,yt,x=T.features,S="Control",O=ne.getDocument,W=ne.getBody,N=et.rangesEqual;function K(m){return typeof m=="string"?/^backward(s)?$/i.test(m):!!m}function U(m,k){if(m){if(ne.isWindow(m))return m;if(m instanceof tt)return m.win;var G=ne.getContentDocument(m,X,k);return ne.getWindow(G)}else return window}function q(m){return U(m,"getWinSelection").getSelection()}function we(m){return U(m,"getDocSelection").document.selection}function he(m){var k=!1;return m.anchorNode&&(k=ne.comparePoints(m.anchorNode,m.anchorOffset,m.focusNode,m.focusOffset)==1),k}var re=Ee(window,"getSelection"),Xe=pe.isHostObject(document,"selection");x.implementsWinGetSelection=re,x.implementsDocSelection=Xe;var Ie=Xe&&(!re||T.config.preferTextRange);if(Ie)gt=we,T.isSelectionValid=function(m){var k=U(m,"isSelectionValid").document,G=k.selection;return G.type!="None"||O(G.createRange().parentElement())==k};else if(re)gt=q,T.isSelectionValid=function(){return!0};else return X.fail("Neither document.selection or window.getSelection() detected."),!1;T.getNativeSelection=gt;var Fe=gt();if(!Fe)return X.fail("Native selection was null (possibly issue 138?)"),!1;var mt=T.createNativeRange(document),ie=W(document),ve=pe.areHostProperties(Fe,["anchorNode","focusNode","anchorOffset","focusOffset"]);x.selectionHasAnchorAndFocus=ve;var $e=Ee(Fe,"extend");x.selectionHasExtend=$e;var it=Ee(Fe,"setBaseAndExtent");x.selectionHasSetBaseAndExtent=it;var ct=typeof Fe.rangeCount==Q;x.selectionHasRangeCount=ct;var zt=!1,Mt=!0,_t=$e?function(m,k){var G=et.getRangeDocument(k),ae=T.createRange(G);ae.collapseToPoint(k.endContainer,k.endOffset),m.addRange(xe(ae)),m.extend(k.startContainer,k.startOffset)}:null;pe.areHostMethods(Fe,["addRange","getRangeAt","removeAllRanges"])&&typeof Fe.rangeCount==Q&&x.implementsDomRange&&function(){var m=window.getSelection();if(m){for(var k=m.rangeCount,G=k>1,ae=[],Me=he(m),Ye=0;Ye<k;++Ye)ae[Ye]=m.getRangeAt(Ye);var ht=ne.createTestElement(document,"",!1),_=ht.appendChild(document.createTextNode("   ")),L=document.createRange();if(L.setStart(_,1),L.collapse(!0),m.removeAllRanges(),m.addRange(L),Mt=m.rangeCount==1,m.removeAllRanges(),!G){var Y=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(Y&&parseInt(Y[1])>=36)zt=!1;else{var ee=L.cloneRange();L.setStart(_,0),ee.setEnd(_,3),ee.setStart(_,2),m.addRange(L),m.addRange(ee),zt=m.rangeCount==2}}for(ne.removeNode(ht),m.removeAllRanges(),Ye=0;Ye<k;++Ye)Ye==0&&Me?_t?_t(m,ae[Ye]):(T.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),m.addRange(ae[Ye])):m.addRange(ae[Ye])}}(),x.selectionSupportsMultipleRanges=zt,x.collapsedNonEditableSelectionsSupported=Mt;var bt=!1,St;ie&&Ee(ie,"createControlRange")&&(St=ie.createControlRange(),pe.areHostProperties(St,["item","add"])&&(bt=!0)),x.implementsControlRange=bt,ve?yt=function(m){return m.anchorNode===m.focusNode&&m.anchorOffset===m.focusOffset}:yt=function(m){return m.rangeCount?m.getRangeAt(m.rangeCount-1).collapsed:!1};function kt(m,k,G){var ae=G?"end":"start",Me=G?"start":"end";m.anchorNode=k[ae+"Container"],m.anchorOffset=k[ae+"Offset"],m.focusNode=k[Me+"Container"],m.focusOffset=k[Me+"Offset"]}function H(m){var k=m.nativeSelection;m.anchorNode=k.anchorNode,m.anchorOffset=k.anchorOffset,m.focusNode=k.focusNode,m.focusOffset=k.focusOffset}function te(m){m.anchorNode=m.focusNode=null,m.anchorOffset=m.focusOffset=0,m.rangeCount=0,m.isCollapsed=!0,m._ranges.length=0,Te(m)}function Te(m){m.type=m.rangeCount==0?"None":yt(m)?"Caret":"Range"}function xe(m){var k;return m instanceof et?(k=T.createNativeRange(m.getDocument()),k.setEnd(m.endContainer,m.endOffset),k.setStart(m.startContainer,m.startOffset)):m instanceof lt?k=m.nativeRange:x.implementsDomRange&&m instanceof ne.getWindow(m.startContainer).Range&&(k=m),k}function st(m){if(!m.length||m[0].nodeType!=1)return!1;for(var k=1,G=m.length;k<G;++k)if(!ne.isAncestorOf(m[0],m[k]))return!1;return!0}function Je(m){var k=m.getNodes();if(!st(k))throw X.createError("getSingleElementFromRange: range "+m.inspect()+" did not consist of a single element");return k[0]}function Qt(m){return!!m&&typeof m.text<"u"}function Xt(m,k){var G=new lt(k);m._ranges=[G],kt(m,G,!1),m.rangeCount=1,m.isCollapsed=G.collapsed,Te(m)}function Tt(m){if(m._ranges.length=0,m.docSelection.type=="None")te(m);else{var k=m.docSelection.createRange();if(Qt(k))Xt(m,k);else{m.rangeCount=k.length;for(var G,ae=O(k.item(0)),Me=0;Me<m.rangeCount;++Me)G=T.createRange(ae),G.selectNode(k.item(Me)),m._ranges.push(G);m.isCollapsed=m.rangeCount==1&&m._ranges[0].collapsed,kt(m,m._ranges[m.rangeCount-1],!1),Te(m)}}}function Qr(m,k){for(var G=m.docSelection.createRange(),ae=Je(k),Me=O(G.item(0)),Ye=W(Me).createControlRange(),ht=0,_=G.length;ht<_;++ht)Ye.add(G.item(ht));try{Ye.add(ae)}catch{throw X.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}Ye.select(),Tt(m)}var Qn;Ee(Fe,"getRangeAt")?Qn=function(m,k){try{return m.getRangeAt(k)}catch{return null}}:ve&&(Qn=function(m){var k=O(m.anchorNode),G=T.createRange(k);return G.setStartAndEnd(m.anchorNode,m.anchorOffset,m.focusNode,m.focusOffset),G.collapsed!==this.isCollapsed&&G.setStartAndEnd(m.focusNode,m.focusOffset,m.anchorNode,m.anchorOffset),G});function tt(m,k,G){this.nativeSelection=m,this.docSelection=k,this._ranges=[],this.win=G,this.refresh()}tt.prototype=T.selectionPrototype;function ei(m){m.win=m.anchorNode=m.focusNode=m._ranges=null,m.rangeCount=m.anchorOffset=m.focusOffset=0,m.detached=!0,Te(m)}var Mn=[];function ti(m,k){for(var G=Mn.length,ae,Me;G--;)if(ae=Mn[G],Me=ae.selection,k=="deleteAll")ei(Me);else if(ae.win==m)return k=="delete"?(Mn.splice(G,1),!0):Me;return k=="deleteAll"&&(Mn.length=0),null}var yr=function(m){if(m&&m instanceof tt)return m.refresh(),m;m=U(m,"getNativeSelection");var k=ti(m),G=gt(m),ae=Xe?we(m):null;return k?(k.nativeSelection=G,k.docSelection=ae,k.refresh()):(k=new tt(G,ae,m),Mn.push({win:m,selection:k})),k};T.getSelection=yr,pe.createAliasForDeprecatedMethod(T,"getIframeSelection","getSelection");var Pe=tt.prototype;function mr(m,k){for(var G=O(k[0].startContainer),ae=W(G).createControlRange(),Me=0,Ye,ht=k.length;Me<ht;++Me){Ye=Je(k[Me]);try{ae.add(Ye)}catch{throw X.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}ae.select(),Tt(m)}if(!Ie&&ve&&pe.areHostMethods(Fe,["removeAllRanges","addRange"])){Pe.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),te(this)};var _r=function(m,k){_t(m.nativeSelection,k),m.refresh()};ct?Pe.addRange=function(m,k){if(bt&&Xe&&this.docSelection.type==S)Qr(this,m);else if(K(k)&&$e)_r(this,m);else{var G;zt?G=this.rangeCount:(this.removeAllRanges(),G=0);var ae=xe(m).cloneRange();try{this.nativeSelection.addRange(ae)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==G+1){if(T.config.checkSelectionRanges){var Me=Qn(this.nativeSelection,this.rangeCount-1);Me&&!N(Me,m)&&(m=new lt(Me))}this._ranges[this.rangeCount-1]=m,kt(this,m,Ln(this.nativeSelection)),this.isCollapsed=yt(this),Te(this)}else this.refresh()}}:Pe.addRange=function(m,k){K(k)&&$e?_r(this,m):(this.nativeSelection.addRange(xe(m)),this.refresh())},Pe.setRanges=function(m){if(bt&&Xe&&m.length>1)mr(this,m);else{this.removeAllRanges();for(var k=0,G=m.length;k<G;++k)this.addRange(m[k])}}}else if(Ee(Fe,"empty")&&Ee(mt,"select")&&bt&&Ie)Pe.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var m;if(this.anchorNode)m=O(this.anchorNode);else if(this.docSelection.type==S){var k=this.docSelection.createRange();k.length&&(m=O(k.item(0)))}if(m){var G=W(m).createTextRange();G.select(),this.docSelection.empty()}}}catch{}te(this)},Pe.addRange=function(m){this.docSelection.type==S?Qr(this,m):(T.WrappedTextRange.rangeToTextRange(m).select(),this._ranges[0]=m,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,kt(this,m,!1),Te(this))},Pe.setRanges=function(m){this.removeAllRanges();var k=m.length;k>1?mr(this,m):k&&this.addRange(m[0])};else return X.fail("No means of selecting a Range or TextRange was found"),!1;Pe.getRangeAt=function(m){if(m<0||m>=this.rangeCount)throw new ft("INDEX_SIZE_ERR");return this._ranges[m].cloneRange()};var er;if(Ie)er=function(m){var k;T.isSelectionValid(m.win)?k=m.docSelection.createRange():(k=W(m.win.document).createTextRange(),k.collapse(!0)),m.docSelection.type==S?Tt(m):Qt(k)?Xt(m,k):te(m)};else if(Ee(Fe,"getRangeAt")&&typeof Fe.rangeCount==Q)er=function(m){if(bt&&Xe&&m.docSelection.type==S)Tt(m);else if(m._ranges.length=m.rangeCount=m.nativeSelection.rangeCount,m.rangeCount){for(var k=0,G=m.rangeCount;k<G;++k)m._ranges[k]=new T.WrappedRange(m.nativeSelection.getRangeAt(k));kt(m,m._ranges[m.rangeCount-1],Ln(m.nativeSelection)),m.isCollapsed=yt(m),Te(m)}else te(m)};else if(ve&&typeof Fe.isCollapsed==$&&typeof mt.collapsed==$&&x.implementsDomRange)er=function(m){var k,G=m.nativeSelection;G.anchorNode?(k=Qn(G,0),m._ranges=[k],m.rangeCount=1,H(m),m.isCollapsed=yt(m),Te(m)):te(m)};else return X.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Pe.refresh=function(m){var k=m?this._ranges.slice(0):null,G=this.anchorNode,ae=this.anchorOffset;if(er(this),m){var Me=k.length;if(Me!=this._ranges.length||this.anchorNode!=G||this.anchorOffset!=ae)return!0;for(;Me--;)if(!N(k[Me],this._ranges[Me]))return!0;return!1}};var Ji=function(m,k){var G=m.getAllRanges();m.removeAllRanges();for(var ae=0,Me=G.length;ae<Me;++ae)N(k,G[ae])||m.addRange(G[ae]);m.rangeCount||te(m)};bt&&Xe?Pe.removeRange=function(m){if(this.docSelection.type==S){for(var k=this.docSelection.createRange(),G=Je(m),ae=O(k.item(0)),Me=W(ae).createControlRange(),Ye,ht=!1,_=0,L=k.length;_<L;++_)Ye=k.item(_),Ye!==G||ht?Me.add(k.item(_)):ht=!0;Me.select(),Tt(this)}else Ji(this,m)}:Pe.removeRange=function(m){Ji(this,m)};var Ln;!Ie&&ve&&x.implementsDomRange?(Ln=he,Pe.isBackward=function(){return Ln(this)}):Ln=Pe.isBackward=function(){return!1},Pe.isBackwards=Pe.isBackward,Pe.toString=function(){for(var m=[],k=0,G=this.rangeCount;k<G;++k)m[k]=""+this._ranges[k];return m.join("")};function tr(m,k){if(m.win.document!=O(k))throw new ft("WRONG_DOCUMENT_ERR")}function ni(m,k){if(k<0||k>(ne.isCharacterDataNode(m)?m.length:m.childNodes.length))throw new ft("INDEX_SIZE_ERR")}Pe.collapse=function(m,k){tr(this,m);var G=T.createRange(m);G.collapseToPoint(m,k),this.setSingleRange(G),this.isCollapsed=!0},Pe.collapseToStart=function(){if(this.rangeCount){var m=this._ranges[0];this.collapse(m.startContainer,m.startOffset)}else throw new ft("INVALID_STATE_ERR")},Pe.collapseToEnd=function(){if(this.rangeCount){var m=this._ranges[this.rangeCount-1];this.collapse(m.endContainer,m.endOffset)}else throw new ft("INVALID_STATE_ERR")},Pe.selectAllChildren=function(m){tr(this,m);var k=T.createRange(m);k.selectNodeContents(m),this.setSingleRange(k)},it?Pe.setBaseAndExtent=function(m,k,G,ae){this.nativeSelection.setBaseAndExtent(m,k,G,ae),this.refresh()}:$e&&(Pe.setBaseAndExtent=function(m,k,G,ae){ni(m,k),ni(G,ae),tr(this,m),tr(this,G);var Me=T.createRange(node),Ye=ne.comparePoints(m,k,G,ae)==-1;Ye?Me.setStartAndEnd(G,ae,m,k):Me.setStartAndEnd(m,k,G,ae),this.setSingleRange(Me,Ye)}),Pe.deleteFromDocument=function(){if(bt&&Xe&&this.docSelection.type==S){for(var m=this.docSelection.createRange(),k;m.length;)k=m.item(0),m.remove(k),ne.removeNode(k);this.refresh()}else if(this.rangeCount){var G=this.getAllRanges();if(G.length){this.removeAllRanges();for(var ae=0,Me=G.length;ae<Me;++ae)G[ae].deleteContents();this.addRange(G[Me-1])}}},Pe.eachRange=function(m,k){for(var G=0,ae=this._ranges.length;G<ae;++G)if(m(this.getRangeAt(G)))return k},Pe.getAllRanges=function(){var m=[];return this.eachRange(function(k){m.push(k)}),m},Pe.setSingleRange=function(m,k){this.removeAllRanges(),this.addRange(m,k)},Pe.callMethodOnEachRange=function(m,k){var G=[];return this.eachRange(function(ae){G.push(ae[m].apply(ae,k||[]))}),G};function ri(m){return function(k,G){var ae;this.rangeCount?(ae=this.getRangeAt(0),ae["set"+(m?"Start":"End")](k,G)):(ae=T.createRange(this.win.document),ae.setStartAndEnd(k,G)),this.setSingleRange(ae,this.isBackward())}}Pe.setStart=ri(!0),Pe.setEnd=ri(!1),T.rangePrototype.select=function(m){yr(this.getDocument()).setSingleRange(this,m)},Pe.changeEachRange=function(m){var k=[],G=this.isBackward();this.eachRange(function(ae){m(ae),k.push(ae)}),this.removeAllRanges(),G&&k.length==1?this.addRange(k[0],"backward"):this.setRanges(k)},Pe.containsNode=function(m,k){return this.eachRange(function(G){return G.containsNode(m,k)},!0)||!1},Pe.getBookmark=function(m){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[m])}},Pe.moveToBookmark=function(m){for(var k=[],G=0,ae,Me;ae=m.rangeBookmarks[G++];)Me=T.createRange(this.win),Me.moveToBookmark(ae),k.push(Me);m.backward?this.setSingleRange(k[0],"backward"):this.setRanges(k)},Pe.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},Pe.restoreRanges=function(m){this.removeAllRanges();for(var k=0,G;G=m.ranges[k];++k)this.addRange(G,m.backward&&k==0)},Pe.toHtml=function(){var m=[];return this.eachRange(function(k){m.push(et.toHtml(k))}),m.join("")},x.implementsTextRange&&(Pe.getNativeTextRange=function(){var m;if(m=this.docSelection){var k=m.createRange();if(Qt(k))return k;throw X.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return T.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw X.createError("getNativeTextRange: selection contains no range")}});function br(m){var k=[],G=new qe(m.anchorNode,m.anchorOffset),ae=new qe(m.focusNode,m.focusOffset),Me=typeof m.getName=="function"?m.getName():"Selection";if(typeof m.rangeCount<"u")for(var Ye=0,ht=m.rangeCount;Ye<ht;++Ye)k[Ye]=et.inspect(m.getRangeAt(Ye));return"["+Me+"(Ranges: "+k.join(", ")+")(anchor: "+G.inspect()+", focus: "+ae.inspect()+"]"}Pe.getName=function(){return"WrappedSelection"},Pe.inspect=function(){return br(this)},Pe.detach=function(){ti(this.win,"delete"),ei(this)},tt.detachAll=function(){ti(null,"deleteAll")},tt.inspect=br,tt.isDirectionBackward=K,T.Selection=tt,T.selectionPrototype=Pe,T.addShimListener(function(m){typeof m.getSelection>"u"&&(m.getSelection=function(){return yr(m)}),m=null})});var Ce=!1,je=function(T){Ce||(Ce=!0,!D.initialized&&D.config.autoInitialize&&P())};return R&&(document.readyState=="complete"?je():(u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",je,!1),se(window,"load",je))),D})})(Ac);var Mc=Ac.exports;const Ld=ba(Mc);var c_={exports:{}};(function(r,e){(function(t,n){r.exports=t(Mc)})(function(t){return t.createModule("ClassApplier",["WrappedSelection"],function(n,i){var o=n.dom,a=o.DomPosition,s=o.arrayContains,l=n.util,u=l.forEach,d="span",f=l.isHostMethod(document,"createElementNS");function c(x,S){for(var O in x)if(x.hasOwnProperty(O)&&S(O,x[O])===!1)return!1;return!0}function h(x){return x.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function g(x,S){return!!x&&new RegExp("(?:^|\\s)"+S+"(?:\\s|$)").test(x)}function p(x,S){if(typeof x.classList=="object")return x.classList.contains(S);var O=typeof x.className=="string",W=O?x.className:x.getAttribute("class");return g(W,S)}function v(x,S){if(typeof x.classList=="object")x.classList.add(S);else{var O=typeof x.className=="string",W=O?x.className:x.getAttribute("class");W?g(W,S)||(W+=" "+S):W=S,O?x.className=W:x.setAttribute("class",W)}}var y=function(){function x(S,O,W){return O&&W?" ":""}return function(S,O){if(typeof S.classList=="object")S.classList.remove(O);else{var W=typeof S.className=="string",N=W?S.className:S.getAttribute("class");N=N.replace(new RegExp("(^|\\s)"+O+"(\\s|$)"),x),W?S.className=N:S.setAttribute("class",N)}}}();function b(x){var S=typeof x.className=="string";return S?x.className:x.getAttribute("class")}function C(x){return x&&x.split(/\s+/).sort().join(" ")}function R(x){return C(b(x))}function j(x,S){return R(x)==R(S)}function D(x,S){for(var O=S.split(/\s+/),W=0,N=O.length;W<N;++W)if(!p(x,h(O[W])))return!1;return!0}function w(x){var S=x.parentNode;return S&&S.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(S.nodeName)}function A(x,S,O,W,N){var K=x.node,U=x.offset,q=K,we=U;K==W&&U>N&&++we,K==S&&(U==O||U==O+1)&&(q=W,we+=N-O),K==S&&U>O+1&&--we,x.node=q,x.offset=we}function z(x,S,O){x.node==S&&x.offset>O&&--x.offset}function Z(x,S,O,W){O==-1&&(O=S.childNodes.length);var N=x.parentNode,K=o.getNodeIndex(x);u(W,function(U){A(U,N,K,S,O)}),S.childNodes.length==O?S.appendChild(x):S.insertBefore(x,S.childNodes[O])}function oe(x,S){var O=x.parentNode,W=o.getNodeIndex(x);u(S,function(N){z(N,O,W)}),o.removeNode(x)}function se(x,S,O,W,N){for(var K,U=[];K=x.firstChild;)Z(K,S,O++,N),U.push(K);return oe(x,N),U}function E(x,S){return se(x,x.parentNode,o.getNodeIndex(x),!0,S)}function M(x,S){var O=x.cloneRange();O.selectNodeContents(S);var W=O.intersection(x),N=W?W.toString():"";return N!=""}function P(x){for(var S=x.getNodes([3]),O=0,W;(W=S[O])&&!M(x,W);)++O;for(var N=S.length-1;(W=S[N])&&!M(x,W);)--N;return S.slice(O,N+1)}function V(x,S){if(x.attributes.length!=S.attributes.length)return!1;for(var O=0,W=x.attributes.length,N,K,U;O<W;++O)if(N=x.attributes[O],U=N.name,U!="class"&&(K=S.attributes.getNamedItem(U),N===null!=(K===null)||N.specified!=K.specified||N.specified&&N.nodeValue!==K.nodeValue))return!1;return!0}function ce(x,S){for(var O=0,W=x.attributes.length,N;O<W;++O)if(N=x.attributes[O].name,!(S&&s(S,N))&&x.attributes[O].specified&&N!="class")return!0;return!1}var be=o.getComputedStyleProperty,Ue=function(){var x=document.createElement("div");return typeof x.isContentEditable=="boolean"?function(S){return S&&S.nodeType==1&&S.isContentEditable}:function(S){return!S||S.nodeType!=1||S.contentEditable=="false"?!1:S.contentEditable=="true"||Ue(S.parentNode)}}();function Ge(x){var S;return x&&x.nodeType==1&&((S=x.parentNode)&&S.nodeType==9&&S.designMode=="on"||Ue(x)&&!Ue(x.parentNode))}function ge(x){return(Ue(x)||x.nodeType!=1&&Ue(x.parentNode))&&!Ge(x)}var Ne=/^inline(-block|-table)?$/i;function ke(x){return x&&x.nodeType==1&&!Ne.test(be(x,"display"))}var Ce=/[^\r\n\t\f \u200B]/;function je(x){if(x.data.length==0)return!0;if(Ce.test(x.data))return!1;var S=be(x.parentNode,"whiteSpace");switch(S){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(x.data))return!1}return ke(x.previousSibling)||ke(x.nextSibling)}function T(x){var S=[],O,W;for(O=0;W=x[O++];)S.push(new a(W.startContainer,W.startOffset),new a(W.endContainer,W.endOffset));return S}function X(x,S){for(var O=0,W,N,K,U=x.length;O<U;++O)W=x[O],N=S[O*2],K=S[O*2+1],W.setStartAndEnd(N.node,N.offset,K.node,K.offset)}function $(x,S){return o.isCharacterDataNode(x)?S==0?!!x.previousSibling:S==x.length?!!x.nextSibling:!0:S>0&&S<x.childNodes.length}function Q(x,S,O,W){var N,K,U=O==0;if(o.isAncestorOf(S,x))return x;if(o.isCharacterDataNode(S)){var q=o.getNodeIndex(S);if(O==0)O=q;else if(O==S.length)O=q+1;else throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+O+" in "+S.data);S=S.parentNode}if($(S,O)){N=S.cloneNode(!1),K=S.parentNode,N.id&&N.removeAttribute("id");for(var we,he=0;we=S.childNodes[O];)Z(we,N,he++,W);return Z(N,K,o.getNodeIndex(S)+1,W),S==x?N:Q(x,K,o.getNodeIndex(N),W)}else if(x!=S){N=S.parentNode;var re=o.getNodeIndex(S);return U||re++,Q(x,N,re,W)}return x}function ne(x,S){return x.namespaceURI==S.namespaceURI&&x.tagName.toLowerCase()==S.tagName.toLowerCase()&&j(x,S)&&V(x,S)&&be(x,"display")=="inline"&&be(S,"display")=="inline"}function pe(x){var S=x?"nextSibling":"previousSibling";return function(O,W){var N=O.parentNode,K=O[S];if(K){if(K&&K.nodeType==3)return K}else if(W&&(K=N[S],K&&K.nodeType==1&&ne(N,K))){var U=K[x?"firstChild":"lastChild"];if(U&&U.nodeType==3)return U}return null}}var Ee=pe(!1),et=pe(!0);function lt(x){this.isElementMerge=x.nodeType==1,this.textNodes=[];var S=this.isElementMerge?x.lastChild:x;S&&(this.textNodes[0]=S)}lt.prototype={doMerge:function(x){var S=this.textNodes,O=S[0];if(S.length>1){var W=o.getNodeIndex(O),N=[],K=0,U;u(S,function(q,we){U=q.parentNode,we>0&&(U.removeChild(q),U.hasChildNodes()||o.removeNode(U),x&&u(x,function(he){he.node==q&&(he.node=O,he.offset+=K),he.node==U&&he.offset>W&&(--he.offset,he.offset==W+1&&we<S.length-1&&(he.node=O,he.offset=K))})),N[we]=q.data,K+=q.data.length}),O.data=N.join("")}return O.data},getLength:function(){for(var x=this.textNodes.length,S=0;x--;)S+=this.textNodes[x].length;return S},toString:function(){var x=[];return u(this.textNodes,function(S,O){x[O]="'"+S.data+"'"}),"[Merge("+x.join(",")+")]"}};var ft=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],qe={};function gt(x,S,O){var W,N,K,U,q=this;q.cssClass=q.className=x;var we=null,he={};if(typeof S=="object"&&S!==null){for(typeof S.elementTagName<"u"&&(S.elementTagName=S.elementTagName.toLowerCase()),O=S.tagNames,we=S.elementProperties,he=S.elementAttributes,N=0;U=ft[N++];)S.hasOwnProperty(U)&&(q[U]=S[U]);W=S.normalize}else W=S;q.normalize=typeof W>"u"?!0:W,q.attrExceptions=[];var re=document.createElement(q.elementTagName);q.elementProperties=q.copyPropertiesToElement(we,re,!0),c(he,function(Ie,Fe){q.attrExceptions.push(Ie),he[Ie]=""+Fe}),q.elementAttributes=he,q.elementSortedClassName=q.elementProperties.hasOwnProperty("className")?C(q.elementProperties.className+" "+x):x,q.applyToAnyTagName=!1;var Xe=typeof O;if(Xe=="string")O=="*"?q.applyToAnyTagName=!0:q.tagNames=h(O.toLowerCase()).split(/\s*,\s*/);else if(Xe=="object"&&typeof O.length=="number")for(q.tagNames=[],N=0,K=O.length;N<K;++N)O[N]=="*"?q.applyToAnyTagName=!0:q.tagNames.push(O[N].toLowerCase());else q.tagNames=[q.elementTagName]}gt.prototype={elementTagName:d,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(x,S,O){var W,N,K={},U,q,we,he;for(var re in x)if(x.hasOwnProperty(re))if(q=x[re],we=S[re],re=="className")v(S,q),v(S,this.className),S[re]=C(S[re]),O&&(K[re]=q);else if(re=="style"){N=we,O&&(K[re]=U={});for(W in x[re])x[re].hasOwnProperty(W)&&(N[W]=q[W],O&&(U[W]=N[W]));this.attrExceptions.push(re)}else S[re]=q,O&&(K[re]=S[re],he=qe.hasOwnProperty(re)?qe[re]:re,this.attrExceptions.push(he));return O?K:""},copyAttributesToElement:function(x,S){for(var O in x)x.hasOwnProperty(O)&&!/^class(?:Name)?$/i.test(O)&&S.setAttribute(O,x[O])},appliesToElement:function(x){return s(this.tagNames,x.tagName.toLowerCase())},getEmptyElements:function(x){var S=this;return x.getNodes([1],function(O){return S.appliesToElement(O)&&!O.hasChildNodes()})},hasClass:function(x){return x.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(x))&&p(x,this.className)},getSelfOrAncestorWithClass:function(x){for(;x;){if(this.hasClass(x))return x;x=x.parentNode}return null},isModifiable:function(x){return!this.applyToEditableOnly||ge(x)},isIgnorableWhiteSpaceNode:function(x){return this.ignoreWhiteSpace&&x&&x.nodeType==3&&je(x)},postApply:function(x,S,O,W){var N=x[0],K=x[x.length-1],U=[],q,we=N,he=K,re=0,Xe=K.length,Ie;u(x,function(ve){Ie=Ee(ve,!W),Ie?(q||(q=new lt(Ie),U.push(q)),q.textNodes.push(ve),ve===N&&(we=q.textNodes[0],re=we.length),ve===K&&(he=q.textNodes[0],Xe=q.getLength())):q=null});var Fe=et(K,!W);if(Fe&&(q||(q=new lt(K),U.push(q)),q.textNodes.push(Fe)),U.length){for(var mt=0,ie=U.length;mt<ie;++mt)U[mt].doMerge(O);S.setStartAndEnd(we,re,he,Xe)}},createContainer:function(x){var S=o.getDocument(x),O=f&&!o.isHtmlNamespace(x)&&x.namespaceURI?S.createElementNS(x.namespaceURI,this.elementTagName):S.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,O,!1),this.copyAttributesToElement(this.elementAttributes,O),v(O,this.className),this.onElementCreate&&this.onElementCreate(O,this),O},elementHasProperties:function(x,S){var O=this;return c(S,function(W,N){if(W=="className")return D(x,N);if(typeof N=="object"){if(!O.elementHasProperties(x[W],N))return!1}else if(x[W]!==N)return!1})},elementHasAttributes:function(x,S){return c(S,function(O,W){if(x.getAttribute(O)!==W)return!1})},applyToTextNode:function(x,S){if(w(x)){var O=x.parentNode;if(O.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(O)&&this.elementHasProperties(O,this.elementProperties)&&this.elementHasAttributes(O,this.elementAttributes))v(O,this.className);else{var W=x.parentNode,N=this.createContainer(W);W.insertBefore(N,x),N.appendChild(x)}}},isRemovable:function(x){return x.tagName.toLowerCase()==this.elementTagName&&R(x)==this.elementSortedClassName&&this.elementHasProperties(x,this.elementProperties)&&!ce(x,this.attrExceptions)&&this.elementHasAttributes(x,this.elementAttributes)&&this.isModifiable(x)},isEmptyContainer:function(x){var S=x.childNodes.length;return x.nodeType==1&&this.isRemovable(x)&&(S==0||S==1&&this.isEmptyContainer(x.firstChild))},removeEmptyContainers:function(x){var S=this,O=x.getNodes([1],function(K){return S.isEmptyContainer(K)}),W=[x],N=T(W);u(O,function(K){oe(K,N)}),X(W,N)},undoToTextNode:function(x,S,O,W){if(!S.containsNode(O)){var N=S.cloneRange();N.selectNode(O),N.isPointInRange(S.endContainer,S.endOffset)&&(Q(O,S.endContainer,S.endOffset,W),S.setEndAfter(O)),N.isPointInRange(S.startContainer,S.startOffset)&&(O=Q(O,S.startContainer,S.startOffset,W))}this.isRemovable(O)?E(O,W):y(O,this.className)},splitAncestorWithClass:function(x,S,O){var W=this.getSelfOrAncestorWithClass(x);W&&Q(W,x,S,O)},undoToAncestor:function(x,S){this.isRemovable(x)?E(x,S):y(x,this.className)},applyToRange:function(x,S){var O=this;S=S||[];var W=T(S||[]);x.splitBoundariesPreservingPositions(W),O.removeEmptyElements&&O.removeEmptyContainers(x);var N=P(x);if(N.length){u(N,function(q){!O.isIgnorableWhiteSpaceNode(q)&&!O.getSelfOrAncestorWithClass(q)&&O.isModifiable(q)&&O.applyToTextNode(q,W)});var K=N[N.length-1];x.setStartAndEnd(N[0],0,K,K.length),O.normalize&&O.postApply(N,x,W,!1),X(S,W)}var U=O.getEmptyElements(x);u(U,function(q){v(q,O.className)})},applyToRanges:function(x){for(var S=x.length;S--;)this.applyToRange(x[S],x);return x},applyToSelection:function(x){var S=n.getSelection(x);S.setRanges(this.applyToRanges(S.getAllRanges()))},undoToRange:function(x,S){var O=this;S=S||[];var W=T(S);x.splitBoundariesPreservingPositions(W),O.removeEmptyElements&&O.removeEmptyContainers(x,W);var N=P(x),K,U,q=N[N.length-1];if(N.length){O.splitAncestorWithClass(x.endContainer,x.endOffset,W),O.splitAncestorWithClass(x.startContainer,x.startOffset,W);for(var we=0,he=N.length;we<he;++we)K=N[we],U=O.getSelfOrAncestorWithClass(K),U&&O.isModifiable(K)&&O.undoToAncestor(U,W);x.setStartAndEnd(N[0],0,q,q.length),O.normalize&&O.postApply(N,x,W,!0),X(S,W)}var re=O.getEmptyElements(x);u(re,function(Xe){y(Xe,O.className)})},undoToRanges:function(x){for(var S=x.length;S--;)this.undoToRange(x[S],x);return x},undoToSelection:function(x){var S=n.getSelection(x),O=n.getSelection(x).getAllRanges();this.undoToRanges(O),S.setRanges(O)},isAppliedToRange:function(x){if(x.collapsed||x.toString()=="")return!!this.getSelfOrAncestorWithClass(x.commonAncestorContainer);var S=x.getNodes([3]);if(S.length){for(var O=0,W;W=S[O++];)if(!this.isIgnorableWhiteSpaceNode(W)&&M(x,W)&&this.isModifiable(W)&&!this.getSelfOrAncestorWithClass(W))return!1}return!0},isAppliedToRanges:function(x){var S=x.length;if(S==0)return!1;for(;S--;)if(!this.isAppliedToRange(x[S]))return!1;return!0},isAppliedToSelection:function(x){var S=n.getSelection(x);return this.isAppliedToRanges(S.getAllRanges())},toggleRange:function(x){this.isAppliedToRange(x)?this.undoToRange(x):this.applyToRange(x)},toggleSelection:function(x){this.isAppliedToSelection(x)?this.undoToSelection(x):this.applyToSelection(x)},getElementsWithClassIntersectingRange:function(x){var S=[],O=this;return x.getNodes([3],function(W){var N=O.getSelfOrAncestorWithClass(W);N&&!s(S,N)&&S.push(N)}),S},detach:function(){}};function yt(x,S,O){return new gt(x,S,O)}gt.util={hasClass:p,addClass:v,removeClass:y,getClass:b,hasSameClasses:j,hasAllClasses:D,replaceWithOwnChildren:E,elementsHaveSameNonClassAttributes:V,elementHasNonClassAttributes:ce,splitNodeAt:Q,isEditableElement:Ue,isEditingHost:Ge,isEditable:ge},n.CssClassApplier=n.ClassApplier=gt,n.createClassApplier=yt,l.createAliasForDeprecatedMethod(n,"createCssClassApplier","createClassApplier",i)}),t})})(c_);var kd={toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"请输入内容",hideOnClick:!0},disableEditing:!0},jd=ya.extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var r=this;Ld.init(),ya.extensions.button.prototype.init.call(this),this.colorPicker=new Oc({parent:this.button,color:"#000",onDone:function(e){r.coloredText&&r.coloredText.isAppliedToSelection()&&r.coloredText.undoToSelection(),r.coloredText=Ld.createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:e.hex}},normalize:!0}),r.coloredText.toggleSelection(),r.base.checkContentChanged(),r.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(r){return r.nodeName.toLowerCase()==="mark"},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),h_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),p_=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Id=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Bd=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};(function(r){h_(e,r);function e(t){var n=r.call(this,t)||this;n.labelMap=new Map;var i=t.lf,o=t.graphModel;return n.lf=i,n.graphModel=o,n.state={tick:0},n}return e.prototype.componentDidMount=function(){var t=this,n=this.props.graphModel;this.editor=new ya(".lf-label-editor",ki(kd,{autoLink:!0,extensions:{colorPicker:new jd}})),n.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",function(){}),n.eventCenter.on("node:properties-change,node:properties-delete",function(){t.setState({tick:t.state.tick+1})})},e.prototype.componentDidUpdate=function(){var t;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):((t=this.editor)===null||t===void 0||t.destroy(),this.editor=new ya(".lf-label-editor",ki(kd,{autoLink:!0,extensions:{colorPicker:new jd}})))},e.prototype.componentWillUnmount=function(){var t;(t=this.editor)===null||t===void 0||t.destroy()},e.prototype.getLabels=function(){var t=this,n=this.props,i=n.lf.extension,o=n.graphModel,a=Bd(Bd([],Id(o.nodes),!1),Id(o.edges),!1),s=i.label;if(s){var l=[];return Qe(a,function(u){var d,f,c=u.getData(),h=(f=(d=c.properties)===null||d===void 0?void 0:d._label)!==null&&f!==void 0?f:[];Qe(h,function(g){var p=t.labelMap,v=new r_(g,u,o);p.set(v.id,v),l.push(I(t_,{label:v,element:u,graphModel:o},v.id))})}),l}return null},e.prototype.render=function(){return I("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},e.toolName="label-edit-tool",e=p_([Pt],e),e})(He);var ja=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},Ia=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},g_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},v_=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},ui={};function Tc(r){return r.startsWith("data:text/plain")}function Nc(r){return ja(this,void 0,void 0,function(){return Ia(this,function(e){return ui[r]?[2,ui[r]]:[2,new Promise(function(t,n){try{fetch(r).then(function(i){return i.blob()}).then(function(i){var o=new FileReader;o.onloadend=function(){t(ui[r]=o.result)},o.onerror=n,o.readAsDataURL(i)}).catch(function(){t(ui[r]=r)})}catch{return ui[r]=r}})]})})}function Hd(r,e){return ja(this,void 0,void 0,function(){var t,n,i;return Ia(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=r.getAttribute(e)||"",t.startsWith("data:")?[2]:[4,Nc(t)];case 1:return n=o.sent(),Tc(n)?[2]:(r.setAttribute(e,n),[3,3]);case 2:return i=o.sent(),console.error(i),[3,3];case 3:return[2]}})})}function Fd(r,e){return ja(this,void 0,void 0,function(){var t,n;return Ia(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e.startsWith("data:")?[2]:[4,Nc(e)];case 1:return t=i.sent(),Tc(t)?[2]:(r.style.backgroundImage="url(".concat(t,")"),[3,3]);case 2:return n=i.sent(),console.error(n),[3,3];case 3:return[2]}})})}function ds(r){return ja(this,void 0,void 0,function(){var e,t,n,i,o,a,s,u,l,u;return Ia(this,function(d){switch(d.label){case 0:for(e=[r],n=[];e.length;)t=e.shift(),t.children.length&&e.push.apply(e,v_([],g_(t.children),!1)),t instanceof HTMLElement&&(i=t.style,o=i.background,a=i.backgroundImage,s=o.match(/url\(["']?(.*?)["']?\)/),s&&s[1]&&(u=s[1],n.push(Fd(t,u))),l=a.match(/url\(["']?(.*?)["']?\)/),l&&l[1]&&(u=l[1],n.push(Fd(t,u)))),t instanceof HTMLImageElement?n.push(Hd(t,"src")):t instanceof SVGImageElement&&n.push(Hd(t,"href"));return[4,Promise.all(n)];case 1:return d.sent(),[2]}})})}function di(r,e,t){var n=document.createElement("canvas");n.width=e,n.height=t;var i=n.getContext("2d");return i&&i.drawImage(r,0,0,r.width,r.height,0,0,e,t),n}var Tn=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},Nn=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},y_=function(){function r(e){var t=e.lf,n=this;this.lf=t,this.customCssRules="",this.useGlobalRules=!0,t.getSnapshot=function(i,o){return Tn(n,void 0,void 0,function(){return Nn(this,function(a){switch(a.label){case 0:return[4,this.getSnapshot(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBlob=function(i,o){return Tn(n,void 0,void 0,function(){return Nn(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBlob(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBase64=function(i,o){return Tn(n,void 0,void 0,function(){return Nn(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBase64(i,o)];case 1:return[2,a.sent()]}})})}}return r.prototype.getSvgRootElement=function(e){var t=e.container.querySelector(".lf-canvas-overlay");return t},r.prototype.triggerDownload=function(e){var t=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download",this.fileName),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.dispatchEvent(t)},r.prototype.removeAnchor=function(e){for(var t=e.childNodes,n=e.childNodes&&e.childNodes.length,i=0;i<n;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-anchor")>-1&&(e.removeChild(e.childNodes[i]),n--,i--)}},r.prototype.removeRotateControl=function(e){for(var t=e.childNodes,n=e.childNodes&&e.childNodes.length,i=0;i<n;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-rotate-control")>-1&&(e.removeChild(e.childNodes[i]),n--,i--)}},r.prototype.getSnapshot=function(e,t){return Tn(this,void 0,void 0,function(){var n,i,o,a,s=this;return Nn(this,function(l){switch(l.label){case 0:return n=this.lf.graphModel.getPartial(),i=(t??{}).partial,o=i===void 0?n:i,a=this.lf.getEditConfig(),this.lf.updateEditConfig({isSilentMode:!0,stopScrollGraph:!0,stopMoveGraph:!0}),n===o?[3,1]:(this.lf.graphModel.setPartial(o),this.lf.graphModel.eventCenter.once("graph:updated",function(){return Tn(s,void 0,void 0,function(){return Nn(this,function(u){switch(u.label){case 0:return[4,this.snapshot(e,t)];case 1:return u.sent(),this.lf.graphModel.setPartial(n),[2]}})})}),[3,3]);case 1:return[4,this.snapshot(e,t)];case 2:l.sent(),l.label=3;case 3:return this.lf.updateEditConfig(a),[2]}})})},r.prototype.snapshot=function(e,t){return Tn(this,void 0,void 0,function(){var n,i,o,a,s,l,u,d,f,c=this;return Nn(this,function(h){switch(h.label){case 0:return n=t??{},i=n.fileType,o=i===void 0?"png":i,a=n.quality,this.fileName="".concat(e??"logic-flow.".concat(Date.now()),".").concat(o),s=this.getSvgRootElement(this.lf),[4,ds(s)];case 1:return h.sent(),o==="svg"?(l=this.cloneSvg(s),u=new XMLSerializer().serializeToString(l),d=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),f=URL.createObjectURL(d),this.triggerDownload(f)):this.getCanvasData(s,t??{}).then(function(g){var p=g.toDataURL("image/".concat(o),a).replace("image/".concat(o),"image/octet-stream");c.triggerDownload(p)}),[2]}})})},r.prototype.getSnapshotBase64=function(e,t){return Tn(this,void 0,void 0,function(){var n,i=this;return Nn(this,function(o){switch(o.label){case 0:return n=this.getSvgRootElement(this.lf),[4,ds(n)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(n,{backgroundColor:e}).then(function(s){var l=s.toDataURL("image/".concat(t??"png"));a({data:l,width:s.width,height:s.height})})})]}})})},r.prototype.getSnapshotBlob=function(e,t){return Tn(this,void 0,void 0,function(){var n,i=this;return Nn(this,function(o){switch(o.label){case 0:return n=this.getSvgRootElement(this.lf),[4,ds(n)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(n,{backgroundColor:e}).then(function(s){s.toBlob(function(l){a({data:l,width:s.width,height:s.height})},"image/".concat(t??"png"))})})]}})})},r.prototype.getClassRules=function(){var e="";if(this.useGlobalRules)for(var t=document.styleSheets,n=0;n<t.length;n++){var i=t[n];try{for(var o=0;o<i.cssRules.length;o++)e+=i.cssRules[o].cssText}catch{console.log("CSS scripts from different sources have been filtered out")}}return this.customCssRules&&(e+=this.customCssRules),e},r.prototype.getCanvasData=function(e,t){return Tn(this,void 0,void 0,function(){var n,i,o,a,s,l,u,d,f,c,h,g,p,v,y,b,C,R,j,D,w,A,z,Z,oe,se;return Nn(this,function(E){return n=t.width,i=t.height,o=t.backgroundColor,a=t.padding,s=a===void 0?40:a,l=this.cloneSvg(e,!1),u=window.devicePixelRatio||1,u<1&&(u=1),d=this.lf.graphModel.rootEl.querySelector(".lf-base"),f=d.getBoundingClientRect(),c=this.lf.container.querySelector(".lf-canvas-overlay"),h=c.getBoundingClientRect(),g=f.x-h.x,p=f.y-h.y,v=this.lf.graphModel,y=v.transformModel,b=y.SCALE_X,C=y.SCALE_Y,R=y.TRANSLATE_X,j=y.TRANSLATE_Y,l.lastChild.style.transform="matrix(1, 0, 0, 1, ".concat((-g+R)*(1/b),", ").concat((-p+j)*(1/C),")"),D=Math.ceil(f.width/b),w=Math.ceil(f.height/C),A=document.createElement("canvas"),A.style.width="".concat(D,"px"),A.style.height="".concat(w,"px"),A.width=D*u+s*2,A.height=w*u+s*2,z=A.getContext("2d"),z&&(z.clearRect(0,0,A.width,A.height),z.scale(u,u),o?(z.fillStyle=o,z.fillRect(0,0,A.width,A.height)):z.clearRect(0,0,A.width,A.height)),Z=new Image,oe=document.createElement("style"),oe.innerHTML=this.getClassRules(),se=document.createElement("foreignObject"),se.appendChild(oe),l.appendChild(se),[2,new Promise(function(M){Z.onload=function(){var ce=navigator.userAgent.indexOf("Firefox")>-1;try{ce?createImageBitmap(Z,{resizeWidth:n&&i?di(A,n,i).width:A.width,resizeHeight:n&&i?di(A,n,i).height:A.height}).then(function(be){z==null||z.drawImage(be,s/u,s/u),M(n&&i?di(A,n,i):A)}):(z==null||z.drawImage(Z,s/u,s/u),M(n&&i?di(A,n,i):A))}catch{z==null||z.drawImage(Z,s/u,s/u),M(n&&i?di(A,n,i):A)}};var P="data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)),V=P.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");Z.src=V})]})})},r.prototype.cloneSvg=function(e,t){var n=this,i;t===void 0&&(t=!0);var o=e.cloneNode(!0),a=o.lastChild,s=(i=a==null?void 0:a.childNodes)===null||i===void 0?void 0:i.length;if(s)for(var l=0;l<s;l++){var u=a==null?void 0:a.childNodes[l],d=u.classList&&Array.from(u.classList);if(d&&d.indexOf("lf-base")<0)a==null||a.removeChild(a.childNodes[l]),s--,l--;else{var f=a==null?void 0:a.childNodes[l];f&&f.childNodes.forEach(function(g){var p=g;n.removeAnchor(p.firstChild),n.removeRotateControl(p.firstChild)})}}if(t){var c=document.createElement("style");c.innerHTML=this.getClassRules();var h=document.createElement("foreignObject");h.appendChild(c),o.appendChild(h)}return o},r.pluginName="snapshot",r}();var m_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},__=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},fi="lf:defaultNodeMenu",ci="lf:defaultEdgeMenu",hi="lf:defaultGraphMenu",zd="lf:defaultSelectionMenu",b_=function(){function r(e){var t=e.lf,n=this;this.__currentData=null,this.lf=t;var i=t.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){n.setMenuConfig(o)},this.lf.addMenuConfig=function(o){n.addMenuConfig(o)},this.lf.setMenuByType=function(o){n.setMenuByType(o)})}return r.prototype.init=function(){var e=this,t,n,i,o,a=[{text:"删除",callback:function(u){e.lf.deleteNode(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}},{text:"复制",callback:function(u){e.lf.cloneNode(u.id)}}];(t=this.menuTypeMap)===null||t===void 0||t.set(fi,a);var s=[{text:"删除",callback:function(u){e.lf.deleteEdge(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}}];(n=this.menuTypeMap)===null||n===void 0||n.set(ci,s),(i=this.menuTypeMap)===null||i===void 0||i.set(hi,[]);var l=[{text:"删除",callback:function(u){e.lf.clearSelectElements(),u.edges.forEach(function(d){return e.lf.deleteEdge(d.id)}),u.nodes.forEach(function(d){return e.lf.deleteNode(d.id)})}}];(o=this.menuTypeMap)===null||o===void 0||o.set(zd,l)},r.prototype.render=function(e,t){var n=this;e.options.isSilentMode||(this.__container=t,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",t.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var o=i.target;Array.from(o.classList).indexOf("lf-menu-item")===-1&&Array.from(o.classList).indexOf("lf-menu")===-1;)o=o==null?void 0:o.parentElement;Array.from(o.classList).indexOf("lf-menu-item")>-1?(o.onclickCallback(n.__currentData),n.__menuDOM&&(n.__menuDOM.style.display="none"),n.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0)),this.lf.on("node:contextmenu",function(i){var o,a,s=i.data,l=i.position,u=i.e,d=l.domOverlayPosition,f=d.x,c=d.y,h=s.id,g=n.lf.graphModel.getNodeModelById(h);if(g){var p=[],v=(o=n.menuTypeMap)===null||o===void 0?void 0:o.get(g.type);g&&g.menu&&Array.isArray(g.menu)?p=g.menu:v?p=v:p=(a=n.menuTypeMap)===null||a===void 0?void 0:a.get(fi),n.__currentData=s,n.showMenu(f,c,p,{width:g.width,height:g.height,clientX:u.clientX,clientY:u.clientY})}}),this.lf.on("edge:contextmenu",function(i){var o,a,s,l=i.data,u=i.position,d=i.e,f=u.domOverlayPosition,c=f.x,h=f.y,g=l.id,p=n.lf.graphModel.getEdgeModelById(g);if(p){var v=[],y=(o=n.menuTypeMap)===null||o===void 0?void 0:o.get(p.type);p&&p.menu&&Array.isArray(p.menu)?v=p.menu:y?v=y:v=(s=(a=n.menuTypeMap)===null||a===void 0?void 0:a.get(ci))!==null&&s!==void 0?s:[],n.__currentData=l,n.showMenu(c,h,v,{width:p.width,height:p.height,clientX:d.clientX,clientY:d.clientY})}}),this.lf.on("blank:contextmenu",function(i){var o,a,s=i.position,l=(a=(o=n.menuTypeMap)===null||o===void 0?void 0:o.get(hi))!==null&&a!==void 0?a:[],u=s.domOverlayPosition,d=u.x,f=u.y;n.showMenu(d,f,l)}),this.lf.on("selection:contextmenu",function(i){var o,a=i.data,s=i.position,l=(o=n.menuTypeMap)===null||o===void 0?void 0:o.get(zd),u=s.domOverlayPosition,d=u.x,f=u.y;n.__currentData=a,n.showMenu(d,f,l)}),this.lf.on("node:mousedown",function(){n.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){n.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){n.__menuDOM.style.display="none"}))},r.prototype.destroy=function(){var e;this.__menuDOM&&((e=this===null||this===void 0?void 0:this.__container)===null||e===void 0||e.removeChild(this.__menuDOM),this.__menuDOM=void 0)},r.prototype.showMenu=function(e,t,n,i){if(!(!n||!n.length)){var o=this.__menuDOM;if(o){if(o.innerHTML="",o.append.apply(o,__([],m_(this.__getMenuDom(n)),!1)),!o.children.length)return;if(o.style.display="block",!i){o.style.top="".concat(t,"px"),o.style.left="".concat(e,"px");return}var a=i.width,s=i.height,l=i.clientX,u=i.clientY,d=this.lf.graphModel,f=o.offsetWidth,c=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=h-l,p=d.rootEl.getBoundingClientRect(),v=p.left+p.width;v<h&&(g=v-l),g<f&&(c=!1),c?o.style.left="".concat(e,"px"):o.style.left="".concat(e-a,"px");var y=o.offsetHeight,b=!0,C=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,R=C-u,j=p.top+p.height;j<C&&(R=j-u),R<y&&(b=!1),b?o.style.top="".concat(t,"px"):o.style.top="".concat(t-s,"px")}}},r.prototype.setMenuByType=function(e){var t,n=e.type,i=e.menu;!n||!i||(t=this.menuTypeMap)===null||t===void 0||t.set(n,i)},r.prototype.__getMenuDom=function(e){var t=[];return e&&e.length>0&&e.forEach(function(n){var i=document.createElement("li");if(n.className?i.className="lf-menu-item ".concat(n.className):i.className="lf-menu-item",n.icon===!0){var o=document.createElement("span");o.className="lf-menu-item-icon",i.appendChild(o)}var a=document.createElement("span");a.className="lf-menu-item-text",n.text&&(a.innerText=n.text),i.appendChild(a),i.onclickCallback=n.callback,t.push(i)}),t},r.prototype.setMenuConfig=function(e){var t,n,i;e&&(e.nodeMenu!==void 0&&((t=this.menuTypeMap)===null||t===void 0||t.set(fi,e.nodeMenu?e.nodeMenu:[])),e.edgeMenu!==void 0&&((n=this.menuTypeMap)===null||n===void 0||n.set(ci,e.edgeMenu?e.edgeMenu:[])),e.graphMenu!==void 0&&((i=this.menuTypeMap)===null||i===void 0||i.set(hi,e.graphMenu?e.graphMenu:[])))},r.prototype.addMenuConfig=function(e){var t,n,i,o,a,s,l,u,d;if(e){if(Array.isArray(e.nodeMenu)){var f=(n=(t=this.menuTypeMap)===null||t===void 0?void 0:t.get(fi))!==null&&n!==void 0?n:[];(i=this.menuTypeMap)===null||i===void 0||i.set(fi,f.concat(e.nodeMenu))}if(Array.isArray(e.edgeMenu)){var f=(a=(o=this.menuTypeMap)===null||o===void 0?void 0:o.get(ci))!==null&&a!==void 0?a:[];(s=this.menuTypeMap)===null||s===void 0||s.set(ci,f.concat(e.edgeMenu))}if(Array.isArray(e.graphMenu)){var f=(u=(l=this.menuTypeMap)===null||l===void 0?void 0:l.get(hi))!==null&&u!==void 0?u:[];(d=this.menuTypeMap)===null||d===void 0||d.set(hi,f.concat(e.graphMenu))}}},r.prototype.changeMenuItem=function(e,t){if(e==="add")this.addMenuConfig(t);else if(e==="reset")this.setMenuConfig(t);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},r.pluginName="menu",r}();var Pc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=function(){return Rr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Rr.apply(this,arguments)},Li=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},x_={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function E_(r){for(var e=r,t=1;t<e.length-1;){var n=Li(e[t-1],2),i=n[0],o=n[1],a=Li(e[t],2),s=a[0],l=a[1],u=Li(e[t+1],2),d=u[0],f=u[1];i===s&&s===d||o===l&&l===f?e.splice(t,1):t++}return e}function w_(r,e,t,n){var i=[r[0],r[1]],o=[r[0],r[1]];switch(t){case"tl":return e==="tr"?(i[1]+=n,o[0]+=n):e==="lb"&&(i[0]+=n,o[1]+=n),[i,o];case"tr":return e==="tl"?(i[1]+=n,o[0]-=n):e==="rb"&&(i[0]-=n,o[1]+=n),[i,o];case"bl":return e==="br"?(i[1]-=n,o[0]+=n):e==="lt"&&(i[0]+=n,o[1]-=n),[i,o];case"br":return e==="bl"?(i[1]-=n,o[0]-=n):e==="rt"&&(i[0]-=n,o[1]-=n),[i,o];default:return[]}}function S_(r,e,t,n){var i,o="",a="";r[0]===e[0]?o=r[1]>e[1]?"t":"b":r[1]===e[1]&&(o=r[0]>e[0]?"l":"r"),e[0]===t[0]?a=e[1]>t[1]?"t":"b":e[1]===t[1]&&(a=e[0]>t[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-r[0],e[1]-r[1])/2,Math.hypot(t[0]-e[0],t[1]-e[1])/2,n)||1/5*n,l="".concat(o).concat(a),u=x_[l]||"-",d="L ".concat(r[0]," ").concat(r[1]);if(u==="-")d+="L ".concat(e[0]," ").concat(e[1]," L ").concat(t[0]," ").concat(t[1]);else{var f=Li(w_(e,l,u,s),2),c=f[0],h=f[1];c&&h&&(d+="L ".concat(c[0]," ").concat(c[1]," Q ").concat(e[0]," ").concat(e[1]," ").concat(h[0]," ").concat(h[1]),i=Li(h,2),e[0]=i[0],e[1]=i[1])}return d}function C_(r,e){var t=0,n="";if(r.length===2)n+="M".concat(r[t][0]," ").concat(r[t++][1]," L ").concat(r[t][0]," ").concat(r[t][1]);else{for(n+="M".concat(r[t][0]," ").concat(r[t++][1]);t+1<r.length;){var i=r[t-1],o=r[t],a=r[t+++1];n+=S_(i,o,a,e)}n+="L ".concat(r[t][0]," ").concat(r[t][1])}return n}(function(r){Pc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,n=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.radius,s=a===void 0?5:a,l=t.getEdgeStyle(),u=t.getEdgeAnimationStyle(),d=E_(n.split(" ").map(function(h){return h.split(",").map(function(g){return+g})})),f=C_(d,s),c=Rr(Rr(Rr({style:i?u:{}},l),o),{fill:"none"});return _e("path",Rr({d:f},c))},e})(Gi);(function(r){Pc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Yi);var Dc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ma=function(){return ma=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ma.apply(this,arguments)},Xd=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Wd=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},O_=function(r){Dc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,n=t.id,i=t.x,o=t.y,a=t.width,s=t.height,l=t.properties,u=this.props.model.getNodeStyle();return _e("svg",{x:i-a/2,y:o-s/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[l.labelText?_e("text",{x:0,y:-5,fontSize:"16px",fill:u.stroke},l.labelText):"",l.disabledDelete?"":_e("text",{x:l.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:u.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,n)},"x")])},e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.id,l=this.props.model.getNodeStyle();return _e("g",{},[_e("rect",ma(ma({},l),{x:n-o/2,y:i-a/2,width:o,height:a,id:s})),this.getLabelShape()])},e.prototype.toFront=function(){},e.prototype.handleCustomDeleteIconClick=function(t){var n=this.props.graphModel;n.deleteNode(t)},e}(ta),A_=function(r){Dc(e,r);function e(){var t=r.apply(this,Wd([],Xd(arguments),!1))||this;return t.d=10,t.isResize=!1,t}return e.prototype.initNodeData=function(t){t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!1},r.prototype.initNodeData.call(this,t),this.zIndex=0,this.draggable=!0},e.prototype.setAttributes=function(){var t=this,n;this.points=[],((n=this.properties)===null||n===void 0?void 0:n.node_selection_ids).length>1&&setTimeout(function(){var i;t.updatePointsByNodes(((i=t.properties)===null||i===void 0?void 0:i.node_selection_ids)||[])})},e.prototype.getNodeStyle=function(){var t=r.prototype.getNodeStyle.call(this);return t.stroke=this.properties.strokeColor||"#008000",t.strokeDasharray="10 5",t},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.updatePoints=function(t){this.points=t},e.prototype.updateCoordinate=function(t){var n=t.x,i=t.y;this.x=n,this.y=i},e.prototype.updatePointsByNodes=function(t){var n=this,i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;t.forEach(function(u){var d=n.graphModel.getNodeModelById(u);if(d){var f=d.width,c=d.height,h=d.x,g=d.y;o=Math.min(o,h-f/2-n.d),a=Math.min(a,g-c/2-n.d),s=Math.max(s,h+f/2+n.d),l=Math.max(l,g+c/2+n.d)}}),i.push([o,a],[s,a],[s,l],[o,l]),![o,a,s,l].some(function(u){return Math.abs(u)===1/0})&&(this.updatePoints(i),this.updateCoordinate({x:(s+o)/2,y:(l+a)/2}))},e.prototype.resize=function(t){var n;this.isResize=!0;for(var i=t.width,o=t.height,a={x:i/this.width,y:o/this.height},s=(this.properties.node_selection_ids||[]).slice(),l=[],u=new Set;s.length;){var d=s.shift(),f=(n=this.graphModel.nodesMap[d])===null||n===void 0?void 0:n.model;if(f){if(!No(f)){l.push(f);continue}u.has(f.id)||(u.add(f.id),s.push.apply(s,Wd([],Xd(f.properties.node_selection_ids||[]),!1)))}}var c={x:this.x-this.width/2,y:this.y-this.height/2},h=r.prototype.resize.call(this,t),g={x:this.x-this.width/2,y:this.y-this.height/2};return l.forEach(function(p){p.width=p.width*a.x,p.height=p.height*a.y;var v=(p.x-c.x)*a.x+g.x-p.x,y=(p.y-c.y)*a.y+g.y-p.y;p.move(v,y,!0)}),this.isResize=!1,h},e}(qo),sl="node-selection";(function(){function r(e){var t=e.lf;this.selectNodes=[],this.d=10,this.lf=t,t.register({type:sl,view:O_,model:A_})}return Object.defineProperty(r.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map(function(e){return e.id})},enumerable:!1,configurable:!0}),r.prototype.addNodeSelection=function(){var e=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});e.updatePointsByNodes(this.selectNodesIds)},r.prototype.updateNodeSelection=function(){var e,t=this.getNodeSelection();t&&(this.lf.setProperties(t.id,{node_selection_ids:this.selectNodesIds}),(e=this.lf.getNodeModelById(t.id))===null||e===void 0||e.updatePointsByNodes(this.selectNodesIds))},r.prototype.getNodeSelection=function(){var e=this,t=this.selectNodesIds,n=this.lf.getGraphRawData(),i=t.filter(function(o){return o!==e.currentClickNode.id});return n.nodes.find(function(o){if(o.type==="node-selection"){var a=ll(o,"properties.node_selection_ids",[]);return i.every(function(s){return a.includes(s)})}return!1})},r.prototype.onNodeChange=function(e,t){var n=e.graphModel.nodes.filter(function(i){if(!No(i))return!1;var o=i.properties.node_selection_ids||[];return o.includes(t.id)});Promise.resolve().then(function(){n.forEach(function(i){i.updatePointsByNodes(i.properties.node_selection_ids||[])})})},r.prototype.render=function(e){var t=this;this.lf=e,e.on("node:click",function(n){var i;if(!(!n.e.shiftKey||n.data.type===sl)){t.currentClickNode=n.data;var o=!1;t.selectNodesIds.includes(n.data.id)&&((i=t.lf.getNodeModelById(n.data.id))===null||i===void 0||i.setSelected(!1),o=!0);var a=e.getSelectElements(!0).nodes;t.selectNodes=a,t.selectNodes.length===1?o?t.updateNodeSelection():t.addNodeSelection():t.selectNodes.length>1&&t.updateNodeSelection()}}),e.graphModel.addNodeMoveRules(function(n,i,o){if(t.onNodeChange(e,n),No(n)&&!n.isResize){var a=n.properties.node_selection_ids||[];return e.graphModel.moveNodes(a,i,o,!0),!0}return!0}),e.graphModel.addNodeResizeRules(function(n){return No(n)||t.onNodeChange(e,n),!0})},r.pluginName="node-selection",r})();var No=function(r){return!!(r&&r.type===sl)},M_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_a=function(){return _a=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_a.apply(this,arguments)};(function(r){M_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=t.properties;return _e("text",{x:n-o/2+5,y:i-a/2+16,fontSize:12,fill:"blue"},s.moreText)},e.prototype.getShape=function(){var t=this.props.model,n=t.x,i=t.y,o=t.width,a=t.height,s=this.props.model.getNodeStyle();return _e("g",{},[_e("rect",_a(_a({},s),{fill:"#FFFFFF",x:n-o/2,y:i-a/2})),this.getLabelShape()])},e})(vr);const fs="var(--el-color-grey)";function T_(r){r.register("download",({PolygonNode:e,PolygonNodeModel:t,h:n})=>{class i extends e{getIconShape(){return n("svg",{x:16,y:14,width:20,height:20,viewBox:"0 0 1024 1024"},n("path",{fill:fs,d:"M831.513034 319.863005h-95.945189c-17.662265 0-31.980365 14.3181-31.980365 31.980365 0 17.662265 14.3181 31.980365 31.980365 31.980366h64.218604c17.520025 0 31.722492 14.202467 31.722492 31.722492V863.786065c0 17.520025-14.202467 31.722492-31.722492 31.722492H159.66442c-17.520025 0-31.722492-14.202467-31.722493-31.722492V415.546228c0-17.520025 14.202467-31.722492 31.722493-31.722492h64.218603c17.662265 0 31.980365-14.3181 31.980366-31.980366 0-17.662265-14.3181-31.980365-31.980366-31.980365H127.937834c-35.322483 0-63.956637 28.634154-63.956637 63.956637v511.693008c0 35.322483 28.634154 63.956637 63.956637 63.956638h703.5752c35.322483 0 63.956637-28.634154 63.956638-63.956638V383.819642c0-35.32146-28.634154-63.956637-63.956638-63.956637z"}),n("path",{fill:fs,d:"M310.382073 521.036817c-12.388145-12.388145-32.473599-12.388145-44.862767 0l-0.364297 0.364297c-12.388145 12.388145-12.388145 32.473599 0 44.862767l190.186573 190.186574c5.818519 6.813173 14.465456 11.137665 24.126491 11.137664h0.515746c9.662057 0 18.307971-4.324492 24.12649-11.137664L694.296883 566.263881c12.388145-12.388145 12.388145-32.473599 0-44.862767l-0.364297-0.364297c-12.388145-12.388145-32.473599-12.388145-44.862767 0L511.706311 658.400325V95.743598c0-17.520025-14.202467-31.722492-31.722492-31.722492h-0.515746c-17.520025 0-31.722492 14.202467-31.722493 31.722492v562.656727L310.382073 521.036817z"}))}getShape(){const{model:s}=this.props,{width:l,height:u,x:d,y:f,fillOpacity:c,strokeOpacity:h,points:g}=s,p=s.getNodeStyle(),v=`matrix(1 0 0 1 ${d-l/2} ${f-u/2})`,y=g.map(b=>b.join(",")).join(" ");return n("g",{transform:v},[n("polygon",{...p,points:y,strokeOpacity:h,fillOpacity:c}),this.getIconShape()])}}class o extends t{constructor(s,l){s.text={value:s.text&&s.text.value||"",x:s.x,y:s.y+50},super(s,l);const u=25;this.points=[[u,0],[u*2,u],[u,u*2],[0,u]],this.stroke=fs}}return{view:i,model:o}})}function N_(r){r.register("polyline",({PolylineEdge:e,PolylineEdgeModel:t})=>{class n extends t{constructor(o,a){super(o,a)}}return{view:e,model:n}})}function P_(r){r.register("end",({CircleNode:e,CircleNodeModel:t,h:n})=>{class i extends e{getIconShape(){const{x:s,y:l}=this.props.model;return n("text",{fill:"var(--el-color-grey)",fontSize:12,x:s-12,y:l+4,width:50,height:25},"结束")}getShape(){const{model:s}=this.props,{x:l,y:u}=s,d=s.getNodeStyle();return n("g",{},[n("circle",{...d,cx:l,cy:u}),this.getIconShape()])}}class o extends t{constructor(s,l){s.text={value:s.text&&s.text.value||"",x:s.x,y:s.y+35},super(s,l)}getConnectedSourceRules(){const s=super.getConnectedSourceRules(),l={message:"终止节点不能作为连线的起点",validate:()=>!1};return s.push(l),s}}return{view:i,model:o}})}function D_(r){r.register("start",({CircleNode:e,CircleNodeModel:t,h:n})=>{class i extends e{getLabelShape(){const{x:s,y:l}=this.props.model;return n("text",{fill:"var(--el-color-grey)",fontSize:12,x:s-12,y:l+4,width:50,height:25},"开始")}getShape(){const{model:s}=this.props,{x:l,y:u}=s,d=s.getNodeStyle();return n("g",{},[n("circle",{...d,cx:l,cy:u}),this.getLabelShape()])}}class o extends t{constructor(s,l){s.text={value:s.text&&s.text.value||"",x:s.x,y:s.y+35,dragable:!1,editable:!0},super(s,l)}getConnectedTargetRules(){const s=super.getConnectedTargetRules(),l={message:"起始节点不能作为连线的终点",validate:()=>!1};return s.push(l),s}}return{view:i,model:o}})}function R_(r,e,t){r.register("push",({PolygonNode:n,PolygonNodeModel:i,h:o})=>{class a extends n{getIconShape(){return o("svg",{x:25,y:25,width:20,height:20,viewBox:"0 0 1024 1024"},o("path",{fill:"var(--el-color-grey)",d:"M866.461538 39.384615H393.846154c-43.323077 0-78.769231 35.446154-78.769231 78.769231v1.969231c0 13.784615 7.876923 27.569231 19.692308 35.446154 5.907692 3.938462 80.738462 78.769231 80.738461 78.769231 5.907692 5.907692 15.753846 0 15.753846-7.876924 0-15.753846 13.784615-31.507692 29.538462-31.507692h334.769231c15.753846 0 31.507692 15.753846 31.507692 31.507692v531.692308c0 15.753846-15.753846 27.569231-31.507692 27.569231h-334.769231c-15.753846 0-27.569231-11.815385-27.569231-27.569231v-1.969231c0-7.876923-9.846154-11.815385-15.753846-5.907692 0 0-74.830769 74.830769-82.707692 78.769231-11.815385 7.876923-19.692308 19.692308-19.692308 35.446154v39.384615c0 43.323077 33.476923 78.769231 76.8 78.769231h472.615385c43.323077 0 80.738462-35.446154 80.738461-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231zM630.153846 945.230769c-33.476923 0-59.076923-25.6-59.076923-59.076923s25.6-59.076923 59.076923-59.076923 59.076923 25.6 59.076923 59.076923-25.6 59.076923-59.076923 59.076923z m-86.646154-474.584615L297.353846 224.492308c-11.815385-11.815385-29.538462-11.815385-41.353846 0l-41.353846 41.353846c-11.815385 11.815385-11.815385 29.538462 0 41.353846l90.584615 90.584615c11.815385 11.815385 3.938462 33.476923-13.784615 33.476923H29.538462c-15.753846 1.969231-29.538462 15.753846-29.538462 31.507693v59.076923c0 15.753846 13.784615 29.538462 29.538462 29.538461h259.938461c17.723077 0 25.6 21.661538 13.784615 33.476923l-90.584615 90.584616c-11.815385 11.815385-11.815385 29.538462 0 41.353846l41.353846 41.353846c11.815385 11.815385 29.538462 11.815385 41.353846 0L543.507692 512c9.846154-9.846154 9.846154-29.538462 0-41.353846z"}))}getPlusShape(){const{model:u}=this.props;return r.getGraphData().edges.some(h=>h.sourceNodeId===u.id)?!1:o("svg",{x:70,y:20,width:30,height:30,viewBox:"0 0 1024 1024",class:"time-plus",onClick:h=>e(h,u),onMousedown:h=>t(h,u),onMouseUp:h=>t(h,u)},o("path",{fill:"#f17611",d:"M512 512m-448 0a448 448 0 1 0 896 0 448 448 0 1 0-896 0Z"}),o("path",{fill:"#ffffff",d:"M448 298.666667h128v426.666666h-128z"}),o("path",{fill:"#ffffff",d:"M298.666667 448h426.666666v128H298.666667z"}))}getShape(){const{model:u}=this.props,{width:d,height:f,x:c,y:h,fillOpacity:g,strokeOpacity:p,points:v}=u,y=u.getNodeStyle(),b=`matrix(1 0 0 1 ${c-d/2} ${h-f/2})`,C=v.map(R=>R.join(",")).join(" ");return o("g",{transform:b},[o("polygon",{...y,points:C,strokeOpacity:p,fillOpacity:g}),this.getIconShape(),this.getPlusShape()])}}class s extends i{constructor(u,d){u.text={value:u.text&&u.text.value||"",x:u.x,y:u.y+50},super(u,d);const f=35;this.points=[[f,0],[f*2,f],[f,f*2],[0,f]]}}return{view:a,model:s}})}function L_(r){r.register("user",({PolygonNode:e,PolygonNodeModel:t,h:n})=>{class i extends e{getIconShape(){return n("svg",{x:25,y:25,width:20,height:20,viewBox:"0 0 1126 1024"},n("path",{fill:"var(--el-color-grey)",d:"M792.576 379.392a25.6 25.6 0 0 0 25.2928 25.8048h283.2384A25.6 25.6 0 0 0 1126.4 379.392a25.6 25.6 0 0 0-25.2928-25.8048h-283.2384a25.6 25.6 0 0 0-25.344 25.8048z m303.9232 80.7424H761.856c-16.5376 0-29.9008 11.6224-29.9008 25.7536 0 14.1824 13.312 25.7536 29.9008 25.7536h334.6432c16.4864 0 29.9008-11.5712 29.9008-25.7536 0-14.1312-13.4144-25.7536-29.9008-25.7536z m4.608 106.496h-283.2384a25.6 25.6 0 0 0-25.344 25.7536 25.6 25.6 0 0 0 25.344 25.7536h283.2384A25.6 25.6 0 0 0 1126.4 592.384a25.6 25.6 0 0 0-25.2928-25.8048zM543.0272 1024H341.6576C150.8352 1024 0 1024 0 923.648v-20.1216c0-188.16 153.2928-341.1968 341.7088-341.1968h201.2672c188.416 0 341.76 153.0368 341.76 341.1968v20.0704C884.6848 1024 726.3232 1024 542.976 1024z m-203.1616-405.1456c-158.464 0-287.4368 128.4096-287.4368 286.208v20.48c0 40.9088 166.0928 40.9088 287.4368 40.9088h204.9536c100.4544 0 287.4368 0 287.4368-40.96v-20.3776c0-157.8496-128.9728-286.208-287.4368-286.208H339.8656z m92.416-76.7488a271.4112 271.4112 0 0 1-271.2064-271.0528A271.36 271.36 0 0 1 432.2816 0a271.36 271.36 0 0 1 271.2064 271.0528 271.4624 271.4624 0 0 1-271.2064 271.0528z m-215.3472-271.872c0 118.1696 96.6144 214.3232 215.3472 214.3232 118.784 0 215.3984-96.1536 215.3984-214.3232 0-118.2208-96.6144-214.3232-215.3984-214.3232S216.9344 152.0128 216.9344 270.2336z"}))}getShape(){const{model:s}=this.props,{width:l,height:u,x:d,y:f,fillOpacity:c,strokeOpacity:h,points:g}=s,p=s.getNodeStyle(),v=`matrix(1 0 0 1 ${d-l/2} ${f-u/2})`,y=g.map(b=>b.join(",")).join(" ");return n("g",{transform:v},[n("polygon",{...p,points:y,strokeOpacity:h,fillOpacity:c}),this.getIconShape()])}}class o extends t{constructor(s,l){s.text={value:s.text&&s.text.value||"",x:s.x,y:s.y+50},super(s,l);const u=35;this.points=[[u,0],[u*2,u],[u,u*2],[0,u]],this.menu=[{text:"删除",className:"lf-menu-delete",icon:!0,callback(d){globalThis.confirm("您确定要删除吗？")&&r.deleteNode(d.id)}},{text:"编辑",className:"lf-menu-item",callback(d){r.editText(d.id)}},{text:"复制",className:"lf-menu-item",callback(d){r.cloneNode(d.id)}}]}}return{view:i,model:o}})}function k_(r){return Yc({url:"/workflow/getList",method:"get",params:r})}const j_=defineComponent({name:"Workflow",data(){return{data:[],lf:null,showAddPanel:!1,addPanelStyle:{top:0,left:0},addClickNode:null,clickNode:null,dialogVisible:!1,graphData:null,dataVisible:!1}},created(){this.fetchData()},methods:{async fetchData(){const{data:r}=await k_();this.data=r,this.$_initLf()},$_initLf(){const r={container:this.$refs.container,background:{backgroundColor:"var(--el-color-white)"},grid:{size:10,visible:!1},keyboard:{enabled:!0},edgeTextDraggable:!0,guards:{beforeClone(){return!0},beforeDelete(){return!0}}};Ni.use(b_),Ni.use(y_),this.lf=new Ni({...r}),this.lf.setMenuConfig({nodeMenu:[],edgeMenu:[]}),this.lf.addMenuConfig({nodeMenu:[{text:"分享",callback(){alert("分享成功！")}},{text:"属性",callback(e){alert(`
                  节点id：${e.id}
                  节点类型：${e.type}
                  节点坐标：(x: ${e.x}, y: ${e.y})`)}}],edgeMenu:[{text:"属性",callback(e){alert(`
                  边id：${e.id}
                  边类型：${e.type}
                  边坐标：(x: ${e.x}, y: ${e.y})
                  源节点id：${e.sourceNodeId}
                  目标节点id：${e.targetNodeId}`)}}]}),this.lf.setTheme({circle:{r:20,fill:"var(--el-color-white)",stroke:"var(--el-color-grey)",strokeWidth:1},rect:{fill:"var(--el-color-white)",stroke:"var(--el-color-grey)",strokeWidth:1},diamond:{fill:"var(--el-color-white)",stroke:"var(--el-color-grey)",strokeWidth:1},ellipse:{fill:"var(--el-color-white)",stroke:"var(--el-color-grey)",strokeWidth:1},polygon:{fill:"var(--el-color-white)",stroke:"var(--el-color-grey)",strokeWidth:1},polyline:{stroke:"var(--el-color-grey)",hoverStroke:"var(--el-color-grey)",selectedStroke:"var(--el-color-grey)",strokeWidth:1},nodeText:{color:"var(--el-color-grey)"},edgeText:{color:"var(--el-color-grey)",background:{fill:"var(--el-color-white)"}}}),this.registerNode()},registerNode(){D_(this.lf),L_(this.lf),P_(this.lf),R_(this.lf,this.clickPlus,this.mouseDownPlus),T_(this.lf),N_(this.lf),this.render()},render(){this.lf.render(this.data),this.event()},getData(){this.lf.getGraphData()},event(){this.lf.on("node:click",({data:r})=>{this.clickNode=r,this.dialogVisible=!0}),this.lf.on("edge:click",({data:r})=>{this.clickNode=r,this.dialogVisible=!0}),this.lf.on("element:click",()=>{this.hideAddPanel()}),this.lf.on("blank:click",()=>{this.hideAddPanel()}),this.lf.on("connection:not-allowed",r=>{Gc.$baseMessage(r.msg,"error","hey")}),this.lf.on("node:mousemove",()=>{})},clickPlus(r,e){r.stopPropagation();const{clientX:t,clientY:n}=r;this.addPanelStyle.top=`${n-40}px`,this.addPanelStyle.left=`${t}px`,this.showAddPanel=!0,this.addClickNode=e},mouseDownPlus(r){r.stopPropagation()},hideAddPanel(){this.showAddPanel=!1,this.addPanelStyle.top=0,this.addPanelStyle.left=0,this.addClickNode=null},closeDialog(){this.dialogVisible=!1},catData(){this.graphData=this.lf.getGraphData(),this.dataVisible=!0}}}),I_={class:"workflow-container no-transition-container"},B_={id:"container",ref:"container",class:"hidden-xs-only"};function H_(r,e,t,n,i,o){const a=kn("vab-alert"),s=kn("control"),l=kn("node-panel"),u=kn("add-panel"),d=kn("property-dialog"),f=kn("el-drawer"),c=kn("data-dialog"),h=kn("vab-dialog");return Qi(),Xc("div",I_,[ii(a,{class:"hidden-sm-and-up",title:"手机端不支持工作流演示",type:"warning"}),r.lf?(Qi(),Wa(s,{key:0,class:"vab-control hidden-xs-only",lf:r.lf,onCatData:r.catData},null,8,["lf","onCatData"])):$a("",!0),ii(l,{class:"hidden-xs-only",lf:r.lf},null,8,["lf"]),Wc("div",B_,null,512),r.showAddPanel?(Qi(),Wa(u,{key:1,class:"add-panel hidden-xs-only",lf:r.lf,"node-data":r.addClickNode,style:$c(r.addPanelStyle),onAddNodeFinish:r.hideAddPanel},null,8,["lf","node-data","style","onAddNodeFinish"])):$a("",!0),ii(f,{modelValue:r.dialogVisible,"onUpdate:modelValue":e[0]||(e[0]=g=>r.dialogVisible=g),"before-close":r.closeDialog,direction:"rtl",size:"400px",title:"设置节点属性"},{default:kl(()=>[r.dialogVisible?(Qi(),Wa(d,{key:0,lf:r.lf,"node-data":r.clickNode,onSetPropertiesFinish:r.closeDialog},null,8,["lf","node-data","onSetPropertiesFinish"])):$a("",!0)]),_:1},8,["modelValue","before-close"]),ii(h,{modelValue:r.dataVisible,"onUpdate:modelValue":e[1]||(e[1]=g=>r.dataVisible=g),"append-to-body":"",class:"graph-data-dialog",height:"100px",title:"数据"},{default:kl(()=>[ii(c,{"graph-data":r.graphData},null,8,["graph-data"])]),_:1},8,["modelValue"])])}const $_=Uc(j_,[["render",H_],["__scopeId","data-v-f7b82cbd"]]);export{$_ as default};
