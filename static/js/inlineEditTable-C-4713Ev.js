/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-25 17:01:24 
 */
import{d as A,b as y,M as n,V as a,R as M,u as i,D as s,F as d,Y as F,o as r,$ as L,ab as I,_ as c,Z as b,U as h}from"./vsv-element-plus-CbS2IxKo.js";import{g as R}from"./table-FVCHKFfq.js";import"./index-BnT9uhJE.js";import"./vsv-icon-93gfr_RM.js";import"./vsv-nprogress-DzPgnd7z.js";const Y={class:"inline-edit-table-container auto-height-container"},Z=["onClick"],j=["onClick"],Q=A({name:"InlineEditTable",__name:"inlineEditTable",setup(G){const v=ref([]),m=ref(!0),k=ref(0),o=reactive({pageNo:1,pageSize:20,title:""}),_=async()=>{m.value=!0;const{data:t}=await R(o);v.value=t.list.map(l=>(l.edit=!1,l.originalTitle=l.title,l.originalAuthor=l.author,l)),k.value=t.total,m.value=!1},V=t=>{o.pageNo=1,o.pageSize=t,_()},N=t=>{o.pageNo=t,_()},x=()=>{o.pageNo=1,_()},z=t=>{t.title=t.originalTitle,t.author=t.originalAuthor,t.edit=!1},S=t=>{t.edit=!1,t.originalTitle=t.title,t.originalAuthor=t.author};return onBeforeMount(()=>{_()}),(t,l)=>{const g=d("el-input"),C=d("el-form-item"),f=d("el-button"),q=d("el-form"),D=d("vab-query-form-right-panel"),T=d("vab-query-form"),p=d("el-table-column"),U=d("el-empty"),$=d("el-table"),E=d("vab-pagination"),B=F("loading");return r(),y("div",Y,[n(T,null,{default:a(()=>[n(D,{span:24},{default:a(()=>[n(q,{inline:"",model:i(o),onSubmit:l[1]||(l[1]=L(()=>{},["prevent"]))},{default:a(()=>[n(C,null,{default:a(()=>[n(g,{modelValue:i(o).title,"onUpdate:modelValue":l[0]||(l[0]=e=>i(o).title=e),clearable:"",placeholder:"标题"},null,8,["modelValue"])]),_:1}),n(C,null,{default:a(()=>[n(f,{icon:i(I),loading:i(m),"native-type":"submit",type:"primary",onClick:x},{default:a(()=>l[2]||(l[2]=[c("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),M((r(),s($,{border:"",data:i(v)},{empty:a(()=>[n(U,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[n(p,{type:"selection",width:"38"}),n(p,{align:"center",label:"序号",width:"55"},{default:a(({$index:e})=>[c(b(e+1),1)]),_:1}),n(p,{align:"center",label:"标题","min-width":"240"},{default:a(({row:e})=>[e.edit?(r(),s(g,{key:0,modelValue:e.title,"onUpdate:modelValue":u=>e.title=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.title),9,Z))]),_:1}),n(p,{align:"center",label:"作者","min-width":"140",prop:"author"},{default:a(({row:e})=>[e.edit?(r(),s(g,{key:0,modelValue:e.author,"onUpdate:modelValue":u=>e.author=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.author),9,j))]),_:1}),n(p,{align:"center",label:"操作",width:"150"},{default:a(({row:e})=>[e.edit?h("",!0):(r(),s(f,{key:0,text:"",type:"primary",onClick:u=>e.edit=!e.edit},{default:a(()=>l[3]||(l[3]=[c("编辑")])),_:2},1032,["onClick"])),e.edit?(r(),s(f,{key:1,text:"",type:"primary",onClick:u=>S(e)},{default:a(()=>l[4]||(l[4]=[c("保存")])),_:2},1032,["onClick"])):h("",!0),e.edit?(r(),s(f,{key:2,text:"",type:"danger",onClick:u=>z(e)},{default:a(()=>l[5]||(l[5]=[c("取消")])),_:2},1032,["onClick"])):h("",!0)]),_:1})]),_:1},8,["data"])),[[B,i(m)]]),n(E,{"current-page":i(o).pageNo,"page-size":i(o).pageSize,total:i(k),onCurrentChange:N,onSizeChange:V},null,8,["current-page","page-size","total"])])}}});export{Q as default};
