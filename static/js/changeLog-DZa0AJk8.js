/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-12 16:08:16 
 */
import{_ as V}from"./index-CcBxCUaS.js";import{k as B,v as d,m as j,f as D,h as R,n as H,q as Y,_ as N}from"./index-BiEcGzGC.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-CHRyiO5u.js";import{d as q,a5 as z,r as p,a6 as y,C as A,R as F,b as h,o as s,Z as n,T as o,b6 as U,S as _,u as c,av as Z,bc as G,a2 as J,ai as K,bd as O,bj as P,e as Q,a7 as k,a8 as W,b7 as X}from"./vsv-element-plus-B-S50adB.js";import"./vsv-icon-DcXMIZgh.js";import"./vsv-nprogress-Bmiy9T8n.js";const ee=()=>B({url:"https://api.vuejs-core.cn/getShopChangeLog",method:"get"}),te={class:"change-log-container no-background-container auto-height-container"},oe=["innerHTML"],ne=["innerHTML"],ae="https://vuejs-core.cn",se=q({name:"ChangeLog",__name:"changeLog",setup(ce){const f=z().format("YYYY-M-D"),g=p([]),m=p(d),r=p(!1),w=e=>e.sort((t,u)=>{const i=new Date(t.timestamp),l=new Date(u.timestamp);return i<l?1:i>l?-1:0});y(async()=>{const{data:e}=await ee(),t=w(e);t[0].timestamp=f,t.unshift({timestamp:f,content:`
    小版本更新日志及bug修复日志演示地址不做展示，具体更新内容请购买后前往绑定仓库查看，
    <a href='${ae}/authorization/shop-vite.html' target='_blank'>点我购买</a>
    `,waver:"success"}),g.value=t}),A(()=>{});const C=async()=>{r.value=!0;const{data:{version:e}}=await H({url:`./vue-shop-vite-version.json?t=${Date.now()}`,method:"get"});return m.value=e,setTimeout(()=>{r.value=!1},300),e},v=async()=>{const e=await C();d===e?D("当前已是最新版本","success","hey"):R("请手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容",`检测到新版本V${e}`,()=>{Y("update-website",e)})};return y(()=>{location.hostname!=="localhost"&&!location.hostname.includes("127")&&!location.hostname.includes("192")&&v()}),(e,t)=>{const u=F("vab-icon"),i=W,l=I,L=j,b=V,T=O,x=G,M=Z,$=U,E=X;return s(),h("div",te,[n(E,{gutter:20},{default:o(()=>[n($,{lg:15,md:24,sm:24,xl:12,xs:24},{default:o(()=>[n(b,{class:"auto-height-card has-header",skeleton:"","skeleton-rows":16},{header:o(()=>[n(u,{icon:"file-word-line"}),t[1]||(t[1]=k(" 更新日志 ")),n(i,{class:"card-header-button",type:"primary",onClick:v},{default:o(()=>t[0]||(t[0]=[k("检查更新")])),_:1})]),default:o(()=>[c(m)===c(d)?(s(),_(l,{key:0,title:c(r)?"正在检查更新...":"当前已是最新版本，您可以手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容",type:"info"},null,8,["title"])):(s(),_(l,{key:1,title:c(r)?"正在检查更新...":`检测到新版本V${c(m)}！请手动按下键盘Ctrl（Command） + Shift + R 刷新页面，以保证您第一时间获得网站的更新内容`,type:"info"},null,8,["title"])),n(M,{style:{height:"calc(100% - 60px)"}},{default:o(()=>[n(x,null,{default:o(()=>[(s(!0),h(J,null,K(c(g),(a,S)=>(s(),_(T,{key:S,color:a.color,timestamp:a.timestamp},P({default:o(()=>[a.card?(s(),_(b,{key:0},{default:o(()=>[Q("div",{class:"change-log-item",innerHTML:a.content},null,8,oe)]),_:2},1024)):(s(),h("div",{key:1,class:"change-log-item",innerHTML:a.content},null,8,ne))]),_:2},[a.waver?{name:"dot",fn:o(()=>[n(L,{type:a.waver},null,8,["type"])]),key:"0"}:void 0]),1032,["color","timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),de=N(se,[["__scopeId","data-v-00ed1100"]]);export{de as default};
