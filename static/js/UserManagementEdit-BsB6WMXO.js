/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:39:13 
 */
import{a as M}from"./userManagement-oXhD5VMp.js";import{d as U,N as m,o as C,M as E,$ as s,T as l,a4 as q,u as o,k as N}from"./vsv-element-plus-CxGOTlXz.js";import"./index-BKznZfTt.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const O=U({name:"UserManagementEdit",__name:"UserManagementEdit",emits:["fetch-data"],setup(R,{expose:_,emit:b}){const g=b,d=ref(),t=reactive({username:"",password:"",email:"",roles:[]}),V=reactive({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱"}],roles:[{required:!0,trigger:"blur",message:"请选择角色"}]}),p=ref(""),n=ref(!1);_({showEdit:a=>{n.value=!0,nextTick(()=>{a?(p.value="编辑",Object.assign(t,a)):p.value="添加"})}});const f=()=>{var a,e;(a=d.value)==null||a.clearValidate(),(e=d.value)==null||e.resetFields(),g("fetch-data")},v=()=>{var a;(a=d.value)==null||a.validate(async e=>{if(e){const{msg:u}=await M(t);await $baseMessage(u,"success","hey"),await f(),n.value=!1}})};return(a,e)=>{const u=m("el-input"),i=m("el-form-item"),c=m("el-checkbox"),w=m("el-checkbox-group"),x=m("el-form"),k=m("el-button"),y=m("vab-dialog");return C(),E(y,{modelValue:o(n),"onUpdate:modelValue":e[4]||(e[4]=r=>N(n)?n.value=r:null),"append-to-body":"",title:o(p),width:"500px",onClose:f},{footer:s(()=>[l(k,{type:"primary",onClick:v},{default:s(()=>e[5]||(e[5]=[q("保存")])),_:1})]),default:s(()=>[l(x,{ref_key:"formRef",ref:d,"label-width":"80px",model:o(t),rules:o(V)},{default:s(()=>[l(i,{label:"用户名",prop:"username"},{default:s(()=>[l(u,{modelValue:o(t).username,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).username=r),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"密码",prop:"password"},{default:s(()=>[l(u,{modelValue:o(t).password,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).password=r),modelModifiers:{trim:!0},clearable:"",type:"password"},null,8,["modelValue"])]),_:1}),l(i,{label:"邮箱",prop:"email"},{default:s(()=>[l(u,{modelValue:o(t).email,"onUpdate:modelValue":e[2]||(e[2]=r=>o(t).email=r),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"角色",prop:"roles"},{default:s(()=>[l(w,{modelValue:o(t).roles,"onUpdate:modelValue":e[3]||(e[3]=r=>o(t).roles=r)},{default:s(()=>[l(c,{label:"admin"}),l(c,{label:"editor"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{O as default};
