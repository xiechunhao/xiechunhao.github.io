/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-CAvY8Qbf.js";import{_ as O}from"./index-Qf4Lmxow.js";import{_ as P}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-33Sqe07T.js";import{_ as W}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-CdA2oT4X.js";import{d as j,r as p,f as A,O as H,a5 as J,a as U,o as h,Y as e,T as X,S as t,a7 as Y,u as l,br as G,a6 as _,ap as K,aC as Q,aq as Z,aM as ee,aS as te,V as ae,R as ne,aP as oe,X as w,bD as le,aH as se,aJ as ie,aR as re}from"./vsv-element-plus-CcCXTk6v.js";import{g as ce,a as C}from"./workOrder-CmZjQPjt.js";import{$ as k,f as d}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const pe={class:"work-order-container auto-height-container"},Ce=j({name:"WorkOrder",__name:"WorkOrder",setup(_e){const f=p(),g=p([]),u=p(!0),b=p(0),m=p([]),s=A({pageNo:1,pageSize:20});H(()=>{var a;(a=f.value)==null||a.doLayout()});const c=async()=>{u.value=!0;const{data:a}=await ce(s);g.value=a.list,b.value=a.total,u.value=!1},E=a=>{s.pageNo=1,s.pageSize=a,c()},S=a=>{s.pageNo=a,c()},z=()=>{s.pageNo=1,c()},D=a=>{m.value=a},y=a=>{if(a.id)k("您确定要删除当前项吗",null,async()=>{const{msg:n}=await C({ids:a.id});d(n,"success","hey"),await c()});else if(m.value.length>0){const n=m.value.map(r=>r.id).join(",");k("您确定要删除选中项吗",null,async()=>{const{msg:r}=await C({ids:n});d(r,"success","hey"),await c()})}else d("您未选中任何行","warning","hey")};return J(()=>{c()}),(a,n)=>{const r=Y,N=W,$=ee,v=Z,q=K,R=P,V=O,i=oe,x=le,B=se,T=ie,L=re,M=I,F=ae;return h(),U("div",pe,[e(V,null,{default:t(()=>[e(N,null,{default:t(()=>[e(r,{icon:l(G),type:"danger",onClick:y},{default:t(()=>n[2]||(n[2]=[_("删除")])),_:1},8,["icon"])]),_:1}),e(R,null,{default:t(()=>[e(q,{inline:"",model:l(s),onSubmit:n[1]||(n[1]=Q(()=>{},["prevent"]))},{default:t(()=>[e(v,{label:"工单标题"},{default:t(()=>[e($,{modelValue:l(s).title,"onUpdate:modelValue":n[0]||(n[0]=o=>l(s).title=o),clearable:"",placeholder:"请输入工单标题"},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(r,{icon:l(te),loading:l(u),"native-type":"submit",type:"primary",onClick:z},{default:t(()=>n[3]||(n[3]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),X((h(),ne(L,{ref_key:"tableRef",ref:f,border:"",data:l(g),onSelectionChange:D},{empty:t(()=>[e(T,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:t(({$index:o})=>[_(w(o+1),1)]),_:1}),e(i,{align:"center",label:"工单号","min-width":"200",prop:"uuid","show-overflow-tooltip":""}),e(i,{align:"center",label:"标题","min-width":"200",prop:"title","show-overflow-tooltip":""}),e(i,{align:"center",label:"进度","min-width":"180"},{default:t(({row:o})=>[e(x,{percentage:parseInt(o.progress),status:o.progress=="100"?"success":""},null,8,["percentage","status"])]),_:1}),e(i,{align:"center",label:"提交者",prop:"submit"}),e(i,{align:"center",label:"受理人员","min-width":"90",prop:"accept","show-overflow-tooltip":""}),e(i,{align:"center",label:"工单状态","min-width":"90"},{default:t(({row:o})=>[e(B,{effect:"dark",type:o.status=="处理中"?"warning":o.status=="已处理"?"success":"primary"},{default:t(()=>[_(w(o.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"操作",width:"80"},{default:t(({row:o})=>[e(r,{text:"",type:"danger",onClick:ue=>y(o)},{default:t(()=>n[4]||(n[4]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,l(u)]]),e(M,{"current-page":l(s).pageNo,"page-size":l(s).pageSize,total:l(b),onCurrentChange:S,onSizeChange:E},null,8,["current-page","page-size","total"])])}}});export{Ce as default};
