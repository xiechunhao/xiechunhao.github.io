/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{g as J,_ as O,d as U,a as W}from"./DictionaryManagementEdit.vue_vue_type_script_setup_true_lang-BqRi28sA.js";import{_ as X}from"./index-Qf4Lmxow.js";import{_ as Y}from"./VabQueryFormTopPanel-Hok6JHOx.js";import{_ as j}from"./index-DK68u2cP.js";import{d as z,r as o,f as G,w as H,O as Q,a5 as Z,a as V,o as g,Y as a,S as n,b7 as ee,a7 as te,u as l,bq as $,a6 as f,aM as ae,i as ne,bv as oe,b as le,W as se,X as ie,T as re,R as de,aR as ce,aP as _e,aJ as ue,V as pe,b8 as me}from"./vsv-element-plus-CcCXTk6v.js";import{$ as fe,f as ye,_ as be}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const ve={class:"dictionary-management-container no-background-container auto-height-container"},ke=["onClick"],ge=z({name:"DictionaryManagement",__name:"index",setup(he){const h=o(),x=o(null),y=o(null),r=o([]),D=G({children:"children",label:"label"}),C=o([]),b=o(!0),v=o(!0),E=o(""),d=o(""),N=()=>{y.value.showEdit()},w=e=>{y.value.showEdit(e)},T=e=>{e.id&&fe("您确定要删除当前项吗",null,async()=>{const{msg:t}=await U({paths:e.id});ye(t,"success","hey"),await c()})},c=async(e={key:"root"})=>{e.key==="root"?v.value=!0:v.value=!1,E.value=e.key,b.value=!0;const t=await W(e);C.value=t.data.list,b.value=!1},B=e=>{c(e)},L=(e,t)=>e?t.label.includes(e):!0;J().then(({data:e})=>{const{list:t}=e;r.value=t});const M=(e,t)=>{const i=e.parent,_=i.data.children||i.data,k=_.findIndex(u=>u.id===t.id);_.splice(k,1),r.value=[...r.value]};return H(d,e=>{x.value.filter(e)}),Q(()=>{var e;(e=h.value)==null||e.doLayout()}),Z(()=>{c()}),(e,t)=>{const i=te,_=ae,k=oe,u=j,R=ee,q=Y,I=X,p=_e,A=ue,K=ce,P=me,S=O,F=pe;return g(),V("div",ve,[a(P,{gutter:20},{default:n(()=>[a(R,{lg:4,md:8,sm:24,xl:4,xs:24},{default:n(()=>[a(u,{class:"auto-height-card"},{default:n(()=>[a(i,{class:"tree-button",icon:l($),type:"primary",onClick:N},{default:n(()=>t[2]||(t[2]=[f("添加字典分类")])),_:1},8,["icon"]),a(_,{modelValue:l(d),"onUpdate:modelValue":t[0]||(t[0]=s=>ne(d)?d.value=s:null),clearable:"",placeholder:"请输入字典名称"},null,8,["modelValue"]),a(k,{ref_key:"treeRef",ref:x,data:l(r),"default-expand-all":"","default-expanded-keys":["root"],"filter-node-method":L,"node-key":"id",props:l(D),onNodeClick:B},{default:n(({node:s,data:m})=>[le("span",null,ie(s.label),1),m.children?se("",!0):(g(),V("a",{key:0,onClick:xe=>M(s,m)},"删除",8,ke))]),_:1},8,["data","props"])]),_:1})]),_:1}),a(R,{lg:20,md:16,sm:24,xl:20,xs:24},{default:n(()=>[a(u,{class:"auto-height-card"},{default:n(()=>[a(I,null,{default:n(()=>[a(q,{span:12},{default:n(()=>[a(i,{disabled:l(v),icon:l($),type:"primary",onClick:t[1]||(t[1]=s=>w({parentKey:l(E)}))},{default:n(()=>t[3]||(t[3]=[f("添加")])),_:1},8,["disabled","icon"])]),_:1})]),_:1}),re((g(),de(K,{ref_key:"tableRef",ref:h,border:"",data:l(C)},{empty:n(()=>[a(A,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[a(p,{label:"id","min-width":"180",prop:"id"}),a(p,{label:"key值",prop:"key"}),a(p,{label:"字典值",prop:"value"}),a(p,{label:"操作",width:"150"},{default:n(({row:s})=>[a(i,{text:"",type:"primary",onClick:m=>w(s)},{default:n(()=>t[4]||(t[4]=[f("编辑")])),_:2},1032,["onClick"]),a(i,{text:"",type:"danger",onClick:m=>T(s)},{default:n(()=>t[5]||(t[5]=[f("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,l(b)]])]),_:1})]),_:1})]),_:1}),a(S,{ref_key:"editRef",ref:y,onFetchData:c},null,512)])}}}),Te=be(ge,[["__scopeId","data-v-4da36fdd"]]);export{Te as default};
