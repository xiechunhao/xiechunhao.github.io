/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-11 00:13:46 
 */
import{d as V,a as P,J as e,U as o,A as n,u as r,P as T,ab as z,Z as p,W as F,z as g,R as G,o as _}from"./vsv-element-plus-CWjYVfvE.js";import{g as J,d as U}from"./menuManagement-BSUWm5SE.js";import{G as W}from"./index-D_keMk_X.js";import"./vsv-icon-CzoHxvAi.js";import"./vsv-nprogress-D-M_H-zP.js";const Z={class:"menu-management-container no-background-container auto-height-container"},S=V({name:"MenuManagement",__name:"index",setup(j){const u=ref(),i=ref(null),f=ref([]),y=reactive({children:"children",label:"label"}),h=ref([]),d=ref(!0),w=()=>{i.value.showEdit()},k=(t={})=>{i.value.showEdit(t)},C=(t={})=>{t.path&&$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:a}=await U({paths:t.path});$baseMessage(a,"success","hey"),await c()})},c=async(t={})=>{d.value=!0;const{data:a}=await W({role:t});h.value=a.list,d.value=!1},x=({role:t})=>{c(t)};return onActivated(()=>{var t;(t=u.value)==null||t.doLayout()}),onBeforeMount(()=>{J().then(({data:t})=>{f.value=t.list}),c()}),(t,a)=>{const D=n("el-tree"),v=n("vab-card"),b=n("el-col"),m=n("el-button"),N=n("vab-query-form-top-panel"),R=n("vab-query-form"),l=n("el-table-column"),q=n("vab-icon"),B=n("el-empty"),E=n("el-table"),L=n("el-row"),M=n("menu-management-edit"),$=F("loading");return _(),P("div",Z,[e(L,{gutter:20},{default:o(()=>[e(b,{lg:4,md:8,sm:24,xl:4,xs:24},{default:o(()=>[e(v,{class:"auto-height-card"},{default:o(()=>[e(D,{data:r(f),"default-expanded-keys":["root"],"node-key":"id",props:r(y),onNodeClick:x},null,8,["data","props"])]),_:1})]),_:1}),e(b,{lg:20,md:16,sm:24,xl:20,xs:24},{default:o(()=>[e(v,{class:"auto-height-card"},{default:o(()=>[e(R,null,{default:o(()=>[e(N,{span:12},{default:o(()=>[e(m,{icon:r(z),type:"primary",onClick:w},{default:o(()=>a[0]||(a[0]=[p("添加")])),_:1},8,["icon"])]),_:1})]),_:1}),T((_(),g(E,{ref_key:"tableRef",ref:u,border:"",data:r(h),"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{empty:o(()=>[e(B,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(l,{align:"center",label:"标题","min-width":"140",prop:"meta.title","show-overflow-tooltip":""}),e(l,{align:"center",label:"name","min-width":"120",prop:"name","show-overflow-tooltip":""}),e(l,{align:"center",label:"路径","min-width":"140",prop:"path","show-overflow-tooltip":""}),e(l,{align:"center",label:"vue文件路径","min-width":"120",prop:"component","show-overflow-tooltip":""}),e(l,{align:"center",label:"图标"},{default:o(({row:s})=>[s.meta.icon?(_(),g(q,{key:0,icon:s.meta.icon},null,8,["icon"])):G("",!0)]),_:1}),e(l,{align:"center",label:"操作",width:"150"},{default:o(({row:s})=>[e(m,{text:"",type:"primary",onClick:A=>k(s)},{default:o(()=>a[1]||(a[1]=[p("编辑")])),_:2},1032,["onClick"]),e(m,{text:"",type:"danger",onClick:A=>C(s)},{default:o(()=>a[2]||(a[2]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,r(d)]])]),_:1})]),_:1})]),_:1}),e(M,{ref_key:"editRef",ref:i,onFetchData:c},null,512)])}}});export{S as default};
