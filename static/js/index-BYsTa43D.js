var I=(u,s,g)=>new Promise((m,i)=>{var r=p=>{try{f(g.next(p))}catch(e){i(e)}},c=p=>{try{f(g.throw(p))}catch(e){i(e)}},f=p=>p.done?m(p.value):Promise.resolve(p.value).then(r,c);f((g=g.apply(u,s)).next())});import{d as j,o as y,f as D,w as n,e as t,$ as U,b as l,b1 as q,b3 as $,ac as C,_ as F,Y as w,N as L,h as x,a as R,F as J,r as K,n as b,t as v,m as _,b8 as Q,b9 as X,aM as A,b6 as Z,b7 as tt,z as T,ba as et,b4 as at,b5 as ot,S as nt}from"./index-ZnvSvhwo.js";import{u as E}from"./index-DkHmMGFL.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{u as st}from"./themes-DiqeDmz3.js";import{u as Y}from"./chart-option-CtQs1WEE.js";/* empty css              */const rt={class:"content-wrap"},lt={class:"content"},it=j({__name:"chain-item",props:{renderData:{type:Object,default:""},loading:{type:Boolean,default:""},cardStyle:{type:Object,default:()=>({})}},setup(u){const s=u;return(g,m)=>{const i=q,r=$,c=C;return y(),D(c,{loading:s.loading,style:{width:"100%"}},{default:n(()=>[t(r,{bordered:!1,style:U(s.cardStyle)},{default:n(()=>[l("div",rt,[l("div",lt,[t(i,{title:s.renderData.Name,value:s.renderData.Value,animation:"","show-group-separator":""},null,8,["title","value"])])])]),_:1},8,["style"])]),_:1},8,["loading"])}}}),V=F(it,[["__scopeId","data-v-360c1a3c"]]);function ct(){return w.post("/anchor/project/list")}function dt(u){return w.post(`anchor/statistics/${u.projectId}`,u)}function pt(u){return w.post(`anchor/list?projectId=${u.projectId}`)}function ut(u){return console.log(u,"data"),w.post(`anchor/daily/gsv?projectId=${u.projectId}`)}function _t(u){return w.post(`anchor/percentage/gsv?projectId=${u.projectId}`)}const gt={class:"header"},mt={class:"grid-item"},ft={class:"select-project"},ht={class:"content"},vt={class:"grid-item"},yt={class:"select-status"},xt={class:"status"},bt={class:"status"},It={class:"status"},Dt={class:"grid-item"},jt={class:"grid-item"},Ft={class:"grid-item"},St={class:"grid-item"},Vt={class:"grid-item"},$t=j({__name:"content-top",setup(u){const{loading:s,setLoading:g}=E(),m=L(),{isDark:i}=st(),r=x({regularization:{Name:"转正",Value:0,Target:null},resignation:{Name:"离职",Value:0,Target:null},probation:{Name:"试用期",Value:0,Target:null},anchorGSV:{Name:"主播GSV",Value:0,Target:0},advertisingROI:{Name:"广告ROI",Value:0,Target:0},uv:{Name:"UV价值",Value:0,Target:0},conversionRate:{Name:"转换率",Value:0,Target:0},refundRate:{Name:"退款率",Value:0,Target:0}}),c=x(0),f=a=>{c.value=a,p()},p=()=>I(this,null,function*(){try{g(!0),m.updateProjectId({projectId:c.value});const a=yield dt({projectId:c.value});if(a.code===200){let d=a.data;r.value=d}}catch(a){}finally{g(!1)}}),e=x([]);return I(this,null,function*(){try{const a=yield ct();a.code===200&&(e.value=a.data,c.value=a.data[0].idx,p())}catch(a){}finally{}}),(a,d)=>{const S=Q,W=X,M=C,H=$;return y(),D(H,{class:"general-card"},{default:n(()=>{var B,G,k,P,O;return[l("div",gt,[l("div",mt,[l("div",ft,[d[1]||(d[1]=l("div",{class:"title"},"项目选择",-1)),l("div",ht,[t(W,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=h=>c.value=h),placeholder:a.$t("请选择项目"),onChange:f},{default:n(()=>[(y(!0),R(J,null,K(e.value,(h,N)=>(y(),D(S,{value:h.idx,key:h.idx},{default:n(()=>[b(v(h==null?void 0:h.projectName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])])])]),l("div",vt,[l("div",yt,[t(M,{loading:_(s),class:"spin"},{default:n(()=>{var h,N,z;return[l("div",xt,[d[2]||(d[2]=l("span",null,"转正",-1)),l("span",null,v(((h=r.value)==null?void 0:h.regularization.Value).toFixed(2))+"%",1)]),l("div",bt,[d[3]||(d[3]=l("span",null,"离职",-1)),l("span",null,v(((N=r.value)==null?void 0:N.resignation.Value).toFixed(2))+"%",1)]),l("div",It,[d[4]||(d[4]=l("span",null,"试用期",-1)),l("span",null,v(((z=r.value)==null?void 0:z.probation.Value).toFixed(2))+"%",1)])]}),_:1},8,["loading"])])]),l("div",Dt,[t(V,{loading:_(s),"card-style":{background:_(i)?"linear-gradient(180deg, #312565 0%, #201936 100%)":"linear-gradient(180deg, #F7F7FF 0%, #ECECFF 100%)"},renderData:(B=r.value)==null?void 0:B.anchorGSV},null,8,["loading","card-style","renderData"])]),l("div",jt,[t(V,{loading:_(s),"card-style":{background:_(i)?"linear-gradient(180deg, #312565 0%, #201936 100%)":"linear-gradient(180deg, #F7F7FF 0%, #ECECFF 100%)"},renderData:(G=r.value)==null?void 0:G.advertisingROI},null,8,["loading","card-style","renderData"])]),l("div",Ft,[t(V,{loading:_(s),"card-style":{background:_(i)?"linear-gradient(180deg, #284991 0%, #122B62 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"},renderData:(k=r.value)==null?void 0:k.uv},null,8,["loading","card-style","renderData"])]),l("div",St,[t(V,{loading:_(s),"card-style":{background:_(i)?" linear-gradient(180deg, #3D492E 0%, #263827 100%)":"linear-gradient(180deg, #F5FEF2 0%, #E6FEEE 100%)"},renderData:(P=r.value)==null?void 0:P.conversionRate},null,8,["loading","card-style","renderData"])]),l("div",Vt,[t(V,{loading:_(s),"card-style":{background:_(i)?"linear-gradient(180deg, #294B94 0%, #0F275C 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"},renderData:(O=r.value)==null?void 0:O.refundRate},null,8,["loading","card-style","renderData"])])])]}),_:1})}}}),Ct=F($t,[["__scopeId","data-v-15d38453"]]),wt=j({__name:"content-table",setup(u){const s=L(),{loading:g,setLoading:m}=E(),i=x([]),r=()=>I(this,null,function*(){try{m(!0);const c=yield pt({projectId:s.projectId});if(c.code===200){let f=c.data;i.value=f.metric||[]}}catch(c){}finally{m(!1)}});return A(()=>s.projectId||s.projectId===0,()=>{r()},{deep:!0,immediate:!0}),(c,f)=>{const p=Z,e=tt,o=$,a=C;return y(),D(a,{loading:_(g),style:{width:"100%",height:"100%"}},{default:n(()=>[t(o,{class:"general-card"},{default:n(()=>[t(e,{size:"small",data:i.value,pagination:!1,bordered:!1,scroll:{x:"100%",y:"535px"}},{columns:n(()=>[t(p,{title:"主播","data-index":"anchor"}),t(p,{title:"排名","data-index":"prop2"},{cell:n(({rowIndex:d})=>[b(v(d+1),1)]),_:1}),t(p,{title:"综合得分",width:100,"data-index":"score"},{cell:n(({record:d})=>[b(v(d.score.toFixed(2)),1)]),_:1}),t(p,{title:"D+","data-index":"D+"},{cell:n(({record:d})=>[b(v(d["D+"].toFixed(2)),1)]),_:1}),t(p,{title:"D-","data-index":"D-"},{cell:n(({record:d})=>[b(v(d["D-"].toFixed(2)),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["loading"])}}}),Lt=F(wt,[["__scopeId","data-v-0d4d67cd"]]),Et=j({__name:"content-percentage-gsv",setup(u){const s=L(),g=e=>e.map(o=>`<div class="content-panel">
        <p>
          <span style="background-color: ${o.color}" class="tooltip-item-icon"></span>
          <span>${o.seriesName}</span>
        </p>
        <span class="tooltip-value">
        ${o.value}
        </span>
      </div>`).join(""),{loading:m,setLoading:i}=E(!0),r=x([]),c=x([]),{chartOption:f}=Y(e=>({grid:{left:"60",right:20,top:"20",bottom:"20"},xAxis:{type:"category",data:r.value,axisLine:{lineStyle:{color:e?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C"},splitLine:{lineStyle:{color:e?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(o){const[a]=o;return`<div>
            <p class="tooltip-title">${a.axisValueLabel}</p>
            ${g(o)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"GSV日趋势",showSymbol:!1,smooth:!0,data:c.value,stack:"one",type:"line",barWidth:"40%"}]})),p=()=>I(this,null,function*(){i(!0);try{const e=yield ut({projectId:s.projectId});if(e.code===200){let o=e.data;r.value=o.metric.map(a=>et(a.date).format("YYYY-MM-DD")),c.value=o.metric.map(a=>a.sumGsv.toFixed(2))}}catch(e){}finally{i(!1)}});return A(()=>s.projectId||s.projectId===0,()=>{p()},{deep:!0,immediate:!0}),(e,o)=>{const a=T("Chart"),d=$,S=C;return y(),D(S,{loading:_(m),style:{width:"100%"}},{default:n(()=>[t(d,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"20px"}},{title:n(()=>[b(v(e.$t("GSV日趋势")),1)]),default:n(()=>[t(a,{style:{width:"100%",height:"190px"},option:_(f)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}}),Nt=F(Et,[["__scopeId","data-v-8a1e4bb1"]]),At=j({__name:"content-anchor-daily-gsv",setup(u){const s=L(),g=e=>e.map(o=>`<div class="content-panel">
        <p>
          <span style="background-color: ${o.color}" class="tooltip-item-icon"></span>
          <span>${o.seriesName}</span>
        </p>
        <span class="tooltip-value">
        ${o.value}
        </span>
      </div>`).join(""),{loading:m,setLoading:i}=E(!0),r=x([]),c=x([]),{chartOption:f}=Y(e=>({grid:{left:"40",right:20,top:"20",bottom:"20"},xAxis:{type:"category",data:r.value,axisLine:{lineStyle:{color:e?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"},interval(o){return!(o===0||o===r.value.length-1)}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C"},splitLine:{lineStyle:{color:e?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(o){const[a]=o;return`<div>
            <p class="tooltip-title">${a.axisValueLabel}</p>
            ${g(o)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"GSV占比",type:"bar",barWidth:"40%",label:{normal:{show:!0,position:"top"}},data:c.value}]})),p=()=>I(this,null,function*(){i(!0);try{const e=yield _t({projectId:s.projectId});if(e.code===200){let o=e.data;r.value=o.metric.map(a=>a.anchor).slice(0,20),c.value=o.metric.map(a=>a.percentage.toFixed(2)).slice(0,20)}}catch(e){}finally{i(!1)}});return A(()=>s.projectId||s.projectId===0,()=>{p()},{deep:!0,immediate:!0}),(e,o)=>{const a=T("Chart"),d=$,S=C;return y(),D(S,{loading:_(m),style:{width:"100%"}},{default:n(()=>[t(d,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"20px"}},{title:n(()=>[b(v(e.$t("主播GSV")),1)]),default:n(()=>[t(a,{style:{width:"100%",height:"190px"},option:_(f)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}}),Tt=F(At,[["__scopeId","data-v-d3e69def"]]),Bt={class:"container"},Gt={class:"space-unit"},kt=j({__name:"index",setup(u){return(s,g)=>{const m=T("Breadcrumb"),i=at,r=ot,c=nt;return y(),R("div",Bt,[t(m,{items:["数据分析","短视频素材分析"]}),t(c,{direction:"vertical",size:12,fill:""},{default:n(()=>[t(c,{direction:"vertical",size:16,fill:""},{default:n(()=>[l("div",Gt,[t(Ct)]),l("div",null,[t(r,{cols:24,"col-gap":16,"row-gap":16},{default:n(()=>[t(i,{span:{xxl:7}},{default:n(()=>[t(Lt)]),_:1}),t(i,{span:{xxl:17}},{default:n(()=>[t(r,{cols:24,"col-gap":16,"row-gap":16},{default:n(()=>[t(i,{span:{xxl:24}},{default:n(()=>[t(Nt)]),_:1}),t(i,{span:{xxl:24}},{default:n(()=>[t(Tt)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})])}}}),Jt=F(kt,[["__scopeId","data-v-867c1464"]]);export{Jt as default};
