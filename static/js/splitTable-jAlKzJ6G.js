/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{_ as he}from"./DefaultTableEdit.vue_vue_type_script_setup_true_lang-Dj1DE930.js";import ye from"./index-NvKjO-35.js";import{_ as ve}from"./index.vue_vue_type_script_setup_true_lang-CAvY8Qbf.js";import{_ as we}from"./index-Qf4Lmxow.js";import{_ as Ce}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-CdA2oT4X.js";import{_ as Ve}from"./VabQueryFormTopPanel-Hok6JHOx.js";import{_ as ke}from"./index-DK68u2cP.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-DPKRueiC.js";import{d as Ee,r as c,f as Re,w as Te,O as De,a5 as xe,Q as qe,a as E,o as v,Y as e,S as a,T as w,ap as $e,aC as Me,u as o,aq as Ne,aM as ze,ae as R,bp as Ue,at as Fe,au as Be,a7 as Ye,aS as Le,a6 as d,n as Ae,bq as He,br as Ie,R as Pe,aR as Oe,aP as je,X as T,bs as Je,an as Qe,aH as Xe,aJ as Ge,V as Ke,i as We,bv as Ze}from"./vsv-element-plus-CcCXTk6v.js";import{g as et,d as U}from"./table-Dg-ws0Iu.js";import{b as tt,w as at,s as lt,x as nt,$ as F,f as g,y as ot,z as st,_ as it}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const dt={class:"split-table-container no-background-container auto-height-container"},rt={key:0},ut={key:1},ct=Ee({name:"SplitTable",__name:"splitTable",setup(pt){const D=tt(),B=at(),{getAllRoutes:Y}=lt(B),L=nt(),{changeTabsMeta:A,addVisitedRoute:H}=L,C=c(null),x=c(),_=c(!0),q=c([]),h=c(!0),$=c(0),p=c([]),s=Re({pageNo:1,pageSize:20}),y=c(""),M=c();Te(y,l=>{var t;(t=M.value)==null||t.filter(l)});const I=(l,t)=>l?t.label.includes(l):!0,P=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],O=()=>{m()},j={children:"children",label:"label"},m=async()=>{h.value=!0;const{data:l}=await et(s);q.value=l.list,$.value=l.total,h.value=!1},J=l=>{s.pageNo=1,s.pageSize=l,m()},Q=l=>{s.pageNo=l,m()},X=()=>{s.pageNo=1,m()},G=l=>({published:"success",draft:"primary",deleted:"danger"})[l],K=()=>{_.value=!_.value},W=l=>{p.value=l},Z=()=>{C.value.showEdit()},ee=(l={})=>{C.value.showEdit(l)},N=l=>{if(l.id)F("您确定要删除当前项吗",null,async()=>{const{msg:t}=await U({ids:l.id});g(t,"success","hey"),await m()});else if(p.value.length>0){const t=p.value.map(r=>r.id).join(",");F("您确定要删除选中项吗",null,async()=>{const{msg:r}=await U({ids:t});g(r,"success","hey"),await m()})}else g("您未选中任何行","warning","hey")},te=async()=>{if(p.value.length>0)for(let l=0;l<p.value.length;l++){const t=ot(Y.value,"/vab/table/defaultTableDetail"),r=st({...t.at(-1),query:p.value[l]});r&&(await H(r),await A({title:"详情页",meta:{title:`${r.query.title} 详情页`}}))}else g("请至少选择一行进行详情页跳转","warning","hey")},z=l=>{l.id?D.push({path:"/vab/table/defaultTableDetail",query:{...l,timestamp:Date.now()}}):p.value.length===1?D.push({path:"/vab/table/defaultTableDetail",query:{...p.value[0],timestamp:Date.now()}}):g("请选择一行进行详情页跳转","warning","hey")};return De(()=>{var l;(l=x.value)==null||l.doLayout()}),xe(()=>{m()}),(l,t)=>{const r=Se,V=ke,k=ze,b=Ne,ae=Ue,S=Be,le=Fe,u=Ye,ne=qe("vab-icon"),oe=$e,se=Ve,ie=Ce,de=we,i=je,re=Je,ue=Qe,ce=Xe,pe=Ge,me=Oe,_e=ve,fe=ye,be=he,ge=Ke;return v(),E("div",dt,[e(V,{class:"auto-height-card hidden-sm-and-up"},{default:a(()=>[e(r,{title:"手机端不支持分割表格演示",type:"warning"})]),_:1}),e(fe,{class:"hidden-xs-only",ratio:"4/20"},{one:a(()=>[e(V,{class:"auto-height-card"},{default:a(()=>[e(k,{modelValue:o(y),"onUpdate:modelValue":t[0]||(t[0]=n=>We(y)?y.value=n:null),placeholder:"请输入查询条件",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),e(o(Ze),{ref_key:"treeRef",ref:M,data:P,"default-expand-all":"","filter-node-method":I,props:j,onNodeClick:O},null,512)]),_:1})]),two:a(()=>[e(V,{class:"auto-height-card"},{default:a(()=>[e(r,{title:"长按竖线左右拖拽可重新分割面板大小"}),e(de,null,{default:a(()=>[e(se,null,{default:a(()=>[e(oe,{inline:"",model:o(s),onSubmit:t[5]||(t[5]=Me(()=>{},["prevent"]))},{default:a(()=>[e(b,{label:"标题"},{default:a(()=>[e(k,{modelValue:o(s).title,"onUpdate:modelValue":t[1]||(t[1]=n=>o(s).title=n),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),w(e(b,{label:"作者"},{default:a(()=>[e(k,{modelValue:o(s).author,"onUpdate:modelValue":t[2]||(t[2]=n=>o(s).author=n),clearable:"",placeholder:"请输入作者"},null,8,["modelValue"])]),_:1},512),[[R,!o(_)]]),w(e(b,{label:"时间"},{default:a(()=>[e(ae,{modelValue:o(s).datetime,"onUpdate:modelValue":t[3]||(t[3]=n=>o(s).datetime=n),format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择时间",type:"datetime"},null,8,["modelValue"])]),_:1},512),[[R,!o(_)]]),w(e(b,{label:"状态"},{default:a(()=>[e(le,{modelValue:o(s).status,"onUpdate:modelValue":t[4]||(t[4]=n=>o(s).status=n),placeholder:"请选择状态"},{default:a(()=>[e(S,{label:"success",value:"published"}),e(S,{label:"primary",value:"draft"}),e(S,{label:"danger",value:"deleted"})]),_:1},8,["modelValue"])]),_:1},512),[[R,!o(_)]]),e(b,null,{default:a(()=>[e(u,{icon:o(Le),loading:o(h),"native-type":"submit",type:"primary",onClick:X},{default:a(()=>t[6]||(t[6]=[d("查询")])),_:1},8,["icon","loading"]),e(u,{class:"hidden-xs-only",text:"",type:"primary",onClick:K},{default:a(()=>[o(_)?(v(),E("span",rt,"展开")):(v(),E("span",ut,"合并")),e(ne,{class:Ae(["vab-dropdown",{"vab-dropdown-active":o(_)}]),icon:"arrow-up-s-line"},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(ie,{span:24},{default:a(()=>[e(u,{icon:o(He),type:"primary",onClick:Z},{default:a(()=>t[7]||(t[7]=[d("添加")])),_:1},8,["icon"]),e(u,{icon:o(Ie),type:"danger",onClick:N},{default:a(()=>t[8]||(t[8]=[d("删除")])),_:1},8,["icon"]),e(u,{type:"primary",onClick:z},{default:a(()=>t[9]||(t[9]=[d("详情")])),_:1}),e(u,{class:"hidden-xs-only",type:"primary",onClick:te},{default:a(()=>t[10]||(t[10]=[d("后台打开详情")])),_:1})]),_:1})]),_:1}),w((v(),Pe(me,{ref_key:"tableRef",ref:x,border:"",data:o(q),onSelectionChange:W},{empty:a(()=>[e(pe,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:a(({$index:n})=>[d(T(n+1),1)]),_:1}),e(i,{align:"center",label:"序号",width:"55"},{default:a(({$index:n})=>[d(T(n+1),1)]),_:1}),e(i,{align:"center",label:"标题","min-width":"200",prop:"title"}),e(i,{align:"center",label:"作者",prop:"author"}),e(i,{align:"center",label:"评级","min-width":"200"},{default:a(({row:n})=>[e(re,{modelValue:n.rate,"onUpdate:modelValue":f=>n.rate=f,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{align:"center",label:"数量","min-width":"100",prop:"count",sortable:""}),e(i,{align:"center",label:"开关",prop:"switch"},{default:a(({row:n})=>[e(ue,{modelValue:n.switch,"onUpdate:modelValue":f=>n.switch=f},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{align:"center",label:"状态","min-width":"100"},{default:a(({row:n})=>[e(ce,{effect:"dark",type:G(n.status)},{default:a(()=>[d(T(n.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(i,{align:"center",label:"操作",width:"215"},{default:a(({row:n})=>[e(u,{text:"",type:"primary",onClick:f=>z(n)},{default:a(()=>t[11]||(t[11]=[d("详情")])),_:2},1032,["onClick"]),e(u,{text:"",type:"primary",onClick:f=>ee(n)},{default:a(()=>t[12]||(t[12]=[d("编辑")])),_:2},1032,["onClick"]),e(u,{text:"",type:"danger",onClick:f=>N(n)},{default:a(()=>t[13]||(t[13]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ge,o(h)]]),e(_e,{"current-page":o(s).pageNo,"page-size":o(s).pageSize,total:o($),onCurrentChange:Q,onSizeChange:J},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(be,{ref_key:"editRef",ref:C,onFetchData:m},null,512)])}}}),Et=it(ct,[["__scopeId","data-v-c0ae2183"]]);export{Et as default};
