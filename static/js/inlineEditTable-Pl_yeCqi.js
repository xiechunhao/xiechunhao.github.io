/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-11 00:13:46 
 */
import{d as B,a as y,J as n,P as L,U as a,A as i,W as M,u as d,z as s,X as F,a9 as I,Z as c,Y as b,R as h,o as r}from"./vsv-element-plus-CWjYVfvE.js";import{g as J}from"./table-Dli4mkUp.js";import"./index-D_keMk_X.js";import"./vsv-icon-CzoHxvAi.js";import"./vsv-nprogress-D-M_H-zP.js";const P={class:"inline-edit-table-container auto-height-container"},R=["onClick"],W=["onClick"],K=B({name:"InlineEditTable",__name:"inlineEditTable",setup(X){const v=ref([]),m=ref(!0),k=ref(0),o=reactive({pageNo:1,pageSize:20,title:""}),_=async()=>{m.value=!0;const{data:t}=await J(o);v.value=t.list.map(l=>(l.edit=!1,l.originalTitle=l.title,l.originalAuthor=l.author,l)),k.value=t.total,m.value=!1},V=t=>{o.pageNo=1,o.pageSize=t,_()},z=t=>{o.pageNo=t,_()},N=()=>{o.pageNo=1,_()},x=t=>{t.title=t.originalTitle,t.author=t.originalAuthor,t.edit=!1},S=t=>{t.edit=!1,t.originalTitle=t.title,t.originalAuthor=t.author};return onBeforeMount(()=>{_()}),(t,l)=>{const g=i("el-input"),C=i("el-form-item"),f=i("el-button"),q=i("el-form"),T=i("vab-query-form-right-panel"),U=i("vab-query-form"),p=i("el-table-column"),D=i("el-empty"),E=i("el-table"),$=i("vab-pagination"),A=M("loading");return r(),y("div",P,[n(U,null,{default:a(()=>[n(T,{span:24},{default:a(()=>[n(q,{inline:"",model:d(o),onSubmit:l[1]||(l[1]=F(()=>{},["prevent"]))},{default:a(()=>[n(C,null,{default:a(()=>[n(g,{modelValue:d(o).title,"onUpdate:modelValue":l[0]||(l[0]=e=>d(o).title=e),clearable:"",placeholder:"标题"},null,8,["modelValue"])]),_:1}),n(C,null,{default:a(()=>[n(f,{icon:d(I),loading:d(m),"native-type":"submit",type:"primary",onClick:N},{default:a(()=>l[2]||(l[2]=[c("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),L((r(),s(E,{border:"",data:d(v)},{empty:a(()=>[n(D,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[n(p,{type:"selection",width:"38"}),n(p,{align:"center",label:"序号",width:"55"},{default:a(({$index:e})=>[c(b(e+1),1)]),_:1}),n(p,{align:"center",label:"标题","min-width":"240"},{default:a(({row:e})=>[e.edit?(r(),s(g,{key:0,modelValue:e.title,"onUpdate:modelValue":u=>e.title=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.title),9,R))]),_:1}),n(p,{align:"center",label:"作者","min-width":"140",prop:"author"},{default:a(({row:e})=>[e.edit?(r(),s(g,{key:0,modelValue:e.author,"onUpdate:modelValue":u=>e.author=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.author),9,W))]),_:1}),n(p,{align:"center",label:"操作",width:"150"},{default:a(({row:e})=>[e.edit?h("",!0):(r(),s(f,{key:0,text:"",type:"primary",onClick:u=>e.edit=!e.edit},{default:a(()=>l[3]||(l[3]=[c("编辑")])),_:2},1032,["onClick"])),e.edit?(r(),s(f,{key:1,text:"",type:"primary",onClick:u=>S(e)},{default:a(()=>l[4]||(l[4]=[c("保存")])),_:2},1032,["onClick"])):h("",!0),e.edit?(r(),s(f,{key:2,text:"",type:"danger",onClick:u=>x(e)},{default:a(()=>l[5]||(l[5]=[c("取消")])),_:2},1032,["onClick"])):h("",!0)]),_:1})]),_:1},8,["data"])),[[A,d(m)]]),n($,{"current-page":d(o).pageNo,"page-size":d(o).pageSize,total:d(k),onCurrentChange:z,onSizeChange:V},null,8,["current-page","page-size","total"])])}}});export{K as default};
