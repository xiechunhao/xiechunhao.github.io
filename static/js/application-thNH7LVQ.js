/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-11 00:20:55 
 */
import{c as m}from"./index-CuM47huV.js";import{d as u,a as f,z as i,J as h,u as e,U as _,A as r,Z as b,o as a}from"./vsv-element-plus-CWjYVfvE.js";import"./vsv-icon-CzoHxvAi.js";import"./vsv-nprogress-D-M_H-zP.js";const v={class:"application-container"},S=u({name:"Application",__name:"application",setup(C){const c=globalThis.location.protocol==="https:",o=ref(!0),n=ref("点击安装前需手动按下键盘Ctrl（Command） + Shift + R 强制刷新当前页面，如果无法安装，PC端请点击浏览器地址栏右侧安装按钮进行安装，手机端请点击添加到主屏幕进行安装，仅支持Edge、Chrome、Safari"),d=()=>!!(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.navigator.standalone||document.referrer.includes("android-app://"));return onMounted(()=>{d()&&(n.value="已在PWA桌面应用打开"),globalThis.addEventListener("beforeinstallprompt",t=>{o.value=!1,document.querySelector("#installRef").addEventListener("click",()=>{t?(t.prompt(),t.userChoice.then(()=>{location.reload(!0)})):$baseAlert("未获取到安装指令，请按下键盘Ctrl（Command） + Shift + R 强制刷新当前页面后重试，如果无法安装，PC端请点击浏览器地址栏右侧安装按钮进行安装，手机端请点击添加到主屏幕进行安装，仅支持Edge、Chrome、Safari",()=>{location.reload(!0)})})})}),(t,l)=>{const s=r("vab-alert"),p=r("el-button");return a(),f("div",v,[!e(!1)&&c||e(!1)&&e(m)?(a(),i(s,{key:0,title:e(n)},null,8,["title"])):(a(),i(s,{key:1,title:"开发环境或非https协议下暂不支持安装PWA应用",type:"warning"})),h(p,{id:"installRef",disabled:e(o),type:"primary"},{default:_(()=>l[0]||(l[0]=[b("点击安装")])),_:1},8,["disabled"])])}}});export{S as default};
