/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:39:13 
 */
import{d as A,N as i,a2 as M,o as r,b as y,T as n,$ as l,u as d,a5 as L,ag as F,a4 as c,Y as I,M as s,a3 as b,_ as h}from"./vsv-element-plus-CxGOTlXz.js";import{g as Y}from"./table-DhyfOoHm.js";import"./index-BKznZfTt.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const j={class:"inline-edit-table-container auto-height-container"},G=["onClick"],H=["onClick"],W=A({name:"InlineEditTable",__name:"inlineEditTable",setup(J){const v=ref([]),m=ref(!0),k=ref(0),o=reactive({pageNo:1,pageSize:20,title:""}),_=async()=>{m.value=!0;const{data:t}=await Y(o);v.value=t.list.map(a=>(a.edit=!1,a.originalTitle=a.title,a.originalAuthor=a.author,a)),k.value=t.total,m.value=!1},V=t=>{o.pageNo=1,o.pageSize=t,_()},N=t=>{o.pageNo=t,_()},x=()=>{o.pageNo=1,_()},z=t=>{t.title=t.originalTitle,t.author=t.originalAuthor,t.edit=!1},S=t=>{t.edit=!1,t.originalTitle=t.title,t.originalAuthor=t.author};return onBeforeMount(()=>{_()}),(t,a)=>{const f=i("el-input"),C=i("el-form-item"),g=i("el-button"),T=i("el-form"),q=i("vab-query-form-right-panel"),$=i("vab-query-form"),p=i("el-table-column"),D=i("el-empty"),E=i("el-table"),U=i("vab-pagination"),B=M("loading");return r(),y("div",j,[n($,null,{default:l(()=>[n(q,{span:24},{default:l(()=>[n(T,{inline:"",model:d(o),onSubmit:a[1]||(a[1]=L(()=>{},["prevent"]))},{default:l(()=>[n(C,null,{default:l(()=>[n(f,{modelValue:d(o).title,"onUpdate:modelValue":a[0]||(a[0]=e=>d(o).title=e),clearable:"",placeholder:"标题"},null,8,["modelValue"])]),_:1}),n(C,null,{default:l(()=>[n(g,{icon:d(F),loading:d(m),"native-type":"submit",type:"primary",onClick:x},{default:l(()=>a[2]||(a[2]=[c("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),I((r(),s(E,{border:"",data:d(v)},{empty:l(()=>[n(D,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[n(p,{type:"selection",width:"38"}),n(p,{align:"center",label:"序号",width:"55"},{default:l(({$index:e})=>[c(b(e+1),1)]),_:1}),n(p,{align:"center",label:"标题","min-width":"240"},{default:l(({row:e})=>[e.edit?(r(),s(f,{key:0,modelValue:e.title,"onUpdate:modelValue":u=>e.title=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.title),9,G))]),_:1}),n(p,{align:"center",label:"作者","min-width":"140",prop:"author"},{default:l(({row:e})=>[e.edit?(r(),s(f,{key:0,modelValue:e.author,"onUpdate:modelValue":u=>e.author=u,clearable:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(r(),y("span",{key:1,onClick:u=>e.edit=!e.edit},b(e.author),9,H))]),_:1}),n(p,{align:"center",label:"操作",width:"150"},{default:l(({row:e})=>[e.edit?h("",!0):(r(),s(g,{key:0,text:"",type:"primary",onClick:u=>e.edit=!e.edit},{default:l(()=>a[3]||(a[3]=[c("编辑")])),_:2},1032,["onClick"])),e.edit?(r(),s(g,{key:1,text:"",type:"primary",onClick:u=>S(e)},{default:l(()=>a[4]||(a[4]=[c("保存")])),_:2},1032,["onClick"])):h("",!0),e.edit?(r(),s(g,{key:2,text:"",type:"danger",onClick:u=>z(e)},{default:l(()=>a[5]||(a[5]=[c("取消")])),_:2},1032,["onClick"])):h("",!0)]),_:1})]),_:1},8,["data"])),[[B,d(m)]]),n(U,{"current-page":d(o).pageNo,"page-size":d(o).pageSize,total:d(k),onCurrentChange:N,onSizeChange:V},null,8,["current-page","page-size","total"])])}}});export{W as default};
