/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-10-15 13:32:11 
 */
import{_ as Ue}from"./DefaultTableEdit.vue_vue_type_script_setup_true_lang-BdZ96FDT.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-BwKkUDxi.js";import{_ as ze}from"./index-DzQ5upS1.js";import{_ as Fe}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BfuTFmT5.js";import{_ as We}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-sfirE_Gx.js";import{_ as Ne}from"./VabQueryFormTopPanel-D9lrPxps.js";import{d as Be,r as i,p as Me,a as Le,w as Ae,Q as Ie,a7 as Ye,$ as He,o as r,b,W as e,T as a,u as o,aA as Pe,Z as U,ae as B,aS as je,a8 as d,n as J,bp as Ge,bq as Oe,e as Je,h as g,a3 as Q,aj as Z,S as $,a1 as M,Y as Qe,aO as Ze,aq as Ke,bs as Xe,ar as el,as as ll,a9 as al,au as tl,bm as ol,ao as nl,ap as sl,aI as ul,bx as il,aP as dl,bt as rl,bd as cl,aJ as pl,aR as ml,a0 as _l}from"./vsv-element-plus-OoOmiKKG.js";import{l as fl}from"./vue-draggable-plus-h6kL3pvY.js";import{g as bl,d as K}from"./table-DkfdCQ4l.js";import{a as vl,w as gl,s as hl,x as yl,A as kl,$ as X,f as C,y as Vl,z as Cl,_ as xl}from"./index-B-0YFqa2.js";import"./vsv-icon-Beiog8Do.js";import"./vsv-nprogress-CNnfF26O.js";const wl={key:0},El={key:1},Sl={class:"custom-table-right-tools"},Dl={key:0},Rl={key:2},Tl=Be({name:"CustomTable",__name:"customTable",setup(ql){const L=vl(),ee=gl(),{getAllRoutes:le}=hl(ee),ae=yl(),{changeTabsMeta:te,addVisitedRoute:oe}=ae,A=i(),m=i(!0),z=i(null),x=i(!0),w=i(!1),E=i("default"),_=i(!1),I=i([]),S=i(!0),Y=i(0),p=i([]),v=i([{label:"id",prop:"id",sortable:!0,checked:!0,minWidth:200},{label:"标题",prop:"title",sortable:!0,disableCheck:!0,checked:!0,minWidth:200},{label:"图片",prop:"title",checked:!0,minWidth:100},{label:"作者",prop:"author",sortable:!0,checked:!0,minWidth:100},{label:"评级",prop:"rate",sortable:!0,checked:!0,minWidth:200},{label:"数量",prop:"count",sortable:!0,checked:!0,minWidth:100},{label:"时间",prop:"datetime",sortable:!0,checked:!0,minWidth:160},{label:"描述",prop:"description",sortable:!0,checked:!0,minWidth:400}]),h=i([]),s=Me({pageNo:1,pageSize:20,title:""}),D=i("right"),{exit:ne,enter:se,isFullscreen:H}=kl(),ue=Le(()=>v.value.filter(n=>h.value.includes(n.label))),f=async()=>{S.value=!0;const{data:n}=await bl(s);I.value=n.list,Y.value=n.total,S.value=!1},ie=n=>{s.pageNo=1,s.pageSize=n,f()},de=n=>{s.pageNo=n,f()},P=()=>{s.pageNo=1,f()},re=()=>{_.value=!_.value,_.value?se():ne()},ce=n=>{p.value=n},pe=()=>{m.value=!m.value},me=()=>{z.value.showEdit()},_e=n=>{z.value.showEdit(n)},j=n=>{if(n.id)X("您确定要删除当前项吗",null,async()=>{const{msg:l}=await K({ids:n.id});C(l,"success","vab-hey-message-success"),await f()});else if(p.value.length>0){const l=p.value.map(c=>c.id).join(",");X("您确定要删除选中项吗",null,async()=>{const{msg:c}=await K({ids:l});C(c,"success","vab-hey-message-success"),await f()})}else C("您未选中任何行","warning","hey")},fe=async()=>{if(p.value.length>0)for(let n=0;n<p.value.length;n++){const l=Vl(le.value,"/vab/table/defaultTableDetail"),c=Cl({...l.at(-1),query:p.value[n]});c&&(await oe(c),await te({title:"详情页",meta:{title:`${c.query.title} 详情页`}}))}else C("请至少选择一行进行详情页跳转","warning","hey")},G=n=>{n.id?L.push({path:"/vab/table/defaultTableDetail",query:{...n,timestamp:Date.now()}}):p.value.length===1?L.push({path:"/vab/table/defaultTableDetail",query:{...p.value[0],timestamp:Date.now()}}):C("请选择一行进行详情页跳转","warning","hey")};return Ae(H,()=>{H.value?_.value=!0:_.value=!1},{immediate:!0}),Ie(()=>{var n;(n=A.value)==null||n.doLayout()}),Ye(()=>{v.value.forEach(n=>{n.checked&&h.value.push(n.label)}),f()}),(n,l)=>{const c=Ze,y=Ke,be=Xe,F=el,ve=ll,u=al,k=He("vab-icon"),ge=tl,he=Ne,ye=We,R=ol,W=nl,ke=sl,N=ul,Ve=il,Ce=Fe,xe=ze,T=dl,we=rl,O=cl,Ee=pl,Se=ml,De=$e,Re=Ue,Te=_l;return r(),b("div",{class:J(["custom-table-container auto-height-container",{"fullscreen-container":o(_)}])},[e(xe,null,{default:a(()=>[e(he,null,{default:a(()=>[e(ge,{inline:"",model:o(s),onSubmit:l[4]||(l[4]=Pe(()=>{},["prevent"]))},{default:a(()=>[e(y,{label:"标题"},{default:a(()=>[e(c,{modelValue:o(s).title,"onUpdate:modelValue":l[0]||(l[0]=t=>o(s).title=t),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),U(e(y,{label:"作者"},{default:a(()=>[e(c,{modelValue:o(s).author,"onUpdate:modelValue":l[1]||(l[1]=t=>o(s).author=t),clearable:"",placeholder:"请输入作者"},null,8,["modelValue"])]),_:1},512),[[B,!o(m)]]),U(e(y,{label:"时间"},{default:a(()=>[e(be,{modelValue:o(s).datetime,"onUpdate:modelValue":l[2]||(l[2]=t=>o(s).datetime=t),format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择时间",type:"datetime"},null,8,["modelValue"])]),_:1},512),[[B,!o(m)]]),U(e(y,{label:"状态"},{default:a(()=>[e(ve,{modelValue:o(s).status,"onUpdate:modelValue":l[3]||(l[3]=t=>o(s).status=t),placeholder:"请选择状态"},{default:a(()=>[e(F,{label:"success",value:"published"}),e(F,{label:"primary",value:"draft"}),e(F,{label:"danger",value:"deleted"})]),_:1},8,["modelValue"])]),_:1},512),[[B,!o(m)]]),e(y,null,{default:a(()=>[e(u,{icon:o(je),loading:o(S),"native-type":"submit",type:"primary",onClick:P},{default:a(()=>l[11]||(l[11]=[d("查询")])),_:1},8,["icon","loading"]),e(u,{class:"hidden-xs-only",text:"",type:"primary",onClick:pe},{default:a(()=>[o(m)?(r(),b("span",wl,"展开")):(r(),b("span",El,"合并")),e(k,{class:J(["vab-dropdown",{"vab-dropdown-active":o(m)}]),icon:"arrow-up-s-line"},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(ye,null,{default:a(()=>[e(u,{icon:o(Ge),type:"primary",onClick:me},{default:a(()=>l[12]||(l[12]=[d("添加")])),_:1},8,["icon"]),e(u,{icon:o(Oe),type:"danger",onClick:j},{default:a(()=>l[13]||(l[13]=[d("删除")])),_:1},8,["icon"]),e(u,{type:"primary",onClick:G},{default:a(()=>l[14]||(l[14]=[d("详情")])),_:1}),e(u,{class:"hidden-xs-only",type:"primary",onClick:fe},{default:a(()=>l[15]||(l[15]=[d("后台打开详情")])),_:1})]),_:1}),e(Ce,null,{default:a(()=>[Je("div",Sl,[e(u,{class:"hidden-xs-only"},{default:a(()=>[e(R,{modelValue:o(w),"onUpdate:modelValue":l[5]||(l[5]=t=>g(w)?w.value=t:null),label:"斑马纹"},null,8,["modelValue"])]),_:1}),e(u,{class:"hidden-xs-only"},{default:a(()=>[e(R,{modelValue:o(x),"onUpdate:modelValue":l[6]||(l[6]=t=>g(x)?x.value=t:null),label:"边框"},null,8,["modelValue"])]),_:1}),e(u,{onClick:P},{default:a(()=>[e(k,{icon:"refresh-line"})]),_:1}),e(u,{onClick:re},{default:a(()=>[e(k,{icon:o(_)?"fullscreen-exit-fill":"fullscreen-fill"},null,8,["icon"])]),_:1}),e(N,{width:165},{reference:a(()=>[e(u,null,{default:a(()=>[e(k,{icon:"line-height"})]),_:1})]),default:a(()=>[e(ke,{modelValue:o(E),"onUpdate:modelValue":l[7]||(l[7]=t=>g(E)?E.value=t:null)},{default:a(()=>[e(W,{label:"large",value:"large"},{default:a(()=>l[16]||(l[16]=[d("大")])),_:1}),e(W,{label:"default",value:"default"},{default:a(()=>l[17]||(l[17]=[d("中")])),_:1}),e(W,{label:"small",value:"small"},{default:a(()=>l[18]||(l[18]=[d("小")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(N,{"popper-class":"custom-table-checkbox"},{reference:a(()=>[e(u,null,{default:a(()=>[e(k,{icon:"settings-line"})]),_:1})]),default:a(()=>[e(o(fl),{modelValue:o(v),"onUpdate:modelValue":l[9]||(l[9]=t=>g(v)?v.value=t:null),animation:600,target:".el-checkbox-group"},{default:a(()=>[e(Ve,{modelValue:o(h),"onUpdate:modelValue":l[8]||(l[8]=t=>g(h)?h.value=t:null)},{default:a(()=>[(r(!0),b(Q,null,Z(o(v),t=>(r(),$(R,{key:t.label,disabled:t.disableCheck,label:t.label,value:t.label},{default:a(()=>[d(M(t.label),1)]),_:2},1032,["disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1}),U((r(),$(Se,{ref_key:"tableRef",ref:A,border:o(x),data:o(I),size:o(E),stripe:o(w),onSelectionChange:ce},{empty:a(()=>[e(Ee,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(T,{type:"selection",width:"38"}),e(T,{align:"center",label:"序号",width:"55"},{default:a(({$index:t})=>[d(M(t+1),1)]),_:1}),(r(!0),b(Q,null,Z(o(ue),(t,q)=>(r(),$(T,{key:q,align:"center",fixed:t.fixed,label:t.label,"min-width":t.minWidth||100,prop:t.prop,"show-overflow-tooltip":"",sortable:t.sortable},{default:a(({row:V})=>[t.label==="评级"?(r(),b("span",Dl,[e(we,{modelValue:V.rate,"onUpdate:modelValue":qe=>V.rate=qe,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])):Qe("",!0),t.label==="图片"?(r(),$(N,{key:1,placement:"top-start"},{reference:a(()=>[e(O,{src:V.image},null,8,["src"])]),default:a(()=>[e(O,{src:V.image},null,8,["src"])]),_:2},1024)):(r(),b("span",Rl,M(V[t.prop]),1))]),_:2},1032,["fixed","label","min-width","prop","sortable"]))),128)),e(T,{align:"center",fixed:o(D),label:"操作",width:"215"},{header:a(()=>[e(R,{modelValue:o(D),"onUpdate:modelValue":l[10]||(l[10]=t=>g(D)?D.value=t:null),label:"固定操作列","true-value":"right"},null,8,["modelValue"])]),default:a(({row:t})=>[e(u,{text:"",type:"primary",onClick:q=>G(t)},{default:a(()=>l[19]||(l[19]=[d("详情")])),_:2},1032,["onClick"]),e(u,{text:"",type:"primary",onClick:q=>_e(t)},{default:a(()=>l[20]||(l[20]=[d("编辑")])),_:2},1032,["onClick"]),e(u,{text:"",type:"danger",onClick:q=>j(t)},{default:a(()=>l[21]||(l[21]=[d("删除")])),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["border","data","size","stripe"])),[[Te,o(S)]]),e(De,{"current-page":o(s).pageNo,"page-size":o(s).pageSize,total:o(Y),onCurrentChange:de,onSizeChange:ie},null,8,["current-page","page-size","total"]),e(Re,{ref_key:"editRef",ref:z,onFetchData:f},null,512)],2)}}}),Hl=xl(Tl,[["__scopeId","data-v-cdfa0919"]]);export{Hl as default};
