/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-11-12 16:06:55 
 */
import{g as M,a as C}from"./departmentManagement-CwfjhE3q.js";import{d as D,N as s,o as U,M as q,$ as n,T as o,a4 as B,u as a,k as N}from"./vsv-element-plus-Brnt1GMz.js";import{_ as R}from"./index-D0bnGtHt.js";import"./vsv-icon-CX0cXpax.js";import"./vsv-nprogress-Cnw-SRAI.js";const T=D({name:"DepartmentManagementEdit",__name:"DepartmentManagementEdit",emits:["fetch-data"],setup(F,{expose:b,emit:V}){const g=V,u=ref(),f=ref([]),l=reactive({parentValue:""}),v=reactive({parentValue:[{required:!0,trigger:"blur",message:"请选择父节点"}],label:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]}),m=ref(""),d=ref(!1),x=async()=>{const{data:t}=await M();f.value=t.list};b({showEdit:t=>{d.value=!0,nextTick(()=>{t?(delete t.value,m.value="编辑",Object.assign(l,t)):m.value="添加"})}});const c=()=>{var t,e;(t=u.value)==null||t.clearValidate(),(e=u.value)==null||e.resetFields(),g("fetch-data")},w=()=>{var t;(t=u.value)==null||t.validate(async e=>{if(e){const{msg:i}=await C(l);await $baseMessage(i,"success","hey"),await c(),d.value=!1}})};return onBeforeMount(()=>{x()}),(t,e)=>{const i=s("el-tree-select"),p=s("el-form-item"),_=s("el-input"),y=s("el-form"),k=s("el-button"),E=s("vab-dialog");return U(),q(E,{modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=r=>N(d)?d.value=r:null),"append-to-body":"",title:a(m),width:"500px",onClose:c},{footer:n(()=>[o(k,{type:"primary",onClick:w},{default:n(()=>e[4]||(e[4]=[B("保存")])),_:1})]),default:n(()=>[o(y,{ref_key:"formRef",ref:u,"label-width":"80px",model:a(l),rules:a(v)},{default:n(()=>[o(p,{label:"父节点",prop:"parentValue"},{default:n(()=>[o(i,{modelValue:a(l).parentValue,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).parentValue=r),data:a(f)},null,8,["modelValue","data"])]),_:1}),o(p,{label:"名称",prop:"label"},{default:n(()=>[o(_,{modelValue:a(l).label,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).label=r),clearable:""},null,8,["modelValue"])]),_:1}),o(p,{label:"排序",prop:"order"},{default:n(()=>[o(_,{modelValue:a(l).order,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).order=r),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),z=R(T,[["__scopeId","data-v-70c178fd"]]);export{z as default};
