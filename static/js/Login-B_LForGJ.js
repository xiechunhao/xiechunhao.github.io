/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import $ from"./LoginContainer-BjCbH5aT.js";import{d as z,r as i,f as U,a5 as A,E as H,R as x,S as r,Q as q,aL as B,o as m,b as d,Y as o,u as e,ap as J,aC as K,T as b,X as u,aq as O,aM as W,a7 as Z,a6 as V,a as ee}from"./vsv-element-plus-CcCXTk6v.js";import{u as oe,a as te,s as se,o as re,t as l,i as ae,b as le,c as ne,_ as ie}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const ce=""+new URL("../png/left_img_1-Dp36PNG8.png",import.meta.url).href,de={class:"login-form"},ue=["src"],pe={class:"title-tips"},fe=["src"],me={class:"login-other hidden-xs-only"},_e=z({name:"Login",__name:"Login",setup(ve){const R=ne(),L=le(),T=oe(),M=te(),{title:D}=se(M),I=n=>T.login(n),p=i(!1),N=i("password"),f=i(void 0);let _;const C=i("https://www.oschina.net/action/user/captcha"),k=i(""),v=i(),P=i(),a=U({username:"",password:"",verificationCode:""}),F=U({username:[{required:!0,trigger:"blur",validator:(n,s,t)=>{s===""?t(new Error(l("用户名不能为空"))):t()}}],password:[{required:!0,trigger:"blur",validator:(n,s,t)=>{ae(s)?t():t(new Error(l("密码不能少于6位")))}}]}),j=()=>f.value==="/404"||f.value==="/403"?"/":f.value,g=async()=>{var n;v.value&&((n=v.value)==null||n.validate(async s=>{if(s)try{p.value=!0,await I(a).catch(()=>{p.value=!1}),await L.push(j())}finally{p.value=!1}}))},G=()=>{C.value=`https://www.oschina.net/action/user/captcha?timestamp=${Date.now()}`};return A(()=>{a.username="admin",a.password="123456",location.hostname.includes("vuejs-core")&&(k.value="（演示地址验证码可不填）",_=setTimeout(()=>{g()},1e3*10))}),H(()=>{f.value=R.query&&R.query.redirect||"/"}),re((n,s,t)=>{try{_&&clearTimeout(_)}catch{}t()}),(n,s)=>{const t=q("vab-icon"),w=W,y=O,h=Z,E=q("router-link"),Q=J,X=$,Y=B("focus"),S=B("throttle");return m(),x(X,null,{default:r(()=>[d("div",de,[d("img",{alt:"",class:"left-img",src:e(ce)},null,8,ue),o(Q,{ref_key:"formRef",ref:v,"label-position":"left",model:e(a),rules:e(F),onSubmit:s[3]||(s[3]=K(()=>{},["prevent"]))},{default:r(()=>[s[4]||(s[4]=d("div",{class:"title"},"hello !",-1)),d("div",pe,u(e(l)("欢迎来到"))+" "+u(e(D)),1),o(y,{prop:"username"},{default:r(()=>[b((m(),x(w,{modelValue:e(a).username,"onUpdate:modelValue":s[0]||(s[0]=c=>e(a).username=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入用户名"),type:"text"},{prefix:r(()=>[o(t,{icon:"user-line"})]),_:1},8,["modelValue","placeholder"])),[[Y]])]),_:1}),o(y,{prop:"password"},{default:r(()=>[o(w,{ref_key:"passwordRef",ref:P,modelValue:e(a).password,"onUpdate:modelValue":s[1]||(s[1]=c=>e(a).password=c),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("请输入密码"),"show-password":"",type:e(N)},{prefix:r(()=>[o(t,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder","type"])]),_:1}),o(y,{prop:"verificationCode"},{default:r(()=>[o(w,{modelValue:e(a).verificationCode,"onUpdate:modelValue":s[2]||(s[2]=c=>e(a).verificationCode=c),modelModifiers:{trim:!0},placeholder:e(l)("验证码")+e(k),type:"text"},{prefix:r(()=>[o(t,{icon:"barcode-box-line"})]),_:1},8,["modelValue","placeholder"]),d("img",{class:"code",src:e(C),onClick:G},null,8,fe)]),_:1}),b((m(),x(h,{class:"login-btn",loading:e(p),type:"primary"},{default:r(()=>[V(u(e(l)("登录")),1)]),_:1},8,["loading"])),[[S,g]]),o(E,{to:"/register"},{default:r(()=>[o(h,{style:{"margin-top":"20px","margin-left":"-10px"},type:"primary"},{default:r(()=>[V(u(e(l)("注册")),1)]),_:1})]),_:1}),o(E,{to:"/password"},{default:r(()=>[o(h,{style:{"margin-top":"20px"},text:"",type:"primary"},{default:r(()=>[V(u(e(l)("忘记密码")),1)]),_:1})]),_:1}),b((m(),ee("div",me,[o(t,{icon:"wechat-fill",style:{color:"#08c25f"}}),o(t,{icon:"alipay-fill",style:{color:"#226bf3"}}),o(t,{icon:"dingding-fill",style:{color:"#007ef8"}}),o(t,{icon:"qq-fill",style:{color:"#009dff"}}),o(t,{icon:"tiktok-fill",style:{color:"#000000"}}),o(t,{icon:"weibo-fill",style:{color:"#df1e33"}}),o(t,{icon:"github-fill",style:{color:"#151515"}})])),[[S,g]])]),_:1},8,["model","rules"])])]),_:1})}}}),Re=ie(_e,[["__scopeId","data-v-2f167483"]]);export{Re as default};
