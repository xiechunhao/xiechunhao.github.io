/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{k as _,C as T,f as q,_ as B}from"./index-DuUxtc1j.js";import{d as F,r as m,f as V,a5 as R,R as S,o as U,S as s,Y as o,ap as h,u as a,aq as j,aT as I,aM as O,a7 as L,a6 as N,i as $,k as z}from"./vsv-element-plus-CcCXTk6v.js";function P(r){return _({url:"/departmentManagement/getList",method:"get",params:r})}const Y=r=>_({url:"/departmentManagement/doEdit",method:"post",data:r}),Q=r=>_({url:"/departmentManagement/doDelete",method:"post",data:r}),A=F({name:"DepartmentManagementEdit",__name:"DepartmentManagementEdit",emits:["fetch-data"],setup(r,{expose:v,emit:E}){const M=E,u=m(),f=m([]),l=V({parentValue:""}),x=V({parentValue:[{required:!0,trigger:"blur",message:"请选择父节点"}],label:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]}),i=m(""),d=m(!1),y=async()=>{const{data:t}=await P();f.value=t.list};v({showEdit:t=>{d.value=!0,z(()=>{t?(delete t.value,i.value="编辑",Object.assign(l,t)):i.value="添加"})}});const g=()=>{var t,e;(t=u.value)==null||t.clearValidate(),(e=u.value)==null||e.resetFields(),M("fetch-data")},D=()=>{var t;(t=u.value)==null||t.validate(async e=>{if(e){const{msg:p}=await Y(l);await q(p,"success","hey"),await g(),d.value=!1}})};return R(()=>{y()}),(t,e)=>{const p=I,c=j,b=O,k=h,w=L,C=T;return U(),S(C,{modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=n=>$(d)?d.value=n:null),"append-to-body":"",title:a(i),width:"500px",onClose:g},{footer:s(()=>[o(w,{type:"primary",onClick:D},{default:s(()=>e[4]||(e[4]=[N("保存")])),_:1})]),default:s(()=>[o(k,{ref_key:"formRef",ref:u,"label-width":"80px",model:a(l),rules:a(x)},{default:s(()=>[o(c,{label:"父节点",prop:"parentValue"},{default:s(()=>[o(p,{modelValue:a(l).parentValue,"onUpdate:modelValue":e[0]||(e[0]=n=>a(l).parentValue=n),data:a(f)},null,8,["modelValue","data"])]),_:1}),o(c,{label:"名称",prop:"label"},{default:s(()=>[o(b,{modelValue:a(l).label,"onUpdate:modelValue":e[1]||(e[1]=n=>a(l).label=n),clearable:""},null,8,["modelValue"])]),_:1}),o(c,{label:"排序",prop:"order"},{default:s(()=>[o(b,{modelValue:a(l).order,"onUpdate:modelValue":e[2]||(e[2]=n=>a(l).order=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),G=B(A,[["__scopeId","data-v-70c178fd"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{W as D,G as _,Q as d,P as g};
