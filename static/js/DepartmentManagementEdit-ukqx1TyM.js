/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 11:53:44 
 */
import{g as E,a as k}from"./departmentManagement-BQzIS1pm.js";import{d as M,C as U,V as n,u as a,G as q,D as s,o as B,L as o,_ as R}from"./vsv-element-plus-DQNbQgVr.js";import{_ as F}from"./index-DXRDwnmL.js";import"./vsv-icon-BSoeDgwL.js";import"./vsv-nprogress-BCb6Y0ID.js";const L=M({name:"DepartmentManagementEdit",__name:"DepartmentManagementEdit",emits:["fetch-data"],setup(N,{expose:V,emit:b}){const g=b,u=ref(),f=ref([]),l=reactive({parentValue:""}),v=reactive({parentValue:[{required:!0,trigger:"blur",message:"请选择父节点"}],label:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]}),m=ref(""),d=ref(!1),x=async()=>{const{data:t}=await E();f.value=t.list};V({showEdit:t=>{d.value=!0,nextTick(()=>{t?(delete t.value,m.value="编辑",Object.assign(l,t)):m.value="添加"})}});const c=()=>{var t,e;(t=u.value)==null||t.clearValidate(),(e=u.value)==null||e.resetFields(),g("fetch-data")},w=()=>{var t;(t=u.value)==null||t.validate(async e=>{if(e){const{msg:i}=await k(l);await $baseMessage(i,"success","hey"),await c(),d.value=!1}})};return onBeforeMount(()=>{x()}),(t,e)=>{const i=s("el-tree-select"),p=s("el-form-item"),_=s("el-input"),y=s("el-form"),C=s("el-button"),D=s("vab-dialog");return B(),U(D,{modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=r=>q(d)?d.value=r:null),"append-to-body":"",title:a(m),width:"500px",onClose:c},{footer:n(()=>[o(C,{type:"primary",onClick:w},{default:n(()=>e[4]||(e[4]=[R("保存")])),_:1})]),default:n(()=>[o(y,{ref_key:"formRef",ref:u,"label-width":"80px",model:a(l),rules:a(v)},{default:n(()=>[o(p,{label:"父节点",prop:"parentValue"},{default:n(()=>[o(i,{modelValue:a(l).parentValue,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).parentValue=r),data:a(f)},null,8,["modelValue","data"])]),_:1}),o(p,{label:"名称",prop:"label"},{default:n(()=>[o(_,{modelValue:a(l).label,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).label=r),clearable:""},null,8,["modelValue"])]),_:1}),o(p,{label:"排序",prop:"order"},{default:n(()=>[o(_,{modelValue:a(l).order,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).order=r),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),h=F(L,[["__scopeId","data-v-70c178fd"]]);export{h as default};
