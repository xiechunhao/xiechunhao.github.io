/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-08 15:47:29 
 */
import{_ as Q,d as E,g as W}from"./RoleManagementEdit-a9RqWbBw.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-DG6MVEkW.js";import{_ as Z}from"./index-DKULVN8L.js";import{_ as H}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-Bdp4gqKq.js";import{_ as J}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DGp934Nh.js";import{d as K,r as d,h as X,P as ee,a6 as te,b as S,o as m,Z as t,U as ae,T as n,a8 as ne,u as o,bp as oe,a7 as _,bq as le,ao as se,aB as ie,ap as re,aL as _e,aR as pe,W as de,S as $,aO as ue,Y as R,bO as me,a2 as ce,ai as fe,aG as ge,aI as ve,aQ as ye}from"./vsv-element-plus-B-S50adB.js";import{$ as x,f as v}from"./index-CzpjYiTj.js";import"./vsv-icon-BcEnJ7dJ.js";import"./vsv-nprogress-Bmiy9T8n.js";const be={class:"role-management-container auto-height-container"},De=K({name:"RoleManagement",__name:"index",setup(we){const y=d(),c=d(null),b=d([]),u=d(!0),w=d(0),f=d([]),l=X({pageNo:1,pageSize:20,role:""}),z=a=>{f.value=a},h=(a={})=>{a.id?c.value.showEdit(a):c.value.showEdit()},C=(a={})=>{if(a.id)x("您确定要删除当前项吗",null,async()=>{const{msg:e}=await E({ids:a.id});v(e,"success","hey"),await r()});else if(f.value.length>0){const e=f.value.map(i=>i.id).join(",");x("您确定要删除选中项吗",null,async()=>{const{msg:i}=await E({ids:e});v(i,"success","hey"),await r()})}else v("您未选中任何行","warning","hey")},D=a=>{l.pageNo=1,l.pageSize=a,r()},L=a=>{l.pageNo=a,r()},N=()=>{l.pageNo=1,r()},r=async()=>{u.value=!0;const{data:a}=await W(l);b.value=a.list,w.value=a.total,u.value=!1};return ee(()=>{var a;(a=y.value)==null||a.doLayout()}),te(()=>{r()}),(a,e)=>{const i=ne,q=J,B=_e,k=re,F=se,M=H,T=Z,p=ue,V=ge,I=me,O=ve,U=ye,j=Y,A=Q,G=de;return m(),S("div",be,[t(T,null,{default:n(()=>[t(q,{span:12},{default:n(()=>[t(i,{icon:o(oe),type:"primary",onClick:e[0]||(e[0]=s=>h())},{default:n(()=>e[4]||(e[4]=[_("添加")])),_:1},8,["icon"]),t(i,{icon:o(le),type:"danger",onClick:e[1]||(e[1]=s=>C())},{default:n(()=>e[5]||(e[5]=[_("批量删除")])),_:1},8,["icon"])]),_:1}),t(M,{span:12},{default:n(()=>[t(F,{inline:"",model:o(l),onSubmit:e[3]||(e[3]=ie(()=>{},["prevent"]))},{default:n(()=>[t(k,null,{default:n(()=>[t(B,{modelValue:o(l).role,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).role=s),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入角色"},null,8,["modelValue"])]),_:1}),t(k,null,{default:n(()=>[t(i,{icon:o(pe),loading:o(u),type:"primary",onClick:N},{default:n(()=>e[6]||(e[6]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),ae((m(),$(U,{ref_key:"tableRef",ref:y,border:"",data:o(b),onSelectionChange:z},{empty:n(()=>[t(O,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[t(p,{type:"selection",width:"38"}),t(p,{align:"center",label:"序号","show-overflow-tooltip":"",width:"55"},{default:n(({$index:s})=>[_(R(s+1),1)]),_:1}),t(p,{align:"center",label:"id","min-width":"180",prop:"id","show-overflow-tooltip":""}),t(p,{align:"center",label:"角色码",prop:"role","show-overflow-tooltip":""}),t(p,{align:"center",label:"按钮权限","min-width":"320"},{default:n(({row:s})=>[t(I,{wrap:""},{default:n(()=>[(m(!0),S(ce,null,fe(s.btnRolesCheckedList,(g,P)=>(m(),$(V,{key:P},{default:n(()=>[_(R(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(p,{align:"center",label:"操作",width:"150"},{default:n(({row:s})=>[t(i,{text:"",type:"primary",onClick:g=>h(s)},{default:n(()=>e[7]||(e[7]=[_("编辑")])),_:2},1032,["onClick"]),t(i,{text:"",type:"danger",onClick:g=>C(s)},{default:n(()=>e[8]||(e[8]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,o(u)]]),t(j,{"current-page":o(l).pageNo,"page-size":o(l).pageSize,total:o(w),onCurrentChange:L,onSizeChange:D},null,8,["current-page","page-size","total"]),t(A,{ref_key:"editRef",ref:c,onFetchData:r},null,512)])}}});export{De as default};
