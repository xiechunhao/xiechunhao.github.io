/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{C as S,f as T}from"./index-DuUxtc1j.js";import{d as $,r,f as k,R as c,o as p,S as o,Y as t,ap as Y,u as a,aq as Z,aM as z,co as A,i as y,b,Z as D,cp as H,a6 as E,at as J,a as x,a1 as U,aj as w,au as K,a7 as P,k as Q}from"./vsv-element-plus-CcCXTk6v.js";import{d as W}from"./workOrder-CmZjQPjt.js";const te=$({name:"GoodsManagementEdit",__name:"GoodsManagementEdit",emits:["fetch-data"],setup(X,{expose:M,emit:q}){const F=q,f=r(),_=r(""),d=r(!1),s=k({}),B=k({name:[{required:!0,trigger:"blur",message:"请输入商品名称"}],type:[{required:!0,trigger:"blur",message:"请输入商品类型"}],price:[{required:!0,trigger:"blur",message:"请输入商品售价"}],stock:[{required:!0,trigger:"blur",message:"请输入库存"}],status:[{required:!0,trigger:"blur",message:"请输入状态"}]}),C=r([{value:"1",label:"家用电器"},{value:"2",label:"食品饮料"},{value:"3",label:"其他"}]),L=r([{value:"1",label:"待上架"},{value:"2",label:"已上架"},{value:"3",label:"已下架"}]),i=r([]);M({showEdit:u=>{d.value=!0,Q(()=>{u?(_.value="编辑",Object.assign(s,u),i.value=[{name:"商品图",url:u.image}]):(_.value="添加",i.value=[])})}});const v=()=>{var u,e;(u=f.value)==null||u.clearValidate(),(e=f.value)==null||e.resetFields(),F("fetch-data")},R=()=>{var u;(u=f.value)==null||u.validate(async e=>{if(e){const{msg:m}=await W(s);await T(m,"success","hey"),await v(),d.value=!1}})};return(u,e)=>{const m=z,n=Z,j=D,I=A,g=K,V=J,N=Y,G=P,O=S;return p(),c(O,{modelValue:a(d),"onUpdate:modelValue":e[6]||(e[6]=l=>y(d)?d.value=l:null),"append-to-body":"",title:a(_),width:"500px",onClose:v},{footer:o(()=>[t(G,{type:"primary",onClick:R},{default:o(()=>e[9]||(e[9]=[E("保存")])),_:1})]),default:o(()=>[t(N,{ref_key:"formRef",ref:f,"label-width":"80px",model:a(s),rules:a(B)},{default:o(()=>[t(n,{label:"商品名称",prop:"name"},{default:o(()=>[t(m,{modelValue:a(s).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).name=l),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"商品图"},{default:o(()=>[t(I,{"file-list":a(i),"onUpdate:fileList":e[1]||(e[1]=l=>y(i)?i.value=l:null),action:"/uploadFile",drag:"",multiple:"",style:{width:"100%"}},{tip:o(()=>e[7]||(e[7]=[b("div",{class:"el-upload__tip"},"jpg/png 文件需小于500kb",-1)])),default:o(()=>[t(j,{class:"el-icon--upload"},{default:o(()=>[t(a(H))]),_:1}),e[8]||(e[8]=b("div",{class:"el-upload__text"},[E(" 将商品图拖拽至此处或 "),b("em",null,"点击上传")],-1))]),_:1},8,["file-list"])]),_:1}),t(n,{label:"商品类型",prop:"type"},{default:o(()=>[t(V,{modelValue:a(s).type,"onUpdate:modelValue":e[2]||(e[2]=l=>a(s).type=l)},{default:o(()=>[(p(!0),x(U,null,w(a(C),l=>(p(),c(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"状态",prop:"status"},{default:o(()=>[t(V,{modelValue:a(s).status,"onUpdate:modelValue":e[3]||(e[3]=l=>a(s).status=l)},{default:o(()=>[(p(!0),x(U,null,w(a(L),l=>(p(),c(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"商品售价",prop:"price"},{default:o(()=>[t(m,{modelValue:a(s).price,"onUpdate:modelValue":e[4]||(e[4]=l=>a(s).price=l),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"库存",prop:"stock"},{default:o(()=>[t(m,{modelValue:a(s).stock,"onUpdate:modelValue":e[5]||(e[5]=l=>a(s).stock=l),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{te as _};
