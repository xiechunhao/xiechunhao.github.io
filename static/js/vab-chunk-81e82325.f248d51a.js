/*!
 *  build: admin-pro 
 *  copyright: vuejs-core.cn  
 *  time: 2025-3-14 00:13:58
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vab-chunk-81e82325"],{9654:function(t,e,n){},bd1f:function(t,e,n){"use strict";n.d(e,"b",(function(){return si})),n.d(e,"a",(function(){return Fi}));var i=n("316d"),o=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}));return t},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}(),r=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new o;function a(){return r.next()}var s=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=function(t){function e(e,n){var i=this;return e.id||(e.id="Event_"+a()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),i=t.call(this,e,n)||this,i}return s(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=t.prototype.getConnectedTargetRules.call(this),n={message:"起始节点不能作为边的终点",validate:function(){return!1}};return e.push(n),e},e.extendKey="StartEventModel",e}(i["CircleNodeModel"]),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.extendKey="StartEventNode",e}(i["CircleNode"]),h={type:"bpmn:startEvent",view:d,model:l},p=h,u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(){return c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},c.apply(this,arguments)},f=function(t){function e(e,n){var i=this;return e.id||(e.id="Event_"+a()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),i=t.call(this,e,n)||this,i}return u(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=t.prototype.getConnectedSourceRules.call(this),n={message:"结束节点不能作为边的起点",validate:function(){return!1}};return e.push(n),e},e.extendKey="EndEventModel",e}(i["CircleNodeModel"]),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e=this.props.model,n=e.getNodeStyle(),o=e.x,r=e.y,a=e.r,s=t.prototype.getShape.call(this);return Object(i["h"])("g",{},s,Object(i["h"])("circle",c(c({},n),{cx:o,cy:r,r:a-5})))},e.extendKey="EndEventView",e}(i["CircleNode"]),g={type:"bpmn:endEvent",view:y,model:f},v=g,m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),x=function(){return x=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},x.apply(this,arguments)},b=function(t){function e(e,n){var i=this;return e.id||(e.id="Gateway_"+a()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),i=t.call(this,e,n)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return m(e,t),e.extendKey="ExclusiveGatewayModel",e}(i["PolygonNodeModel"]),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.points,s=t.getNodeStyle();return Object(i["h"])("g",{transform:"matrix(1 0 0 1 "+(e-o/2)+" "+(n-r/2)+")"},Object(i["h"])("polygon",x(x({},s),{x:e,y:n,points:a})),Object(i["h"])("path",x({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},s)))},e.extendKey="ExclusiveGatewayNode",e}(i["PolygonNode"]),M={type:"bpmn:exclusiveGateway",view:w,model:b},O=M,E=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=function(){return _=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_.apply(this,arguments)},N=function(t){function e(e,n){var i=this;return e.id||(e.id="Activity_"+a()),i=t.call(this,e,n)||this,i}return E(e,t),e.extendKey="UserTaskModel",e}(i["RectNodeModel"]),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.getNodeStyle();return Object(i["h"])("svg",{x:e-o/2+5,y:n-r/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Object(i["h"])("path",{fill:a.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.radius,s=t.getNodeStyle();return Object(i["h"])("g",{},[Object(i["h"])("rect",_(_({},s),{x:e-o/2,y:n-r/2,rx:a,ry:a,width:o,height:r})),this.getLabelShape()])},e.extendKey="UserTaskNode",e}(i["RectNode"]),S={type:"bpmn:userTask",view:P,model:N},T=S,j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),C=function(){return C=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},C.apply(this,arguments)},A=function(t){function e(e,n){var i=this;return e.id||(e.id="Activity_"+a()),i=t.call(this,e,n)||this,i}return j(e,t),e.extendKey="ServiceTaskModel",e}(i["RectNodeModel"]),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.getNodeStyle();return Object(i["h"])("svg",{x:e-o/2+5,y:n-r/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Object(i["h"])("path",{fill:a.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.radius,s=t.getNodeStyle();return Object(i["h"])("g",{},[Object(i["h"])("rect",C({x:e-o/2,y:n-r/2,rx:a,ry:a,width:o,height:r},s)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e}(i["RectNode"]),I={type:"bpmn:serviceTask",view:k,model:A},D=I,L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),R=function(t){function e(e,n){var i=this;return e.id||(e.id="Flow_"+a()),i=t.call(this,e,n)||this,i}return L(e,t),e.extendKey="SequenceFlowModel",e}(i["PolylineEdgeModel"]),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.extendKey="SequenceFlowEdge",e}(i["PolylineEdge"]),G={type:"bpmn:sequenceFlow",view:B,model:R},F=G,z={width:40,height:40},W={width:40,height:40},H={width:40,height:40},X={width:100,height:80},Y={width:100,height:80},V={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},q=(function(){function t(t){var e=t.lf;e.setTheme(V),e.register(p),e.register(v),e.register(O),e.register(T),e.register(D),e.options.customBpmnEdge||(e.register(F),e.setDefaultEdgeType("bpmn:sequenceFlow"))}t.pluginName="bpmnElement"}(),function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}));return t},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}()),U=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new q;function Z(){return U.next()}function J(t){return Object.prototype.toString.call(t)}function K(t){return"  ".repeat(t)}function Q(t){var e=t;return"[object Object]"===J(t)?(e={},Object.keys(t).forEach((function(n){var i=n;"-"===n.charAt(0)&&(i=n.substring(1)),e[i]=Q(t[n])}))):Array.isArray(t)&&(e=[],t.forEach((function(t,n){e[n]=Q(t)}))),e}function $(t){var e=t;try{"string"!==typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(Q(t)).replace(/"/g,"'")}return e}var tt="\t\n";function et(t,e,n){var i=K(n),o="";if("#text"===e)return tt+i+t;if("#cdata-section"===e)return tt+i+"<![CDATA["+t+"]]>";if("#comment"===e)return tt+i+"\x3c!--"+t+"--\x3e";if("-"===(""+e).charAt(0))return" "+e.substring(1)+'="'+$(t)+'"';if(Array.isArray(t))t.forEach((function(t){o+=et(t,e,n+1)}));else if("[object Object]"===J(t)){var r=Object.keys(t),a="",s="";o+=(0===n?"":tt+i)+"<"+e,r.forEach((function(e){"-"===e.charAt(0)?a+=et(t[e],e,n+1):s+=et(t[e],e,n+1)})),o+=a+(""!==s?">"+s+(tt+i)+"</"+e+">":" />")}else o+=tt+i+"<"+e+">"+t.toString()+"</"+e+">";return o}function nt(t){var e="";for(var n in t)e+=et(t[n],n,0);return e}var it=function(){};it.ObjTree=function(){return this},it.ObjTree.VERSION="0.23",it.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',it.ObjTree.prototype.attr_prefix="-",it.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,i=n.parseFromString(t,"application/xml");if(!i)return;e=i.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},it.ObjTree.prototype.parseHTTP=function(t,e,n){var i,o={};for(var r in e)o[r]=e[r];if(o.method||("undefined"==typeof o.postBody&&"undefined"==typeof o.postbody&&"undefined"==typeof o.parameters?o.method="get":o.method="post"),n){o.asynchronous=!0;var a=this,s=n,l=o.onComplete;o.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else o.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request){o.uri=t;var d=new HTTP.Request(o);d&&(i=d.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){d=new Ajax.Request(t,o);d&&(i=d.transport)}return n?i:i&&i.responseXML&&i.responseXML.documentElement?this.parseDOM(i.responseXML.documentElement):void 0},it.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!=t.nodeType){var i={};i[t.nodeName]=n,n=i}return n}},it.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType||8==t.nodeType){var e=t.nodeValue.match(/[^\x00-\x20]/);if(null==e)return;return t.nodeValue}var n=null,i={};if(t.attributes&&t.attributes.length){n={};for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o].nodeName;if("string"==typeof r){var a=t.attributes[o].nodeValue;try{a=JSON.parse(t.attributes[o].nodeValue.replace(/'/g,'"'))}catch(d){a=t.attributes[o].nodeValue}a&&(r=this.attr_prefix+r,"undefined"==typeof i[r]&&(i[r]=0),i[r]++,this.addNode(n,r,i[r],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(o=0;o<t.childNodes.length&&s;o++){var l=t.childNodes[o].nodeType;3!=l&&4!=l&&8!=l&&(s=!1)}if(s){n||(n="");for(o=0;o<t.childNodes.length;o++)n+=t.childNodes[o].nodeValue}else{n||(n={});for(o=0;o<t.childNodes.length;o++){r=t.childNodes[o].nodeName;if("string"==typeof r){a=this.parseElement(t.childNodes[o]);a&&("undefined"==typeof i[r]&&(i[r]=0),i[r]++,this.addNode(n,r,i[r],a))}}}}else null===n&&(n={});return n}},it.ObjTree.prototype.addNode=function(t,e,n,i){this.__force_array[e]?(1==n&&(t[e]=[]),t[e][t[e].length]=i):1==n?t[e]=i:2==n?t[e]=[t[e],i]:t[e][t[e].length]=i},it.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},it.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],i=[];for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];o.charAt(0)!=this.attr_prefix?"undefined"==typeof r||null==r?n[n.length]="<"+o+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=this.array_to_xml(o,r):n[n.length]="object"==typeof r?this.hash_to_xml(o,r):this.scalar_to_xml(o,r):i[i.length]=" "+o.substring(1)+'="'+this.xml_escape(r)+'"'}var a=i.join(""),s=n.join("");return"undefined"==typeof t||null==t||(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s},it.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],i=0;i<e.length;i++){var o=e[i];"undefined"==typeof o||null==o?n[n.length]="<"+t+" />":"object"==typeof o&&o.constructor==Array?n[n.length]=this.array_to_xml(t,o):n[n.length]="object"==typeof o?this.hash_to_xml(t,o):this.scalar_to_xml(t,o)}return n.join("")},it.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},it.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var ot,rt=function(t){return(new it.ObjTree).parseXML(t)},at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),st=function(){return st=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},st.apply(this,arguments)},lt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a};(function(t){t["START"]="bpmn:startEvent",t["END"]="bpmn:endEvent",t["GATEWAY"]="bpmn:exclusiveGateway",t["USER"]="bpmn:userTask",t["SYSTEM"]="bpmn:serviceTask",t["FLOW"]="bpmn:sequenceFlow"})(ot||(ot={}));var dt=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],ht=["properties","startPoint","endPoint","pointsList"];function pt(t){var e=t?ht.concat(t):ht;return function(t){function n(t){var i={};return"string"===typeof t?t:Array.isArray(t)?t.map((function(t){return n(t)})):(Object.entries(t).forEach((function(t){var o=lt(t,2),r=o[0],a=o[1];"object"!==typeof a?0===r.indexOf("-")||["#text","#cdata-section","#comment"].includes(r)?i[r]=a:i["-"+r]=a:e.includes(r)?i["-"+r]=n(a):i[r]=n(a)})),i)}return n(t)}}function ut(t){var e={};return Object.entries(t).forEach((function(t){var n=lt(t,2),i=n[0],o=n[1];0===i.indexOf("-")?e[i.substring(1)]=Q(o):"string"===typeof o?e[i]=o:"[object Object]"===Object.prototype.toString.call(o)?e[i]=ut(o):Array.isArray(o)?e[i]=o.map((function(t){return ut(t)})):e[i]=o})),e}function ct(t,e,n){var i=new Map;e.nodes.forEach((function(e){var o,r={"-id":e.id};if((null===(o=e.text)||void 0===o?void 0:o.value)&&(r["-name"]=e.text.value),e.properties){var a=pt(n)(e.properties);Object.assign(r,a)}i.set(e.id,r),t[e.type]?Array.isArray(t[e.type])?t[e.type].push(r):t[e.type]=[t[e.type],r]:t[e.type]=r}));var o=e.edges.map((function(t){var e,o,r=i.get(t.targetNodeId);r["bpmn:incoming"]?Array.isArray(r["bpmn:incoming"])?r["bpmn:incoming"].push(t.id):r["bpmn:incoming"]=[r["bpmn:incoming"],t.id]:r["bpmn:incoming"]=t.id;var a={"-id":t.id,"-sourceRef":t.sourceNodeId,"-targetRef":t.targetNodeId};if((null===(e=t.text)||void 0===e?void 0:e.value)&&(a["-name"]=null===(o=t.text)||void 0===o?void 0:o.value),t.properties){var s=pt(n)(t.properties);Object.assign(a,s)}return a}));e.edges.forEach((function(t){var e=i.get(t.sourceNodeId);e["bpmn:outgoing"]?Array.isArray(e["bpmn:outgoing"])?e["bpmn:outgoing"].push(t.id):e["bpmn:outgoing"]=[e["bpmn:outgoing"],t.id]:e["bpmn:outgoing"]=t.id})),t[ot.FLOW]=o}function ft(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,i=t.pointsList.map((function(t){var e=t.x,n=t.y;return{"-x":e,"-y":n}})),o={"-id":n+"_di","-bpmnElement":n,"di:waypoint":i};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(o["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),o})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,i=100,o=80,r=t.x,a=t.y,s=bt.shapeConfigMap.get(t.type);s&&(i=s.width,o=s.height),r-=i/2,a-=o/2;var l={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":r,"-y":a,"-width":i,"-height":o}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}function yt(t){var e=[],n=[],i=t["bpmn:definitions"];if(i){var o=i["bpmn:process"];Object.keys(o).forEach((function(t){if(0===t.indexOf("bpmn:")){var r=o[t];if(t===ot.FLOW){var a=i["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=mt(r,a)}else{var s=i["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(gt(r,s,t))}}}))}return{nodes:e,edges:n}}function gt(t,e,n){var i=[];if(Array.isArray(t))t.forEach((function(t){var o;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var r=vt(o,n,t);i.push(r)}));else{var o=void 0;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var r=vt(o,n,t);i.push(r)}return i}function vt(t,e,n){var i,o,r=Number(t["dc:Bounds"]["-x"]),a=Number(t["dc:Bounds"]["-y"]),s=n["-name"],l=bt.shapeConfigMap.get(e);if(l&&(r+=l.width/2,a+=l.height/2),Object.entries(n).forEach((function(t){var e=lt(t,2),n=e[0],o=e[1];-1===dt.indexOf(n)&&(i||(i={}),i[n]=o)})),i&&(i=ut(i)),s&&(o={x:r,y:a,value:s},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=t["bpmndi:BPMNLabel"]["dc:Bounds"];o.x=Number(d["-x"])+Number(d["-width"])/2,o.y=Number(d["-y"])+Number(d["-height"])/2}var h={id:t["-bpmnElement"],type:e,x:r,y:a,properties:i};return o&&(h.text=o),h}function mt(t,e){var n=[];if(Array.isArray(t))t.forEach((function(t){var i;i=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(xt(i,t))}));else{var i=void 0;i=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(xt(i,t))}return n}function xt(t,e){var n,i,o=e["-name"];if(o){var r=t["bpmndi:BPMNLabel"]["dc:Bounds"],a=0;o.split("\n").forEach((function(t){a<t.length&&(a=t.length)})),n={value:o,x:Number(r["-x"])+10*a/2,y:Number(r["-y"])+7}}Object.entries(e).forEach((function(t){var e=lt(t,2),n=e[0],o=e[1];-1===dt.indexOf(n)&&(i||(i={}),i[n]=o)})),i&&(i=ut(i));var s={id:e["-id"],type:ot.FLOW,pointsList:t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:i};return n&&(s.text=n),s}var bt=function(){function t(t){var e=this,n=t.lf;this.adapterOut=function(t,n){var i=st({},e.processAttributes);ct(i,t,n);var o={"-id":"BPMNPlane_1","-bpmnElement":i["-id"]};ft(o,t);var r=e.definitionAttributes;r["bpmn:process"]=i,r["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":o};var a={"bpmn:definitions":r};return a},this.adapterIn=function(t){if(t)return yt(t)},n.adapterIn=function(t){return e.adapterIn(t)},n.adapterOut=function(t,n){return e.adapterOut(t,n)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Z()},this.definitionAttributes={"-id":"Definitions_"+Z(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();bt.shapeConfigMap.set(ot.START,{width:z.width,height:z.height}),bt.shapeConfigMap.set(ot.END,{width:W.width,height:W.height}),bt.shapeConfigMap.set(ot.GATEWAY,{width:H.width,height:H.height}),bt.shapeConfigMap.set(ot.SYSTEM,{width:X.width,height:X.height}),bt.shapeConfigMap.set(ot.USER,{width:Y.width,height:Y.height});(function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=rt(t);return n.adapterIn(e)},n.adapterXmlOut=function(t,e){var i=n.adapterOut(t,e);return nt(i)};var i=e.lf;return i.adapterIn=n.adapterXmlIn,i.adapterOut=n.adapterXmlOut,n}at(e,t),e.pluginName="bpmnXmlAdapter"})(bt);function wt(){var t={message:"分组外的节点不允许连接分组内的",validate:function(t,e,n,i){var o=!!t.properties.parent,r=!!e.properties.parent;return!(!o&&r)}};this.targetRules.push(t)}var Mt=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}));return t},t.prototype.next=function(){var t=this.generateId();while(this._ids.has(t))t=this.generateId();return this._ids.add(t),t},t}(),Ot=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new Mt;function Et(){return Ot.next()}var _t=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nt=function(){return Nt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Nt.apply(this,arguments)},Pt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},St=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pt(arguments[e]));return t};function Tt(t){var e=Pt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e,o=this.props.model,r=o.getNodeStyle(),a=o.x,s=o.y,l=o.r,d=o.width,h=o.height,p=o.properties,u=t.prototype.getShape.call(this),c=p.definitionType,f=((null===(e=n.endEvent)||void 0===e?void 0:e.get(c))||{}).icon,y=Array.isArray(f)?i["h"].apply(void 0,St(["g",{transform:"matrix(1 0 0 1 "+(a-d/2)+" "+(s-h/2)+")"}],f)):Object(i["h"])("path",{transform:"matrix(1 0 0 1 "+(a-d/2)+" "+(s-h/2)+")",d:f,style:"fill: black; stroke-linecap: round; stroke-linejoin: round; stroke: white; stroke-width: 1px;"});return Object(i["h"])("g",{},u,Object(i["h"])("circle",Nt(Nt({},r),{strokeWidth:2,cx:a,cy:s,r:l-2})),y)},e}(i["CircleNode"]),r=function(t){function e(e,i){var o,r,a,s=this;e.id||(e.id="Event_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(o=n.endEvent)||void 0===o?void 0:o.get(null===(r=e.properties)||void 0===r?void 0:r.definitionType))||{}).properties,d=void 0===l?{}:l;return e.properties=Nt(Nt({},d),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_"+Et()),s=t.call(this,e,i)||this,wt.call(s),s}return _t(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=this,n=t.prototype.getConnectedSourceRules.call(this),i={message:"结束节点不能作为边的起点",validate:function(t,n){return t!==e}};return n.push(i),n},e}(i["CircleNodeModel"]);return{type:"bpmn:endEvent",view:o,model:r}}var jt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ct=function(){return Ct=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ct.apply(this,arguments)},At=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},kt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(At(arguments[e]));return t};function It(t){var e=At(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e.x,a=e.y,s=e.r,l=e.width,d=e.height,h=e.properties,p=h.definitionType,u=((null===(t=n.intermediateCatchEvent)||void 0===t?void 0:t.get(p))||{}).icon,c=Array.isArray(u)?i["h"].apply(void 0,kt(["g",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")"}],u)):Object(i["h"])("path",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")",d:u});return Object(i["h"])("g",{},Object(i["h"])("circle",Ct(Ct({},o),{cx:r,cy:a,r:s,strokeWidth:1.5})),Object(i["h"])("circle",Ct(Ct({},o),{cx:r,cy:a,r:s-3,strokeWidth:1.5})),c)},e}(i["CircleNode"]),r=function(t){function e(e,i){var o,r,a,s=this;e.id||(e.id="Event_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(o=n.intermediateCatchEvent)||void 0===o?void 0:o.get(null===(r=e.properties)||void 0===r?void 0:r.definitionType))||{}).properties,d=void 0===l?{}:l;return e.properties=Ct(Ct({},d),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_"+Et()),s=t.call(this,e,i)||this,wt.call(s),s}return jt(e,t),e.prototype.setAttributes=function(){this.r=18},e}(i["CircleNodeModel"]);return{type:"bpmn:intermediateCatchEvent",view:o,model:r}}var Dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Lt=function(){return Lt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Lt.apply(this,arguments)},Rt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Bt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rt(arguments[e]));return t};function Gt(t){var e=Rt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e.x,a=e.y,s=e.r,l=e.width,d=e.height,h=e.properties,p=h.definitionType,u=h.isInterrupting,c=((null===(t=n.startEvent)||void 0===t?void 0:t.get(p))||{}).icon,f=Array.isArray(c)?i["h"].apply(void 0,Bt(["g",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")"}],c)):Object(i["h"])("path",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")",d:c,style:"fill: white; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});return Object(i["h"])("g",{},Object(i["h"])("circle",Lt(Lt({},o),{cx:r,cy:a,r:s,strokeDasharray:u?"5,5":"",strokeWidth:2})),f)},e}(i["CircleNode"]),r=function(t){function e(e,i){var o,r,a,s=this;e.id||(e.id="Event_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(o=n.startEvent)||void 0===o?void 0:o.get(null===(r=e.properties)||void 0===r?void 0:r.definitionType))||{}).properties,d=void 0===l?{}:l;return e.properties=Lt(Lt({},d),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_"+Et()),s=t.call(this,e,i)||this,s}return Dt(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=this,n=t.prototype.getConnectedTargetRules.call(this),i={message:"起始节点不能作为边的终点",validate:function(t,n){return n!==e}};return n.push(i),n},e}(i["CircleNodeModel"]);return{type:"bpmn:startEvent",view:o,model:r}}var Ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zt=function(){return zt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zt.apply(this,arguments)},Wt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Ht=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wt(arguments[e]));return t};function Xt(t){var e=Wt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ft(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e.x,a=e.y,s=e.r,l=e.width,d=e.height,h=e.properties,p=h.definitionType,u=h.cancelActivity,c=((null===(t=n.boundaryEvent)||void 0===t?void 0:t.get(p))||{}).icon,f=Array.isArray(c)?i["h"].apply(void 0,Ht(["g",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")"}],c)):Object(i["h"])("path",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")",d:c});return Object(i["h"])("g",{},Object(i["h"])("circle",zt(zt({},o),{cx:r,cy:a,r:s,strokeDasharray:u?"":"5,5",strokeWidth:1.5})),Object(i["h"])("circle",zt(zt({},o),{cx:r,cy:a,r:s-3,strokeDasharray:u?"":"5,5",strokeWidth:1.5})),f)},e}(i["CircleNode"]),r=function(t){function e(e,i){var o,r,a,s=this;e.id||(e.id="Event_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(o=n.boundaryEvent)||void 0===o?void 0:o.get(null===(r=e.properties)||void 0===r?void 0:r.definitionType))||{}).properties,d=void 0===l?{}:l;return e.properties=zt(zt({attachedToRef:"",cancelActivity:!0},d),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_"+Et()),s=t.call(this,e,i)||this,wt.call(s),s}return Ft(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.r=20,this.autoToFront=!1,this.zIndex=99999},e.prototype.setAttributes=function(){this.r=18},e}(i["CircleNodeModel"]);return{type:"bpmn:boundaryEvent",view:o,model:r}}var Yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vt=function(){return Vt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vt.apply(this,arguments)},qt=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Ut=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qt(arguments[e]));return t};function Zt(t){var e=qt(t.useDefinition(),1),n=e[0],o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t,e=this.props.model,o=e.getNodeStyle(),r=e.x,a=e.y,s=e.r,l=e.width,d=e.height,h=e.properties,p=h.definitionType,u=((null===(t=n.intermediateThrowEvent)||void 0===t?void 0:t.get(p))||{}).icon,c=Array.isArray(u)?i["h"].apply(void 0,Ut(["g",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")"}],u)):Object(i["h"])("path",{transform:"matrix(1 0 0 1 "+(r-l/2)+" "+(a-d/2)+")",d:u,style:"fill: black"});return Object(i["h"])("g",{},Object(i["h"])("circle",Vt(Vt({},o),{cx:r,cy:a,r:s,strokeWidth:1.5})),Object(i["h"])("circle",Vt(Vt({},o),{cx:r,cy:a,r:s-3,strokeWidth:1.5})),c)},e}(i["CircleNode"]),r=function(t){function e(e,i){var o,r,a,s=this;e.id||(e.id="Event_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40});var l=((null===(o=n.intermediateThrowEvent)||void 0===o?void 0:o.get(null===(r=e.properties)||void 0===r?void 0:r.definitionType))||{}).properties,d=void 0===l?{}:l;return e.properties=Vt(Vt({},d),e.properties),(null===(a=e.properties)||void 0===a?void 0:a.definitionType)&&(e.properties.definitionId="Definition_"+Et()),s=t.call(this,e,i)||this,wt.call(s),s}return Yt(e,t),e.prototype.setAttributes=function(){this.r=18},e}(i["CircleNodeModel"]);return{type:"bpmn:intermediateThrowEvent",view:o,model:r}}function Jt(t){t.register(Gt(t)),t.register(Tt(t)),t.register(It(t)),t.register(Zt(t)),t.register(Xt(t))}var Kt=[Object(i["h"])("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),Object(i["h"])("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Object(i["h"])("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"})],Qt=(Object(i["h"])("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"}),"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"),$t="m 23,10 0,12.5 -12.5,0 0,5 12.5,0 0,12.5 5,0 0,-12.5 12.5,0 0,-5 -12.5,0 0,-12.5 -5,0 z",te=Object(i["h"])("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"}),ee="M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z",ne="M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z",ie="m44,60 m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",oe="m47,61 m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",re="m 50,73 c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",ae=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),se=function(){return se=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},se.apply(this,arguments)};function le(t,e,n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ae(n,t),n.prototype.getShape=function(){var t=this.props.model,n=t.x,o=t.y,r=t.width,a=t.height,s=t.points,l=t.getNodeStyle();return Object(i["h"])("g",{transform:"matrix(1 0 0 1 "+(n-r/2)+" "+(o-a/2)+")"},Object(i["h"])("polygon",se(se({},l),{x:n,y:o,points:s})),"string"===typeof e?Object(i["h"])("path",se(se({d:e},l),{fill:"rgb(34, 36, 42)",strokeWidth:1})):e)},n}(i["PolygonNode"]),r=function(t){function e(e,i){var o=this;return e.id||(e.id="Gateway_"+Et()),e.text||(e.text=""),e.text&&"string"===typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),e.properties=se(se({},n||{}),e.properties),o=t.call(this,e,i)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],wt.call(o),o}return ae(e,t),e}(i["PolygonNodeModel"]);return{type:t,view:o,model:r}}function de(t){var e=le("bpmn:exclusiveGateway",Qt),n=le("bpmn:parallelGateway",$t),i=le("bpmn:inclusiveGateway",te);t.register(e),t.register(i),t.register(n)}var he=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pe=function(){return pe=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pe.apply(this,arguments)},ue=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},ce=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ue(arguments[e]));return t},fe={parallel:ie,sequential:oe,loop:re};function ye(t,e,n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return he(n,t),n.prototype.getLabelShape=function(){var t=this.props.model,n=t.x,o=t.y,r=t.width,a=t.height,s=t.getNodeStyle(),l=Array.isArray(e)?i["h"].apply(void 0,ce(["g",{transform:"matrix(1 0 0 1 "+(n-r/2)+" "+(o-a/2)+")"}],e)):Object(i["h"])("path",{fill:s.stroke,d:e});return Object(i["h"])("svg",{x:n-r/2+5,y:o-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},l)},n.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.radius,s=t.properties,l=t.getNodeStyle();return Object(i["h"])("g",{},[Object(i["h"])("rect",pe(pe({},l),{x:e-o/2,y:n-r/2,rx:a,ry:a,width:o,height:r,opacity:.95})),this.getLabelShape(),Object(i["h"])("g",{transform:"matrix(1 0 0 1 "+(e-o/2)+" "+(n-r/2)+")"},Object(i["h"])("path",{fill:"white",strokeLinecap:"round",strokeLinejoin:"round",stroke:"rgb(34, 36, 42)",strokeWidth:"2",d:fe[s.multiInstanceType]||""}))])},n}(i["RectNode"]),r=function(t){function e(e,i){var o,r=this;e.id||(e.id="Activity_"+Et());var a=pe(pe({},n||{}),e.properties);return e.properties=a,r=t.call(this,e,i)||this,null===(o=null===a||void 0===a?void 0:a.boundaryEvents)||void 0===o||o.forEach((function(t){r.addBoundaryEvent(t)})),r.deleteProperty("boundaryEvents"),wt.call(r),r}return he(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.properties.isBoundaryEventTouchingTask;return n&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",!e.hover&&(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null===e||void 0===e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(i["RectNodeModel"]);return{type:t,view:o,model:r}}var ge,ve=n("5a54"),me=function(){return me=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},me.apply(this,arguments)};function xe(t){var e=t.x,n=t.y,o=t.width,r=t.height,a=t.radius,s=t.className,l=e-o/2,d=n-r/2,h=me(me({width:10,height:10,cx:0,cy:0,rx:a||0,ry:a||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+s},t),{x:l,y:d});return Object(i["h"])("rect",me({},h))}xe.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""},function(t){t["NODE"]="node",t["CIRCLE_NODE"]="circle-node",t["POLYGON_NODE"]="polygon-node",t["RECT_NODE"]="rect-node",t["HTML_NODE"]="html-node",t["TEXT_NODE"]="text-node",t["ELLIPSE_NODE"]="ellipse-node",t["DIAMOND_NODE"]="diamond-node",t["EDGE"]="edge",t["LINE_EDGE"]="line-edge",t["POLYLINE_EDGE"]="polyline-edge",t["BEZIER_EDGE"]="bezier-edge",t["GRAPH"]="graph"}(ge||(ge={}));var be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),we=function(){return we=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},we.apply(this,arguments)},Me=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Oe=i["LogicFlowUtil"].StepDrag,Ee=function(t){function e(e){var n=t.call(this)||this;return n.updatePosition=function(t){var e=t.deltaX,i=t.deltaY,o=n.nodeModel,r=o.x,a=o.y;n.nodeModel.x=r+e/2,n.nodeModel.y=a+i/2,n.nodeModel.moveText(e/2,i/2)},n.getResize=function(t){var e=t.index,n=t.deltaX,i=t.deltaY,o=t.width,r=t.height,a=t.PCTResizeInfo,s=t.pct,l=void 0===s?1:s,d=t.freezeWidth,h=void 0!==d&&d,p=t.freezeHeight,u=void 0!==p&&p,c={width:o,height:r,deltaX:n,deltaY:i};if(a){var f=4,y=0,g=0;switch(e){case 0:g=(-1*n-i)/f;break;case 1:g=(n-i)/f;break;case 2:g=(n+i)/f;break;case 3:g=(-1*n+i)/f;break;default:break}0!==g&&(y=Math.round(g/a.ResizeBasis.basisHeight*1e5)/1e3),a.ResizePCT.widthPCT=Math.max(Math.min(a.ResizePCT.widthPCT+y,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit),a.ResizePCT.hightPCT=Math.max(Math.min(a.ResizePCT.hightPCT+y,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit);var v=Math.round(a.ResizePCT.widthPCT*a.ResizeBasis.basisWidth/100),m=Math.round(a.ResizePCT.hightPCT*a.ResizeBasis.basisHeight/100);switch(e){case 0:n=o-v,i=r-m;break;case 1:n=v-o,i=r-m;break;case 2:n=v-o,i=m-r;break;case 3:n=o-v,i=m-r;break;default:break}return c.width=v,c.height=m,c.deltaX=n/l,c.deltaY=i/l,c}switch(e){case 0:c.width=h?o:o-n*l,c.height=u?r:r-i*l;break;case 1:c.width=h?o:o+n*l,c.height=u?r:r-i*l;break;case 2:c.width=h?o:o+n*l,c.height=u?r:r+i*l;break;case 3:c.width=h?o:o-n*l,c.height=u?r:r+i*l;break;default:break}return c},n.updateEdgePointByAnchors=function(){var t=n.nodeModel,e=t.id,i=t.anchors,o=n.getNodeEdges(e);o.sourceEdges.forEach((function(t){var e=i.find((function(e){return e.id===t.sourceAnchorId}));t.updateStartPoint({x:e.x,y:e.y})})),o.targetEdges.forEach((function(t){var e=i.find((function(e){return e.id===t.targetAnchorId}));t.updateEndPoint({x:e.x,y:e.y})}))},n.updateRect=function(t){var e=t.deltaX,i=t.deltaY,o=n.nodeModel,r=o.id,a=o.x,s=o.y,l=o.width,d=o.height,h=o.radius,p=o.PCTResizeInfo,u=n.nodeModel,c=u.minWidth,f=u.minHeight,y=u.maxWidth,g=u.maxHeight,v=n.index,m=c===y,x=f===g,b=n.getResize({index:v,deltaX:e,deltaY:i,width:l,height:d,PCTResizeInfo:p,pct:1,freezeWidth:m,freezeHeight:x});if(b.width<c||b.width>y||b.height<f||b.height>g)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:m?0:b.deltaX,deltaY:x?0:b.deltaY}),n.nodeModel.width=b.width,n.nodeModel.height=b.height,n.nodeModel.setProperties({nodeSize:{width:b.width,height:b.height}});n.getNodeEdges(r);var w={x:a,y:s,width:l,height:d,radius:h},M={x:n.nodeModel.x,y:n.nodeModel.y,width:n.nodeModel.width,height:n.nodeModel.height,radius:h};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:w,afterNode:M})}},n.updateEllipse=function(t){var e=t.deltaX,i=t.deltaY,o=n.nodeModel,r=o.id,a=o.rx,s=o.ry,l=o.x,d=o.y,h=o.PCTResizeInfo,p=n.index,u=n.nodeModel,c=u.minWidth,f=u.minHeight,y=u.maxWidth,g=u.maxHeight,v=c===y,m=f===g,x=a,b=s,w=n.getResize({index:p,deltaX:e,deltaY:i,width:x,height:b,PCTResizeInfo:h,pct:.5,freezeWidth:v,freezeHeight:m});if(w.width<c/2||w.width>y/2||w.height<f/2||w.height>g/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:v?0:w.deltaX,deltaY:m?0:w.deltaY}),n.nodeModel.rx=w.width,n.nodeModel.ry=w.height,n.nodeModel.setProperties({nodeSize:{rx:w.width,ry:w.height}});n.getNodeEdges(r);var M={x:l,y:d},O={rx:w.width,ry:w.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:we(we({},M),{rx:a,ry:s}),afterNode:O})}},n.updateDiamond=function(t){var e=t.deltaX,i=t.deltaY,o=n.nodeModel,r=(o.id,o.rx),a=o.ry,s=o.x,l=o.y,d=o.PCTResizeInfo,h=n.index,p=n.nodeModel,u=p.minWidth,c=p.minHeight,f=p.maxWidth,y=p.maxHeight,g=u===f,v=c===y,m=r,x=a,b=n.getResize({index:h,deltaX:e,deltaY:i,width:m,height:x,PCTResizeInfo:d,pct:.5,freezeWidth:g,freezeHeight:v});if(b.width<u/2||b.width>f/2||b.height<c/2||b.height>y/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:g?0:b.deltaX,deltaY:v?0:b.deltaY}),n.nodeModel.rx=b.width,n.nodeModel.ry=b.height,n.nodeModel.setProperties({nodeSize:{rx:b.width,ry:b.height}});var w={x:s,y:l,rx:r,ry:a},M={rx:b.width,ry:b.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:w,afterNode:M})}},n.eventEmit=function(t){var e=t.beforeNode,i=t.afterNode,o=n.nodeModel,r=o.id,a=o.modelType,s=o.type,l=we({id:r,modelType:a,type:s},e),d=we({id:r,modelType:a,type:s},i);n.graphModel.eventCenter.emit("node:resize",{oldNodeSize:l,newNodeSize:d})},n.onDragging=function(t){var e,i=t.deltaX,o=t.deltaY,r=n.graphModel.transformModel,a=n.nodeModel.modelType;e=Me(r.fixDeltaXY(i,o),2),i=e[0],o=e[1],a===ge.RECT_NODE||a===ge.HTML_NODE?n.updateRect({deltaX:i,deltaY:o}):a===ge.ELLIPSE_NODE?n.updateEllipse({deltaX:i,deltaY:o}):a===ge.DIAMOND_NODE&&n.updateDiamond({deltaX:i,deltaY:o})},n.onDragEnd=function(){var t=n.graphModel.gridSize,e=void 0===t?1:t,i=e*Math.round(n.nodeModel.x/e),o=e*Math.round(n.nodeModel.y/e);n.nodeModel.moveTo(i,o),n.updateEdgePointByAnchors()},n.index=e.index,n.nodeModel=e.model,n.graphModel=e.graphModel,n.state={},n.dragHandler=new Oe({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:1}),n}return be(e,t),e.prototype.getNodeEdges=function(t){for(var e=this.graphModel,n=e.edges,i=[],o=[],r=0;r<n.length;r++){var a=n[r];a.sourceNodeId===t?i.push(a):n[r].targetNodeId===t&&o.push(a)}return{sourceEdges:i,targetEdges:o}},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,i=t.index,o=t.model,r=o.getControlPointStyle();return Object(ve["b"])("g",{className:"lf-resize-control-"+i},Object(ve["b"])(xe,we({className:"lf-node-control"},{x:e,y:n},r,{onMouseDown:this.dragHandler.handleMouseDown})))},e}(ve["a"]),_e=Ee,Ne=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pe=function(){return Pe=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pe.apply(this,arguments)},Se=function(t){function e(){var e=t.call(this)||this;return e.state={},e}return Ne(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,i=e.x,o=e.y,r=e.width,a=e.height,s={minX:i-r/2,minY:o-a/2,maxX:i+r/2,maxY:o+a/2},l=s.minX,d=s.minY,h=s.maxX,p=s.maxY,u=[{x:l,y:d},{x:h,y:d},{x:h,y:p},{x:l,y:p}];return u.map((function(t,i){return Object(ve["b"])(_e,Pe({index:i},t,{model:e,graphModel:n}))}))},e.prototype.getGroupSolid=function(){var t=this.props.model,e=t.x,n=t.y,i=t.width,o=t.height,r=t.getResizeOutlineStyle();return Object(ve["b"])(xe,Pe({fill:"none"},r,{x:e,y:n,width:i,height:o}))},e.prototype.render=function(){return Object(ve["b"])("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},e}(ve["a"]),Te=Se,je=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ce=function(t){function e(e,n){var i=t.call(this,e,n)||this,o=i.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return je(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.resize=function(t,e){console.log(t,e)},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},i={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:i}}else delete this.PCTResizeInfo},e}(i["RectNodeModel"]),Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return je(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return Object(i["h"])(Te,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return Object(i["h"])("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")},e}(i["RectNode"]),ke={type:"rect",view:Ae,model:Ce},Ie=ke,De=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Le=(function(t){function e(e,n){var i=t.call(this,e,n)||this,o=i.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}De(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},i={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:i}}else delete this.PCTResizeInfo}}(i["EllipseNodeModel"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}De(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return Object(i["h"])(Te,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model,n=t.graphModel.editConfigModel.isSilentMode;return Object(i["h"])("g",null,this.getResizeShape(),e.isSelected&&!n?this.getControlGroup():"")}}(i["EllipseNode"]),function(){return Le=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Le.apply(this,arguments)});function Re(t){var e=t.fillOpacity,n=void 0===e?1:e,o=t.strokeWidth,r=void 0===o?1:o,a=t.strokeOpacity,s=void 0===a?1:a,l=t.fill,d=void 0===l?"transparent":l,h=t.stroke,p=void 0===h?"#000":h,u=t.points,c=t.className,f=void 0===c?"lf-basic-shape":c,y={fill:d,fillOpacity:n,strokeWidth:r,stroke:p,strokeOpacity:s,points:"",className:f};return y.points=u.map((function(t){return t.join(",")})).join(" "),Object(i["h"])("polygon",Le({},y))}var Be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ge=function(){return Ge=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ge.apply(this,arguments)},Fe=(function(t){function e(e,n){var i=t.call(this,e,n)||this,o=i.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}Be(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},i={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:i}}else delete this.PCTResizeInfo}}(i["DiamondNodeModel"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Be(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return Object(i["h"])(Te,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.points,n=t.getNodeStyle();return Object(i["h"])("g",null,Object(i["h"])(Re,Ge({},n,{points:e})))},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return Object(i["h"])("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")}}(i["DiamondNode"]),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),ze=(function(t){function e(e,n){var i=t.call(this,e,n)||this,o=i.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}Fe(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this),n=this.graphModel.editConfigModel.isSilentMode;return n||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},i={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:e,ResizeBasis:n,ScaleLimit:i}}else delete this.PCTResizeInfo}}(i["HtmlNodeModel"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Fe(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return Object(i["h"])(Te,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return Object(i["h"])("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")}}(i["HtmlNode"]),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),We=function(){return We=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},We.apply(this,arguments)},He=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Xe=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(He(arguments[e]));return t},Ye=500,Ve=300,qe=-1e4,Ue=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGroup=!0,e.unfoldedWidth=Ye,e.unfoldedHight=Ve,e.childrenLastFoldStatus={},e}return ze(e,t),e.prototype.initNodeData=function(e){var n=this;t.prototype.initNodeData.call(this,e);var i=[];Array.isArray(e.children)&&(i=e.children),this.children=new Set(i),this.width=Ye,this.height=Ve,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=qe,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,void 0===this.properties.isFolded&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout((function(){n.isFolded&&n.foldGroup(n.isFolded)}))},e.prototype.getResizeOutlineStyle=function(){var e=t.prototype.getResizeOutlineStyle.call(this);return e.stroke="none",e},e.prototype.foldGroup=function(t){var e=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var n=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach((function(i){var o=e.graphModel.getElement(i),r=o.isFolded;if(o.isGroup&&!o.isFolded&&o.foldGroup(t),o.isGroup&&!t){var a=e.childrenLastFoldStatus[i];void 0!==a&&a!==o.isFolded&&o.foldGroup(a)}e.childrenLastFoldStatus[i]=r,o.visible=!t,n=n.concat(o.incoming.edges.concat(o.outgoing.edges))})),this.foldEdge(t,n)}},e.prototype.getAnchorStyle=function(e){var n=t.prototype.getAnchorStyle.call(this,e);return n.stroke="transparent",n.fill="transparent",n.hover.fill="transparent",n.hover.stroke="transparent",n},e.prototype.foldEdge=function(t,e){var n=this;e.forEach((function(e,i){var o=e.id,r=e.sourceNodeId,a=e.targetNodeId,s=e.startPoint,l=e.endPoint,d=e.type,h=e.text,p=e.getProperties(),u={id:o+"__"+i,sourceNodeId:r,targetNodeId:a,startPoint:s,endPoint:l,type:d,properties:p,text:null===h||void 0===h?void 0:h.value};e.virtual&&n.graphModel.deleteEdgeById(e.id);var c=n.graphModel.group.getNodeGroup(a);c||(c=n.graphModel.getNodeModelById(a));var f=n.graphModel.group.getNodeGroup(r);f||(f=n.graphModel.getNodeModelById(r)),t&&!1!==e.visible&&(n.children.has(r)||n.id===r?(u.startPoint=void 0,u.sourceNodeId=n.id):(u.endPoint=void 0,u.targetNodeId=n.id),c.id===n.id&&f.id===n.id||n.createVirtualEdge(u),e.visible=!1),t||!1!==e.visible||(c&&c.isGroup&&c.isFolded?(u.targetNodeId=c.id,u.endPoint=void 0,n.createVirtualEdge(u)):f&&f.isGroup&&f.isFolded?(u.sourceNodeId=f.id,u.startPoint=void 0,n.createVirtualEdge(u)):e.visible=!0)}))},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var e=this.graphModel.addEdge(t);e.virtual=!0,e.text.editable=!1,e.isFoldedEdge=!0},e.prototype.isInRange=function(t){var e=t.x1,n=t.y1,i=t.x2,o=t.y2;return e>=this.x-this.width/2&&i<=this.x+this.width/2&&n>=this.y-this.height/2&&o<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var e=t.x1,n=t.y1,i=t.x2,o=t.y2;return{x:e>=this.x-this.width/2&&i<=this.x+this.width/2,y:n>=this.y-this.height/2&&o<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var e=this,n=t.prototype.getData.call(this);n.children=[],this.children.forEach((function(t){var i=e.graphModel.getNodeModelById(t);i&&!i.virtual&&n.children.push(t)}));var i=n.properties;return delete i.groupAddable,delete i.isFolded,n},e.prototype.getHistoryData=function(){var e=t.prototype.getData.call(this);e.children=Xe(this.children),e.isGroup=!0;var n=e.properties;return delete n.groupAddable,n.isFolded&&(e.x=e.x+this.unfoldedWidth/2-this.foldedWidth/2,e.y=e.y+this.unfoldedHight/2-this.foldedHeight/2),e},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.toBack=function(){this.zIndex--},e}(Ie.model),Ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ze(e,t),e.prototype.getControlGroup=function(){var e=this.props.model,n=e.resizable,i=e.properties;return n&&!i.isFolded?t.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,e=t.width,n=t.height,o=t.x,r=t.y,a=t.radius,s=t.properties;if(!s.groupAddable)return null;var l=this.props.model.getNodeStyle().strokeWidth,d=this.props.model.getAddableOutlineStyle(),h=e+l+8,p=n+l+8;return Object(i["h"])("rect",We(We({},d),{width:h,height:p,x:o-h/2,y:r-p/2,rx:a,ry:a}))},e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x-t.width/2+5,n=t.y-t.height/2+5;if(!t.foldable)return null;var o=Object(i["h"])("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M "+(e+3)+","+(n+6)+" "+(e+11)+","+(n+6)+" M"+(e+7)+","+(n+2)+" "+(e+7)+","+(n+10):"M "+(e+3)+","+(n+6)+" "+(e+11)+","+(n+6)+" "});return Object(i["h"])("g",{},[Object(i["h"])("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return Object(i["h"])("g",{},[this.getAddableShape(),t.prototype.getResizeShape.call(this),this.getFoldIcon()])},e}(Ie.view),Je={type:"group",view:Ze,model:Ue},Ke=function(){return Ke=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ke.apply(this,arguments)},Qe=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n},$e=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},tn=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($e(arguments[e]));return t},en=-1e3,nn=-1e4,on=(function(){function t(t){var e=this,n=t.lf;this.topGroupZIndex=nn,this.nodeGroupMap=new Map,this.graphRendered=function(t){t&&t.nodes&&(t.nodes.forEach((function(t){t.children&&t.children.forEach((function(n){e.nodeGroupMap.set(n,t.id)}))})),e.checkAndCorrectTopGroupZIndex(t.nodes))},this.appendNodeToGroup=function(t){var n=t.data,i=e.nodeGroupMap.get(n.id);if(i){var o=e.lf.getNodeModelById(i);o.removeChild(n.id),e.nodeGroupMap.delete(n.id),o.setAllowAppendChild(!1)}var r=e.lf.getNodeModelById(n.id),a=r.getBounds(),s=e.getGroup(a,n);if(r.isGroup&&(n.children.forEach((function(t){e.nodeGroupMap.set(t,n.id)})),e.checkAndCorrectTopGroupZIndex([n]),e.nodeSelected({data:n,isSelected:!1,isMultiple:!1})),s){var l=s.isAllowAppendIn(n);l?(s.addChild(n.id),e.nodeGroupMap.set(n.id,s.id),s.setAllowAppendChild(!1)):e.lf.emit("group:not-allowed",{group:s.getData(),node:n})}},this.deleteGroupChild=function(t){var n=t.data;n.children&&n.children.forEach((function(t){e.nodeGroupMap.delete(t),e.lf.deleteNode(t)}));var i=e.nodeGroupMap.get(n.id);if(i){var o=e.lf.getNodeModelById(i);o.removeChild(n.id),e.nodeGroupMap.delete(n.id)}},this.setActiveGroup=function(t){var n=t.data,i=e.lf.getNodeModelById(n.id),o=i.getBounds(),r=e.getGroup(o,n);if(e.activeGroup&&e.activeGroup.setAllowAppendChild(!1),r&&(!i.isGroup||r.id!==n.id)){var a=r.isAllowAppendIn(n);a&&(e.activeGroup=r,e.activeGroup.setAllowAppendChild(!0))}},this.findNodeAndChildMaxZIndex=function(t){var n=nn;return t.isGroup&&(n=t.zIndex>n?t.zIndex:n),t.children&&t.children.forEach((function(t){"object"===typeof t&&(t=t.id);var i=e.lf.getNodeModelById(t);if(i.isGroup){var o=e.findNodeAndChildMaxZIndex(i);n=o>n?o:n}})),n},this.checkAndCorrectTopGroupZIndex=function(t){var n=nn;if(t.forEach((function(t){var i=e.lf.getNodeModelById(t.id),o=e.findNodeAndChildMaxZIndex(i);o>n&&(n=o)})),!(e.topGroupZIndex>=n)){for(var i=e.lf.graphModel.nodes.filter((function(t){return t.isGroup})),o=e.topGroupZIndex,r=0;r<i.length;r++){var a=i[r];a.zIndex>o&&(o=a.zIndex)}e.topGroupZIndex=o}},this.nodeSelected=function(t){var n=t.data,i=t.isMultiple,o=t.isSelected,r=e.lf.getNodeModelById(n.id);if(e.toFrontGroup(r),e.topGroupZIndex>en){e.topGroupZIndex=nn;for(var a=e.lf.graphModel.nodes.filter((function(t){return t.isGroup})).sort((function(t,e){return t.zIndex-e.zIndex})),s=0,l=0;l<a.length;l++){var d=a[l];d.zIndex!==s&&(e.topGroupZIndex++,s=d.zIndex),d.setZIndex(e.topGroupZIndex)}}if(i&&o)if(r.isGroup)r.children.forEach((function(t){var n=e.lf.graphModel.getElement(t);n.setSelected(!1)}));else{var h=e.nodeGroupMap.get(n.id);if(h){var p=e.lf.getNodeModelById(h);p.isSelected&&r.setSelected(!1)}}},this.toFrontGroup=function(t){t&&t.isGroup&&(e.topGroupZIndex++,t.setZIndex(e.topGroupZIndex),t.children&&t.children.forEach((function(t){var n=e.lf.getNodeModelById(t);e.toFrontGroup(n)})))},n.register(Je),this.lf=n,n.graphModel.addNodeMoveRules((function(t,i,o){if(t.isGroup){var r=e.getNodeAllChild(t);return n.graphModel.moveNodes(r,i,o,!0),!0}var a=n.getNodeModelById(e.nodeGroupMap.get(t.id));if(a&&a.isRestrict){var s=t.getBounds(),l=s.x1,d=s.y1,h=s.x2,p=s.y2,u=a.isAllowMoveTo({x1:l+i,y1:d+o,x2:h+i,y2:p+o});return u}return!0})),n.graphModel.group=this,n.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),n.on("node:delete",this.deleteGroupChild),n.on("node:dnd-drag,node:drag",this.setActiveGroup),n.on("node:click",this.nodeSelected),n.on("graph:rendered",this.graphRendered),n.addElements=function(t,i){for(var o=t.nodes,r=t.edges,a={},s={nodes:[],edges:[]},l=[],d=0;d<o.length;d++){var h=o[d],p=h.id,u=h.children,c=Qe(h,["children"]),f=n.addNode(c);if(!f)return{nodes:[],edges:[]};p&&(a[p]=f.id),s.nodes.push(f);var y=e.createAllChildNodes(a,u,f,i).edgesArray;l.push.apply(l,tn(y))}return l.forEach((function(t){e.createEdgeModel(t,a,i)})),r.forEach((function(t){var n=e.createEdgeModel(t,a,0);s.edges.push(n)})),s}}t.prototype.createAllChildNodes=function(t,e,n,o){var r=this,a=this.lf,s=[],l=[],d=[];null===e||void 0===e||e.forEach((function(e){var h=a.getNodeModelById(e),p=h.x,u=h.y,c=h.properties,f=h.type,y=h.text,g=h.rotate,v=h.children,m=(h.incoming,h.outgoing,i["EventType"].NODE_GROUP_COPY||"node:group-copy-add"),x=a.addNode({x:p+o,y:u+o,properties:c,type:f,text:Ke(Ke({},y),{x:y.x+o,y:y.y+o}),rotate:g},m);if(n.addChild(x.id),t[e]=x.id,d.push(x),h.incoming.edges.forEach((function(t){l.push(t)})),h.outgoing.edges.forEach((function(t){l.push(t)})),v instanceof Set){var b=r.createAllChildNodes(t,v,x,o),w=b.nodesArray,M=b.edgesArray;d.push.apply(d,tn(w)),s.push.apply(s,tn(M))}}));var h=l.filter((function(e){return t[e.sourceNodeId]&&t[e.targetNodeId]})),p=h.map((function(t){return t.getData()}));return{nodesArray:d,edgesArray:s.concat(p)}},t.prototype.createEdgeModel=function(t,e,n){var i=this.lf,o=t.sourceNodeId,r=t.targetNodeId;e[o]&&(o=e[o]),e[r]&&(r=e[r]);var a=t.type,s=t.startPoint,l=t.endPoint,d=t.pointsList,h=t.text,p=(Qe(t,["type","startPoint","endPoint","pointsList","text"]),{x:s.x+n,y:s.y+n}),u={x:l.x+n,y:l.y+n},c=[];d&&d.length>0&&(c=d.map((function(t){return t.x+=n,t.y+=n,t})));var f=h;h&&"string"!==typeof h&&(f.x=h.x+n,f.y=h.y+n);var y=i.graphModel.addEdge({type:a,startPoint:p,endPoint:u,sourceNodeId:o,targetNodeId:r,pointsList:c,text:f});return y},t.prototype.getNodeAllChild=function(t){var e=this,n=[];return t.children&&t.children.forEach((function(t){n.push(t);var i=e.lf.getNodeModelById(t);i.isGroup&&(n=n.concat(e.getNodeAllChild(i)))})),n},t.prototype.getGroup=function(t,e){var n=this.lf.graphModel.nodes,i=n.filter((function(n){return n.isGroup&&n.isInRange(t)&&n.id!==e.id}));if(0!==i.length){if(1===i.length)return i[0];for(var o=i[i.length-1],r=i.length-2;r>=0;r--)i[r].zIndex>o.zIndex&&(o=i[r]);return o}},t.prototype.getNodeGroup=function(t){var e=this.nodeGroupMap.get(t);if(e)return this.lf.getNodeModelById(e)},t.pluginName="group"}(),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),rn=function(){return rn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rn.apply(this,arguments)};function an(){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return on(e,t),e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.properties,s=t.foldable,l=t.x-t.width/2+5,d=t.y-t.height/2+5;if(!s)return null;var h=Object(i["h"])("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:a.isFolded?"M "+(l+3)+","+(d+6)+" "+(l+11)+","+(d+6)+" M"+(l+7)+","+(d+2)+" "+(l+7)+","+(d+10):"M "+(l+3)+","+(d+6)+" "+(l+11)+","+(d+6)+" "});return Object(i["h"])("g",{},[Object(i["h"])("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:e-o/2+5,y:n-r/2+5,onClick:function(e){e.stopPropagation(),t.foldGroup(!a.isFolded)}}),h])},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,r=t.height,a=t.getNodeStyle(),s=rn(rn({},a),{x:e-o/2,y:n-r/2,width:o,height:r,stroke:"black",strokeWidth:2,strokeDasharray:"0 0"});return Object(i["h"])("g",{},[Object(i["h"])("rect",rn({},s)),this.getFoldIcon()])},e}(Je.view),e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return on(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.foldable=!0,this.resizable=!0,this.width=400,this.height=200,this.resetWidthHeight(),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.resetWidthHeight=function(){var t,e,n=null===(t=this.properties.iniProp)||void 0===t?void 0:t.width,i=null===(e=this.properties.iniProp)||void 0===e?void 0:e.height;n&&(this.width=n),i&&(this.height=i)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this);e.stroke="#989891",e.strokeWidth=1,e.strokeDasharray="3 3",this.isSelected&&(e.stroke="rgb(124, 15, 255)");var n=this.properties.isBoundaryEventTouchingTask;return n&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.addChild=function(e){var n=this.graphModel.getElement(e);n.setProperties({parent:this.id}),t.prototype.addChild.call(this,e)},e.prototype.getAnchorStyle=function(){var e=t.prototype.getAnchorStyle.call(this,{});return e.stroke="#000",e.fill="#fff",e.hover.stroke="transparent",e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",!e.hover&&(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null===e||void 0===e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(Je.model);return{type:"bpmn:subProcess",view:t,model:e}}var sn=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ln(t){function e(e){var n,o,r=e.data,a=r.type,s=r.id;if("bpmn:boundaryEvent"===a){var l=t.graphModel.nodes;try{for(var d=sn(l),h=d.next();!h.done;h=d.next()){var p=h.value;if(p.isTaskNode){var u=null;if(null!==(u=i(p,r))){var c=t.graphModel.getNodeModelById(s),f=t.graphModel.getNodeModelById(u),y=c.properties.attachedToRef;return y&&y!==u&&t.graphModel.getNodeModelById(y).deleteBoundaryEvent(s),void f.addBoundaryEvent(s)}}}}catch(g){n={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}}function n(e){var n,o,r=e.data,a=r.type;if("bpmn:boundaryEvent"===a){var s=t.graphModel.nodes;try{for(var l=sn(s),d=l.next();!d.done;d=l.next()){var h=d.value;h.isTaskNode&&(i(h,r)?h.setTouching(!0):h.setTouching(!1))}}catch(p){n={error:p}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}}function i(t,e){var n=5,i=t.x,o=t.y,r=t.width,a=t.height,s=t.id,l={minX:i-r/2,maxX:i+r/2,minY:o-a/2,maxY:o+a/2},d=e.x,h=e.y,p={minX:l.minX-n,maxX:l.maxX+n,minY:l.minY-n,maxY:l.maxY+n},u={minX:l.minX+n,maxX:l.maxX-n,minY:l.minY+n,maxY:l.maxY-n};return d>p.minX&&d<p.maxX&&h>p.minY&&h<p.maxY&&!(d>u.minX&&d<u.maxX&&h>u.minY&&h<u.maxY)?s:null}t.on("node:drag,node:dnd-drag",n),t.on("node:drop,node:dnd-add",e),t.graphModel.addNodeMoveRules((function(e,n,i){if(e.isTaskNode){var o=e.boundaryEvents;return t.graphModel.moveNodes(o,n,i,!0),!0}return!0}))}function dn(t){var e=ye("bpmn:serviceTask",ee),n=ye("bpmn:userTask",ne);t.register(e),t.register(n),t.register(an()),ln(t)}var hn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pn=function(){return pn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pn.apply(this,arguments)};function un(t){var e=function(e){function n(n,i){var o=this;n.id||(n.id="Flow_"+Et());var r=pn(pn(pn({},t||{}),n.properties),{isDefaultFlow:!1});return n.properties=r,o=e.call(this,n,i)||this,o}return hn(n,e),n.extendKey="SequenceFlowModel",n}(i["PolylineEdgeModel"]),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hn(e,t),e.prototype.getStartArrow=function(){var t=this.props.model,e=t.properties.isDefaultFlow;return e?Object(i["h"])("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):Object(i["h"])("path",{d:""})},e.extendKey="SequenceFlowEdge",e}(i["PolylineEdge"]);return{type:"bpmn:sequenceFlow",view:n,model:e}}var cn=un();function fn(t){t.register(cn)}var yn=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},gn=[{nodes:["startEvent","intermediateCatchEvent","boundaryEvent"],definition:[{type:"bpmn:timerEventDefinition",icon:Kt,properties:{definitionType:"bpmn:timerEventDefinition",timerValue:"",timerType:""}}]}];function vn(t){function e(e){function n(e,n){return e.forEach((function(e){(null===t||void 0===t?void 0:t[e])||(t[e]=new Map);var i=null===t||void 0===t?void 0:t[e];n.forEach((function(t){i.set(t.type,t)}))})),t}e.forEach((function(t){n(t.nodes,t.definition)}))}return function(){return[t,e]}}(function(){function t(t){var e=t.lf;e.definition={},e.useDefinition=vn(e.definition);var n=yn(e.useDefinition(),2),i=(n[0],n[1]);i(gn),Jt(e),de(e),fn(e),dn(e),e.setDefaultEdgeType("bpmn:sequenceFlow")}t.pluginName="BpmnElementsPlugin"})();var mn=n("adf8"),xn={width:40,height:40},bn={width:40,height:40},wn={width:100,height:80},Mn={width:100,height:80},On={width:100,height:80},En={width:100,height:80},_n={width:100,height:80},Nn={width:100,height:80},Pn={width:100,height:80},Sn={width:100,height:80},Tn=function(){};Tn.ObjTree=function(){return this},Tn.ObjTree.VERSION="0.23",Tn.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',Tn.ObjTree.prototype.attr_prefix="-",Tn.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,i=n.parseFromString(t,"application/xml");if(!i)return;e=i.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e){var o=this.parseDOM(e);return o}},Tn.ObjTree.prototype.parseHTTP=function(t,e,n){var i,o={};for(var r in e)o[r]=e[r];if(o.method||("undefined"===typeof o.postBody&&"undefined"===typeof o.postbody&&"undefined"===typeof o.parameters?o.method="get":o.method="post"),n){o.asynchronous=!0;var a=this,s=n,l=o.onComplete;o.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else o.asynchronous=!1;if("undefined"!==typeof HTTP&&HTTP.Request){o.uri=t;var d=new HTTP.Request(o);d&&(i=d.transport)}else if("undefined"!==typeof Ajax&&Ajax.Request){d=new Ajax.Request(t,o);d&&(i=d.transport)}return n?i:i&&i.responseXML&&i.responseXML.documentElement?this.parseDOM(i.responseXML.documentElement):void 0},Tn.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var i={};i[t.nodeName]=n,n=i}return n}},Tn.ObjTree.prototype.parseElement=function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType||8===t.nodeType){var e=t.nodeValue.match(/[^\x00-\x20]/);if(null==e)return;return t.nodeValue}var n=null,i={};if(t.attributes&&t.attributes.length){n={};for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o].nodeName;if("string"===typeof r){var a=t.attributes[o].nodeValue;try{a=JSON.parse(t.attributes[o].nodeValue.replace(/'/g,'"'))}catch(d){a=t.attributes[o].nodeValue}null!==a&&void 0!==a&&(r=this.attr_prefix+r,"undefined"===typeof i[r]&&(i[r]=0),i[r]++,this.addNode(n,r,i[r],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(o=0;o<t.childNodes.length&&s;o++){var l=t.childNodes[o].nodeType;3!==l&&4!==l&&8!==l&&(s=!1)}if(s){n||(n="");for(o=0;o<t.childNodes.length;o++)n+=t.childNodes[o].nodeValue}else{n||(n={});for(o=0;o<t.childNodes.length;o++){r=t.childNodes[o].nodeName;if("string"===typeof r){a=this.parseElement(t.childNodes[o]);a&&("undefined"===typeof i[r]&&(i[r]=0),i[r]++,this.addNode(n,r,i[r],a))}}}}else null===n&&(n={});return n}},Tn.ObjTree.prototype.addNode=function(t,e,n,i){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=i):1===n?t[e]=i:2===n?t[e]=[t[e],i]:t[e][t[e].length]=i},Tn.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},Tn.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],i=[];for(var o in e)if(null===e||void 0===e?void 0:e.hasOwnProperty(o)){var r=e[o];o.charAt(0)!==this.attr_prefix?"undefined"===typeof r||null==r?n[n.length]="<"+o+" />":"object"===typeof r&&r.constructor===Array?n[n.length]=this.array_to_xml(o,r):n[n.length]="object"===typeof r?this.hash_to_xml(o,r):this.scalar_to_xml(o,r):i[i.length]=" "+o.substring(1)+'="'+this.xml_escape(r)+'"'}var a=i.join(""),s=n.join("");return"undefined"===typeof t||null==t||(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s},Tn.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],i=0;i<e.length;i++){var o=e[i];"undefined"===typeof o||null==o?n[n.length]="<"+t+" />":"object"===typeof o&&o.constructor===Array?n[n.length]=this.array_to_xml(t,o):n[n.length]="object"===typeof o?this.hash_to_xml(t,o):this.scalar_to_xml(t,o)}return n.join("")},Tn.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"===t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},Tn.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var jn=function(t){return(new Tn.ObjTree).parseXML(t)};function Cn(t){return Object.prototype.toString.call(t)}function An(t){return"  ".repeat(t)}function kn(t){return"[object Object]"===Cn(t)?Object.keys(t).reduce((function(e,n){var i=n;return"-"===n.charAt(0)&&(i=n.substring(1)),e[i]=kn(t[n]),e}),{}):Array.isArray(t)?t.map((function(t){return kn(t)})):t}function In(t){var e=t;try{"string"!==typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(kn(t)).replace(/"/g,"'")}return e}var Dn="\t\n";function Ln(t,e,n){var i=An(n),o="",r=Dn+i;if("-json"===e)return"";if("#text"===e)return r+t;if("#cdata-section"===e)return r+"<![CDATA["+t+"]]>";if("#comment"===e)return r+"\x3c!--"+t+"--\x3e";if("-"===(""+e).charAt(0))return" "+e.substring(1)+'="'+In(t)+'"';if(Array.isArray(t))o+=t.map((function(t){return Ln(t,e,n+1)})).join("");else if("[object Object]"===Cn(t)){var a=Object.keys(t),s="",l=t["-json"]?Dn+An(n+1)+t["-json"]:"";o+=(0===n?"":r)+"<"+e,a.forEach((function(e){"-"===e.charAt(0)?s+=Ln(t[e],e,n+1):l+=Ln(t[e],e,n+1)})),o+=s+(""!==l?">"+l+r+"</"+e+">":" />")}else o+=r+"<"+e+">"+t.toString()+"</"+e+">";return o}function Rn(t){var e="";for(var n in t)e+=Ln(t[n],n,0);return e}var Bn,Gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fn=function(){return Fn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fn.apply(this,arguments)},zn=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n},Wn=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hn=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Xn=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hn(arguments[e]));return t};(function(t){t["START"]="bpmn:startEvent",t["END"]="bpmn:endEvent",t["INTERMEDIATE_CATCH"]="bpmn:intermediateCatchEvent",t["INTERMEDIATE_THROW"]="bpmn:intermediateThrowEvent",t["BOUNDARY"]="bpmn:boundaryEvent",t["PARALLEL_GATEWAY"]="bpmn:parallelGateway",t["INCLUSIVE_GATEWAY"]="bpmn:inclusiveGateway",t["EXCLUSIVE_GATEWAY"]="bpmn:exclusiveGateway",t["USER"]="bpmn:userTask",t["SYSTEM"]="bpmn:serviceTask",t["FLOW"]="bpmn:sequenceFlow",t["SUBPROCESS"]="bpmn:subProcess"})(Bn||(Bn={}));var Yn=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],Vn=["properties","startPoint","endPoint","pointsList"],qn={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},Un=function(t,e){var n=Object.keys(e||{});return n.forEach((function(n){if(t[n]){var i=e[n],o=i.in,r=i.out;o&&(t[n].in=o),r&&(t[n].out=r)}else t[n]=e[n]})),t},Zn={"bpmn:startEvent":{out:function(t){var e,n,i=t.properties;return(null===(n=null===(e=Zn[i.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateCatchEvent":{out:function(t){var e,n,i=t.properties;return(null===(n=null===(e=Zn[i.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateThrowEvent":{out:function(t){var e,n,i=t.properties;return(null===(n=null===(e=Zn[i.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:boundaryEvent":{out:function(t){var e,n,i=t.properties;return(null===(n=null===(e=Zn[i.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:sequenceFlow":{out:function(t){var e=t.properties,n=e.expressionType,i=e.condition;return i?"cdata"===n?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+i+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+i+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(t){var e=t.properties,n=e.timerType,i=e.timerValue,o=e.definitionId,r=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+i+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+o+'"'+(n&&i?">"+r()+"</bpmn:timerEventDefinition>":"/>")}},in:function(t,e){var n,i,o,r,a=t,s=e["-id"],l="",d="";try{for(var h=Wn(Object.keys(e)),p=h.next();!p.done;p=h.next()){var u=p.value;u.includes("bpmn:")&&(o=Hn(u.split(":"),2),l=o[1],d=null===(r=e[u])||void 0===r?void 0:r["#text"])}}catch(c){n={error:c}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":d}}},"bpmn:conditionExpression":{in:function(t,e){var n,i="",o="";return e["#cdata-section"]?(o="cdata",i=(null===(n=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))||void 0===n?void 0:n[1])||""):e["#text"]&&(o="normal",i=e["#text"]),{"-condition":i,"-expressionType":o}}}};function Jn(t){var e=null!==t&&void 0!==t?t:{},n=e.retainedAttrsFields,i=e.excludeFields,o=e.transformer,r=new Set(Xn(Vn,n||[])),a={in:new Set(Xn(qn.in,(null===i||void 0===i?void 0:i.in)||[])),out:new Set(Xn(qn.out,(null===i||void 0===i?void 0:i.out)||[]))};return Zn=Un(Zn,o),function(t){var e=t.nodes,n=t.edges;function i(t,o){var s,l,d;if(1!==(null===t||void 0===t?void 0:t.flag)){var h;if((h=Zn[t.type])&&h.out){var p=h.out(t),u=Object.keys(p);u.length>0&&u.forEach((function(e){t[e]=p[e]}))}(null===t||void 0===t?void 0:t.children)&&(t.children=t.children.map((function(t){var i=e.find((function(e){return e.id===t}))||n.find((function(e){return e.id===t}));return i||{}})));var c={};if("string"===typeof t)return t;if(Array.isArray(t))return t.map((function(t){return i(t,"")})).filter((function(t){return void 0!=t}));try{for(var f=Wn(Object.entries(t)),y=f.next();!y.done;y=f.next()){var g=Hn(y.value,2),v=g[0],m=g[1];if(1===(null===(d=m)||void 0===d?void 0:d["flag"]))return;var x=[o,v].filter((function(t){return t})).join(".");a.out.has(x)||("object"!==typeof m?0===v.indexOf("-")||["#text","#cdata-section","#comment"].includes(v)?c[v]=m:c["-"+v]=m:r.has(x)?c["-"+v]=i(m,x):c[v]=i(m,x))}}catch(b){s={error:b}}finally{try{y&&!y.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return c}}return i(t,"")}}function Kn(t){var e,n,i={};try{for(var o=Wn(Object.entries(t)),r=o.next();!r.done;r=o.next()){var a=Hn(r.value,2),s=a[0],l=a[1];0===s.indexOf("-")?i[s.substring(1)]=kn(l):"string"===typeof l?i[s]=l:"[object Object]"===Object.prototype.toString.call(l)?i[s]=Kn(l):Array.isArray(l)?i[s]=l.map((function(t){return Kn(t)})):i[s]=l}}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function Qn(t,e,n){var i,o=new Map,r=Jn(n)(e);r.nodes.forEach((function(e){var n=e["-id"],i=e["-type"],r=e.text,a=e.children,s=zn(e,["-id","-type","text","children"]),l={"-id":n};(null===r||void 0===r?void 0:r["-value"])&&(l["-name"]=r["-value"]),s["-json"]&&(l["-json"]=s["-json"]),s["-properties"]&&Object.assign(l,s["-properties"]),a&&(l.children=a),t[i]||(t[i]=[]),t[i].push(l),o.set(n,l)}));var a=r.edges.map((function(t){var e=t["-id"],n=(t["-type"],t["-sourceNodeId"]),i=t["-targetNodeId"],r=t.text,a=zn(t,["-id","-type","-sourceNodeId","-targetNodeId","text"]),s=o.get(i);s["bpmn:incoming"]||(s["bpmn:incoming"]=[]),s["bpmn:incoming"].push(e);var l={"-id":e,"-sourceRef":n,"-targetRef":i};return(null===r||void 0===r?void 0:r["-value"])&&(l["-name"]=r["-value"]),a["-json"]&&(l["-json"]=a["-json"]),a["-properties"]&&Object.assign(l,a["-properties"]),l}));return e.edges.forEach((function(t){var e=t.sourceNodeId,n=t.id,i=o.get(e);i["bpmn:outgoing"]||(i["bpmn:outgoing"]=[]),i["bpmn:outgoing"].push(n)})),null===(i=t["bpmn:subProcess"])||void 0===i||i.forEach((function(e){var n={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},i=[];e.children.forEach((function(i){var r,a=o.get(i["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach((function(t){a[t]&&a[t].forEach((function(e){n[t].add(e)}))}));var s=null===(r=t[i["-type"]])||void 0===r?void 0:r.findIndex((function(t){return t["-id"]===i["-id"]}));s>=0&&t[i["-type"]].splice(s,1),o.delete(i["-id"]),e[i["-type"]]||(e[i["-type"]]=[]),e[i["-type"]].push(a)}));var r=n["bpmn:incoming"],s=n["bpmn:outgoing"];s.forEach((function(t){r.has(t)&&i.push(t)}));for(var l,d=function(t){var n=a.findIndex((function(e){return e["-id"]===i[t]}));n>=0?(e["bpmn:sequenceFlow"]||(e["bpmn:sequenceFlow"]=[]),e["bpmn:sequenceFlow"].push(a[n]),a.splice(n,1)):t++,l=t},h=0;h<i.length;)d(h),h=l;delete e.children})),t[Bn.FLOW]=a,t}function $n(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,i=t.pointsList.map((function(t){var e=t.x,n=t.y;return{"-x":e,"-y":n}})),o={"-id":n+"_di","-bpmnElement":n,"di:waypoint":i};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(o["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),o})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,i=100,o=80,r=t.x,a=t.y,s=ai.shapeConfigMap.get(t.type);s&&(i=s.width,o=s.height),r-=i/2,a-=o/2;var l={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":r,"-y":a,"-width":i,"-height":o}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}var ti=["bpmn:incoming","bpmn:outgoing"];function ei(t,e){var n=[],i=[],o=new Map,r=null!==e&&void 0!==e?e:{},a=r.transformer,s=r.excludeFields,l={in:new Set(Xn(qn.in,(null===s||void 0===s?void 0:s.in)||[])),out:new Set(Xn(qn.out,(null===s||void 0===s?void 0:s.out)||[]))};Zn=Un(Zn,a);var d=t["bpmn:definitions"];if(d){var h=d["bpmn:process"];(function(t,e){e.forEach((function(e){try{Object.keys(t).forEach((function(t){try{e(t)}catch(n){console.error(n)}}))}catch(n){console.error(n)}}))})(h,[function(t){function e(t){t["-children"]||(t["-children"]=[]),Object.keys(t).forEach((function(e){var n;0!==e.indexOf("bpmn:")||ti.includes(e)||(h[e]||(h[e]=[]),!Array.isArray(h[e])&&(h[e]=[h[e]]),Array.isArray(t[e])?(n=h[e]).push.apply(n,Xn(t[e])):h[e].push(t[e]),Array.isArray(t[e])?t[e].forEach((function(n){!e.includes("Flow")&&t["-children"].push(n["-id"])})):!e.includes("Flow")&&t["-children"].push(t[e]["-id"]),delete t[e])}))}if("bpmn:subProcess"===t){var n=h[t];Array.isArray(n)?n.forEach((function(n){"bpmn:subProcess"===t&&e(n)})):e(n)}},function(t){var e=function(t){Object.keys(t).forEach((function(e){var i,o;if(e.includes("bpmn:")){var r={};Zn[e]&&Zn[e].in?(r=null===(o=(i=Zn[e]).in)||void 0===o?void 0:o.call(i,e,mn["a"].cloneDeep(t[e])),delete t[e]):n(t[e]);var a=void 0;(a=Reflect.ownKeys(r)).length>0&&a.forEach((function(e){Reflect.set(t,e,r[e])}))}}))};function n(t){o.set(t["-id"],t),Array.isArray(t)?t.forEach((function(t){n(t)})):"object"===typeof t&&e(t)}n(h[t])},function(t){if(0===t.indexOf("bpmn:")){var e=h[t];if("bpmn:sequenceFlow"===t){var r=d["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];i=oi(e,r)}else{var a=d["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if("bpmn:boundaryEvent"===t){var s=h[t],l=function(t){var e=t["-attachedToRef"],n=o.get(e);n["-boundaryEvents"]||(n["-boundaryEvents"]=[]),n["-boundaryEvents"].push(t["-id"])};Array.isArray(s)?s.forEach((function(t){l(t)})):l(s)}n=n.concat(ni(e,a,t))}}}])}var p=function(t,e,n){Object.keys(t).forEach((function(i){var o=n?n+"."+i:i;e.has(o)?delete t[i]:"object"===typeof t[i]&&p(t[i],e,o)}))};return n.forEach((function(t){var n,i;if(null===(n=null===e||void 0===e?void 0:e.mapping)||void 0===n?void 0:n.in){var o=null===(i=null===e||void 0===e?void 0:e.mapping)||void 0===i?void 0:i.in,r=t.type;o[r]&&(t.type=o[r])}p(t,l.in,"")})),i.forEach((function(t){var n,i;if(null===(n=null===e||void 0===e?void 0:e.mapping)||void 0===n?void 0:n.in){var o=null===(i=null===e||void 0===e?void 0:e.mapping)||void 0===i?void 0:i.in,r=t.type;o[r]&&(t.type=o[r])}p(t,l.in,"")})),{nodes:n,edges:i}}function ni(t,e,n){var i=[];if(Array.isArray(t))t.forEach((function(t){var o;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var r=ii(o,n,t);i.push(r)}));else{var o=void 0;o=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e;var r=ii(o,n,t);i.push(r)}return i}function ii(t,e,n){var i=Number(t["dc:Bounds"]["-x"]),o=Number(t["dc:Bounds"]["-y"]),r=n["-children"],a=n["-name"],s=ai.shapeConfigMap.get(e);s&&(i+=s.width/2,o+=s.height/2);var l,d={};if(Object.entries(n).forEach((function(t){var e=Hn(t,2),n=e[0],i=e[1];Yn.includes(n)||(d[n]=i)})),d=Kn(d),a&&(l={x:i,y:o,value:a},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var h=t["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(h["-x"])+Number(h["-width"])/2,l.y=Number(h["-y"])+Number(h["-height"])/2}var p={id:t["-bpmnElement"],type:e,x:i,y:o,properties:d};return r&&(p.children=r),l&&(p.text=l),p}function oi(t,e){var n=[];if(Array.isArray(t))t.forEach((function(t){var i;i=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(ri(i,t))}));else{var i=void 0;i=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n.push(ri(i,t))}return n}function ri(t,e){var n,i=e["-name"];if(i){var o=t["bpmndi:BPMNLabel"]["dc:Bounds"],r=0;i.split("\n").forEach((function(t){r<t.length&&(r=t.length)})),n={value:i,x:Number(o["-x"])+10*r/2,y:Number(o["-y"])+7}}var a={};Object.entries(e).forEach((function(t){var e=Hn(t,2),n=e[0],i=e[1];Yn.includes(n)||(a[n]=i)})),a=Kn(a);var s=t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),l={id:e["-id"],type:Bn.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return n&&(l.text=n),l}var ai=function(){function t(t){var e=this,n=t.lf;this.adapterOut=function(t,n){var i,o,r=Fn({},e.processAttributes);Qn(r,t,n);var a={"-id":"BPMNPlane_1","-bpmnElement":r["-id"]};$n(a,t);var s=e.definitionAttributes;s["bpmn:process"]=r,s["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":a};var l={"bpmn:definitions":s};if(null===(i=null===n||void 0===n?void 0:n.mapping)||void 0===i?void 0:i.out){var d=null===(o=null===n||void 0===n?void 0:n.mapping)||void 0===o?void 0:o.out,h=function(t){Array.isArray(t)&&t.forEach((function(t){return h(t)})),"object"===typeof t&&Object.keys(t).forEach((function(e){var n;(n=d[e])?(t[n]=mn["a"].cloneDeep(t[e]),delete t[e],h(t[n])):h(t[e])}))};h(l)}return l},this.adapterIn=function(t,e){if(t)return ei(t,e)},n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();ai.shapeConfigMap.set(Bn.START,{width:xn.width,height:xn.height}),ai.shapeConfigMap.set(Bn.END,{width:bn.width,height:bn.height}),ai.shapeConfigMap.set(Bn.INTERMEDIATE_CATCH,{width:Mn.width,height:Mn.height}),ai.shapeConfigMap.set(Bn.INTERMEDIATE_THROW,{width:Mn.width,height:Mn.height}),ai.shapeConfigMap.set(Bn.BOUNDARY,{width:wn.width,height:wn.height}),ai.shapeConfigMap.set(Bn.PARALLEL_GATEWAY,{width:On.width,height:On.height}),ai.shapeConfigMap.set(Bn.INCLUSIVE_GATEWAY,{width:En.width,height:En.height}),ai.shapeConfigMap.set(Bn.EXCLUSIVE_GATEWAY,{width:_n.width,height:_n.height}),ai.shapeConfigMap.set(Bn.SYSTEM,{width:Nn.width,height:Nn.height}),ai.shapeConfigMap.set(Bn.USER,{width:Pn.width,height:Pn.height}),ai.shapeConfigMap.set(Bn.SUBPROCESS,{width:Sn.width,height:Sn.height});(function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=jn(t);return n.adapterIn(e,n.props)},n.adapterXmlOut=function(t){var e=n.adapterOut(t,n.props);return Rn(e)};var i=e.lf,o=e.props;return i.adapterIn=n.adapterXmlIn,i.adapterOut=n.adapterXmlOut,n.props=o,n}Gn(e,t),e.pluginName="BPMNAdapter"})(ai);var si=function(){function t(t){var e=this,n=t.lf;this.lf=n,this.customCssRules="",this.useGlobalRules=!0,n.getSnapshot=function(t,n){e.getSnapshot(t,n)},n.getSnapshotBlob=function(t){return e.getSnapshotBlob(t)},n.getSnapshotBase64=function(t){return e.getSnapshotBase64(t)}}return t.prototype.getSvgRootElement=function(t){var e=t.container.querySelector(".lf-canvas-overlay");return e},t.prototype.triggerDownload=function(t){var e=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download",this.fileName),n.setAttribute("href",t),n.setAttribute("target","_blank"),n.dispatchEvent(e)},t.prototype.removeAnchor=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,i=0;i<n;i++){var o=e[i],r=o.classList&&Array.from(o.classList)||[];r.indexOf("lf-anchor")>-1&&(t.removeChild(t.childNodes[i]),n--,i--)}},t.prototype.removeRotateControl=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,i=0;i<n;i++){var o=e[i],r=o.classList&&Array.from(o.classList)||[];r.indexOf("lf-rotate-control")>-1&&(t.removeChild(t.childNodes[i]),n--,i--)}},t.prototype.getSnapshot=function(t,e){var n=this;this.fileName=t||"logic-flow."+Date.now()+".png";var i=this.getSvgRootElement(this.lf);this.getCanvasData(i,e).then((function(t){var e=t.toDataURL("image/png").replace("image/png","image/octet-stream");n.triggerDownload(e)}))},t.prototype.getSnapshotBase64=function(t){var e=this,n=this.getSvgRootElement(this.lf);return new Promise((function(i){e.getCanvasData(n,t).then((function(t){var e=t.toDataURL("image/png");i({data:e,width:t.width,height:t.height})}))}))},t.prototype.getSnapshotBlob=function(t){var e=this,n=this.getSvgRootElement(this.lf);return new Promise((function(i){e.getCanvasData(n,t).then((function(t){t.toBlob((function(e){i({data:e,width:t.width,height:t.height})}),"image/png")}))}))},t.prototype.getClassRules=function(){var t="";if(this.useGlobalRules)for(var e=document.styleSheets,n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.cssRules.length;o++)t+=i.cssRules[o].cssText;return this.customCssRules&&(t+=this.customCssRules),t},t.prototype.getCanvasData=function(t,e){var n=this,i=t.cloneNode(!0),o=i.lastChild,r=o.childNodes&&o.childNodes.length;if(r)for(var a=0;a<r;a++){var s=o.childNodes[a],l=s.classList&&Array.from(s.classList);if(l&&l.indexOf("lf-base")<0)o.removeChild(o.childNodes[a]),r--,a--;else{var d=o.childNodes[a];d&&d.childNodes.forEach((function(t){var e=t;n.removeAnchor(e.firstChild),n.removeRotateControl(e.firstChild)}))}}var h=window.devicePixelRatio||1;h<1&&(h=1);var p=document.createElement("canvas"),u=this.lf.graphModel.rootEl.querySelector(".lf-base"),c=u.getBoundingClientRect(),f=this.lf.container.querySelector(".lf-canvas-overlay").getBoundingClientRect(),y=c.x-f.x,g=c.y-f.y,v=this.lf.graphModel,m=v.transformModel,x=m.SCALE_X,b=m.SCALE_Y,w=m.TRANSLATE_X,M=m.TRANSLATE_Y;i.lastChild.style.transform="matrix(1, 0, 0, 1, "+((-y+w)*(1/x)+10)+", "+((-g+M)*(1/b)+10)+")";var O=Math.ceil(c.width/x),E=Math.ceil(c.height/b);p.style.width=O+"px",p.style.height=E+"px",p.width=O*h+80,p.height=E*h+80;var _=p.getContext("2d");_.clearRect(0,0,p.width,p.height),_.scale(h,h),e?(_.fillStyle=e,_.fillRect(0,0,O*h+80,E*h+80)):_.clearRect(0,0,O,E);var N=new Image,P=document.createElement("style");P.innerHTML=this.getClassRules();var S=document.createElement("foreignObject");return S.appendChild(P),i.appendChild(S),new Promise((function(t){N.onload=function(){var e=navigator.userAgent.indexOf("Firefox")>-1;try{e?createImageBitmap(N,{resizeWidth:p.width,resizeHeight:p.height}).then((function(e){_.drawImage(e,0,0),t(p)})):(_.drawImage(N,0,0),t(p))}catch(n){_.drawImage(N,0,0),t(p)}};var e="data:image/svg+xml;charset=utf-8,"+(new XMLSerializer).serializeToString(i),n=e.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");N.src=n}))},t.pluginName="snapshot",t}(),li=function(){return li=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},li.apply(this,arguments)},di=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},hi={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,EXCLUSIVE_GATEWAY:6},pi={1:"bpmn:sequenceFlow",2:"bpmn:startEvent",3:"bpmn:endEvent",4:"bpmn:userTask",6:"bpmn:exclusiveGateway"};function ui(t){switch(t){case"bpmn:sequenceFlow":return hi.SEQUENCE_FLOW;case"bpmn:startEvent":return hi.START_EVENT;case"bpmn:endEvent":return hi.END_EVENT;case"bpmn:userTask":return hi.USER_TASK;case"bpmn:exclusiveGateway":return hi.EXCLUSIVE_GATEWAY;default:return t}}function ci(t){var e=t.id,n=(t.type,t.x),i=t.y,o=t.text,r=void 0===o?"":o,a=t.properties;return{incoming:[],outgoing:[],dockers:[],type:ui(t.type),properties:li(li({},a),{name:r&&r.value||"",x:n,y:i,text:r}),key:e}}function fi(t){var e=t.id,n=t.type,i=t.sourceNodeId,o=t.targetNodeId,r=t.startPoint,a=t.endPoint,s=t.pointsList,l=t.text,d=void 0===l?"":l,h=t.properties;return{incoming:[i],outgoing:[o],type:ui(n),dockers:[],properties:li(li({},h),{name:d&&d.value||"",text:d,startPoint:JSON.stringify(r),endPoint:JSON.stringify(a),pointsList:JSON.stringify(s)}),key:e}}function yi(t){var e=new Map,n={flowElementList:[]};return t.nodes.forEach((function(t){var i=ci(t);n.flowElementList.push(i),e.set(t.id,i)})),t.edges.forEach((function(t){var i=fi(t),o=e.get(t.sourceNodeId);o.outgoing.push(i.key);var r=e.get(t.targetNodeId);r.incoming.push(i.key),n.flowElementList.push(i)})),n}function gi(t){var e=t.incoming,n=t.outgoing,i=t.properties,o=t.key,r=t.type,a=i.text,s=i.name,l=i.startPoint,d=i.endPoint,h=i.pointsList,p={id:o,type:pi[r],sourceNodeId:e[0],targetNodeId:n[0],text:a||s,properties:{}};l&&(p.startPoint=JSON.parse(l)),d&&(p.endPoint=JSON.parse(d)),h&&(p.pointsList=JSON.parse(h));var u=["startPoint","endPoint","pointsList","text"];return Object.keys(t.properties).forEach((function(e){-1===u.indexOf(e)&&(p.properties[e]=t.properties[e])})),p}function vi(t){var e=t.properties,n=t.key,i=t.type,o=t.bounds,r=e.x,a=e.y,s=e.text;if(void 0===r){var l=di(o,2),d=l[0],h=d.x,p=d.y,u=l[1],c=u.x,f=u.y;r=(h+c)/2,a=(p+f)/2}var y={id:n,type:pi[i],x:r,y:a,text:s,properties:{}},g=["x","y","text"];return Object.keys(t.properties).forEach((function(e){-1===g.indexOf(e)&&(y.properties[e]=t.properties[e])})),y}function mi(t){var e={nodes:[],edges:[]},n=t.flowElementList;return n&&n.length>0&&n.forEach((function(t){if(t.type===hi.SEQUENCE_FLOW){var n=gi(t);e.edges.push(n)}else{var i=vi(t);e.nodes.push(i)}})),e}(function(){function t(t){var e=t.lf;e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut}t.prototype.adapterOut=function(t){if(t)return yi(t)},t.prototype.adapterIn=function(t){if(t)return mi(t)},t.pluginName="turboAdapter"})();var xi,bi=n("48ad");(function(t){t["HORIZONTAL"]="horizontal",t["VERTICAL"]="vertical"})(xi||(xi={}));var wi=function(t,e,n,i){void 0===i&&(i=0);var o=_i(t,e,n);return o<=i};function Mi(t){return t*t}function Oi(t,e){return Mi(t.x-e.x)+Mi(t.y-e.y)}var Ei=function(t,e,n){var i=Oi(e,n);if(0===i)return Oi(t,e);var o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return o=Math.max(0,Math.min(1,o)),Oi(t,{x:e.x+o*(n.x-e.x),y:e.y+o*(n.y-e.y)})},_i=function(t,e,n){return Math.sqrt(Ei(t,e,n))},Ni=function(t){var e=t.x,n=t.y,i=t.width,o=t.height,r={minX:e-i/2,minY:n-o/2,maxX:e+i/2,maxY:n+o/2,x:e,y:n,width:i,height:o,centerX:e,centerY:n};return r},Pi=function(t,e){var n;return t.x===e.x?n=xi.VERTICAL:t.y===e.y&&(n=xi.HORIZONTAL),n},Si=function(t,e,n){var i=Ni(t),o=Pi(e,n),r=Math.max(e.x,n.x),a=Math.min(e.x,n.x),s=Math.max(e.y,n.y),l=Math.min(e.y,n.y),d=t.x,h=t.y,p=t.width,u=t.height;if(o===xi.HORIZONTAL){if(r>=i.maxX&&a<=i.minX)return{startCrossPoint:{x:e.x>n.x?d+p/2:d-p/2,y:e.y},endCrossPoint:{x:e.x>n.x?d-p/2:d+p/2,y:e.y}}}else if(o===xi.VERTICAL&&s>=i.maxY&&l<=i.minY)return{startCrossPoint:{x:e.x,y:e.y>n.y?h+u/2:h-u/2},endCrossPoint:{x:e.x,y:e.y>n.y?h-u/2:h+u/2}}},Ti=function(t,e,n){void 0===n&&(n=0);for(var i=t.x,o=t.y,r=e.pointsList,a=0;a<r.length-1;a++)if(wi({x:i,y:o},r[a],r[a+1],n)){var s=Si(t,r[a],r[a+1]);if(s)return{crossIndex:a+1,crossPoints:s}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},ji=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Ci=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ji(arguments[e]));return t},Ai=(function(){function t(t){var e=t.lf;this._lf=e,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}t.prototype.eventHandler=function(){var t=this;this.dndAdd&&this._lf.on("node:dnd-add",(function(e){var n=e.data;t.insetNode(n)})),this.dropAdd&&this._lf.on("node:drop",(function(e){for(var n=e.data,i=t._lf.graphModel.edges,o=n.id,r=!0,a=0;a<i.length;a++)if(i[a].sourceNodeId===o||i[a].targetNodeId===o){r=!1;break}r&&t.insetNode(n)}))},t.prototype.checkRuleBeforeInsetNode=function(t,e,n,o,r){var a=this._lf.getNodeModelById(t),s=this._lf.getNodeModelById(e),l=a.getAnchorInfo(n),d=s.getAnchorInfo(o),h=a.isAllowConnectedAsSource(r,l,d),p=s.isAllowConnectedAsTarget(r,l,d),u=Object(i["formateAnchorConnectValidateData"])(h),c=u.isAllPass,f=u.msg,y=Object(i["formateAnchorConnectValidateData"])(p),g=y.isAllPass,v=y.msg;return{isPass:c&&g,sourceMsg:f,targetMsg:v}},t.prototype.insetNode=function(t){var e=this,n=this._lf.graphModel.edges,o=this._lf.getNodeModelById(t.id),r=o.getDefaultAnchor(),a=!r||0===r.length;if(a)this._lf.graphModel.eventCenter.emit(i["EventType"].CONNECTION_NOT_ALLOWED,{data:t,msg:"自定义类型节点不显示锚点，也不允许其他节点连接到此节点"});else for(var s=0;s<n.length;s++){var l=Ti(o,n[s],this.deviation),d=l.crossIndex,h=l.crossPoints;if(d>=0){var p=n[s],u=p.sourceNodeId,c=p.targetNodeId,f=p.id,y=p.type,g=p.pointsList,v=p.sourceAnchorId,m=p.targetAnchorId,x=Object(bi["a"])(g[0]),b=Object(bi["a"])(h.startCrossPoint);this._lf.deleteEdge(f);var w=this.checkRuleBeforeInsetNode(u,c,v,m,t);if(this._lf.addEdge({type:y,sourceNodeId:u,targetNodeId:t.id,startPoint:x,endPoint:b,pointsList:Ci(g.slice(0,d),[h.startCrossPoint])}),this._lf.addEdge({type:y,sourceNodeId:t.id,targetNodeId:c,startPoint:Object(bi["a"])(h.endCrossPoint),endPoint:Object(bi["a"])(g[g.length-1]),pointsList:Ci([h.endCrossPoint],g.slice(d))}),w.isPass)break;this._lf.graphModel.eventCenter.emit(i["EventType"].CONNECTION_NOT_ALLOWED,{data:t,msg:w.targetMsg||w.sourceMsg}),setTimeout((function(){e._lf.undo()}),200);break}}},t.pluginName="insertNodeInPolyline"}(),function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a}),ki=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ai(arguments[e]));return t},Ii=(function(){function t(t){var e=this,n=t.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){e.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){e.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){e.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){e.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){e.lf.redo()}}],this.lf=n}t.prototype.render=function(t,e){this.destroy();var n=this.getControlTool();this.toolEl=n,e.appendChild(n),this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},t.prototype.addItem=function(t){this.controlItems.push(t)},t.prototype.removeItem=function(t){var e=this.controlItems.findIndex((function(e){return e.key===t}));return-1==e?null:this.controlItems.splice(e,1)[0]},t.prototype.getControlTool=function(){var t=this,e="lf-control-item",n="lf-control-item disabled",i=document.createElement("div"),o=[];return i.className="lf-control",this.controlItems.forEach((function(i){var r=document.createElement("div"),a=document.createElement("i"),s=document.createElement("span");switch(r.className=n,i.onClick&&(r.onclick=i.onClick.bind(null,t.lf)),i.onMouseEnter&&(r.onmouseenter=i.onMouseEnter.bind(null,t.lf)),i.onMouseLeave&&(r.onmouseleave=i.onMouseLeave.bind(null,t.lf)),a.className=i.iconClass,s.className="lf-control-text",s.title=i.title,s.innerText=i.text,r.append(a,s),i.text){case"上一步":t.lf.on("history:change",(function(t){var i=t.data.undoAble;r.className=i?e:n}));break;case"下一步":t.lf.on("history:change",(function(t){var i=t.data.redoAble;r.className=i?e:n}));break;default:r.className=e;break}o.push(r)})),i.append.apply(i,ki(o)),i},t.pluginName="control"}(),function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a}),Di=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ii(arguments[e]));return t},Li="lf:defaultNodeMenu",Ri="lf:defaultEdgeMenu",Bi="lf:defaultGraphMenu",Gi="lf:defaultSelectionMenu",Fi=function(){function t(t){var e=this,n=t.lf;this.lf=n;var i=n.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(t){e.setMenuConfig(t)},this.lf.addMenuConfig=function(t){e.addMenuConfig(t)},this.lf.setMenuByType=function(t){e.setMenuByType(t)})}return t.prototype.init=function(){var t=this,e=[{text:"删除",callback:function(e){t.lf.deleteNode(e.id)}},{text:"编辑文本",callback:function(e){t.lf.graphModel.editText(e.id)}},{text:"复制",callback:function(e){t.lf.cloneNode(e.id)}}];this.menuTypeMap.set(Li,e);var n=[{text:"删除",callback:function(e){t.lf.deleteEdge(e.id)}},{text:"编辑文本",callback:function(e){t.lf.graphModel.editText(e.id)}}];this.menuTypeMap.set(Ri,n),this.menuTypeMap.set(Bi,[]);var i=[{text:"删除",callback:function(e){t.lf.clearSelectElements(),e.edges.forEach((function(e){return t.lf.deleteEdge(e.id)})),e.nodes.forEach((function(e){return t.lf.deleteNode(e.id)}))}}];this.menuTypeMap.set(Gi,i)},t.prototype.render=function(t,e){var n=this;t.options.isSilentMode||(this.__container=e,this.__currentData=null,this.__menuDOM.className="lf-menu",e.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",(function(t){t.stopPropagation();var e=t.target;while(-1===Array.from(e.classList).indexOf("lf-menu-item")&&-1===Array.from(e.classList).indexOf("lf-menu"))e=e.parentElement;Array.from(e.classList).indexOf("lf-menu-item")>-1?(e.onclickCallback(n.__currentData),n.__menuDOM.style.display="none",n.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")}),!0),this.lf.on("node:contextmenu",(function(t){var e=t.data,i=t.position,o=t.e,r=i.domOverlayPosition,a=r.x,s=r.y,l=e.id,d=n.lf.graphModel.getNodeModelById(l),h=[],p=n.menuTypeMap.get(d.type);h=d&&d.menu&&Array.isArray(d.menu)?d.menu:p||n.menuTypeMap.get(Li),n.__currentData=e,n.showMenu(a,s,h,{width:d.width,height:d.height,clientX:o.clientX,clientY:o.clientY})})),this.lf.on("edge:contextmenu",(function(t){var e=t.data,i=t.position,o=t.e,r=i.domOverlayPosition,a=r.x,s=r.y,l=e.id,d=n.lf.graphModel.getEdgeModelById(l),h=[],p=n.menuTypeMap.get(d.type);h=d&&d.menu&&Array.isArray(d.menu)?d.menu:p||n.menuTypeMap.get(Ri),n.__currentData=e,n.showMenu(a,s,h,{width:d.width,height:d.height,clientX:o.clientX,clientY:o.clientY})})),this.lf.on("blank:contextmenu",(function(t){var e=t.position,i=n.menuTypeMap.get(Bi),o=e.domOverlayPosition,r=o.x,a=o.y;n.showMenu(r,a,i)})),this.lf.on("selection:contextmenu",(function(t){var e=t.data,i=t.position,o=n.menuTypeMap.get(Gi),r=i.domOverlayPosition,a=r.x,s=r.y;n.__currentData=e,n.showMenu(a,s,o)})),this.lf.on("node:mousedown",(function(){n.__menuDOM.style.display="none"})),this.lf.on("edge:click",(function(){n.__menuDOM.style.display="none"})),this.lf.on("blank:click",(function(){n.__menuDOM.style.display="none"})))},t.prototype.destroy=function(){var t;null===(t=null===this||void 0===this?void 0:this.__container)||void 0===t||t.removeChild(this.__menuDOM),this.__menuDOM=null},t.prototype.showMenu=function(t,e,n,i){if(n&&n.length){var o=this.__menuDOM;if(o.innerHTML="",o.append.apply(o,Di(this.__getMenuDom(n))),o.children.length){if(o.style.display="block",!i)return o.style.top=e+"px",void(o.style.left=t+"px");var r=i.width,a=i.height,s=i.clientX,l=i.clientY,d=this.lf.graphModel,h=o.offsetWidth,p=!0,u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=u-s,f=d.rootEl.getBoundingClientRect(),y=f.left+f.width;y<u&&(c=y-s),c<h&&(p=!1),o.style.left=p?t+"px":t-r+"px";var g=o.offsetHeight,v=!0,m=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,x=m-l,b=f.top+f.height;b<m&&(x=b-l),x<g&&(v=!1),o.style.top=v?e+"px":e-a+"px"}}},t.prototype.setMenuByType=function(t){t.type&&t.menu&&this.menuTypeMap.set(t.type,t.menu)},t.prototype.__getMenuDom=function(t){var e=[];return t&&t.length>0&&t.forEach((function(t){var n=document.createElement("li");if(t.className?n.className="lf-menu-item "+t.className:n.className="lf-menu-item",!0===t.icon){var i=document.createElement("span");i.className="lf-menu-item-icon",n.appendChild(i)}var o=document.createElement("span");o.className="lf-menu-item-text",t.text&&(o.innerText=t.text),n.appendChild(o),n.onclickCallback=t.callback,e.push(n)})),e},t.prototype.setMenuConfig=function(t){t&&(void 0!==t.nodeMenu&&this.menuTypeMap.set(Li,t.nodeMenu?t.nodeMenu:[]),void 0!==t.edgeMenu&&this.menuTypeMap.set(Ri,t.edgeMenu?t.edgeMenu:[]),void 0!==t.graphMenu&&this.menuTypeMap.set(Bi,t.graphMenu?t.graphMenu:[]))},t.prototype.addMenuConfig=function(t){if(t){if(Array.isArray(t.nodeMenu)){var e=this.menuTypeMap.get(Li);this.menuTypeMap.set(Li,e.concat(t.nodeMenu))}if(Array.isArray(t.edgeMenu)){e=this.menuTypeMap.get(Ri);this.menuTypeMap.set(Ri,e.concat(t.edgeMenu))}if(Array.isArray(t.graphMenu)){e=this.menuTypeMap.get(Bi);this.menuTypeMap.set(Bi,e.concat(t.graphMenu))}}},t.prototype.changeMenuItem=function(t,e){if("add"===t)this.addMenuConfig(e);else{if("reset"!==t)throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");this.setMenuConfig(e)}},t.pluginName="menu",t}(),zi=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Wi="menu-common",Hi=200,Xi=100,Yi=(function(){function t(t){var e=this,n=t.lf;this.menuTypeMap=new Map,this.listenDelete=function(){e.hideContextMenu()},this.lf=n,this.__menuDOM=document.createElement("div"),this.__menuDOM.className="lf-inner-context",this.menuTypeMap.set(Wi,[]),this.lf.setContextMenuByType=function(t,n){e.setContextMenuByType(t,n)},this.lf.setContextMenuItems=function(t){e.setContextMenuItems(t)},this.lf.showContextMenu=function(t){e.showContextMenu(t)},this.lf.hideContextMenu=function(){e.hideContextMenu()}}t.prototype.render=function(t,e){var n=this;this.container=e,t.on("node:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("edge:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("blank:click",(function(){n.hideContextMenu()}))},t.prototype.setContextMenuByType=function(t,e){this.menuTypeMap.set(t,e)},t.prototype.hideContextMenu=function(){this.__menuDOM.innerHTML="",this.__menuDOM.style.display="none",this.isShow&&this.container.removeChild(this.__menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1},t.prototype.showContextMenu=function(t){t&&t.id?(this._activeData=t,this.createContextMenu()):console.warn("请检查传入的参数")},t.prototype.setContextMenuItems=function(t){this.menuTypeMap.set(Wi,t)},t.prototype.getContextMenuPosition=function(){var t=this._activeData,e=this.lf.graphModel.getElement(t.id);if(e){var n,i;if("edge"===e.BaseType){n=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;var o=e.getData();n=Math.max(o.startPoint.x,n),i=Math.min(o.startPoint.y,i),n=Math.max(o.endPoint.x,n),i=Math.min(o.endPoint.y,i),o.pointsList&&o.pointsList.forEach((function(t){n=Math.max(t.x,n),i=Math.min(t.y,i)}))}return"node"===e.BaseType&&(n=t.x+e.width/2,i=t.y-e.height/2),this.lf.graphModel.transformModel.CanvasPointToHtmlPoint([n,i])}console.warn("找不到元素"+t.id)},t.prototype.createContextMenu=function(){var t=this,e=this.lf.options.isSilentMode;if(!e){var n=this.menuTypeMap.get(this._activeData.type)||[];n=n.concat(this.menuTypeMap.get(Wi));var i=document.createDocumentFragment();n.forEach((function(e){var n=document.createElement("div");n.className="lf-context-item";var o=document.createElement("img");o.src=e.icon,o.className="lf-context-img",e.className&&(n.className=n.className+" "+e.className),o.addEventListener("click",(function(){t.hideContextMenu(),e.callback?e.callback(t._activeData):t.addNode({sourceId:t._activeData.id,x:t._activeData.x,y:t._activeData.y,properties:e.properties,type:e.type})})),n.appendChild(o),i.appendChild(n)})),this.__menuDOM.innerHTML="",this.__menuDOM.appendChild(i),this.showMenu()}},t.prototype.addNode=function(t,e){var n=void 0!==e;void 0===e&&(e=t.y);var i=this.lf.getNodeModelById(t.sourceId),o=t.x-i.width+Hi,r=e-t.y/2-20,a=t.x+i.width+Hi,s=e+t.y/2+20,l=this.lf.getAreaElement([o,r],[a,s]);if(l.length)return e+=Xi,void this.addNode(t,e);var d,h,p=this.lf.addNode({type:t.type,x:t.x+200,y:e,properties:t.properties});n&&(d={x:t.x,y:t.y+i.height/2},h={x:p.x-p.width/2,y:p.y}),this.lf.addEdge({sourceNodeId:t.sourceId,targetNodeId:p.id,startPoint:d,endPoint:h})},t.prototype.showMenu=function(){var t=zi(this.getContextMenuPosition(),2),e=t[0],n=t[1];this.__menuDOM.style.display="flex",this.__menuDOM.style.top=n+"px",this.__menuDOM.style.left=e+10+"px",this.container.appendChild(this.__menuDOM),!this.isShow&&this.lf.on("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!0},t.pluginName="contextMenu"}(),function(){function t(t){var e=this,n=t.lf;this.lf=n,this.lf.setPatternItems=function(t){e.setPatternItems(t)}}t.prototype.render=function(t,e){var n=this;this.destroy(),this.shapeList&&0!==this.shapeList.length?(this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach((function(t){n.panelEl.appendChild(n.createDndItem(t))})),e.appendChild(this.panelEl),this.domContainer=e):this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},t.prototype.setPatternItems=function(t){this.shapeList=t,this.domContainer&&this.render(this.lf,this.domContainer)},t.prototype.createDndItem=function(t){var e=this,n=document.createElement("div");n.className=t.className?"lf-dnd-item "+t.className:"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",t.icon&&(i.style.backgroundImage="url("+t.icon+")"),n.appendChild(i),t.label){var o=document.createElement("div");o.innerText=t.label,o.className="lf-dnd-text",n.appendChild(o)}return t.disabled?(n.classList.add("disabled"),n.onmousedown=function(){t.callback&&t.callback(e.lf,e.domContainer)},n):(n.onmousedown=function(){t.type&&e.lf.dnd.startDrag({type:t.type,properties:t.properties,text:t.text}),t.callback&&t.callback(e.lf,e.domContainer)},n.ondblclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:n,data:t})},n.onclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:n,data:t})},n.oncontextmenu=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:n,data:t})},n)},t.pluginName="dndPanel"}(),function(){function t(t){var e=this,n=t.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(t){var n=e.lf.getPointByClient(t.clientX,t.clientY).domOverlayPosition,i=n.x,o=n.y;e.endPoint={x:i,y:o};var r=e.startPoint,a=r.x,s=r.y,l=e.wrapper.style,d=a,h=s,p=i-a,u=o-s;i<a&&(d=i,p=a-i),o<s&&(h=o,u=s-o),l.left=d+"px",l.top=h+"px",l.width=p+"px",l.height=u+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",e.__draw),document.removeEventListener("mouseup",e.__drawOff),e.wrapper.oncontextmenu=null,e.__domContainer.removeChild(e.wrapper);var t=e.startPoint,n=t.x,i=t.y,o=e.endPoint,r=o.x,a=o.y;if(!(Math.abs(r-n)<10&&Math.abs(a-i)<10)){var s=[Math.min(n,r),Math.min(i,a)],l=[Math.max(n,r),Math.max(i,a)],d=e.lf.graphModel.getAreaElement(s,l,e.isWholeEdge,e.isWholeNode,!0),h=e.lf.graphModel.group;d.forEach((function(t){h&&h.getNodeGroup(t.id)||e.lf.selectElementById(t.id,!0)})),e.lf.emit("selection:selected",d)}},this.lf=n;var i=n.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=i,n.openSelectionSelect=function(){e.openSelectionSelect()},n.closeSelectionSelect=function(){e.closeSelectionSelect()}}t.prototype.render=function(t,e){var n=this;this.__domContainer=e,t.on("blank:mousedown",(function(i){var o=i.e,r=t.getEditConfig();if(r.stopMoveGraph&&!n.__disabled){var a=2===o.button;if(!a){var s=t.getPointByClient(o.clientX,o.clientY).domOverlayPosition,l=s.x,d=s.y;n.startPoint={x:l,y:d},n.endPoint={x:l,y:d};var h=document.createElement("div");h.className="lf-selection-select",h.oncontextmenu=function(t){t.preventDefault()},h.style.top=n.startPoint.y+"px",h.style.left=n.startPoint.x+"px",e.appendChild(h),n.wrapper=h,document.addEventListener("mousemove",n.__draw),document.addEventListener("mouseup",n.__drawOff)}}}))},t.prototype.setSelectionSense=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isWholeEdge=t,this.isWholeNode=e},t.prototype.openSelectionSelect=function(){var t=this.lf.getEditConfig().stopMoveGraph;t||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},t.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},t.prototype.open=function(){this.__disabled=!1},t.prototype.close=function(){this.__disabled=!0},t.pluginName="selectionSelect"}(),n("21ec")),Vi=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qi=(function(){function t(t){var e=this,n=t.lf,i=t.LogicFlow,o=t.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(t,n){e.setView(),e.isShow||e.createMiniMap(t,n),e.isShow=!0},this.hide=function(){e.isShow&&e.removeMiniMap(),e.isShow=!1},this.reset=function(){e.lf.resetTranslate(),e.lf.resetZoom(),e.hide(),e.show()},this.startDrag=function(t){document.addEventListener("mousemove",e.drag),document.addEventListener("mouseup",e.drop),e.startPosition={x:t.x,y:t.y}},this.moveViewport=function(t,n){var i=e.viewport.style;e.viewPortTop=t,e.viewPortLeft=n,i.top=e.viewPortTop+"px",i.left=e.viewPortLeft+"px"},this.drag=function(t){e.dragging=!0;var n=e.viewPortTop+t.y-e.startPosition.y,i=e.viewPortLeft+t.x-e.startPosition.x;e.moveViewport(n,i),e.startPosition={x:t.x,y:t.y};var o=(e.viewPortLeft+e.viewPortWidth/2)/e.viewPortScale,r=(e.viewPortTop+e.viewPortHeight/2)/e.viewPortScale;e.lf.focusOn({coordinate:{x:o+e.resetDataX,y:r+e.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",e.drag),document.removeEventListener("mouseup",e.drop);var t=e.viewPortTop,n=e.viewPortLeft;e.viewPortLeft>e.width&&(n=e.width-e.viewPortWidth),e.viewPortTop>e.height&&(t=e.height-e.viewPortHeight),e.viewPortLeft<-e.width&&(n=0),e.viewPortTop<-e.height&&(t=0),e.moveViewport(t,n)},this.mapClick=function(t){if(e.dragging)e.dragging=!1;else{var n=t.layerX,i=t.layerY,o=n,r=i,a=e.lf.getGraphRawData(),s=e.getBounds(a),l=s.left,d=s.top,h=l+o/e.viewPortScale,p=d+r/e.viewPortScale;e.lf.focusOn({coordinate:{x:h,y:p}})}},this.lf=n,o&&o.MiniMap&&this.setOption(o),this.miniMapWidth=n.graphModel.width,this.miniMapHeight=n.graphModel.width*this.height/this.width,this.LogicFlow=i,this.initMiniMap()}t.prototype.render=function(t,e){var n=this;this.container=e,this.lf.on("history:change",(function(){n.isShow&&n.setView()})),this.lf.on("graph:transform",Object(Yi["a"])((function(){n.isShow&&!n.dragging&&n.setView()}),300))},t.prototype.init=function(t){this.disabledPlugins=this.disabledPlugins.concat(t.disabledPlugins||[])},t.prototype.setOption=function(t){var e=t.MiniMap,n=e.width,i=void 0===n?150:n,o=e.height,r=void 0===o?220:o,a=e.isShowHeader,s=void 0===a||a,l=e.isShowCloseIcon,d=void 0===l||l,h=e.leftPosition,p=void 0===h?0:h,u=e.topPosition,c=void 0===u?0:u,f=e.rightPosition,y=e.bottomPosition;this.width=i,this.height=r,this.isShowHeader=s,this.isShowCloseIcon=d,this.viewPortWidth=i,this.leftPosition=p,this.topPosition=c,this.rightPosition=f,this.bottomPosition=y},t.prototype.initMiniMap=function(){var t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width=this.width+4+"px",t.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:t,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(t){return t},this.lfMap.adapterOut=function(t){return t},this.miniMapWrap=t,this.createViewPort(),t.addEventListener("click",this.mapClick)},t.prototype.createMiniMap=function(e,n){var i=document.createElement("div");i.appendChild(this.miniMapWrap),"undefined"!==typeof e||"undefined"!==typeof n?(i.style.left=(e||0)+"px",i.style.top=(n||0)+"px"):("undefined"!==typeof this.rightPosition?i.style.right=this.rightPosition+"px":"undefined"!==typeof this.leftPosition&&(i.style.left=this.leftPosition+"px"),"undefined"!==typeof this.bottomPosition?i.style.bottom=this.bottomPosition+"px":"undefined"!==typeof this.topPosition&&(i.style.top=this.topPosition+"px")),i.style.position="absolute",i.className="lf-mini-map",this.isShowCloseIcon||i.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||i.classList.add("lf-mini-map-no-header"),this.container.appendChild(i),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=t.headerTitle,i.appendChild(o);var r=document.createElement("span");r.className="lf-mini-map-close",r.addEventListener("click",this.hide),i.appendChild(r),this.miniMapContainer=i},t.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},t.prototype.getBounds=function(t){var e=0,n=this.miniMapWidth,i=0,o=this.miniMapHeight,r=t.nodes;return r&&r.length>0&&r.forEach((function(t){var r=t.x,a=t.y,s=t.width,l=void 0===s?200:s,d=t.height,h=void 0===d?200:d,p=r-l/2,u=r+l/2,c=a-h/2,f=a+h/2;e=p<e?p:e,n=u>n?u:n,i=c<i?c:i,o=f>o?f:o})),{left:e,top:i,bottom:o,right:n}},t.prototype.resetData=function(t){var e=t.nodes,n=t.edges,i=0,o=0;return e&&e.length>0&&(e.forEach((function(t){var e=t.x,n=t.y,r=t.width,a=void 0===r?200:r,s=t.height,l=void 0===s?200:s,d=e-a/2,h=n-l/2;i=d<i?d:i,o=h<o?h:o})),(i<0||o<0)&&(this.resetDataX=i,this.resetDataY=o,e.forEach((function(t){t.x=t.x-i,t.y=t.y-o,t.text&&(t.text.x=t.text.x-i,t.text.y=t.text.y-o)})),n.forEach((function(t){t.startPoint&&(t.startPoint.x=t.startPoint.x-i,t.startPoint.y=t.startPoint.y-o),t.endPoint&&(t.endPoint.x=t.endPoint.x-i,t.endPoint.y=t.endPoint.y-o),t.text&&(t.text.x=t.text.x-i,t.text.y=t.text.y-o),t.pointsList&&t.pointsList.forEach((function(t){t.x=t.x-i,t.y=t.y-o}))})))),t},t.prototype.setView=function(){var t,e,n=this.lf.getGraphRawData(),i=this.resetData(n),o=this.lf.viewMap,r=this.lf.graphModel.modelMap,a=this.lfMap.viewMap;try{for(var s=Vi(o.keys()),l=s.next();!l.done;l=s.next()){var d=l.value;a.has(d)||(this.lfMap.setView(d,o.get(d)),this.lfMap.graphModel.modelMap.set(d,r.get(d)))}}catch(x){t={error:x}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}this.lfMap.render(i);var h=this.getBounds(i),p=h.left,u=h.top,c=h.right,f=h.bottom,y=this.width/(c-p),g=this.height/(f-u),v=this.miniMapWrap.firstChild.style,m=Math.min(y,g);v.pointerEvents="none",v.transform="matrix("+m+", 0, 0, "+m+", 0, 0)",v.transformOrigin="left top",v.height=f-Math.min(u,0)+"px",v.width=c-Math.min(p,0)+"px",this.viewPortScale=m,this.setViewPort(m,{left:p,top:u,right:c,bottom:f})},t.prototype.setViewPort=function(t,e){var n=e.left,i=e.right,o=(e.top,e.bottom,this.viewport.style);o.width=this.viewPortWidth+"px",o.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var r=this.lf.getTransform(),a=r.TRANSLATE_X,s=r.TRANSLATE_Y,l=r.SCALE_X,d=r.SCALE_Y,h=i-n,p=this.width/(h/this.lf.graphModel.width),u=this.width*(p/this.width),c=this.lf.graphModel.width/this.lf.graphModel.height,f=u/c,y=this.lf.getGraphRawData(),g=this.getBounds(y),v=g.left,m=g.top,x=v,b=m;x+=a/l,b+=s/d,this.viewPortTop=b>0?0:-b*t,this.viewPortLeft=x>0?0:-x*t,this.viewPortWidth=u,this.viewPortHeight=f,o.top=this.viewPortTop+"px",o.left=this.viewPortLeft+"px",o.width=u/l+"px",o.height=f/d+"px"},t.prototype.createViewPort=function(){var t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.startDrag),this.viewport=t},t.pluginName="miniMap",t.width=150,t.height=220,t.viewPortWidth=150,t.viewPortHeight=75,t.isShowHeader=!0,t.isShowCloseIcon=!0,t.leftPosition=0,t.topPosition=0,t.rightPosition=null,t.bottomPosition=null,t.headerTitle="导航"}(),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),Ui=function(){return Ui=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ui.apply(this,arguments)},Zi=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},Ji={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function Ki(t){var e=t,n=1;while(n<e.length-1){var i=Zi(e[n-1],2),o=i[0],r=i[1],a=Zi(e[n],2),s=a[0],l=a[1],d=Zi(e[n+1],2),h=d[0],p=d[1];o===s&&s===h||r===l&&l===p?e.splice(n,1):n++}return e}function Qi(t,e,n,i){var o=[t[0],t[1]],r=[t[0],t[1]];switch(n){case"tl":return"tr"===e?(o[1]+=i,r[0]+=i):"lb"===e&&(o[0]+=i,r[1]+=i),[o,r];case"tr":return"tl"===e?(o[1]+=i,r[0]-=i):"rb"===e&&(o[0]-=i,r[1]+=i),[o,r];case"bl":return"br"===e?(o[1]-=i,r[0]+=i):"lt"===e&&(o[0]+=i,r[1]-=i),[o,r];case"br":return"bl"===e?(o[1]-=i,r[0]-=i):"rt"===e&&(o[0]-=i,r[1]-=i),[o,r];default:return[]}}function $i(t,e,n,i){var o,r="",a="";t[0]===e[0]?r=t[1]>e[1]?"t":"b":t[1]===e[1]&&(r=t[0]>e[0]?"l":"r"),e[0]===n[0]?a=e[1]>n[1]?"t":"b":e[1]===n[1]&&(a=e[0]>n[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-t[0],e[1]-t[1])/2,Math.hypot(n[0]-e[0],n[1]-e[1])/2,i)||.2*i,l=""+r+a,d=Ji[l]||"-",h="L "+t[0]+" "+t[1];if("-"===d)h+="L "+e[0]+" "+e[1]+" L "+n[0]+" "+n[1];else{var p=Zi(Qi(e,l,d,s),2),u=p[0],c=p[1];u&&c&&(h+="L "+u[0]+" "+u[1]+" Q "+e[0]+" "+e[1]+" "+c[0]+" "+c[1],o=Zi(c,2),e[0]=o[0],e[1]=o[1])}return h}function to(t,e){var n=0,i="";if(2===t.length)i+="M"+t[n][0]+" "+t[n++][1]+" L "+t[n][0]+" "+t[n][1];else{for(i+="M"+t[n][0]+" "+t[n++][1];n+1<t.length;){var o=t[n-1],r=t[n],a=t[1+n++];i+=$i(o,r,a,e)}i+="L "+t[n][0]+" "+t[n][1]}return i}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}qi(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.points,n=t.isAnimation,o=t.arrowConfig,r=t.radius,a=void 0===r?5:r,s=t.getEdgeStyle(),l=t.getEdgeAnimationStyle(),d=Ki(e.split(" ").map((function(t){return t.split(",").map((function(t){return+t}))}))),h=to(d,a),p=Ui(Ui(Ui({style:n?l:{}},s),o),{fill:"none"});return Object(i["h"])("path",Ui({d:h},p))}})(i["PolylineEdge"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}qi(e,t)}(i["PolylineEdgeModel"]);var eo=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},no=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(eo(arguments[e]));return t},io=(function(){function t(t){var e=this,n=t.lf;this.lf=n,this.pathes=[],n.getPathes=function(){if(!e.startNodeType)throw new Error("需要预先指定开始节点类型");return e.getPathes()},n.setRawPathes=function(t){e.setPathes(t)},n.getRawPathes=function(){return e.pathes},n.setStartNodeType=function(t){e.startNodeType=t}}t.prototype.setPathes=function(t){this.pathes=t.map((function(t){var e=t.routeId,n=t.name,i=t.elements,o=t.type;return{routeId:e,name:n,elements:i,type:o,similarElement:null,weight:0}}))},t.prototype.getPathes=function(){var t=this,e=this.lf.getGraphRawData(),n=new Map,i=[];e.nodes.forEach((function(e){n.set(e.id,{id:e.id,data:e,nextNodes:[]}),e.type===t.startNodeType&&i.push(e.id)})),e.edges.forEach((function(t){var e=n.get(t.sourceNodeId);e.nextNodes.push(t.targetNodeId)}));var o=[];return i.forEach((function(e){o=o.concat(t.findPathElements(n.get(e),n,[]))})),this.getNewPathes(o)},t.prototype.findPathElements=function(t,e,n){void 0===n&&(n=[]);var i=no(n);if(i.push(t.id),0===t.nextNodes.length)return[i];for(var o=[],r=0;r<t.nextNodes.length;r++){var a=e.get(t.nextNodes[r]),s=void 0,l=i.indexOf(a.id);s=-1!==l?[no(i.slice(l),[a.id])]:this.findPathElements(a,e,no(i)),o=o.concat(s)}return o},t.prototype.getNewPathes=function(t){var e=this,n=[],i=new Set;t.forEach((function(t){var o=e.getNewId("path"),r=e.getNewId("路径"),a=e.isLoopPath(t),s=t.join(",");i.has(s)||(i.add(s),n.push({routeId:o,name:r,elements:t,type:a,weight:0,similarElement:""}))}));var o=JSON.parse(JSON.stringify(this.pathes));return n.forEach((function(t){for(var n=0;n<o.length;n++){var i=o[n],r=e.similar2Path(no(t.elements),no(i.elements));r>t.weight&&i.weight<=r&&(t.weight=r,t.similarElement=i,r===i.weight&&i.similarElement?(i.similarElement.similarElement=null,i.similarElement.weight=0,i.similarElement=null,i.weight=0):(i.similarElement=t,i.weight=r))}})),n.forEach((function(t){t.similarElement&&t.similarElement.similarElement===t&&(t.routeId=t.similarElement.routeId,t.name=t.similarElement.name),delete t.similarElement,delete t.weight})),this.setPathes(n),n},t.prototype.similar2Path=function(t,e){var n=0,i=t.length+e.length;t.sort(),e.sort();var o=t.shift(),r=e.shift();while(void 0!==o&&void 0!==r)o===r?(n++,o=t.shift(),r=e.shift()):o<r?o=t.shift():o>r&&(r=e.shift());return n/i*200},t.prototype.getNewId=function(t){return t+"_"+a()},t.prototype.isLoopPath=function(t){var e=t.length;return t.indexOf(t[e-1])!==e-1?1:0},t.pluginName="flowPath"}(),function(){return io=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},io.apply(this,arguments)}),oo={LEFT_TOP:-1,LEFT:0,LEFT_BOTTOM:1},ro=(function(){function t(t){var e=this,n=t.lf;this.lf=n,this.trunk=[],n.layout=function(t){var n=e.lf.getGraphRawData();e.lf.setStartNodeType(t);var i=e.lf.getPathes();return e.levelHeight=[],e.newNodeMap=new Map,e.layout(n,i)}}t.prototype.layout=function(t,e){var n=this,i=[];e.forEach((function(t){var e=t.elements;e.length>i.length?i=e:e.length===i.length&&JSON.stringify(e)===JSON.stringify(n.trunk)&&(i=n.trunk)})),this.trunk=i;for(var o=this.formatData(t),r={nodes:[],edges:[]},a=i.length-1;a>=0;a--)this.setNodePosition(i[a],o,r,a,1);this.lf.graphModel.graphDataToModel(r)},t.prototype.setNodePosition=function(t,e,n,i,o){var r=this,a=e[t],s=a.text,l=a.type,d=a.next,h=a.properties,p=160*i+40,u=120*o,c={id:t,x:p,text:s,y:u,type:l,properties:h};return s&&"object"===typeof s&&(c.text=io(io({},s),{x:p+s.x,y:u+s.y})),this.newNodeMap.set(c.id,{x:c.x,y:c.y,type:l}),n.nodes.push(c),a.isFixed=!0,this.addLevelHeight(i,1),d&&d.length>0&&d.forEach((function(o){var a=e[o.nodeId];if(!a.isFixed){var s=r.getLevelHeight(i+1);r.addLevelHeight(i,1),r.setNodePosition(o.nodeId,e,n,i+1,s+1)}n.edges.push(io({id:o.edgeId,type:o.edgeType,sourceNodeId:t,targetNodeId:o.nodeId,properties:o.properties,text:o.text},r.getEdgeDataPoints(t,o.nodeId)))})),c},t.prototype.getEdgeDataPoints=function(t,e){var n=this.newNodeMap.get(t),i=this.newNodeMap.get(e),o=this.getShape(t),r=o.width,a=o.height,s=this.getShape(e),l=s.width,d=s.height,h=this.getRelativePosition(n,i),p={x:n.x,y:n.y},u={x:i.x,y:i.y};switch(h){case oo.LEFT:p.x=n.x+r/2,u.x=i.x-l/2;break;case oo.LEFT_TOP:p.y=n.y+a/2,u.x=i.x-l/2;break;case oo.LEFT_BOTTOM:p.x=n.x+r/2,u.y=i.y+d/2;break;default:break}return{startPoint:p,endPoint:u}},t.prototype.getRelativePosition=function(t,e){var n,i=t.y,o=e.y;return n=i<o?-1:i===o?0:1,n},t.prototype.getShape=function(t){var e=this.lf.getNodeModelById(t);return{height:e.height,width:e.width}},t.prototype.formatData=function(t){var e=t.nodes.reduce((function(t,e){var n=e.type,i=e.properties,o=e.text,r=e.x,a=e.y;return o&&"object"===typeof o&&(o.x=o.x-r,o.y=o.y-a),t[e.id]={type:n,properties:i,text:o,prev:[],next:[]},t}),{});return t.edges.forEach((function(t){var n=t.sourceNodeId,i=t.targetNodeId,o=t.id,r=t.properties,a=t.text,s=a;"object"===typeof a&&(s=a.value),e[n].next.push({edgeId:o,nodeId:i,edgeType:t.type,properties:r,text:s}),e[i].prev.push({edgeId:o,nodeId:n,properties:r,text:s})})),e},t.prototype.addLevelHeight=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var i=this.levelHeight[t];i||(i={positiveHeight:0,negativeHeight:0},this.levelHeight[t]=i),n?i.negativeHeight-=e:i.positiveHeight+=e},t.prototype.getLevelHeight=function(t,e){void 0===e&&(e=!1);var n=this.levelHeight[t];return n?e?n.negativeHeight:n.positiveHeight:0},t.pluginName="AutoLayout"}(),function(){return ro=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ro.apply(this,arguments)}),ao=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=r.next()).done)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},so=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ao(arguments[e]));return t},lo=function(t,e){var n=e.getModelById(t);return ho("node"===n.BaseType?n:n.targetNode,e)},ho=function(t,e){var n=[],i=[],o=function(t,i,r){void 0===r&&(r=null),r&&i.unshift.apply(i,so(e.getEdgeModels({sourceNodeId:t.id,targetNodeId:r.id}).map((function(t){return t.id})))),i.includes(t.id)?n.push(i):(i.unshift(t.id),t.incoming.nodes.length?t.incoming.nodes.forEach((function(e){o(e,i.slice(),t)})):n.push(i))},r=function(t,n,o){void 0===o&&(o=null),o&&n.push.apply(n,so(e.getEdgeModels({sourceNodeId:o.id,targetNodeId:t.id}).map((function(t){return t.id})))),n.includes(t.id)?i.push(n):(n.push(t.id),t.outgoing.nodes.length?t.outgoing.nodes.forEach((function(e){r(e,n.slice(),t)})):i.push(n))};return o(t,[]),r(t,[]),so(new Set(so(n.flat(),i.flat())))};(function(){function t(t){var e=t.lf;this.mode="path",this.manual=!1,this.tempStyles={},this.lf=e}t.prototype.setMode=function(t){this.mode=t},t.prototype.setManual=function(t){this.manual=t},t.prototype.highlightSingle=function(t){var e=this.lf.getModelById(t);"node"===e.BaseType?e.updateStyles(this.tempStyles[t]):"edge"===e.BaseType&&(e.updateStyles(this.tempStyles[t]),e.sourceNode.updateStyles(this.tempStyles[e.sourceNode.id]),e.targetNode.updateStyles(this.tempStyles[e.targetNode.id]))},t.prototype.highlightPath=function(t){var e=this,n=lo(t,this.lf);n.forEach((function(t){e.lf.getModelById(t).updateStyles(e.tempStyles[t])}))},t.prototype.highlight=function(t,e){var n=this;if(void 0===e&&(e=this.mode),!this.manual){Object.keys(this.tempStyles).length&&this.restoreHighlight(),Object.values(this.lf.graphModel.modelsMap).forEach((function(t){var e="node"===t.BaseType?t.getNodeStyle():t.getEdgeStyle();n.tempStyles[t.id]=ro({},e),t.setStyles({opacity:.1})}));var i={single:this.highlightSingle.bind(this),path:this.highlightPath.bind(this)};i[e](t)}},t.prototype.restoreHighlight=function(){var t=this;Object.keys(this.tempStyles).length&&(Object.values(this.lf.graphModel.modelsMap).forEach((function(e){var n,i=null!==(n=t.tempStyles[e.id])&&void 0!==n?n:{};e.updateStyles(ro({},i))})),this.tempStyles={})},t.prototype.render=function(t,e){var n=this;this.lf.on("node:mouseenter",(function(t){var e=t.data;return n.highlight(e.id)})),this.lf.on("edge:mouseenter",(function(t){var e=t.data;return n.highlight(e.id)})),this.lf.on("node:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("edge:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("history:change",this.restoreHighlight.bind(this))},t.prototype.destroy=function(){},t.pluginName="highlight"})()},fe3b:function(t,e,n){}}]);