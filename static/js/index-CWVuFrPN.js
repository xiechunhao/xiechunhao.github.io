/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{aw as F,ax as I,_ as M}from"./index-DuUxtc1j.js";import{d as O,r as q,f as E,E as D,c as m,a as p,o as _,Y as e,b as u,S as t,b7 as U,ap as W,u as a,aq as j,aH as J,a6 as f,X as c,aM as P,a7 as X,aw as Y,a1 as z,aj as A,b8 as G}from"./vsv-element-plus-CcCXTk6v.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const K={class:"web-socket-container"},Q={class:"list-content"},Z=O({name:"WebSocket",__name:"index",setup($){const b=q(),l=E({server:"ws://127.0.0.1:7002",serverHide:"ws://*.*.*.*",sendValue:"你好！",recordList:[]}),{status:v,data:i,send:w,close:h,open:k}=F(l.server,{autoReconnect:!1,heartbeat:!0}),S=E({sendValue:[{required:!0,trigger:"blur",message:"请输入内容"}]});D(()=>{if(i.value)try{const r=JSON.parse(i.value);l.recordList.push(r)}catch{l.recordList.push({res:i.value,id:Math.ceil(Math.random()*1e3),time:Date.now()})}});const n=m(()=>v.value==="OPEN"),L=m(()=>n.value?"success":"danger"),B=m(()=>[...l.recordList].reverse()),C=()=>{var r;(r=b.value)==null||r.validate(async s=>{s&&(w(l.sendValue),l.sendValue="你好")})},N=()=>{n.value?h():k()};return(r,s)=>{const T=J,d=j,g=P,V=X,y=W,x=U,H=Y,R=G;return _(),p("div",K,[e(R,{gutter:20},{default:t(()=>[e(x,{lg:12,md:24,sm:24,xl:12,xs:24},{default:t(()=>[e(y,{ref_key:"formRef",ref:b,"label-position":"top",model:a(l),rules:a(S)},{default:t(()=>[e(d,{label:"连接状态"},{default:t(()=>[e(T,{type:a(L)},{default:t(()=>[f(c(a(v)),1)]),_:1},8,["type"])]),_:1}),e(d,{label:"服务地址"},{default:t(()=>[e(g,{modelValue:a(l).serverHide,"onUpdate:modelValue":s[0]||(s[0]=o=>a(l).serverHide=o),clearable:"",disabled:""},null,8,["modelValue"])]),_:1}),e(d,{label:"内容",prop:"sendValue"},{default:t(()=>[e(g,{modelValue:a(l).sendValue,"onUpdate:modelValue":s[1]||(s[1]=o=>a(l).sendValue=o),clearable:"",disabled:!a(n),placeholder:"需要发送到服务器的内容",rows:3,type:"textarea"},null,8,["modelValue","disabled"])]),_:1}),e(d,{label:"操作"},{default:t(()=>[e(V,{type:a(n)?"danger":"primary",onClick:N},{default:t(()=>[f(c(a(n)?"关闭连接":"开启连接"),1)]),_:1},8,["type"]),e(V,{disabled:!a(n),type:"primary",onClick:C},{default:t(()=>s[2]||(s[2]=[f("发送")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(x,{lg:12,md:24,sm:24,xl:12,xs:24},{default:t(()=>[e(y,{"label-position":"top"},{default:t(()=>[e(d,{label:"消息记录"},{default:t(()=>[u("div",Q,[e(H,{style:{height:"calc(var(--el-container-height) - var(--el-margin) * 6)"}},{default:t(()=>[u("ul",null,[(_(!0),p(z,null,A(a(B),o=>(_(),p("li",{key:o.time},[u("div",null,c(a(I)(o.time)),1),u("div",null,c(o.res),1)]))),128))])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),s[3]||(s[3]=u("p",null,null,-1))])}}}),se=M(Z,[["__scopeId","data-v-ecc1d2fd"]]);export{se as default};
