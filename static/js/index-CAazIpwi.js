/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{_ as U,d as E,g as X}from"./RoleManagementEdit-BecVCV_f.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-CAvY8Qbf.js";import{_ as G}from"./index-Qf4Lmxow.js";import{_ as K}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-33Sqe07T.js";import{_ as Q}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-CdA2oT4X.js";import{d as W,r as d,f as Z,O as ee,a5 as te,a as S,o as c,Y as t,T as ae,S as n,a7 as ne,u as o,bq as oe,a6 as _,br as le,ap as se,aC as ie,aq as re,aM as _e,aS as pe,V as de,R,aP as ue,X as $,ca as ce,a1 as me,aj as fe,aH as ge,aJ as ve,aR as ye}from"./vsv-element-plus-CcCXTk6v.js";import{$ as q,f as v}from"./index-DuUxtc1j.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const be={class:"role-management-container auto-height-container"},ze=W({name:"RoleManagement",__name:"index",setup(we){const y=d(),m=d(null),b=d([]),u=d(!0),w=d(0),f=d([]),l=Z({pageNo:1,pageSize:20,role:""}),x=a=>{f.value=a},C=(a={})=>{a.id?m.value.showEdit(a):m.value.showEdit()},h=(a={})=>{if(a.id)q("您确定要删除当前项吗",null,async()=>{const{msg:e}=await E({ids:a.id});v(e,"success","hey"),await r()});else if(f.value.length>0){const e=f.value.map(i=>i.id).join(",");q("您确定要删除选中项吗",null,async()=>{const{msg:i}=await E({ids:e});v(i,"success","hey"),await r()})}else v("您未选中任何行","warning","hey")},z=a=>{l.pageNo=1,l.pageSize=a,r()},D=a=>{l.pageNo=a,r()},N=()=>{l.pageNo=1,r()},r=async()=>{u.value=!0;const{data:a}=await X(l);b.value=a.list,w.value=a.total,u.value=!1};return ee(()=>{var a;(a=y.value)==null||a.doLayout()}),te(()=>{r()}),(a,e)=>{const i=ne,L=Q,M=_e,k=re,V=se,B=K,F=G,p=ue,T=ge,j=ce,I=ve,A=ye,H=Y,J=U,O=de;return c(),S("div",be,[t(F,null,{default:n(()=>[t(L,{span:12},{default:n(()=>[t(i,{icon:o(oe),type:"primary",onClick:e[0]||(e[0]=s=>C())},{default:n(()=>e[4]||(e[4]=[_("添加")])),_:1},8,["icon"]),t(i,{icon:o(le),type:"danger",onClick:e[1]||(e[1]=s=>h())},{default:n(()=>e[5]||(e[5]=[_("批量删除")])),_:1},8,["icon"])]),_:1}),t(B,{span:12},{default:n(()=>[t(V,{inline:"",model:o(l),onSubmit:e[3]||(e[3]=ie(()=>{},["prevent"]))},{default:n(()=>[t(k,null,{default:n(()=>[t(M,{modelValue:o(l).role,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).role=s),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入角色"},null,8,["modelValue"])]),_:1}),t(k,null,{default:n(()=>[t(i,{icon:o(pe),loading:o(u),type:"primary",onClick:N},{default:n(()=>e[6]||(e[6]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),ae((c(),R(A,{ref_key:"tableRef",ref:y,border:"",data:o(b),onSelectionChange:x},{empty:n(()=>[t(I,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[t(p,{type:"selection",width:"38"}),t(p,{align:"center",label:"序号","show-overflow-tooltip":"",width:"55"},{default:n(({$index:s})=>[_($(s+1),1)]),_:1}),t(p,{align:"center",label:"id","min-width":"180",prop:"id","show-overflow-tooltip":""}),t(p,{align:"center",label:"角色码",prop:"role","show-overflow-tooltip":""}),t(p,{align:"center",label:"按钮权限","min-width":"320"},{default:n(({row:s})=>[t(j,{wrap:""},{default:n(()=>[(c(!0),S(me,null,fe(s.btnRolesCheckedList,(g,P)=>(c(),R(T,{key:P},{default:n(()=>[_($(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(p,{align:"center",label:"操作",width:"150"},{default:n(({row:s})=>[t(i,{text:"",type:"primary",onClick:g=>C(s)},{default:n(()=>e[7]||(e[7]=[_("编辑")])),_:2},1032,["onClick"]),t(i,{text:"",type:"danger",onClick:g=>h(s)},{default:n(()=>e[8]||(e[8]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,o(u)]]),t(H,{"current-page":o(l).pageNo,"page-size":o(l).pageSize,total:o(w),onCurrentChange:D,onSizeChange:z},null,8,["current-page","page-size","total"]),t(J,{ref_key:"editRef",ref:m,onFetchData:r},null,512)])}}});export{ze as default};
