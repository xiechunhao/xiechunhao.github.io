/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-10 23:35:01 
 */
import{_ as ce}from"./DefaultTableEdit.vue_vue_type_script_setup_true_lang-ChW6gm2l.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang-0mzQKwwt.js";import{_ as re}from"./index-_Rumst6h.js";import{_ as ue}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-BLZ9qst9.js";import{_ as pe}from"./VabQueryFormTopPanel-CnDcjwr0.js";import{d as _e,r as _,h as me,P as fe,a6 as be,b as ge,o as V,Z as e,T as n,aA as he,U as ye,ao as ke,aB as ve,u as i,ap as Ce,bv as we,a7 as s,a8 as Te,bp as Ee,bq as Se,S as De,aQ as Re,aO as Ve,Y as k,br as qe,am as xe,aG as $e,aI as ze,W as Ne,i as Me,az as Be}from"./vsv-element-plus-BKBbsRMj.js";import{g as Ue,d as q}from"./table-CTkMWxaR.js";import{b as Fe,w as Ae,s as Le,x as Ie,$ as x,f,y as Pe,z as je,_ as Ge}from"./index-8bsmFSvN.js";import"./vsv-icon-BFB3gnxk.js";import"./vsv-nprogress-D6dk31gD.js";const Oe={class:"tabs-table-container no-background-container"},Qe=_e({name:"TabsTable",__name:"tabsTable",setup(We){const g=_("first"),v=Fe(),$=Ae(),{getAllRoutes:z}=Le($),N=Ie(),{changeTabsMeta:M,addVisitedRoute:B}=N,h=_(null),C=_(),w=_([]),y=_(!0),T=_(0),r=_([]),o=me({pageNo:1,pageSize:20,checked1:!0,checked2:!1,checked3:!1,checked4:!1}),U=t=>{o.checked1=t,b()},F=t=>{o.checked2=t,b()},A=t=>{o.checked3=t,b()},L=t=>{o.checked4=t},I=()=>{b()},u=async()=>{y.value=!0;const{data:t}=await Ue(o);w.value=t.list,T.value=t.total,y.value=!1},P=t=>{o.pageNo=1,o.pageSize=t,u()},j=t=>{o.pageNo=t,u()},b=()=>{o.pageNo=1,u()},G=t=>({published:"success",draft:"primary",deleted:"danger"})[t],O=t=>{r.value=t},Q=()=>{h.value.showEdit()},W=(t={})=>{h.value.showEdit(t)},E=t=>{if(t.id)x("您确定要删除当前项吗",null,async()=>{const{msg:a}=await q({ids:t.id});f(a,"success","hey"),await u()});else if(r.value.length>0){const a=r.value.map(c=>c.id).join(",");x("您确定要删除选中项吗",null,async()=>{const{msg:c}=await q({ids:a});f(c,"success","hey"),await u()})}else f("您未选中任何行","warning","hey")},Y=async()=>{if(r.value.length>0)for(let t=0;t<r.value.length;t++){const a=Pe(z.value,"/vab/table/defaultTableDetail"),c=je({...a.at(-1),query:r.value[t]});c&&(await B(c),await M({title:"详情页",meta:{title:`${c.query.title} 详情页`}}))}else f("请至少选择一行进行详情页跳转","warning","hey")},S=t=>{t.id?v.push({path:"/vab/table/defaultTableDetail",query:{...t,timestamp:Date.now()}}):r.value.length===1?v.push({path:"/vab/table/defaultTableDetail",query:{...r.value[0],timestamp:Date.now()}}):f("请选择一行进行详情页跳转","warning","hey")};return fe(()=>{var t;(t=C.value)==null||t.doLayout()}),be(()=>{u()}),(t,a)=>{const c=we,Z=Ce,H=ke,J=pe,p=Te,K=ue,X=re,d=Ve,ee=qe,te=xe,ae=$e,D=ze,ne=Re,le=de,oe=ce,R=he,se=Be,ie=Ne;return V(),ge("div",Oe,[e(se,{modelValue:i(g),"onUpdate:modelValue":a[1]||(a[1]=l=>Me(g)?g.value=l:null),type:"border-card",onTabClick:I},{default:n(()=>[e(R,{label:"当前",name:"first"},{default:n(()=>[e(X,null,{default:n(()=>[e(J,null,{default:n(()=>[e(H,{inline:"",model:i(o),onSubmit:a[0]||(a[0]=ve(()=>{},["prevent"]))},{default:n(()=>[e(Z,{label:"分类"},{default:n(()=>[e(c,{checked:i(o).checked1,onChange:U},{default:n(()=>a[2]||(a[2]=[s("分类一")])),_:1},8,["checked"]),e(c,{checked:i(o).checked2,onChange:F},{default:n(()=>a[3]||(a[3]=[s("分类二")])),_:1},8,["checked"]),e(c,{checked:i(o).checked3,onChange:A},{default:n(()=>a[4]||(a[4]=[s("分类三")])),_:1},8,["checked"]),e(c,{checked:i(o).checked4,onChange:L},{default:n(()=>a[5]||(a[5]=[s("分类四")])),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1}),e(K,{span:24},{default:n(()=>[e(p,{icon:i(Ee),type:"primary",onClick:Q},{default:n(()=>a[6]||(a[6]=[s("添加")])),_:1},8,["icon"]),e(p,{icon:i(Se),type:"danger",onClick:E},{default:n(()=>a[7]||(a[7]=[s("删除")])),_:1},8,["icon"]),e(p,{type:"primary",onClick:S},{default:n(()=>a[8]||(a[8]=[s("详情")])),_:1}),e(p,{class:"hidden-xs-only",type:"primary",onClick:Y},{default:n(()=>a[9]||(a[9]=[s("后台打开详情")])),_:1})]),_:1})]),_:1}),ye((V(),De(ne,{ref_key:"tableRef",ref:C,border:"",data:i(w),onSelectionChange:O},{empty:n(()=>[e(D,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[e(d,{type:"selection",width:"38"}),e(d,{align:"center",label:"序号",width:"55"},{default:n(({$index:l})=>[s(k(l+1),1)]),_:1}),e(d,{align:"center",label:"序号",width:"55"},{default:n(({$index:l})=>[s(k(l+1),1)]),_:1}),e(d,{align:"center",label:"标题","min-width":"200",prop:"title"}),e(d,{align:"center",label:"作者",prop:"author"}),e(d,{align:"center",label:"评级","min-width":"200"},{default:n(({row:l})=>[e(ee,{modelValue:l.rate,"onUpdate:modelValue":m=>l.rate=m,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{align:"center",label:"数量","min-width":"100",prop:"count",sortable:""}),e(d,{align:"center",label:"开关",prop:"switch"},{default:n(({row:l})=>[e(te,{modelValue:l.switch,"onUpdate:modelValue":m=>l.switch=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{align:"center",label:"状态","min-width":"100"},{default:n(({row:l})=>[e(ae,{effect:"dark",type:G(l.status)},{default:n(()=>[s(k(l.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(d,{align:"center",label:"操作",width:"215"},{default:n(({row:l})=>[e(p,{text:"",type:"primary",onClick:m=>S(l)},{default:n(()=>a[10]||(a[10]=[s("详情")])),_:2},1032,["onClick"]),e(p,{text:"",type:"primary",onClick:m=>W(l)},{default:n(()=>a[11]||(a[11]=[s("编辑")])),_:2},1032,["onClick"]),e(p,{text:"",type:"danger",onClick:m=>E(l)},{default:n(()=>a[12]||(a[12]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ie,i(y)]]),e(le,{"current-page":i(o).pageNo,"page-size":i(o).pageSize,total:i(T),onCurrentChange:j,onSizeChange:P},null,8,["current-page","page-size","total"]),e(oe,{ref_key:"editRef",ref:h,onFetchData:u},null,512)]),_:1}),e(R,{label:"其他",name:"second"},{default:n(()=>[e(D,{class:"vab-data-empty",description:"暂无数据"})]),_:1})]),_:1},8,["modelValue"])])}}}),lt=Ge(Qe,[["__scopeId","data-v-f00658e9"]]);export{lt as default};
