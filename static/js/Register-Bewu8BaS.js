/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:46:00 
 */
import{d as L,M as y,$ as l,N as d,a2 as C,o as x,e as _,u as e,T as r,a3 as p,Y as R,a4 as g,a5 as Y}from"./vsv-element-plus-CxGOTlXz.js";import{u as j,a as z,t as o,i as H,b as U,r as J}from"./index-BxCyh4rX.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const K=""+new URL("../png/left_img_5-C6A-Mdq3.png",import.meta.url).href,O={class:"login-form"},Q=["src"],W={class:"title-tips"},re=L({name:"Register",__name:"Register",setup(X){const M=useRouter(),S=j(),k=z(),{title:P}=storeToRefs(k),{setToken:q}=S,m=ref(!1),v=ref(),h=ref(!1);let b;const w=ref(o("获取验证码")),a=reactive({username:"",password:"",phone:"",verificationCode:"",phoneCode:""}),I=(n,t,s)=>{t===""?s(new Error(o("用户名不能为空"))):s()},N=(n,t,s)=>{H(t)?s():s(new Error(o("密码不能少于6位")))},T=(n,t,s)=>{U(t)?s():s(new Error(o("请输入正确的手机号")))},$=reactive({username:[{required:!0,trigger:"blur",message:o("请输入用户名")},{validator:I,trigger:"blur"}],phone:[{required:!0,trigger:"blur",message:o("请输入手机号")},{validator:T,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:o("请输入密码")},{validator:N,trigger:"blur"}],phoneCode:[{required:!0,trigger:"blur",message:o("请输入手机验证码")}]}),B=()=>{var t;if(!U(a.phone)){(t=v.value)==null||t.validateField("phone");return}h.value=!0;let n=60;b=setInterval(()=>{n>0?(n--,w.value=`${o("获取验证码 ")+n}s`):(clearInterval(b),w.value=o("获取验证码"),h.value=!1)},1e3)},D=()=>{var n;(n=v.value)==null||n.validate(async t=>{if(t){m.value=!0;const{msg:s,data:{token:u}}=await J(a).catch(()=>{m.value=!1});$baseConfirm(`${s}，点击确定模拟进入拥有【admin】角色的首页`,null,async()=>{m.value=!1,q(u),await M.push("/index")})}})};return onUnmounted(()=>{clearInterval(b)}),(n,t)=>{const s=d("vab-icon"),u=d("el-input"),f=d("el-form-item"),c=d("el-button"),V=d("router-link"),E=d("el-form"),A=d("login-container"),F=C("focus"),G=C("throttle");return x(),y(A,null,{default:l(()=>[_("div",O,[_("img",{alt:"",class:"left-img",src:e(K)},null,8,Q),r(E,{ref_key:"formRef",ref:v,"label-position":"left",model:e(a),rules:e($),onSubmit:t[4]||(t[4]=Y(()=>{},["prevent"]))},{default:l(()=>[t[5]||(t[5]=_("div",{class:"title"},"hello !",-1)),_("div",W,p(e(P))+" "+p(e(o)("账号注册")),1),r(f,{prop:"username"},{default:l(()=>[R((x(),y(u,{modelValue:e(a).username,"onUpdate:modelValue":t[0]||(t[0]=i=>e(a).username=i),modelModifiers:{trim:!0},"auto-complete":"off",clearable:"",placeholder:e(o)("请输入用户名"),type:"text"},{prefix:l(()=>[r(s,{icon:"user-line"})]),_:1},8,["modelValue","placeholder"])),[[F]])]),_:1}),r(f,{prop:"phone"},{default:l(()=>[r(u,{modelValue:e(a).phone,"onUpdate:modelValue":t[1]||(t[1]=i=>e(a).phone=i),modelModifiers:{trim:!0},clearable:"",maxlength:"11",placeholder:e(o)("请输入手机号"),"show-word-limit":"",type:"text"},{prefix:l(()=>[r(s,{icon:"smartphone-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(f,{prop:"phoneCode",style:{position:"relative"}},{default:l(()=>[r(u,{modelValue:e(a).phoneCode,"onUpdate:modelValue":t[2]||(t[2]=i=>e(a).phoneCode=i),modelModifiers:{trim:!0},placeholder:e(o)("请输入手机验证码"),type:"text"},{prefix:l(()=>[r(s,{icon:"barcode-box-line"})]),_:1},8,["modelValue","placeholder"]),r(c,{class:"phone-code",disabled:e(h),type:"primary",onClick:B},{default:l(()=>[g(p(e(o)(e(w))),1)]),_:1},8,["disabled"])]),_:1}),r(f,{prop:"password"},{default:l(()=>[r(u,{modelValue:e(a).password,"onUpdate:modelValue":t[3]||(t[3]=i=>e(a).password=i),modelModifiers:{trim:!0},clearable:"",placeholder:e(o)("请输入密码"),type:"password"},{prefix:l(()=>[r(s,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),R((x(),y(c,{class:"login-btn",loading:e(m),"native-type":"submit",type:"primary"},{default:l(()=>[g(p(e(o)("注册")),1)]),_:1},8,["loading"])),[[G,D]]),r(V,{to:"/login"},{default:l(()=>[r(c,{style:{"margin-top":"20px","margin-left":"-10px"},type:"primary"},{default:l(()=>[g(p(e(o)("登录")),1)]),_:1})]),_:1}),r(V,{to:"/password"},{default:l(()=>[r(c,{style:{"margin-top":"20px"},text:"",type:"primary"},{default:l(()=>[g(p(e(o)("忘记密码")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})}}});export{re as default};
