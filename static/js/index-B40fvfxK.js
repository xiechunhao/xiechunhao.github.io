/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 16:08:17 
 */
import{g as P,_ as Q,d as E}from"./RoleManagementEdit-BRE7hcmC.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-CsTYoAB6.js";import{_ as Z}from"./index-C85hpOju.js";import{_ as G}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BToSE4-Z.js";import{_ as K}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DxKnGS_H.js";import{d as X,r as d,p as Y,Q as ee,a7 as te,o as m,b as S,W as t,T as n,u as o,bp as ae,a8 as _,bq as ne,aA as oe,aS as le,Z as se,S as $,a1 as R,a3 as ie,aj as re,a9 as _e,aO as pe,aq as de,au as ue,aP as me,aH as ce,bW as fe,aJ as ge,aR as ve,a0 as ye}from"./vsv-element-plus-DDEqdpLt.js";import{$ as q,f as v}from"./index-BMViVQGz.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const be={class:"role-management-container auto-height-container"},ze=X({name:"RoleManagement",__name:"index",setup(we){const y=d(),c=d(null),b=d([]),u=d(!0),w=d(0),f=d([]),l=Y({pageNo:1,pageSize:20,role:""}),x=a=>{f.value=a},C=(a={})=>{a.id?c.value.showEdit(a):c.value.showEdit()},h=(a={})=>{if(a.id)q("您确定要删除当前项吗",null,async()=>{const{msg:e}=await E({ids:a.id});v(e,"success","hey"),await r()});else if(f.value.length>0){const e=f.value.map(i=>i.id).join(",");q("您确定要删除选中项吗",null,async()=>{const{msg:i}=await E({ids:e});v(i,"success","hey"),await r()})}else v("您未选中任何行","warning","hey")},z=a=>{l.pageNo=1,l.pageSize=a,r()},D=a=>{l.pageNo=a,r()},N=()=>{l.pageNo=1,r()},r=async()=>{u.value=!0;const{data:a}=await P(l);b.value=a.list,w.value=a.total,u.value=!1};return ee(()=>{var a;(a=y.value)==null||a.doLayout()}),te(()=>{r()}),(a,e)=>{const i=_e,L=K,B=pe,k=de,F=ue,M=G,T=Z,p=me,V=ce,j=fe,A=ge,I=ve,W=U,H=Q,J=ye;return m(),S("div",be,[t(T,null,{default:n(()=>[t(L,{span:12},{default:n(()=>[t(i,{icon:o(ae),type:"primary",onClick:e[0]||(e[0]=s=>C())},{default:n(()=>e[4]||(e[4]=[_("添加")])),_:1},8,["icon"]),t(i,{icon:o(ne),type:"danger",onClick:e[1]||(e[1]=s=>h())},{default:n(()=>e[5]||(e[5]=[_("批量删除")])),_:1},8,["icon"])]),_:1}),t(M,{span:12},{default:n(()=>[t(F,{inline:"",model:o(l),onSubmit:e[3]||(e[3]=oe(()=>{},["prevent"]))},{default:n(()=>[t(k,null,{default:n(()=>[t(B,{modelValue:o(l).role,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).role=s),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入角色"},null,8,["modelValue"])]),_:1}),t(k,null,{default:n(()=>[t(i,{icon:o(le),loading:o(u),type:"primary",onClick:N},{default:n(()=>e[6]||(e[6]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),se((m(),$(I,{ref_key:"tableRef",ref:y,border:"",data:o(b),onSelectionChange:x},{empty:n(()=>[t(A,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[t(p,{type:"selection",width:"38"}),t(p,{align:"center",label:"序号","show-overflow-tooltip":"",width:"55"},{default:n(({$index:s})=>[_(R(s+1),1)]),_:1}),t(p,{align:"center",label:"id","min-width":"180",prop:"id","show-overflow-tooltip":""}),t(p,{align:"center",label:"角色码",prop:"role","show-overflow-tooltip":""}),t(p,{align:"center",label:"按钮权限","min-width":"320"},{default:n(({row:s})=>[t(j,{wrap:""},{default:n(()=>[(m(!0),S(ie,null,re(s.btnRolesCheckedList,(g,O)=>(m(),$(V,{key:O},{default:n(()=>[_(R(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(p,{align:"center",label:"操作",width:"150"},{default:n(({row:s})=>[t(i,{text:"",type:"primary",onClick:g=>C(s)},{default:n(()=>e[7]||(e[7]=[_("编辑")])),_:2},1032,["onClick"]),t(i,{text:"",type:"danger",onClick:g=>h(s)},{default:n(()=>e[8]||(e[8]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,o(u)]]),t(W,{"current-page":o(l).pageNo,"page-size":o(l).pageSize,total:o(w),onCurrentChange:D,onSizeChange:z},null,8,["current-page","page-size","total"]),t(H,{ref_key:"editRef",ref:c,onFetchData:r},null,512)])}}});export{ze as default};
