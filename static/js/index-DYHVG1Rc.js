/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-DPKRueiC.js";import{ak as z,s as B,u as K,f as Q,al as Z,am as h,an as ee,ao as b,ap as te,aq as oe,S as le,ar as se,as as ae}from"./index-DuUxtc1j.js";import{d as ne,f as re,r as y,w as ie,O as de,aL as me,a as V,o as s,R as a,W as u,Y as o,u as r,S as t,aq as pe,ar as ue,as as ye,a6 as l,a7 as fe,bC as _e,bB as be,aH as ge,X as w,ca as ke,T as d,aR as Ae,aP as ve,ap as Ee,a1 as we,aj as xe,dc as Ce,i as Te,dd as ce}from"./vsv-element-plus-CcCXTk6v.js";import"./vsv-icon-1Y3OapYK.js";import"./vsv-nprogress-D-M_H-zP.js";const Re={class:"permission-container"},Oe=ne({name:"Permission",__name:"index",setup(Se){const $=z(),{role:D,permission:N}=B($),O=K(),{username:x,token:C}=B(O),f=re({account:x.value}),T=y(!1),I=[{yes:"yes-1",no:"no-1"},{yes:"yes-2",no:"no-2"}],c=y("当前登录的账号非admin，如需查看演示地址全部功能，请使用admin账号登录。"),_=y(!1),L=y("primary"),F=y([{target:"#vsv-admin",title:"切换账号",description:c.value}]),P=()=>{_.value=!0},U=async()=>{te("正在切换账号请稍后..."),await localStorage.setItem(oe,`${f.account}-token-${le()}-${Date.now()}`),await location.reload(!0)},j=async()=>{await se()},q=async()=>{await ae()};return ie(C,R=>{Q(`token：${R}，刷新成功！`,"success","hey")}),de(()=>{x.value!=="admin"&&(T.value=!0,P())}),(R,e)=>{const g=Y,k=ye,J=ue,m=pe,n=fe,A=ge,v=be,G=_e,E=ke,S=ve,H=Ae,M=Ee,W=Ce,X=ce,i=me("permissions");return s(),V("div",Re,[r(T)?(s(),a(g,{key:0,title:r(c),type:"error"},null,8,["title"])):u("",!0),r(Z)?u("",!0):(s(),a(g,{key:1,title:"检测到您当前的登录拦截已关闭，无法模拟切换角色功能，请在src/config/setting.config.js中配置loginInterception为true，开启登录拦截",type:"error"})),o(g,{title:`当前路由模式为：${r(h)==="all"?"后端路由":"前端路由"} ，是否开启前端角色权限控制：${r(ee)===!0?"是":"否"}`},null,8,["title"]),o(M,{"label-position":"top",model:r(f)},{default:t(()=>[o(m,{label:"账号切换"},{default:t(()=>[o(J,{modelValue:r(f).account,"onUpdate:modelValue":e[0]||(e[0]=p=>r(f).account=p),onChange:U},{default:t(()=>[o(k,{id:"vsv-admin",label:"admin",value:"admin"},{default:t(()=>e[2]||(e[2]=[l("admin")])),_:1}),o(k,{label:"editor",value:"editor"},{default:t(()=>e[3]||(e[3]=[l("editor")])),_:1}),o(k,{label:"test",value:"test"},{default:t(()=>e[4]||(e[4]=[l("test")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"token续期（每隔5s可刷新token）"},{default:t(()=>[o(n,{type:"primary",onClick:j},{default:t(()=>e[5]||(e[5]=[l("刷新token")])),_:1})]),_:1}),o(m,{label:"当前账号"},{default:t(()=>[o(G,{border:"",column:3,direction:"vertical"},{default:t(()=>[o(v,null,{label:t(()=>e[6]||(e[6]=[l("角色")])),default:t(()=>[o(A,null,{default:t(()=>[l(w(JSON.stringify(r(D))),1)]),_:1})]),_:1}),o(v,null,{label:t(()=>e[7]||(e[7]=[l("权限点")])),default:t(()=>[o(A,null,{default:t(()=>[l(w(JSON.stringify(r(N))),1)]),_:1})]),_:1}),o(v,null,{label:t(()=>e[8]||(e[8]=[l("token")])),default:t(()=>[o(A,null,{default:t(()=>[l(w(r(C)),1)]),_:1})]),_:1})]),_:1})]),_:1}),o(m,{label:"RBAC 角色控制"},{default:t(()=>[o(E,{wrap:""},{default:t(()=>[d((s(),a(n,{type:"primary"},{default:t(()=>e[9]||(e[9]=[l('拥有["Admin"]的按钮')])),_:1})),[[i,["Admin"]]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[10]||(e[10]=[l('未拥有["Admin"]的按钮')])),_:1})),[[i,{role:["Admin"],mode:"except"}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[11]||(e[11]=[l('拥有["Editor"]的按钮')])),_:1})),[[i,["Editor"]]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[12]||(e[12]=[l('未拥有["Editor"]的按钮')])),_:1})),[[i,{role:["Editor"],mode:"except"}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[13]||(e[13]=[l(' 同时拥有["Admin","Editor"]的按钮 ')])),_:1})),[[i,{role:["Admin","Editor"],mode:"allOf"}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[14]||(e[14]=[l('拥有["Test"]的按钮')])),_:1})),[[i,["Test"]]])]),_:1})]),_:1}),o(m,{label:"RBAC 权限点控制"},{default:t(()=>[o(E,{wrap:""},{default:t(()=>[d((s(),a(n,{type:"primary"},{default:t(()=>e[15]||(e[15]=[l('拥有["read:system"]的按钮')])),_:1})),[[i,{permission:["read:system"]}]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[16]||(e[16]=[l(`未拥有["'read:system'"]的按钮`)])),_:1})),[[i,{permission:["read:system"],mode:"except"}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[17]||(e[17]=[l('拥有["write:system"]的按钮')])),_:1})),[[i,{permission:["write:system"]}]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[18]||(e[18]=[l('未拥有["write:system"]的按钮')])),_:1})),[[i,{permission:["write:system"],mode:"except"}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[19]||(e[19]=[l('拥有["delete:system"]的按钮')])),_:1})),[[i,{permission:["delete:system"]}]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[20]||(e[20]=[l(' 未拥有["delete:system"]的按钮 ')])),_:1})),[[i,{permission:["delete:system"],mode:"except"}]])]),_:1})]),_:1}),o(m,{label:"RBAC 角色&权限点控制"},{default:t(()=>[o(E,{wrap:""},{default:t(()=>[d((s(),a(n,{type:"primary"},{default:t(()=>e[21]||(e[21]=[l(' 拥有["Admin"]或["delete:system"]的按钮 ')])),_:1})),[[i,{role:["Admin"],permission:["delete:system"]}]]),d((s(),a(n,{type:"primary"},{default:t(()=>e[22]||(e[22]=[l(' 拥有["Editor"]和["read:system"]的按钮 ')])),_:1})),[[i,{role:["Editor"],permission:["read:system"],mode:"allOf"}]]),d((s(),a(n,{type:"danger"},{default:t(()=>e[23]||(e[23]=[l(' 未拥有["Admin"]和["delete:system"]的按钮 ')])),_:1})),[[i,{role:["Admin"],permission:["delete:system"],mode:"except"}]])]),_:1})]),_:1}),o(m,{label:"RBAC 自定义按钮&表格列权限控制"},{default:t(()=>[r(b)(["Admin"])?(s(),a(n,{key:0,type:"primary"},{default:t(()=>e[24]||(e[24]=[l('拥有["Admin"]的按钮')])),_:1})):u("",!0),r(b)({role:["Admin"],mode:"except"})?(s(),a(n,{key:1,type:"danger"},{default:t(()=>e[25]||(e[25]=[l('未拥有["Admin"]的按钮')])),_:1})):u("",!0),o(H,{border:"",data:I,style:{display:"block","margin-top":"var(--el-margin)"}},{default:t(()=>[r(b)(["Admin"])?(s(),a(S,{key:0,label:"拥有['Admin']的表格列",prop:"yes"})):u("",!0),r(b)({role:["Admin"],mode:"except"})?(s(),a(S,{key:1,label:"未拥有['Admin']的表格列",prop:"no"})):u("",!0)]),_:1})]),_:1}),o(m,{label:"后端code指令强制开启锁屏"},{default:t(()=>[o(n,{type:"primary",onClick:q},{default:t(()=>e[26]||(e[26]=[l("点击锁屏")])),_:1})]),_:1})]),_:1},8,["model"]),o(X,{modelValue:r(_),"onUpdate:modelValue":e[1]||(e[1]=p=>Te(_)?_.value=p:null),type:r(L)},{default:t(()=>[(s(!0),V(we,null,xe(r(F),p=>(s(),a(W,{key:p,description:p.description,target:p.target,title:p.title},null,8,["description","target","title"]))),128))]),_:1},8,["modelValue","type"])])}}});export{Oe as default};
