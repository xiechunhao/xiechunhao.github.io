/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-08 15:47:29 
 */
import{k as c,C as U,f as h}from"./index-CzpjYiTj.js";import{d as q,r as f,h as b,S as F,o as B,T as r,Z as t,ao as L,u as a,ap as R,aL as T,bw as D,bk as I,a8 as N,a7 as $,i as j,p as G}from"./vsv-element-plus-B-S50adB.js";function A(n){return c({url:"/userManagement/getList",method:"get",params:n})}const O=n=>c({url:"/userManagement/doEdit",method:"post",data:n}),H=n=>c({url:"/userManagement/doDelete",method:"post",data:n}),J=q({name:"UserManagementEdit",__name:"UserManagementEdit",emits:["fetch-data"],setup(n,{expose:V,emit:w}){const v=w,m=f(),l=b({username:"",password:"",email:"",roles:[]}),x=b({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱"}],roles:[{required:!0,trigger:"blur",message:"请选择角色"}]}),p=f(""),u=f(!1);V({showEdit:o=>{u.value=!0,G(()=>{o?(p.value="编辑",Object.assign(l,o)):p.value="添加"})}});const _=()=>{var o,e;(o=m.value)==null||o.clearValidate(),(e=m.value)==null||e.resetFields(),v("fetch-data")},E=()=>{var o;(o=m.value)==null||o.validate(async e=>{if(e){const{msg:d}=await O(l);await h(d,"success","hey"),await _(),u.value=!1}})};return(o,e)=>{const d=T,i=R,g=I,k=D,M=L,y=N,C=U;return B(),F(C,{modelValue:a(u),"onUpdate:modelValue":e[4]||(e[4]=s=>j(u)?u.value=s:null),"append-to-body":"",title:a(p),width:"500px",onClose:_},{footer:r(()=>[t(y,{type:"primary",onClick:E},{default:r(()=>e[5]||(e[5]=[$("保存")])),_:1})]),default:r(()=>[t(M,{ref_key:"formRef",ref:m,"label-width":"80px",model:a(l),rules:a(x)},{default:r(()=>[t(i,{label:"用户名",prop:"username"},{default:r(()=>[t(d,{modelValue:a(l).username,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).username=s),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"密码",prop:"password"},{default:r(()=>[t(d,{modelValue:a(l).password,"onUpdate:modelValue":e[1]||(e[1]=s=>a(l).password=s),modelModifiers:{trim:!0},clearable:"",type:"password"},null,8,["modelValue"])]),_:1}),t(i,{label:"邮箱",prop:"email"},{default:r(()=>[t(d,{modelValue:a(l).email,"onUpdate:modelValue":e[2]||(e[2]=s=>a(l).email=s),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"角色",prop:"roles"},{default:r(()=>[t(k,{modelValue:a(l).roles,"onUpdate:modelValue":e[3]||(e[3]=s=>a(l).roles=s)},{default:r(()=>[t(g,{label:"admin"}),t(g,{label:"editor"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{J as _,H as d,A as g};
