/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-10-12 16:06:30 
 */
import{_ as xe}from"./DefaultTableEdit.vue_vue_type_script_setup_true_lang-4-va7wmR.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-BwKkUDxi.js";import{_ as Re}from"./index-Bxa3JjgG.js";import{_ as De}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BfuTFmT5.js";import{_ as Te}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-sfirE_Gx.js";import{_ as qe}from"./VabQueryFormTopPanel-3SShBhiq.js";import{_ as $e}from"./index-Cb-9Eo_O.js";import{d as Fe,r,p as Ne,w as A,Q as ze,a7 as Me,$ as Ue,o as w,b as x,W as e,T as l,u as n,h as Be,bv as Ae,aA as Le,Z as C,ae as S,aS as Ye,a8 as c,n as L,bp as He,bq as Pe,e as Ie,S as Oe,a1 as Y,aO as je,b7 as Je,aq as Qe,bs as We,ar as Ze,as as Ge,a9 as Ke,au as Xe,aP as et,bt as tt,an as lt,aH as at,aJ as nt,aR as ot,b8 as st,a0 as it}from"./vsv-element-plus-OoOmiKKG.js";import{g as dt,d as H}from"./table-8sl0KWo0.js";import{a as ut,w as rt,s as ct,x as pt,A as mt,$ as P,f as h,y as _t,z as ft}from"./index-D08hoOyC.js";import"./vsv-icon-Df9CwUcM.js";import"./vsv-nprogress-CNnfF26O.js";const bt={key:0},gt={key:1},ht={class:"custom-table-right-tools"},$t=Fe({name:"ColumnTable",__name:"columnTable",setup(vt){const R=ut(),I=rt(),{getAllRoutes:O}=ct(I),j=pt(),{changeTabsMeta:J,addVisitedRoute:Q}=j,k=r(null),D=r(),_=r(!0),T=r([]),f=r(!1),v=r(!0),q=r(0),p=r([]),s=Ne({pageNo:1,pageSize:20}),y=r(""),$=r(),{exit:W,enter:Z,isFullscreen:F}=mt();A(y,a=>{var t;(t=$.value)==null||t.filter(a)});const G=(a,t)=>a?t.label.includes(a):!0,K=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],X=()=>{m()},ee={children:"children",label:"label"},m=async()=>{v.value=!0;const{data:a}=await dt(s);T.value=a.list,q.value=a.total,v.value=!1},te=a=>{s.pageNo=1,s.pageSize=a,m()},le=a=>{s.pageNo=a,m()},N=()=>{s.pageNo=1,m()},ae=()=>{f.value=!f.value,f.value?Z():W()},ne=a=>({published:"success",draft:"primary",deleted:"danger"})[a],oe=()=>{_.value=!_.value},se=a=>{p.value=a},ie=()=>{k.value.showEdit()},de=(a={})=>{k.value.showEdit(a)},z=a=>{if(a.id)P("您确定要删除当前项吗",null,async()=>{const{msg:t}=await H({ids:a.id});h(t,"success","hey"),await m()});else if(p.value.length>0){const t=p.value.map(i=>i.id).join(",");P("您确定要删除选中项吗",null,async()=>{const{msg:i}=await H({ids:t});h(i,"success","hey"),await m()})}else h("您未选中任何行","warning","hey")},ue=async()=>{if(p.value.length>0)for(let a=0;a<p.value.length;a++){const t=_t(O.value,"/vab/table/defaultTableDetail"),i=ft({...t.at(-1),query:p.value[a]});i&&(await Q(i),await J({title:"详情页",meta:{title:`${i.query.title} 详情页`}}))}else h("请至少选择一行进行详情页跳转","warning","hey")},M=a=>{a.id?R.push({path:"/vab/table/defaultTableDetail",query:{...a,timestamp:Date.now()}}):p.value.length===1?R.push({path:"/vab/table/defaultTableDetail",query:{...p.value[0],timestamp:Date.now()}}):h("请选择一行进行详情页跳转","warning","hey")};return A(F,()=>{F.value?f.value=!0:f.value=!1},{immediate:!0}),ze(()=>{var a;(a=D.value)==null||a.doLayout()}),Me(()=>{m()}),(a,t)=>{const i=je,U=$e,B=Je,g=Qe,re=We,V=Ze,ce=Ge,d=Ke,E=Ue("vab-icon"),pe=Xe,me=qe,_e=Te,fe=De,be=Re,u=et,ge=tt,he=lt,ve=at,ye=nt,we=ot,Ce=Se,ke=st,Ve=xe,Ee=it;return w(),x("div",{class:L(["column-table-container no-background-container auto-height-container",{"fullscreen-container":n(f)}])},[e(ke,{gutter:20},{default:l(()=>[e(B,{lg:5,md:24,sm:24,xl:4,xs:24},{default:l(()=>[e(U,{class:"auto-height-card"},{default:l(()=>[e(i,{modelValue:n(y),"onUpdate:modelValue":t[0]||(t[0]=o=>Be(y)?y.value=o:null),placeholder:"请输入查询条件",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),e(n(Ae),{ref_key:"treeRef",ref:$,data:K,"default-expand-all":"","filter-node-method":G,props:ee,onNodeClick:X},null,512)]),_:1})]),_:1}),e(B,{lg:19,md:24,sm:24,xl:20,xs:24},{default:l(()=>[e(U,{class:"auto-height-card"},{default:l(()=>[e(be,null,{default:l(()=>[e(me,null,{default:l(()=>[e(pe,{inline:"",model:n(s),onSubmit:t[5]||(t[5]=Le(()=>{},["prevent"]))},{default:l(()=>[e(g,{label:"标题"},{default:l(()=>[e(i,{modelValue:n(s).title,"onUpdate:modelValue":t[1]||(t[1]=o=>n(s).title=o),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),C(e(g,{label:"作者"},{default:l(()=>[e(i,{modelValue:n(s).author,"onUpdate:modelValue":t[2]||(t[2]=o=>n(s).author=o),clearable:"",placeholder:"请输入作者"},null,8,["modelValue"])]),_:1},512),[[S,!n(_)]]),C(e(g,{label:"时间"},{default:l(()=>[e(re,{modelValue:n(s).datetime,"onUpdate:modelValue":t[3]||(t[3]=o=>n(s).datetime=o),format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择时间",type:"datetime"},null,8,["modelValue"])]),_:1},512),[[S,!n(_)]]),C(e(g,{label:"状态"},{default:l(()=>[e(ce,{modelValue:n(s).status,"onUpdate:modelValue":t[4]||(t[4]=o=>n(s).status=o),placeholder:"请选择状态"},{default:l(()=>[e(V,{label:"success",value:"published"}),e(V,{label:"primary",value:"draft"}),e(V,{label:"danger",value:"deleted"})]),_:1},8,["modelValue"])]),_:1},512),[[S,!n(_)]]),e(g,null,{default:l(()=>[e(d,{icon:n(Ye),loading:n(v),"native-type":"submit",type:"primary",onClick:N},{default:l(()=>t[6]||(t[6]=[c("查询")])),_:1},8,["icon","loading"]),e(d,{class:"hidden-xs-only",text:"",type:"primary",onClick:oe},{default:l(()=>[n(_)?(w(),x("span",bt,"展开")):(w(),x("span",gt,"合并")),e(E,{class:L(["vab-dropdown",{"vab-dropdown-active":n(_)}]),icon:"arrow-up-s-line"},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(_e,{span:20},{default:l(()=>[e(d,{icon:n(He),type:"primary",onClick:ie},{default:l(()=>t[7]||(t[7]=[c("添加")])),_:1},8,["icon"]),e(d,{icon:n(Pe),type:"danger",onClick:z},{default:l(()=>t[8]||(t[8]=[c("删除")])),_:1},8,["icon"]),e(d,{type:"primary",onClick:M},{default:l(()=>t[9]||(t[9]=[c("详情")])),_:1}),e(d,{class:"hidden-xs-only",type:"primary",onClick:ue},{default:l(()=>t[10]||(t[10]=[c("后台打开详情")])),_:1})]),_:1}),e(fe,{span:4},{default:l(()=>[Ie("div",ht,[e(d,{onClick:N},{default:l(()=>[e(E,{icon:"refresh-line"})]),_:1}),e(d,{onClick:ae},{default:l(()=>[e(E,{icon:n(f)?"fullscreen-exit-fill":"fullscreen-fill"},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),C((w(),Oe(we,{ref_key:"tableRef",ref:D,border:"",data:n(T),onSelectionChange:se},{empty:l(()=>[e(ye,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[e(u,{type:"selection",width:"38"}),e(u,{align:"center",label:"序号",width:"55"},{default:l(({$index:o})=>[c(Y(o+1),1)]),_:1}),e(u,{align:"center",label:"标题","min-width":"200",prop:"title"}),e(u,{align:"center",label:"作者",prop:"author"}),e(u,{align:"center",label:"评级","min-width":"200"},{default:l(({row:o})=>[e(ge,{modelValue:o.rate,"onUpdate:modelValue":b=>o.rate=b,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{align:"center",label:"数量","min-width":"100",prop:"count",sortable:""}),e(u,{align:"center",label:"开关",prop:"switch"},{default:l(({row:o})=>[e(he,{modelValue:o.switch,"onUpdate:modelValue":b=>o.switch=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{align:"center",label:"状态","min-width":"100"},{default:l(({row:o})=>[e(ve,{effect:"dark",type:ne(o.status)},{default:l(()=>[c(Y(o.status),1)]),_:2},1032,["type"])]),_:1}),e(u,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(u,{align:"center",label:"操作",width:"215"},{default:l(({row:o})=>[e(d,{text:"",type:"primary",onClick:b=>M(o)},{default:l(()=>t[11]||(t[11]=[c("详情")])),_:2},1032,["onClick"]),e(d,{text:"",type:"primary",onClick:b=>de(o)},{default:l(()=>t[12]||(t[12]=[c("编辑")])),_:2},1032,["onClick"]),e(d,{text:"",type:"danger",onClick:b=>z(o)},{default:l(()=>t[13]||(t[13]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ee,n(v)]]),e(Ce,{"current-page":n(s).pageNo,"page-size":n(s).pageSize,total:n(q),onCurrentChange:le,onSizeChange:te},null,8,["current-page","page-size","total"])]),_:1})]),_:1})]),_:1}),e(Ve,{ref_key:"editRef",ref:k,onFetchData:m},null,512)],2)}}});export{$t as default};
