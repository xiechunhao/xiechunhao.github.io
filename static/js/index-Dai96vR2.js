/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 15:53:45 
 */
import{g as P,_ as Q,d as E}from"./UserManagementEdit.vue_vue_type_script_setup_true_lang-DxfRYn3P.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-CsTYoAB6.js";import{_ as G}from"./index-SmC-Ygf6.js";import{_ as K}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BToSE4-Z.js";import{_ as X}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DxKnGS_H.js";import{d as Y,r as m,p as ee,Q as te,a7 as ae,o as p,b as k,W as e,T as a,u as o,bp as ne,a8 as c,bq as oe,aA as le,aS as se,Z as ie,S,a1 as $,a3 as re,aj as _e,a9 as ce,aO as me,aq as de,au as pe,aP as ue,aH as fe,bW as ge,aJ as ye,aR as be,a0 as ve}from"./vsv-element-plus-DDEqdpLt.js";import{$ as q,f as y}from"./index-CQIU_Sxf.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const we={class:"user-management-container auto-height-container"},Ne=Y({name:"UserManagement",__name:"index",setup(he){const b=m(),u=m(null),v=m([]),d=m(!0),w=m(0),f=m([]),l=ee({pageNo:1,pageSize:20,username:""}),x=n=>{f.value=n},z=()=>{u.value.showEdit()},D=(n={})=>{u.value.showEdit(n)},h=(n={})=>{if(n.id)q("您确定要删除当前项吗",null,async()=>{const{msg:t}=await E({ids:n.id});y(t,"success","hey"),await _()});else if(f.value.length>0){const t=f.value.map(s=>s.id).join(",");q("您确定要删除选中项吗",null,async()=>{const{msg:s}=await E({ids:t});y(s,"success","hey"),await _()})}else y("您未选中任何行","warning","hey")},N=n=>{l.pageNo=1,l.pageSize=n,_()},R=n=>{l.pageNo=n,_()},B=()=>{l.pageNo=1,_()},_=async()=>{d.value=!0;const{data:n}=await P(l);v.value=n.list,w.value=n.total,d.value=!1};return te(()=>{var n;(n=b.value)==null||n.doLayout()}),ae(()=>{_()}),(n,t)=>{const s=ce,F=X,L=me,C=de,M=pe,T=K,V=G,i=ue,A=fe,j=ge,I=ye,U=be,W=Z,H=Q,J=ve;return p(),k("div",we,[e(V,null,{default:a(()=>[e(F,{span:12},{default:a(()=>[e(s,{icon:o(ne),type:"primary",onClick:z},{default:a(()=>t[2]||(t[2]=[c("添加")])),_:1},8,["icon"]),e(s,{icon:o(oe),type:"danger",onClick:h},{default:a(()=>t[3]||(t[3]=[c("批量删除")])),_:1},8,["icon"])]),_:1}),e(T,{span:12},{default:a(()=>[e(M,{inline:"",model:o(l),onSubmit:t[1]||(t[1]=le(()=>{},["prevent"]))},{default:a(()=>[e(C,null,{default:a(()=>[e(L,{modelValue:o(l).username,"onUpdate:modelValue":t[0]||(t[0]=r=>o(l).username=r),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(s,{icon:o(se),loading:o(d),type:"primary",onClick:B},{default:a(()=>t[4]||(t[4]=[c("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),ie((p(),S(U,{ref_key:"tableRef",ref:b,border:"",data:o(v),onSelectionChange:x},{empty:a(()=>[e(I,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:a(({$index:r})=>[c($(r+1),1)]),_:1}),e(i,{align:"center",label:"id","min-width":"180",prop:"id","show-overflow-tooltip":""}),e(i,{align:"center",label:"用户名","min-width":"120",prop:"username"}),e(i,{align:"center",label:"邮箱","min-width":"120",prop:"email","show-overflow-tooltip":""}),e(i,{align:"center",label:"角色","min-width":"155"},{default:a(({row:r})=>[e(j,{wrap:""},{default:a(()=>[(p(!0),k(re,null,_e(r.roles,(g,O)=>(p(),S(A,{key:O},{default:a(()=>[c($(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),e(i,{align:"center",label:"修改时间","min-width":"160",prop:"datetime","show-overflow-tooltip":""}),e(i,{align:"center",label:"操作",width:"150"},{default:a(({row:r})=>[e(s,{text:"",type:"primary",onClick:g=>D(r)},{default:a(()=>t[5]||(t[5]=[c("编辑")])),_:2},1032,["onClick"]),e(s,{text:"",type:"danger",onClick:g=>h(r)},{default:a(()=>t[6]||(t[6]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,o(d)]]),e(W,{"current-page":o(l).pageNo,"page-size":o(l).pageSize,total:o(w),onCurrentChange:R,onSizeChange:N},null,8,["current-page","page-size","total"]),e(H,{ref_key:"editRef",ref:u,onFetchData:_},null,512)])}}});export{Ne as default};
