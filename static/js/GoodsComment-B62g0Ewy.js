/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:39:13 
 */
import{d as I,N as l,a2 as Y,o as C,b as H,T as e,$ as t,u as s,ak as J,a4 as d,a5 as K,ag as O,Y as P,M as Q,a3 as k}from"./vsv-element-plus-CxGOTlXz.js";import{g as W,d as S}from"./goodsComment-BIQfOLla.js";import"./index-BKznZfTt.js";import"./vsv-icon-B5tQoIEl.js";import"./vsv-nprogress-DAXSSYSi.js";const X={class:"goods-comment-container auto-height-container"},le=I({name:"GoodsComment",__name:"GoodsComment",setup(Z){const f=ref(null),g=ref(),b=ref([]),m=ref(!0),v=ref(0),u=ref([]),r=reactive({pageNo:1,pageSize:20}),p=async()=>{m.value=!0;const{data:o}=await W(r);b.value=o.list,v.value=o.total,m.value=!1},D=o=>{r.pageNo=1,r.pageSize=o,p()},V=o=>{r.pageNo=o,p()},q=()=>{r.pageNo=1,p()},N=o=>{u.value=o},$=(o={})=>{f.value.showEdit(o)},y=o=>{if(o.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:a}=await S({ids:o.id});$baseMessage(a,"success","hey"),await p()});else if(u.value.length>0){const a=u.value.map(c=>c.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:c}=await S({ids:a});$baseMessage(c,"success","hey"),await p()})}else $baseMessage("您未选中任何行","warning","hey")};return onActivated(()=>{var o;(o=g.value)==null||o.doLayout()}),onBeforeMount(()=>{p()}),(o,a)=>{const c=l("el-button"),z=l("vab-query-form-left-panel"),x=l("el-input"),h=l("el-form-item"),M=l("el-form"),R=l("vab-query-form-right-panel"),B=l("vab-query-form"),i=l("el-table-column"),w=l("el-image"),E=l("el-popover"),L=l("el-rate"),U=l("el-tag"),F=l("el-empty"),G=l("el-table"),T=l("vab-pagination"),j=l("goods-comment-edit"),A=Y("loading");return C(),H("div",X,[e(B,null,{default:t(()=>[e(z,null,{default:t(()=>[e(c,{icon:s(J),type:"danger",onClick:y},{default:t(()=>a[2]||(a[2]=[d("删除")])),_:1},8,["icon"])]),_:1}),e(R,null,{default:t(()=>[e(M,{inline:"",model:s(r),onSubmit:a[1]||(a[1]=K(()=>{},["prevent"]))},{default:t(()=>[e(h,{label:"商品名称"},{default:t(()=>[e(x,{modelValue:s(r).name,"onUpdate:modelValue":a[0]||(a[0]=n=>s(r).name=n),clearable:"",placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(c,{icon:s(O),loading:s(m),"native-type":"submit",type:"primary",onClick:q},{default:t(()=>a[3]||(a[3]=[d("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),P((C(),Q(G,{ref_key:"tableRef",ref:g,border:"",data:s(b),onSelectionChange:N},{empty:t(()=>[e(F,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:t(({$index:n})=>[d(k(n+1),1)]),_:1}),e(i,{align:"center",label:"商品ID","min-width":"180",prop:"id","show-overflow-tooltip":""}),e(i,{align:"center",label:"商品名称","min-width":"120",prop:"name","show-overflow-tooltip":"",sortable:""}),e(i,{align:"center",label:"商品图",prop:"image"},{default:t(({row:n})=>[e(E,{placement:"top-start"},{reference:t(()=>[e(w,{src:n.image},null,8,["src"])]),default:t(()=>[e(w,{src:n.image},null,8,["src"])]),_:2},1024)]),_:1}),e(i,{align:"center",label:"评级","min-width":"200"},{default:t(({row:n})=>[e(L,{modelValue:n.rate,"onUpdate:modelValue":_=>n.rate=_,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{align:"center",label:"评论内容","min-width":"200",prop:"comment","show-overflow-tooltip":""}),e(i,{align:"center",label:"回复内容","min-width":"200",prop:"reply","show-overflow-tooltip":""}),e(i,{align:"center",label:"回复状态","min-width":"100"},{default:t(({row:n})=>[e(U,{effect:"dark",type:n.replyStatus=="已回复"?"success":n.replyStatus=="未回复"?"warning":"info"},{default:t(()=>[d(k(n.replyStatus),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(i,{align:"center",label:"操作",width:"150"},{default:t(({row:n})=>[e(c,{text:"",type:"primary",onClick:_=>$(n)},{default:t(()=>a[4]||(a[4]=[d("回复")])),_:2},1032,["onClick"]),e(c,{text:"",type:"danger",onClick:_=>y(n)},{default:t(()=>a[5]||(a[5]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,s(m)]]),e(T,{"current-page":s(r).pageNo,"page-size":s(r).pageSize,total:s(v),onCurrentChange:V,onSizeChange:D},null,8,["current-page","page-size","total"]),e(j,{ref_key:"editRef",ref:f,onFetchData:p},null,512)])}}});export{le as default};
