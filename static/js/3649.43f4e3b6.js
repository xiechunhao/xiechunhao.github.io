/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2025-03-05 10:50:28
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[3649,6030],{278:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=l(4657),o=(l(81775),l(86647),l(59173)),r=(l(63482),l(57991)),s=(l(29835),l(40612)),n=(l(87275),l(90173),l(32512)),u=(l(33938),l(30182),l(33358)),d=(l(46058),l(34641)),i=l(27386);const f={class:"vab-tree-border"};function m(e,t,l,m,c,b){const k=u.WK,v=r.xE,p=n.q,h=s.dI,g=s.o5,_=r.US,y=o.S2,F=a.kZ;return(0,d.uX)(),(0,d.Wv)(F,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogFormVisible=t),title:e.title,width:"500px",onClose:e.close},{footer:(0,d.k6)((()=>[(0,d.bF)(y,{onClick:e.close},{default:(0,d.k6)((()=>t[3]||(t[3]=[(0,d.eW)("取 消")]))),_:1},8,["onClick"]),(0,d.bF)(y,{type:"primary",onClick:e.save},{default:(0,d.k6)((()=>t[4]||(t[4]=[(0,d.eW)("确 定")]))),_:1},8,["onClick"])])),default:(0,d.k6)((()=>[(0,d.bF)(_,{ref:"formRef","label-width":"80px",model:e.form,rules:e.rules},{default:(0,d.k6)((()=>[(0,d.bF)(v,{label:"角色码",prop:"role"},{default:(0,d.k6)((()=>[(0,d.bF)(k,{modelValue:e.form.role,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.role=t)},null,8,["modelValue"])])),_:1}),(0,d.bF)(v,{label:"菜单"},{default:(0,d.k6)((()=>[(0,d.Lk)("div",f,[(0,d.bF)(p,{ref:"treeRef",data:e.list,"default-checked-keys":["/","/vab","/other","/mall","/noColumn","/setting","https://github.com/zxwk1998/vue-admin-better","/error"],"default-expanded-keys":[],"node-key":"path","show-checkbox":""},{default:(0,d.k6)((({data:e})=>[(0,d.Lk)("span",null,(0,i.v_)(e.meta.title),1)])),_:1},8,["data"])])])),_:1}),(0,d.bF)(v,{label:"按钮权限"},{default:(0,d.k6)((()=>[(0,d.bF)(g,{modelValue:e.form.btnRolesCheckedList,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.btnRolesCheckedList=t)},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.btnRoles,(e=>((0,d.uX)(),(0,d.Wv)(h,{key:e.value,label:e.value,value:e.value},{default:(0,d.k6)((()=>[(0,d.eW)((0,i.v_)(e.lable),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","onClose"])}var c=l(52569),b=l(64243),k=l(37489),v=(0,d.pM)({name:"RoleManagementEdit",emits:["fetch-data"],setup(e,{emit:t}){const l=(0,d.WQ)("$baseMessage"),a=(0,k.Kh)({formRef:null,treeRef:null,form:{btnRolesCheckedList:[]},rules:{role:[{required:!0,trigger:"blur",message:"请输入角色码"}]},title:"",dialogFormVisible:!1,list:[],btnRoles:[{lable:"读",value:"read:system"},{lable:"写",value:"write:system"},{lable:"删",value:"delete:system"}]}),o=e=>{e?(a.title="编辑",a.form=JSON.parse(JSON.stringify(e))):a.title="添加",a.dialogFormVisible=!0},r=()=>{a["formRef"].resetFields(),a.form={btnRolesCheckedList:[]},a.dialogFormVisible=!1},s=async()=>{const{data:{list:e}}=await(0,b.v)();a.list=e},n=()=>{a["formRef"].validate((async e=>{if(e){const e=a["treeRef"].getCheckedKeys(),o={"treeArray:":e},{msg:s}=await(0,c.Ed)({...a.form,...o});l(s,"success","vab-hey-message-success"),t("fetch-data"),r()}}))};return(0,d.sV)((()=>{s()})),{...(0,k.QW)(a),showEdit:o,close:r,fetchData:s,save:n}}});function p(e){e.__source="src/views/setting/roleManagement/components/RoleManagementEdit.vue"}var h=l(48499);"function"===typeof p&&p(v);const g=(0,h.A)(v,[["render",m],["__scopeId","data-v-5ffbd048"]]);var _=g},52569:function(e,t,l){l.d(t,{Ed:function(){return r},pL:function(){return s},vS:function(){return o}});var a=l(98356);function o(e){return(0,a.A)({url:"/roleManagement/getList",method:"get",params:e})}function r(e){return(0,a.A)({url:"/roleManagement/doEdit",method:"post",data:e})}function s(e){return(0,a.A)({url:"/roleManagement/doDelete",method:"post",data:e})}}}]);