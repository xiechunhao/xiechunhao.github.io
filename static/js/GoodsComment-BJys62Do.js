/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-25 17:01:24 
 */
import{d as T,b as Y,M as e,V as t,R as Z,u as s,D as H,F as l,Y as J,o as C,ae as K,_ as d,$ as O,ab as P,Z as k}from"./vsv-element-plus-CbS2IxKo.js";import{g as Q,d as S}from"./goodsComment-DOTOKaGe.js";import"./index-BnT9uhJE.js";import"./vsv-icon-93gfr_RM.js";import"./vsv-nprogress-DzPgnd7z.js";const W={class:"goods-comment-container auto-height-container"},le=T({name:"GoodsComment",__name:"GoodsComment",setup(X){const f=ref(null),g=ref(),b=ref([]),m=ref(!0),v=ref(0),u=ref([]),r=reactive({pageNo:1,pageSize:20}),p=async()=>{m.value=!0;const{data:o}=await Q(r);b.value=o.list,v.value=o.total,m.value=!1},D=o=>{r.pageNo=1,r.pageSize=o,p()},V=o=>{r.pageNo=o,p()},q=()=>{r.pageNo=1,p()},$=o=>{u.value=o},z=(o={})=>{f.value.showEdit(o)},y=o=>{if(o.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:n}=await S({ids:o.id});$baseMessage(n,"success","hey"),await p()});else if(u.value.length>0){const n=u.value.map(c=>c.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:c}=await S({ids:n});$baseMessage(c,"success","hey"),await p()})}else $baseMessage("您未选中任何行","warning","hey")};return onActivated(()=>{var o;(o=g.value)==null||o.doLayout()}),onBeforeMount(()=>{p()}),(o,n)=>{const c=l("el-button"),N=l("vab-query-form-left-panel"),R=l("el-input"),h=l("el-form-item"),x=l("el-form"),M=l("vab-query-form-right-panel"),B=l("vab-query-form"),i=l("el-table-column"),w=l("el-image"),E=l("el-popover"),F=l("el-rate"),L=l("el-tag"),U=l("el-empty"),G=l("el-table"),j=l("vab-pagination"),A=l("goods-comment-edit"),I=J("loading");return C(),Y("div",W,[e(B,null,{default:t(()=>[e(N,null,{default:t(()=>[e(c,{icon:s(K),type:"danger",onClick:y},{default:t(()=>n[2]||(n[2]=[d("删除")])),_:1},8,["icon"])]),_:1}),e(M,null,{default:t(()=>[e(x,{inline:"",model:s(r),onSubmit:n[1]||(n[1]=O(()=>{},["prevent"]))},{default:t(()=>[e(h,{label:"商品名称"},{default:t(()=>[e(R,{modelValue:s(r).name,"onUpdate:modelValue":n[0]||(n[0]=a=>s(r).name=a),clearable:"",placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(c,{icon:s(P),loading:s(m),"native-type":"submit",type:"primary",onClick:q},{default:t(()=>n[3]||(n[3]=[d("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),Z((C(),H(G,{ref_key:"tableRef",ref:g,border:"",data:s(b),onSelectionChange:$},{empty:t(()=>[e(U,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:t(({$index:a})=>[d(k(a+1),1)]),_:1}),e(i,{align:"center",label:"商品ID","min-width":"180",prop:"id","show-overflow-tooltip":""}),e(i,{align:"center",label:"商品名称","min-width":"120",prop:"name","show-overflow-tooltip":"",sortable:""}),e(i,{align:"center",label:"商品图",prop:"image"},{default:t(({row:a})=>[e(E,{placement:"top-start"},{reference:t(()=>[e(w,{src:a.image},null,8,["src"])]),default:t(()=>[e(w,{src:a.image},null,8,["src"])]),_:2},1024)]),_:1}),e(i,{align:"center",label:"评级","min-width":"200"},{default:t(({row:a})=>[e(F,{modelValue:a.rate,"onUpdate:modelValue":_=>a.rate=_,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{align:"center",label:"评论内容","min-width":"200",prop:"comment","show-overflow-tooltip":""}),e(i,{align:"center",label:"回复内容","min-width":"200",prop:"reply","show-overflow-tooltip":""}),e(i,{align:"center",label:"回复状态","min-width":"100"},{default:t(({row:a})=>[e(L,{effect:"dark",type:a.replyStatus=="已回复"?"success":a.replyStatus=="未回复"?"warning":"info"},{default:t(()=>[d(k(a.replyStatus),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(i,{align:"center",label:"操作",width:"150"},{default:t(({row:a})=>[e(c,{text:"",type:"primary",onClick:_=>z(a)},{default:t(()=>n[4]||(n[4]=[d("回复")])),_:2},1032,["onClick"]),e(c,{text:"",type:"danger",onClick:_=>y(a)},{default:t(()=>n[5]||(n[5]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,s(m)]]),e(j,{"current-page":s(r).pageNo,"page-size":s(r).pageSize,total:s(v),onCurrentChange:V,onSizeChange:D},null,8,["current-page","page-size","total"]),e(A,{ref_key:"editRef",ref:f,onFetchData:p},null,512)])}}});export{le as default};
