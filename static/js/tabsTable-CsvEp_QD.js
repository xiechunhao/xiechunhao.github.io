/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-10-12 15:51:39 
 */
import{d as se,b as ie,K as e,S as l,u as d,I as de,B as o,W as ce,o as R,Z as re,Y as i,ab as ue,ac as pe,P as fe,A as me,X as y}from"./vsv-element-plus-CqWB58IK.js";import{g as _e,d as q}from"./table-Cu0ISenj.js";import{e as be,f as ge,h as he,g as ye,_ as ve}from"./index-xIgfXPDD.js";import"./vsv-icon-DZFdJ319.js";import"./vsv-nprogress-CYSXMSUQ.js";const ke={class:"tabs-table-container no-background-container"},Ce=se({name:"TabsTable",__name:"tabsTable",setup(we){const b=ref("first"),v=useRouter(),M=be(),{getAllRoutes:$}=storeToRefs(M),x=ge(),{changeTabsMeta:N,addVisitedRoute:z}=x,g=ref(null),k=ref(),C=ref([]),h=ref(!0),w=ref(0),u=ref([]),s=reactive({pageNo:1,pageSize:20,checked1:!0,checked2:!1,checked3:!1,checked4:!1}),B=t=>{s.checked1=t,_()},U=t=>{s.checked2=t,_()},A=t=>{s.checked3=t,_()},E=t=>{s.checked4=t},F=()=>{_()},p=async()=>{h.value=!0;const{data:t}=await _e(s);C.value=t.list,w.value=t.total,h.value=!1},L=t=>{s.pageNo=1,s.pageSize=t,p()},I=t=>{s.pageNo=t,p()},_=()=>{s.pageNo=1,p()},j=t=>({published:"success",draft:"primary",deleted:"danger"})[t],K=t=>{u.value=t},P=()=>{g.value.showEdit()},W=(t={})=>{g.value.showEdit(t)},D=t=>{if(t.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:a}=await q({ids:t.id});$baseMessage(a,"success","hey"),await p()});else if(u.value.length>0){const a=u.value.map(c=>c.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:c}=await q({ids:a});$baseMessage(c,"success","hey"),await p()})}else $baseMessage("您未选中任何行","warning","hey")},X=async()=>{if(u.value.length>0)for(let t=0;t<u.value.length;t++){const a=he($.value,"/vab/table/defaultTableDetail"),c=ye({...a.at(-1),query:u.value[t]});c&&(await z(c),await N({title:"详情页",meta:{title:`${c.query.title} 详情页`}}))}else $baseMessage("请至少选择一行进行详情页跳转","warning","hey")},S=t=>{t.id?v.push({path:"/vab/table/defaultTableDetail",query:{...t,timestamp:Date.now()}}):u.value.length===1?v.push({path:"/vab/table/defaultTableDetail",query:{...u.value[0],timestamp:Date.now()}}):$baseMessage("请选择一行进行详情页跳转","warning","hey")};return onActivated(()=>{var t;(t=k.value)==null||t.doLayout()}),onBeforeMount(()=>{p()}),(t,a)=>{const c=o("el-check-tag"),Y=o("el-form-item"),Z=o("el-form"),G=o("vab-query-form-top-panel"),f=o("el-button"),H=o("vab-query-form-left-panel"),J=o("vab-query-form"),r=o("el-table-column"),O=o("el-rate"),Q=o("el-switch"),ee=o("el-tag"),T=o("el-empty"),te=o("el-table"),ae=o("vab-pagination"),le=o("default-table-edit"),V=o("el-tab-pane"),ne=o("el-tabs"),oe=ce("loading");return R(),ie("div",ke,[e(ne,{modelValue:d(b),"onUpdate:modelValue":a[1]||(a[1]=n=>de(b)?b.value=n:null),type:"border-card",onTabClick:F},{default:l(()=>[e(V,{label:"当前",name:"first"},{default:l(()=>[e(J,null,{default:l(()=>[e(G,null,{default:l(()=>[e(Z,{inline:"",model:d(s),onSubmit:a[0]||(a[0]=re(()=>{},["prevent"]))},{default:l(()=>[e(Y,{label:"分类"},{default:l(()=>[e(c,{checked:d(s).checked1,onChange:B},{default:l(()=>a[2]||(a[2]=[i("分类一")])),_:1},8,["checked"]),e(c,{checked:d(s).checked2,onChange:U},{default:l(()=>a[3]||(a[3]=[i("分类二")])),_:1},8,["checked"]),e(c,{checked:d(s).checked3,onChange:A},{default:l(()=>a[4]||(a[4]=[i("分类三")])),_:1},8,["checked"]),e(c,{checked:d(s).checked4,onChange:E},{default:l(()=>a[5]||(a[5]=[i("分类四")])),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{span:24},{default:l(()=>[e(f,{icon:d(ue),type:"primary",onClick:P},{default:l(()=>a[6]||(a[6]=[i("添加")])),_:1},8,["icon"]),e(f,{icon:d(pe),type:"danger",onClick:D},{default:l(()=>a[7]||(a[7]=[i("删除")])),_:1},8,["icon"]),e(f,{type:"primary",onClick:S},{default:l(()=>a[8]||(a[8]=[i("详情")])),_:1}),e(f,{class:"hidden-xs-only",type:"primary",onClick:X},{default:l(()=>a[9]||(a[9]=[i("后台打开详情")])),_:1})]),_:1})]),_:1}),fe((R(),me(te,{ref_key:"tableRef",ref:k,border:"",data:d(C),onSelectionChange:K},{empty:l(()=>[e(T,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[e(r,{type:"selection",width:"38"}),e(r,{align:"center",label:"序号",width:"55"},{default:l(({$index:n})=>[i(y(n+1),1)]),_:1}),e(r,{align:"center",label:"序号",width:"55"},{default:l(({$index:n})=>[i(y(n+1),1)]),_:1}),e(r,{align:"center",label:"标题","min-width":"200",prop:"title"}),e(r,{align:"center",label:"作者",prop:"author"}),e(r,{align:"center",label:"评级","min-width":"200"},{default:l(({row:n})=>[e(O,{modelValue:n.rate,"onUpdate:modelValue":m=>n.rate=m,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{align:"center",label:"数量","min-width":"100",prop:"count",sortable:""}),e(r,{align:"center",label:"开关",prop:"switch"},{default:l(({row:n})=>[e(Q,{modelValue:n.switch,"onUpdate:modelValue":m=>n.switch=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{align:"center",label:"状态","min-width":"100"},{default:l(({row:n})=>[e(ee,{effect:"dark",type:j(n.status)},{default:l(()=>[i(y(n.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(r,{align:"center",label:"操作",width:"215"},{default:l(({row:n})=>[e(f,{text:"",type:"primary",onClick:m=>S(n)},{default:l(()=>a[10]||(a[10]=[i("详情")])),_:2},1032,["onClick"]),e(f,{text:"",type:"primary",onClick:m=>W(n)},{default:l(()=>a[11]||(a[11]=[i("编辑")])),_:2},1032,["onClick"]),e(f,{text:"",type:"danger",onClick:m=>D(n)},{default:l(()=>a[12]||(a[12]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,d(h)]]),e(ae,{"current-page":d(s).pageNo,"page-size":d(s).pageSize,total:d(w),onCurrentChange:I,onSizeChange:L},null,8,["current-page","page-size","total"]),e(le,{ref_key:"editRef",ref:g,onFetchData:p},null,512)]),_:1}),e(V,{label:"其他",name:"second"},{default:l(()=>[e(T,{class:"vab-data-empty",description:"暂无数据"})]),_:1})]),_:1},8,["modelValue"])])}}}),qe=ve(Ce,[["__scopeId","data-v-f00658e9"]]);export{qe as default};
