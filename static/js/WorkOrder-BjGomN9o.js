/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-03-10 23:35:01 
 */
import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-0mzQKwwt.js";import{_ as O}from"./index-_Rumst6h.js";import{_ as W}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-Dnl0cUI9.js";import{_ as P}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-BLZ9qst9.js";import{d as U,r as p,h as j,P as A,a6 as G,b as Q,o as v,Z as e,U as Y,T as t,a8 as Z,u as l,bq as H,a7 as _,ao as J,aB as K,ap as X,aL as ee,aR as te,W as ae,S as oe,aO as ne,Y as w,bC as le,aG as se,aI as ie,aQ as re}from"./vsv-element-plus-BKBbsRMj.js";import{g as ce,a as C}from"./workOrder-vUygJBUk.js";import{$ as k,f as d}from"./index-8bsmFSvN.js";import"./vsv-icon-BFB3gnxk.js";import"./vsv-nprogress-D6dk31gD.js";const pe={class:"work-order-container auto-height-container"},Ce=U({name:"WorkOrder",__name:"WorkOrder",setup(_e){const f=p(),g=p([]),u=p(!0),b=p(0),m=p([]),s=j({pageNo:1,pageSize:20});A(()=>{var a;(a=f.value)==null||a.doLayout()});const c=async()=>{u.value=!0;const{data:a}=await ce(s);g.value=a.list,b.value=a.total,u.value=!1},E=a=>{s.pageNo=1,s.pageSize=a,c()},S=a=>{s.pageNo=a,c()},z=()=>{s.pageNo=1,c()},N=a=>{m.value=a},y=a=>{if(a.id)k("您确定要删除当前项吗",null,async()=>{const{msg:o}=await C({ids:a.id});d(o,"success","hey"),await c()});else if(m.value.length>0){const o=m.value.map(r=>r.id).join(",");k("您确定要删除选中项吗",null,async()=>{const{msg:r}=await C({ids:o});d(r,"success","hey"),await c()})}else d("您未选中任何行","warning","hey")};return G(()=>{c()}),(a,o)=>{const r=Z,$=P,q=ee,h=X,B=J,D=W,x=O,i=ne,L=le,R=se,T=ie,V=re,I=M,F=ae;return v(),Q("div",pe,[e(x,null,{default:t(()=>[e($,null,{default:t(()=>[e(r,{icon:l(H),type:"danger",onClick:y},{default:t(()=>o[2]||(o[2]=[_("删除")])),_:1},8,["icon"])]),_:1}),e(D,null,{default:t(()=>[e(B,{inline:"",model:l(s),onSubmit:o[1]||(o[1]=K(()=>{},["prevent"]))},{default:t(()=>[e(h,{label:"工单标题"},{default:t(()=>[e(q,{modelValue:l(s).title,"onUpdate:modelValue":o[0]||(o[0]=n=>l(s).title=n),clearable:"",placeholder:"请输入工单标题"},null,8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(r,{icon:l(te),loading:l(u),"native-type":"submit",type:"primary",onClick:z},{default:t(()=>o[3]||(o[3]=[_("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),Y((v(),oe(V,{ref_key:"tableRef",ref:f,border:"",data:l(g),onSelectionChange:N},{empty:t(()=>[e(T,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(i,{type:"selection",width:"38"}),e(i,{align:"center",label:"序号",width:"55"},{default:t(({$index:n})=>[_(w(n+1),1)]),_:1}),e(i,{align:"center",label:"工单号","min-width":"200",prop:"uuid","show-overflow-tooltip":""}),e(i,{align:"center",label:"标题","min-width":"200",prop:"title","show-overflow-tooltip":""}),e(i,{align:"center",label:"进度","min-width":"180"},{default:t(({row:n})=>[e(L,{percentage:parseInt(n.progress),status:n.progress=="100"?"success":""},null,8,["percentage","status"])]),_:1}),e(i,{align:"center",label:"提交者",prop:"submit"}),e(i,{align:"center",label:"受理人员","min-width":"90",prop:"accept","show-overflow-tooltip":""}),e(i,{align:"center",label:"工单状态","min-width":"90"},{default:t(({row:n})=>[e(R,{effect:"dark",type:n.status=="处理中"?"warning":n.status=="已处理"?"success":"primary"},{default:t(()=>[_(w(n.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"操作",width:"80"},{default:t(({row:n})=>[e(r,{text:"",type:"danger",onClick:ue=>y(n)},{default:t(()=>o[4]||(o[4]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,l(u)]]),e(I,{"current-page":l(s).pageNo,"page-size":l(s).pageSize,total:l(b),onCurrentChange:S,onSizeChange:E},null,8,["current-page","page-size","total"])])}}});export{Ce as default};
