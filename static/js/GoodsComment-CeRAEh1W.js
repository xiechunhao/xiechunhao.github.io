/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-27 15:50:12 
 */
import{g as H,_ as J,d as E}from"./GoodsCommentEdit.vue_vue_type_script_setup_true_lang-DZm3k66_.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-CsTYoAB6.js";import{_ as Q}from"./index-DnOH92CS.js";import{_ as W}from"./VabQueryFormRightPanel.vue_vue_type_script_setup_true_lang-BToSE4-Z.js";import{_ as Z}from"./VabQueryFormLeftPanel.vue_vue_type_script_setup_true_lang-DxKnGS_H.js";import{d as K,r as m,p as X,Q as Y,a7 as ee,o as S,b as te,W as e,T as t,u as s,bq as ae,a8 as p,aA as oe,aS as ne,Z as le,S as se,a1 as k,a9 as ie,aO as re,aq as ce,au as me,aP as pe,bd as _e,aI as de,bt as ue,aH as fe,aJ as ge,aR as be,a0 as ye}from"./vsv-element-plus-DDEqdpLt.js";import{$ as V,f}from"./index-6xtryadw.js";import"./vsv-icon-DFkIF_Wl.js";import"./vsv-nprogress-CAgsOcyS.js";const ve={class:"goods-comment-container auto-height-container"},qe=K({name:"GoodsComment",__name:"GoodsComment",setup(he){const g=m(null),b=m(),y=m([]),_=m(!0),v=m(0),d=m([]),i=X({pageNo:1,pageSize:20}),c=async()=>{_.value=!0;const{data:a}=await H(i);y.value=a.list,v.value=a.total,_.value=!1},$=a=>{i.pageNo=1,i.pageSize=a,c()},D=a=>{i.pageNo=a,c()},R=()=>{i.pageNo=1,c()},q=a=>{d.value=a},z=(a={})=>{g.value.showEdit(a)},h=a=>{if(a.id)V("您确定要删除当前项吗",null,async()=>{const{msg:o}=await E({ids:a.id});f(o,"success","hey"),await c()});else if(d.value.length>0){const o=d.value.map(r=>r.id).join(",");V("您确定要删除选中项吗",null,async()=>{const{msg:r}=await E({ids:o});f(r,"success","hey"),await c()})}else f("您未选中任何行","warning","hey")};return Y(()=>{var a;(a=b.value)==null||a.doLayout()}),ee(()=>{c()}),(a,o)=>{const r=ie,N=Z,x=re,w=ce,B=me,I=W,T=Q,l=pe,C=_e,F=de,L=ue,M=fe,U=ge,A=be,G=O,P=J,j=ye;return S(),te("div",ve,[e(T,null,{default:t(()=>[e(N,null,{default:t(()=>[e(r,{icon:s(ae),type:"danger",onClick:h},{default:t(()=>o[2]||(o[2]=[p("删除")])),_:1},8,["icon"])]),_:1}),e(I,null,{default:t(()=>[e(B,{inline:"",model:s(i),onSubmit:o[1]||(o[1]=oe(()=>{},["prevent"]))},{default:t(()=>[e(w,{label:"商品名称"},{default:t(()=>[e(x,{modelValue:s(i).name,"onUpdate:modelValue":o[0]||(o[0]=n=>s(i).name=n),clearable:"",placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[e(r,{icon:s(ne),loading:s(_),"native-type":"submit",type:"primary",onClick:R},{default:t(()=>o[3]||(o[3]=[p("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),le((S(),se(A,{ref_key:"tableRef",ref:b,border:"",data:s(y),onSelectionChange:q},{empty:t(()=>[e(U,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(l,{type:"selection",width:"38"}),e(l,{align:"center",label:"序号",width:"55"},{default:t(({$index:n})=>[p(k(n+1),1)]),_:1}),e(l,{align:"center",label:"商品ID","min-width":"180",prop:"id","show-overflow-tooltip":""}),e(l,{align:"center",label:"商品名称","min-width":"120",prop:"name","show-overflow-tooltip":"",sortable:""}),e(l,{align:"center",label:"商品图",prop:"image"},{default:t(({row:n})=>[e(F,{placement:"top-start"},{reference:t(()=>[e(C,{src:n.image},null,8,["src"])]),default:t(()=>[e(C,{src:n.image},null,8,["src"])]),_:2},1024)]),_:1}),e(l,{align:"center",label:"评级","min-width":"200"},{default:t(({row:n})=>[e(L,{modelValue:n.rate,"onUpdate:modelValue":u=>n.rate=u,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{align:"center",label:"评论内容","min-width":"200",prop:"comment","show-overflow-tooltip":""}),e(l,{align:"center",label:"回复内容","min-width":"200",prop:"reply","show-overflow-tooltip":""}),e(l,{align:"center",label:"回复状态","min-width":"100"},{default:t(({row:n})=>[e(M,{effect:"dark",type:n.replyStatus=="已回复"?"success":n.replyStatus=="未回复"?"warning":"info"},{default:t(()=>[p(k(n.replyStatus),1)]),_:2},1032,["type"])]),_:1}),e(l,{align:"center",label:"时间","min-width":"160",prop:"datetime"}),e(l,{align:"center",label:"操作",width:"150"},{default:t(({row:n})=>[e(r,{text:"",type:"primary",onClick:u=>z(n)},{default:t(()=>o[4]||(o[4]=[p("回复")])),_:2},1032,["onClick"]),e(r,{text:"",type:"danger",onClick:u=>h(n)},{default:t(()=>o[5]||(o[5]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,s(_)]]),e(G,{"current-page":s(i).pageNo,"page-size":s(i).pageSize,total:s(v),onCurrentChange:D,onSizeChange:$},null,8,["current-page","page-size","total"]),e(P,{ref_key:"editRef",ref:g,onFetchData:c},null,512)])}}});export{qe as default};
