/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 21:23:19 
 */
import{d as G,b as S,K as l,S as a,B as n,W as H,o as u,u as o,I as J,ae as O,b4 as Q,e as ee,X as le,Z as ae,a9 as te,Y as y,ao as oe,ac as ne,P as se,A as x,F as re,a2 as ie,R as de}from"./vsv-element-plus-CleF0dO9.js";import{g as ce,d as q}from"./table-rNzIqkgx.js";import{_ as ue}from"./index-wMoNB7-P.js";import"./vsv-icon-DrZkBOPN.js";import"./vsv-nprogress-D5kd6v05.js";const pe={class:"explorer-container no-background-container auto-height-container"},_e={style:{"margin-left":"3px"}},me=G({name:"Explorer",__name:"Explorer",setup(fe){const g=ref([]),p=ref(!0),C=ref(0),c=ref([]),r=reactive({pageNo:1,pageSize:20}),_=ref(""),w=ref(),k=ref([]);watch(_,t=>{var e;(e=w.value)==null||e.filter(t)});const z=(t,e)=>t?e.label.includes(t):!0,D=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],B=()=>{i()},E={children:"children",label:"label"},i=async()=>{c.value=[],p.value=!0;const{data:t}=await ce(r);g.value=t.list,C.value=t.total,k.value=t.list.map(e=>e.image),p.value=!1},M=t=>{r.pageNo=1,r.pageSize=t,i()},R=t=>{r.pageNo=t,i()},$=()=>{r.pageNo=1,i()},F=(t,e)=>{if(t)c.value.push(e.id);else{const d=c.value.findIndex(m=>m===m.id);c.value.splice(d,1)}},L=t=>{if(t.id)$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:e}=await q({ids:t.id});$baseMessage(e,"success","hey"),await i()});else if(c.value.length>0){const e=c.value.map(d=>d.id).join(",");$baseConfirm("您确定要删除选中项吗",null,async()=>{const{msg:d}=await q({ids:e});$baseMessage(d,"success","hey"),await i()})}else $baseMessage("您未选中任何行","warning","hey")};return onBeforeMount(()=>{i()}),(t,e)=>{const d=n("el-input"),m=n("el-icon"),b=n("vab-card"),f=n("el-col"),V=n("el-form-item"),v=n("el-button"),U=n("el-form"),I=n("vab-query-form-top-panel"),T=n("el-upload"),j=n("vab-query-form-left-panel"),P=n("vab-query-form"),A=n("el-checkbox"),K=n("el-image"),W=n("el-empty"),N=n("el-row"),X=n("vab-pagination"),Y=H("loading");return u(),S("div",pe,[l(N,{gutter:20},{default:a(()=>[l(f,{lg:4,md:24,sm:24,xl:4,xs:24},{default:a(()=>[l(b,{class:"auto-height-card"},{default:a(()=>[l(d,{modelValue:o(_),"onUpdate:modelValue":e[0]||(e[0]=s=>J(_)?_.value=s:null),placeholder:"请输入查询条件",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),l(o(O),{ref_key:"treeRef",ref:w,data:D,"default-expand-all":"","filter-node-method":z,props:E,onNodeClick:B},{default:a(({node:s})=>[l(m,null,{default:a(()=>[l(o(Q))]),_:1}),ee("span",_e,le(s.label),1)]),_:1},512)]),_:1})]),_:1}),l(f,{lg:20,md:24,sm:24,xl:20,xs:24},{default:a(()=>[l(b,{class:"auto-height-card"},{default:a(()=>[l(P,null,{default:a(()=>[l(I,null,{default:a(()=>[l(U,{inline:"",model:o(r),onSubmit:e[2]||(e[2]=ae(()=>{},["prevent"]))},{default:a(()=>[l(V,{label:"标题"},{default:a(()=>[l(d,{modelValue:o(r).title,"onUpdate:modelValue":e[1]||(e[1]=s=>o(r).title=s),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(v,{icon:o(te),loading:o(p),"native-type":"submit",type:"primary",onClick:$},{default:a(()=>e[3]||(e[3]=[y("查询")])),_:1},8,["icon","loading"])]),_:1})]),_:1},8,["model"])]),_:1}),l(j,{span:24},{default:a(()=>[l(T,{accept:"image/png,image/jpeg",action:"/uploadFile",multiple:"","on-error":i,"on-success":i,"show-file-list":!1,style:{margin:"0 10px 10px 0"}},{default:a(()=>[l(v,{icon:o(oe),type:"primary"},{default:a(()=>e[4]||(e[4]=[y("本地上传")])),_:1},8,["icon"])]),_:1}),l(v,{icon:o(ne),type:"danger",onClick:L},{default:a(()=>e[5]||(e[5]=[y("删除")])),_:1},8,["icon"])]),_:1})]),_:1}),se((u(),x(N,{class:"explorer-image-box",gutter:20},{default:a(()=>[(u(!0),S(re,null,ie(o(g),(s,Z)=>(u(),x(f,{key:Z,lg:6,md:8,sm:12,xl:6,xs:12},{default:a(()=>[l(b,{"body-style":{padding:"0",position:"relative"}},{default:a(()=>[l(A,{modelValue:s.id,"onUpdate:modelValue":h=>s.id=h,label:s.title,onChange:h=>F(h,s)},null,8,["modelValue","onUpdate:modelValue","label","onChange"]),l(K,{"preview-src-list":o(k),"preview-teleported":"",src:s.image},null,8,["preview-src-list","src"])]),_:2},1024)]),_:2},1024))),128)),o(g).length===0?(u(),x(f,{key:0,span:24},{default:a(()=>[l(W,{class:"vab-data-empty",description:"暂无数据"})]),_:1})):de("",!0)]),_:1})),[[Y,o(p)]]),l(X,{"current-page":o(r).pageNo,"page-size":o(r).pageSize,total:o(C),onCurrentChange:R,onSizeChange:M},null,8,["current-page","page-size","total"])]),_:1})]),_:1})]),_:1})])}}}),xe=ue(me,[["__scopeId","data-v-04c850e0"]]);export{xe as default};
