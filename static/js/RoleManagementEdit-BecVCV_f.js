/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-02-28 13:58:02 
 */
import{k as p,C as B,aE as j,f as D,_ as F}from"./index-DuUxtc1j.js";import{d as O,r as u,f as y,a5 as S,R as T,o as I,S as s,Y as l,ap as N,u as a,aq as U,aM as $,b as k,bv as q,X as z,a7 as A,a6 as K,i as P,k as X}from"./vsv-element-plus-CcCXTk6v.js";function ee(d){return p({url:"/roleManagement/getList",method:"get",params:d})}const Y=d=>p({url:"/roleManagement/doEdit",method:"post",data:d}),te=d=>p({url:"/roleManagement/doDelete",method:"post",data:d}),G={class:"vab-tree-border"},H=O({name:"RoleManagementEdit",__name:"RoleManagementEdit",emits:["fetch-data"],setup(d,{expose:v,emit:h}){const w=h,c=u(),b=u(null),o=y({role:"",btnRolesCheckedList:["read:system","write:system","delete:system","read:index","write:index","delete:index","read:index","write:index","delete:index"]}),R=y({role:[{required:!0,trigger:"blur",message:"请输入角色码"}]}),m=u(""),r=u(!1),g=u([]);v({showEdit:t=>{r.value=!0,X(()=>{t?(m.value="编辑",Object.assign(o,t)):(m.value="添加",o.btnRolesCheckedList=["read:system","write:system","delete:system","read:index","write:index","delete:index","read:index","write:index","delete:index"])})}});const x=()=>{var t,e;(t=c.value)==null||t.clearValidate(),(e=c.value)==null||e.resetFields(),w("fetch-data")},V=async()=>{const{data:t}=await j();g.value=t.list},E=()=>{var t;(t=c.value)==null||t.validate(async e=>{if(e){const i={"treeArray:":b.value.getCheckedKeys()},{msg:_}=await Y({...o,...i});await D(_,"success","hey"),await x(),r.value=!1}})};return S(()=>{V()}),(t,e)=>{const f=$,i=U,_=q,C=N,M=A,L=B;return I(),T(L,{modelValue:a(r),"onUpdate:modelValue":e[2]||(e[2]=n=>P(r)?r.value=n:null),"append-to-body":"",title:a(m),width:"500px",onClose:x},{footer:s(()=>[l(M,{type:"primary",onClick:E},{default:s(()=>e[3]||(e[3]=[K("保存")])),_:1})]),default:s(()=>[l(C,{ref_key:"formRef",ref:c,"label-width":"80px",model:a(o),rules:a(R)},{default:s(()=>[l(i,{label:"角色码",prop:"role"},{default:s(()=>[l(f,{modelValue:a(o).role,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).role=n),clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"菜单"},{default:s(()=>[k("div",G,[l(_,{ref_key:"treeRef",ref:b,data:a(g),"default-checked-keys":a(o).menuCheckedList,"default-expanded-keys":[],"node-key":"path","show-checkbox":""},{default:s(({data:n})=>[k("span",null,z(n.meta.title),1)]),_:1},8,["data","default-checked-keys"])])]),_:1}),l(i,{label:"按钮权限"},{default:s(()=>[l(f,{modelValue:a(o).btnRolesCheckedList,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).btnRolesCheckedList=n),clearable:"",rows:3,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),J=F(H,[["__scopeId","data-v-09484dba"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{ae as R,J as _,te as d,ee as g};
