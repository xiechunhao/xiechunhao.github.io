/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2024-09-26 21:23:19 
 */
import{d as V,b as P,K as e,S as o,B as n,W as T,o as p,u as r,ab as F,Y as _,P as G,A as g,R as K}from"./vsv-element-plus-CleF0dO9.js";import{g as S,d as W}from"./menuManagement-DmaoEPGl.js";import{G as Y}from"./index-wMoNB7-P.js";import"./vsv-icon-DrZkBOPN.js";import"./vsv-nprogress-D5kd6v05.js";const j={class:"menu-management-container no-background-container auto-height-container"},U=V({name:"MenuManagement",__name:"index",setup(z){const u=ref(),i=ref(null),f=ref([]),y=reactive({children:"children",label:"label"}),h=ref([]),d=ref(!0),w=()=>{i.value.showEdit()},k=(t={})=>{i.value.showEdit(t)},C=(t={})=>{t.path&&$baseConfirm("您确定要删除当前项吗",null,async()=>{const{msg:a}=await W({paths:t.path});$baseMessage(a,"success","hey"),await c()})},c=async(t={})=>{d.value=!0;const{data:a}=await Y({role:t});h.value=a.list,d.value=!1},x=({role:t})=>{c(t)};return onActivated(()=>{var t;(t=u.value)==null||t.doLayout()}),onBeforeMount(()=>{S().then(({data:t})=>{f.value=t.list}),c()}),(t,a)=>{const D=n("el-tree"),b=n("vab-card"),v=n("el-col"),m=n("el-button"),B=n("vab-query-form-top-panel"),N=n("vab-query-form"),l=n("el-table-column"),R=n("vab-icon"),q=n("el-empty"),E=n("el-table"),L=n("el-row"),M=n("menu-management-edit"),$=T("loading");return p(),P("div",j,[e(L,{gutter:20},{default:o(()=>[e(v,{lg:4,md:8,sm:24,xl:4,xs:24},{default:o(()=>[e(b,{class:"auto-height-card"},{default:o(()=>[e(D,{data:r(f),"default-expanded-keys":["root"],"node-key":"id",props:r(y),onNodeClick:x},null,8,["data","props"])]),_:1})]),_:1}),e(v,{lg:20,md:16,sm:24,xl:20,xs:24},{default:o(()=>[e(b,{class:"auto-height-card"},{default:o(()=>[e(N,null,{default:o(()=>[e(B,{span:12},{default:o(()=>[e(m,{icon:r(F),type:"primary",onClick:w},{default:o(()=>a[0]||(a[0]=[_("添加")])),_:1},8,["icon"])]),_:1})]),_:1}),G((p(),g(E,{ref_key:"tableRef",ref:u,border:"",data:r(h),"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{empty:o(()=>[e(q,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(l,{align:"center",label:"标题","min-width":"140",prop:"meta.title","show-overflow-tooltip":""}),e(l,{align:"center",label:"name","min-width":"120",prop:"name","show-overflow-tooltip":""}),e(l,{align:"center",label:"路径","min-width":"140",prop:"path","show-overflow-tooltip":""}),e(l,{align:"center",label:"vue文件路径","min-width":"120",prop:"component","show-overflow-tooltip":""}),e(l,{align:"center",label:"图标"},{default:o(({row:s})=>[s.meta.icon?(p(),g(R,{key:0,icon:s.meta.icon},null,8,["icon"])):K("",!0)]),_:1}),e(l,{align:"center",label:"操作",width:"150"},{default:o(({row:s})=>[e(m,{text:"",type:"primary",onClick:A=>k(s)},{default:o(()=>a[1]||(a[1]=[_("编辑")])),_:2},1032,["onClick"]),e(m,{text:"",type:"danger",onClick:A=>C(s)},{default:o(()=>a[2]||(a[2]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,r(d)]])]),_:1})]),_:1})]),_:1}),e(M,{ref_key:"editRef",ref:i,onFetchData:c},null,512)])}}});export{U as default};
